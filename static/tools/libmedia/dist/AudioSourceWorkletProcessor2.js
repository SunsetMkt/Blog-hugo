var processor;(()=>{"use strict";var t={187:(t,e,r)=>{r.d(e,{A:()=>o});var n=r(4467),i=r(9906),s=r(4405);class o{constructor(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];(0,n.A)(this,"data",void 0),(0,n.A)(this,"buffer",void 0),(0,n.A)(this,"byteStart",void 0),(0,n.A)(this,"pos",void 0),(0,n.A)(this,"size",void 0),(0,n.A)(this,"littleEndian",void 0),this.buffer=t,this.data=t instanceof Uint8Array?new DataView(t.buffer):t.view,this.byteStart=t instanceof Uint8Array?t.byteOffset:0,this.pos=0,this.size=t.byteLength,this.littleEndian=!e}writeUint8(t){this.data.setUint8(this.pos+++this.byteStart,t)}writeUint16(t){this.data.setUint16(this.pos+this.byteStart,t,this.littleEndian),this.pos+=2}writeUint24(t){const e=3840&t,r=240&t,n=15&t;this.littleEndian?(this.writeUint8(n),this.writeUint8(r),this.writeUint8(e)):(this.writeUint8(e),this.writeUint8(r),this.writeUint8(n))}writeUint32(t){this.data.setUint32(this.pos+this.byteStart,t,this.littleEndian),this.pos+=4}writeUint64(t){this.data.setBigUint64(this.pos+this.byteStart,t,this.littleEndian),this.pos+=8}writeInt8(t){this.data.setInt8(this.pos+++this.byteStart,t)}writeInt16(t){this.data.setInt16(this.pos+this.byteStart,t,this.littleEndian),this.pos+=2}writeInt24(t){this.writeUint24(t<0?t+16777216:t)}writeInt32(t){this.data.setInt32(this.pos+this.byteStart,t,this.littleEndian),this.pos+=4}writeInt64(t){this.data.setBigInt64(this.pos+this.byteStart,t,this.littleEndian),this.pos+=8}writeFloat(t){this.data.setFloat32(this.pos+this.byteStart,t,this.littleEndian),this.pos+=4}writeDouble(t){this.data.setFloat64(this.pos+this.byteStart,t,this.littleEndian),this.pos+=8}getPos(){return this.pos}seek(t){t>this.size&&(t=this.size),this.pos=Math.max(0,t)}skip(t){this.seek(this.pos+t)}back(t){this.seek(this.pos-t)}remainingSize(){return this.size-this.pos}writeBuffer(t){let e=t.length;this.remainingSize()<e&&(e=this.remainingSize(),i.R8(`the remaining buffer size is smaller then the wrote buffer, hope set ${t.length}, but set ${e}`,"packages/common/src/io/BufferWriter.ts",202)),this.buffer.set(t,this.pos),this.pos+=t.length}writeString(t){const e=s.l(t);return this.writeBuffer(e),e.length}getWroteBuffer(){return this.buffer.subarray(0,this.pos)}resetBuffer(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.buffer=t,this.data=t instanceof Uint8Array?new DataView(t.buffer):t.view,this.byteStart=t instanceof Uint8Array?t.byteOffset:0,this.pos=0,this.size=t.byteLength,this.littleEndian=!e}}},294:(t,e,r)=>{r.d(e,{A:()=>o});var n=r(2837),i=r(2494);let s;typeof setImmediate===i.s0&&(0,n.A)(setImmediate)&&(s=setImmediate),s=typeof MessageChannel===i.s0&&(0,n.A)(MessageChannel)?function(t){const e=new MessageChannel;e.port1.onmessage=t,e.port2.postMessage(1)}:"function"==typeof setTimeout?setTimeout:function(t){setTimeout(t)};const o=s},399:(t,e,r)=>{r.d(e,{A:()=>s});var n=r(8590),i=r(2494);function s(t,e,r){if(n.Pc(t))return n.YO(r)?t.apply(e,r):e!==i.ZH?t.call(e,r):r!==i.ZH?t(r):t()}},652:(t,e,r)=>{r.d(e,{A:()=>S});var n=r(9882),i=r(7921),s=r(3463),o=r(8288),a=r(1762),f=r(294);let h;const u=i.USE_THREADS||!o.A.chrome&&s.A.atomics||o.A.checkVersion(o.A.majorVersion,"94",!0);function c(t,e,r,n){if(u)return Atomics.add(h(r),t>>>n,e);{const i=h(r),s=t>>>n,o=i[s];return i[s]+=e,o}}function A(t,e,r,n){if(u)return Atomics.sub(h(r),t>>>n,e);{const i=h(r),s=t>>>n,o=i[s];return i[s]-=e,o}}function l(t,e,r,n){if(u)return Atomics.and(h(r),t>>>n,e);{const i=h(r),s=t>>>n,o=i[s];return i[s]&=e,o}}function d(t,e,r,n){if(u)return Atomics.or(h(r),t>>>n,e);{const i=h(r),s=t>>>n,o=i[s];return i[s]|=e,o}}function p(t,e,r,n){if(u)return Atomics.xor(h(r),t>>>n,e);{const i=h(r),s=t>>>n,o=i[s];return i[s]^=e,o}}function g(t,e,r,n){if(u)return Atomics.store(h(r),t>>>n,e);{const i=h(r),s=t>>>n,o=i[s];return i[s]=e,o}}function y(t,e,r){return u?Atomics.load(h(e),t>>>r):h(e)[t>>>r]}function b(t,e,r,n,i){if(u)return Atomics.compareExchange(h(n),t>>>i,e,r);{const s=h(n),o=t>>>i,a=s[o];return a===e&&(s[o]=r),a}}function m(t,e,r,n){if(u)return Atomics.exchange(h(r),t>>>n,e);{const i=h(r),s=t>>>n,o=i[s];return i[s]=e,o}}function w(t,e){return u?Atomics.notify(h(16),t>>>2,e):void 0}const v={ok:0,"not-equal":1,"timed-out":2};function I(t,e){return v[Atomics.wait(h(16),t>>>2,e)]}function x(t,e,r){return v[Atomics.wait(h(16),t>>>2,e,r)]}async function B(t,e){if(Atomics.waitAsync){const r=Atomics.waitAsync(h(16),t>>>2,e);return r.async?v[await r.value]:v[r.value]}if(y(t)!==e)return 1;for(;y(t)===e;)await new Promise((t=>{(0,f.A)((()=>{t()}))}));return 0}async function C(t,e,r){if(Atomics.waitAsync){const n=Atomics.waitAsync(h(16),t>>>2,e,r);return n.async?v[await n.value]:v[n.value]}if(y(t)!==e)return 1;{const n=(0,a.A)();for(;y(t)===e&&(0,a.A)()-n<r;)await new Promise((t=>{(0,f.A)((()=>{t()}))}));return y(t)!==e?0:2}}function S(t){h=t,(0,n.$Z)({add:c,sub:A,and:l,or:d,xor:p,store:g,load:y,compareExchange:b,exchange:m,notify:w,wait:I,waitTimeout:x,waitAsync:B,waitTimeoutAsync:C})}},665:(t,e,r)=>{r.d(e,{C:()=>h,X$:()=>f,__:()=>o});var n=r(8590),i=r(3321),s=r(2494);function o(t,e){for(let r in t)if(e(t[r],r)===s.W8)break}function a(t,e){return n.Ik(t)?n.Ik(e)?(o(e,(function(e,r){t[r]=e})),t):t:e}function f(t,e,r){return a(a(t,e),r)}function h(t,e){let r=t;return n.YO(t)?e?(r=[],i.__(t,(function(t,n){r[n]=h(t,e)}))):r=t.slice():n.Ik(t)&&(r={},o(t,(function(t,n){r[n]=e?h(t,e):t}))),r}},882:(t,e,r)=>{r.d(e,{Ts:()=>u});var n=r(3669),i=r(9658),s=r(9906),o=r(9179),a=r(9882);const f="packages/cheap/src/thread/asm/atomics.ts";let h;function u(t,e,r){try{if(!("function"==typeof SharedArrayBuffer&&t.buffer instanceof SharedArrayBuffer))return;{const s=i.bx(n.E_(o.A),{shared:!0,initial:e,maximum:r});h=new WebAssembly.Instance(new WebAssembly.Module(s),{env:{memory:t}})}(0,a.$Z)({add:function(t,e,r){switch(r){case 5:case 3:return 255&h.exports.add8(t,e);case 12:return h.exports.add8(t,e);case 14:return h.exports.add16(t,e);case 7:return 65535&h.exports.add16(t,e);case 16:return h.exports.add32(t,e);case 9:return 4294967295&h.exports.add32(t,e);case 21:return h.exports.add64(t,e);case 22:return BigInt.asUintN(64,h.exports.add64(t,e))}},sub:function(t,e,r){switch(r){case 5:case 3:return 255&h.exports.sub8(t,e);case 12:return h.exports.sub8(t,e);case 14:return h.exports.sub16(t,e);case 7:return 65535&h.exports.sub16(t,e);case 16:return h.exports.sub32(t,e);case 9:return 4294967295&h.exports.sub32(t,e);case 21:return h.exports.sub64(t,e);case 22:return BigInt.asUintN(64,h.exports.sub64(t,e))}},and:function(t,e,r){switch(r){case 5:case 3:return 255&h.exports.and8(t,e);case 12:return h.exports.and8(t,e);case 14:return h.exports.and16(t,e);case 7:return 65535&h.exports.and16(t,e);case 16:return h.exports.and32(t,e);case 9:return 4294967295&h.exports.and32(t,e);case 21:return h.exports.and64(t,e);case 22:return BigInt.asUintN(64,h.exports.and64(t,e))}},or:function(t,e,r){switch(r){case 5:case 3:return 255&h.exports.or8(t,e);case 12:return h.exports.or8(t,e);case 14:return h.exports.or16(t,e);case 7:return 65535&h.exports.or16(t,e);case 16:case 9:return h.exports.or32(t,e);case 21:return h.exports.or64(t,e);case 22:return BigInt.asUintN(64,h.exports.or64(t,e))}},xor:function(t,e,r){switch(r){case 5:case 3:return 255&h.exports.xor8(t,e);case 12:return h.exports.xor8(t,e);case 14:return h.exports.xor16(t,e);case 7:return 65535&h.exports.xor16(t,e);case 16:case 9:return h.exports.xor32(t,e);case 21:return h.exports.xor64(t,e);case 22:return BigInt.asUintN(64,h.exports.xor64(t,e))}},store:function(t,e,r){switch(r){case 5:case 12:case 3:return h.exports.store8(t,e);case 14:case 7:return h.exports.store16(t,e);case 16:case 9:return h.exports.store32(t,e);case 21:case 22:return h.exports.store64(t,e)}},load:function(t,e){switch(e){case 5:case 3:return 255&h.exports.load8(t);case 12:return h.exports.load8(t);case 14:case 7:return h.exports.load16(t);case 16:return h.exports.load32(t);case 9:return 4294967295&h.exports.load32(t);case 21:return h.exports.load64(t);case 22:return BigInt.asUintN(64,h.exports.load64(t))}},compareExchange:function(t,e,r,n){switch(n){case 5:case 3:return 255&h.exports.compare_exchange8(t,e,r);case 12:return h.exports.compare_exchange8(t,e,r);case 14:return h.exports.compare_exchange16(t,e,r);case 7:return 65535&h.exports.compare_exchange16(t,e,r);case 16:return h.exports.compare_exchange32(t,e,r);case 9:return 4294967295&h.exports.compare_exchange32(t,e,r);case 21:return h.exports.compare_exchange64(t,e,r);case 22:return BigInt.asUintN(64,h.exports.compare_exchange64(t,e,r))}},exchange:function(t,e,r){switch(r){case 5:case 3:return 255&h.exports.exchange8(t,e);case 12:return h.exports.exchange8(t,e);case 14:return h.exports.exchange16(t,e);case 7:return 65535&h.exports.exchange16(t,e);case 16:return h.exports.exchange32(t,e);case 9:return 4294967295&h.exports.exchange32(t,e);case 21:return h.exports.exchange64(t,e);case 22:return BigInt.asUintN(64,h.exports.exchange64(t,e))}},notify:function(t,e){return h.exports.notify(t,e)},wait:function(t,e){return h.exports.wait(t,e)},waitTimeout:function(t,e,r){return h.exports.waitTimeout(t,e,BigInt(0|r)*BigInt(1e6))}})}catch(t){s.R8("atomics asm not support, cannot use asm atomics function",f,289)}}},1042:(t,e,r)=>{r.d(e,{A:()=>c});var n=r(4467),i=r(8590),s=r(3321),o=r(5041),a=r(665),f=r(8927),h=r(399),u=r(2494);class c{constructor(t){(0,n.A)(this,"ns",void 0),(0,n.A)(this,"listeners",void 0),(0,n.A)(this,"nativeListeners",void 0),this.ns=t||u.W8,this.listeners={}}fire(t,e,r){let n=this,f=i.Yj(t)?n.parse(t):t,c=n.listeners[f.type],A=u.rT;if(c){c=a.C(c);const t=e&&e[0]instanceof o.A?e[0]:u.ZH;s.__(c,(function(i){if(!d(f.ns,i,u.rT)||!s.zy(c,i)||r&&!r(f,e,i))return;t&&(t.listener=i.fn);let o=(0,h.A)(i.fn,i.ctx,e);return t&&(t.listener=u.ZH),i.num=i.num?i.num+1:1,i.num===i.max&&n.off(f,i.fn),t&&(o===u.W8?t.prevent().stop():t.isStopped&&(o=u.W8)),o===u.W8?A=u.W8:void 0}))}return A}on(t,e){const r=this,n=r.listeners,o=i.Pc(e)?{fn:e}:e;if(i.Ik(o)&&i.Pc(o.fn)){const e=i.Yj(t)?r.parse(t):t;o.ns=e.ns,s.VC(n[e.type]||(n[e.type]=[]),o)}return this}one(t,e){return i.Pc(e)?e={fn:e,max:1}:e.max=1,this.on(t,e)}off(t,e){const r=this,n=r.listeners;if(t){const o=i.Yj(t)?r.parse(t):t,f=o.type,h=o.ns,c=l(e),A=function(t,e){s.__(t,(function(e,r){c(e)&&t.splice(r,1)}),u.rT),t.length||delete n[e]},p=function(t,e){s.__(t,(function(e,r){d(h,e)&&t.splice(r,1)}),u.rT),t.length||delete n[e]};f?n[f]&&A(n[f],f):h&&a.__(n,p)}else r.listeners={}}has(t,e){let r=this.listeners,n=i.Yj(t)?this.parse(t):t,o=n.type,f=n.ns,h=u.rT,c=l(e);var A;return o?r[o]&&(A=r[o],s.__(A,(function(t){if(c(t))return h=u.W8}))):f&&a.__(r,(function(t){return s.__(t,(function(t){if(d(f,t))return h=u.W8})),h})),!h}parse(t){const e={type:t,ns:u.u1};if(this.ns){const r=f.qh(t,u.ZG);r>=0&&(e.type=f.di(t,0,r),e.ns=f.di(t,r+1))}return e}}function A(){return u.rT}function l(t){return i.Pc(t)?function(e){return t===e.fn}:A}function d(t,e,r){const{ns:n}=e;return n&&t?n===t:r?u.rT:u.W8}},1621:(t,e,r)=>{r.d(e,{z:()=>i});var n=r(4467);class i{constructor(){(0,n.A)(this,"table",void 0),(0,n.A)(this,"pointer",void 0),(0,n.A)(this,"nodes",void 0),this.table=new WebAssembly.Table({initial:16,element:"anyfunc",address:"i32",index:"i32"}),this.pointer=6,this.nodes=[{pointer:this.pointer,length:10,free:!0}]}getPointer(){return this.pointer}alloc(t){let e=this.findFree(t);if(e<0){const r=this.nodes[this.nodes.length-1],n=t-(r.free?r.length:0);this.table.grow(n),r.free?r.length=r.length+n:this.nodes.push({pointer:r.pointer+r.length,length:n,free:!0}),e=this.findFree(t)}const r=this.nodes[e];return r.length>t&&(this.nodes.splice(e+1,0,{pointer:r.pointer+t,length:r.length-t,free:!0}),r.length=t),r.free=!1,r.pointer}free(t){let e=this.findNode(t);const r=this.nodes[e];if(r&&!r.free){const t=this.nodes[e-1],n=this.nodes[e+1];t&&t.free?n&&n.free?(t.length+=r.length+n.length,this.nodes.splice(e,2)):(t.length+=r.length,this.nodes.splice(e,1)):n&&n.free?(r.length+=n.length,this.nodes.splice(e+1,1),r.free=!0):r.free=!0}if(1===this.nodes.length&&this.nodes[0].free){const t=new WebAssembly.Table({initial:16,element:"anyfunc",address:"i32",index:"i32"});this.pointer=6,this.nodes=[{pointer:this.pointer,length:10,free:!0}];for(let e=1;e<this.pointer;e++)t.set(e,this.table.get(e));this.table=t}}get(t){return this.table.get(t)}set(t,e){if(t<0||t>=this.pointer)throw new RangeError("index out of bound");this.table.set(t,e)}inspect(){return this.nodes}findFree(t){let e=-1;for(let r=0;r<this.nodes.length;r++)if(this.nodes[r].length>=t&&this.nodes[r].free){e=r;break}return e}findNode(t){let e=-1;for(let r=0;r<this.nodes.length;r++)if(this.nodes[r].pointer===t){e=r;break}return e}}},1755:(t,e,r)=>{r.d(e,{Eb:()=>u,Gy:()=>h,aI:()=>c});var n=r(4365),i=r(9983),s=r(2320),o=r(3674),a=r(9906);const f="packages/avutil/src/util/mem.ts";function h(t){const e=n.s_.malloc(t);return e||a.h2("can not alloc buffer",f,40),(0,o.sO)(e,0,t),e}function u(t){n.s_.free(t)}function c(t){n.s_.free(i.f[20](t)),s.M[20](t,0)}},1762:(t,e,r)=>{function n(){return Date.now()}r.d(e,{A:()=>n})},2284:(t,e,r)=>{function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}r.d(e,{A:()=>n})},2320:(t,e,r)=>{r.d(e,{$:()=>o,M:()=>s});var n=r(665),i=r(3601);const s={4:i.A,5:i.A,2:i.A,3:i.A,6:i.A,7:i.A,8:i.A,9:i.A,10:i.A,11:i.A,12:i.A,13:i.A,14:i.A,15:i.A,16:i.A,17:i.A,18:i.A,19:i.A,20:i.A,0:i.A,1:i.A,22:i.A,21:i.A,23:i.A,24:i.A,25:i.A,copy:i.A,fill:i.A};function o(t){n.X$(s,t)}},2327:(t,e,r)=>{r.d(e,{A:()=>i});var n=r(2284);function i(t,e){if("object"!=(0,n.A)(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!=(0,n.A)(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}},2494:(t,e,r)=>{r.d(e,{Cq:()=>s,Cy:()=>a,M_:()=>A,TK:()=>l,W8:()=>i,ZG:()=>u,ZH:()=>o,aV:()=>f,rT:()=>n,s0:()=>h,u1:()=>p,x7:()=>d});const n=!0,i=!1,s=null,o=void 0,a=-1,f="undefined",h="function",u=".",c=typeof window!==f?window:o,A=(typeof document!==f&&document,typeof globalThis!==f?globalThis:typeof r.g!==f?r.g:c),l=typeof self!==f?self:A,d=function(){},p=(Object.freeze({}),Object.freeze([]),"")},2734:(t,e,r)=>{r.d(e,{A:()=>i});var n=r(7698);function i(t,e){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=e.split("."),s=t.split(".");for(let t=0;t<s.length;t++){if(r&&t==s.length-1&&(0,n.A)(s[t])>=(0,n.A)(i[t]))return s.length>=i.length;if((0,n.A)(s[t])>(0,n.A)(i[t]))return!0;if((0,n.A)(s[t])<(0,n.A)(i[t]))return!1;if(t===i.length-1&&t===s.length-1)return r;if(t===i.length-1)return!0;if(t===s.length-1)return!1}return!0}},2837:(t,e,r)=>{r.d(e,{A:()=>o});var n=r(8590),i=r(4566),s=r(8927);function o(t){return n.Pc(t)&&s.zy((0,i.A)(t),"[native code]")}},2935:(t,e,r)=>{r.d(e,{Ay:()=>a,S3:()=>o});var n=r(4467),i=r(1042),s=r(5967);const o="request";class a extends i.A{constructor(t){super(!0),(0,n.A)(this,"port",void 0),(0,n.A)(this,"requestMap",void 0),(0,n.A)(this,"seq",void 0),(0,n.A)(this,"closed",void 0),this.port=t,this.port.onmessage=this.handle.bind(this),this.seq=0,this.requestMap=new Map,this.port.start(),this.closed=!1}handle(t){const e=t.data,r=e.type,n=e.data;if("notify"===r)this.fire("notify",n);else if("reply"===r){const t=this.requestMap.get(n.seq);t&&((0,s.A)(n.result)?t.resolve(n.result):n.error?t.reject(n.error):t.resolve(void 0),this.requestMap.delete(n.seq))}else"request"===r&&this.fire(o,n)}notify(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];this.port.postMessage({type:"notify",data:{method:t,params:e}},r)}async request(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return new Promise(((n,i)=>{const s=this.seq++;this.requestMap.set(s,{resolve:n,reject:i}),this.port.postMessage({type:"request",data:{seq:s,method:t,params:e}},r)}))}reply(t,e,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];const i={seq:t.seq};(0,s.A)(e)?i.result=e:r&&(i.error=r),null!=n&&n.length?this.port.postMessage({type:"reply",data:i},n):this.port.postMessage({type:"reply",data:i})}getPort(){return this.port}destroy(){this.requestMap.size&&(this.requestMap.forEach((t=>{t.reject("ipc port close")})),this.requestMap.clear()),this.port&&(this.port.close(),this.port=null),this.closed=!0}}},2990:(t,e,r)=>{function n(){return"function"==typeof registerProcessor&&"number"==typeof sampleRate&&"number"==typeof currentFrame&&"number"==typeof currentTime}r.d(e,{A:()=>n})},3064:(t,e,r)=>{r.d(e,{Ts:()=>c});var n=r(9983),i=r(2320),s=r(9257),o=r(3669),a=r(9658),f=r(9906);const h="packages/cheap/src/asm/memory.ts";let u;function c(t,e,r){try{const f=a.bx(o.E_(s.A),{shared:"function"==typeof SharedArrayBuffer&&t.buffer instanceof SharedArrayBuffer,initial:e,maximum:r});u=new WebAssembly.Instance(new WebAssembly.Module(f),{env:{memory:t}}),(0,n.$)({4:u.exports.readU8,5:u.exports.readU8,2:u.exports.readU8,3:u.exports.readU8,6:u.exports.readU16,7:u.exports.readU16,8:t=>u.exports.read32(t)>>>0,9:t=>u.exports.read32(t)>>>0,10:t=>BigInt.asUintN(64,u.exports.read64(t)),22:t=>BigInt.asUintN(64,u.exports.read64(t)),11:u.exports.read8,12:u.exports.read8,13:u.exports.read16,14:u.exports.read16,15:u.exports.read32,16:u.exports.read32,17:u.exports.read64,21:u.exports.read64,18:u.exports.readf32,19:u.exports.readf64,20:t=>u.exports.read32(t)>>>0,25:t=>u.exports.read32(t)>>>0}),(0,i.$)({4:u.exports.write8,5:u.exports.write8,2:u.exports.write8,3:u.exports.write8,6:u.exports.write16,7:u.exports.write16,8:u.exports.write32,9:u.exports.write32,10:u.exports.write64,22:u.exports.write64,11:u.exports.write8,12:u.exports.write8,13:u.exports.write16,14:u.exports.write16,15:u.exports.write32,16:u.exports.write32,17:u.exports.write64,21:u.exports.write64,18:u.exports.writef32,19:u.exports.writef64,20:u.exports.write32,25:u.exports.write32,copy:u.exports.copy,fill:u.exports.fill})}catch(t){f.R8("memory asm not support, cannot use asm memory function",h,122)}}},3321:(t,e,r)=>{r.d(e,{TF:()=>f,VC:()=>a,__:()=>s,zy:()=>h});var n=r(8590),i=r(2494);function s(t,e,r){if(!t)return;const{length:n}=t;if(n)if(r)for(let r=n-1;r>=0&&e(t[r],r)!==i.W8;r--);else for(let r=0;r<n&&e(t[r],r)!==i.W8;r++);}function o(t,e){t[t.length]=e}function a(t,e){!function(t,e,r){n.YO(e)?s(e,(function(e){r(t,e)})):r(t,e)}(t,e,o)}function f(t,e,r){let n=0;return s(t,(function(s,o){(r===i.W8?s==e:s===e)&&(t.splice(o,1),n++)}),i.rT),n}function h(t,e,r){return function(t,e,r){let n=i.Cy;return s(t,(function(t,s){if(r===i.W8?t==e:t===e)return n=s,i.W8})),n}(t,e,r)>=0}},3389:(t,e,r)=>{r.d(e,{II:()=>o,hb:()=>s});let n=4;function i(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=n;for(;r%e;)r+=1;return n=r+t,r}const s=i(4,4),o=i(4,4);i(4,4),i(8,8)},3463:(t,e,r)=>{r.d(e,{A:()=>a});var n=r(2990),i=r(6332),s=r(8288),o=r(7084);const a=function(){let t="function"==typeof Blob,e="object"==typeof WebAssembly&&"function"==typeof WebAssembly.instantiate,r="function"==typeof fetch,a="object"==typeof document&&document.createElement("canvas"),f=a&&!!a.getContext("webgl"),h="function"==typeof OffscreenCanvas,u="function"==typeof Worker,c="function"==typeof ArrayBuffer,A="object"==typeof Atomics&&"Atomics"===Atomics[Symbol.toStringTag],l="function"==typeof AudioContext||"function"==typeof webkitAudioContext,d="function"==typeof AudioWorklet,p="function"==typeof VideoDecoder,g="function"==typeof VideoEncoder,y="function"==typeof AudioDecoder,b="function"==typeof AudioEncoder,m="function"==typeof SharedArrayBuffer,w="function"==typeof MediaSource||"function"==typeof ManagedMediaSource,v="function"==typeof Proxy,I=(u||(0,i.A)()||(0,n.A)())&&m&&A&&v,x="function"==typeof WebAssembly.Suspending&&"function"==typeof WebAssembly.promising;(s.A.safari&&!s.A.checkVersion(s.A.majorVersion,"11",!0)||o.A.ios&&!s.A.checkVersion(o.A.version,"11",!0))&&(e=!1),s.A.chrome&&!s.A.checkVersion(s.A.majorVersion,"94",!0)&&(p=!1,y=!1),(s.A.safari&&!s.A.checkVersion(s.A.majorVersion,"17",!0)||o.A.ios&&!s.A.checkVersion(o.A.version,"17",!0))&&(p=!1);let B="object"==typeof navigator&&"object"==typeof navigator.gpu,C="function"==typeof MediaSourceHandle,S=e&&"function"==typeof WebAssembly.Global,k="function"==typeof MediaStreamTrackGenerator;return{blob:t,wasm:e,fetch:r,webgl:f,worker:u,mse:w,arrayBuffer:c,audioContext:l,audioWorklet:d,videoDecoder:p,videoEncoder:g,audioDecoder:y,audioEncoder:b,atomics:A,shareArrayBuffer:m,thread:I,webgpu:B,offscreenCanvas:h,workerMSE:C,webAssemblyGlobal:S,jspi:x,proxy:v,simd:(s.A.chrome||s.A.newEdge)&&s.A.checkVersion(s.A.majorVersion,"91",!0)||s.A.firefox&&s.A.checkVersion(s.A.majorVersion,"89",!0)||s.A.safari&&s.A.checkVersion(s.A.version,"16.4",!0)||o.A.ios&&s.A.checkVersion(o.A.version,"16.4",!0),wasmPlayerSupported:r&&e&&f&&l&&c&&S,wasmBaseSupported:e&&S&&c,trackGenerator:k}}()},3601:(t,e,r)=>{function n(t,e,r){throw new Error("unimplemented")}r.d(e,{A:()=>n})},3669:(t,e,r)=>{r.d(e,{E_:()=>s});var n=r(3321);const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function s(t){const e="function"==typeof atob?atob(t):function(t){function e(t){const e=i.indexOf(t);return-1===e?0:e}let r="";for(let n=0;n<t.length;){const i=e(t[n++]),s=e(t[n++]),o=e(t[n++]),a=e(t[n++]),f=i<<2|s>>4,h=(15&s)<<4|o>>2,u=(3&o)<<6|a;r+=String.fromCharCode(f),64!==o&&(r+=String.fromCharCode(h)),64!==a&&(r+=String.fromCharCode(u))}return r}(t),r=new Uint8Array(e.length);for(let t=0;t<e.length;t++)r[t]=e.charCodeAt(t);return r}const o={};n.__(["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"],((t,e)=>{o[t]=e}))},3674:(t,e,r)=>{r.d(e,{sO:()=>i});var n=r(4365);function i(t,e,r){(0,n.eq)().subarray(t,t+r).fill(e)}},3737:(t,e,r)=>{function n(t,e){if(!e.length)return null;if(1===e.length)return e[0];let r,n=0;for(r of e)n+=r.length;let i=new t(n),s=0;for(r of e)i.set(r,s),s+=r.length;return i}r.d(e,{A:()=>n})},4365:(t,e,r)=>{r.d(e,{Lv:()=>W,Tg:()=>Z,eq:()=>g,s_:()=>S});var n=r(5763),i=r(1621),s=r(2494),o=r(7921),a=r(3389),f=r(652),h=r(3064),u=r(882),c=r(5981),A=r(8288),l=r(7084),d=r(2990),p=r(6332);let g,y,b,m=-1,w=!0,v="",I=null,x=null,B=0,C=null,S=null,k=null,E=null,T=null,U=null,_=null,M=null,P=null,H=null,V=null,L=null,O={5:M,3:M,7:P,9:H,22:V,12:E,14:T,16:U,21:_};function z(){return!(!k||k.buffer===M.buffer)}function W(){return k.buffer}function j(){return z()&&Y(k.buffer),M}function F(){return z()&&Y(k.buffer),L}function D(t){return z()&&Y(k.buffer),O[t]}function N(){o.USE_THREADS?(g=j,y=F,b=D):(g=()=>M,y=()=>L,b=t=>O[t])}function Y(t){E=new Int8Array(t),T=new Int16Array(t),U=new Int32Array(t),_=new BigInt64Array(t),M=new Uint8Array(t),P=new Uint16Array(t),H=new Uint32Array(t),V=new BigUint64Array(t),L=new DataView(t),O={5:M,3:M,7:P,9:H,22:V,12:E,14:T,16:U,21:_}}async function Z(t){var e;N(),(0,c.A)((()=>S),y),(0,f.A)(b),k=t.memory,t.disableAsm||("function"==typeof BigInt&&BigInt!==Number&&(A.A.chrome&&A.A.checkVersion(A.A.majorVersion,"85",!0)||A.A.firefox&&A.A.checkVersion(A.A.majorVersion,"78",!0)||A.A.safari&&A.A.checkVersion(A.A.majorVersion,"15",!0)||l.A.ios&&A.A.checkVersion(l.A.version,"15",!0)||A.A.newEdge)&&h.Ts(k,o.HEAP_INITIAL,o.HEAP_MAXIMUM),(A.A.chrome&&A.A.checkVersion(A.A.majorVersion,"85",!0)||A.A.firefox&&A.A.checkVersion(A.A.majorVersion,"78",!0)||A.A.safari&&A.A.checkVersion(A.A.majorVersion,"15",!0)||l.A.ios&&A.A.checkVersion(l.A.version,"15",!0)||A.A.newEdge)&&u.Ts(k,o.HEAP_INITIAL,o.HEAP_MAXIMUM));var r;r=new n.A({buffer:k.buffer,memory:k,byteOffset:o.HEAP_OFFSET,maxHeapSize:64*o.HEAP_MAXIMUM*1024,growAllowed:!0,onResize:(t,e)=>(k.grow(e-t.byteLength>>>16),{buffer:k.buffer,byteOffset:o.HEAP_OFFSET})},!1),S&&S.removeUpdateHandle(Y),S=r,s.TK.CHeap&&(s.TK.CHeap.Allocator=S),S.addUpdateHandle(Y),Y(S.getBuffer()),t.stackPointer&&(B=t.stackSize,x=t.stackPointer,I=new WebAssembly.Global({value:"i32",mutable:!0},x+B),C=new i.z),m="number"==typeof t.id?t.id:Atomics.add(H,a.hb>>>2,1),v=null!==(e=t.name)&&void 0!==e?e:"anonymous",s.TK.CHeap={initThread:Z,Allocator:S,Table:C,ThreadId:m,ThreadName:v,Memory:k,Config:o,StackSize:B,StackTop:x,StackPointer:I,isMainThread:!1},w=!1}!(0,p.A)()&&!(0,d.A)()||(0,p.A)()&&!o.USE_THREADS?function(){var t,e,r,d,p,g,E,T;if(N(),(0,c.A)((()=>S),y),(0,f.A)(b),k=null!==(t=s.TK.CHeap)&&void 0!==t&&t.Memory?s.TK.CHeap.Memory:new WebAssembly.Memory({initial:o.HEAP_INITIAL,maximum:o.HEAP_MAXIMUM,shared:o.USE_THREADS,address:"i32",index:"i32"}),"function"==typeof BigInt&&BigInt!==Number&&(A.A.chrome&&A.A.checkVersion(A.A.majorVersion,"85",!0)||A.A.firefox&&A.A.checkVersion(A.A.majorVersion,"78",!0)||A.A.safari&&A.A.checkVersion(A.A.majorVersion,"15",!0)||l.A.ios&&A.A.checkVersion(l.A.version,"15",!0)||A.A.newEdge)&&o.USE_THREADS&&h.Ts(k,o.HEAP_INITIAL,o.HEAP_MAXIMUM),o.USE_THREADS&&(A.A.chrome&&A.A.checkVersion(A.A.majorVersion,"85",!0)||A.A.firefox&&A.A.checkVersion(A.A.majorVersion,"78",!0)||A.A.safari&&A.A.checkVersion(A.A.majorVersion,"15",!0)||l.A.ios&&A.A.checkVersion(l.A.version,"15",!0)||A.A.newEdge)&&u.Ts(k,o.HEAP_INITIAL,o.HEAP_MAXIMUM),S=null!==(e=s.TK.CHeap)&&void 0!==e&&e.Allocator?s.TK.CHeap.Allocator:new n.A({buffer:k.buffer,memory:k,byteOffset:o.HEAP_OFFSET,maxHeapSize:64*o.HEAP_MAXIMUM*1024,growAllowed:!0,onResize:(t,e)=>(k.grow(e-t.byteLength>>>16),{buffer:k.buffer,byteOffset:o.HEAP_OFFSET})}),S.addUpdateHandle(Y),Y(S.getBuffer()),B=null!==(r=s.TK.CHeap)&&void 0!==r&&r.StackSize?s.TK.CHeap.StackSize:o.STACK_SIZE,x=null!==(d=s.TK.CHeap)&&void 0!==d&&d.StackTop?s.TK.CHeap.StackTop:S.malloc(B),I=null!==(p=s.TK.CHeap)&&void 0!==p&&p.StackPointer?s.TK.CHeap.StackPointer:new WebAssembly.Global({value:"i32",mutable:!0},x+B),C=null!==(g=s.TK.CHeap)&&void 0!==g&&g.Table?s.TK.CHeap.Table:new i.z,m=null!==(E=s.TK.CHeap)&&void 0!==E&&E.ThreadId?s.TK.CHeap.ThreadId:0,v=null!==(T=s.TK.CHeap)&&void 0!==T&&T.ThreadName?s.TK.CHeap.ThreadName:"main",!s.TK.CHeap)if(o.USE_THREADS)Atomics.store(H,a.hb>>>2,m+1),Atomics.store(U,a.II>>>2,0);else{H[a.hb>>>2]=m+1;let t=a.II>>>2;U[t]=0}s.TK.CHeap||(s.TK.CHeap={Allocator:S,Table:C,ThreadId:m,ThreadName:v,Memory:k,Config:o,StackSize:B,StackTop:x,StackPointer:I,isMainThread:!0}),w=!0}():(s.TK.CHeap={initThread:Z,isMainThread:!1,Config:o},w=!1)},4405:(t,e,r)=>{r.d(e,{D:()=>a,l:()=>s});const n="function"==typeof TextEncoder?new TextEncoder:null,i="function"==typeof TextDecoder?new TextDecoder:null;function s(t){if(n)return n.encode(t);const e=[];for(let r=0;r<t.length;++r){let n=t.charCodeAt(r);n>=55296&&n<=57343&&(n=65536+((1023&n)<<10)|1023&t.charCodeAt(++r)),n<=127?e.push(n):n<=2047?(e.push(192|n>>6),e.push(128|63&n)):n<=65535?(e.push(224|n>>12),e.push(128|n>>6&63),e.push(128|63&n)):(e.push(240|n>>18),e.push(128|n>>12&63),e.push(128|n>>6&63),e.push(128|63&n))}return new Uint8Array(e)}function o(t){let e="";for(let r=0;r<t.length;){let n=t[r++>>>0];if(!(128&n)){e+=String.fromCharCode(n);continue}let i=63&t[r++>>>0];if(192==(224&n)){e+=String.fromCharCode((31&n)<<6|i);continue}let s=63&t[r++>>>0];if(n=224==(240&n)?(15&n)<<12|i<<6|s:(7&n)<<18|i<<12|s<<6|63&t[r++>>>0],n<65536)e+=String.fromCharCode(n);else{let t=n-65536;e+=String.fromCharCode(55296|t>>10,56320|1023&t)}}return e}function a(t){if(t instanceof Uint8Array&&i&&!("function"==typeof SharedArrayBuffer&&t.buffer instanceof SharedArrayBuffer))try{return i.decode(t)}catch(e){return o(t)}return o(t)}},4467:(t,e,r)=>{r.d(e,{A:()=>i});var n=r(9922);function i(t,e,r){return(e=(0,n.A)(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}},4566:(t,e,r)=>{r.d(e,{A:()=>i});var n=r(2494);function i(t,e){return t!=n.Cq&&t.toString?t.toString():e!==n.ZH?e:n.u1}},5041:(t,e,r)=>{r.d(e,{A:()=>s});var n=r(4467),i=r(2494);class s{constructor(t,e){(0,n.A)(this,"type",void 0),(0,n.A)(this,"phase",void 0),(0,n.A)(this,"ns",void 0),(0,n.A)(this,"target",void 0),(0,n.A)(this,"originalEvent",void 0),(0,n.A)(this,"isPrevented",void 0),(0,n.A)(this,"isStopped",void 0),(0,n.A)(this,"listener",void 0),this.type=t,this.phase=s.PHASE_CURRENT,e&&(this.originalEvent=e)}preventDefault(){const t=this;if(!t.isPrevented){const{originalEvent:e}=t;e&&e.preventDefault(),t.isPrevented=i.rT}return t}stopPropagation(){const t=this;if(!t.isStopped){const{originalEvent:e}=t;e&&e.stopPropagation(),t.isStopped=i.rT}return t}prevent(){return this.preventDefault()}stop(){return this.stopPropagation()}}(0,n.A)(s,"PHASE_CURRENT",0),(0,n.A)(s,"PHASE_UPWARD",1),(0,n.A)(s,"PHASE_DOWNWARD",i.Cy)},5419:(t,e,r)=>{r.d(e,{Tl:()=>u,s2:()=>h});var n,i=r(4467),s=r(7127),o=r(7601),a=r(9882),f=r(6332);function h(t){let e,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(0!==(e=a.p_(t,0,1,16,2)))do{2!=e&&0===a.p_(t,1,2,16,2)||!r&&(0,f.A)()&&a.uk(t,2)}while(0!==(e=a.p_(t,0,2,16,2)));return 0}function u(t){return 1!==a.jb(t,1,16,2)&&(a.M_(t,0,16,2),a.me(t,1)),0}n=class{constructor(){(0,i.A)(this,"atomic",void 0)}},(()=>{const t=n.prototype,e=new Map;e.set("atomic",{0:16,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),(0,o.A)(t,s.Og,!0),(0,o.A)(t,s.dc,4),(0,o.A)(t,s.g7,4),(0,o.A)(t,s.JY,e)})()},5763:(t,e,r)=>{r.d(e,{A:()=>l});var n=r(4467),i=r(5419),s=r(3389),o=r(3321),a=r(665),f=r(9906);const h="packages/cheap/src/allocator/AllocatorJS.ts",u=y(16),c=32,A=68;class l{constructor(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];var r,i,s,o;(0,n.A)(this,"buffer",void 0),(0,n.A)(this,"byteOffset",void 0),(0,n.A)(this,"heapOffset",void 0),(0,n.A)(this,"heapLength",void 0),(0,n.A)(this,"int32Array",void 0),(0,n.A)(this,"updates",void 0),(0,n.A)(this,"options",void 0),(0,n.A)(this,"shared",void 0),(0,n.A)(this,"handles",void 0),this.options=a.X$({growSize:1048576,maxHeapSize:2097152e3},t),this.handles=[],this.buffer=t.buffer,this.shared=!1,this.options.memory||this.buffer instanceof ArrayBuffer||this.buffer instanceof SharedArrayBuffer?(this.byteOffset=null!==(r=t.byteOffset)&&void 0!==r?r:0,this.heapOffset=m(this.byteOffset+g(c),null!==(i=t.byteLength)&&void 0!==i?i:this.buffer.byteLength),this.heapLength=w((null!==(s=t.byteLength)&&void 0!==s?s:this.buffer.byteLength)-this.heapOffset),this.int32Array=new Int32Array(this.buffer,this.heapOffset,y(this.heapLength)),this.updates=new Int32Array(this.buffer,this.byteOffset,c),"function"==typeof SharedArrayBuffer&&this.buffer instanceof SharedArrayBuffer&&(this.shared=!0)):f.h2("Expected buffer to be an instance of Buffer or ArrayBuffer",h,112),e&&(this.updates.fill(1),function(t){return 65===t[0]&&65===t[66]}(o=this.int32Array)||function(t){const e=t.length-69;x(t,65,1),t[1]=1,t[3]=68;for(let e=1;e<c;e++)t[3+e]=1;x(t,e,68),t[68]=1,t[70]=1}(o),function(t){let e=A;for(;e<t.length-1;){const r=I(t,e);r<2||r>=t.length-A?f.h2(`Got invalid sized chunk at ${g(e)} (${g(r)} bytes).`,h,568):S(t,e)?d(t,e,r):p(t,e,r),e+=r+2}}(this.int32Array))}addUpdateHandle(t){o.zy(this.handles,t)||this.handles.push(t)}removeUpdateHandle(t){o.TF(this.handles,t)}malloc_(t){(t=b(t,7))<16&&(t=16);const e=y(t),r=this.findFreeBlock(this.int32Array,e);if(r<=1)return 0;const n=I(this.int32Array,r);return n-(e+2)>=u?function(t,e,r,n,i){const s=e+r+2,o=n-(s-e);C(t,e,n,i),t[e-1]=-r,t[e+r]=-r,t[s-1]=-o,t[s+o]=-o,T(t,s,o,i)}(this.int32Array,r,e,n,this.updates):C(this.int32Array,r,n,this.updates),g(r)+this.heapOffset}malloc(t){this.shared&&((0,i.s2)(s.II,!0),this.checkBuffer());const e=this.malloc_(t);return this.shared&&(0,i.Tl)(s.II),e}calloc_(t,e){let r=t*e;r=r<16?16:b(r,7);const n=this.malloc_(r);if(0===n)return 0;const i=y(n-this.heapOffset);return this.int32Array.subarray(i,i+y(r)).fill(0),n}calloc(t,e){this.shared&&((0,i.s2)(s.II,!0),this.checkBuffer());const r=this.calloc_(t,e);return this.shared&&(0,i.Tl)(s.II),r}realloc_(t,e){if(0===t)return this.malloc_(e);const r=t;if(0===e)return this.free_(r),0;let n=y(t-=this.heapOffset),i=n,s=0;k(this.int32Array,n)&&(i=this.int32Array[n-1],s=n-i);const o=I(this.int32Array,i)-s;if(o>=y(b(e,7)))return r;{const t=this.malloc_(e);return 0===t?(this.free_(r),0):(this.int32Array.set(this.int32Array.subarray(n,n+o),y(t-this.heapOffset)),this.free_(r),t)}}realloc(t,e){return this.shared&&((0,i.s2)(s.II,!0),this.checkBuffer()),t=this.realloc_(t,e),this.shared&&(0,i.Tl)(s.II),t}alignedAlloc_(t,e){if(t<=8)return this.malloc_(e);const r=this.malloc_(e+t-1+4);if(0===r)return 0;const n=r+t-1+4&~(t-1);return this.int32Array[y(n-this.heapOffset)-1]=y(r-this.heapOffset),n}alignedAlloc(t,e){this.shared&&((0,i.s2)(s.II,!0),this.checkBuffer());const r=this.alignedAlloc_(t,e);return this.shared&&(0,i.Tl)(s.II),r}free_(t){if(0===t)return;let e=y(t-=this.heapOffset);if(k(this.int32Array,e)&&(e=this.int32Array[e-1]),S(this.int32Array,e))return;const r=I(this.int32Array,e),n=E(this.int32Array,e),i=function(t,e){const r=I(t,e);if(e+r+2>=t.length-2)return 0;const n=e+r+2;return t[n-1]<2?0:n}(this.int32Array,e);0!==n?0!==i?function(t,e,r,n,i,s){const o=I(t,e),a=I(t,i),f=i-e+a;C(t,e,o,s),C(t,i,a,s),t[e-1]=-f,t[i+a]=-f,T(t,e,f,s)}(this.int32Array,n,0,0,i,this.updates):U(this.int32Array,n,e,r,this.updates):0!==i?function(t,e,r,n,i){const s=I(t,e);C(t,e,s,i);const o=n+s+2;t[r-1]=-o,t[e+s]=-o,T(t,r,o,i)}(this.int32Array,i,e,r,this.updates):T(this.int32Array,e,r,this.updates)}free(t){this.shared&&((0,i.s2)(s.II,!0),this.checkBuffer()),this.free_(t),this.shared&&(0,i.Tl)(s.II)}sizeof(t){if(0===t)return 0;let e=y(t-=this.heapOffset);return k(this.int32Array,e)&&(e=this.int32Array[e-1]),g(I(this.int32Array,e))}inspect(){return this.checkBuffer(),function(t,e){const r=[],n=v(t,1,e);let i=A,s=0;for(;i<t.length-1;){const n=I(t,i);(n<2||n>=t.length)&&f.h2(`Got invalid sized chunk at ${g(i)} (${g(n)})`,h,624),S(t,i)?r.push(v(t,i,e)):(s+=g(n),r.push({type:"used",block:i,offset:g(i)+e,size:g(n)})),i+=n+2}return{header:n,blocks:r,total:g(t.length),used:s}}(this.int32Array,this.heapOffset)}findFreeBlock(t,e){let r=function(t,e){let r=1;for(let n=t[1];n>0;n--){let i=t[r+2+(n-1)];for(;1!==i&&t[i-1]<e;)r=i,i=t[r+2+(n-1)]}return r=t[r+2],r}(t,e);if(1===r){if(this.options.growAllowed&&this.heapLength<this.options.maxHeapSize){const t=this.int32Array.length+1;let r,a,f=0,h=0,u=0;if(this.options.onResize){var n,i,s;const t=this.options.onResize(this.int32Array,this.int32Array.byteLength+b(Math.max(this.options.growSize,g(e)),7));f=null!==(n=t.byteOffset)&&void 0!==n?n:0,u=m(f+g(c),null!==(i=t.byteLength)&&void 0!==i?i:t.buffer.byteLength),h=w((null!==(s=t.byteLength)&&void 0!==s?s:t.buffer.byteLength)-u),r=new Int32Array(t.buffer,u,y(h)),a=new Int32Array(t.buffer,f,c)}else{const t=new ArrayBuffer(this.int32Array.length+y(this.options.growSize));u=m(f+g(c),t.byteLength),h=w(t.byteLength-u),r=new Int32Array(t,u,y(h)),r.set(this.int32Array,0),a=new Int32Array(t,f,c)}this.byteOffset=f,this.heapOffset=u,this.buffer=r.buffer,this.heapLength=h,this.int32Array=r,this.updates=a;const A=r.length-(t-1)-2;x(r,A,t);const l=E(r,t);return 0!==l?U(r,l,t,A,this.updates):T(r,t,A,this.updates),this.handles.length&&o.__(this.handles,(t=>{t(this.buffer)})),this.findFreeBlock(this.int32Array,e)}return r}return r}getBuffer(){return this.buffer}isAlloc(t){this.shared&&((0,i.s2)(s.II,!0),this.checkBuffer());const e=y(t-this.heapOffset);let r=this.int32Array[3];for(;r&&1!==r;){if(e>=r&&e<r+this.int32Array[r-1])return this.shared&&(0,i.Tl)(s.II),!1;r=this.int32Array[r+2]}return this.shared&&(0,i.Tl)(s.II),!0}checkBuffer(){this.options.memory&&this.options.memory.buffer!==this.buffer&&(this.buffer=this.options.memory.buffer,this.heapLength=w(this.buffer.byteLength-this.heapOffset),this.int32Array=new Int32Array(this.buffer,this.heapOffset,y(this.heapLength)))}}function d(t,e,r){t[e-1]!==t[e+r]&&f.h2(`Block length header does not match footer (${g(t[e-1])} vs ${g(t[e+r])}).`,h,584);const n=t[e+0];(n<1||n>c)&&f.h2(`Block ${g(e)} height must be between 1 and 32, got ${n}.`,h,589);for(let r=0;r<n;r++){const n=t[e+2+r];n>=A&&!S(t,n)&&f.h2(`Block ${g(e)} has a pointer to a non-free block (${g(n)}).`,h,595)}return!0}function p(t,e,r){if(t[e-1]===t[e+r])return!0;f.h2(`Block length header does not match footer (${g(t[e-1])} vs ${g(t[e+r])}).`,h,604)}function g(t){return t<<2>>>0}function y(t){return t>>>2}function b(t,e){return(t+e&~e)>>>0}function m(t,e){const r=e-t;return t+(b(r,7)===r?0:r-b(r,7)+8)}function w(t){return t-4}function v(t,e,r){const n=t[e+0],i=[];for(let r=0;r<n;r++)i.push(t[e+2+r]);return{type:"free",block:e,offset:g(e)+r,height:n,pointers:i,size:g(t[e-1])}}function I(t,e){const r=t[e-1],n=r>>31;return r+n^n}function x(t,e,r){t[r-1]=e,t[r+e]=e}function B(t,e,r){let n=1;for(let i=t[1];i>0;i--){let s=n+2+(i-1);for(;t[s]>=A&&t[t[s]-1]<e;)n=t[s],s=n+2+(i-1);r[i-1]=n}}function C(t,e,r,n){B(t,r,n);let i=t[n[0]+2];for(;i!==e&&1!==i&&t[i-1]<=r;){for(let r=t[i+0]-1;r>=0;r--)t[i+2+r]===e&&(n[r]=i);i=t[i+2]}let s=t[1];for(let r=0;r<s&&t[n[r]+2+r]===e;r++)t[n[r]+2+r]=t[e+2+r];for(;s>0&&1===t[s-1+3];)s--,t[1]=s;t[e-1]=-r,t[e+r]=-r}function S(t,e){return!(e<65)&&!(t[e-1]<0)}function k(t,e){return!(e<65)&&!(t[e-1]<0)}function E(t,e){if(e<=A)return 0;const r=t[e-2];return r<2?0:e-(2+r)}function T(t,e,r,n){B(t,r,n);const i=function(t,e,r,n){const i=t[1];let s=function(){let t=1;for(;Math.random()<.5&&t<c;)t+=1;return t}();if(r-1<s+1&&(s=r-2),s>i){const r=i+1;return t[1]=r,t[r-1+3]=1,n[r]=1,t[e+0]=r,r}return t[e+0]=s,s}(t,e,r,n);for(let r=1;r<=i;r++){const i=n[r-1]+2+(r-1);t[e+2+(r-1)]=t[i],t[i]=e,n[r-1]=1}return t[e-1]=r,t[e+r]=r,r}function U(t,e,r,n,i){const s=r-e+n;return C(t,e,r-e-2,i),t[e-1]=-s,t[r+n]=-s,T(t,e,s,i),n}},5815:(t,e,r)=>{r.d(e,{A:()=>o});var n=r(4467),i=r(3737),s=r(4405);class o{constructor(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];(0,n.A)(this,"data",void 0),(0,n.A)(this,"buffer",void 0),(0,n.A)(this,"byteStart",void 0),(0,n.A)(this,"pos",void 0),(0,n.A)(this,"size",void 0),(0,n.A)(this,"littleEndian",void 0),this.buffer=t,this.data=t instanceof Uint8Array?new DataView(t.buffer):t.view,this.byteStart=t instanceof Uint8Array?t.byteOffset:0,this.pos=0,this.size=t.byteLength,this.littleEndian=!e}readUint8(){return this.data.getUint8(this.pos+++this.byteStart)}peekUint8(){return this.data.getUint8(this.pos+this.byteStart)}readUint16(){const t=this.data.getUint16(this.pos+this.byteStart,this.littleEndian);return this.pos+=2,t}peekUint16(){return this.data.getUint16(this.pos+this.byteStart,this.littleEndian)}readUint24(){const t=this.readUint16(),e=this.readUint8();return this.littleEndian?e<<16|t:t<<8|e}peekUint24(){const t=this.readUint16(),e=this.readUint8();return this.pos-=3,this.littleEndian?e<<16|t:t<<8|e}readUint32(){const t=this.data.getUint32(this.pos+this.byteStart,this.littleEndian);return this.pos+=4,t}peekUint32(){return this.data.getUint32(this.pos+this.byteStart,this.littleEndian)}readUint64(){const t=BigInt(this.readUint32()),e=BigInt(this.readUint32());return this.littleEndian?e<<BigInt(32)|t:t<<BigInt(32)|e}peekUint64(){const t=BigInt(this.readUint32()),e=BigInt(this.readUint32());return this.pos-=8,this.littleEndian?e<<BigInt(32)|t:t<<BigInt(32)|e}readInt8(){return this.data.getInt8(this.pos+++this.byteStart)}peekInt8(){return this.data.getInt8(this.pos+this.byteStart)}readInt16(){const t=this.data.getInt16(this.pos+this.byteStart,this.littleEndian);return this.pos+=2,t}peekInt16(){return this.data.getInt16(this.pos+this.byteStart,this.littleEndian)}readInt24(){const t=this.readUint24();return 8388608&t?t-16777216:t}peekInt24(){const t=this.peekUint24();return 8388608&t?t-16777216:t}readInt32(){const t=this.data.getInt32(this.pos+this.byteStart,this.littleEndian);return this.pos+=4,t}peekInt32(){return this.data.getInt32(this.pos+this.byteStart,this.littleEndian)}readInt64(){const t=BigInt(this.readInt32()),e=BigInt(this.readInt32());return this.littleEndian?e<<BigInt(32)|t:t<<BigInt(32)|e}peekInt64(){const t=BigInt(this.readInt32()),e=BigInt(this.readInt32());return this.pos-=8,this.littleEndian?e<<BigInt(32)|t:t<<BigInt(32)|e}readFloat(){const t=this.data.getFloat32(this.pos+this.byteStart,this.littleEndian);return this.pos+=4,t}peekFloat(){return this.data.getFloat32(this.pos+this.byteStart,this.littleEndian)}readDouble(){const t=this.data.getFloat64(this.pos+this.byteStart,this.littleEndian);return this.pos+=8,t}peekDouble(){return this.data.getFloat64(this.pos+this.byteStart,this.littleEndian)}readHex(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e="";for(let r=0;r<t;r++){const t=this.readUint8().toString(16);e+=1===t.length?"0"+t:t}return e}peekHex(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const e=this.pos,r=this.readHex(t);return this.pos=e,r}readString(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e="";if(t){let r=this.pos;for(let e=0;e<t&&0===this.buffer[this.pos+e];e++)r++;e=s.D(this.buffer.subarray(r,r+t))}return this.pos+=t,e}peekString(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const e=this.pos,r=this.readString(t);return this.pos=e,r}readLine(){let t="";for(let e=this.pos;e<this.size;e++)if(10===this.buffer[e]||13===this.buffer[e]){t+=this.readString(e-this.pos);break}for(let t=this.pos;t<this.size&&(10===this.buffer[t]||13===this.buffer[t]);t++)this.readUint8();return t}peekLine(){const t=this.pos,e=this.readLine();return this.pos=t,e}getPos(){return BigInt(this.pos)}seek(t){t>this.size&&(t=this.size),this.pos=Math.max(0,t)}skip(t){this.seek(this.pos+t)}back(t){this.seek(this.pos-t)}remainingSize(){return this.size-this.pos}readBuffer(t){t=Math.min(t,this.remainingSize());const e=this.buffer.slice(this.pos,this.pos+t);return this.pos+=t,e}appendBuffer(t){this.buffer=(0,i.A)(Uint8Array,[this.buffer.slice(),t.slice()]),this.data=new DataView(this.buffer.buffer),this.size+=t.byteLength,this.byteStart=0}resetBuffer(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.buffer=t,this.data=t instanceof Uint8Array?new DataView(t.buffer):t.view,this.byteStart=t instanceof Uint8Array?t.byteOffset:0,this.pos=0,this.size=t.byteLength,this.littleEndian=!e}}},5967:(t,e,r)=>{r.d(e,{A:()=>i});var n=r(2494);function i(t){return t!==n.ZH}},5981:(t,e,r)=>{r.d(e,{A:()=>_});var n=r(9983),i=r(2320);let s,o;const a=(0,r(7313).A)();function f(t,e){o().setUint8(t,e)}function h(t){return o().getUint8(t)}function u(t,e){o().setUint16(t,e,a)}function c(t){return o().getUint16(t,a)}function A(t,e){o().setUint32(t,e,a)}function l(t){return o().getUint32(t,a)}function d(t,e){o().setBigUint64(t,e,a)}function p(t){return o().getBigUint64(t,a)}function g(t,e){o().setInt8(t,e)}function y(t){return o().getInt8(t)}function b(t,e){o().setInt16(t,e,a)}function m(t){return o().getInt16(t,a)}function w(t,e){o().setInt32(t,e,a)}function v(t){return o().getInt32(t,a)}function I(t,e){o().setBigInt64(t,e,a)}function x(t){return o().getBigInt64(t,a)}function B(t,e){o().setFloat32(t,e,a)}function C(t){return o().getFloat32(t,a)}function S(t,e){o().setFloat64(t,e,a)}function k(t){return o().getFloat64(t,a)}function E(t){return o().getUint32(t,a)}function T(t,e){return o().setUint32(t,e,a)}function U(t,e){o().setUint32(t,e,a)}function _(t,e){s=t,o=e,(0,n.$)({4:h,5:h,2:h,3:h,6:c,7:c,8:l,9:l,10:p,11:y,12:y,13:m,14:m,15:v,16:v,17:x,18:C,19:k,20:E,23:t=>!!y(t),24:t=>!!y(t),25:t=>function(t){return o().getUint32(t,a)}(t)}),(0,i.$)({4:f,5:f,2:f,3:f,6:u,7:u,8:A,9:A,10:d,11:g,12:g,13:b,14:b,15:w,16:w,17:I,18:B,19:S,20:T,23:(t,e)=>{g(t,e?1:0)},24:(t,e)=>{g(t,e?1:0)},25:U})}},6332:(t,e,r)=>{r.d(e,{A:()=>s});var n=r(5967),i=r(2990);function s(){return!("object"==typeof window&&(0,n.A)(window.document)||(0,i.A)())}},7084:(t,e,r)=>{r.d(e,{A:()=>o});var n=r(3321);const i=[["harmony",/harmonyos ([\d_.]+)/],["harmony",/openharmony ([\d_.]+)/],["iphone",/iphone os ([\d_.]+)/],["ipad",/ipad; cpu os ([\d_.]+)/],["itouch",/itouch; cpu os ([\d_.]+)/],["android",/android ([\d_.]+)/],["wp",/windows phone ([\d_.]+)/],["windows",/windows nt ([\d_.]+)/],["linux",/linux/],["mac",/mac os x ([\d_.]+)/]],s=function(t){let e,r;return(0,n.__)(i,(n=>{let i=n[1].exec(t);if(i)return e=n[0],r=i[1],r&&(r=r.replace(/_/g,".")),!1})),{name:e||"",version:r||"",mobile:t.indexOf("mobile")>-1}}(("object"==typeof navigator&&navigator.userAgent||"").toLowerCase());s.name&&(s[s.name]=!0,{iphone:1,ipad:1,itouch:1}[s.name]&&(s.ios=!0));const o=s},7127:(t,e,r)=>{r.d(e,{JY:()=>o,Og:()=>n,dc:()=>s,g7:()=>i});const n=Symbol("Struct"),i=Symbol("StructLength"),s=Symbol("StructMaxBaseTypeByteLength"),o=(Symbol("StructAddress"),Symbol("StructKeysQueue"),Symbol("StructKeysMeta"));Symbol("StructKeysInstance"),Symbol("StructProxyRevoke")},7313:(t,e,r)=>{r.d(e,{A:()=>s});var n=r(5967);let i;function s(){if((0,n.A)(i))return i;const t=new ArrayBuffer(2);return new DataView(t).setInt16(0,256,!0),i=256===new Int16Array(t)[0],i}},7601:(t,e,r)=>{function n(t,e,r){Object.defineProperty(t,e,{value:r,writable:!1,enumerable:!1,configurable:!1})}r.d(e,{A:()=>n})},7698:(t,e,r)=>{r.d(e,{A:()=>s});var n=r(8590),i=r(2494);function s(t,e){return n.sH(t)?+t:e!==i.ZH?e:0}},7921:(t,e,r)=>{r.r(e),r.d(e,{HEAP_INITIAL:()=>d,HEAP_MAXIMUM:()=>p,HEAP_OFFSET:()=>l,STACK_ALIGNMENT:()=>c,STACK_SIZE:()=>A,USE_THREADS:()=>u});var n,i,s=r(2494),o=r(3463),a=r(8288),f=r(7084);const h=s.TK,u=!!o.A.thread&&!h.CHEAP_DISABLE_THREAD;let c=16,A=1048576;const l=1024,d=null!==(n=h.CHEAP_HEAP_INITIAL)&&void 0!==n?n:265,p=null!==(i=h.CHEAP_HEAP_MAXIMUM)&&void 0!==i?i:u&&f.A.ios&&!a.A.checkVersion(f.A.version,"17",!0)?8192:65536},8288:(t,e,r)=>{r.d(e,{A:()=>A});var n=r(3321),i=r(8590),s=r(2734),o=r(7084);function a(t){return i.Yj(t)&&t.split(".").shift()||""}const f=[["alipay",/alipay/],["wechat",/micromessenger/],["dingtalk",/dingtalk[ \/]([\d_.]+)/],["baiduApp",/baiduboxapp/],["baidu",/baidubrowser/],["baidu",/bdbrowser/],["uc",/ucbrowser/],["uc",/ucweb/],["qq",/qqbrowser/],["qqApp",/qq/],["ie",/iemobile[ \/]([\d_.]+)/],["ie",/msie[ \/]([\d_.]+)/],["ie",/trident[ \/]([\d_.]+)/,4],["edge",/edge[ \/]([\d_.]+)/],["newEdge",/edg[ \/]([\d_.]+)/],["chrome",/chrome[ \/]([\d_.]+)/],["firefox",/firefox[ \/]([\d_.]+)/],["opera",/opera(?:.*version)?[ \/]([\d_.]+)/],["safari",/version[ \/]([\d_.]+) safari/],["safari",/version[ \/]([\d_.]+) \S* safari/],["safari",/safari/]],h={},u={},c=function(t){let e,r;return(0,n.__)(f,(n=>{let i=n[1].exec(t);if(i)return e=n[0],r=i[1],r&&(r=r.replace(/_/g,"."),n[2]&&(r=parseInt(r,10)+n[2]+".0")),!1})),"safari"!==e||r||(r=o.A.version),{name:e||"",version:r||"",majorVersion:(h[e]||a)(r),checkVersion:u[e]||s.A}}(("object"==typeof navigator&&navigator.userAgent||"").toLowerCase());c.name&&(c[c.name]=!0);const A=c},8590:(t,e,r)=>{r.d(e,{Ik:()=>o,Pc:()=>i,YO:()=>s,Yj:()=>a,ai:()=>f,sH:()=>h});var n=r(2494);function i(t){return typeof t===n.s0}function s(t){return Array.isArray(t)}function o(t){return t!==n.Cq&&"object"==typeof t}function a(t){return"string"==typeof t}function f(t){return"number"==typeof t&&!isNaN(t)}function h(t){return f(t)||a(t)&&!isNaN(parseFloat(t))&&isFinite(+t)}},8644:(t,e,r)=>{r.d(e,{A:()=>s});var n=r(4467),i=r(2935);class s extends AudioWorkletProcessor{constructor(){super(),(0,n.A)(this,"ipcPort",void 0),this.ipcPort=new i.Ay(this.port)}async request(t,e,r){return this.ipcPort.request(t,e,r)}notify(t,e,r){this.ipcPort.notify(t,e,r)}}},8927:(t,e,r)=>{r.d(e,{di:()=>s,qh:()=>o,zy:()=>a});var n=r(8590),i=r(2494);function s(t,e,r){return n.ai(r)?e===r?i.u1:t.slice(e,r):t.slice(e)}function o(t,e,r){return t.indexOf(e,r!==i.ZH?r:0)}function a(t,e){return o(t,e)>=0}},9179:(t,e,r)=>{r.d(e,{A:()=>n});const n="AGFzbQEAAAABLAdgAX8Bf2ABfwF+YAJ/fwF/YAJ/fgF+YAN/f38Bf2ADf35+AX5gA39/fgF/AhIBA2VudgZtZW1vcnkCAwGAgAQDKCcAAAABAgICAwICAgMCAgIDAgICAwICAgMCAgIDAgICAwQEBAUCAgYHhgMnBWxvYWQ4AAAGbG9hZDE2AAEGbG9hZDMyAAIGbG9hZDY0AAMGc3RvcmU4AAQHc3RvcmUxNgAFB3N0b3JlMzIABgdzdG9yZTY0AAcEYWRkOAAIBWFkZDE2AAkFYWRkMzIACgVhZGQ2NAALBHN1YjgADAVzdWIxNgANBXN1YjMyAA4Fc3ViNjQADwRhbmQ4ABAFYW5kMTYAEQVhbmQzMgASBWFuZDY0ABMDb3I4ABQEb3IxNgAVBG9yMzIAFgRvcjY0ABcEeG9yOAAYBXhvcjE2ABkFeG9yMzIAGgV4b3I2NAAbCWV4Y2hhbmdlOAAcCmV4Y2hhbmdlMTYAHQpleGNoYW5nZTMyAB4KZXhjaGFuZ2U2NAAfEWNvbXBhcmVfZXhjaGFuZ2U4ACASY29tcGFyZV9leGNoYW5nZTE2ACESY29tcGFyZV9leGNoYW5nZTMyACISY29tcGFyZV9leGNoYW5nZTY0ACMGbm90aWZ5ACQEd2FpdAAlC3dhaXRUaW1lb3V0ACYKugMnCAAgAP4SAAALCAAgAP4TAQALCAAgAP4QAgALCAAgAP4RAwALDAAgACAB/hkAACABCwwAIAAgAf4aAQAgAQsMACAAIAH+FwIAIAELDAAgACAB/hgDACABCwoAIAAgAf4gAAALCgAgACAB/iEBAAsKACAAIAH+HgIACwoAIAAgAf4fAwALCgAgACAB/icAAAsKACAAIAH+KAEACwoAIAAgAf4lAgALCgAgACAB/iYDAAsKACAAIAH+LgAACwoAIAAgAf4vAQALCgAgACAB/iwCAAsKACAAIAH+LQMACwoAIAAgAf41AAALCgAgACAB/jYBAAsKACAAIAH+MwIACwoAIAAgAf40AwALCgAgACAB/jwAAAsKACAAIAH+PQEACwoAIAAgAf46AgALCgAgACAB/jsDAAsKACAAIAH+QwAACwoAIAAgAf5EAQALCgAgACAB/kECAAsKACAAIAH+QgMACwwAIAAgASAC/koAAAsMACAAIAEgAv5LAQALDAAgACABIAL+SAIACwwAIAAgASAC/kkDAAsKACAAIAH+AAIACwwAIAAgAUJ//gECAAsMACAAIAEgAv4BAgAL"},9257:(t,e,r)=>{r.d(e,{A:()=>n});const n="AGFzbQEAAAABLwlgAn9/AGACf34AYAJ/fQBgAn98AGABfwF/YAF/AX5gAX8BfWABfwF8YAN/f38AAhIBA2VudgZtZW1vcnkCAwGAgAQDERAAAAABAgMEBAQEBAUGBwgIB5YBEAZ3cml0ZTgAAAd3cml0ZTE2AAEHd3JpdGUzMgACB3dyaXRlNjQAAwh3cml0ZWYzMgAECHdyaXRlZjY0AAUFcmVhZDgABgZyZWFkVTgABwZyZWFkMTYACAdyZWFkVTE2AAkGcmVhZDMyAAoGcmVhZDY0AAsHcmVhZGYzMgAMB3JlYWRmNjQADQRmaWxsAA4EY29weQAPCpYBEAkAIAAgAToAAAsJACAAIAE7AQALCQAgACABNgIACwkAIAAgATcDAAsJACAAIAE4AgALCQAgACABOQMACwcAIAAsAAALBwAgAC0AAAsHACAALgEACwcAIAAvAQALBwAgACgCAAsHACAAKQMACwcAIAAqAgALBwAgACsDAAsLACAAIAEgAvwLAAsMACAAIAEgAvwKAAAL"},9658:(t,e,r)=>{r.d(e,{bx:()=>c});var n=r(187),i=r(5815),s=r(8288),o=r(7084);function a(t){let e=0,r=0;for(;;){const n=t.readUint8();if(e|=(127&n)<<r,r+=7,!(128&n))break}return e}function f(t){let e,r=0,n=0;for(;e=t.readUint8(),r|=(127&e)<<n,n+=7,128&e;);return 64&e&&(r|=-1<<n),r}function h(t,e){let r=!0;for(;r;){let n=127&e;0==(e>>=7)&&!(64&n)||-1===e&&64&n?r=!1:n|=128,t.writeUint8(n)}}function u(t,e){do{let r=127&e;0!=(e>>=7)&&(r|=128),t.writeUint8(r)}while(0!==e)}function c(t,e){const r=new i.A(t,!0),c=new n.A(new Uint8Array(t.length+100),!0);for(c.writeBuffer(r.readBuffer(8));r.remainingSize();){const t=r.readUint8();c.writeUint8(t);const i=a(r);if(2===t){const t=new n.A(new Uint8Array(i+100));let A=a(r);for(u(t,A);A--;){const n=a(r);u(t,n),t.writeBuffer(r.readBuffer(n));const i=a(r);u(t,i),t.writeBuffer(r.readBuffer(i));const c=r.readUint8();switch(t.writeUint8(c),c){case 0:u(t,a(r));break;case 3:h(t,f(r)),u(t,a(r));break;case 2:{let n=a(r);e.shared?u(t,2|n):u(t,-3&n);const i=a(r);if(u(t,e.initial||i),1&n){let n=a(r);!e.maximum||o.A.ios&&!s.A.checkVersion(o.A.version,"17",!0)&&e.shared||(n=e.maximum),u(t,n)}break}case 1:{h(t,f(r));const e=a(r);u(t,e),u(t,a(r)),1&e&&u(t,a(r));break}}}const l=t.getWroteBuffer();u(c,l.length),c.writeBuffer(l)}else u(c,i),c.writeBuffer(r.readBuffer(i))}return c.getWroteBuffer()}},9882:(t,e,r)=>{let n,i,s,o,a,f,h,u,c,A,l,d,p,g;function y(t){t.add&&(n=t.add),t.sub&&(i=t.sub),t.and&&(s=t.and),t.or&&(o=t.or),t.xor&&(a=t.xor),t.store&&(f=t.store),t.load&&(h=t.load),t.compareExchange&&(u=t.compareExchange),t.exchange&&(c=t.exchange),t.notify&&(A=t.notify),t.wait&&(l=t.wait),t.waitTimeout&&(d=t.waitTimeout),t.waitAsync&&(p=t.waitAsync),t.waitTimeoutAsync&&(g=t.waitTimeoutAsync)}r.d(e,{$Z:()=>y,M_:()=>f,jb:()=>i,me:()=>A,p_:()=>u,uk:()=>l})},9906:(t,e,r)=>{r.d(e,{R8:()=>y,h2:()=>b,pq:()=>g});var n=r(2494),i=r(4566);const s=0,o=2,a=3,f=4,h=5,u=typeof console!==n.aV?console:n.Cq,c=/common/.test((0,i.A)(n.x7))?o:a,A=u?function(t,e){u.log(t,e)}:n.x7,l=u?function(t,e){u.warn(t,e)}:n.x7,d=u?function(t,e){u.error(t,e)}:n.x7;function p(){if(n.M_){const t=n.TK.COMMON_LOG_LEVEL;if(t>=s&&t<=h)return t}return c}function g(t,e,r){p()<=o&&A(`[${arguments[1]}][line ${arguments[2]}] [info]`,t)}function y(t,e,r){p()<=a&&l(`[${arguments[1]}][line ${arguments[2]}] [warn]`,t)}function b(t,e,r){if(p()<=h)throw function(t,e,r){p()<=f&&d(`[${arguments[1]}][line ${arguments[2]}] [error]`,t)}(t,e,r),new Error(`[${arguments[1]}][line ${arguments[2]}] [fatal]: ${t}`)}},9922:(t,e,r)=>{r.d(e,{A:()=>s});var n=r(2284),i=r(2327);function s(t){var e=(0,i.A)(t,"string");return"symbol"==(0,n.A)(e)?e:e+""}},9983:(t,e,r)=>{r.d(e,{$:()=>o,f:()=>s});var n=r(665),i=r(3601);const s={4:i.A,5:i.A,2:i.A,3:i.A,6:i.A,7:i.A,8:i.A,9:i.A,10:i.A,11:i.A,12:i.A,13:i.A,14:i.A,15:i.A,16:i.A,17:i.A,18:i.A,19:i.A,20:i.A,0:i.A,1:i.A,22:i.A,21:i.A,23:i.A,24:i.A,25:i.A};function o(t){n.X$(s,t)}}},e={};function r(n){var i=e[n];if(void 0!==i)return i.exports;var s=e[n]={exports:{}};return t[n](s,s.exports,r),s.exports}r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var n={};r.r(n),r.d(n,{default:()=>d});var i=r(4467),s=r(9983),o=r(2320),a=r(8644),f=r(7084),h=r(9906),u=r(2935),c=r(4365),A=r(1755);let l=f.A.windows||f.A.mac||f.A.linux?10:20;class d extends a.A{constructor(){super(),(0,i.A)(this,"pullIPC",void 0),(0,i.A)(this,"frontBuffer",void 0),(0,i.A)(this,"backBuffer",void 0),(0,i.A)(this,"channels",void 0),(0,i.A)(this,"backBufferOffset",void 0),(0,i.A)(this,"ended",void 0),(0,i.A)(this,"frontBuffered",void 0),(0,i.A)(this,"firstRendered",void 0),(0,i.A)(this,"pause",void 0),(0,i.A)(this,"stopped",void 0),(0,i.A)(this,"afterPullResolve",void 0),(0,i.A)(this,"lastStutterTimestamp",void 0),this.ended=!1,this.pause=!0,this.ipcPort.on(u.S3,(async t=>{switch(t.method){case"init":{const{memory:e,bufferLength:r}=t.params;t.params.bufferLength&&(l=r),await(0,c.Tg)({memory:e,disableAsm:!0}),this.ipcPort.reply(t);break}case"start":{const{port:e,channels:r}=t.params;this.channels=r,this.pullIPC=new u.Ay(e),this.backBufferOffset=0,this.ended=!1,this.pause=!1,this.frontBuffered=!0,this.firstRendered=!1,this.stopped=!1,this.lastStutterTimestamp=currentTime;const n=this.allocBuffer(),i=this.allocBuffer();let s=await this.pullIPC.request("pull",{buffer:i});s<0?(this.ended=!0,this.frontBuffered=!1,this.backBufferOffset):(s=await this.pullIPC.request("pull",{buffer:n}),s<0&&(this.ended=!0,this.frontBuffered=!1)),this.frontBuffer=n,this.backBuffer=i,this.ipcPort.reply(t);break}case"restart":{if(!this.ended)return void this.ipcPort.reply(t);this.backBufferOffset=0,this.ended=!1,this.pause=!1,this.frontBuffered=!0,this.firstRendered=!1,this.stopped=!1,this.lastStutterTimestamp=currentTime;const e=this.backBuffer?this.backBuffer:this.allocBuffer(),r=this.frontBuffer?this.frontBuffer:this.allocBuffer();let n=await this.pullIPC.request("pull",{buffer:r});n<0?(this.ended=!0,this.frontBuffered=!1,this.backBufferOffset=l):(n=await this.pullIPC.request("pull",{buffer:e}),n<0&&(this.ended=!0,this.frontBuffered=!1)),this.frontBuffer=e,this.backBuffer=r,this.ipcPort.reply(t);break}case"stop":this.ended||this.pause||this.frontBuffered||await new Promise((t=>{this.afterPullResolve=t})),this.freeBuffer(this.backBuffer),this.freeBuffer(this.frontBuffer),this.backBuffer=0,this.frontBuffer=0,this.stopped=!0,this.pullIPC.destroy(),this.ipcPort.reply(t);break;case"clear":this.backBufferOffset=l,this.ipcPort.reply(t);break;case"pause":this.pause=!0,this.ipcPort.reply(t);break;case"unpause":this.pause=!1,this.ipcPort.reply(t)}}))}allocBuffer(){const t=(0,A.Gy)(48);o.M[20](t,(0,A.Gy)(4*this.channels)),o.M[15](t+16,this.channels);const e=(0,A.Gy)(512*l*this.channels);for(let r=0;r<this.channels;r++)o.M[20](s.f[20](t)+4*r,e+128*l*4*r);return o.M[15](t+12,128*l),t}freeBuffer(t){t&&((0,A.aI)(s.f[20](t)),(0,A.aI)(t),(0,A.Eb)(t))}async pull(){await this.pullIPC.request("pull",{buffer:this.frontBuffer})<0&&(this.ended=!0),this.afterPullResolve&&this.afterPullResolve()}swapBuffer(){if(!this.frontBuffered)return!1;{const t=this.backBuffer;this.backBuffer=this.frontBuffer,this.frontBuffer=t,this.backBufferOffset=0}return this.frontBuffered=!1,this.pull().then((()=>{this.frontBuffered=!0})),!0}process(t,e,r){if(this.stopped)return!1;if(this.backBuffer&&!this.pause){if(this.backBufferOffset===l){if(this.ended)return this.freeBuffer(this.backBuffer),this.freeBuffer(this.frontBuffer),this.backBuffer=0,this.frontBuffer=0,h.pq("audio source ended","packages/avrender/src/pcm/AudioSourceWorkletProcessor2.ts",282),this.ipcPort.notify("ended"),!0;if(!this.swapBuffer())return currentTime-this.lastStutterTimestamp>1&&(this.ipcPort.notify("stutter"),this.lastStutterTimestamp=currentTime),!0}const t=e[0];for(let e=0;e<this.channels;e++)t[e].set(new Float32Array((0,c.Lv)(),s.f[20](s.f[20](this.backBuffer)+4*e)+128*this.backBufferOffset*4,128),0);this.backBufferOffset++,this.firstRendered||(this.firstRendered=!0,this.ipcPort.notify("firstRendered"))}return!0}}registerProcessor("audio-source-processor",d),processor=n})();