(self.webpackChunkAVPlayer=self.webpackChunkAVPlayer||[]).push([[338],{18182:(t,e,n)=>{t.exports=n(69727)},82895:(t,e,n)=>{t.exports=n(94740)},77034:(t,e,n)=>{"use strict";n(47382);var a=n(92046);t.exports=a.Math.trunc},32347:(t,e,n)=>{"use strict";n(25671);var a=n(92046);t.exports=a.Number.isNaN},47382:(t,e,n)=>{"use strict";n(11091)({target:"Math",stat:!0},{trunc:n(41176)})},25671:(t,e,n)=>{"use strict";n(11091)({target:"Number",stat:!0},{isNaN:function(t){return t!=t}})},69727:(t,e,n)=>{"use strict";var a=n(77034);t.exports=a},94740:(t,e,n)=>{"use strict";var a=n(32347);t.exports=a},65749:(t,e,n)=>{"use strict";function a(t){var e=t.toLowerCase().trim().split(/\s*;\s*/);return"banner"===e[0]?{name:e[0],delay:1*e[1]||0,leftToRight:1*e[2]||0,fadeAwayWidth:1*e[3]||0}:/^scroll\s/.test(e[0])?{name:e[0],y1:Math.min(1*e[1],1*e[2]),y2:Math.max(1*e[1],1*e[2]),delay:1*e[3]||0,fadeAwayHeight:1*e[4]||0}:""!==t?{name:t}:null}function r(t){return t?t.toLowerCase().replace(/([+-]?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?)/g," $1 ").replace(/([mnlbspc])/g," $1 ").trim().replace(/\s+/g," ").split(/\s(?=[mnlbspc])/).map((function(t){return t.split(" ").filter((function(t,e){return!(e&&isNaN(1*t))}))})):[]}n.d(e,{wE:()=>O});var s=["b","i","u","s","fsp","k","K","kf","ko","kt","fe","q","p","pbo","a","an","fscx","fscy","fax","fay","frx","fry","frz","fr","be","blur","bord","xbord","ybord","shad","xshad","yshad"].map((function(t){return{name:t,regex:new RegExp("^"+t+"-?\\d")}}));function i(t){for(var e,n={},a=0;a<s.length;a++){var o=s[a],l=o.name;if(o.regex.test(t))return n[l]=1*t.slice(l.length),n}if(/^fn/.test(t))n.fn=t.slice(2);else if(/^r/.test(t))n.r=t.slice(1);else if(/^fs[\d+-]/.test(t))n.fs=t.slice(2);else if(/^\d?c&?H?[0-9a-fA-F]+|^\d?c$/.test(t)){var c=t.match(/^(\d?)c&?H?(\w*)/),f=c[1],d=c[2];n["c"+(f||1)]=d&&("000000"+d).slice(-6)}else if(/^\da&?H?[0-9a-fA-F]+/.test(t)){var u=t.match(/^(\d)a&?H?([0-9a-f]+)/i),p=u[1],g=u[2];n["a"+p]=("00"+g).slice(-2)}else if(/^alpha&?H?[0-9a-fA-F]+/.test(t))e=t.match(/^alpha&?H?([0-9a-f]+)/i),n.alpha=e[1],n.alpha=("00"+n.alpha).slice(-2);else if(/^(?:pos|org|move|fad|fade)\([^)]+/.test(t)){var h=t.match(/^(\w+)\((.*?)\)?$/),y=h[1],m=h[2];n[y]=m.trim().split(/\s*,\s*/).map(Number)}else if(/^i?clip\([^)]+/.test(t)){var x=t.match(/^i?clip\((.*?)\)?$/)[1].trim().split(/\s*,\s*/);n.clip={inverse:/iclip/.test(t),scale:1,drawing:null,dots:null},1===x.length&&(n.clip.drawing=r(x[0])),2===x.length&&(n.clip.scale=1*x[0],n.clip.drawing=r(x[1])),4===x.length&&(n.clip.dots=x.map(Number))}else if(/^t\(/.test(t)){var v=t.match(/^t\((.*?)\)?$/)[1].trim().replace(/\\.*/,(function(t){return t.replace(/,/g,"\n")})).split(/\s*,\s*/);if(!v[0])return n;n.t={t1:0,t2:0,accel:1,tags:v[v.length-1].replace(/\n/g,",").split("\\").slice(1).map(i)},2===v.length&&(n.t.accel=1*v[0]),3===v.length&&(n.t.t1=1*v[0],n.t.t2=1*v[1]),4===v.length&&(n.t.t1=1*v[0],n.t.t2=1*v[1],n.t.accel=1*v[2])}return n}function o(t){for(var e=[],n=0,a="",r=t.split("\\").slice(1).concat("").join("\\"),s=0;s<r.length;s++){var o=r[s];"("===o&&n++,")"===o&&n--,n<0&&(n=0),n||"\\"!==o?a+=o:(a&&e.push(a),a="")}return e.map(i)}function l(t){var e=t.split(/{(.*?)}/),n=[];e[0].length&&n.push({tags:[],text:e[0],drawing:[]});for(var a=1;a<e.length;a+=2){var s=o(e[a]),i=s.reduce((function(t,e){return void 0===e.p?t:!!e.p}),!1);n.push({tags:s,text:i?"":e[a+1],drawing:i?r(e[a+1]):[]})}return{raw:t,combined:n.map((function(t){return t.text})).join(""),parsed:n}}function c(t,e){var n=t.split(",");if(n.length>e.length){var r=n.slice(e.length-1).join();(n=n.slice(0,e.length-1)).push(r)}for(var s,i={},o=0;o<n.length;o++){var c=e[o],f=n[o].trim();switch(c){case"Layer":case"MarginL":case"MarginR":case"MarginV":i[c]=1*f;break;case"Start":case"End":i[c]=(void 0,3600*(s=f.split(":"))[0]+60*s[1]+1*s[2]);break;case"Effect":i[c]=a(f);break;case"Text":i[c]=l(f);break;default:i[c]=f}}return i}var f=["Name","Fontname","Fontsize","PrimaryColour","SecondaryColour","OutlineColour","BackColour","Bold","Italic","Underline","StrikeOut","ScaleX","ScaleY","Spacing","Angle","BorderStyle","Outline","Shadow","Alignment","MarginL","MarginR","MarginV","Encoding"],d=["Layer","Start","End","Style","Name","MarginL","MarginR","MarginV","Effect","Text"];function u(t){var e=f.concat(d);return t.match(/Format\s*:\s*(.*)/i)[1].split(/\s*,\s*/).map((function(t){return e.find((function(e){return e.toLowerCase()===t.toLowerCase()}))||t}))}function p(t,e){var n=t.match(/Style\s*:\s*(.*)/i)[1].split(/\s*,\s*/);return Object.assign.apply(Object,[{}].concat(e.map((function(t,e){var a;return(a={})[t]=n[e],a}))))}function g(t){var e={type:null,prev:null,next:null,points:[]};/[mnlbs]/.test(t[0])&&(e.type=t[0].toUpperCase().replace("N","L").replace("B","C"));for(var n=t.length-!(1&t.length),a=1;a<n;a+=2)e.points.push({x:1*t[a],y:1*t[a+1]});return e}function h(t){return!(!t.points.length||!t.type||/C|S/.test(t.type)&&t.points.length<3)}function y(t){return t.map((function(t){return t.type+t.points.map((function(t){return t.x+","+t.y})).join(",")})).join("")}function m(t){for(var e,n=[],a=0;a<t.length;){var r=t[a],s=g(r);if(h(s)){if("S"===s.type){var i=(n[a-1]||{points:[{x:0,y:0}]}).points.slice(-1)[0],o=i.x,l=i.y;s.points.unshift({x:o,y:l})}a&&(s.prev=n[a-1].type,n[a-1].next=s.type),n.push(s),a++}else{if(a&&"S"===n[a-1].type){var c={p:s.points,c:n[a-1].points.slice(0,3)};n[a-1].points=n[a-1].points.concat((c[r[0]]||[]).map((function(t){return{x:t.x,y:t.y}})))}t.splice(a,1)}}var f=(e=[]).concat.apply(e,n.map((function(t){var e=t.type,n=t.points,a=t.prev,r=t.next;return"S"===e?function(t,e,n){var a=[],r=[0,2/3,1/3,0],s=[0,1/3,2/3,0],i=[0,1/6,2/3,1/6],o=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},l=[t[t.length-1].x,t[0].x,t[1].x,t[2].x],c=[t[t.length-1].y,t[0].y,t[1].y,t[2].y];a.push({type:"M"===e?"M":"L",points:[{x:o(i,l),y:o(i,c)}]});for(var f=3;f<t.length;f++)l=[t[f-3].x,t[f-2].x,t[f-1].x,t[f].x],c=[t[f-3].y,t[f-2].y,t[f-1].y,t[f].y],a.push({type:"C",points:[{x:o(r,l),y:o(r,c)},{x:o(s,l),y:o(s,c)},{x:o(i,l),y:o(i,c)}]});if("L"===n||"C"===n){var d=t[t.length-1];a.push({type:"L",points:[{x:d.x,y:d.y}]})}return a}(n,a,r):{type:e,points:n}})));return Object.assign({instructions:f,d:y(f)},function(t){var e,n=1/0,a=1/0,r=-1/0,s=-1/0;return(e=[]).concat.apply(e,t.map((function(t){return t.points}))).forEach((function(t){var e=t.x,i=t.y;n=Math.min(n,e),a=Math.min(a,i),r=Math.max(r,e),s=Math.max(s,i)})),{minX:n,minY:a,width:r-n,height:s-a}}(n))}var x=["fs","fsp","clip","c1","c2","c3","c4","a1","a2","a3","a4","alpha","fscx","fscy","fax","fay","frx","fry","frz","fr","be","blur","bord","xbord","ybord","shad","xshad","yshad"];function v(t,e,n){var a,r,s;void 0===n&&(n={});var i=t[e];if(void 0===i)return null;if("pos"===e||"org"===e)return 2===i.length?((a={})[e]={x:i[0],y:i[1]},a):null;if("move"===e){var o=i[0],l=i[1],c=i[2],f=i[3],d=i[4];void 0===d&&(d=0);var u=i[5];return void 0===u&&(u=0),4===i.length||6===i.length?{move:{x1:o,y1:l,x2:c,y2:f,t1:d,t2:u}}:null}if("fad"===e||"fade"===e)return 2===i.length?{fade:{type:"fad",t1:i[0],t2:i[1]}}:7===i.length?{fade:{type:"fade",a1:i[0],a2:i[1],a3:i[2],t1:i[3],t2:i[4],t3:i[5],t4:i[6]}}:null;if("clip"===e){var p=i.inverse,g=i.scale,h=i.drawing,y=i.dots;return h?{clip:{inverse:p,scale:g,drawing:m(h),dots:y}}:y?{clip:{inverse:p,scale:g,drawing:h,dots:{x1:y[0],y1:y[1],x2:y[2],y2:y[3]}}}:null}if(/^[xy]?(bord|shad)$/.test(e)&&(i=Math.max(i,0)),"bord"===e)return{xbord:i,ybord:i};if("shad"===e)return{xshad:i,yshad:i};if(/^c\d$/.test(e))return(r={})[e]=i||n[e],r;if("alpha"===e)return{a1:i,a2:i,a3:i,a4:i};if("fr"===e)return{frz:i};if("fs"===e)return{fs:/^\+|-/.test(i)?(1*i>-10?1+i/10:1)*n.fs:1*i};if("K"===e)return{kf:i};if("t"===e){var b=i.t1,w=i.accel,$=i.tags,S=i.t2||1e3*(n.end-n.start),M={};return $.forEach((function(t){var e=Object.keys(t)[0];~x.indexOf(e)&&("clip"!==e||t[e].dots)&&Object.assign(M,v(t,e,n))})),{t:{t1:b,t2:S,accel:w,tag:M}}}return(s={})[e]=i,s}var b=[null,1,2,3,null,7,8,9,null,4,5,6],w=["r","a","an","pos","org","move","fade","fad","clip"];function $(t){for(var e,n,a,r,s,i,o,l=t.styles,c=t.style,f=t.parsed,d=t.start,u=t.end,p={q:l[c].tag.q},g=[],h={style:c,fragments:[]},y={},x=0;x<f.length;x++){for(var $=f[x],S=$.tags,M=$.text,A=$.drawing,O=void 0,C=0;C<S.length;C++){var k=S[C];O=void 0===k.r?O:k.r}for(var j={tag:void 0===O?(o=y,JSON.parse(JSON.stringify(Object.assign({},o,{k:void 0,kf:void 0,ko:void 0,kt:void 0})))):{},text:M,drawing:A.length?m(A):null},E=0;E<S.length;E++){var N=S[E];e=e||b[N.a||0]||N.an,p=v(N,"q")||p,r||(n=n||v(N,"pos")),a=a||v(N,"org"),n||(r=r||v(N,"move")),s=s||v(N,"fade")||v(N,"fad"),i=v(N,"clip")||i;var F=Object.keys(N)[0];if(F&&!~w.indexOf(F)){var B=l[c].tag,L=v(N,F,{start:d,end:u,c1:B.c1,c2:B.c2,c3:B.c3,c4:B.c4,fs:y.fs||B.fs});"t"===F?(j.tag.t=j.tag.t||[],j.tag.t.push(L.t)):Object.assign(j.tag,L)}}if(y=j.tag,void 0!==O&&(g.push(h),h={style:l[O]?O:c,fragments:[]}),j.text||j.drawing){var H=h.fragments[h.fragments.length-1]||{};H.text&&j.text&&!Object.keys(j.tag).length?H.text+=j.text:h.fragments.push(j)}}return g.push(h),Object.assign({alignment:e,slices:g},p,n,a,r,s,i)}function S(t){for(var e=t.styles,n=t.dialogues,a=1/0,r=[],s=0;s<n.length;s++){var i=n[s];if(!(i.Start>=i.End)){e[i.Style]||(i.Style="Default");var o=e[i.Style].style,l=$({styles:e,style:i.Style,parsed:i.Text.parsed,start:i.Start,end:i.End}),c=l.alignment||o.Alignment;a=Math.min(a,i.Layer),r.push(Object.assign({layer:i.Layer,start:i.Start,end:i.End,style:i.Style,name:i.Name,margin:{left:i.MarginL||o.MarginL,right:i.MarginR||o.MarginR,vertical:i.MarginV||o.MarginV},effect:i.Effect},l,{alignment:c}))}}for(var f=0;f<r.length;f++)r[f].layer-=a;return r.sort((function(t,e){return t.start-e.start||t.end-e.end}))}var M={Name:"Default",Fontname:"Arial",Fontsize:"20",PrimaryColour:"&H00FFFFFF&",SecondaryColour:"&H000000FF&",OutlineColour:"&H00000000&",BackColour:"&H00000000&",Bold:"0",Italic:"0",Underline:"0",StrikeOut:"0",ScaleX:"100",ScaleY:"100",Spacing:"0",Angle:"0",BorderStyle:"1",Outline:"2",Shadow:"2",Alignment:"2",MarginL:"10",MarginR:"10",MarginV:"10",Encoding:"1"};function A(t){if(/^(&|H|&H)[0-9a-f]{6,}/i.test(t)){var e=t.match(/&?H?([0-9a-f]{2})?([0-9a-f]{6})/i);return[e[1]||"00",e[2]]}var n=parseInt(t,10);if(!isNaN(n)){var a=-2147483648;if(n<a)return["00","000000"];var r=a<=n&&n<=2147483647?("00000000"+(n<0?n+4294967296:n).toString(16)).slice(-8):String(n).slice(0,8);return[r.slice(0,2),r.slice(2)]}return["00","000000"]}function O(t,e){void 0===e&&(e={});var n=function(t){for(var e={info:{},styles:{format:[],style:[]},events:{format:[],comment:[],dialogue:[]}},n=t.split(/\r?\n/),a=0,r=0;r<n.length;r++){var s=n[r].trim();if(!/^;/.test(s)&&(/^\[Script Info\]/i.test(s)?a=1:/^\[V4\+? Styles\]/i.test(s)?a=2:/^\[Events\]/i.test(s)?a=3:/^\[.*\]/.test(s)&&(a=0),0!==a)){if(1===a&&/:/.test(s)){var i=s.match(/(.*?)\s*:\s*(.*)/),o=i[1],l=i[2];e.info[o]=l}if(2===a&&(/^Format\s*:/i.test(s)&&(e.styles.format=u(s)),/^Style\s*:/i.test(s)&&e.styles.style.push(p(s,e.styles.format))),3===a&&(/^Format\s*:/i.test(s)&&(e.events.format=u(s)),/^(?:Comment|Dialogue)\s*:/i.test(s))){var f=s.match(/^(\w+?)\s*:\s*(.*)/i),d=f[1],g=f[2];e.events[d.toLowerCase()].push(c(g,e.events.format))}}}return e}(t),a=Object.assign(e.defaultInfo||{},n.info),r=function(t){for(var e=t.info,n=t.style,a=t.defaultStyle,r={},s=[Object.assign({},a,{Name:"Default"})].concat(n),i=function(t){var n=Object.assign({},M,s[t]);/^(\*+)Default$/.test(n.Name)&&(n.Name="Default"),Object.keys(n).forEach((function(t){"Name"===t||"Fontname"===t||/Colour/.test(t)||(n[t]*=1)}));var a=A(n.PrimaryColour),i=a[0],o=a[1],l=A(n.SecondaryColour),c=l[0],f=l[1],d=A(n.OutlineColour),u=d[0],p=d[1],g=A(n.BackColour),h=g[0],y=g[1],m={fn:n.Fontname,fs:n.Fontsize,c1:o,a1:i,c2:f,a2:c,c3:p,a3:u,c4:y,a4:h,b:Math.abs(n.Bold),i:Math.abs(n.Italic),u:Math.abs(n.Underline),s:Math.abs(n.StrikeOut),fscx:n.ScaleX,fscy:n.ScaleY,fsp:n.Spacing,frz:n.Angle,xbord:n.Outline,ybord:n.Outline,xshad:n.Shadow,yshad:n.Shadow,fe:n.Encoding,q:/^[0-3]$/.test(e.WrapStyle)?1*e.WrapStyle:2};r[n.Name]={style:n,tag:m}},o=0;o<s.length;o++)i(o);return r}({info:a,style:n.styles.style,defaultStyle:e.defaultStyle||{}});return{info:a,width:1*a.PlayResX||null,height:1*a.PlayResY||null,wrapStyle:/^[0-3]$/.test(a.WrapStyle)?1*a.WrapStyle:2,collisions:a.Collisions||"Normal",styles:r,dialogues:S({styles:r,dialogues:n.events.dialogue})}}var C={M:"m",L:"l",C:"b"};var k=function(t){return function(e){return function(n){return""+e+t+"&H"+n+"&"}}},j=k("c"),E=k("a"),N={c1:j(1),c2:j(2),c3:j(3),c4:j(4),a1:E(1),a2:E(2),a3:E(3),a4:E(4),pos:function(t){return"pos("+[t.x,t.y]+")"},org:function(t){return"org("+[t.x,t.y]+")"},move:function(t){return"move("+[t.x1,t.y1,t.x2,t.y2,t.t1,t.t2]+")"},fade:function(t){return"fad"===t.type?"fad("+[t.t1,t.t2]+")":"fade("+[t.a1,t.a2,t.a3,t.t1,t.t2,t.t3,t.t4]+")"},clip:function(t){return(t.inverse?"i":"")+"clip("+(t.dots?""+[t.dots.x1,t.dots.y1,t.dots.x2,t.dots.y2]:(1===t.scale?"":t.scale+",")+t.drawing.instructions.map((function(t){var e,n=t.type,a=t.points;return(e=[C[n]]).concat.apply(e,a.map((function(t){return[t.x,t.y]}))).join(" ")})).join(" "))+")"},t:function(t){return t.map((function(t){return"t("+[t.t1,t.t2,t.accel,(e=t.tag,Object.keys(e).map((function(t){return"\\"+(N[t]||function(e){return""+t+e})(e[t])})).join(""))]+")";var e})).join("\\")}}},49963:(t,e,n)=>{"use strict";n.d(e,{b:()=>r});var a=n(32517);function r({styles:t,dialogues:e}){let n=1/0;const r=[];for(let s=0;s<e.length;s++){const i=e[s];if(i.Start>=i.End)continue;t[i.Style]||(i.Style="Default");const o=t[i.Style].style,l=(0,a.t)({styles:t,style:i.Style,parsed:i.Text.parsed,start:i.Start,end:i.End}),c=l.alignment||o.Alignment;n=Math.min(n,i.Layer),r.push(Object.assign({layer:i.Layer,start:i.Start,end:i.End,style:i.Style,name:i.Name,margin:{left:i.MarginL||o.MarginL,right:i.MarginR||o.MarginR,vertical:i.MarginV||o.MarginV},effect:i.Effect},l,{alignment:c}))}for(let t=0;t<r.length;t++)r[t].layer-=n;return r.sort(((t,e)=>t.start-e.start||t.end-e.end))}},98786:(t,e,n)=>{"use strict";function a(t){const e={type:null,prev:null,next:null,points:[]};/[mnlbs]/.test(t[0])&&(e.type=t[0].toUpperCase().replace("N","L").replace("B","C"));for(let n=t.length-!(1&t.length),a=1;a<n;a+=2)e.points.push({x:1*t[a],y:1*t[a+1]});return e}function r(t){return!(!t.points.length||!t.type||/C|S/.test(t.type)&&t.points.length<3)}function s(t){return t.map((({type:t,points:e})=>t+e.map((({x:t,y:e})=>`${t},${e}`)).join(","))).join("")}function i(t){const e=[];let n=0;for(;n<t.length;){const s=t[n],i=a(s);if(r(i)){if("S"===i.type){const{x:t,y:a}=(e[n-1]||{points:[{x:0,y:0}]}).points.slice(-1)[0];i.points.unshift({x:t,y:a})}n&&(i.prev=e[n-1].type,e[n-1].next=i.type),e.push(i),n++}else{if(n&&"S"===e[n-1].type){const t={p:i.points,c:e[n-1].points.slice(0,3)};e[n-1].points=e[n-1].points.concat((t[s[0]]||[]).map((({x:t,y:e})=>({x:t,y:e}))))}t.splice(n,1)}}const i=[].concat(...e.map((({type:t,points:e,prev:n,next:a})=>"S"===t?function(t,e,n){const a=[],r=[0,2/3,1/3,0],s=[0,1/3,2/3,0],i=[0,1/6,2/3,1/6],o=(t,e)=>t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3];let l=[t[t.length-1].x,t[0].x,t[1].x,t[2].x],c=[t[t.length-1].y,t[0].y,t[1].y,t[2].y];a.push({type:"M"===e?"M":"L",points:[{x:o(i,l),y:o(i,c)}]});for(let e=3;e<t.length;e++)l=[t[e-3].x,t[e-2].x,t[e-1].x,t[e].x],c=[t[e-3].y,t[e-2].y,t[e-1].y,t[e].y],a.push({type:"C",points:[{x:o(r,l),y:o(r,c)},{x:o(s,l),y:o(s,c)},{x:o(i,l),y:o(i,c)}]});if("L"===n||"C"===n){const e=t[t.length-1];a.push({type:"L",points:[{x:e.x,y:e.y}]})}return a}(e,n,a):{type:t,points:e})));return Object.assign({instructions:i,d:s(i)},function(t){let e=1/0,n=1/0,a=-1/0,r=-1/0;return[].concat(...t.map((({points:t})=>t))).forEach((({x:t,y:s})=>{e=Math.min(e,t),n=Math.min(n,s),a=Math.max(a,t),r=Math.max(r,s)})),{minX:e,minY:n,width:a-e,height:r-n}}(e))}n.d(e,{EB:()=>i})},78040:(t,e,n)=>{"use strict";n.d(e,{W:()=>s});const a={Name:"Default",Fontname:"Arial",Fontsize:"20",PrimaryColour:"&H00FFFFFF&",SecondaryColour:"&H000000FF&",OutlineColour:"&H00000000&",BackColour:"&H00000000&",Bold:"0",Italic:"0",Underline:"0",StrikeOut:"0",ScaleX:"100",ScaleY:"100",Spacing:"0",Angle:"0",BorderStyle:"1",Outline:"2",Shadow:"2",Alignment:"2",MarginL:"10",MarginR:"10",MarginV:"10",Encoding:"1"};function r(t){if(/^(&|H|&H)[0-9a-f]{6,}/i.test(t)){const[,e,n]=t.match(/&?H?([0-9a-f]{2})?([0-9a-f]{6})/i);return[e||"00",n]}const e=parseInt(t,10);if(!Number.isNaN(e)){const t=-2147483648;if(e<t)return["00","000000"];const n=t<=e&&e<=2147483647?`00000000${(e<0?e+4294967296:e).toString(16)}`.slice(-8):String(e).slice(0,8);return[n.slice(0,2),n.slice(2)]}return["00","000000"]}function s({info:t,style:e,defaultStyle:n}){const s={},i=[Object.assign({},n,{Name:"Default"})].concat(e);for(let e=0;e<i.length;e++){const n=Object.assign({},a,i[e]);/^(\*+)Default$/.test(n.Name)&&(n.Name="Default"),Object.keys(n).forEach((t=>{"Name"===t||"Fontname"===t||/Colour/.test(t)||(n[t]*=1)}));const[o,l]=r(n.PrimaryColour),[c,f]=r(n.SecondaryColour),[d,u]=r(n.OutlineColour),[p,g]=r(n.BackColour),h={fn:n.Fontname,fs:n.Fontsize,c1:l,a1:o,c2:f,a2:c,c3:u,a3:d,c4:g,a4:p,b:Math.abs(n.Bold),i:Math.abs(n.Italic),u:Math.abs(n.Underline),s:Math.abs(n.StrikeOut),fscx:n.ScaleX,fscy:n.ScaleY,fsp:n.Spacing,frz:n.Angle,xbord:n.Outline,ybord:n.Outline,xshad:n.Shadow,yshad:n.Shadow,fe:n.Encoding,q:/^[0-3]$/.test(t.WrapStyle)?1*t.WrapStyle:2};s[n.Name]={style:n,tag:h}}return s}},64484:(t,e,n)=>{"use strict";n.d(e,{k:()=>s});var a=n(98786);const r=["fs","fsp","clip","c1","c2","c3","c4","a1","a2","a3","a4","alpha","fscx","fscy","fax","fay","frx","fry","frz","fr","be","blur","bord","xbord","ybord","shad","xshad","yshad"];function s(t,e,n={}){let i=t[e];if(void 0===i)return null;if("pos"===e||"org"===e)return 2===i.length?{[e]:{x:i[0],y:i[1]}}:null;if("move"===e){const[t,e,n,a,r=0,s=0]=i;return 4===i.length||6===i.length?{move:{x1:t,y1:e,x2:n,y2:a,t1:r,t2:s}}:null}if("fad"===e||"fade"===e){if(2===i.length){const[t,e]=i;return{fade:{type:"fad",t1:t,t2:e}}}if(7===i.length){const[t,e,n,a,r,s,o]=i;return{fade:{type:"fade",a1:t,a2:e,a3:n,t1:a,t2:r,t3:s,t4:o}}}return null}if("clip"===e){const{inverse:t,scale:e,drawing:n,dots:r}=i;if(n)return{clip:{inverse:t,scale:e,drawing:(0,a.EB)(n),dots:r}};if(r){const[a,s,i,o]=r;return{clip:{inverse:t,scale:e,drawing:n,dots:{x1:a,y1:s,x2:i,y2:o}}}}return null}if(/^[xy]?(bord|shad)$/.test(e)&&(i=Math.max(i,0)),"bord"===e)return{xbord:i,ybord:i};if("shad"===e)return{xshad:i,yshad:i};if(/^c\d$/.test(e))return{[e]:i||n[e]};if("alpha"===e)return{a1:i,a2:i,a3:i,a4:i};if("fr"===e)return{frz:i};if("fs"===e)return{fs:/^\+|-/.test(i)?(1*i>-10?1+i/10:1)*n.fs:1*i};if("K"===e)return{kf:i};if("t"===e){const{t1:t,accel:e,tags:a}=i,o=i.t2||1e3*(n.end-n.start),l={};return a.forEach((t=>{const e=Object.keys(t)[0];~r.indexOf(e)&&("clip"!==e||t[e].dots)&&Object.assign(l,s(t,e,n))})),{t:{t1:t,t2:o,accel:e,tag:l}}}return{[e]:i}}},32517:(t,e,n)=>{"use strict";n.d(e,{t:()=>o});var a=n(98786),r=n(64484);const s=[null,1,2,3,null,7,8,9,null,4,5,6],i=["r","a","an","pos","org","move","fade","fad","clip"];function o({styles:t,style:e,parsed:n,start:o,end:l}){let c,f,d,u,p,g,h={q:t[e].tag.q};const y=[];let m={style:e,fragments:[]},x={};for(let b=0;b<n.length;b++){const{tags:w,text:$,drawing:S}=n[b];let M;for(let t=0;t<w.length;t++){const e=w[t];M=void 0===e.r?M:e.r}const A={tag:void 0===M?(v=x,JSON.parse(JSON.stringify(Object.assign({},v,{k:void 0,kf:void 0,ko:void 0,kt:void 0})))):{},text:$,drawing:S.length?(0,a.EB)(S):null};for(let n=0;n<w.length;n++){const a=w[n];c=c||s[a.a||0]||a.an,h=(0,r.k)(a,"q")||h,u||(f=f||(0,r.k)(a,"pos")),d=d||(0,r.k)(a,"org"),f||(u=u||(0,r.k)(a,"move")),p=p||(0,r.k)(a,"fade")||(0,r.k)(a,"fad"),g=(0,r.k)(a,"clip")||g;const y=Object.keys(a)[0];if(y&&!~i.indexOf(y)){const n=t[e].tag,{c1:s,c2:i,c3:c,c4:f}=n,d=x.fs||n.fs,u=(0,r.k)(a,y,{start:o,end:l,c1:s,c2:i,c3:c,c4:f,fs:d});"t"===y?(A.tag.t=A.tag.t||[],A.tag.t.push(u.t)):Object.assign(A.tag,u)}}if(x=A.tag,void 0!==M&&(y.push(m),m={style:t[M]?M:e,fragments:[]}),A.text||A.drawing){const t=m.fragments[m.fragments.length-1]||{};t.text&&A.text&&!Object.keys(A.tag).length?t.text+=A.text:m.fragments.push(A)}}var v;return y.push(m),Object.assign({alignment:c,slices:y},h,f,d,u,p,g)}},74672:(t,e,n)=>{"use strict";function a(t){return t?t.toLowerCase().replace(/([+-]?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?)/g," $1 ").replace(/([mnlbspc])/g," $1 ").trim().replace(/\s+/g," ").split(/\s(?=[mnlbspc])/).map((t=>t.split(" ").filter(((t,e)=>!(e&&Number.isNaN(1*t)))))):[]}n.d(e,{O:()=>a})},44453:(t,e,n)=>{"use strict";function a(t){const e=t.toLowerCase().trim().split(/\s*;\s*/);return"banner"===e[0]?{name:e[0],delay:1*e[1]||0,leftToRight:1*e[2]||0,fadeAwayWidth:1*e[3]||0}:/^scroll\s/.test(e[0])?{name:e[0],y1:Math.min(1*e[1],1*e[2]),y2:Math.max(1*e[1],1*e[2]),delay:1*e[3]||0,fadeAwayHeight:1*e[4]||0}:""!==t?{name:t}:null}n.d(e,{d:()=>a})},53534:(t,e,n)=>{"use strict";n.d(e,{E:()=>s});var a=n(74672);const r=["b","i","u","s","fsp","k","K","kf","ko","kt","fe","q","p","pbo","a","an","fscx","fscy","fax","fay","frx","fry","frz","fr","be","blur","bord","xbord","ybord","shad","xshad","yshad"].map((t=>({name:t,regex:new RegExp(`^${t}-?\\d`)})));function s(t){const e={};for(let n=0;n<r.length;n++){const{name:a,regex:s}=r[n];if(s.test(t))return e[a]=1*t.slice(a.length),e}if(/^fn/.test(t))e.fn=t.slice(2);else if(/^r/.test(t))e.r=t.slice(1);else if(/^fs[\d+-]/.test(t))e.fs=t.slice(2);else if(/^\d?c&?H?[0-9a-fA-F]+|^\d?c$/.test(t)){const[,n,a]=t.match(/^(\d?)c&?H?(\w*)/);e[`c${n||1}`]=a&&`000000${a}`.slice(-6)}else if(/^\da&?H?[0-9a-fA-F]+/.test(t)){const[,n,a]=t.match(/^(\d)a&?H?([0-9a-f]+)/i);e[`a${n}`]=`00${a}`.slice(-2)}else if(/^alpha&?H?[0-9a-fA-F]+/.test(t))[,e.alpha]=t.match(/^alpha&?H?([0-9a-f]+)/i),e.alpha=`00${e.alpha}`.slice(-2);else if(/^(?:pos|org|move|fad|fade)\([^)]+/.test(t)){const[,n,a]=t.match(/^(\w+)\((.*?)\)?$/);e[n]=a.trim().split(/\s*,\s*/).map(Number)}else if(/^i?clip\([^)]+/.test(t)){const n=t.match(/^i?clip\((.*?)\)?$/)[1].trim().split(/\s*,\s*/);e.clip={inverse:/iclip/.test(t),scale:1,drawing:null,dots:null},1===n.length&&(e.clip.drawing=(0,a.O)(n[0])),2===n.length&&(e.clip.scale=1*n[0],e.clip.drawing=(0,a.O)(n[1])),4===n.length&&(e.clip.dots=n.map(Number))}else if(/^t\(/.test(t)){const n=t.match(/^t\((.*?)\)?$/)[1].trim().replace(/\\.*/,(t=>t.replace(/,/g,"\n"))).split(/\s*,\s*/);if(!n[0])return e;e.t={t1:0,t2:0,accel:1,tags:n[n.length-1].replace(/\n/g,",").split("\\").slice(1).map(s)},2===n.length&&(e.t.accel=1*n[0]),3===n.length&&(e.t.t1=1*n[0],e.t.t2=1*n[1]),4===n.length&&(e.t.t1=1*n[0],e.t.t2=1*n[1],e.t.accel=1*n[2])}return e}},27637:(t,e,n)=>{"use strict";n.d(e,{r:()=>r});var a=n(53534);function r(t){const e=[];let n=0,r="";const s=t.split("\\").slice(1).concat("").join("\\");for(let t=0;t<s.length;t++){const a=s[t];"("===a&&n++,")"===a&&n--,n<0&&(n=0),n||"\\"!==a?r+=a:(r&&e.push(r),r="")}return e.map(a.E)}},93935:(t,e,n)=>{"use strict";n.d(e,{r:()=>s});var a=n(74672),r=n(27637);function s(t){const e=t.split(/{(.*?)}/),n=[];e[0].length&&n.push({tags:[],text:e[0],drawing:[]});for(let t=1;t<e.length;t+=2){const s=(0,r.r)(e[t]),i=s.reduce(((t,e)=>void 0===e.p?t:!!e.p),!1);n.push({tags:s,text:i?"":e[t+1],drawing:i?(0,a.O)(e[t+1]):[]})}return{raw:t,combined:n.map((t=>t.text)).join(""),parsed:n}}},21194:(t,e,n)=>{"use strict";n.d(e,{By:()=>i,IU:()=>s});var a=n(47924),r=n(77334);function s(t){const{box:e}=t;for(;e.lastChild;)e.lastChild.remove();t.actives=[],t.space=[]}function i(t,e){const{video:n,box:i,layoutRes:o}=e;return function(){const l=n.clientWidth,c=n.clientHeight,f=o.width||n.videoWidth||l,d=o.height||n.videoHeight||c,u=e.scriptRes.width,p=e.scriptRes.height;let g=u,h=p;const y=Math.min(l/f,c/d);"video_width"===t.resampling&&(h=u/f*d),"video_height"===t.resampling&&(g=p/d*f),e.scale=Math.min(l/g,c/h),"script_width"===t.resampling&&(e.scale=y*(f/g)),"script_height"===t.resampling&&(e.scale=y*(d/h));const m=e.scale*g,x=e.scale*h;e.width=m,e.height=x,e.resampledRes={width:g,height:h},i.style.cssText=`width:${m}px;height:${x}px;top:${(c-x)/2}px;left:${(l-m)/2}px;`,i.style.setProperty("--ass-scale",e.scale),i.style.setProperty("--ass-scale-stroke",e.sbas?e.scale:1),function(t){return function(){s(t);const{video:e,dialogues:n}=t,i=e.currentTime-t.delay;t.index=(()=>{for(let t=0;t<n.length;t+=1)if(i<n[t].end)return t;return(n.length||1)-1})(),function(t,e){const{dialogues:n,actives:s}=t,i=e-t.delay;for(let t=s.length-1;t>=0;t-=1){const e=s[t],{end:n}=e;n<i&&(e.$div.remove(),s.splice(t,1))}for(;t.index<n.length&&i>=n[t.index].start;){if(i<n[t.index].end){const e=(0,a.U)(n[t.index],t);(e.animations||[]).forEach((t=>{t.currentTime=1e3*(i-e.start)})),s.push(e),t.video.paused||(0,r.MA)(e,"play")}t.index+=1}}(t,e.currentTime)}}(e)()}}},23873:(t,e,n)=>{"use strict";n.d(e,{Mx:()=>g,Ul:()=>p,nq:()=>d,o3:()=>h});var a=n(77334),r=n(77658),s=n(60913),i=n(57131);function o(t,e){const{name:n,delay:a,leftToRight:r}=t,s="banner"===n?"X":"Y",i={X:r?1:-1,Y:/up/.test(n)?-1:1}[s],o=-100*i;return[[{offset:0,transform:`translate${s}(${o}%)`},{offset:1,transform:`translate${s}(calc(${o}% + var(--ass-scale) * ${e/(a||1)*i}px))`}],{duration:e,fill:"forwards"}]}function l(t){return`calc(var(--ass-scale) * ${t}px)`}function c(t,e){const{x1:n,y1:a,x2:r,y2:s,t1:i,t2:o}=t,c=`translate(${l(n)}, ${l(a)})`,f=`translate(${l(r)}, ${l(s)})`,d=Math.max(o,e);return[[{offset:0,transform:c},i>0?{offset:i/d,transform:c}:null,o>0&&o<e?{offset:o/d,transform:f}:null,{offset:1,transform:f}].filter(Boolean),{duration:d,fill:"forwards"}]}function f(t,e){const{type:n,a1:a,a2:r,a3:s,t1:i,t2:o,t3:l,t4:c}=t;if("fad"===n)return[[[{offset:0,opacity:1},{offset:1,opacity:0}],{duration:o,delay:e-o,fill:"forwards"}],[[{offset:0,opacity:0},{offset:1,opacity:1}],{duration:i,composite:"replace"}]];const f=Math.max(e,c),d=[a,r,s].map((t=>1-t/255));return[[[0,i,o,l,c].map((t=>t/f)).map(((t,e)=>({offset:t,opacity:d[e>>1]}))),{duration:f,fill:"forwards"}]]}function d(t){return[["real-fs",(0,r.F)(t.fn,t.fs)],["tag-fs",t.fs],["tag-fsp",t.fsp],["fill-color",(0,a.qG)(t.a1+t.c1)]].filter((([,t])=>t)).map((([t,e])=>[`--ass-${t}`,e]))}function u(t,e){if(1===e)return"linear";const n=Math.ceil(t/1e3*60);return`linear(${Array.from({length:n+1}).map(((t,a)=>(a/n)**e)).join(",")})`}function p(t,e){const{start:n,end:r,effect:s,move:i,fade:l}=e,d=1e3*(r-n);return[s&&!i?o(s,d):null,i?c(i,d):null,...l?f(l,d):[]].filter(Boolean).map((([e,n])=>(0,a.dT)(t,e,n)))}function g(t,e,n){const s={...n,...e.tag};return(e.tag.t||[]).map((({t1:e,t2:n,accel:i,tag:o})=>{const l=Object.fromEntries(Object.keys(o).flatMap((t=>function(t,e,n){const s=e[n];return void 0===s||"clip"===n?[]:"a1"===n||"c1"===n?[["fill-color",(0,a.qG)((e.a1||t.a1)+(e.c1||t.c1))]]:"a3"===n||"c3"===n?[["border-color",(0,a.qG)((e.a3||t.a3)+(e.c3||t.c3))]]:"a4"===n||"c4"===n?[["shadow-color",(0,a.qG)((e.a4||t.a4)+(e.c4||t.c4))]]:"fs"===n?[["real-fs",(0,r.F)(e.fn||t.fn,e.fs)],["tag-fs",s]]:"fscx"===n||"fscy"===n?[[`tag-${n}`,(s||100)/100]]:"xbord"===n||"ybord"===n?[["border-width",2*s]]:[[`tag-${n}`,s]]}(s,o,t))).map((([t,e])=>[`--ass-${t}`,e])).concat([["offset",1]])),c=Math.max(0,n-e);return(0,a.dT)(t,[l],{duration:c,delay:e,fill:"forwards",easing:u(c,i)})}))}function h(t,e,n){return e.slices.flatMap((t=>t.fragments)).flatMap((t=>t.tag.t||[])).filter((({tag:t})=>t.clip)).map((({t1:e,t2:r,accel:i,tag:o})=>{const l={offset:1,clipPath:(0,s.r)(o.clip,n.scriptRes.width,n.scriptRes.height)},c=Math.max(0,r-e);return(0,a.dT)(t,[l],{duration:c,delay:e,fill:"forwards",easing:u(c,i)})}))}window.CSS.registerProperty&&(["real-fs","tag-fs","tag-fsp","border-width",...["blur","xbord","ybord","xshad","yshad",...i.r8,...i.ge].map((t=>`tag-${t}`))].forEach((t=>{window.CSS.registerProperty({name:`--ass-${t}`,syntax:"<number>",inherits:!0,initialValue:0})})),["border-opacity","shadow-opacity",...i.IZ.map((t=>`tag-${t}`))].forEach((t=>{window.CSS.registerProperty({name:`--ass-${t}`,syntax:"<number>",inherits:!0,initialValue:1})})),["fill-color","border-color","shadow-color"].forEach((t=>{window.CSS.registerProperty({name:`--ass-${t}`,syntax:"<color>",inherits:!0,initialValue:"transparent"})})))},60913:(t,e,n)=>{"use strict";n.d(e,{C:()=>s,r:()=>r});var a=n(23873);function r(t,e,n){if(!t.dots)return"";const{x1:a,y1:r,x2:s,y2:i}=t.dots;return`polygon(evenodd, ${[[a,r],[a,i],[s,i],[s,r],[a,r]].map((([t,a])=>[t/e,a/n])).concat(t.inverse?[[0,0],[0,1],[1,1],[1,0],[0,0]]:[]).map((t=>t.map((t=>100*t+"%")).join(" "))).join(",")})`}function s(t,e){const{clip:n,animations:s}=t;if(!n)return{};const{width:i,height:o}=e.scriptRes,l=document.createElement("div");return e.box.insertBefore(l,t.$div),l.append(t.$div),l.className="ASS-clip-area",l.style.zIndex=t.$div.style.zIndex,l.style.clipPath=n.dots?r(n,i,o):function(t,e,n,a){if(!t.drawing)return"";const r=a.scale/(1<<t.scale-1);let s=t.drawing.instructions.map((({type:t,points:e})=>t+e.map((({x:t,y:e})=>`${t*r},${e*r}`)).join(","))).join("");return t.inverse&&(s+=`M0,0L0,${n},${e},${n},${e},0,0,0Z`),`path(evenodd, "${s}")`}(n,i,o,e),s.push(...(0,a.o3)(l,t,e)),{$div:l}}},21643:(t,e,n)=>{"use strict";n.d(e,{p:()=>l});var a=n(82873),r=n(23873),s=n(39923),i=n(57131),o=n(77334);function l(t,e){const{styles:n}=e,l=document.createElement("div");l.className="ASS-dialogue",l.dataset.wrapStyle=t.q;const c=document.createDocumentFragment(),{align:f,slices:d}=t;[["--ass-align-h",["0%","50%","100%"][f.h]],["--ass-align-v",["100%","50%","0%"][f.v]]].forEach((([t,e])=>{l.style.setProperty(t,e)}));const u=[];return d.forEach((l=>{const f=n[l.style].tag,d=n[l.style].style.BorderStyle;l.fragments.forEach((n=>{const{text:l,drawing:p}=n,g={...f,...n.tag};let h="";const y=[];y.push(...(0,s.F)(g));let m=null;const x=g.xbord||g.ybord||g.xshad||g.yshad;if(x&&(p||"00"!==g.a1||g.xbord!==g.ybord)){const t=(0,s.x)(g,e.sbas?e.scale:1),n=(0,o.An)("svg",[["width",0],["height",0]]);n.append(t.el),m={id:t.id,el:n}}if(y.push(...(0,r.nq)(g)),p||(h+=`font-family:"${g.fn}";`,h+=g.b?`font-weight:${1===g.b?"bold":g.b};`:"",h+=g.i?"font-style:italic;":"",h+=g.u||g.s?`text-decoration:${g.u?"underline":""} ${g.s?"line-through":""};`:""),p&&g.pbo){const t=-g.pbo*(g.fscy||100)/100;h+=`vertical-align:calc(var(--ass-scale) * ${t}px);`}y.push(...(0,i.l1)(g));const v=[g,...(g.t||[]).map((t=>t.tag))],b=i.r8.some((t=>v.some((e=>e[t])))),w=i.IZ.some((t=>v.some((e=>void 0!==e[t]&&100!==e[t])))),$=i.ge.some((t=>v.some((e=>e[t]))));(function(t,e){return t.replace(/\\h/g," ").replace(/\\N/g,"\n").replace(/\\n/g,2===e?"\n":" ")})(l,t.q).split("\n").forEach(((t,s)=>{const i=document.createElement("span"),o=document.createElement("span");if((w||$)&&(w&&(o.dataset.scale=""),$&&(o.dataset.skew=""),o.textContent=t),b&&(i.dataset.rotate=""),p){i.dataset.drawing="";const t=(0,a.v)(n,f,e);if(!t)return;i.style.cssText=t.cssText,i.append(t.$svg)}else{if(s){const t=document.createElement("div");t.dataset.is="br",t.style.setProperty("--ass-tag-fs",g.fs),c.append(t)}if(!t)return;w||$?i.append(o):i.textContent=t;const e=w||$?o:i;e.dataset.text=t,x&&(e.dataset.borderStyle=d,e.dataset.stroke="css"),m&&(e.dataset.stroke="svg",e.style.filter=`url(#${m.id})`,e.append(m.el))}i.style.cssText+=h,y.forEach((([t,e])=>{i.style.setProperty(t,e)})),u.push(...(0,r.Mx)(i,n,f)),c.append(i)}))}))})),u.push(...(0,r.Ul)(l,t)),l.append(c),{$div:l,animations:u}}},82873:(t,e,n)=>{"use strict";n.d(e,{v:()=>s});var a=n(77334),r=n(39923);function s(t,e,n){if(!t.drawing.d)return null;const s={...e,...t.tag},{minX:i,minY:o,width:l,height:c}=t.drawing,f=n.scale/(1<<s.p-1),d=(s.fscx?s.fscx/100:1)*f,u=(s.fscy?s.fscy/100:1)*f,p=s.blur||s.be||0,g=s.xbord+(s.xshad<0?-s.xshad:0)+p,h=s.ybord+(s.yshad<0?-s.yshad:0)+p,y=l*d+2*s.xbord+Math.abs(s.xshad)+2*p,m=c*u+2*s.ybord+Math.abs(s.yshad)+2*p,x=(0,a.An)("svg",[["width",y],["height",m],["viewBox",`${-g} ${-h} ${y} ${m}`]]),v=n.sbas?n.scale:1,b=(0,a.An)("defs"),w=(0,r.x)(s,v);b.append(w.el),x.append(b);const $=`ASS-${(0,a.uR)()}`,S=(0,a.An)("symbol",[["id",$],["viewBox",`${i} ${o} ${l} ${c}`]]);return S.append((0,a.An)("path",[["d",t.drawing.d]])),x.append(S),x.append((0,a.An)("use",[["width",l*d],["height",c*u],["xlink:href",`#${$}`],["filter",`url(#${w.id})`]])),x.style.cssText=`position:absolute;left:${i*d-g}px;top:${o*u-h}px;`,{$svg:x,cssText:`position:relative;width:${l*d}px;height:${c*u}px;`}}},76762:(t,e,n)=>{"use strict";function a(t,e){const n=document.createElement("div");n.className="ASS-effect-area",e.box.insertBefore(n,t.$div),n.append(t.$div);const{width:a,height:r}=e.scriptRes,{name:s,y1:i,y2:o,leftToRight:l,fadeAwayWidth:c,fadeAwayHeight:f}=t.effect,d=Math.min(i,o),u=Math.max(i,o);if(n.dataset.effect=s,"banner"===s&&(n.style.alignItems=l?"flex-start":"flex-end",n.style.justifyContent=["flex-end","center","flex-start"][t.align.v]),s.startsWith("scroll")){const e=d/r*100,a=(r-u)/r*100;n.style.cssText=`top:${e}%;bottom:${a}%;`,n.style.justifyContent=["flex-start","center","flex-end"][t.align.h]}if(f){const t=f/(u-d)*100;n.style.maskImage=[`linear-gradient(#000 ${100-t}%, transparent)`,`linear-gradient(transparent, #000 ${t}%)`].join(",")}if(c){const t=c/a*100;n.style.maskImage=`linear-gradient(90deg, transparent, #000 ${t}%)`}return n}n.d(e,{c:()=>a})},77658:(t,e,n)=>{"use strict";n.d(e,{F:()=>d,Y:()=>f});const a="fontBoundingBoxAscent"in TextMetrics.prototype,r=navigator.userAgent.toLowerCase().includes("firefox"),s=!a&&r?512:2048,i=Object.create(null),o=document.createElement("canvas").getContext("2d"),l=document.createElement("div");l.className="ASS-fix-font-size",l.style.fontSize=`${s}px`;const c=document.createElement("span");c.textContent="0",l.append(c);const f=a?null:l;function d(t,e){if(!i[t])if(a){o.font=`${s}px "${t}"`;const e=o.measureText("");i[t]=e.fontBoundingBoxAscent+e.fontBoundingBoxDescent}else c.style.fontFamily=`"${t}"`,i[t]=c.clientHeight;return e*s/i[t]}},51776:(t,e,n)=>{"use strict";function a(t,e){const{scale:n}=e,{move:a,align:r,width:s,height:i,margin:o,slices:l}=t;let c=0,f=0;if(t.pos||a){const e=t.pos||{x:0,y:0},a=n*e.x,o=n*e.y;c=[a,a-s/2,a-s][r.h],f=[o-i,o-i/2,o][r.v]}else c=[0,(e.width-s)/2,e.width-s-n*o.right][r.h],f=l.some((t=>t.fragments.some((({keyframes:t})=>t?.length))))?[e.height-i-o.vertical,(e.height-i)/2,o.vertical][r.v]:function(t,e){const{video:n,space:a,scale:r}=e,{layer:s,margin:i,width:o,height:l,alignment:c,end:f}=t,d=e.width-Math.trunc(r*(i.left+i.right)),u=e.height,p=Math.trunc(r*i.vertical),g=100*n.currentTime;a[s]=a[s]||{left:{width:new Uint16Array(u+1),end:new Uint32Array(u+1)},center:{width:new Uint16Array(u+1),end:new Uint32Array(u+1)},right:{width:new Uint16Array(u+1),end:new Uint32Array(u+1)}};const h=a[s],y=["right","left","center"][c%3];let m=0,x=0;const v=t=>(m=(t=>{const e=h.left.width[t],n=h.center.width[t],a=h.right.width[t],r=h.left.end[t],s=h.center.end[t],i=h.right.end[t];return"left"===y&&(r>g&&e||s>g&&n&&2*o+n>d||i>g&&a&&o+a>d)||"center"===y&&(r>g&&e&&2*e+o>d||s>g&&n||i>g&&a&&2*a+o>d)||"right"===y&&(r>g&&e&&e+o>d||s>g&&n&&2*o+n>d||i>g&&a)})(t)?0:m+1,m>=l&&(x=t,!0));if(c<=3){x=u-p-1;for(let t=x;t>p&&!v(t);t-=1);}else if(c>=7){x=p+1;for(let t=x;t<u-p&&!v(t);t+=1);}else{x=u-l>>1;for(let t=x;t<u-p&&!v(t);t+=1);}c>3&&(x-=l-1);for(let t=x;t<x+l;t+=1)h[y].width[t]=o,h[y].end[t]=100*f;return x}(t,e);return{x:c+[0,s/2,s][r.h],y:f+[i,i/2,0][r.v]}}n.d(e,{E:()=>a})},47924:(t,e,n)=>{"use strict";n.d(e,{U:()=>c});var a=n(60913),r=n(21643),s=n(51776),i=n(59950),o=n(57131),l=n(76762);function c(t,e){const{$div:n,animations:c}=(0,r.p)(t,e);Object.assign(t,{$div:n,animations:c}),e.box.append(n);const{width:f}=n.getBoundingClientRect();Object.assign(t,{width:f}),n.style.cssText+=(0,i._)(t);const{height:d}=n.getBoundingClientRect();Object.assign(t,{height:d});const{x:u,y:p}=(0,s.E)(t,e);return Object.assign(t,{x:u,y:p}),n.style.cssText+=`left:${u}px;top:${p}px;`,(0,o.Lu)(t,e.scale),Object.assign(t,(0,a.C)(t,e)),t.effect&&Object.assign(t,{$div:(0,l.c)(t,e)}),t}},39923:(t,e,n)=>{"use strict";n.d(e,{F:()=>s,x:()=>r});var a=n(77334);function r(t,e){const n=`ASS-${(0,a.uR)()}`,r=t.xbord||t.ybord,s=t.xshad||t.yshad,i="ff"!==(t.a1||"00").toLowerCase(),o=(t.blur||t.be||0)*e,l=(0,a.An)("filter",[["id",n]]);l.append((0,a.An)("feGaussianBlur",[["stdDeviation",r?0:o],["in","SourceGraphic"],["result","sg_b"]])),l.append((0,a.An)("feFlood",[["flood-color","var(--ass-fill-color)"],["result","c1"]])),l.append((0,a.An)("feComposite",[["operator","in"],["in","c1"],["in2","sg_b"],["result","main"]])),r&&(l.append((0,a.An)("feMorphology",[["radius",`${t.xbord*e} ${t.ybord*e}`],["operator","dilate"],["in","SourceGraphic"],["result","dil"]])),l.append((0,a.An)("feGaussianBlur",[["stdDeviation",o],["in","dil"],["result","dil_b"]])),l.append((0,a.An)("feComposite",[["operator","out"],["in","dil_b"],["in2","SourceGraphic"],["result","dil_b_o"]])),l.append((0,a.An)("feFlood",[["flood-color","var(--ass-border-color)"],["result","c3"]])),l.append((0,a.An)("feComposite",[["operator","in"],["in","c3"],["in2","dil_b_o"],["result","border"]]))),s&&(r||i)&&(l.append((0,a.An)("feOffset",[["dx",t.xshad*e],["dy",t.yshad*e],["in",r?i?"dil":"dil_b_o":"SourceGraphic"],["result","off"]])),l.append((0,a.An)("feGaussianBlur",[["stdDeviation",o],["in","off"],["result","off_b"]])),i||(l.append((0,a.An)("feOffset",[["dx",t.xshad*e],["dy",t.yshad*e],["in","SourceGraphic"],["result","sg_off"]])),l.append((0,a.An)("feComposite",[["operator","out"],["in","off_b"],["in2","sg_off"],["result","off_b_o"]]))),l.append((0,a.An)("feFlood",[["flood-color","var(--ass-shadow-color)"],["result","c4"]])),l.append((0,a.An)("feComposite",[["operator","in"],["in","c4"],["in2",i?"off_b":"off_b_o"],["result","shadow"]])));const c=(0,a.An)("feMerge",[]);return s&&(r||i)&&c.append((0,a.An)("feMergeNode",[["in","shadow"]])),r&&c.append((0,a.An)("feMergeNode",[["in","border"]])),c.append((0,a.An)("feMergeNode",[["in","main"]])),l.append(c),{id:n,el:l}}function s(t){return[["border-width",2*t.xbord],["border-color",(0,a.qG)(`${t.a3}${t.c3}`)],["shadow-color",(0,a.qG)(`${t.a4}${t.c4}`)],["tag-blur",t.blur||t.be||0],["tag-xbord",t.xbord],["tag-ybord",t.ybord],["tag-xshad",t.xshad],["tag-yshad",t.yshad]].map((([t,e])=>[`--ass-${t}`,e]))}},59950:(t,e,n)=>{"use strict";function a(t){const{layer:e,align:n,effect:a,pos:r,margin:s,q:i}=t;let o="";return e&&(o+=`z-index:${e};`),o+=`text-align:${["left","center","right"][n.h]};`,a||(2!==i&&(o+=`max-width:calc(100% - var(--ass-scale) * ${s.left+s.right}px);`),r||(0!==n.h&&(o+=`padding-right:calc(var(--ass-scale) * ${s.right}px);`),2!==n.h&&(o+=`padding-left:calc(var(--ass-scale) * ${s.left}px);`))),o}n.d(e,{_:()=>a})},57131:(t,e,n)=>{"use strict";n.d(e,{IZ:()=>r,Lu:()=>o,ge:()=>s,l1:()=>i,r8:()=>a});const a=["frx","fry","frz"],r=["fscx","fscy"],s=["fax","fay"];function i(t){return[...[...a,...s].map((e=>[`--ass-tag-${e}`,`${t[e]||0}`])),...r.map((e=>[`--ass-tag-${e}`,t.p?1:(t[e]||100)/100]))]}function o(t,e){const{align:n,width:a,height:r,x:s,y:i,$div:o}=t,l=(t.org?t.org.x*e:s)+[0,a/2,a][n.h],c=(t.org?t.org.y*e:i)+[r,r/2,0][n.v];for(let t=o.childNodes.length-1;t>=0;t-=1){const e=o.childNodes[t];if(""===e.dataset.rotate){const t=l-s-e.offsetLeft,n=c-i-e.offsetTop;e.style.cssText+=`transform-origin:${t}px ${n}px;`}}}},77334:(t,e,n)=>{"use strict";function a(t){const e=t.match(/(\w\w)(\w\w)(\w\w)(\w\w)/),n=function(t){return 1-`0x${t}`/255}(e[1]),a=+`0x${e[2]}`,r=+`0x${e[3]}`;return`rgba(${+`0x${e[4]}`},${r},${a},${n})`}function r(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(t=>{const e=Math.trunc(16*Math.random());return("x"===t?e:3&e|8).toString(16)}))}function s(t,e=[]){const n=document.createElementNS("http://www.w3.org/2000/svg",t);for(let t=0;t<e.length;t+=1){const a=e[t];n.setAttributeNS("xlink:href"===a[0]?"http://www.w3.org/1999/xlink":null,a[0],a[1])}return n}function i(t,e,n){const a=t.animate(e,n);return a.pause(),a}function o(t,e){(t.animations||[]).forEach((t=>{t[e]()}))}n.d(e,{An:()=>s,MA:()=>o,dT:()=>i,qG:()=>a,uR:()=>r})}}]);