!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.AVPlayer=e():t.AVPlayer=e()}(self,(()=>(()=>{var t,e,r={83327:t=>{var e,r,i,s,a,n,o,c,l,h,u,d,p,f,m,v,g,y,A,b,x,w,k,T,_;t.exports=(e=void 0,r=!0,i={class:"avplayer-ui-player"},s={class:"avplayer-ui-title"},a={d:"M511.6 76.3C264.3 76.2 64 276.4 64 523.5 64 718.9 189.3 885 363.8 946c23.5 5.9 19.9-10.8 19.9-22.2v-77.5c-135.7 15.9-141.2-73.9-150.3-88.9C215 726 171.5 718 184.5 703c30.9-15.9 62.4 4 98.9 57.9 26.4 39.1 77.9 32.5 104 26 5.7-23.5 17.9-44.5 34.7-60.8-140.6-25.2-199.2-111-199.2-213 0-49.5 16.3-95 48.3-131.7-20.4-60.5 1.9-112.3 4.9-120 58.1-5.2 118.5 41.6 123.2 45.3 33-8.9 70.7-13.6 112.9-13.6 42.4 0 80.2 4.9 113.5 13.9 11.3-8.6 67.3-48.8 121.3-43.9 2.9 7.7 24.7 58.3 5.5 118 32.4 36.8 48.9 82.7 48.9 132.3 0 102.2-59 188.1-200 212.9a127.5 127.5 0 0 1 38.1 91v112.5c.8 9 0 17.9 15 17.9 177.1-59.7 304.6-227 304.6-424.1 0-247.2-200.4-447.3-447.5-447.3z"},n={viewBox:"64 64 896 896"},o={href:"https://github.com/zhaohappy/libmedia",target:"_blank"},c={class:"avplayer-ui-header"},l={class:"avplayer-ui-progress-container"},h={class:"avplayer-ui-control-item"},u={class:"avplayer-ui-footer-left"},d={class:"avplayer-ui-footer-right"},p={class:"avplayer-ui-control"},f={class:"avplayer-ui-footer"},m={d:"m10 17 5-5-5-5v10z"},v={viewBox:"0 0 24 24"},g={class:"avplayer-ui-pcm-visualization-container"},y={height:"min(80vh, 80vw)",width:"min(80vh, 80vw)"},A={class:"avplayer-ui-pcm-visualization-mask"},b={class:"avplayer-ui-mask"},x={class:"avplayer-ui-mask info"},w={class:"avplayer-ui-mask showSettings"},k={class:"avplayer-ui-menu-item"},T={class:"avplayer-ui-menu"},_={type:"text/css"},function(t,I,S,P,M,C,R,E,D,B,L,U,F,$,O,N,z,V,G,W,j,H,q,Y,K,Q,X,J,Z,tt,et,rt,it,st,at,nt,ot,ct){ct.push({children:function(){var I=[];return I.push({context:X,events:{click:M("click","playClick(true)","click","","playClick",{execute:function(t,e){return[!0]}})},nativeAttrs:i,operator:H,ref:"playerContainer",tag:"div",type:3}),N(at,at.length-1,"hasHeader").value?I.push({children:function(){var t=[];return t.push({context:X,nativeAttrs:s,operator:H,tag:"span",text:G(N(at,at.length-1,"title").value),type:3}),t.push({children:[{children:[{context:X,isPure:r,isStatic:r,isSvg:r,nativeAttrs:a,operator:H,tag:"path",type:3}],context:X,isPure:r,isStatic:r,isSvg:r,nativeAttrs:n,operator:H,tag:"svg",type:3}],context:X,isPure:r,isStatic:r,nativeAttrs:o,operator:H,tag:"a",type:3}),t.length?t:e}(),context:X,nativeAttrs:c,operator:H,tag:"div",type:3}):I.push({isPure:r,operator:j,text:"",type:2}),N(at,at.length-1,"hasFooter").value?I.push({children:function(){var t=[];return N(at,at.length-1,"isLive").value?t.push({isPure:r,operator:j,text:"",type:2}):t.push({children:function(){var t=[];return t.push({context:X,operator:q,props:{indicatorUrl:N(at,at.length-1,"indicatorUrl").value,player:N(at,at.length-1,"player").value},tag:"Progress",type:4}),t.length?t:e}(),context:X,nativeAttrs:l,operator:H,tag:"div",type:3}),t.push({children:function(){var t=[];return t.push({children:function(){var t=[];return t.push({children:function(){var t=[];return t.push({context:X,operator:q,props:{language:N(at,at.length-1,"language").value,played:N(at,at.length-1,"played").value,player:N(at,at.length-1,"player").value},ref:"play",tag:"Play",type:4}),t.length?t:e}(),context:X,nativeAttrs:h,operator:H,tag:"div",type:3}),t.push({children:function(){var t=[];return t.push({context:X,operator:q,props:{language:N(at,at.length-1,"language").value,player:N(at,at.length-1,"player").value},tag:"Volume",type:4}),t.length?t:e}(),context:X,nativeAttrs:h,operator:H,tag:"div",type:3}),N(at,at.length-1,"isLive").value?t.push({isPure:r,operator:j,text:"",type:2}):t.push({children:function(){var t=[];return t.push({context:X,operator:q,props:{language:N(at,at.length-1,"language").value,player:N(at,at.length-1,"player").value},tag:"Loop",type:4}),t.length?t:e}(),context:X,nativeAttrs:h,operator:H,tag:"div",type:3}),N(at,at.length-1,"isLive").value?t.push({isPure:r,operator:j,text:"",type:2}):t.push({children:function(){var t=[];return t.push({context:X,operator:q,props:{language:N(at,at.length-1,"language").value,player:N(at,at.length-1,"player").value},tag:"Timer",type:4}),t.length?t:e}(),context:X,nativeAttrs:h,operator:H,tag:"div",type:3}),t.length?t:e}(),context:X,nativeAttrs:u,operator:H,tag:"div",type:3}),t.push({children:function(){var t=[];return N(at,at.length-1,"hasVideoTrack").value?t.push({children:function(){var t=[];return t.push({context:X,operator:q,props:{language:N(at,at.length-1,"language").value,player:N(at,at.length-1,"player").value},tag:"VideoTrack",type:4}),t.length?t:e}(),context:X,nativeAttrs:h,operator:H,tag:"div",type:3}):t.push({isPure:r,operator:j,text:"",type:2}),N(at,at.length-1,"hasAudioTrack").value?t.push({children:function(){var t=[];return t.push({context:X,operator:q,props:{language:N(at,at.length-1,"language").value,player:N(at,at.length-1,"player").value},tag:"AudioTrack",type:4}),t.length?t:e}(),context:X,nativeAttrs:h,operator:H,tag:"div",type:3}):t.push({isPure:r,operator:j,text:"",type:2}),N(at,at.length-1,"hasSubtitleTrack").value?t.push({children:function(){var t=[];return t.push({context:X,operator:q,props:{language:N(at,at.length-1,"language").value,player:N(at,at.length-1,"player").value},tag:"SubtitleTrack",type:4}),t.length?t:e}(),context:X,nativeAttrs:h,operator:H,tag:"div",type:3}):t.push({isPure:r,operator:j,text:"",type:2}),t.push({children:function(){var t=[];return t.push({context:X,operator:q,props:{language:N(at,at.length-1,"language").value,player:N(at,at.length-1,"player").value},tag:"Playrate",type:4}),t.length?t:e}(),context:X,nativeAttrs:h,operator:H,tag:"div",type:3}),t.push({children:function(){var t=[];return t.push({context:X,operator:q,props:{language:N(at,at.length-1,"language").value,player:N(at,at.length-1,"player").value},tag:"Setting",type:4}),t.length?t:e}(),context:X,nativeAttrs:h,operator:H,tag:"div",type:3}),N(at,at.length-1,"hasPip").value?t.push({children:function(){var t=[];return t.push({context:X,operator:q,props:{language:N(at,at.length-1,"language").value,player:N(at,at.length-1,"player").value},tag:"Pip",type:4}),t.length?t:e}(),context:X,nativeAttrs:h,operator:H,tag:"div",type:3}):t.push({isPure:r,operator:j,text:"",type:2}),t.push({children:function(){var t=[];return t.push({context:X,operator:q,props:{dom:N(at,at.length-1,"fullscreenDom").value,language:N(at,at.length-1,"language").value,player:N(at,at.length-1,"player").value},tag:"Fullscreen",type:4}),t.length?t:e}(),context:X,nativeAttrs:h,operator:H,tag:"div",type:3}),t.length?t:e}(),context:X,nativeAttrs:d,operator:H,tag:"div",type:3}),t.length?t:e}(),context:X,nativeAttrs:p,operator:H,tag:"div",type:3}),t.length?t:e}(),context:X,nativeAttrs:f,operator:H,tag:"div",type:3}):I.push({isPure:r,operator:j,text:"",type:2}),N(at,at.length-1,"hasFolder").value?I.push({children:function(){var t=[];return t.push({children:[{children:[{context:X,isPure:r,isStatic:r,isSvg:r,nativeAttrs:m,operator:H,tag:"path",type:3}],context:X,isPure:r,isStatic:r,isSvg:r,nativeAttrs:v,operator:H,tag:"svg",type:3}],context:X,events:{click:M("click","toggleFold()","click","","toggleFold")},nativeAttrs:{class:"avplayer-ui-folder-toggle hint--right","data-hint":N(at,at.length-1,"folded").value?O(at,at.length-1,"language.TIP_UNFOLD",["language","TIP_UNFOLD"],r).value:O(at,at.length-1,"language.TIP_FOLD",["language","TIP_FOLD"],r).value},operator:H,tag:"div",type:3}),t.push({context:X,operator:q,props:{language:N(at,at.length-1,"language").value,player:N(at,at.length-1,"player").value},ref:"folder",tag:"Folder",type:4}),t.length?t:e}(),context:X,nativeAttrs:{class:"avplayer-ui-folder-container","data-fold":N(at,at.length-1,"folded").value?1:0},operator:H,tag:"div",type:3}):I.push({isPure:r,operator:j,text:"",type:2}),I.push({context:X,operator:q,props:{error:N(at,at.length-1,"error").value,language:N(at,at.length-1,"language").value,player:N(at,at.length-1,"player").value},tag:"LoadingTip",type:4}),N(at,at.length-1,"hasPcmVisualization").value&&!N(at,at.length-1,"loading").value?I.push({children:function(){var t=[];return t.push({children:function(){var t=[];return t.push({context:X,operator:q,props:{language:N(at,at.length-1,"language").value,player:N(at,at.length-1,"player").value},tag:"PcmVisualization",type:4}),t.length?t:e}(),context:X,nativeAttrs:g,nativeStyles:y,operator:H,tag:"div",type:3}),t.length?t:e}(),context:X,nativeAttrs:A,operator:H,tag:"div",type:3}):I.push({isPure:r,operator:j,text:"",type:2}),I.push({children:function(){var t=[];return t.push({children:function(){var t=[];return N(at,at.length-1,"error").value?t.push({context:X,nativeAttrs:{src:N(at,at.length-1,"errorStateUrl").value},operator:H,tag:"img",type:3}):N(at,at.length-1,"played").value?t.push({isPure:r,operator:j,text:"",type:2}):t.push({context:X,events:{click:M("click","playClick()","click","","playClick")},nativeAttrs:{src:N(at,at.length-1,"pauseStateUrl").value},operator:H,tag:"img",type:3}),t.length?t:e}(),context:X,nativeAttrs:{class:"avplayer-ui-state","data-show":N(at,at.length-1,"title").value&&!N(at,at.length-1,"played").value&&!N(at,at.length-1,"loading").value||N(at,at.length-1,"error").value?1:0},operator:H,tag:"div",type:3}),t.length?t:e}(),context:X,nativeAttrs:b,operator:H,tag:"div",type:3}),N(at,at.length-1,"showInfo").value?I.push({children:function(){var t=[];return t.push({context:X,operator:q,props:{language:N(at,at.length-1,"language").value,player:N(at,at.length-1,"player").value},tag:"Info",type:4}),t.length?t:e}(),context:X,nativeAttrs:x,operator:H,tag:"div",type:3}):I.push({isPure:r,operator:j,text:"",type:2}),N(at,at.length-1,"showSettings").value?I.push({children:function(){var t=[];return t.push({context:X,operator:q,props:{language:N(at,at.length-1,"language").value,player:N(at,at.length-1,"player").value},tag:"Settings",type:4}),t.length?t:e}(),context:X,nativeAttrs:w,operator:H,tag:"div",type:3}):I.push({isPure:r,operator:j,text:"",type:2}),N(at,at.length-1,"showMenu").value?I.push({children:function(){var t=[];return D(N(at,at.length-1,"menu"),(function(e,r,i,s){t.push({context:X,events:{click:M("click","menuAction(action)","click","","menuAction",{execute:function(t,r){return[N(e,e.length-1,"action").value]}})},key:N(e,e.length-1,"action").value,nativeAttrs:k,operator:H,tag:"div",text:G(N(e,e.length-1,"name").value),type:3})})),t.length?t:e}(),context:X,events:{outside:M("outside","menuOutside()","outside","","menuOutside")},nativeAttrs:T,nativeStyles:t("top: "+G(N(at,at.length-1,"menuTop").value)+"px; left: "+G(N(at,at.length-1,"menuLeft").value)+"px;"),operator:H,tag:"div",type:3}):I.push({isPure:r,operator:j,text:"",type:2}),I.push({context:X,html:G(N(at,at.length-1,"style").value),nativeAttrs:_,operator:H,tag:"style",type:3}),I.length?I:e}(),context:X,events:{mousemove:M("mousemove","mousemove()","mousemove","","mousemove")},nativeAttrs:{class:"avplayer-ui-container","data-bar-show":N(at,at.length-1,"showBar").value?1:0,id:"avplayer-ui-container"},operator:H,tag:"div",type:3})})},82723:t=>{var e,r,i,s,a;t.exports=(e=void 0,r={class:"avplayer-ui-control-audio-track-value"},i={class:"libmedia-ui-selector"},s={type:"text/css"},a={class:"avplayer-ui-control-audio-track"},function(t,n,o,c,l,h,u,d,p,f,m,v,g,y,A,b,x,w,k,T,_,I,S,P,M,C,R,E,D,B,L,U,F,$,O,N,z,V){V.push({children:function(){var t=[];return t.push({context:R,nativeAttrs:r,operator:I,tag:"div",text:k(A(O,O.length-1,"language.CONTROL_AUDIO_TRACK",["language","CONTROL_AUDIO_TRACK"],!0).value),type:3}),t.push({children:function(){var t=[];return p(b(O,O.length-1,"list"),(function(e,r,i,s,a){t.push({context:R,events:{click:l("click","change(i)","click","","change",{execute:function(t,e){return[a]}})},key:b(e,e.length-1,"id").value,nativeAttrs:{class:"libmedia-ui-selector-item "+(b(e,e.length-1,"selectIndex").value===a?"active":"")},operator:I,tag:"div",text:k(b(e,e.length-1,"name").value),type:3})})),t.length?t:e}(),context:R,nativeAttrs:i,operator:I,tag:"div",type:3}),t.push({context:R,html:k(b(O,O.length-1,"style").value),nativeAttrs:s,operator:I,tag:"style",type:3}),t.length?t:e}(),context:R,nativeAttrs:a,operator:I,tag:"div",type:3})})},22179:t=>{var e,r,i,s,a;t.exports=(e=!0,r={d:"M768 298.666667h170.666667v85.333333h-256V128h85.333333v170.666667zM341.333333 384H85.333333V298.666667h170.666667V128h85.333333v256z m426.666667 341.333333v170.666667h-85.333333v-256h256v85.333333h-170.666667zM341.333333 640v256H256v-170.666667H85.333333v-85.333333h256z",fill:"#ffffff"},i={class:"icon",version:"1.1",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},s={d:"M625.777778 256h142.222222V398.222222h113.777778V142.222222H625.777778v113.777778zM256 398.222222V256H398.222222v-113.777778H142.222222V398.222222h113.777778zM768 625.777778v142.222222H625.777778v113.777778h256V625.777778h-113.777778zM398.222222 768H256V625.777778h-113.777778v256H398.222222v-113.777778z",fill:"#ffffff"},a={type:"text/css"},function(t,n,o,c,l,h,u,d,p,f,m,v,g,y,A,b,x,w,k,T,_,I,S,P,M,C,R,E,D,B,L,U,F,$,O,N,z,V){V.push({children:function(){var t=[];return b(O,O.length-1,"fullscreen").value?t.push({children:[{context:R,isPure:e,isStatic:e,isSvg:e,nativeAttrs:r,operator:I,tag:"path",type:3}],context:R,isPure:e,isStatic:e,isSvg:e,nativeAttrs:i,operator:I,tag:"svg",type:3}):t.push({children:[{context:R,isPure:e,isStatic:e,isSvg:e,nativeAttrs:s,operator:I,tag:"path",type:3}],context:R,isPure:e,isStatic:e,isSvg:e,nativeAttrs:i,operator:I,tag:"svg",type:3}),t.push({context:R,html:k(b(O,O.length-1,"style").value),nativeAttrs:a,operator:I,tag:"style",type:3}),t.length?t:void 0}(),context:R,events:{click:l("click","fullscreenClick()","click","","fullscreenClick")},nativeAttrs:{class:"avplayer-ui-control-fullscreen hint--top","data-hint":A(O,O.length-1,"language.TIP_FULLSCREEN",["language","TIP_FULLSCREEN"],e).value},operator:I,tag:"div",type:3})})},82237:t=>{var e,r,i,s,a,n;t.exports=(e=!0,r={d:"M9 8.877a3 3 0 0 0-2.995 2.824L6 11.877v4a3 3 0 0 0 2.824 2.995l.176.005a1 1 0 1 1 0 2 5 5 0 0 1-4.995-4.783L4 15.877v-4a5 5 0 0 1 4.783-4.995L9 6.877h3V5.5a.5.5 0 0 1 .834-.372L17 8.878H9Zm11 10a3 3 0 0 0 2.995-2.823l.005-.177v-4a3 3 0 0 0-2.824-2.995L20 8.877a1 1 0 0 1 0-2 5 5 0 0 1 4.995 4.783l.005.217v4a5 5 0 0 1-4.783 4.996l-.217.004h-3v1.378a.5.5 0 0 1-.834.371L12 18.877h8Z","fill-rule":"nonzero"},i={"fill-rule":"evenodd"},s={viewBox:"0 0 28 28",xmlns:"http://www.w3.org/2000/svg"},a={d:"M16.859 14.22c2.738 0 4.958 2.164 4.958 4.834 0 2.67-2.22 4.834-4.958 4.834-2.739 0-4.959-2.164-4.959-4.834 0-2.67 2.22-4.835 4.959-4.835Zm0 .966c-2.19 0-3.967 1.732-3.967 3.868s1.776 3.867 3.967 3.867c2.19 0 3.967-1.731 3.967-3.867s-1.776-3.868-3.967-3.868Zm-1.206 2.02.069.056 2.975 2.9a.475.475 0 0 1 0 .684.506.506 0 0 1-.633.056l-.068-.056-2.975-2.9a.475.475 0 0 1 0-.684.506.506 0 0 1 .632-.056ZM12.591 4.9a.69.69 0 0 1 .456.171l3.812 3.346H11.9v-.001H8.925c-1.584 0-2.88 1.208-2.97 2.731l-.005.17v3.868c0 1.545 1.239 2.808 2.8 2.896l.175.005.992-.001v1.934h-.992c-2.664 0-4.838-2.048-4.953-4.619l-.005-.215v-3.868c0-2.597 2.101-4.717 4.737-4.83l.221-.004H11.9v-.892c0-.382.31-.691.691-.691Zm7.243 1.68c2.19.433 3.856 2.274 3.961 4.512l.006.225v3.868c0 .432-.058.85-.167 1.248l-1.817-2.215v-2.9c0-1.263-.827-2.338-1.982-2.736V6.581Z","fill-rule":"nonzero"},n={type:"text/css"},function(t,o,c,l,h,u,d,p,f,m,v,g,y,A,b,x,w,k,T,_,I,S,P,M,C,R,E,D,B,L,U,F,$,O,N,z,V,G){G.push({children:function(){var t=[];return x(N,N.length-1,"loop").value?t.push({children:[{children:[{context:E,isPure:e,isStatic:e,isSvg:e,nativeAttrs:r,operator:S,tag:"path",type:3}],context:E,isPure:e,isStatic:e,isSvg:e,nativeAttrs:i,operator:S,tag:"g",type:3}],context:E,isPure:e,isStatic:e,isSvg:e,nativeAttrs:s,operator:S,tag:"svg",type:3}):t.push({children:[{children:[{context:E,isPure:e,isStatic:e,isSvg:e,nativeAttrs:a,operator:S,tag:"path",type:3}],context:E,isPure:e,isStatic:e,isSvg:e,nativeAttrs:i,operator:S,tag:"g",type:3}],context:E,isPure:e,isStatic:e,isSvg:e,nativeAttrs:s,operator:S,tag:"svg",type:3}),t.push({context:E,html:T(x(N,N.length-1,"style").value),nativeAttrs:n,operator:S,tag:"style",type:3}),t.length?t:void 0}(),context:E,events:{click:h("click","change()","click","","change")},nativeAttrs:{class:"avplayer-ui-control-loop hint--top","data-hint":x(N,N.length-1,"loop").value?b(N,N.length-1,"language.TIP_LOOP_STOP",["language","TIP_LOOP_STOP"],e).value:b(N,N.length-1,"language.TIP_LOOP_START",["language","TIP_LOOP_START"],e).value},operator:S,tag:"div",type:3})})},16979:t=>{var e,r,i,s;t.exports=(e=!0,r={d:"M23.625 15.75c.966 0 1.75.784 1.75 1.75v4.375a1.75 1.75 0 0 1-1.75 1.75H17.5a1.75 1.75 0 0 1-1.75-1.75V17.5c0-.966.784-1.75 1.75-1.75h6.125ZM21 5.25a2.625 2.625 0 0 1 2.62 2.47l.005.155v5.25a.875.875 0 0 1-1.744.102l-.006-.102v-5.25a.875.875 0 0 0-.773-.87L21 7H7a.875.875 0 0 0-.87.773l-.005.102V19.25c0 .449.338.819.773.87l.102.005h6.125a.875.875 0 0 1 .102 1.744l-.102.006H7a2.625 2.625 0 0 1-2.62-2.47l-.005-.155V7.875a2.625 2.625 0 0 1 2.47-2.62L7 5.25h14Z","fill-rule":"evenodd","stroke-width":".5"},i={viewBox:"0 0 28 28",xmlns:"http://www.w3.org/2000/svg"},s={type:"text/css"},function(t,a,n,o,c,l,h,u,d,p,f,m,v,g,y,A,b,x,w,k,T,_,I,S,P,M,C,R,E,D,B,L,U,F,$,O,N,z){z.push({children:function(){var t=[];return t.push({children:[{children:[{context:C,isPure:e,isStatic:e,isSvg:e,nativeAttrs:r,operator:_,tag:"path",type:3}],context:C,isPure:e,isStatic:e,isSvg:e,operator:_,tag:"g",type:3}],context:C,isPure:e,isStatic:e,isSvg:e,nativeAttrs:i,operator:_,tag:"svg",type:3}),t.push({context:C,html:w(A($,$.length-1,"style").value),nativeAttrs:s,operator:_,tag:"style",type:3}),t.length?t:void 0}(),context:C,events:{click:c("click","pipClick()","click","","pipClick")},nativeAttrs:{class:"avplayer-ui-control-pip hint--top","data-hint":A($,$.length-1,"pip").value?y($,$.length-1,"language.TIP_PIP_STOP",["language","TIP_PIP_STOP"],e).value:y($,$.length-1,"language.TIP_PIP_START",["language","TIP_PIP_START"],e).value},operator:_,tag:"div",type:3})})},1449:t=>{var e,r,i,s,a;t.exports=(e=!0,r={d:"M7 3a2 2 0 0 0-2 2v12a2 2 0 1 0 4 0V5a2 2 0 0 0-2-2zM15 3a2 2 0 0 0-2 2v12a2 2 0 1 0 4 0V5a2 2 0 0 0-2-2z"},i={viewBox:"0 0 22 22",xmlns:"http://www.w3.org/2000/svg"},s={d:"M17.982 9.275L8.06 3.27A2.013 2.013 0 0 0 5 4.994v12.011a2.017 2.017 0 0 0 3.06 1.725l9.922-6.005a2.017 2.017 0 0 0 0-3.45z"},a={type:"text/css"},function(t,n,o,c,l,h,u,d,p,f,m,v,g,y,A,b,x,w,k,T,_,I,S,P,M,C,R,E,D,B,L,U,F,$,O,N,z,V){V.push({children:function(){var t=[];return b(O,O.length-1,"played").value?t.push({children:[{context:R,isPure:e,isStatic:e,isSvg:e,nativeAttrs:r,operator:I,tag:"path",type:3}],context:R,isPure:e,isStatic:e,isSvg:e,nativeAttrs:i,operator:I,tag:"svg",type:3}):t.push({children:[{context:R,isPure:e,isStatic:e,isSvg:e,nativeAttrs:s,operator:I,tag:"path",type:3}],context:R,isPure:e,isStatic:e,isSvg:e,nativeAttrs:i,operator:I,tag:"svg",type:3}),t.push({context:R,html:k(b(O,O.length-1,"style").value),nativeAttrs:a,operator:I,tag:"style",type:3}),t.length?t:void 0}(),context:R,events:{click:l("click","playClick()","click","","playClick")},nativeAttrs:{class:"avplayer-ui-control-play hint--top","data-hint":b(O,O.length-1,"played").value?A(O,O.length-1,"language.TIP_PAUSE",["language","TIP_PAUSE"],e).value:A(O,O.length-1,"language.TIP_PLAY",["language","TIP_PLAY"],e).value},operator:I,tag:"div",type:3})})},8809:t=>{var e,r,i,s,a,n,o;t.exports=(r=void 0,i=!0,s={class:"avplayer-ui-control-play-rate-value"},a={class:"libmedia-ui-selector"},n={type:"text/css"},o={class:"avplayer-ui-control-play-rate"},function(t,c,l,h,u,d,p,f,m,v,g,y,A,b,x,w,k,T,_,I,S,P,M,C,R,E,D,B,L,U,F,$,O,N,z,V,G,W){W.push({children:function(){var t=[];return t.push({context:D,nativeAttrs:s,operator:P,tag:"div",text:_(x(z,z.length-1,"language.CONTROL_PLAYRATE",["language","CONTROL_PLAYRATE"],i).value),type:3}),t.push({children:function(){var t=[];return m(w(z,z.length-1,"list"),(function(s,a,n,o,c){t.push({children:function(){var t=[];return t.push({isPure:i,operator:I,text:_((e=s[s.length-1],T(e.getScope(),e.keypath)).value)+"x",type:1}),t.length?t:r}(),context:D,events:{click:u("click","change(i)","click","","change",{execute:function(t,e){return[c]}})},key:(e=s[s.length-1],T(e.getScope(),e.keypath)).value,nativeAttrs:{class:"libmedia-ui-selector-item "+(w(s,s.length-1,"index").value===c?"active":"")},operator:P,tag:"div",type:3})})),t.length?t:r}(),context:D,nativeAttrs:a,operator:P,tag:"div",type:3}),t.push({context:D,html:_(w(z,z.length-1,"style").value),nativeAttrs:n,operator:P,tag:"style",type:3}),t.length?t:r}(),context:D,nativeAttrs:o,operator:P,tag:"div",type:3})})},78675:t=>{var e,r,i,s,a;t.exports=(e=!0,r={cx:"11",cy:"11",r:"2"},i={d:"M19.164 8.861L17.6 8.6a6.978 6.978 0 0 0-1.186-2.099l.574-1.533a1 1 0 0 0-.436-1.217l-1.997-1.153a1.001 1.001 0 0 0-1.272.23l-1.008 1.225a7.04 7.04 0 0 0-2.55.001L8.716 2.829a1 1 0 0 0-1.272-.23L5.447 3.751a1 1 0 0 0-.436 1.217l.574 1.533A6.997 6.997 0 0 0 4.4 8.6l-1.564.261A.999.999 0 0 0 2 9.847v2.306c0 .489.353.906.836.986l1.613.269a7 7 0 0 0 1.228 2.075l-.558 1.487a1 1 0 0 0 .436 1.217l1.997 1.153c.423.244.961.147 1.272-.23l1.04-1.263a7.089 7.089 0 0 0 2.272 0l1.04 1.263a1 1 0 0 0 1.272.23l1.997-1.153a1 1 0 0 0 .436-1.217l-.557-1.487c.521-.61.94-1.31 1.228-2.075l1.613-.269a.999.999 0 0 0 .835-.986V9.847a.999.999 0 0 0-.836-.986zM11 15a4 4 0 1 1 0-8 4 4 0 0 1 0 8z"},s={viewBox:"0 0 22 22",xmlns:"http://www.w3.org/2000/svg"},a={type:"text/css"},function(t,n,o,c,l,h,u,d,p,f,m,v,g,y,A,b,x,w,k,T,_,I,S,P,M,C,R,E,D,B,L,U,F,$,O,N,z,V){V.push({children:function(){var t=[];return t.push({children:[{context:R,isPure:e,isStatic:e,isSvg:e,nativeAttrs:r,operator:I,tag:"circle",type:3},{context:R,isPure:e,isStatic:e,isSvg:e,nativeAttrs:i,operator:I,tag:"path",type:3}],context:R,isPure:e,isStatic:e,isSvg:e,nativeAttrs:s,operator:I,tag:"svg",type:3}),t.push({context:R,html:k(b(O,O.length-1,"style").value),nativeAttrs:a,operator:I,tag:"style",type:3}),t.length?t:void 0}(),context:R,events:{click:l("click","click()","click","","click")},nativeAttrs:{class:"avplayer-ui-control-settings hint--top","data-hint":A(O,O.length-1,"language.TIP_SETTING",["language","TIP_SETTING"],e).value},operator:I,tag:"div",type:3})})},95683:t=>{var e,r,i,s,a,n,o;t.exports=(e=void 0,r=!0,i={class:"avplayer-ui-control-subtitle-track-value"},s={display:"none"},a={class:"libmedia-ui-selector"},n={type:"text/css"},o={class:"avplayer-ui-control-subtitle-track"},function(t,c,l,h,u,d,p,f,m,v,g,y,A,b,x,w,k,T,_,I,S,P,M,C,R,E,D,B,L,U,F,$,O,N,z,V,G,W){W.push({children:function(){var t=[];return t.push({context:D,nativeAttrs:i,operator:P,tag:"div",text:_(x(z,z.length-1,"language.CONTROL_SUBTITLE_TRACK",["language","CONTROL_SUBTITLE_TRACK"],r).value),type:3}),t.push({children:function(){var t,i=[];return m(w(z,z.length-1,"list"),(function(t,e,r,s,a){i.push({context:D,events:{click:u("click","change(i)","click","","change",{execute:function(t,e){return[a]}})},key:w(t,t.length-1,"id").value,nativeAttrs:{class:"libmedia-ui-selector-item "+(w(t,t.length-1,"selectIndex").value===a?"active":"")},operator:P,tag:"div",text:_(w(t,t.length-1,"name").value),type:3})})),i.push((t={children:function(){var t=[];return t.push({isPure:r,operator:I,text:_(x(z,z.length-1,"language.CONTROL_SUBTITLE_TRACK_ADD",["language","CONTROL_SUBTITLE_TRACK_ADD"],r).value),type:1}),w(z,z.length-1,"canUseFilePicker").value?t.push({isPure:r,operator:S,text:"",type:2}):t.push({context:D,events:{change:u("change","fileChange()","change","","fileChange")},nativeAttrs:{accept:w(z,z.length-1,"accept").value,id:"avplayer-file-open-subtitle",type:"file"},nativeStyles:s,operator:P,tag:"input",type:3}),t.length?t:e}(),context:D,nativeAttrs:{class:"libmedia-ui-selector-item"},operator:P,tag:"label",type:3},w(z,z.length-1,"canUseFilePicker").value?y(t,"events","click",u("click","openFile()","click","","openFile")):y(t,"nativeAttrs","for","avplayer-file-open-subtitle"),t)),i.length?i:e}(),context:D,nativeAttrs:a,operator:P,tag:"div",type:3}),t.push({context:D,html:_(w(z,z.length-1,"style").value),nativeAttrs:n,operator:P,tag:"style",type:3}),t.length?t:e}(),context:D,nativeAttrs:o,operator:P,tag:"div",type:3})})},9127:t=>{var e,r,i,s,a,n;t.exports=(r=!0,i={class:"avplayer-ui-time-label"},s={class:"avplayer-ui-time-div"},a={type:"text/css"},n={class:"avplayer-ui-control-timer"},function(t,o,c,l,h,u,d,p,f,m,v,g,y,A,b,x,w,k,T,_,I,S,P,M,C,R,E,D,B,L,U,F,$,O,N,z,V,G){G.push({children:function(){var t=[];return t.push({context:E,nativeAttrs:i,operator:S,tag:"span",text:T(k((e=x(N,N.length-1,"formatTime",B&&B.formatTime||L.formatTime).value,"function"==typeof e?e(x(N,N.length-1,"currentTime").value):D.fatal("[formatTime(currentTime)] is not a function."))).value),type:3}),t.push({context:E,html:"&nbsp;/&nbsp;",isPure:r,isStatic:r,nativeAttrs:s,operator:S,tag:"span",type:3}),t.push({context:E,nativeAttrs:i,operator:S,tag:"span",text:T(k((e=x(N,N.length-1,"formatTime",B&&B.formatTime||L.formatTime).value,"function"==typeof e?e(x(N,N.length-1,"totalTime").value):D.fatal("[formatTime(totalTime)] is not a function."))).value),type:3}),t.push({context:E,html:T(x(N,N.length-1,"style").value),nativeAttrs:a,operator:S,tag:"style",type:3}),t.length?t:void 0}(),context:E,nativeAttrs:n,operator:S,tag:"div",type:3})})},43145:t=>{var e,r,i,s,a;t.exports=(e=void 0,r={class:"avplayer-ui-control-video-track-value"},i={class:"libmedia-ui-selector"},s={type:"text/css"},a={class:"avplayer-ui-control-video-track"},function(t,n,o,c,l,h,u,d,p,f,m,v,g,y,A,b,x,w,k,T,_,I,S,P,M,C,R,E,D,B,L,U,F,$,O,N,z,V){V.push({children:function(){var t=[];return t.push({context:R,nativeAttrs:r,operator:I,tag:"div",text:k(A(O,O.length-1,"language.CONTROL_VIDEO_TRACK",["language","CONTROL_VIDEO_TRACK"],!0).value),type:3}),t.push({children:function(){var t=[];return p(b(O,O.length-1,"list"),(function(e,r,i,s,a){t.push({context:R,events:{click:l("click","change(i)","click","","change",{execute:function(t,e){return[a]}})},key:b(e,e.length-1,"id").value,nativeAttrs:{class:"libmedia-ui-selector-item "+(b(e,e.length-1,"selectIndex").value===a?"active":"")},operator:I,tag:"div",text:k(b(e,e.length-1,"name").value),type:3})})),t.length?t:e}(),context:R,nativeAttrs:i,operator:I,tag:"div",type:3}),t.push({context:R,html:k(b(O,O.length-1,"style").value),nativeAttrs:s,operator:I,tag:"style",type:3}),t.length?t:e}(),context:R,nativeAttrs:a,operator:I,tag:"div",type:3})})},93069:t=>{var e,r,i,s,a,n,o,c,l,h,u,d,p;t.exports=(e=void 0,r=!0,i={d:"M10.188 4.65L6 8H5a2 2 0 0 0-2 2v2a2 2 0 0 0 2 2h1l4.188 3.35a.5.5 0 0 0 .812-.39V5.04a.498.498 0 0 0-.812-.39zM14.446 3.778a1 1 0 0 0-.862 1.804 6.002 6.002 0 0 1-.007 10.838 1 1 0 0 0 .86 1.806A8.001 8.001 0 0 0 19 11a8.001 8.001 0 0 0-4.554-7.222z"},s={d:"M15 11a3.998 3.998 0 0 0-2-3.465v6.93A3.998 3.998 0 0 0 15 11z"},a={viewBox:"0 0 22 22",xmlns:"http://www.w3.org/2000/svg"},n={d:"M15 11a3.998 3.998 0 0 0-2-3.465v2.636l1.865 1.865A4.02 4.02 0 0 0 15 11z"},o={d:"M13.583 5.583A5.998 5.998 0 0 1 17 11a6 6 0 0 1-.585 2.587l1.477 1.477a8.001 8.001 0 0 0-3.446-11.286 1 1 0 0 0-.863 1.805zM18.778 18.778l-2.121-2.121-1.414-1.414-1.415-1.415L13 13l-2-2-3.889-3.889-3.889-3.889a.999.999 0 1 0-1.414 1.414L5.172 8H5a2 2 0 0 0-2 2v2a2 2 0 0 0 2 2h1l4.188 3.35a.5.5 0 0 0 .812-.39v-3.131l2.587 2.587-.01.005a1 1 0 0 0 .86 1.806c.215-.102.424-.214.627-.333l2.3 2.3a1.001 1.001 0 0 0 1.414-1.416zM11 5.04a.5.5 0 0 0-.813-.39L8.682 5.854 11 8.172V5.04z"},c={class:"avplayer-ui-volume-icon"},l={class:"avplayer-ui-volume-value"},h={class:"avplayer-ui-volume-inner"},u={class:"avplayer-ui-volume-panel"},d={type:"text/css"},p={class:"avplayer-ui-control-volume"},function(t,f,m,v,g,y,A,b,x,w,k,T,_,I,S,P,M,C,R,E,D,B,L,U,F,$,O,N,z,V,G,W,j,H,q,Y,K,Q){Q.push({children:function(){var t=[];return t.push({children:function(){var t=[];return P(q,q.length-1,"volume").value?t.push({children:[{context:O,isPure:r,isStatic:r,isSvg:r,nativeAttrs:i,operator:B,tag:"path",type:3},{context:O,isPure:r,isStatic:r,isSvg:r,nativeAttrs:s,operator:B,tag:"path",type:3}],context:O,isPure:r,isStatic:r,isSvg:r,nativeAttrs:a,operator:B,tag:"svg",type:3}):t.push({children:[{context:O,isPure:r,isStatic:r,isSvg:r,nativeAttrs:n,operator:B,tag:"path",type:3},{context:O,isPure:r,isStatic:r,isSvg:r,nativeAttrs:o,operator:B,tag:"path",type:3}],context:O,isPure:r,isStatic:r,isSvg:r,nativeAttrs:a,operator:B,tag:"svg",type:3}),t.length?t:e}(),context:O,events:{click:g("click","volumeClick()","click","","volumeClick")},nativeAttrs:c,operator:B,tag:"div",type:3}),t.push({children:function(){var t=[];return t.push({children:function(){var t=[];return t.push({context:O,nativeAttrs:l,operator:B,tag:"div",text:R(P(q,q.length-1,"volume").value),type:3}),t.push({context:O,model:v(P(q,q.length-1,"volume")),operator:L,tag:"Slider",type:4}),t.length?t:e}(),context:O,nativeAttrs:h,operator:B,tag:"div",type:3}),t.length?t:e}(),context:O,nativeAttrs:u,operator:B,tag:"div",type:3}),t.push({context:O,html:R(P(q,q.length-1,"style").value),nativeAttrs:d,operator:B,tag:"style",type:3}),t.length?t:e}(),context:O,nativeAttrs:p,operator:B,tag:"div",type:3})})},94907:t=>{var e,r,i,s,a,n,o,c,l,h,u,d,p,f,m,v,g,y,A,b,x,w,k,T,_,I,S;t.exports=(r=void 0,i=!0,s={d:"M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8l-2-2z"},a={viewBox:"0 0 24 24"},n={class:"avplayer-ui-folder-icon dir"},o={class:"avplayer-ui-folder-open-name"},c={class:"avplayer-ui-folder-open-dir item"},l={"stroke-width":"0"},h={"stroke-linecap":"round","stroke-linejoin":"round"},u={d:"M21 11V15.8C21 16.9201 21 17.4802 20.782 17.908C20.5903 18.2843 20.2843 18.5903 19.908 18.782C19.4802 19 18.9201 19 17.8 19H6.2C5.0799 19 4.51984 19 4.09202 18.782C3.71569 18.5903 3.40973 18.2843 3.21799 17.908C3 17.4802 3 16.9201 3 15.8V8.2C3 7.0799 3 6.51984 3.21799 6.09202C3.40973 5.71569 3.71569 5.40973 4.09202 5.21799C4.51984 5 5.0799 5 6.2 5H15M21 11L15 5M21 11H16.6C16.0399 11 15.7599 11 15.546 10.891C15.3578 10.7951 15.2049 10.6422 15.109 10.454C15 10.2401 15 9.96005 15 9.4V5","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"},d={fill:"none",transform:"rotate(270)",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},p={class:"avplayer-ui-folder-icon file"},f={display:"none"},m={class:"avplayer-ui-folder-open"},v={type:"checkbox"},g={class:"avplayer-ui-url-open-live"},y={"clip-rule":"evenodd",d:"M10 1C9.73478 1 9.48043 1.10536 9.29289 1.29289L3.29289 7.29289C3.10536 7.48043 3 7.73478 3 8V20C3 21.6569 4.34315 23 6 23H7C7.55228 23 8 22.5523 8 22C8 21.4477 7.55228 21 7 21H6C5.44772 21 5 20.5523 5 20V9H10C10.5523 9 11 8.55228 11 8V3H18C18.5523 3 19 3.44772 19 4V7C19 7.55228 19.4477 8 20 8C20.5523 8 21 7.55228 21 7V4C21 2.34315 19.6569 1 18 1H10ZM9 7H6.41421L9 4.41421V7ZM12.5 24","fill-rule":"evenodd"},A={stroke:"none"},b={d:"M17 15V18M17 21V18M17 18H14M17 18H20",stroke:"","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"},x={fill:"none",height:"120%",viewBox:"00 0 24 24",width:"120%",x:"-4",xmlns:"http://www.w3.org/2000/svg",y:"-4"},w={fill:"none",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},k={class:"avplayer-ui-url-open"},T={class:"avplayer-ui-folder-list",role:"list"},_={class:"avplayer-ui-folder-list-container"},I={type:"text/css"},S={class:"avplayer-ui-folder"},function(t,P,M,C,R,E,D,B,L,U,F,$,O,N,z,V,G,W,j,H,q,Y,K,Q,X,J,Z,tt,et,rt,it,st,at,nt,ot,ct,lt,ht){ht.push({children:function(){var S=[];return S.push({children:function(){var t,e=[];return V(ot,ot.length-1,"canOpenFolder").value?e.push({children:function(){var t=[];return t.push({children:[{children:[{context:Z,isPure:i,isStatic:i,isSvg:i,nativeAttrs:s,operator:Y,tag:"path",type:3}],context:Z,isPure:i,isStatic:i,isSvg:i,nativeAttrs:a,operator:Y,tag:"svg",type:3}],context:Z,isPure:i,isStatic:i,nativeAttrs:n,operator:Y,tag:"div",type:3}),t.push({context:Z,nativeAttrs:o,operator:Y,tag:"div",text:j(z(ot,ot.length-1,"language.FOLDER_OPEN_DIR",["language","FOLDER_OPEN_DIR"],i).value),type:3}),t.length?t:r}(),context:Z,events:{click:R("click","openDir()","click","","openDir")},nativeAttrs:c,operator:Y,tag:"div",type:3}):e.push({isPure:i,operator:q,text:"",type:2}),e.push((t={children:function(){var t=[];return t.push({children:[{children:[{context:Z,isPure:i,isStatic:i,isSvg:i,nativeAttrs:l,operator:Y,tag:"g",type:3},{context:Z,isPure:i,isStatic:i,isSvg:i,nativeAttrs:h,operator:Y,tag:"g",type:3},{children:[{isPure:i,operator:H,text:" ",type:1},{context:Z,isPure:i,isStatic:i,isSvg:i,nativeAttrs:u,operator:Y,tag:"path",type:3},{isPure:i,operator:H,text:" ",type:1}],context:Z,isPure:i,isStatic:i,isSvg:i,operator:Y,tag:"g",type:3}],context:Z,isPure:i,isStatic:i,isSvg:i,nativeAttrs:d,operator:Y,tag:"svg",type:3}],context:Z,isPure:i,isStatic:i,nativeAttrs:p,operator:Y,tag:"div",type:3}),t.push({context:Z,nativeAttrs:o,operator:Y,tag:"div",text:j(z(ot,ot.length-1,"language.FOLDER_OPEN_FILE",["language","FOLDER_OPEN_FILE"],i).value),type:3}),V(ot,ot.length-1,"canUseFilePicker").value?t.push({isPure:i,operator:q,text:"",type:2}):t.push({context:Z,events:{change:R("change","fileChange()","change","","fileChange")},nativeAttrs:{accept:V(ot,ot.length-1,"accept").value,id:"avplayer-file-open-input",type:"file"},nativeStyles:f,operator:Y,tag:"input",type:3}),t.length?t:r}(),context:Z,nativeAttrs:{class:"avplayer-ui-folder-open-file item"},operator:Y,tag:"label",type:3},V(ot,ot.length-1,"canUseFilePicker").value?$(t,"events","click",R("click","openFile()","click","","openFile")):$(t,"nativeAttrs","for","avplayer-file-open-input"),t)),e.length?e:r}(),context:Z,nativeAttrs:m,operator:Y,tag:"div",type:3}),S.push({children:function(){var t=[];return t.push({context:Z,nativeAttrs:{class:"avplayer-ui-url-open-input",placeholder:z(ot,ot.length-1,"language.FOLDER_OPEN_URL_PLACEHOLDER",["language","FOLDER_OPEN_URL_PLACEHOLDER"],i).value,type:"text"},operator:Y,ref:"url",tag:"input",type:3}),t.push({children:function(){var t=[];return t.push({context:Z,nativeAttrs:v,operator:Y,ref:"live",tag:"input",type:3}),t.push({context:Z,operator:Y,tag:"span",text:j(z(ot,ot.length-1,"language.CHECKBOX_LIVE",["language","CHECKBOX_LIVE"],i).value),type:3}),t.length?t:r}(),context:Z,nativeAttrs:g,operator:Y,tag:"label",type:3}),t.push({children:[{children:[{context:Z,isPure:i,isStatic:i,isSvg:i,nativeAttrs:l,operator:Y,tag:"g",type:3},{context:Z,isPure:i,isStatic:i,isSvg:i,nativeAttrs:h,operator:Y,tag:"g",type:3},{children:[{isPure:i,operator:H,text:" ",type:1},{context:Z,isPure:i,isStatic:i,isSvg:i,nativeAttrs:y,nativeStyles:A,operator:Y,tag:"path",type:3},{isPure:i,operator:H,text:" ",type:1}],context:Z,isPure:i,isStatic:i,isSvg:i,operator:Y,tag:"g",type:3},{children:[{children:[{context:Z,isPure:i,isStatic:i,isSvg:i,nativeAttrs:b,operator:Y,tag:"path",type:3}],context:Z,isPure:i,isStatic:i,isSvg:i,operator:Y,tag:"g",type:3}],context:Z,isPure:i,isStatic:i,isSvg:i,nativeAttrs:x,operator:Y,tag:"svg",type:3}],context:Z,isPure:i,isStatic:i,isSvg:i,nativeAttrs:w,operator:Y,tag:"svg",type:3}],context:Z,events:{click:R("click","openUrl()","click","","openUrl")},nativeAttrs:{class:"avplayer-ui-folder-icon add hint--top","data-hint":z(ot,ot.length-1,"language.BUTTON_ADD",["language","BUTTON_ADD"],i).value},operator:Y,tag:"div",type:3}),t.length?t:r}(),context:Z,nativeAttrs:k,operator:Y,tag:"div",type:3}),S.push({children:function(){var t=[];return t.push({children:function(){var t=[];return L(V(ot,ot.length-1,"root"),(function(r,i,s,a){t.push({context:Z,key:W(i.name,r[r.length-1].getKeypath("name")).value,operator:K,props:{language:V(r,r.length-1,"language").value,node:(e=r[r.length-1],W(e.getScope(),e.keypath)).value},ref:W(i.id,r[r.length-1].getKeypath("id")).value,tag:"FolderNode",type:4})})),t.length?t:r}(),context:Z,nativeAttrs:T,operator:Y,tag:"ul",type:3}),t.length?t:r}(),context:Z,events:{keydown:R("keydown","preventDefault()","keydown","","preventDefault"),keyup:R("keyup","preventDefault()","keyup","","preventDefault")},nativeAttrs:_,operator:Y,ref:"scroll",tag:"div",type:3}),S.push({context:Z,nativeAttrs:{class:"avplayer-ui-folder-tip","data-show":V(ot,ot.length-1,"tipShow").value?1:0},nativeStyles:t("top: "+j(V(ot,ot.length-1,"tipTop").value)+"px"),operator:Y,tag:"div",text:j(V(ot,ot.length-1,"tip").value),type:3}),S.push({context:Z,html:j(V(ot,ot.length-1,"style").value),nativeAttrs:I,operator:Y,tag:"style",type:3}),S.length?S:r}(),context:Z,nativeAttrs:S,operator:Y,tag:"div",type:3})})},81747:t=>{var e,r,i,s,a,n,o,c,l,h,u,d,p,f,m,v,g,y,A,b,x,w,k,T,_;t.exports=(r=void 0,i=!0,s={d:"m10 17 5-5-5-5v10z"},a={viewBox:"0 0 24 24"},n={d:"M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8l-2-2z"},o={class:"avplayer-ui-folder-icon dir"},c={"stroke-width":"0"},l={"stroke-linecap":"round","stroke-linejoin":"round"},h={"clip-rule":"evenodd",d:"M10 1C9.73478 1 9.48043 1.10536 9.29289 1.29289L3.29289 7.29289C3.10536 7.48043 3 7.73478 3 8V20C3 21.6569 4.34315 23 6 23H7C7.55228 23 8 22.5523 8 22C8 21.4477 7.55228 21 7 21H6C5.44772 21 5 20.5523 5 20V9H10C10.5523 9 11 8.55228 11 8V3H18C18.5523 3 19 3.44772 19 4V7C19 7.55228 19.4477 8 20 8C20.5523 8 21 7.55228 21 7V4C21 2.34315 19.6569 1 18 1H10ZM9 7H6.41421L9 4.41421V7ZM12.5 24","fill-rule":"evenodd"},u={d:"M255.994,0.006C114.607,0.013,0.012,114.612,0,256c0.012,141.387,114.607,255.986,255.994,255.994 C397.393,511.986,511.992,397.387,512,256C511.992,114.612,397.393,0.013,255.994,0.006z M97.607,97.612 c23.34-23.328,51.761-41.475,83.455-52.725c-15.183,18.375-27.84,41.906-37.757,69.116H82.772 C87.452,108.308,92.396,102.824,97.607,97.612z M65.612,138.003h69.986c-9.008,31.929-14.41,67.834-15.363,105.997H32.327 C34.374,205.196,46.3,169.088,65.612,138.003z M65.612,373.997C46.3,342.912,34.374,306.804,32.327,268h87.991 c0.961,38.124,6.21,74.092,15.206,105.998H65.612z M97.607,414.386c-5.211-5.211-10.156-10.695-14.836-16.39h60.573 c4.28,11.774,9.019,22.944,14.312,33.21c6.954,13.438,14.758,25.468,23.348,35.89C149.332,455.846,120.931,437.699,97.607,414.386z M243.998,479.667c-3.746-0.196-7.469-0.477-11.164-0.86c-5.89-2.64-11.722-6.25-17.5-10.961 c-17.632-14.359-33.976-38.671-46.398-69.85h75.061V479.667z M243.998,373.997h-83.436c-9.477-31.171-15.316-67.311-16.328-105.998 h99.763V373.997z M243.998,244H144.31c1.008-38.71,6.875-74.819,16.359-105.997h83.33V244z M243.998,114.003h-74.951 c3.109-7.79,6.367-15.312,9.934-22.195c10.64-20.625,23.17-36.89,36.354-47.656c5.777-4.71,11.609-8.32,17.5-10.96 c3.695-0.382,7.417-0.664,11.164-0.859V114.003z M446.392,138.003c19.312,31.085,31.234,67.194,33.281,105.997h-87.991 c-0.961-38.124-6.21-74.092-15.21-105.997H446.392z M414.393,97.612c5.211,5.211,10.156,10.696,14.836,16.391h-60.577 c-4.281-11.773-9.023-22.945-14.312-33.21c-6.953-13.437-14.758-25.468-23.347-35.89C362.668,56.16,391.065,74.301,414.393,97.612z M267.998,32.333c3.746,0.195,7.469,0.484,11.16,0.859c5.89,2.649,11.723,6.25,17.504,10.96 c17.636,14.359,33.976,38.671,46.397,69.85h-75.061V32.333z M267.998,138.003h83.436c9.476,31.171,15.32,67.31,16.328,105.997 h-99.764V138.003z M267.998,268h99.685c-1.007,38.71-6.874,74.818-16.359,105.998h-83.326V268z M296.661,467.846 c-5.781,4.711-11.614,8.313-17.504,10.961c-3.691,0.375-7.414,0.664-11.16,0.86v-81.67h74.951 c-3.109,7.789-6.367,15.312-9.933,22.195C322.376,440.816,309.845,457.081,296.661,467.846z M414.393,414.386 c-23.336,23.328-51.764,41.476-83.459,52.725c15.187-18.375,27.835-41.905,37.757-69.115h60.538 C424.548,403.692,419.604,409.176,414.393,414.386z M446.392,373.997h-69.998c9.008-31.929,14.414-67.842,15.367-105.998h87.912 C477.626,306.804,465.704,342.912,446.392,373.997z"},d={fill:"none",height:"65%",viewBox:"00 0 512 512",width:"65%",x:"8",xmlns:"http://www.w3.org/2000/svg",y:"8"},p={fill:"none",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},f={class:"avplayer-ui-folder-icon url"},m={"clip-rule":"evenodd",d:"M10 1C9.73478 1 9.48043 1.10536 9.29289 1.29289L3.29289 7.29289C3.10536 7.48043 3 7.73478 3 8V20C3 21.6569 4.34315 23 6 23H7C7.55228 23 8 22.5523 8 22C8 21.4477 7.55228 21 7 21H6C5.44772 21 5 20.5523 5 20V9H10C10.5523 9 11 8.55228 11 8V3H18C18.5523 3 19 3.44772 19 4V7C19 7.55228 19.4477 8 20 8C20.5523 8 21 7.55228 21 7V4C21 2.34315 19.6569 1 18 1H10ZM9 7H6.41421L9 4.41421V7ZM12.5 24C13.8807 24 15 22.8807 15 21.5V12.8673L20 12.153V18.05C19.8384 18.0172 19.6712 18 19.5 18C18.1193 18 17 19.1193 17 20.5C17 21.8807 18.1193 23 19.5 23C20.8807 23 22 21.8807 22 20.5V11C22 10.7101 21.8742 10.4345 21.6552 10.2445C21.4362 10.0546 21.1456 9.96905 20.8586 10.0101L13.8586 11.0101C13.3659 11.0804 13 11.5023 13 12V19.05C12.8384 19.0172 12.6712 19 12.5 19C11.1193 19 10 20.1193 10 21.5C10 22.8807 11.1193 24 12.5 24Z","fill-rule":"evenodd"},v={class:"avplayer-ui-folder-icon music"},g={"clip-rule":"evenodd",d:"M10 1C9.73478 1 9.48043 1.10536 9.29289 1.29289L3.29289 7.29289C3.10536 7.48043 3 7.73478 3 8V20C3 21.6569 4.34315 23 6 23H8C8.55228 23 9 22.5523 9 22C9 21.4477 8.55228 21 8 21H6C5.44772 21 5 20.5523 5 20V9H10C10.5523 9 11 8.55228 11 8V3H18C18.5523 3 19 3.44772 19 4V7C19 7.55228 19.4477 8 20 8C20.5523 8 21 7.55228 21 7V4C21 2.34315 19.6569 1 18 1H10ZM9 7H6.41421L9 4.41421V7ZM12 17C12 14.2386 14.2386 12 17 12C19.7614 12 22 14.2386 22 17C22 19.7614 19.7614 22 17 22C14.2386 22 12 19.7614 12 17ZM17 10C13.134 10 10 13.134 10 17C10 20.866 13.134 24 17 24C20.866 24 24 20.866 24 17C24 13.134 20.866 10 17 10ZM16.5547 14.1679C16.2478 13.9634 15.8533 13.9443 15.5281 14.1183C15.203 14.2923 15 14.6312 15 15V19C15 19.3688 15.203 19.7077 15.5281 19.8817C15.8533 20.0557 16.2478 20.0366 16.5547 19.8321L19.5547 17.8321C19.8329 17.6466 20 17.3344 20 17C20 16.6656 19.8329 16.3534 19.5547 16.1679L16.5547 14.1679Z","fill-rule":"evenodd"},y={class:"avplayer-ui-folder-icon mov"},A={class:"avplayer-ui-folder-node-name"},b={d:"M7 3a2 2 0 0 0-2 2v12a2 2 0 1 0 4 0V5a2 2 0 0 0-2-2zM15 3a2 2 0 0 0-2 2v12a2 2 0 1 0 4 0V5a2 2 0 0 0-2-2z"},x={viewBox:"0 0 22 22",xmlns:"http://www.w3.org/2000/svg"},w={d:"M17.982 9.275L8.06 3.27A2.013 2.013 0 0 0 5 4.994v12.011a2.017 2.017 0 0 0 3.06 1.725l9.922-6.005a2.017 2.017 0 0 0 0-3.45z"},k={d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"},T={class:"avplayer-ui-folder-list",role:"list"},_={class:"avplayer-ui-folder-list-li",role:"listitem"},function(t,I,S,P,M,C,R,E,D,B,L,U,F,$,O,N,z,V,G,W,j,H,q,Y,K,Q,X,J,Z,tt,et,rt,it,st,at,nt,ot,ct){ct.push({children:function(){var _=[];return _.push({children:function(){var t=[];return V((e=N(at,at.length-1,"isFolder",Z&&Z.isFolder||tt.isFolder).value,"function"==typeof e?e(N(at,at.length-1,"node").value):J.fatal("[isFolder(node)] is not a function."))).value?(t.push({children:[{children:[{context:X,isPure:i,isStatic:i,isSvg:i,nativeAttrs:s,operator:H,tag:"path",type:3}],context:X,isPure:i,isStatic:i,isSvg:i,nativeAttrs:a,operator:H,tag:"svg",type:3}],context:X,events:{click:M("click","toggle()","click","","toggle")},nativeAttrs:{class:"avplayer-ui-folder-expand hint--right","data-hint":O(at,at.length-1,"node.opened",["node","opened"],i).value?O(at,at.length-1,"language.TIP_FOLD",["language","TIP_FOLD"],i).value:O(at,at.length-1,"language.TIP_UNFOLD",["language","TIP_UNFOLD"],i).value,"data-open":O(at,at.length-1,"node.opened",["node","opened"],i).value?1:0},operator:H,tag:"div",type:3}),t.push({children:[{children:[{context:X,isPure:i,isStatic:i,isSvg:i,nativeAttrs:n,operator:H,tag:"path",type:3}],context:X,isPure:i,isStatic:i,isSvg:i,nativeAttrs:a,operator:H,tag:"svg",type:3}],context:X,isPure:i,isStatic:i,nativeAttrs:o,operator:H,tag:"div",type:3})):V((e=N(at,at.length-1,"isUrl",Z&&Z.isUrl||tt.isUrl).value,"function"==typeof e?e(N(at,at.length-1,"node").value):J.fatal("[isUrl(node)] is not a function."))).value?t.push({children:[{children:[{context:X,isPure:i,isStatic:i,isSvg:i,nativeAttrs:c,operator:H,tag:"g",type:3},{context:X,isPure:i,isStatic:i,isSvg:i,nativeAttrs:l,operator:H,tag:"g",type:3},{children:[{isPure:i,operator:W,text:" ",type:1},{context:X,isPure:i,isStatic:i,isSvg:i,nativeAttrs:h,operator:H,tag:"path",type:3},{isPure:i,operator:W,text:" ",type:1}],context:X,isPure:i,isStatic:i,isSvg:i,operator:H,tag:"g",type:3},{children:[{children:[{context:X,isPure:i,isStatic:i,isSvg:i,nativeAttrs:u,operator:H,tag:"path",type:3},{isPure:i,operator:W,text:" ",type:1}],context:X,isPure:i,isStatic:i,isSvg:i,operator:H,tag:"g",type:3}],context:X,isPure:i,isStatic:i,isSvg:i,nativeAttrs:d,operator:H,tag:"svg",type:3}],context:X,isPure:i,isStatic:i,isSvg:i,nativeAttrs:p,operator:H,tag:"svg",type:3}],context:X,isPure:i,isStatic:i,nativeAttrs:f,operator:H,tag:"div",type:3}):V((e=N(at,at.length-1,"isMusic",Z&&Z.isMusic||tt.isMusic).value,"function"==typeof e?e(N(at,at.length-1,"node").value):J.fatal("[isMusic(node)] is not a function."))).value?t.push({children:[{children:[{context:X,isPure:i,isStatic:i,isSvg:i,nativeAttrs:c,operator:H,tag:"g",type:3},{context:X,isPure:i,isStatic:i,isSvg:i,nativeAttrs:l,operator:H,tag:"g",type:3},{children:[{isPure:i,operator:W,text:" ",type:1},{context:X,isPure:i,isStatic:i,isSvg:i,nativeAttrs:m,operator:H,tag:"path",type:3},{isPure:i,operator:W,text:" ",type:1}],context:X,isPure:i,isStatic:i,isSvg:i,operator:H,tag:"g",type:3}],context:X,isPure:i,isStatic:i,isSvg:i,nativeAttrs:p,operator:H,tag:"svg",type:3}],context:X,isPure:i,isStatic:i,nativeAttrs:v,operator:H,tag:"div",type:3}):t.push({children:[{children:[{context:X,isPure:i,isStatic:i,isSvg:i,nativeAttrs:c,operator:H,tag:"g",type:3},{context:X,isPure:i,isStatic:i,isSvg:i,nativeAttrs:l,operator:H,tag:"g",type:3},{children:[{isPure:i,operator:W,text:" ",type:1},{context:X,isPure:i,isStatic:i,isSvg:i,nativeAttrs:g,operator:H,tag:"path",type:3},{isPure:i,operator:W,text:" ",type:1}],context:X,isPure:i,isStatic:i,isSvg:i,operator:H,tag:"g",type:3}],context:X,isPure:i,isStatic:i,isSvg:i,nativeAttrs:p,operator:H,tag:"svg",type:3}],context:X,isPure:i,isStatic:i,nativeAttrs:y,operator:H,tag:"div",type:3}),t.push({context:X,events:{mouseenter:M("mouseenter","mouseenter()","mouseenter","","mouseenter"),mouseleave:M("mouseleave","mouseleave()","mouseleave","","mouseleave")},nativeAttrs:A,operator:H,ref:"name",tag:"div",text:G(O(at,at.length-1,"node.name",["node","name"],i).value),type:3}),V((e=N(at,at.length-1,"isFolder",Z&&Z.isFolder||tt.isFolder).value,"function"==typeof e?e(N(at,at.length-1,"node").value):J.fatal("[isFolder(node)] is not a function."))).value?t.push({isPure:i,operator:j,text:"",type:2}):t.push({children:function(){var t=[];return O(at,at.length-1,"node.played",["node","played"],i).value&&!O(at,at.length-1,"node.paused",["node","paused"],i).value?t.push({children:[{context:X,isPure:i,isStatic:i,isSvg:i,nativeAttrs:b,operator:H,tag:"path",type:3}],context:X,isPure:i,isStatic:i,isSvg:i,nativeAttrs:x,operator:H,tag:"svg",type:3}):t.push({children:[{context:X,isPure:i,isStatic:i,isSvg:i,nativeAttrs:w,operator:H,tag:"path",type:3}],context:X,isPure:i,isStatic:i,isSvg:i,nativeAttrs:x,operator:H,tag:"svg",type:3}),t.length?t:r}(),context:X,events:{click:M("click","play()","click","","play")},nativeAttrs:{class:"avplayer-ui-folder-icon play hint--top","data-hint":!O(at,at.length-1,"node.played",["node","played"],i).value||O(at,at.length-1,"node.paused",["node","paused"],i).value?O(at,at.length-1,"language.TIP_PLAY",["language","TIP_PLAY"],i).value:O(at,at.length-1,"language.TIP_PAUSE",["language","TIP_PAUSE"],i).value},operator:H,tag:"div",type:3}),O(at,at.length-1,"node.depth",["node","depth"],i).value?t.push({isPure:i,operator:j,text:"",type:2}):t.push({children:[{children:[{context:X,isPure:i,isStatic:i,isSvg:i,nativeAttrs:k,operator:H,tag:"path",type:3}],context:X,isPure:i,isStatic:i,isSvg:i,nativeAttrs:a,operator:H,tag:"svg",type:3}],context:X,events:{click:M("click","delete()","click","","delete")},nativeAttrs:{class:"avplayer-ui-folder-icon delete hint--top","data-hint":O(at,at.length-1,"language.TIP_DELETE",["language","TIP_DELETE"],i).value},operator:H,tag:"div",type:3}),t.length?t:r}(),context:X,nativeAttrs:{class:"avplayer-ui-folder-node "+(O(at,at.length-1,"node.played",["node","played"],i).value?"active":"")},nativeStyles:t("padding-inline-start: "+G(V((e=N(at,at.length-1,"paddingStart",Z&&Z.paddingStart||tt.paddingStart).value,"function"==typeof e?e(N(at,at.length-1,"node").value):J.fatal("[paddingStart(node)] is not a function."))).value)+"px;"),operator:H,tag:"div",type:3}),V((e=N(at,at.length-1,"isFolder",Z&&Z.isFolder||tt.isFolder).value,"function"==typeof e?e(N(at,at.length-1,"node").value):J.fatal("[isFolder(node)] is not a function."))).value&&O(at,at.length-1,"node.opened",["node","opened"],i).value?_.push({children:function(){var t=[];return D(O(at,at.length-1,"node.children",["node","children"],i),(function(r,i,s,a){t.push({context:X,key:V(i.name,r[r.length-1].getKeypath("name")).value,operator:q,props:{language:N(r,r.length-1,"language").value,node:(e=r[r.length-1],V(e.getScope(),e.keypath)).value},ref:V(i.id,r[r.length-1].getKeypath("id")).value,tag:"FolderNode",type:4})})),t.length?t:r}(),context:X,nativeAttrs:T,operator:H,tag:"ul",type:3}):_.push({isPure:i,operator:j,text:"",type:2}),_.length?_:r}(),context:X,nativeAttrs:_,operator:H,tag:"li",type:3})})},15491:t=>{var e,r,i,s,a,n,o,c,l,h,u,d,p;t.exports=(e=void 0,r=!0,i={class:"avplayer-ui-info-title"},s={d:"m8 6.939 3.182-3.182a.75.75 0 1 1 1.061 1.061L9.061 8l3.182 3.182a.75.75 0 1 1-1.061 1.061L8 9.061l-3.182 3.182a.75.75 0 1 1-1.061-1.061L6.939 8 3.757 4.818a.75.75 0 1 1 1.061-1.061L8 6.939z"},a={"data-pointer":"none",space:"preserve",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},n={class:"avplayer-ui-info-close"},o={class:"avplayer-ui-info-format"},c={class:"avplayer-ui-info-line-title"},l={class:"avplayer-ui-info-line-value"},h={class:"avplayer-ui-info-line"},u={class:"avplayer-ui-info-panel"},d={type:"text/css"},p={class:"avplayer-ui-info"},function(t,f,m,v,g,y,A,b,x,w,k,T,_,I,S,P,M,C,R,E,D,B,L,U,F,$,O,N,z,V,G,W,j,H,q,Y,K,Q){Q.push({children:function(){var t=[];return t.push({context:O,nativeAttrs:i,operator:B,tag:"div",text:R(S(q,q.length-1,"language.INFO_TITLE",["language","INFO_TITLE"],r).value),type:3}),t.push({children:[{children:[{context:O,isPure:r,isStatic:r,isSvg:r,nativeAttrs:s,operator:B,tag:"path",type:3}],context:O,isPure:r,isStatic:r,isSvg:r,nativeAttrs:a,operator:B,tag:"svg",type:3}],context:O,events:{click:g("click","close()","click","","close")},nativeAttrs:n,operator:B,tag:"span",type:3}),t.push({children:function(){var t=[];return t.push({children:function(){var t=[];return t.push({context:O,html:R(P(q,q.length-1,"info").value),operator:B,tag:"span",type:3}),t.length?t:e}(),context:O,nativeAttrs:o,operator:B,tag:"div",type:3}),x(P(q,q.length-1,"list"),(function(r,i,s,a){t.push({children:function(){var t=[];return t.push({context:O,nativeAttrs:c,operator:B,tag:"span",text:R(P(r,r.length-1,"key").value),type:3}),t.push({context:O,nativeAttrs:l,operator:B,tag:"span",text:R(P(r,r.length-1,"value").value),type:3}),t.length?t:e}(),context:O,nativeAttrs:h,operator:B,tag:"div",type:3})})),t.length?t:e}(),context:O,events:{keydown:g("keydown","preventDefault()","keydown","","preventDefault"),keyup:g("keyup","preventDefault()","keyup","","preventDefault")},nativeAttrs:u,operator:B,tag:"div",type:3}),t.push({context:O,html:R(P(q,q.length-1,"style").value),nativeAttrs:d,operator:B,tag:"style",type:3}),t.length?t:e}(),context:O,nativeAttrs:p,operator:B,tag:"div",type:3})})},32849:t=>{var e,r,i,s,a;t.exports=(e=!0,r={cx:"50",cy:"50",fill:"none",r:"20"},i={class:"avplayer-ui-circular",viewBox:"25 25 50 50"},s={class:"avplayer-ui-loading-spinner"},a={type:"text/css"},function(t,n,o,c,l,h,u,d,p,f,m,v,g,y,A,b,x,w,k,T,_,I,S,P,M,C,R,E,D,B,L,U,F,$,O,N,z,V){V.push({children:function(){var t=[];return t.push({children:[{children:[{context:R,isPure:e,isStatic:e,isSvg:e,nativeAttrs:r,operator:I,tag:"circle",type:3}],context:R,isPure:e,isStatic:e,isSvg:e,nativeAttrs:i,operator:I,tag:"svg",type:3}],context:R,isPure:e,isStatic:e,nativeAttrs:s,operator:I,tag:"div",type:3}),t.push({context:R,html:k(b(O,O.length-1,"style").value),nativeAttrs:a,operator:I,tag:"style",type:3}),t.length?t:void 0}(),context:R,nativeAttrs:{class:"avplayer-ui-loading-mask","data-loading":b(O,O.length-1,"loading").value?1:0},operator:I,tag:"div",type:3})})},23077:t=>{var e,r,i,s,a;t.exports=(r=void 0,i=!0,s={class:"avplayer-ui-loading-message-list"},a={type:"text/css"},function(t,n,o,c,l,h,u,d,p,f,m,v,g,y,A,b,x,w,k,T,_,I,S,P,M,C,R,E,D,B,L,U,F,$,O,N,z,V){V.push({children:function(){var n=[];return n.push({children:function(){var s=[];return p(b(O,O.length-1,"message"),(function(r,a,n,o,c){s.push({context:R,key:(e=r[r.length-1],w(e.getScope(),e.keypath)).value,nativeAttrs:{class:"avplayer-ui-loading-message","data-last":A(r,r.length-1,"message.length",["message","length"],i).value-1===c?1:0},nativeStyles:t("bottom: "+k(30*(A(r,r.length-1,"message.length",["message","length"],i).value-1-c))+"px;"),operator:I,tag:"div",text:k((e=r[r.length-1],w(e.getScope(),e.keypath)).value),type:3})})),s.length?s:r}(),context:R,nativeAttrs:s,operator:I,tag:"div",type:3}),n.push({context:R,html:k(b(O,O.length-1,"style").value),nativeAttrs:a,operator:I,tag:"style",type:3}),n.length?n:r}(),context:R,nativeAttrs:{class:"avplayer-ui-loading-tip","data-show":b(O,O.length-1,"showMessage").value?1:0},operator:I,tag:"div",type:3})})},65051:t=>{var e,r;t.exports=(e={type:"text/css"},r={class:"avplayer-ui-pcm-visualization"},function(t,i,s,a,n,o,c,l,h,u,d,p,f,m,v,g,y,A,b,x,w,k,T,_,I,S,P,M,C,R,E,D,B,L,U,F,$,O){O.push({children:function(){var t=[];return t.push({context:P,operator:k,ref:"canvas",tag:"canvas",type:3}),t.push({context:P,html:b(g(U,U.length-1,"style").value),nativeAttrs:e,operator:k,tag:"style",type:3}),t.length?t:void 0}(),context:P,nativeAttrs:r,operator:k,tag:"div",type:3})})},90577:t=>{var e,r,i,s,a,n,o,c,l,h,u,d,p,f,m;t.exports=(r=void 0,i=!0,s={class:"avplayer-ui-progress-hover"},a={class:"avplayer-ui-progress-loaded"},n={class:"avplayer-ui-progress-played"},o={class:"avplayer-ui-progress-chapter-item"},c={class:"avplayer-ui-progress-chapter"},l={class:"avplayer-ui-icon-indicator"},h={class:"avplayer-ui-progress-indicator"},u={class:"avplayer-ui-progress-tip"},d={class:"avplayer-ui-progress-inner"},p={class:"libmedia-ui-progress-thumb"},f={type:"text/css"},m={class:"avplayer-ui-progress"},function(t,v,g,y,A,b,x,w,k,T,_,I,S,P,M,C,R,E,D,B,L,U,F,$,O,N,z,V,G,W,j,H,q,Y,K,Q,X,J){J.push({children:function(){var m=[];return m.push({children:function(){var d=[];return d.push({context:z,nativeAttrs:s,nativeStyles:t("width: "+D(C(K,K.length-1,"hoverWidth").value)+"%;"),operator:U,tag:"div",type:3}),d.push({context:z,nativeAttrs:a,nativeStyles:t("width: "+D(C(K,K.length-1,"loadedWidth").value)+"%;"),operator:U,tag:"div",type:3}),d.push({context:z,nativeAttrs:n,nativeStyles:t("width: "+D(C(K,K.length-1,"playedWidth").value)+"%;"),operator:U,tag:"div",type:3}),d.push({children:function(){var i=[];return k(C(K,K.length-1,"chapters"),(function(r,s,a,n){i.push({context:z,events:{click:A("click","chapterClick(this)","click","","chapterClick",{execute:function(t,i){return[(e=r[r.length-1],E(e.getScope(),e.keypath)).value]}}),mouseenter:A("mouseenter","chapterEnter(this)","mouseenter","","chapterEnter",{execute:function(t,i){return[(e=r[r.length-1],E(e.getScope(),e.keypath)).value]}}),mouseleave:A("mouseleave","chapterLeave(this)","mouseleave","","chapterLeave",{execute:function(t,i){return[(e=r[r.length-1],E(e.getScope(),e.keypath)).value]}})},key:E(s.text,r[r.length-1].getKeypath("text")).value,nativeAttrs:o,nativeStyles:t("left: "+D(C(r,r.length-1,"left").value)+"%;"),operator:U,tag:"span",type:3})})),i.length?i:r}(),context:z,nativeAttrs:c,operator:U,tag:"div",type:3}),C(K,K.length-1,"indicatorUrl").value?d.push({children:function(){var t=[];return t.push({children:function(){var t=[];return t.push({context:z,nativeAttrs:{draggable:"false",height:C(K,K.length-1,"indicatorSize").value,src:C(K,K.length-1,"indicatorUrl").value,width:C(K,K.length-1,"indicatorSize").value},operator:U,tag:"img",type:3}),t.length?t:r}(),context:z,nativeAttrs:l,operator:U,tag:"i",type:3}),t.length?t:r}(),context:z,events:{mousedown:A("mousedown","indicatorDown()","mousedown","","indicatorDown")},nativeAttrs:h,nativeStyles:t("left: "+D(C(K,K.length-1,"playedWidth").value)+"%;"),operator:U,tag:"div",type:3}):d.push({isPure:i,operator:L,text:"",type:2}),d.push({context:z,nativeAttrs:u,nativeStyles:t("left: "+D(C(K,K.length-1,"hoverWidth").value)+"%; display: "+D(C(K,K.length-1,"showTip").value?"block":"none")+";"),operator:U,tag:"div",text:D(C(K,K.length-1,"hoverChapter").value||E((e=C(K,K.length-1,"formatTime",G&&G.formatTime||W.formatTime).value,"function"==typeof e?e(C(K,K.length-1,"hoverTime").value):V.fatal("[formatTime(hoverTime)] is not a function."))).value),type:3}),d.length?d:r}(),context:z,events:{click:A("click","hoverClick()","click","","hoverClick"),mouseenter:A("mouseenter","hoverEnter()","mouseenter","","hoverEnter"),mouseleave:A("mouseleave","hoverLeave()","mouseleave","","hoverLeave"),mousemove:A("mousemove","hoverMove()","mousemove","","hoverMove")},nativeAttrs:d,operator:U,ref:"slider",tag:"div",type:3}),m.push({context:z,isPure:i,isStatic:i,nativeAttrs:p,operator:U,tag:"div",type:3}),m.push({context:z,html:D(C(K,K.length-1,"style").value),nativeAttrs:f,operator:U,tag:"style",type:3}),m.length?m:r}(),context:z,nativeAttrs:m,operator:U,tag:"div",type:3})})},42461:t=>{var e,r,i,s,a,n,o,c,l,h,u;t.exports=(e=void 0,r=!0,i={class:"avplayer-ui-settings-title"},s={d:"m8 6.939 3.182-3.182a.75.75 0 1 1 1.061 1.061L9.061 8l3.182 3.182a.75.75 0 1 1-1.061 1.061L8 9.061l-3.182 3.182a.75.75 0 1 1-1.061-1.061L6.939 8 3.757 4.818a.75.75 0 1 1 1.061-1.061L8 6.939z"},a={"data-pointer":"none",space:"preserve",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},n={class:"avplayer-ui-settings-close"},o={class:"avplayer-ui-settings-tabs"},c={class:"avplayer-ui-settings-context"},l={class:"avplayer-ui-settings-panel"},h={type:"text/css"},u={class:"avplayer-ui-settings"},function(t,d,p,f,m,v,g,y,A,b,x,w,k,T,_,I,S,P,M,C,R,E,D,B,L,U,F,$,O,N,z,V,G,W,j,H,q,Y){Y.push({children:function(){var t=[];return t.push({context:F,nativeAttrs:i,operator:E,tag:"div",text:M(_(j,j.length-1,"language.SETTINGS_TITLE",["language","SETTINGS_TITLE"],r).value),type:3}),t.push({children:[{children:[{context:F,isPure:r,isStatic:r,isSvg:r,nativeAttrs:s,operator:E,tag:"path",type:3}],context:F,isPure:r,isStatic:r,isSvg:r,nativeAttrs:a,operator:E,tag:"svg",type:3}],context:F,events:{click:m("click","close()","click","","close")},nativeAttrs:n,operator:E,tag:"span",type:3}),t.push({children:function(){var t=[];return t.push({children:function(){var t=[];return A(I(j,j.length-1,"list"),(function(e,r,i,s){t.push({context:F,events:{click:m("click","set('tab', id)","click","","set",{execute:function(t,r){return["tab",I(e,e.length-1,"id").value]}})},nativeAttrs:{class:"avplayer-ui-settings-tab "+(I(e,e.length-1,"id").value===I(e,e.length-1,"tab").value?"active":"")},operator:E,tag:"div",text:M(I(e,e.length-1,"name").value),type:3})})),t.length?t:e}(),context:F,nativeAttrs:o,operator:E,tag:"div",type:3}),t.push({context:F,isPure:r,isStatic:r,nativeAttrs:c,operator:E,tag:"div",type:3}),t.length?t:e}(),context:F,nativeAttrs:l,operator:E,tag:"div",type:3}),t.push({context:F,html:M(I(j,j.length-1,"style").value),nativeAttrs:h,operator:E,tag:"style",type:3}),t.length?t:e}(),context:F,nativeAttrs:u,operator:E,tag:"div",type:3})})},82042:t=>{var e,r,i,s;t.exports=(e=void 0,r={class:"libmedia-ui-slider-inner"},i={class:"libmedia-ui-slider-outer"},s={class:"libmedia-ui-slider-thumb"},function(t,a,n,o,c,l,h,u,d,p,f,m,v,g,y,A,b,x,w,k,T,_,I,S,P,M,C,R,E,D,B,L,U,F,$,O,N,z){z.push({children:function(){var t=[];return t.push({children:function(){var t=[];return t.push({context:C,nativeAttrs:r,nativeStyles:a(A($,$.length-1,"offset").value),operator:_,tag:"div",type:3}),t.length?t:e}(),context:C,nativeAttrs:i,operator:_,ref:"slider",tag:"div",type:3}),t.push({context:C,events:{mousedown:c("mousedown","mousedown()","mousedown","","mousedown")},nativeAttrs:s,nativeStyles:a(A($,$.length-1,"offset").value),operator:_,tag:"div",type:3}),t.length?t:e}(),context:C,nativeAttrs:{class:"libmedia-ui-slider","data-direction":A($,$.length-1,"direction").value},operator:_,tag:"div",type:3})})},35308:t=>{t.exports="html{--libmedia-ui-theme:#23ade5;--libmedia-ui-font-color:#fff;--libmedia-ui-background-color:#000;--libmedia-ui-text-shadow-color:rgba(0,0,0,0.502);--libmedia-ui-transition-duration:.2s;--libmedia-ui-padding:10px;--libmedia-ui-border-radius:3px;--libmedia-ui-progress-height:6px;--libmedia-ui-progress-color:rgba(255,255,255,0.251);--libmedia-ui-hover-color:rgba(255,255,255,0.251);--libmedia-ui-loaded-color:rgba(255,255,255,0.251);--libmedia-ui-state-size:80px;--libmedia-ui-state-opacity:.8;--libmedia-ui-header-height:40px;--libmedia-ui-bottom-height:100px;--libmedia-ui-bottom-offset:51px;--libmedia-ui-bottom-gap:5px;--libmedia-ui-chapter-width:8px;--libmedia-ui-chapter-color:rgba(255,255,255,0.502);--libmedia-ui-control-height:46px;--libmedia-ui-control-opacity:.75;--libmedia-ui-control-icon-size:28px;--libmedia-ui-control-icon-scale:1.1;--libmedia-ui-volume-height:120px;--libmedia-ui-slider-thumb-size:14px;--libmedia-ui-slider-thickness:2px;--libmedia-ui-lock-size:36px;--libmedia-ui-indicator-scale:0;--libmedia-ui-indicator-size:16px;--libmedia-ui-fullscreen-web-index:9999;--libmedia-ui-settings-icon-size:24px;--libmedia-ui-settings-max-height:300px;--libmedia-ui-selector-max-height:300px;--libmedia-ui-contextmenus-min-width:250px;--libmedia-ui-subtitle-font-size:20px;--libmedia-ui-subtitle-gap:5px;--libmedia-ui-subtitle-bottom:15px;--libmedia-ui-subtitle-border:#000;--libmedia-ui-widget-background:rgba(0,0,0,0.851);--libmedia-ui-widget-hover-background:rgba(255,255,255,0.102);--libmedia-ui-tip-background:rgba(0,0,0,0.702);--libmedia-ui-tip-font-color:#fff;--libmedia-ui-scrollbar-size:4px;--libmedia-ui-scrollbar-background:rgba(255,255,255,0.251);--libmedia-ui-scrollbar-background-hover:rgba(255,255,255,0.502);--libmedia-ui-mini-progress-height:2px;--libmedia-ui-folder-width:300px}[class*=\"hint--\"]{font-style:normal;position:relative}[class*=\"hint--\"]:before,[class*=\"hint--\"]:after{visibility:hidden;opacity:0;z-index:1000000;pointer-events:none;transition:all .3s;position:absolute;transform:translate3d(0,0,0)}[class*=\"hint--\"]:hover:before,[class*=\"hint--\"]:hover:after{visibility:visible;opacity:1;transition-delay:.1s}[class*=\"hint--\"]:before{content:\"\";z-index:1000001;background:none;border:6px solid rgba(0,0,0,0);position:absolute}[class*=\"hint--\"]:after{color:var(--libmedia-ui-tip-font-color);white-space:nowrap;background:var(--libmedia-ui-tip-background);padding:8px 10px;font-size:12px;line-height:12px}[class*=\"hint--\"][data-hint]:after{content:attr(data-hint)}[data-hint=\"\"]:before,[data-hint=\"\"]:after{display:none !important}.hint--top-left:before,.hint--top-right:before,.hint--top:before{border-top-color:var(--libmedia-ui-tip-background)}.hint--bottom-left:before,.hint--bottom-right:before,.hint--bottom:before{border-bottom-color:var(--libmedia-ui-tip-background)}.hint--left:before{border-left-color:var(--libmedia-ui-tip-background)}.hint--right:before{border-right-color:var(--libmedia-ui-tip-background)}.hint--top:before{margin-bottom:-11px}.hint--top:before,.hint--top:after{bottom:100%;left:50%}.hint--top:before{left:calc(50% - 6px)}.hint--top:after{transform:translateX(-50%)}.hint--top:hover:before{transform:translateY(-8px)}.hint--top:hover:after{transform:translateX(-50%) translateY(-8px)}.hint--bottom:before{margin-top:-11px}.hint--bottom:before,.hint--bottom:after{top:100%;left:50%}.hint--bottom:before{left:calc(50% - 6px)}.hint--bottom:after{transform:translateX(-50%)}.hint--bottom:hover:before{transform:translateY(8px)}.hint--bottom:hover:after{transform:translateX(-50%) translateY(8px)}.hint--right:before{margin-bottom:-6px;margin-left:-11px}.hint--right:after{margin-bottom:-14px}.hint--right:before,.hint--right:after{bottom:50%;left:100%}.hint--right:hover:before,.hint--right:hover:after{transform:translateX(8px)}.hint--left:before{margin-bottom:-6px;margin-right:-11px}.hint--left:after{margin-bottom:-14px}.hint--left:before,.hint--left:after{bottom:50%;right:100%}.hint--left:hover:before,.hint--left:hover:after{transform:translateX(-8px)}.hint--top-left:before{margin-bottom:-11px}.hint--top-left:before,.hint--top-left:after{bottom:100%;left:50%}.hint--top-left:before{left:calc(50% - 6px)}.hint--top-left:after{margin-left:12px;transform:translateX(-100%)}.hint--top-left:hover:before{transform:translateY(-8px)}.hint--top-left:hover:after{transform:translateX(-100%) translateY(-8px)}.hint--top-right:before{margin-bottom:-11px}.hint--top-right:before,.hint--top-right:after{bottom:100%;left:50%}.hint--top-right:before{left:calc(50% - 6px)}.hint--top-right:after{margin-left:-12px;transform:translateX(0)}.hint--top-right:hover:before,.hint--top-right:hover:after{transform:translateY(-8px)}.hint--bottom-left:before{margin-top:-11px}.hint--bottom-left:before,.hint--bottom-left:after{top:100%;left:50%}.hint--bottom-left:before{left:calc(50% - 6px)}.hint--bottom-left:after{margin-left:12px;transform:translateX(-100%)}.hint--bottom-left:hover:before{transform:translateY(8px)}.hint--bottom-left:hover:after{transform:translateX(-100%) translateY(8px)}.hint--bottom-right:before{margin-top:-11px}.hint--bottom-right:before,.hint--bottom-right:after{top:100%;left:50%}.hint--bottom-right:before{left:calc(50% - 6px)}.hint--bottom-right:after{margin-left:-12px;transform:translateX(0)}.hint--bottom-right:hover:before,.hint--bottom-right:hover:after{transform:translateY(8px)}.hint--small:after,.hint--medium:after,.hint--large:after{white-space:normal;word-wrap:break-word;line-height:1.4em}.hint--small:after{width:80px}.hint--medium:after{width:150px}.hint--large:after{width:300px}[class*=\"hint--\"]:after{text-shadow:0 -1px #000;box-shadow:4px 4px 8px rgba(0,0,0,0.302)}.hint--error:after{text-shadow:0 -1px #592726;background-color:#b34e4d}.hint--error.hint--top-left:before,.hint--error.hint--top-right:before,.hint--error.hint--top:before{border-top-color:#b34e4d}.hint--error.hint--bottom-left:before,.hint--error.hint--bottom-right:before,.hint--error.hint--bottom:before{border-bottom-color:#b34e4d}.hint--error.hint--left:before{border-left-color:#b34e4d}.hint--error.hint--right:before{border-right-color:#b34e4d}.hint--warning:after{text-shadow:0 -1px #6c5328;background-color:#c09854}.hint--warning.hint--top-left:before,.hint--warning.hint--top-right:before,.hint--warning.hint--top:before{border-top-color:#c09854}.hint--warning.hint--bottom-left:before,.hint--warning.hint--bottom-right:before,.hint--warning.hint--bottom:before{border-bottom-color:#c09854}.hint--warning.hint--left:before{border-left-color:#c09854}.hint--warning.hint--right:before{border-right-color:#c09854}.hint--info:after{text-shadow:0 -1px #1a3c4d;background-color:#3986ac}.hint--info.hint--top-left:before,.hint--info.hint--top-right:before,.hint--info.hint--top:before{border-top-color:#3986ac}.hint--info.hint--bottom-left:before,.hint--info.hint--bottom-right:before,.hint--info.hint--bottom:before{border-bottom-color:#3986ac}.hint--info.hint--left:before{border-left-color:#3986ac}.hint--info.hint--right:before{border-right-color:#3986ac}.hint--success:after{text-shadow:0 -1px #1a321a;background-color:#458746}.hint--success.hint--top-left:before,.hint--success.hint--top-right:before,.hint--success.hint--top:before{border-top-color:#458746}.hint--success.hint--bottom-left:before,.hint--success.hint--bottom-right:before,.hint--success.hint--bottom:before{border-bottom-color:#458746}.hint--success.hint--left:before{border-left-color:#458746}.hint--success.hint--right:before{border-right-color:#458746}.hint--always:after,.hint--always:before{opacity:1;visibility:visible}.hint--always.hint--top:before{transform:translateY(-8px)}.hint--always.hint--top:after{transform:translateX(-50%) translateY(-8px)}.hint--always.hint--top-left:before{transform:translateY(-8px)}.hint--always.hint--top-left:after{transform:translateX(-100%) translateY(-8px)}.hint--always.hint--top-right:before,.hint--always.hint--top-right:after{transform:translateY(-8px)}.hint--always.hint--bottom:before{transform:translateY(8px)}.hint--always.hint--bottom:after{transform:translateX(-50%) translateY(8px)}.hint--always.hint--bottom-left:before{transform:translateY(8px)}.hint--always.hint--bottom-left:after{transform:translateX(-100%) translateY(8px)}.hint--always.hint--bottom-right:before,.hint--always.hint--bottom-right:after{transform:translateY(8px)}.hint--always.hint--left:before,.hint--always.hint--left:after{transform:translateX(-8px)}.hint--always.hint--right:before,.hint--always.hint--right:after{transform:translateX(8px)}.hint--rounded:after{border-radius:4px}.hint--no-animate:before,.hint--no-animate:after{transition-duration:0s}.hint--bounce:before,.hint--bounce:after{transition:opacity .3s,visibility .3s,transform .3s cubic-bezier(.71,1.7,.77,1.24)}.hint--no-shadow:before,.hint--no-shadow:after{text-shadow:initial;box-shadow:initial}.hint--no-arrow:before{display:none}.libmedia-ui-selector{text-align:center;border-radius:var(--libmedia-ui-border-radius);opacity:0;pointer-events:none;bottom:var(--libmedia-ui-control-height);max-height:var(--libmedia-ui-selector-max-height);background-color:var(--libmedia-ui-widget-background);transition:all var(--libmedia-ui-transition-duration) ease;flex-direction:column;align-items:center;display:flex;position:absolute;overflow:hidden auto}.libmedia-ui-selector .libmedia-ui-selector-item{flex-shrink:0;justify-content:center;align-items:center;width:100%;padding:10px 15px;line-height:1;display:flex;cursor:pointer}.libmedia-ui-selector .libmedia-ui-selector-item.active{color:var(--libmedia-ui-theme)}.libmedia-ui-selector .libmedia-ui-selector-item:hover{background-color:var(--libmedia-ui-widget-hover-background)}.libmedia-ui-slider{cursor:pointer;width:100%;height:100%;position:relative;justify-content:center;display:flex}.libmedia-ui-slider .libmedia-ui-slider-outer{border-radius:var(--libmedia-ui-border-radius);background-color:rgba(255,255,255,0.251);justify-content:center;display:flex;position:relative;overflow:hidden}.libmedia-ui-slider .libmedia-ui-slider-outer .libmedia-ui-slider-inner{background-color:var(--libmedia-ui-theme);width:100%;height:100%;position:absolute}.libmedia-ui-slider .libmedia-ui-slider-thumb{width:var(--libmedia-ui-slider-thumb-size);height:var(--libmedia-ui-slider-thumb-size);background-color:var(--libmedia-ui-theme);transition:transform var(--libmedia-ui-transition-duration) ease;border-radius:100%;flex-shrink:0;position:absolute;transform:scale(1)}.libmedia-ui-slider[data-direction='vertical'] .libmedia-ui-slider-outer{width:var(--libmedia-ui-slider-thickness);height:100%}.libmedia-ui-slider[data-direction='vertical'] .libmedia-ui-slider-thumb{margin-top:calc(var(--libmedia-ui-slider-thumb-size) / -2)}.libmedia-ui-slider[data-direction='horizontal'] .libmedia-ui-slider-outer{width:100%;height:var(--libmedia-ui-slider-thickness)}.libmedia-ui-slider[data-direction='horizontal'] .libmedia-ui-slider-thumb{margin-right:calc(var(--libmedia-ui-slider-thumb-size) / -2)}.avplayer-ui-container{width:100%;height:100%;user-select:none;color:var(--libmedia-ui-font-color);background-color:var(--libmedia-ui-background-color);text-shadow:0 0 2px var(--libmedia-ui-text-shadow-color)}.avplayer-ui-container *{box-sizing:border-box;outline:none}.avplayer-ui-container svg{fill:var(--libmedia-ui-font-color)}.avplayer-ui-container .avplayer-ui-header{width:100%;height:var(--libmedia-ui-header-height);position:absolute;top:0;text-align:center;padding:0 var(--libmedia-ui-padding);transition:all var(--libmedia-ui-transition-duration) ease;background-size:100% var(--libmedia-ui-header-height);background-image:linear-gradient(to bottom,#000,rgba(0,0,0,0.4),rgba(0,0,0,0))}.avplayer-ui-container .avplayer-ui-header .avplayer-ui-title{line-height:var(--libmedia-ui-header-height);font-size:16px;max-width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.avplayer-ui-container .avplayer-ui-header a{position:absolute;right:calc((var(--libmedia-ui-header-height) - 16px) / 2);top:calc((var(--libmedia-ui-header-height) - 16px) / 2);height:16px}.avplayer-ui-container .avplayer-ui-header a svg{height:16px;width:16px}.avplayer-ui-container .avplayer-ui-player{width:100%;height:100%;position:absolute;top:0;left:0;overflow:hidden;cursor:pointer}.avplayer-ui-container .avplayer-ui-player canvas,.avplayer-ui-container .avplayer-ui-player video{background-color:#000}.avplayer-ui-container .avplayer-ui-footer{padding:0 var(--libmedia-ui-padding);transition:all var(--libmedia-ui-transition-duration) ease;background-size:100% var(--libmedia-ui-bottom-height);background-image:linear-gradient(to top,#000,rgba(0,0,0,0.4),rgba(0,0,0,0));flex-direction:column;justify-content:flex-end;width:100%;height:var(--libmedia-ui-bottom-height);display:flex;position:absolute;bottom:0}.avplayer-ui-container .avplayer-ui-footer .avplayer-ui-progress-container{pointer-events:auto;padding-bottom:var(--libmedia-ui-bottom-gap);position:relative;transition:transform var(--libmedia-ui-transition-duration) ease}.avplayer-ui-container .avplayer-ui-footer .avplayer-ui-control{height:var(--libmedia-ui-control-height);justify-content:space-between;align-items:center;display:flex;position:relative;transition:transform var(--libmedia-ui-transition-duration) ease}.avplayer-ui-container .avplayer-ui-footer .avplayer-ui-control .avplayer-ui-control-item{cursor:pointer;white-space:nowrap;opacity:var(--libmedia-ui-control-opacity);min-height:var(--libmedia-ui-control-height);min-width:var(--libmedia-ui-control-height);transition:opacity var(--libmedia-ui-transition-duration) ease;flex-shrink:0;justify-content:center;align-items:center;display:flex;position:relative}.avplayer-ui-container .avplayer-ui-footer .avplayer-ui-control .avplayer-ui-control-item svg{height:var(--libmedia-ui-control-icon-size);width:var(--libmedia-ui-control-icon-size);transform:scale(var(--libmedia-ui-control-icon-scale));transition:transform var(--libmedia-ui-transition-duration) ease}.avplayer-ui-container .avplayer-ui-footer .avplayer-ui-control .avplayer-ui-control-item:hover{cursor:pointer;opacity:1}.avplayer-ui-container .avplayer-ui-footer .avplayer-ui-control .avplayer-ui-footer-left{height:100%;display:flex}.avplayer-ui-container .avplayer-ui-footer .avplayer-ui-control .avplayer-ui-footer-right{height:100%;display:flex;justify-content:flex-end}.avplayer-ui-container .avplayer-ui-footer:hover .avplayer-ui-progress .avplayer-ui-progress-inner .avplayer-ui-progress-indicator{transform:scale(1)}.avplayer-ui-container .avplayer-ui-folder-container{position:absolute;top:0;left:0;transition:all var(--libmedia-ui-transition-duration) ease;width:var(--libmedia-ui-folder-width);bottom:calc(var(--libmedia-ui-progress-height) + var(--libmedia-ui-bottom-gap) + var(--libmedia-ui-control-height));box-shadow:2px 0 8px rgba(0,0,0,0.6);background-color:var(--libmedia-ui-widget-background);border-top-right-radius:8px;border-bottom-right-radius:8px}.avplayer-ui-container .avplayer-ui-folder-container .avplayer-ui-folder-toggle{width:24px;height:60px;justify-content:center;align-items:center;display:flex;cursor:pointer;border-top-right-radius:8px;border-bottom-right-radius:8px;box-shadow:2px 0 8px rgba(0,0,0,0.6);transition:all var(--libmedia-ui-transition-duration) ease;position:absolute;right:-24px;top:50%;transform:translateY(-50%);opacity:1}.avplayer-ui-container .avplayer-ui-folder-container .avplayer-ui-folder-toggle svg{width:24px;height:24px;opacity:var(--libmedia-ui-control-opacity);transform:rotate(180deg)}.avplayer-ui-container .avplayer-ui-folder-container .avplayer-ui-folder-toggle:hover svg{opacity:1}.avplayer-ui-container .avplayer-ui-folder-container[data-fold='1']{transform:translateX(calc(var(--libmedia-ui-folder-width) * -1))}.avplayer-ui-container .avplayer-ui-folder-container[data-fold='1'] .avplayer-ui-folder-toggle svg{transform:rotate(0)}.avplayer-ui-container .avplayer-ui-mask{pointer-events:none;justify-content:center;align-items:center;width:100%;height:100%;display:flex;position:absolute}.avplayer-ui-container .avplayer-ui-mask .avplayer-ui-state{opacity:0;width:var(--libmedia-ui-state-size);height:var(--libmedia-ui-state-size);transition:all var(--libmedia-ui-transition-duration) ease;justify-content:center;align-items:center;display:flex;transform:scale(2)}.avplayer-ui-container .avplayer-ui-mask .avplayer-ui-state img{vertical-align:top;max-width:100%}.avplayer-ui-container .avplayer-ui-mask .avplayer-ui-state[data-show='1']{cursor:pointer;pointer-events:auto;opacity:var(--libmedia-ui-state-opacity);transform:scale(1)}.avplayer-ui-container .avplayer-ui-mask.info{height:calc(100% - var(--libmedia-ui-bottom-height))}.avplayer-ui-container .avplayer-ui-mask.showSettings{height:calc(100% - var(--libmedia-ui-bottom-height))}.avplayer-ui-container .avplayer-ui-pcm-visualization-mask{pointer-events:none;justify-content:center;align-items:center;width:100%;height:100%;display:flex;position:absolute;transition:all var(--libmedia-ui-transition-duration) ease}.avplayer-ui-container .avplayer-ui-menu{position:fixed;border-radius:var(--libmedia-ui-border-radius);background-color:var(--libmedia-ui-widget-background);transition:all var(--libmedia-ui-transition-duration) ease}.avplayer-ui-container .avplayer-ui-menu .avplayer-ui-menu-item{padding:10px 60px;font-size:14px;cursor:pointer}.avplayer-ui-container .avplayer-ui-menu .avplayer-ui-menu-item:hover{background-color:var(--libmedia-ui-widget-hover-background)}.avplayer-ui-container[data-bar-show='0']{cursor:none}.avplayer-ui-container[data-bar-show='0'] .avplayer-ui-player{cursor:none}.avplayer-ui-container[data-bar-show='0'] .avplayer-ui-header{transform:translateY(calc(var(--libmedia-ui-header-height) * -1))}.avplayer-ui-container[data-bar-show='0'] .avplayer-ui-footer{transform:translateY(var(--libmedia-ui-bottom-height))}.avplayer-ui-container[data-bar-show='0'] .avplayer-ui-footer .avplayer-ui-progress-container{transform:translateY(calc((var(--libmedia-ui-bottom-height) - var(--libmedia-ui-bottom-gap) - var(--libmedia-ui-progress-height) * 0.5 - var(--libmedia-ui-control-height)) * -1))}.avplayer-ui-container[data-bar-show='0'] .avplayer-ui-folder-container{opacity:0;transform:translateX(calc(var(--libmedia-ui-folder-width) * -1))}.avplayer-ui-container[data-bar-show='0'] .avplayer-ui-folder-container .avplayer-ui-folder-toggle{pointer-events:none}.avplayer-ui-container[data-bar-show='0'] .avplayer-ui-pcm-visualization-mask{background-color:rgba(0,0,0,0.5)}@keyframes icon_scale{0%{transform:scale(1);transform-origin:center center}50%{transform:scale(1.2);transform-origin:center center}100%{transform:scale(1);transform-origin:center center}}@keyframes icon_rotate{0%{transform:rotate(0);transform-origin:center center}100%{transform:rotate(120deg);transform-origin:center center}}"},41192:t=>{t.exports=".avplayer-ui-control-audio-track{width:100%;height:100%;display:flex;align-items:center;justify-content:center}.avplayer-ui-control-audio-track:hover .libmedia-ui-selector{opacity:1;pointer-events:auto}"},56872:t=>{t.exports=".avplayer-ui-control-fullscreen{width:100%;height:100%;display:flex;align-items:center;justify-content:center}.avplayer-ui-control-fullscreen:hover svg{animation:icon_scale .4s ease both}"},68738:t=>{t.exports=".avplayer-ui-control-loop{width:100%;height:100%;display:flex;align-items:center;justify-content:center}.avplayer-ui-control-loop:hover svg{animation:icon_scale .4s ease both}"},38712:t=>{t.exports=".avplayer-ui-control-pip{width:100%;height:100%;display:flex;align-items:center;justify-content:center}.avplayer-ui-control-pip:hover svg{animation:icon_scale .4s ease both}"},90902:t=>{t.exports=".avplayer-ui-control-play{width:100%;height:100%;display:flex;align-items:center;justify-content:center}.avplayer-ui-control-play:hover svg{animation:icon_scale .4s ease both}"},33814:t=>{t.exports=".avplayer-ui-control-play-rate{width:100%;height:100%;display:flex;align-items:center;justify-content:center}.avplayer-ui-control-play-rate:hover .libmedia-ui-selector{opacity:1;pointer-events:auto}"},97176:t=>{t.exports=".avplayer-ui-control-settings{width:100%;height:100%;display:flex;align-items:center;justify-content:center}.avplayer-ui-control-settings:hover svg{animation:icon_rotate .4s ease both}"},66328:t=>{t.exports=".avplayer-ui-control-subtitle-track{width:100%;height:100%;display:flex;align-items:center;justify-content:center}.avplayer-ui-control-subtitle-track:hover .libmedia-ui-selector{opacity:1;pointer-events:auto}"},52068:t=>{t.exports=".avplayer-ui-control-timer{display:flex;align-items:center;justify-content:center;cursor:pointer;padding:0 10px;opacity:var(--libmedia-ui-control-opacity)}.avplayer-ui-control-timer .avplayer-ui-time-label{min-width:66px}.avplayer-ui-control-timer .avplayer-ui-time-div{transform:translateX(-1px)}.avplayer-ui-control-timer:hover{opacity:1}"},15478:t=>{t.exports=".avplayer-ui-control-video-track{width:100%;height:100%;display:flex;align-items:center;justify-content:center}.avplayer-ui-control-video-track:hover .libmedia-ui-selector{opacity:1;pointer-events:auto}"},92066:t=>{t.exports=".avplayer-ui-control-volume{width:100%;height:100%;display:flex;align-items:center;justify-content:center}.avplayer-ui-control-volume:hover svg{animation:icon_scale .4s ease both}.avplayer-ui-control-volume:hover .avplayer-ui-volume-panel{opacity:1;pointer-events:auto}.avplayer-ui-control-volume .avplayer-ui-volume-icon{justify-content:center;align-items:center;display:flex}.avplayer-ui-control-volume .avplayer-ui-volume-panel{text-align:center;opacity:0;pointer-events:none;left:0;right:0;bottom:var(--libmedia-ui-control-height);width:var(--libmedia-ui-control-height);height:var(--libmedia-ui-volume-height);transition:all ease;transition:all var(--libmedia-ui-transition-duration) ease 0s;justify-content:center;align-items:center;padding:0 5px;font-size:12px;display:flex;position:absolute;z-index:1}.avplayer-ui-control-volume .avplayer-ui-volume-panel .avplayer-ui-volume-inner{border-radius:var(--libmedia-ui-border-radius);background-color:var(--libmedia-ui-widget-background);flex-direction:column;align-items:center;gap:10px;width:100%;height:100%;padding:10px 0 12px;display:flex}.avplayer-ui-control-volume .avplayer-ui-volume-panel .avplayer-ui-volume-inner .libmedia-ui-slider{flex:1}"},74320:t=>{t.exports=".avplayer-ui-folder{width:100%;height:100%;padding:var(--libmedia-ui-padding) 0;transition:all var(--libmedia-ui-transition-duration) ease}.avplayer-ui-folder ul{margin:0;padding:0;list-style:none}.avplayer-ui-folder svg{width:24px;height:24px}.avplayer-ui-folder .avplayer-ui-folder-open{display:flex;justify-content:center;align-items:center;height:30px;margin-bottom:10px;width:var(--libmedia-ui-folder-width);padding-right:var(--libmedia-ui-padding)}.avplayer-ui-folder .avplayer-ui-folder-open .avplayer-ui-folder-open-dir{transform:scale(.9)}.avplayer-ui-folder .avplayer-ui-folder-open .avplayer-ui-folder-open-dir .avplayer-ui-folder-open-name{margin-left:3px}.avplayer-ui-folder .avplayer-ui-folder-open .avplayer-ui-folder-open-file{transform:scale(.9)}.avplayer-ui-folder .avplayer-ui-folder-open .avplayer-ui-folder-open-file svg{stroke:var(--libmedia-ui-font-color);fill:none}.avplayer-ui-folder .avplayer-ui-folder-open .item{cursor:pointer;display:flex;justify-content:center;align-items:center;opacity:var(--libmedia-ui-control-opacity);transition:opacity var(--libmedia-ui-transition-duration) ease}.avplayer-ui-folder .avplayer-ui-folder-open .item:hover{opacity:1}.avplayer-ui-folder .avplayer-ui-folder-open .avplayer-ui-folder-open-name{display:inline-block;font-size:12px}.avplayer-ui-folder .avplayer-ui-folder-open .item + .item{margin-left:20px}.avplayer-ui-folder .avplayer-ui-url-open{display:flex;justify-content:center;align-items:center;margin-bottom:10px;height:30px;width:var(--libmedia-ui-folder-width);padding:0 var(--libmedia-ui-padding);opacity:var(--libmedia-ui-control-opacity);transition:opacity var(--libmedia-ui-transition-duration) ease}.avplayer-ui-folder .avplayer-ui-url-open .avplayer-ui-url-open-input{flex:1;font-size:12px;border:1px;border-radius:4px;color:var(--libmedia-ui-font-color);outline:none;border:1px solid var(--libmedia-ui-font-color);background:none;height:28px;line-height:28px;margin-left:14px;padding-left:10px}.avplayer-ui-folder .avplayer-ui-url-open .avplayer-ui-url-open-input::placeholder{color:var(--libmedia-ui-font-color)}.avplayer-ui-folder .avplayer-ui-url-open .avplayer-ui-folder-icon{width:30px;transform:scale(.9)}.avplayer-ui-folder .avplayer-ui-url-open .avplayer-ui-folder-icon svg{stroke:var(--libmedia-ui-font-color)}.avplayer-ui-folder .avplayer-ui-url-open .avplayer-ui-folder-icon:hover{cursor:pointer}.avplayer-ui-folder .avplayer-ui-url-open .avplayer-ui-folder-icon:hover svg{animation:icon_scale .4s ease both}.avplayer-ui-folder .avplayer-ui-url-open .avplayer-ui-url-open-live{display:flex;justify-content:center;align-items:center;font-size:12px}.avplayer-ui-folder .avplayer-ui-url-open:hover{opacity:1}.avplayer-ui-folder .avplayer-ui-folder-list-container{position:absolute;top:90px;bottom:0;left:0;right:0;overflow:auto}.avplayer-ui-folder .avplayer-ui-folder-list-container::-webkit-scrollbar{display:none}.avplayer-ui-folder .avplayer-ui-folder-node{display:flex;flex-direction:row;justify-content:flex-start;align-items:center;height:30px;width:var(--libmedia-ui-folder-width);padding-right:var(--libmedia-ui-padding);opacity:var(--libmedia-ui-control-opacity);transition:opacity var(--libmedia-ui-transition-duration) ease}.avplayer-ui-folder .avplayer-ui-folder-node.active{background-color:var(--libmedia-ui-theme) !important}.avplayer-ui-folder .avplayer-ui-folder-node:hover{background-color:var(--libmedia-ui-widget-hover-background);opacity:1}.avplayer-ui-folder .avplayer-ui-folder-expand{cursor:pointer;font-size:0;display:flex;justify-content:center;align-items:center;transition:transform linear .1s;width:24px;height:100%}.avplayer-ui-folder .avplayer-ui-folder-expand svg{transform:rotate(0)}.avplayer-ui-folder .avplayer-ui-folder-expand[data-open='1'] svg{transform:rotate(90deg)}.avplayer-ui-folder .avplayer-ui-folder-icon{display:flex;justify-content:center;align-items:center;width:24px;height:100%}.avplayer-ui-folder .avplayer-ui-folder-icon.mov{margin-left:24px;transform:scale(.9)}.avplayer-ui-folder .avplayer-ui-folder-icon.music{margin-left:24px}.avplayer-ui-folder .avplayer-ui-folder-icon.url{margin-left:24px}.avplayer-ui-folder .avplayer-ui-folder-icon.play,.avplayer-ui-folder .avplayer-ui-folder-icon.delete{cursor:pointer;transform:scale(.8)}.avplayer-ui-folder .avplayer-ui-folder-icon.play:hover svg,.avplayer-ui-folder .avplayer-ui-folder-icon.delete:hover svg{animation:icon_scale .4s ease both}.avplayer-ui-folder .avplayer-ui-folder-node-name{padding:0 5px;min-width:100px;flex-grow:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.avplayer-ui-folder .avplayer-ui-folder-tip{text-shadow:0 -1px var(--libmedia-ui-tip-background);box-shadow:4px 4px 8px var(--libmedia-ui-tip-background);color:var(--libmedia-ui-tip-font-color);white-space:nowrap;background:var(--libmedia-ui-tip-background);padding:8px 10px;font-size:12px;line-height:12px;opacity:0;pointer-events:none;transition:all var(--libmedia-ui-transition-duration) ease .1s,top 0s ease 0s;position:absolute;transform:translate3d(0,0,0);left:100%}.avplayer-ui-folder .avplayer-ui-folder-tip::before{content:\"\";border:5px solid rgba(0,0,0,0);position:absolute;border-right-color:var(--libmedia-ui-tip-background);left:-10px;transform:translateY(1px)}.avplayer-ui-folder .avplayer-ui-folder-tip[data-show='1']{transform:translateX(8px);opacity:1}"},51e3:t=>{t.exports=".avplayer-ui-info{pointer-events:auto;background:var(--libmedia-ui-tip-background);border-radius:4px;color:#fff;line-height:18px;padding-bottom:15px;text-align:center;text-align:left;-webkit-font-smoothing:antialiased;position:relative;max-height:80%;max-width:80%;user-select:text;display:flex;flex-direction:column}.avplayer-ui-info .avplayer-ui-info-title{border-bottom:1px solid rgba(255,255,255,0.1);font-size:16px;line-height:40px;text-align:center;height:41px}.avplayer-ui-info .avplayer-ui-info-close{fill:#fff;color:#fff;cursor:pointer;height:22px;position:absolute;right:10px;top:8px;width:22px}.avplayer-ui-info .avplayer-ui-info-panel{flex:1;padding:15px 26px 0;position:relative;overflow:auto;scrollbar-width:thin}.avplayer-ui-info .avplayer-ui-info-panel::-webkit-scrollbar{width:8px;height:8px}.avplayer-ui-info .avplayer-ui-info-panel .avplayer-ui-info-format{font-size:12px;font-weight:500}.avplayer-ui-info .avplayer-ui-info-panel .avplayer-ui-info-line{min-width:290px}.avplayer-ui-info .avplayer-ui-info-panel .avplayer-ui-info-line .avplayer-ui-info-line-title{font-size:12px;font-weight:500;margin-right:10px;text-align:right;text-indent:-99em;width:190px;display:inline-block}.avplayer-ui-info .avplayer-ui-info-panel .avplayer-ui-info-line .avplayer-ui-info-line-value{color:#999;font-size:12px;font-weight:400;margin-right:6px}"},17246:t=>{t.exports=".avplayer-ui-loading-mask{position:absolute;width:100%;height:100%;text-align:center;top:0;left:0;display:flex;align-items:center;justify-content:center;opacity:0;pointer-events:none;transition:all var(--libmedia-ui-transition-duration) ease}.avplayer-ui-loading-mask .avplayer-ui-loading-spinner{top:50%;margin-top:-21px;width:100%;text-align:center;position:absolute}.avplayer-ui-loading-mask .avplayer-ui-loading-spinner .avplayer-ui-circular{height:42px;width:42px;animation:loading-rotate 2s linear infinite}.avplayer-ui-loading-mask .avplayer-ui-loading-spinner .avplayer-ui-circular circle{animation:loading-dash 1.5s ease-in-out infinite;stroke-dasharray:90,150;stroke-dashoffset:0;stroke-width:2;stroke:var(--libmedia-ui-theme);stroke-linecap:round}.avplayer-ui-loading-mask[data-loading='1']{opacity:1;pointer-events:auto}@keyframes loading-rotate{to{transform:rotate(1turn)}}@keyframes loading-dash{0%{stroke-dasharray:1,200;stroke-dashoffset:0}50%{stroke-dasharray:90,150;stroke-dashoffset:-40px}to{stroke-dasharray:90,150;stroke-dashoffset:-120px}}"},85466:t=>{t.exports=".avplayer-ui-loading-tip{position:absolute;right:20px;bottom:calc(var(--libmedia-ui-bottom-height) + 10px);opacity:1;pointer-events:none;transition:all 1s ease}.avplayer-ui-loading-tip .avplayer-ui-loading-message{transition:bottom .1s ease,transform 1s ease;border-radius:var(--libmedia-ui-border-radius);white-space:nowrap;background-color:var(--libmedia-ui-tip-background);padding:3px 5px;font-size:12px;line-height:1;position:absolute;right:0}.avplayer-ui-loading-tip .avplayer-ui-loading-message[data-last='1']{animation:avplayer-ui-loading-message-last .1s ease}.avplayer-ui-loading-tip[data-show='0']{opacity:0}.avplayer-ui-loading-tip[data-show='0'] .avplayer-ui-loading-message{transform:translateY(-40px)}@keyframes avplayer-ui-loading-message-last{0%{opacity:0}100%{opacity:1}}"},5840:t=>{t.exports=".avplayer-ui-pcm-visualization{width:100%;height:100%}.avplayer-ui-pcm-visualization canvas{width:100%;height:100%}"},99726:t=>{t.exports=".avplayer-ui-progress{cursor:pointer;height:var(--libmedia-ui-progress-height);justify-content:center;align-items:center;display:flex;position:relative}.avplayer-ui-progress:hover .avplayer-ui-progress-inner{height:100%}.avplayer-ui-progress .avplayer-ui-progress-inner{transition:height var(--libmedia-ui-transition-duration) ease;background-color:var(--libmedia-ui-progress-color);align-items:center;width:100%;height:50%;display:flex;position:relative}.avplayer-ui-progress .avplayer-ui-progress-inner .avplayer-ui-progress-hover{background-color:var(--libmedia-ui-hover-color);width:0%;height:100%;position:absolute}.avplayer-ui-progress .avplayer-ui-progress-inner .avplayer-ui-progress-loaded{background-color:var(--libmedia-ui-loaded-color);width:0%;height:100%;position:absolute}.avplayer-ui-progress .avplayer-ui-progress-inner .avplayer-ui-progress-played{background-color:var(--libmedia-ui-theme);width:0%;height:100%;position:absolute}.avplayer-ui-progress .avplayer-ui-progress-inner .avplayer-ui-progress-chapter{pointer-events:none;width:100%;height:100%;position:absolute}.avplayer-ui-progress .avplayer-ui-progress-inner .avplayer-ui-progress-indicator{width:var(--libmedia-ui-indicator-size);height:var(--libmedia-ui-indicator-size);transform:scale(var(--libmedia-ui-indicator-scale));margin-left:calc(var(--libmedia-ui-indicator-size) / -2);transition:transform var(--libmedia-ui-transition-duration) ease;border-radius:50%;justify-content:center;align-items:center;display:flex;position:absolute;left:0}.avplayer-ui-progress .avplayer-ui-progress-inner .avplayer-ui-progress-indicator:hover{transform:scale(1.2) !important}.avplayer-ui-progress .avplayer-ui-progress-inner .avplayer-ui-progress-indicator .avplayer-ui-icon-indicator{width:100%;height:100%}.avplayer-ui-progress .avplayer-ui-progress-inner .avplayer-ui-progress-chapter{pointer-events:none;width:100%;height:100%;position:absolute;overflow:hidden}.avplayer-ui-progress .avplayer-ui-progress-inner .avplayer-ui-progress-chapter .avplayer-ui-progress-chapter-item{pointer-events:auto;transform:translateX(calc(var(--libmedia-ui-chapter-width) / -2));background-color:var(--libmedia-ui-chapter-color);width:var(--libmedia-ui-chapter-width);height:100%;position:absolute}.avplayer-ui-progress .avplayer-ui-progress-inner .avplayer-ui-progress-tip{border-radius:var(--libmedia-ui-border-radius);white-space:nowrap;background-color:var(--libmedia-ui-tip-background);transform:translateX(-50%);padding:3px 5px;font-size:12px;line-height:1;display:none;position:absolute;top:-25px;left:0}.avplayer-ui-progress .libmedia-ui-progress-thumb{bottom:calc(var(--libmedia-ui-bottom-gap) + 10px);border-radius:var(--libmedia-ui-border-radius);pointer-events:none;background-color:var(--libmedia-ui-widget-background);display:none;position:absolute;left:0;box-shadow:0 1px 3px rgba(0,0,0,0.2),0 1px 2px -1px rgba(0,0,0,0.2)}"},47410:t=>{t.exports=".avplayer-ui-settings{pointer-events:auto;background:var(--libmedia-ui-tip-background);border-radius:4px;color:#fff;position:relative;max-height:100%;max-width:80%;width:600px;height:500px;display:flex;flex-direction:column}.avplayer-ui-settings .avplayer-ui-settings-title{border-bottom:1px solid rgba(255,255,255,0.1);font-size:16px;line-height:40px;text-align:center;height:41px}.avplayer-ui-settings .avplayer-ui-settings-close{fill:#fff;color:#fff;cursor:pointer;height:22px;position:absolute;right:10px;top:8px;width:22px}.avplayer-ui-settings .avplayer-ui-settings-panel{flex:1;position:relative;display:flex;overflow:hidden}.avplayer-ui-settings .avplayer-ui-settings-panel .avplayer-ui-settings-tabs{width:141px;height:100%;padding:20px;overflow:auto;transition:all var(--libmedia-ui-transition-duration) ease;border-right:1px solid rgba(255,255,255,0.1)}.avplayer-ui-settings .avplayer-ui-settings-panel .avplayer-ui-settings-tabs .avplayer-ui-settings-tab{width:100px;height:36px;text-align:center;line-height:36px;cursor:pointer;border-radius:4px;font-size:14px;opacity:var(--libmedia-ui-control-opacity);background-color:var(--libmedia-ui-widget-hover-background)}.avplayer-ui-settings .avplayer-ui-settings-panel .avplayer-ui-settings-tabs .avplayer-ui-settings-tab:hover{opacity:1}.avplayer-ui-settings .avplayer-ui-settings-panel .avplayer-ui-settings-tabs .avplayer-ui-settings-tab.active{opacity:1;background-color:var(--libmedia-ui-theme)}.avplayer-ui-settings .avplayer-ui-settings-panel .avplayer-ui-settings-tabs .avplayer-ui-settings-tab + .avplayer-ui-settings-tab{margin-top:10px}.avplayer-ui-settings .avplayer-ui-settings-panel .avplayer-ui-settings-context{flex:1;height:100%;overflow:auto;padding:20px}"},92246:(t,e,r)=>{"use strict";r.d(e,{A:()=>o});var i=r(49859),s=r(16030),a=r(4624),n=r(9705);class o{constructor(t){(0,i.A)(this,"resampler",void 0),(0,i.A)(this,"options",void 0),(0,i.A)(this,"inputParameters",void 0),(0,i.A)(this,"outputParameters",void 0),this.options=t,this.resampler=new s.A(this.options.resource)}async open(t,e){this.inputParameters=t,this.outputParameters=e,await this.resampler.run(),this.resampler.invoke("resample_set_input_parameters",t.sampleRate,t.channels,t.format,t.layout||0),this.resampler.invoke("resample_set_output_parameters",e.sampleRate,e.channels,e.format,e.layout||0);let r=this.resampler.invoke("resample_init");return r<0?(a.z3(`open resampler failed, ret: ${r}`,"src/audioresample/Resampler.ts",85),n.nr):0}resample(t,e,r){return this.resampler.invoke("resample_process",t,e,r)}getOutputSampleCount(t){return this.resampler.invoke("resample_nb_sample",t)}close(){this.resampler.invoke("resample_destroy"),this.resampler.destroy()}getInputPCMParameters(){return this.inputParameters}getOutputPCMParameters(){return this.outputParameters}}},70089:(t,e,r)=>{"use strict";r.d(e,{A:()=>a});var i=r(49859),s=r(16030);class a{constructor(t){(0,i.A)(this,"processor",void 0),(0,i.A)(this,"options",void 0),this.options=t,this.processor=new s.A(this.options.resource)}async open(t){await this.processor.run(),this.processor.invoke("stretchpitch_init"),this.processor.invoke("stretchpitch_set_channels",t.channels),this.processor.invoke("stretchpitch_set_samplerate",t.sampleRate)}setRate(t){this.processor.invoke("stretchpitch_set_rate",t)}setRateChange(t){this.processor.invoke("stretchpitch_set_rate_change",t)}setTempo(t){this.processor.invoke("stretchpitch_set_tempo",t)}setTempoChange(t){this.processor.invoke("stretchpitch_set_tempo_change",t)}setPitch(t){this.processor.invoke("stretchpitch_set_pitch",t)}setPitchOctaves(t){this.processor.invoke("stretchpitch_set_pitch_octaves",t)}setPitchSemiTones(t){this.processor.invoke("stretchpitch_set_pitch_semi_tones",t)}sendSamples(t,e){this.processor.invoke("stretchpitch_send_samples",t,e)}receiveSamples(t,e){return this.processor.invoke("stretchpitch_receive_samples",t,e)}flush(){this.processor.invoke("stretchpitch_flush")}clear(){this.processor.invoke("stretchpitch_clear")}getUnprocessedSamplesCount(){return this.processor.invoke("stretchpitch_get_unprocessed_samples_num")}getInputOutputSamplesRatio(){return this.processor.invoke("stretchpitch_get_input_output_sample_ratio")}getLatency(){return this.processor.invoke("get_latency")}close(){this.processor.invoke("stretchpitch_destroy"),this.processor.destroy()}}},75742:(t,e,r)=>{"use strict";r.d(e,{A:()=>v});var i=r(49859),s=r(63939),a=r(50932),n=r(11473),o=r(16030),c=r(56024),l=r(4624),h=r(95797),u=(r(56490),r(95335)),d=r(73749),p=r(67672),f=r(37837),m=r(9705);class v{constructor(t){(0,i.A)(this,"options",void 0),(0,i.A)(this,"decoder",void 0),(0,i.A)(this,"frame",0),(0,i.A)(this,"decoderOptions",0),(0,i.A)(this,"timeBase",void 0),this.options=t,this.decoder=new o.A(t.resource)}getAVFrame(){return this.frame?this.frame:this.frame=this.options.avframePool?this.options.avframePool.alloc():(0,c.FP)()}outputAVFrame(){this.frame&&(this.options.onReceiveAVFrame?(a.M[15](this.frame+124,this.timeBase.den),a.M[15](this.frame+120,this.timeBase.num),this.options.onReceiveAVFrame(this.frame)):this.options.avframePool?this.options.avframePool.release(this.frame):(0,c.xj)(this.frame),this.frame=0)}receiveAVFrame(){return this.decoder.invoke("decoder_receive",this.getAVFrame())}async open(t,e={}){await this.decoder.run();const r=n.s_.malloc(4);a.M[20](r,0),u.HP(e).length&&(this.decoderOptions&&(d.AO(this.decoderOptions),n.s_.free(this.decoderOptions),this.decoderOptions=0),this.decoderOptions=(0,f.Gy)(8),u.__(e,((t,e)=>{(p.Yj(t)||p.Yj(e))&&d.a5(this.decoderOptions,e,t)})),a.M[20](r,this.decoderOptions));let i=0;return h.A.jspi?i=await this.decoder.invokeAsync("decoder_open",t,0,1,r):(i=this.decoder.invoke("decoder_open",t,0,1,r),await this.decoder.childThreadsReady()),this.decoderOptions=s.f[20](r),n.s_.free(r),i<0?(l.z3(`open audio decoder failed, ret: ${i}`,"src/avcodec/wasmcodec/AudioDecoder.ts",129),m.r8):(this.timeBase=void 0,0)}decode(t){this.timeBase||(this.timeBase={den:s.f[15](t+76),num:s.f[15](t+72)});let e=this.decoder.invoke("decoder_decode",t);if(e)return e;for(;;){if(e=this.receiveAVFrame(),1!==e){if(e<0)return e;break}this.outputAVFrame()}return 0}async flush(){for(this.decoder.invoke("decoder_flush");;){const t=this.receiveAVFrame();if(t<1)return t;this.outputAVFrame()}return 0}close(){this.decoder.invoke("decoder_close"),this.decoder.destroy(),this.frame&&(this.options.avframePool?this.options.avframePool.release(this.frame):(0,c.xj)(this.frame),this.frame=0),this.decoderOptions&&(d.AO(this.decoderOptions),n.s_.free(this.decoderOptions),this.decoderOptions=0)}}},40417:(t,e,r)=>{"use strict";r.d(e,{A:()=>v});var i=r(49859),s=r(63939),a=r(50932),n=r(11473),o=r(16030),c=r(56024),l=r(4624),h=r(95797),u=(r(56490),r(95335)),d=r(73749),p=r(67672),f=r(37837),m=r(9705);class v{constructor(t){(0,i.A)(this,"options",void 0),(0,i.A)(this,"decoder",void 0),(0,i.A)(this,"frame",0),(0,i.A)(this,"parameters",0),(0,i.A)(this,"decoderOptions",0),(0,i.A)(this,"timeBase",void 0),(0,i.A)(this,"dtsQueue",[]),this.options=t,this.decoder=new o.A(this.options.resource)}getAVFrame(){return this.frame?this.frame:this.frame=this.options.avframePool?this.options.avframePool.alloc():(0,c.FP)()}outputAVFrame(){this.frame&&(2&s.f[15](this.parameters+160)&&this.dtsQueue.length&&a.M[17](this.frame+104,this.dtsQueue.shift()),this.options.onReceiveAVFrame?(a.M[15](this.frame+124,this.timeBase.den),a.M[15](this.frame+120,this.timeBase.num),this.options.onReceiveAVFrame(this.frame)):this.options.avframePool?this.options.avframePool.release(this.frame):(0,c.xj)(this.frame),this.frame=0)}receiveAVFrame(){return this.decoder.invoke("decoder_receive",this.getAVFrame())}async open(t,e=1,r={}){await this.decoder.run(void 0,e);let i=0;const o=n.s_.malloc(4);return a.M[20](o,0),u.HP(r).length&&(this.decoderOptions&&(d.AO(this.decoderOptions),n.s_.free(this.decoderOptions),this.decoderOptions=0),this.decoderOptions=(0,f.Gy)(8),u.__(r,((t,e)=>{(p.Yj(t)||p.Yj(e))&&d.a5(this.decoderOptions,e,t)})),a.M[20](o,this.decoderOptions)),h.A.jspi?i=await this.decoder.invokeAsync("decoder_open",t,0,e,o):(i=this.decoder.invoke("decoder_open",t,0,e,o),await this.decoder.childThreadsReady()),this.decoderOptions=s.f[20](o),n.s_.free(o),i<0?(l.z3(`open video decoder failed, ret: ${i}`,"src/avcodec/wasmcodec/VideoDecoder.ts",173),m.r8):(this.parameters=t,this.timeBase=void 0,this.dtsQueue.length=0,0)}decode(t){this.timeBase||(this.timeBase={den:s.f[15](t+76),num:s.f[15](t+72)});let e=this.decoder.invoke("decoder_decode",t);if(e)return e;for(2&s.f[15](this.parameters+160)&&this.dtsQueue.push(s.f[17](t+16));;){if(e=this.receiveAVFrame(),1!==e){if(e<0)return e;break}this.outputAVFrame()}return 0}async flush(){for(this.decoder.invoke("decoder_flush");;){const t=this.receiveAVFrame();if(t<1)return t;this.outputAVFrame()}return 0}close(){this.decoder.invoke("decoder_close"),this.decoder.destroy(),this.frame&&(this.options.avframePool?this.options.avframePool.release(this.frame):(0,c.xj)(this.frame),this.frame=0),this.parameters=0,this.decoderOptions&&(d.AO(this.decoderOptions),n.s_.free(this.decoderOptions),this.decoderOptions=0)}setSkipFrameDiscard(t){this.decoder.invoke("decoder_discard",t)}getChildThreadCount(){return this.decoder?this.decoder.getChildThreadCount():0}}},77104:(t,e,r)=>{"use strict";r.d(e,{A:()=>g});var i=r(49859),s=r(18979),a=r.n(s),n=r(94870),o=r.n(n),c=r(63939),l=r(79756),h=r(14686),u=r(71517),d=r(22898),p=r(4624),f=r(9705),m=r(72739);const v="src/avcodec/webcodec/AudioDecoder.ts";class g{constructor(t){(0,i.A)(this,"options",void 0),(0,i.A)(this,"decoder",void 0),(0,i.A)(this,"parameters",0),(0,i.A)(this,"extradata",void 0),(0,i.A)(this,"currentError",null),this.options=t}output(t){this.options.onReceiveAudioData?this.options.onReceiveAudioData(t):t.close()}error(t){this.currentError=t,this.options.onError(t)}async open(t){var e,r,i,s;this.currentError=null,this.parameters=t,this.extradata=void 0,0!==c.f[20](t+12)&&(this.extradata=a()(s=(0,h.s3)(c.f[20](t+12),c.f[15](t+16))).call(s));const n={codec:null!==(e=this.options.codec)&&void 0!==e?e:(0,l.A)(this.parameters),sampleRate:c.f[15](t+136),numberOfChannels:c.f[15](t+116),description:this.extradata};n.description||delete n.description;try{if(!(await AudioDecoder.isConfigSupported(n)).supported)return p.z3("not support",v,95),f.nr}catch(t){return p.z3(`${t}`,v,100),f.r8}return this.decoder&&"closed"!==this.decoder.state&&this.decoder.close(),this.decoder=new AudioDecoder({output:o()(r=this.output).call(r,this),error:o()(i=this.error).call(i,this)}),this.decoder.reset(),this.decoder.configure(n),this.currentError?(p.z3(`open audio decoder error, ${this.currentError}`,v,117),f.r8):0}changeExtraData(t){var e;return m.FB(t,this.extradata)?0:(this.currentError=null,this.extradata=a()(t).call(t),this.decoder.reset(),this.decoder.configure({codec:null!==(e=this.options.codec)&&void 0!==e?e:(0,l.A)(this.parameters),sampleRate:c.f[15](this.parameters+136),numberOfChannels:c.f[15](this.parameters+116),description:this.extradata}),this.currentError?(p.z3(`change extra data error, ${this.currentError}`,v,141),f.r8):0)}decode(t){if(this.currentError)return p.z3(`decode error, ${this.currentError}`,v,150),f.LR;const e=(0,u.rU)(t,1);if(0!==e){let t=this.changeExtraData((0,h.s3)(c.f[20](e),c.f[25](e+4)));if(t)return t}const r=(0,d.A)(t);try{this.decoder.decode(r)}catch(t){return p.z3(`decode error, ${t}`,v,169),f.LR}return 0}async flush(){if(this.currentError)return p.z3(`flush error, ${this.currentError}`,v,178),f.LR;try{return await this.decoder.flush(),0}catch(t){return p.z3(`flush error, ${t}`,v,186),f.LR}}close(){"closed"!==this.decoder.state&&this.decoder.close(),this.decoder=void 0}getQueueLength(){var t,e;return null!==(t=null===(e=this.decoder)||void 0===e?void 0:e.decodeQueueSize)&&void 0!==t?t:0}static async isSupported(t){let e;var r;0!==c.f[20](t+12)&&(e=a()(r=(0,h.s3)(c.f[20](t+12),c.f[15](t+16))).call(r));const i={codec:(0,l.A)(t),sampleRate:c.f[15](t+136),numberOfChannels:c.f[15](t+116),description:e};i.description||delete i.description;try{return(await AudioDecoder.isConfigSupported(i)).supported}catch(t){return!1}}}},71039:(t,e,r)=>{"use strict";r.d(e,{A:()=>$});var i=r(49859),s=r(74707),a=r.n(s),n=r(385),o=r.n(n),c=r(129),l=r.n(c),h=r(86226),u=r.n(h),d=r(18979),p=r.n(d),f=r(94870),m=r.n(f),v=r(61240),g=r.n(v),y=r(63939),A=r(77162),b=r(29170),x=(r(9599),r(86834)),w=r(28875),k=r(14686),T=r(71517),_=r(39365),I=r(28917),S=r(4624),P=r(44690),M=r(62815),C=r(67659),R=r(59166),E=r(9705),D=r(72739),B=r(77231),L=r(44328),U=r(39381);const F="src/avcodec/webcodec/VideoDecoder.ts";class ${constructor(t){(0,i.A)(this,"decoder",void 0),(0,i.A)(this,"alphaDecoder",void 0),(0,i.A)(this,"options",void 0),(0,i.A)(this,"parameters",0),(0,i.A)(this,"extradata",void 0),(0,i.A)(this,"currentError",null),(0,i.A)(this,"inputQueue",void 0),(0,i.A)(this,"outputQueue",void 0),(0,i.A)(this,"dtsQueue",void 0),(0,i.A)(this,"sort",void 0),(0,i.A)(this,"keyframeRequire",!1),(0,i.A)(this,"extradataRequire",!1),(0,i.A)(this,"alphaQueue",void 0),(0,i.A)(this,"alphaPending",void 0),this.options=t,this.inputQueue=[],this.outputQueue=[],this.dtsQueue=[],this.alphaQueue=[],this.alphaPending=new(a()),this.sort=!(!x.A.safari&&!P.A.ios)}getAlphaFrame(t){if(this.alphaQueue.length){let r=this.alphaQueue.length-1;for(;r>=0;r--){var e;if(this.alphaQueue[r].timestamp===t.timestamp)return o()(e=this.alphaQueue).call(e,r,1).shift()}}}async output(t){if(2&y.f[15](this.parameters+160)&&this.dtsQueue.length){const e=t;t=new VideoFrame(e,{timestamp:this.dtsQueue.shift()}),e.close()}if(!this.alphaPending.has(t.timestamp)||(await this.alphaPending.get(t.timestamp).promise,this.decoder))if(l()(this)){let r=0;for(;r<this.outputQueue.length;r++)if(this.outputQueue[r].timestamp>t.timestamp){var e;o()(e=this.outputQueue).call(e,r,0,t);break}for(r===this.outputQueue.length&&this.outputQueue.push(t);this.outputQueue.length>2&&this.outputQueue[0].timestamp===this.inputQueue[0];){const t=this.outputQueue.shift(),e=this.getAlphaFrame(t);this.options.onReceiveVideoFrame?this.options.onReceiveVideoFrame(t,e):(t.close(),e&&e.close()),this.inputQueue.shift()}}else{const e=this.getAlphaFrame(t);this.options.onReceiveVideoFrame?this.options.onReceiveVideoFrame(t,e):(t.close(),e&&e.close())}else t.close()}async outputAlpha(t){this.alphaQueue.push(t),this.alphaPending.has(t.timestamp)&&(this.alphaPending.get(t.timestamp).resolve(),this.alphaPending.delete(t.timestamp))}error(t){this.currentError=t,this.options.onError(t)}errorAlpha(t){var e;this.currentError=t,this.options.onError(t),u()(e=this.alphaPending).call(e,(t=>{t.resolve()})),this.alphaPending.clear()}changeExtraData(t){var e,r;if(D.FB(t,this.extradata))return 0;this.currentError=null,this.extradata=p()(t).call(t),27===y.f[15](this.parameters+4)?M.XC({codecpar:(0,b.A)(this.parameters,A.A),sideData:{},metadata:{}},this.extradata):173===y.f[15](this.parameters+4)&&C.XC({codecpar:(0,b.A)(this.parameters,A.A),sideData:{},metadata:{}},this.extradata),this.decoder.reset();const i={codec:null!==(e=this.options.codec)&&void 0!==e?e:(0,w.A)(this.parameters,t),codedWidth:y.f[15](this.parameters+56),codedHeight:y.f[15](this.parameters+60),description:this.extradata,hardwareAcceleration:(0,_.C)(null===(r=this.options.enableHardwareAcceleration)||void 0===r||r)};return i.codedWidth||delete i.codedWidth,i.codedHeight||delete i.codedHeight,this.options.optimizeForLatency&&(i.optimizeForLatency=this.options.optimizeForLatency),this.options.colorSpace&&(i.colorSpace=this.options.colorSpace),this.options.rotation&&(i.rotation=this.options.rotation),this.options.flip&&(i.flip=this.options.flip),this.decoder.configure(i),this.alphaDecoder&&this.alphaDecoder.configure(i),this.currentError?(S.z3(`change extra data error, ${this.currentError}`,F,256),E.r8):(this.keyframeRequire=!0,0)}async open(t){var e,r,i,s,a,n;this.currentError=null,this.extradata=void 0,0!==y.f[20](t+12)&&(this.extradata=p()(n=(0,k.s3)(y.f[20](t+12),y.f[15](t+16))).call(n)),this.parameters=t;const o={codec:null!==(e=this.options.codec)&&void 0!==e?e:(0,w.A)(t),codedWidth:y.f[15](t+56),codedHeight:y.f[15](t+60),description:1&y.f[15](t+160)?void 0:this.extradata,hardwareAcceleration:(0,_.C)(null===(r=this.options.enableHardwareAcceleration)||void 0===r||r)};this.options.optimizeForLatency&&(o.optimizeForLatency=this.options.optimizeForLatency),this.options.colorSpace&&(o.colorSpace=this.options.colorSpace),this.options.rotation&&(o.rotation=this.options.rotation),this.options.flip&&(o.flip=this.options.flip),o.description||delete o.description,o.codedWidth||delete o.codedWidth,o.codedHeight||delete o.codedHeight;try{if(!(await VideoDecoder.isConfigSupported(o)).supported)return S.z3("not support",F,309),E.nr}catch(t){return S.z3(`${t}`,F,314),E.r8}var c,l,h,d;return this.decoder&&"closed"!==this.decoder.state&&this.decoder.close(),this.alphaDecoder&&"closed"!==this.alphaDecoder.state&&this.alphaDecoder.close(),this.decoder=new VideoDecoder({output:m()(i=this.output).call(i,this),error:m()(s=this.error).call(s,this)}),this.decoder.reset(),this.decoder.configure(o),8&y.f[15](t+160)&&(139===y.f[15](t+4)||167===y.f[15](t+4)||225===y.f[15](t+4))&&"keep"===this.options.alpha&&(this.alphaDecoder=new VideoDecoder({output:m()(c=this.outputAlpha).call(c,this),error:m()(l=this.errorAlpha).call(l,this)}),this.alphaDecoder.reset(),this.alphaDecoder.configure(o)),this.currentError?(S.z3(`open video decoder error, ${this.currentError}`,F,349),E.r8):(this.keyframeRequire=!0,1&y.f[15](t+160)&&(this.extradataRequire=!0),2&y.f[15](this.parameters+160)&&(this.sort=!1),this.outputQueue.length&&u()(h=this.outputQueue).call(h,(t=>{t.close()})),this.alphaQueue.length&&u()(d=this.alphaQueue).call(d,(t=>{t.close()})),u()(a=this.alphaPending).call(a,(t=>{t.resolve()})),this.alphaPending.clear(),this.inputQueue.length=0,this.outputQueue.length=0,this.dtsQueue.length=0,this.alphaQueue.length=0,0)}decode(t){if(this.currentError)return S.z3(`decode error, ${this.currentError}`,F,388),E.LR;const e=(0,T.rU)(t,1);if(0!==e){let t=this.changeExtraData((0,k.s3)(y.f[20](e),y.f[25](e+4)));if(t)return t}const r=1&y.f[15](t+36);if(this.keyframeRequire){if(!r)return 0;if(1&y.f[15](this.parameters+160)&&this.extradata&&this.extradataRequire){if(27===y.f[15](this.parameters+4)){if(!M.sL((0,T.iI)(t))){const e=M.kM((0,T.iI)(t),this.extradata);e&&(0,T.NX)(t,e.bufferPointer,e.length)}}else if(173===y.f[15](this.parameters+4)){if(!C.sL((0,T.iI)(t))){const e=C.kM((0,T.iI)(t),this.extradata);e&&(0,T.NX)(t,e.bufferPointer,e.length)}}else if(196===y.f[15](this.parameters+4)&&!R.sL((0,T.iI)(t))){const e=R.kM((0,T.iI)(t),this.extradata);e&&(0,T.NX)(t,e.bufferPointer,e.length)}this.extradataRequire=!1}}const i=(0,I.A)(t),s=i.timestamp;if(l()(this)){let t=0;for(;t<this.inputQueue.length;t++)if(this.inputQueue[t]>s){var a;o()(a=this.inputQueue).call(a,t,0,s);break}t===this.inputQueue.length&&this.inputQueue.push(s)}try{if(this.alphaDecoder){const e=(0,T.rU)(t,15);if(e&&U.v4(y.f[20](e))===BigInt(1))if(i.timestamp!==B.N_){this.alphaDecoder.decode(new EncodedVideoChunk({type:i.type,timestamp:i.timestamp,duration:null!=i.duration?i.duration:void 0,data:(0,k.s3)(y.f[20](e)+8,y.f[25](e+4)-8)}));let{promise:t,resolve:r}=g().withResolvers();this.alphaPending.set(i.timestamp,{promise:t,resolve:r})}else S.R8("decode with alpha need avpacket's pts, ignore alpha channel data",F,478)}this.decoder.decode(i),2&y.f[15](this.parameters+160)&&this.dtsQueue.push(Number((0,L.Mr)(y.f[17](t+16),t+72,B.KR)))}catch(t){return S.z3(`decode error, ${t}`,F,490),E.LR}return r&&(this.keyframeRequire=!1),0}async flush(){if(this.currentError)return S.z3(`flush error, ${this.currentError}`,F,503),E.LR;try{this.alphaDecoder&&await this.alphaDecoder.flush(),await this.decoder.flush()}catch(t){return S.z3(`flush error, ${t}`,F,513),E.LR}if(l()(this))for(;this.outputQueue.length;){const t=this.outputQueue.shift(),e=this.getAlphaFrame(t);this.options.onReceiveVideoFrame?this.options.onReceiveVideoFrame(t,e):(t.close(),e&&e.close())}return this.keyframeRequire=!0,0}close(){var t,e,r;this.decoder&&"closed"!==this.decoder.state&&this.decoder.close(),this.alphaDecoder&&"closed"!==this.alphaDecoder.state&&this.alphaDecoder.close(),u()(t=this.alphaPending).call(t,(t=>{t.resolve()})),this.alphaPending.clear(),this.decoder=void 0,this.alphaDecoder=void 0,this.currentError=null,this.outputQueue.length&&u()(e=this.outputQueue).call(e,(t=>{t.close()})),this.alphaQueue.length&&u()(r=this.alphaQueue).call(r,(t=>{t.close()})),this.inputQueue.length=0,this.outputQueue.length=0,this.alphaQueue.length=0}getQueueLength(){var t,e;return null!==(t=null===(e=this.decoder)||void 0===e?void 0:e.decodeQueueSize)&&void 0!==t?t:0}setSkipFrameDiscard(t){}static async isSupported(t,e){let r;var i;0!==y.f[20](t+12)&&(r=p()(i=(0,k.s3)(y.f[20](t+12),y.f[15](t+16))).call(i));const s={codec:(0,w.A)(t),codedWidth:y.f[15](t+56),codedHeight:y.f[15](t+60),description:1&y.f[15](t+160)?void 0:r,hardwareAcceleration:(0,_.C)(null==e||e)};s.description||delete s.description;try{return(await VideoDecoder.isConfigSupported(s)).supported}catch(t){return!1}}}},44315:(t,e,r)=>{"use strict";r.d(e,{Xv:()=>A,fG:()=>b,oD:()=>y});var i=r(49859),s=r(71426),a=r.n(s),n=r(31721),o=r.n(n),c=r(26327),l=r.n(c),h=r(385),u=r.n(h),d=r(86226),p=r.n(d),f=r(68960),m=r(71517),v=r(20756);class g{constructor(){(0,i.A)(this,"packetBuffer",void 0),this.packetBuffer=[]}}class y{constructor(){(0,i.A)(this,"metadataHeaderPadding",-1),(0,i.A)(this,"metadata",void 0),(0,i.A)(this,"streams",void 0),(0,i.A)(this,"streamGroups",void 0),(0,i.A)(this,"options",void 0),(0,i.A)(this,"chapters",void 0),(0,i.A)(this,"privateData",void 0),(0,i.A)(this,"privateData2",void 0),(0,i.A)(this,"iformat",void 0),(0,i.A)(this,"oformat",void 0),(0,i.A)(this,"ioReader",void 0),(0,i.A)(this,"ioWriter",void 0),(0,i.A)(this,"errorFlag",void 0),(0,i.A)(this,"interval",void 0),(0,i.A)(this,"streamIndex",void 0),(0,i.A)(this,"streamGroupIndex",void 0),(0,i.A)(this,"getDecoderResource",null),this.streams=[],this.streamGroups=[],this.errorFlag=0,this.streamIndex=0,this.streamGroupIndex=0,this.interval=new g,this.options={},this.privateData={},this.metadata={},this.chapters=[]}get format(){return this.iformat?this.iformat.type:this.oformat?this.oformat.type:-1}getStreamById(t){var e;return a()(e=this.streams).call(e,(e=>e.id===t))}getStreamGroupById(t){var e;return a()(e=this.streamGroups).call(e,(e=>e.id===t))}getStreamByIndex(t){var e;return a()(e=this.streams).call(e,(e=>e.index===t))}getStreamGroupByIndex(t){var e;return a()(e=this.streamGroups).call(e,(e=>e.index===t))}getStreamByMediaType(t){var e;return a()(e=this.streams).call(e,(e=>{var r;return(null===(r=e.codecpar)||void 0===r?void 0:r.codecType)===t&&!(1024&e.disposition)}))}getStreamGroupByGroupType(t){var e;return a()(e=this.streamGroups).call(e,(e=>e.type===t))}getAttachmentPicture(){var t;return a()(t=this.streams).call(t,(t=>{var e;return 0===(null===(e=t.codecpar)||void 0===e?void 0:e.codecType)&&1024&t.disposition}))}createStream(){const t=new f.Ay;return t.index=this.streamIndex++,t.id=(0,v.A)(),this.removeStreamByIndex(t.index),this.streams.push(t),t}createStreamGroup(t){const e=new f.Tr;return e.index=this.streamGroupIndex++,e.type=t,e.id=(0,v.A)(),this.removeStreamGroupByIndex(e.index),this.streamGroups.push(e),e}addStream(t){this.removeStreamByIndex(t.index),this.streams.push(t)}addStreamGroup(t){this.removeStreamGroupByIndex(t.index),this.streamGroups.push(t)}addStreamToStreamGroup(t,e){var r;o()(r=t.streams).call(r,(t=>t===e))||t.streams.push(e)}removeStream(t){this.removeStreamByIndex(t.index)}removeStreamGroup(t){this.removeStreamGroupByIndex(t.index)}removeStreamById(t){var e;const r=l()(e=this.streams).call(e,(e=>e.id===t));if(r>-1){var i;const t=u()(i=this.streams).call(i,r,1);t[0]&&t[0].destroy()}}removeStreamGroupById(t){var e;const r=l()(e=this.streamGroups).call(e,(e=>e.id===t));if(r>-1){var i;const t=u()(i=this.streamGroups).call(i,r,1);t[0]&&t[0].destroy()}}removeStreamByIndex(t){var e;const r=l()(e=this.streams).call(e,(e=>e.index===t));if(r>-1){var i;const t=u()(i=this.streams).call(i,r,1);t[0]&&t[0].destroy()}}removeStreamGroupByIndex(t){var e;const r=l()(e=this.streamGroups).call(e,(e=>e.index===t));if(r>-1){var i;const t=u()(i=this.streamGroups).call(i,r,1);t[0]&&t[0].destroy()}}async destroy(){var t,e;this.oformat&&this.oformat.destroy(this),this.iformat&&await this.iformat.destroy(this),this.interval.packetBuffer.length&&p()(e=this.interval.packetBuffer).call(e,(t=>{(0,m.Qe)(t)})),p()(t=this.streams).call(t,(t=>{t.destroy()})),this.streams=[],this.interval=null,this.ioReader=this.ioWriter=null,this.oformat=this.iformat=null}}function A(){return new y}function b(){return new y}},16160:(t,e,r)=>{"use strict";r.d(e,{V:()=>s,v:()=>i});const i=256e3,s=BigInt(5e3)},75:(t,e,r)=>{"use strict";r.d(e,{Cj:()=>Y,Ib:()=>j,ho:()=>W,jF:()=>K});var i=r(96319),s=r.n(i),a=r(18979),n=r.n(a),o=r(71426),c=r.n(o),l=r(11393),h=r.n(l),u=r(52730),d=r.n(u),p=r(385),f=r.n(p),m=r(86226),v=r.n(m),g=r(31721),y=r.n(g),A=r(61499),b=r(63939),x=r(50932),w=r(9599),k=r(29170),T=r(36981),_=r(95335),I=r(72739),S=r(77231),P=r(31425),M=r(44328),C=r(71517),R=r(16160),E=r(9705),D=r(4624),B=r(40417),L=r(75742),U=r(56024),F=r(14686),$=r(31633),O=r(55680),N=r(89478);const z="src/avformat/demux.ts",V=16,G={fastOpen:!1,maxAnalyzeDuration:15e3};async function W(t,e={}){const r=_.X$({},G,e);return t.ioReader||D.h2("need IOReader",z,88),t.iformat||D.h2("need iformat",z,91),2===t.iformat.type&&(r.maxAnalyzeDuration=Math.max(r.maxAnalyzeDuration,2e3)),t.iformat.init(t),t.options=r,t.iformat.readHeader(t)}async function j(t){const e={},r={},i={},a={},o={},l={},u={},p=t.iformat.getAnalyzeStreamsCount();let f=0;const m=[];let v=0;function g(){if(!t.getDecoderResource)return!0;for(let e=0;e<t.streams.length;e++)if(l[t.streams[e].index]&&!u[t.streams[e].index])return!1;return!0}function y(t,e){let s=r[t.index];const l=i[t.index];let h=t.codecpar.videoDelay;if(null!=l&&l.length&&(h=Math.min(Math.max((0,O.A)(l),t.codecpar.videoDelay),16),e&&(t.codecpar.videoDelay=h)),!s&&null!=l&&l.length){s=h?(0,N.A)(h,l):n()(l).call(l);const e={delay:h,dtsQueue:s};s=[],o[t.index]=e;for(let r=0;r<m.length;r++)if(t.index===b.f[15](m[r]+32)){var u;const i=e.dtsQueue.shift();x.M[17](m[r]+16,i),s.push(i);const a=c()(u=t.sampleIndexes).call(u,(t=>t.pts===b.f[17](m[r]+8)));a&&(a.dts=b.f[17](m[r]+16))}}if(s&&s.length>1){let e=BigInt(0);for(let t=1;t<s.length;t++)e+=s[t]-s[t-1];if(1===t.codecpar.codecType&&t.codecpar.sampleRate>0&&!t.codecpar.frameSize){let r=Number(e)/(s.length-1);t.codecpar.frameSize=Math.round(r/t.timeBase.den*t.timeBase.num*t.codecpar.sampleRate)}else if(0===t.codecpar.codecType){const r=(0,M.j2)(t.timeBase.den*(s.length-1)/(Number(e)*t.timeBase.num),S.go);t.codecpar.framerate.num=r.num,t.codecpar.framerate.den=r.den,(0,$.A)(t.codecpar.framerate)}const r=Number(s[s.length-1]-t.startTime)*t.timeBase.num/t.timeBase.den;r&&(t.codecpar.bitrate=BigInt(Math.floor(8*a[t.index]/r)))}}async function E(){for(let e=0;e<t.streams.length;e++){const r=t.streams[e];if(1024&r.disposition){if(r.attachedPic&&t.getDecoderResource){const e=await t.getDecoderResource(r.codecpar.codecType,r.codecpar.codecId);if(!e)continue;e.threadModule&&delete e.threadModule;const i=new B.A({resource:e,onReceiveAVFrame:t=>{r.codecpar.format=b.f[15](t+80),r.codecpar.colorRange=b.f[15](t+208),r.codecpar.colorSpace=b.f[15](t+220),r.codecpar.colorPrimaries=b.f[15](t+212),r.codecpar.colorTrc=b.f[15](t+216),r.codecpar.chromaLocation=b.f[15](t+224),b.f[15](t+92)&&b.f[15](t+96)&&(r.codecpar.sampleAspectRatio=(0,k.A)(t+92,w.P)),r.codecpar.width=b.f[15](t+68),r.codecpar.height=b.f[15](t+72),(0,U.xj)(t)}});await i.open(r.codecpar[A.o9])||(i.decode(r.attachedPic),await i.flush()),i.close()}}else y(r,!0),1===r.codecpar.codecType&&(1===r.codecpar.chLayout.nbChannels?(r.codecpar.chLayout.u.mask=BigInt(4),r.codecpar.chLayout.order=1):2===r.codecpar.chLayout.nbChannels&&(r.codecpar.chLayout.u.mask=BigInt(3),r.codecpar.chLayout.order=1))}}for(;;){if(t.streams.length>=p&&t.options.fastOpen&&(0,P.$)(t)){await E();break}f||(f=(0,C._5)());let s=!1;if(v=await Y(t,f),0!==v){await E();break}const n=t.getStreamByIndex(b.f[15](f+32));let o=b.f[17](f+8);if(o===S.Dh&&(o=b.f[17](f+16)),b.f[15](f+28)&&(s=!0,m.push(f),e[n.index]?o<n.startTime&&(n.startTime=o):(n.firstDTS=b.f[17](f+16),n.startTime=o,e[n.index]=!0),b.f[17](f+16)!==S.Dh&&(r[n.index]?r[n.index].push(b.f[17](f+16)):r[n.index]=[b.f[17](f+16)]),i[n.index]?i[n.index].push(o):i[n.index]=[o],a[n.index]?a[n.index]+=b.f[15](f+28):a[n.index]=b.f[15](f+28),!u[n.index]&&t.getDecoderResource&&!t.options.fastOpen&&!n.metadata.encryption)){let e=l[n.index];if(!e){const r=await t.getDecoderResource(n.codecpar.codecType,n.codecpar.codecId);r&&(1===n.codecpar.codecType?e=new L.A({resource:r,onReceiveAVFrame:t=>{n.codecpar.format=b.f[15](t+80),n.codecpar.frameSize=b.f[15](t+76),n.codecpar.sampleRate=b.f[15](t+152),n.codecpar.chLayout=(0,k.A)(t+288,T.r),(0,U.xj)(t),u[n.index]=!0}}):0===n.codecpar.codecType&&(r.threadModule&&delete r.threadModule,e=new B.A({resource:r,onReceiveAVFrame:t=>{n.codecpar.format=b.f[15](t+80),n.codecpar.colorRange=b.f[15](t+208),n.codecpar.colorSpace=b.f[15](t+220),n.codecpar.colorPrimaries=b.f[15](t+212),n.codecpar.colorTrc=b.f[15](t+216),n.codecpar.chromaLocation=b.f[15](t+224),b.f[15](t+92)&&b.f[15](t+96)&&(n.codecpar.sampleAspectRatio=(0,k.A)(t+92,w.P)),n.codecpar.width=b.f[15](t+68),n.codecpar.height=b.f[15](t+72),(0,U.xj)(t),u[n.index]=!0}})),await e.open(n.codecpar[A.o9])?(e.close(),u[n.index]=!0):l[n.index]=e)}e&&e.decode(f)&&(u[n.index]=!0)}if(i[n.index]&&i[n.index].length===V&&y(n,!1),n.startTime!==S.Dh&&o-n.startTime>(0,M.k)(BigInt(Math.floor(t.options.maxAnalyzeDuration)),S.i0,n.timeBase)&&(t.streams.length>=p&&(0,P.$)(t)||o-n.startTime>(0,M.k)(BigInt(15e3),S.i0,n.timeBase)&&(!i[n.index]||i[n.index].length>450))&&g()){await E(),s&&(f=0);break}s&&(f=0)}return f&&(0,C.Qe)(f),m.length&&(t.interval.packetBuffer=h()(m).call(m,t.interval.packetBuffer)),_.__(l,(t=>{t&&t.close()})),_.__(o,((e,r)=>{const i=t.getStreamByIndex(+r);i.privateData2?_.X$(i.privateData2,e):i.privateData2=e})),-1048576===v||-1048572===v?0:0!==v?v:(2===t.iformat.type&&1&d()(t.ioReader)&&!(2&d()(t.ioReader))&&await async function(t){const e=await t.ioReader.fileSize();if(e<=BigInt(0))return;const r=t.interval.packetBuffer;t.interval.packetBuffer=[];let i=t.ioReader.getPos(),a=0;for(;a<4;){const r=e-BigInt(Math.floor(R.v<<a)),s=await t.iformat.seek(t,null,r,2);if(s<0)break;!a&&s>0&&(i=s);const n={},o=(0,C._5)();for(;!(await Y(t,o)<0);){let e=b.f[17](o+8);e===S.Dh&&(e=b.f[17](o+16));const r=t.getStreamByIndex(b.f[15](o+32));r.startTime!==S.Dh?e-=r.startTime:e-=r.firstDTS,e>BigInt(0)&&((r.duration===S.Dh||!n[b.f[15](o+32)]||r.duration<e&&Math.abs(Number(e-r.duration))<60*r.timeBase.den/r.timeBase.num)&&(r.duration=e),n[o.streamIndex]=e)}(0,C.Qe)(o);let c=!0;if(I.__(t.streams,(t=>{if(t.duration===S.Dh)return c=!1,!1})),c)break;a++}I.__(t.interval.packetBuffer,(t=>{(0,C.Qe)(t)})),t.interval.packetBuffer=s()(r).call(r,(t=>!(b.f[17](t+56)>=i&&((0,C.Qe)(t),1)))),await t.iformat.seek(t,null,i,2)}(t),0)}function H(t,e){let r=b.f[17](e+8);r===S.Dh&&(r=b.f[17](e+16));const i=I.El(t.sampleIndexes,(t=>t.pts<r?1:-1)),s={dts:b.f[17](e+16),pts:r,pos:b.f[17](e+56),size:b.f[15](e+28),duration:b.f[17](e+48),flags:b.f[15](e+36)};var a;i>-1?(t.sampleIndexesPosMap.set(b.f[17](e+56),i),f()(a=t.sampleIndexes).call(a,i,0,s)):(t.sampleIndexesPosMap.set(b.f[17](e+56),t.sampleIndexes.length),t.sampleIndexes.push(s))}async function q(t,e){const r=t.getStreamByIndex(b.f[15](e+32));if(b.f[17](e+16)===S.Dh){const t=r.privateData2;t&&(t.delay?(I._(t.dtsQueue,b.f[17](e+8),(t=>t<b.f[17](e+8)?1:-1)),t.dtsQueue.length>t.delay&&x.M[17](e+16,t.dtsQueue.shift())):x.M[17](e+16,b.f[17](e+8)))}let i=0;if(r&&(27===r.codecpar.codecId||173===r.codecpar.codecId||196===r.codecpar.codecId||86018===r.codecpar.codecId))if(!b.f[15](e+28)&&(0,C.fQ)(e,1))for(;;){const r=(0,C._5)();if(i=await t.iformat.readAVPacket(t,r),0!==i){if(t.interval.packetBuffer.length){let r=t.interval.packetBuffer.shift();return(0,C.Up)(e),(0,C.rN)(e,r),(0,C.Qe)(r),q(t,e)}return i}if(b.f[15](r+32)!==b.f[15](e+32)){let e=t.interval.packetBuffer.length-1,i=!0;for(;e>=0;e--)if(b.f[15](t.interval.packetBuffer[e]+32)===b.f[15](r+32)){var s;b.f[15](t.interval.packetBuffer[e]+28)||b.f[15](r+28)?!b.f[15](t.interval.packetBuffer[e]+28)&&b.f[15](r+28)&&((0,C.Zx)(t.interval.packetBuffer[e],r),(0,C.Qe)(r),i=!1):((0,C.Qe)(t.interval.packetBuffer[e]),f()(s=t.interval.packetBuffer).call(s,e,1,r),i=!1);break}i&&t.interval.packetBuffer.push(r)}else{if(b.f[15](r+28))return(0,C.Zx)(e,r),x.M[17](e+16,b.f[17](r+16)),x.M[17](e+8,b.f[17](r+8)),(0,C.Qe)(r),0;(0,C.Up)(e),(0,C.rN)(e,r),(0,C.Qe)(r)}}else if(32&b.f[15](e+36))return Y(t,e);if(1&d()(t.ioReader)&&!r.sampleIndexesPosMap.has(b.f[17](e+56)))if(0===r.codecpar.codecType)1&b.f[15](e+36)&&H(r,e);else if(1===r.codecpar.codecType){const t=I.El(r.sampleIndexes,(t=>t.pts<b.f[17](e+8)?1:-1));(!r.sampleIndexes.length||t<0&&(0,M.Mr)(b.f[17](e+8)-r.sampleIndexes[r.sampleIndexes.length-1].pts,e+72,S.i0)>=R.V||t>0&&t<r.sampleIndexes.length-1&&(0,M.Mr)(b.f[17](e+8)-r.sampleIndexes[t-1].pts,e+72,S.i0)>=R.V||0===t&&(0,M.Mr)(r.sampleIndexes[0].pts-b.f[17](e+8),e+72,S.i0)>=R.V)&&H(r,e)}return 0}async function Y(t,e){let r=0;if((0,C.Up)(e),t.interval.packetBuffer.length){const r=t.interval.packetBuffer.shift();return(0,C.rN)(e,r),(0,C.Qe)(r),q(t,e)}return r=await t.iformat.readAVPacket(t,e),0!==r?((0,C.Up)(e),r):q(t,e)}async function K(t,e,r,i){var s;let a=e>-1?c()(s=t.streams).call(s,(t=>t.index===e)):null;if(a||(a=t.getStreamByMediaType(0),a||(a=t.getStreamByMediaType(1)),a||(a=t.getStreamByMediaType(3))),!a)return D.z3(`not found any stream to seek, streamIndex: ${a.index}`,z,774),BigInt(E.LR);D.Yz(`seek in ${0===a.codecpar.codecType?"video":"audio"} stream, streamIndex: ${a.index}, timestamp: ${r}, flags: ${i}`,z,778),r=(0,M.k)(r,S.i0,a.timeBase);const o=await t.iformat.seek(t,a,r,i);if(o>=BigInt(0)){var l,u;I.__(t.interval.packetBuffer,(e=>{if(2&d()(t.ioReader)){const i=(0,C.rU)(e,1),s=t.streams[b.f[15](e+32)];var r;!s.sideData[1]&&i&&(s.sideData[1]=n()(r=(0,F.s3)(b.f[20](i),b.f[25](i+4))).call(r))}(0,C.Qe)(e)})),t.interval.packetBuffer.length=0;const e={};v()(l=t.streams).call(l,(t=>{const r=t.privateData2;null!=r&&r.dtsQueue&&(r.dtsQueue.length=0,r.delay&&(e[t.index]=r.delay,r.delay=V))}));const r=[];for(;y()(p=t.streams).call(p,(t=>{const e=t.privateData2;return e&&e.dtsQueue&&e.dtsQueue.length<e.delay}));){var p;const e=(0,C._5)();if(await Y(t,e)){(0,C.Qe)(e);break}r.push(e)}return v()(u=t.streams).call(u,(t=>{const i=t.privateData2;if(null!=i&&i.delay){i.delay=e[t.index],i.dtsQueue=(0,N.A)(i.delay,i.dtsQueue);for(let e=0;e<r.length;e++)if(t.index===b.f[15](r[e]+32)){var s;x.M[17](r[e]+16,i.dtsQueue.shift());const a=c()(s=t.sampleIndexes).call(s,(t=>t.pts===b.f[17](r[e]+8)));a&&(a.dts=b.f[17](r[e]+16))}}})),t.interval.packetBuffer=h()(r).call(r,t.interval.packetBuffer),BigInt(0)}return o}},548:(t,e,r)=>{"use strict";r.d(e,{Ay:()=>j,L_:()=>O,eG:()=>$,yl:()=>F});var i=r(50697),s=r.n(i),a=r(17201),n=r.n(a),o=r(78010),c=r.n(o),l=r(86226),h=r.n(l),u=r(48079),d=r.n(u),p=r(71426),f=r.n(p),m=r(61499),v=r(63939),g=r(36981),y=r(29170),A=r(9599),b=r(44315),x=r(95335),w=r(62751),k=r(67672),T=r(44328),_=r(77231),I=r(20525),S=r(62100),P=r(95832),M=r(62815),C=r(67659),R=r(21477),E=r(82014),D=r(64093),B=r(24310);function L(t){t<0&&(t=BigInt(0));const e=Number(BigInt.asIntN(32,t%BigInt(1e3))),r=Number(BigInt.asIntN(32,t/BigInt(1e3)%BigInt(60))),i=Number(BigInt.asIntN(32,t/BigInt(1e3)/BigInt(60)%BigInt(60))),s=Number(BigInt.asIntN(32,t/BigInt(1e3)/BigInt(3600)));return I.GP("%02d:%02d:%02d.%03d",s,i,r,e)}function U(t){return t<BigInt(1e4)?(0,S.A)(Number(BigInt.asIntN(32,t)))+" bps/s":Number(BigInt.asIntN(32,t/BigInt(1e3)))+" kbps/s"}function F(t,e,r="unknown"){let i=r;return x.__(t,((t,r)=>{if(e===t)return i=r,!1})),i}function $(t,e){return 1===t?F(w.n1,e):0===t?F(w._R,e):3===t?F(w.Xp,e):"unknown"}function O(t){return F(w.iW,t)}function N(t,e){switch(t){case 86018:return P.uF[e]||"LC";case 86017:return D.He[e]||"Layer3";case 27:return M.tZ[e]||"High";case 173:return C.dT[e]||"Main";case 225:return R.zk[e]||"Main";case 167:return E.wN[e]||"Profile0"}}function z(t){let e="";return t&&(e=" ",1&t&&(e+=`(${F(w.Ki,1)}) `),2&t&&(e+=`(${F(w.Ki,2)}) `),4&t&&(e+=`(${F(w.Ki,4)}) `),8&t&&(e+=`(${F(w.Ki,8)}) `),16&t&&(e+=`(${F(w.Ki,16)}) `),32&t&&(e+=`(${F(w.Ki,32)}) `),64&t&&(e+=`(${F(w.Ki,64)}) `),128&t&&(e+=`(${F(w.Ki,128)}) `),256&t&&(e+=`(${F(w.Ki,256)}) `),512&t&&(e+=`(${F(w.Ki,512)}) `),1024&t&&(e+=`(${F(w.Ki,1024)}) `),2048&t&&(e+=`(${F(w.Ki,2048)}) `),65536&t&&(e+=`(${F(w.Ki,65536)}) `),131072&t&&(e+=`(${F(w.Ki,131072)}) `),262144&t&&(e+=`(${F(w.Ki,262144)}) `),524288&t&&(e+=`(${F(w.Ki,524288)}) `),1048576&t&&(e+=`(${F(w.Ki,1048576)}) `),8192&t&&(e+=`(${F(w.Ki,8192)}) `)),e}function V(t,e){const r=N(v.f[15](t.codecpar+4),v.f[15](t.codecpar+48)),i=F(w._R,v.f[15](t.codecpar+4));if(e.push(`${i}${r?` (${r})`:""}`),v.f[15](t.codecpar+28)!==_.N_){const r=F(w.qO,v.f[15](t.codecpar+28),`unknown(${v.f[15](t.codecpar+28)})`),i=F(w.mX,v.f[15](t.codecpar+84),"tv"),s=F(w._m,v.f[15](t.codecpar+96)),a=F(w.Eh,v.f[15](t.codecpar+88)),n=F(w.d8,v.f[15](t.codecpar+92)),o=(0,B.A)(t.codecpar);s===a&&a===n?e.push(`${r}(${i}, ${s}, ${o?"HDR":"SDR"})`):e.push(`${r}(${i}, ${s}/${a}/${n}, ${o?"HDR":"SDR"})`);const c={num:v.f[15](t.codecpar+56)*v.f[15](t.codecpar+64),den:v.f[15](t.codecpar+60)*v.f[15](t.codecpar+68)};(0,T.iU)(c),e.push(`${v.f[15](t.codecpar+56)}x${v.f[15](t.codecpar+60)} [SAR: ${v.f[15](t.codecpar+64)}:${v.f[15](t.codecpar+68)} DAR ${c.num}:${c.den}]`)}}function G(t,e){const r=N(v.f[15](t.codecpar+4),v.f[15](t.codecpar+48)),i=F(w.n1,v.f[15](t.codecpar+4));e.push(`${i}${r?` (${r})`:""}`),e.push(`${v.f[15](t.codecpar+136)} Hz`);let s=`${v.f[15](t.codecpar+116)} channels`;if(1===v.f[15](t.codecpar+112)){const e=F(w.IY,Number((0,y.A)(t.codecpar+120,g.r,"u").mask),"");e&&(s=e)}e.push(s),e.push(F(w.Sz,v.f[15](t.codecpar+28)))}function W(t,e,r){const i=F(w.Mb,v.f[15](t.codecpar)),a=[];if(1===v.f[15](t.codecpar))G(t,a),v.f[17](t.codecpar+32)>BigInt(0)&&t.nbFrames!==BigInt(1)&&a.push(`${U(v.f[17](t.codecpar+32))}`);else if(0===v.f[15](t.codecpar))V(t,a),v.f[17](t.codecpar+32)>BigInt(0)&&t.nbFrames!==BigInt(1)&&a.push(`${U(v.f[17](t.codecpar+32))}`),(0,T.lb)((0,y.A)(t.codecpar+72,A.P))>0&&(a.push(`${(0,T.lb)((0,y.A)(t.codecpar+72,A.P)).toFixed(2)} fps`),a.push(`${(0,T.lb)((0,y.A)(t.codecpar+72,A.P)).toFixed(2)} tbr`)),a.push(`${o=BigInt(Math.floor((0,T.lb)({num:t.timeBase.den,den:t.timeBase.num}))),o<BigInt(1e4)?(0,S.A)(Number(BigInt.asIntN(32,o))):Number(BigInt.asIntN(32,o/BigInt(1e3)))+"k"} tbn`);else if(3===v.f[15](t.codecpar)){const e=F(w.Xp,v.f[15](t.codecpar+4));a.push(e),v.f[17](t.codecpar+32)>BigInt(0)&&a.push(`${U(v.f[17](t.codecpar+32))}`)}else{const e=F(w.Ld,v.f[15](t.codecpar+4));a.push(e),v.f[17](t.codecpar+32)>BigInt(0)&&a.push(`${U(v.f[17](t.codecpar+32))}`)}var o;let l=`${r}Stream #${e}:${t.index}[0x${I.GP("%02x",t.id)}] ${i}: ${a.join(", ")}${z(t.disposition)}\n`;return s()(t.metadata).length&&(l+=`${r}  Metadata:\n`,x.__(t.metadata,((e,i)=>{k.Ik(e)||k.YO(e)||k.sv(e)||ArrayBuffer.isView(e)?"matrix"===i&&0===v.f[15](t.codecpar)&&(l+=`${r}    ${i}: [${e.toString()}]\n`):(k.Yj(e)&&(e=n()(e).call(e,"\n","\n"+c()(" ").call(" ",6+i.length))),l+=`${r}    ${i}: ${e}\n`)}))),l}function j(t,e){let r="";return h()(t).call(t,((t,i)=>{if(t instanceof b.oD){const e=[],r=[];for(let r=0;r<t.streams.length;r++){const i=t.streams[r];e.push({index:i.index,id:i.id,codecpar:i.codecpar[m.o9],nbFrames:i.nbFrames,metadata:i.metadata,duration:i.duration,startTime:i.startTime,disposition:i.disposition,timeBase:i.timeBase,attachedPic:i.attachedPic})}for(let i=0;i<t.streamGroups.length;i++){var a;const s=t.streamGroups[i];r.push({index:s.index,id:s.id,type:s.type,params:s.params,metadata:s.metadata,disposition:s.disposition,streams:d()(a=s.streams).call(a,(t=>f()(e).call(e,(e=>e.id===t.id))))})}t={metadata:t.metadata,format:t.format,chapters:t.chapters,streams:e,streamGroups:r}}r+=function(t,e,r){var i,a,o,l;let u=`${r.tag} #${e}, ${r.isLive?"live":"vod"}, ${F(w.iW,t.format)}, from '${r.from}':\n`;s()(t.metadata).length&&(u+="  Metadata:\n",x.__(t.metadata,((t,e)=>{k.Ik(t)||k.YO(t)||k.sv(t)||ArrayBuffer.isView(t)||(k.Yj(t)&&(t=n()(t).call(t,"\n","\n"+c()(" ").call(" ",6+e.length))),u+=`    ${e}: ${t}\n`)})));let d=_.Dh,p=BigInt(0),f=_.Dh;var m;h()(i=t.streams).call(i,(t=>{const e=t.duration!==_.Dh?(0,T.k)(t.duration,t.timeBase,_.i0):_.Dh,r=t.startTime!==_.Dh?(0,T.k)(t.startTime,t.timeBase,_.i0):_.Dh;e>d&&(d=e),(r!==_.Dh&&r<f||f===_.Dh)&&(f=r),p+=v.f[17](t.codecpar+32)})),u+=`  Duration: ${d!==_.Dh?L(d):"N/A"}, start: ${f!==_.Dh?L(f):"N/A"}, bitrate: ${p?U(p):"N/A"}\n`,null!==(a=t.chapters)&&void 0!==a&&a.length&&(u+="  Chapters:\n",h()(m=t.chapters).call(m,((t,r)=>{u+=function(t,e,r,i){let a="N/A",o="N/A";t.start!==_.Dh&&(a=L((0,T.k)(t.start,t.timeBase,_.i0))),t.end!==_.Dh&&(o=L((0,T.k)(t.end,t.timeBase,_.i0)));let l=`${i}Chapter #${e}:${r} start: ${a}, end: ${o}\n`;return s()(t.metadata).length&&(l+=`${i}  Metadata:\n`,x.__(t.metadata,((t,e)=>{k.Ik(t)||k.YO(t)||k.sv(t)||ArrayBuffer.isView(t)||(k.Yj(t)&&(t=n()(t).call(t,"\n","\n"+c()(" ").call(" ",6+e.length))),l+=`${i}    ${e}: ${t}\n`)}))),l}(t,e,r,"    ")})));const g={};return h()(o=t.streamGroups).call(o,(t=>{u+=function(t,e,r,i){const s=F(w.u6,t.type),a=[];if(3===t.type){const e=t.streams[0];e&&(1===v.f[15](e.codecpar)?G(e,a):0===v.f[15](e.codecpar)&&(V(e,a),a.push(`${t.params.width}x${t.params.height}`)))}let n=`  Stream Group #${e}:${t.index} ${s}: ${a.join(", ")}${z(t.disposition)}\n`;var o;return t.streams.length&&h()(o=t.streams).call(o,(t=>{n+=W(t,e,"    "),i[t.id]=!0})),n}(t,e,0,g)})),h()(l=t.streams).call(l,(t=>{g[t.id]||(u+=W(t,e,"  "))})),u}(t,i,e[i])})),r}},31425:(t,e,r)=>{"use strict";r.d(e,{$:()=>n});var i=r(77231),s=r(72739),a=r(44328);function n(t){let e=!0;return s.__(t.streams,(t=>{switch(t.codecpar.codecType){case 1:t.codecpar.chLayout.nbChannels!==i.N_&&t.codecpar.sampleRate!==i.N_&&t.codecpar.frameSize!==i.N_&&t.codecpar.bitrate!==BigInt(0)||(e=!1);break;case 0:0!==(0,a.lb)(t.codecpar.framerate)&&t.codecpar.width!==i.N_&&t.codecpar.height!==i.N_&&t.codecpar.bitrate!==BigInt(0)||(e=!1),27!==t.codecpar.codecId&&173!==t.codecpar.codecId&&196!==t.codecpar.codecId&&12!==t.codecpar.codecId||t.codecpar.profile!==i.N_&&t.codecpar.level!==i.N_||(e=!1)}})),e}},61619:(t,e,r)=>{"use strict";r.d(e,{A:()=>s});var i=r(67672);function s(t,e=4){let r="";for(let s=0;s<e;s++)i.ai(t)?(r=String.fromCharCode(255&t)+r,t>>>=8):(r=String.fromCharCode(Number(t&BigInt(255)))+r,t>>=BigInt(8));return r}},55680:(t,e,r)=>{"use strict";r.d(e,{A:()=>c});var i=r(129),s=r.n(i),a=r(18979),n=r.n(a),o=r(72739);function c(t){var e;if(t.length<2)return 0;const r=s()(e=n()(t).call(t)).call(e,((t,e)=>t>e?1:-1));let i=0,a=0,c=[];for(let e=0;e<t.length;e++){for(o._(c,t[e],(r=>r<t[e]?1:-1));c.length&&c[0]===r[a];)c.shift(),a++;i=Math.max(i,c.length)}return i}},89478:(t,e,r)=>{"use strict";r.d(e,{A:()=>u});var i=r(129),s=r.n(i),a=r(18979),n=r.n(a),o=r(57855),c=r.n(o),l=r(11393),h=r.n(l);function u(t,e){var r,i;if(e.length<t)return s()(i=n()(e).call(e)).call(i,((t,e)=>t>e?1:-1));const a=[],o=s()(r=n()(e).call(e)).call(r,((t,e)=>t>e?1:-1));if(t){const e=o[o.length-1]-o[o.length-2];for(let r=t;r>0;r--)a.push((a.length?a[a.length-1]:BigInt(0))+(r>=o.length?e:o[r]-o[r-1]));c()(a).call(a)}const l=[];for(let e=0;e<t;e++)l.push(o[0]-a[e]);return h()(l).call(l,o)}},31633:(t,e,r)=>{"use strict";r.d(e,{A:()=>n});var i=r(44328);const s=399;function a(t){return t<360?1001*(t+1):(t-=360)<30?1001*(t+31)*12:(t-=30)<3?1001*[80,120,240][t]*12:1e3*[24,30,60,12,15,48][t-=3]*12}function n(t){let e=0,r=.01;for(let n=0;n<s;n++){const s=Math.abs((0,i.lb)(t)/(0,i.lb)({num:a(n),den:12012})-1);s<r&&(r=s,e=a(n))}if(e){const r={num:e,den:12012};(0,i.iU)(r),t.num=r.num,t.den=r.den}}},49847:(t,e,r)=>{"use strict";r.d(e,{A:()=>i});class i{constructor(){}get ext(){throw new Error("need implemented ext getter")}get flags(){return 0}get name(){return"CustomIOLoader."+Math.random()}get minBuffer(){return 4}write(t){throw new Error("need implemented write function")}}},77580:(t,e,r)=>{"use strict";r.d(e,{A:()=>g});var i=r(49859),s=r(64007),a=r.n(s),n=r(36586),o=r.n(n),c=r(61240),l=r.n(c),h=r(13724),u=r(82800),d=r(95335),p=r(4624),f=r(9705),m=r(86932);const v="src/avnetwork/ioLoader/FetchIOLoader.ts";class g extends u.A{constructor(t={}){super(t),(0,i.A)(this,"contentLength",void 0),(0,i.A)(this,"receivedLength",void 0),(0,i.A)(this,"info",void 0),(0,i.A)(this,"range",void 0),(0,i.A)(this,"startBytes",void 0),(0,i.A)(this,"endBytes",void 0),(0,i.A)(this,"eofIndex",void 0),(0,i.A)(this,"abortController",void 0),(0,i.A)(this,"reader",void 0),(0,i.A)(this,"buffers",void 0),(0,i.A)(this,"supportRange",void 0),(0,i.A)(this,"abortSleep_",void 0),(0,i.A)(this,"aborted",void 0),(0,i.A)(this,"bandwidth",void 0),(0,i.A)(this,"delay",void 0)}async getTotalSize(t,e={}){var r,i,s;const n={method:t,headers:{},mode:"cors",cache:"default",referrerPolicy:"no-referrer-when-downgrade"};null!==(r=this.info.httpOptions)&&void 0!==r&&r.headers&&d.__(this.info.httpOptions.headers,((t,e)=>{n.headers[e]=t})),d.__(e,((t,e)=>{n.headers[e]=t})),null!==(i=this.info.httpOptions)&&void 0!==i&&i.credentials&&(n.credentials=this.info.httpOptions.credentials),null!==(s=this.info.httpOptions)&&void 0!==s&&s.referrerPolicy&&(n.referrerPolicy=this.info.httpOptions.referrerPolicy),"function"==typeof AbortController&&(this.abortController=new AbortController,n.signal=this.abortController.signal);try{const t=await fetch(this.info.url,n);if(t.ok&&t.status>=200&&t.status<=299){this.abortController&&(this.abortController.abort(),this.abortController=null);const e=t.headers.get("Accept-Ranges");e&&-1===a()(e).call(e,"bytes")&&(this.supportRange=!1);const r=t.headers.get("Content-Range");if(r){const t=r.split("/")[1];if(t)return o()(t)}const i=t.headers.get("X-Content-Length")||t.headers.get("Content-Length");if(null!=i)return o()(i)}}catch(t){}return 0}async open(t,e={from:0,to:-1}){var r;if(this.info=t,this.range=e,this.range.to||(this.range.to=-1),this.range.from=Math.max(this.range.from,0),this.startBytes=0,this.endBytes=-1,this.eofIndex=-1,this.receivedLength=0,this.buffers=[],this.supportRange=!0,this.aborted=!1,this.bandwidth=0,this.range.to>0&&(this.eofIndex=e.to),this.range&&!this.options.isLive&&(this.startBytes=null!==(r=this.range.from)&&void 0!==r?r:0),this.status=1,!this.options.isLive&&!this.options.disableSegment){let t=await this.getTotalSize("HEAD");t||(t=await this.getTotalSize("Get",{range:"bytes=0-1"})),t<=2&&(t=0),t?(this.contentLength=t,this.range.to<0&&(this.eofIndex=this.contentLength+this.range.to),this.supportRange&&(this.endBytes=Math.min(this.startBytes+this.options.preload-1,this.eofIndex))):this.endBytes=-1}return this.status=2,0}getBandwidthReader(t,e){const r=[];let i,s=!1,a=0;const n=this;return new ReadableStream({async start(o){for(;;){const{value:o,done:c}=await t.read();if(c){s=!0;const t=((0,m.A)()-e)/1e3;n.bandwidth=8*a/t,i&&(i(),i=null);break}r.push(o),a+=o.length,i&&(i(),i=null)}},async pull(t){for(;;){if(r.length)return void t.enqueue(r.shift());if(s&&!r.length)return void t.close();await new(l())((t=>{i=t}))}}}).getReader()}async openReader(){var t,e,r;const i={method:"GET",headers:{},mode:"cors",cache:"default",referrerPolicy:"no-referrer-when-downgrade"};null!==(t=this.info.httpOptions)&&void 0!==t&&t.headers&&d.__(this.info.httpOptions.headers,((t,e)=>{i.headers[e]=t})),this.options.isLive||this.options.disableSegment||(i.headers.range=`bytes=${this.startBytes}-${this.endBytes>0?this.endBytes:""}`),null!==(e=this.info.httpOptions)&&void 0!==e&&e.credentials&&(i.credentials=this.info.httpOptions.credentials),null!==(r=this.info.httpOptions)&&void 0!==r&&r.referrerPolicy&&(i.referrerPolicy=this.info.httpOptions.referrerPolicy),this.abortController&&this.abortController.abort(),"function"==typeof AbortController&&(this.abortController=new AbortController,i.signal=this.abortController.signal);try{const t=(0,m.A)(),e=await fetch(this.info.url,i),r=(0,m.A)();this.delay=r-t,e.ok&&e.status>=200&&e.status<=299?this.reader=this.options.enableBandwidthReader?this.getBandwidthReader(e.body.getReader(),r):e.body.getReader():(this.status=3,p.h2(`FetchStreamLoader: Http code invalid, ${e.status} ${e.statusText}`,v,299))}catch(t){if(this.retryCount<this.options.retryCount&&(!this.options.isLive||!this.receivedLength)){if(this.retryCount++,this.status=1,this.abortSleep_=new h.A(this.options.retryInterval),await this.abortSleep_,this.abortSleep_=null,this.aborted)return;return this.openReader()}p.h2(`FetchStreamLoader: exception ${t.message}`,v,316)}}async readInterval(t,e=0){let r=0;for(;this.buffers.length&&r<t.length;){const e=this.buffers.shift();e.length>t.length-r?(t.set(e.subarray(0,t.length-r),r),this.buffers.unshift(e.subarray(t.length-r)),r=t.length):(t.set(e,r),r+=e.length)}if(r>=t.length)return t.length+e;if(4===this.status)return r>0?r+e:e>0?e:-1048576;if(!this.reader&&(await this.openReader(),this.aborted))return-1048576;const{value:i,done:s}=await this.reader.read();return s?void 0!==this.contentLength&&this.receivedLength+this.range.from<this.endBytes+1?(this.status=3,void p.h2("Fetch stream meet Early-EOF",v,358)):this.options.isLive||this.options.disableSegment||this.receivedLength+this.range.from>=this.eofIndex?(this.status=4,this.startBytes=0,r>0?r+e:e>0?e:-1048576):(await this.reader.cancel(),this.abortController&&(this.abortController.abort(),this.abortController=null),this.reader=null,this.startBytes=this.endBytes+1,this.endBytes=Math.min(this.startBytes+this.options.preload-1,this.eofIndex),this.readInterval(t.subarray(r,void 0,!0),r)):(this.receivedLength+=i.length,i.length>t.length-r?(t.set(i.subarray(0,t.length-r),r),this.buffers.push(i.subarray(t.length-r)),t.length+e):(t.set(i,r),r+=i.length,r+e))}async read(t){return this.readInterval(t)}async seek(t){return this.supportRange?this.eofIndex>0&&Number(t)>this.eofIndex?f.nr:(await this.abort(),this.aborted=!1,this.receivedLength=Number(t)-this.range.from,this.startBytes=Number(t),this.options.disableSegment||(this.endBytes=Math.min(this.startBytes+this.options.preload,this.eofIndex)),this.buffers.length=0,4===this.status&&(this.status=2),0):f.NU}async size(){return this.options.isLive?BigInt(0):BigInt(Math.floor(this.contentLength||0))}abortSleep(){this.aborted=!0,this.abortSleep_&&(this.abortSleep_.stop(),this.abortSleep_=null)}async abort(){this.abortSleep(),this.reader&&(await this.reader.cancel(),this.abortController&&(this.abortController.abort(),this.abortController=null),this.reader=null)}async stop(){this.status=0,await this.abort()}getUrl(){var t;return null===(t=this.info)||void 0===t?void 0:t.url}}},79686:(t,e,r)=>{"use strict";r.d(e,{A:()=>u});var i=r(49859),s=r(18979),a=r.n(s),n=r(61240),o=r.n(n),c=r(82800);const l=r(67672).Pc(Blob.prototype.arrayBuffer),h="function"==typeof FileReaderSync;class u extends c.A{constructor(...t){super(...t),(0,i.A)(this,"info",void 0),(0,i.A)(this,"range",void 0),(0,i.A)(this,"readPos",void 0),(0,i.A)(this,"endPos",void 0),(0,i.A)(this,"reader",void 0),(0,i.A)(this,"readerResolve",void 0)}async open(t,e={from:0,to:-1}){return this.info=t,this.range=e,this.readPos=0,this.endPos=this.info.file.size,e.from>0&&(this.readPos=e.from),e.to>0&&(this.endPos=e.to),this.status=2,0}readBufferByReaderSync(t){var e;return this.reader||(this.reader=new FileReaderSync),this.reader.readAsArrayBuffer(a()(e=this.info.file).call(e,this.readPos,this.readPos+t))}async readBufferByReader(t){return this.reader||(this.reader=new FileReader,this.reader.onloadend=t=>{this.readerResolve&&this.readerResolve(t.target.result)}),new(o())((e=>{var r;this.readerResolve=e,this.reader.readAsArrayBuffer(a()(r=this.info.file).call(r,this.readPos,this.readPos+t))}))}async read(t){if(this.readPos>=this.endPos)return this.status=4,-1048576;const e=Math.min(t.length,this.endPos-this.readPos);if(h)t.set(new Uint8Array(this.readBufferByReaderSync(e)),0);else if(l){var r;t.set(new Uint8Array(await a()(r=this.info.file).call(r,this.readPos,this.readPos+e).arrayBuffer()),0)}else t.set(new Uint8Array(await this.readBufferByReader(e)),0);return this.readPos+=e,this.readPos>=this.endPos&&(this.status=4),e}async seek(t){return this.readPos=Number(t),4===this.status&&(this.status=2),0}async size(){return BigInt(Math.floor(this.info.file.size))}async stop(){this.status=0}}},82800:(t,e,r)=>{"use strict";r.d(e,{A:()=>n});var i=r(49859),s=r(95335);const a={isLive:!1,preload:5242880,retryCount:20,retryInterval:1};class n{constructor(t={}){(0,i.A)(this,"options",void 0),(0,i.A)(this,"status",void 0),(0,i.A)(this,"retryCount",void 0),(0,i.A)(this,"retryTimeout",void 0),this.options=t,this.status=0,this.retryCount=0,this.options=s.X$({},a),s.X$(this.options,t)}write(t){throw new Error("need implemented write function")}}},36773:(t,e,r)=>{"use strict";r.d(e,{A:()=>o});var i=r(49859),s=r(61240),a=r.n(s),n=r(82800);class o extends n.A{constructor(t={}){super(t),(0,i.A)(this,"readQueue",void 0),(0,i.A)(this,"consume",void 0),this.readQueue=[]}async readInterval(t,e=0){let r=0;for(;this.readQueue.length&&r<t.length;){const e=this.readQueue.shift();e.length>t.length-r?(t.set(e.subarray(0,t.length-r),r),this.readQueue.unshift(e.subarray(t.length-r)),r=t.length):(t.set(e,r),r+=e.length)}return r>0||e?r+e:4===this.status||0===this.status?r>0?r+e:e>0?e:-1048576:3===this.status?r>0?r+e:e>0?e:-1048573:(await new(a())((t=>{this.consume=t})),this.consume=null,this.readInterval(t,e))}async read(t){return this.readInterval(t)}async write(t){return this.send(t)}}},14619:(t,e,r)=>{"use strict";r.d(e,{A:()=>l});var i=r(49859),s=r(18979),a=r.n(s),n=r(61240),o=r.n(n),c=r(36773);class l extends c.A{constructor(...t){super(...t),(0,i.A)(this,"info",void 0),(0,i.A)(this,"socket",void 0)}async send(t){return this.socket?(this.socket.send(a()(t).call(t)),0):-1048574}open(t){return this.info=t,this.status=1,new(o())((e=>{var r;this.socket=new WebSocket(t.url,null===(r=t.websocketOptions)||void 0===r?void 0:r.protocols),this.socket.binaryType="arraybuffer",this.socket.onopen=()=>{this.status=2,e(0)},this.socket.onerror=()=>{this.status=3,e(-1048573),this.consume&&this.consume()},this.socket.onclose=()=>{this.status=4,e(-1048576),this.consume&&this.consume()},this.socket.onmessage=t=>{let e=t.data;this.readQueue.push(new Uint8Array(e)),this.consume&&this.consume()}}))}seek(t,e){throw new Error("Method not implemented.")}size(){throw new Error("Method not implemented.")}async stop(){this.socket&&(this.socket.close(),this.socket=null),this.status=4,this.consume&&this.consume()}}},42383:(t,e,r)=>{"use strict";r.d(e,{A:()=>l});var i=r(49859),s=r(18979),a=r.n(s),n=r(61240),o=r.n(n),c=r(36773);class l extends c.A{constructor(...t){super(...t),(0,i.A)(this,"info",void 0),(0,i.A)(this,"transport",void 0),(0,i.A)(this,"datagramReader",void 0),(0,i.A)(this,"reader",void 0),(0,i.A)(this,"datagramWriter",void 0),(0,i.A)(this,"writer",void 0),(0,i.A)(this,"stream",void 0),(0,i.A)(this,"readPacketQueue",void 0),(0,i.A)(this,"consumePacket",void 0)}async send(t){return this.writer?(this.writer.write(a()(t).call(t)),0):-1048574}async handleRead(){let t=!1;for(;;)try{const{value:e,done:r}=await this.reader.read();if(r){t=r,this.status=4,this.consume&&this.consume();break}this.readQueue.push(e)}catch(e){t||(this.status=3,this.consume&&this.consume());break}}async readDatagram(){let t=!1;for(;;)try{const{value:e,done:r}=await this.datagramReader.read();if(r){t=!0,this.status=4,this.consumePacket&&this.consumePacket();break}this.readPacketQueue.push(e)}catch(e){t||(this.status=3,this.consumePacket&&this.consumePacket());break}}async open(t){return this.info=t,this.transport=new WebTransport(t.url,t.webtransportOptions),this.readPacketQueue=[],this.status=1,await this.transport.ready,this.transport.closed.then((()=>{this.transport?this.status=3:this.status=4})),this.status=2,this.stream=await this.transport.createBidirectionalStream(),this.reader=this.stream.readable.getReader(),this.writer=this.stream.writable.getWriter(),this.datagramReader=this.transport.datagrams.readable.getReader(),this.datagramWriter=this.transport.datagrams.writable.getWriter(),this.handleRead(),this.readDatagram(),0}async readPacket(t){for(;;){if(this.readPacketQueue.length){const e=this.readPacketQueue.shift();return t.set(e,0),e.length}if(4===this.status||0===this.status)return-1048576;if(3===this.status)return-1048573;await new(o())((t=>{this.consumePacket=t})),this.consumePacket=null}}async writePacket(t){return this.datagramWriter?(this.datagramWriter.write(a()(t).call(t)),0):-1048574}seek(t,e){throw new Error("Method not implemented.")}size(){throw new Error("Method not implemented.")}async stop(){this.transport&&(this.transport.close(),this.transport=null),this.status=4,this.consume&&this.consume()}}},18667:(t,e,r)=>{"use strict";r.d(e,{A:()=>M});var i=r(61240),s=r.n(i),a=r(86226),n=r.n(a),o=r(63939),c=r(50932),l=r(12264),h=r(29170),u=r(44527),d=r(9705),p=r(84149),f=r(75742),m=r(4624),v=r(16041),g=(r(77162),r(77104)),y=r(84290),A=r(72739),b=r(86932),x=r(36204),w=r(94561),k=r(72703),T=r(71762),_=r(37837),I=r(71766),S=r(67672);const P="src/avpipeline/AudioDecodePipeline.ts";class M extends u.A{constructor(){super()}createWebcodecDecoder(t){return new g.A({onError:e=>{m.z3(`audio decode error, taskId: ${t.taskId}, error: ${e}`,P,94)},onReceiveAudioData(e){const r=(0,x.t)(e,t.avframePool.alloc());t.frameCaches.push(r),c.M[17](t.stats+56,o.f[17](t.stats+56)+BigInt(1)),c.M[15](t.stats+248,Math.max((0,b.A)()-t.lastDecodeTimestamp,o.f[15](t.stats+248))),e.close()}})}createWasmcodecDecoder(t,e){return new f.A({resource:e,onReceiveAVFrame(e){t.frameCaches.push(e),c.M[17](t.stats+56,o.f[17](t.stats+56)+BigInt(1)),c.M[15](t.stats+248,Math.max((0,b.A)()-t.lastDecodeTimestamp,o.f[15](t.stats+248)))},avframePool:t.avframePool})}async pullAVPacketInternal(t,e){const r=await e.request("pull");if(S.ai(r)||(0,k.A)(r))return r;{const e=t.avpacketPool.alloc();return(0,T.r0)(r,e),e}}async createTask(t){const e=new p.Ay(t.leftPort),r=new p.Ay(t.rightPort),i=[],s=new v.A((0,h.A)(t.avframeList,l.A),t.avframeListMutex),a={...t,resource:await(0,w.A)(t.resource),frameCaches:i,inputEnd:!1,decoder:null,parameters:0,lastDecodeTimestamp:0,avframePool:s,avpacketPool:new y.A((0,h.A)(t.avpacketList,l.A),t.avpacketListMutex)};return a.resource?a.decoder=this.createWasmcodecDecoder(a,a.resource):a.decoder=this.createWebcodecDecoder(a),this.tasks.set(t.taskId,a),r.on(p.S3,(async s=>{switch(s.method){case"pull":if(i.length){const t=i.shift();r.reply(s,t);break}if(!a.inputEnd){for(;;){if(i.length){const t=i.shift();r.reply(s,t);break}a.pending&&await a.pending,a.lastDecodeTimestamp=(0,b.A)();const n=await this.pullAVPacketInternal(a,e);if(-1048576===n){if(await a.decoder.flush(),a.inputEnd=!0,i.length){const t=i.shift();r.reply(s,t);break}m.pq(`audio decoder ended, taskId: ${a.taskId}`,P,201),r.reply(s,-1048576);break}if(!(n>0)){m.z3(`audio decode pull avpacket error, taskId: ${t.taskId}, ret: ${n}`,P,219),r.reply(s,n);break}{const e=a.decoder.decode(n);a.avpacketPool.release(n),e<0&&(c.M[15](a.stats+48,o.f[15](a.stats+48)+1),m.z3(`audio decode error, taskId: ${t.taskId}, ret: ${e}`,P,214))}}break}r.reply(s,-1048576)}})),0}async open(t,e,r={}){const i=this.tasks.get(t);if(i){i.wasmDecoderOptions=r;const t=(0,_.Gy)(168);return(0,k.A)(e)?(0,I.Yi)(t,e):(0,T.T8)(e,t),i.parameters&&(0,I.dn)(i.parameters),i.parameters=t,new(s())((async(e,r)=>{const s=await i.decoder.open(t,i.wasmDecoderOptions);if(s)return m.z3(`open audio decoder failed, error: ${s}`,P,253),void e(d.r8);e(0)}))}m.h2("task not found",P,260)}async beforeReopenDecoder(t){const e=this.tasks.get(t);e?e.pending=new(s())((t=>{e.pendingResolve=t})):m.h2("task not found",P,271)}async reopenDecoder(t,e,r,i){const a=this.tasks.get(t);if(a){i&&(a.wasmDecoderOptions=i);const t=(0,_.Gy)(168);let n;return(0,k.A)(e)?(0,I.Yi)(t,e):(0,T.T8)(e,t),a.parameters&&(0,I.dn)(a.parameters),a.parameters=t,r?(r=await(0,w.A)(r),n=this.createWasmcodecDecoder(a,r)):n=this.createWebcodecDecoder(a),new(s())((async(e,i)=>{const s=await n.open(t);if(s)return m.z3(`reopen audio decoder failed, error: ${s}`,P,308),void e(d.r8);r&&(a.resource=r),a.decoder.close(),a.decoder=n,m.Yz(`reopen audio decoder, taskId: ${a.taskId}`,P,318),e(0),a.pendingResolve&&(a.pendingResolve(),a.pending=null)}))}m.h2("task not found",P,326)}async resetTask(t){const e=this.tasks.get(t);e&&(e.decoder&&await e.decoder.flush(),A.__(e.frameCaches,(t=>{e.avframePool.release(t)})),e.frameCaches.length=0,e.inputEnd=!1,e.lastDecodeTimestamp=(0,b.A)(),m.pq(`reset audio decoder, taskId: ${e.taskId}`,P,342))}async registerTask(t){return this.tasks.has(t.taskId)?d.lh:this.createTask(t)}async unregisterTask(t){const e=this.tasks.get(t);var r;e&&(e.rightPort.close(),e.leftPort.close(),e.decoder.close(),n()(r=e.frameCaches).call(r,(t=>{e.avframePool.release(t)})),e.parameters&&(0,I.dn)(e.parameters),this.tasks.delete(t),m.Yz(`unregisterTask task, taskId: ${t}`,P,366))}}},59377:(t,e,r)=>{"use strict";r.d(e,{A:()=>W});var i=r(49859),s=r(74707),a=r.n(s),n=r(61240),o=r.n(n),c=r(18979),l=r.n(c),h=r(15413),u=r.n(h),d=r(56255),p=r.n(d),f=r(61499),m=r(12264),v=r(74503),g=r(73783),y=r(29170),A=r(63939),b=(r(9599),r(50932)),x=r(94300),w=r(10278),k=r(44527),T=r(9705),_=r(84149),I=r(4624),S=r(16041),P=r(92246),M=r(47442),C=r(37837),R=r(70089),E=r(14686),D=r(44328),B=r(77231),L=r(86932),U=r(13724),F=r(43607),$=r(94561),O=r(47222),N=r(39638),z=r(74936);const V="src/avpipeline/AudioRenderPipeline.ts",G=BigInt(400);class W extends k.A{constructor(){super(),(0,i.A)(this,"avPCMBufferPool",void 0),(0,i.A)(this,"avPCMBufferList",void 0),(0,i.A)(this,"avPCMBufferListMutex",void 0),this.avPCMBufferList=(0,v.A)(m.A),this.avPCMBufferListMutex=(0,v.A)(g.eu),this.avPCMBufferPool=new M.A(this.avPCMBufferList,this.avPCMBufferListMutex[f.o9])}async createTask(t){const e=new _.Ay(t.leftPort),r=new _.Ay(t.rightPort),i=new _.Ay(t.controlPort),s={...t,leftIPCPort:e,rightIPCPort:r,controlIPCPort:i,resamplerResource:await(0,$.A)(t.resamplerResource),stretchpitcherResource:await(0,$.A)(t.stretchpitcherResource),resampler:null,stretchpitcher:new(a()),outPCMBuffer:null,waitPCMBuffer:0,waitAVFrame:0,waitPCMBufferPos:0,ended:!1,stretchpitcherEnded:!1,playRate:1,playTempo:1,playPitch:1,useStretchpitcher:!1,lastNotifyPTS:BigInt(0),currentPTS:B.Dh,lastMasterPts:B.Dh,masterTimer:new z.A,firstPlayed:!1,seeking:!1,pausing:!1,stopping:!1,seekSync:null,receivePCMSync:null,paddingAVFrame:0,fakePlayStartTimestamp:0,fakePlaySamples:BigInt(0),fakePlayTimer:null,fakePlayWorkerTimer:null,fakePlay:!1,lastRenderTimestamp:0,avframePool:new S.A((0,y.A)(t.avframeList,m.A),t.avframeListMutex)};for(let e=0;e<t.playChannels;e++){const r=new R.A({resource:s.stretchpitcherResource});s.stretchpitcher.set(e,r),await r.open({sampleRate:t.playSampleRate,channels:1}),r.setTempo(s.playTempo),r.setPitch(s.playPitch),r.setRate(s.playRate)}const n=async()=>{let t;if(s.paddingAVFrame?(t=s.paddingAVFrame,s.paddingAVFrame=0):t=await s.leftIPCPort.request("pull"),-1048576===t){for(let t=0;t<s.playChannels;t++)s.stretchpitcher.get(t).flush();return I.pq(`audio render ended, taskId: ${s.taskId}`,V,218),-1048576}if(t<0)return I.z3(`pull audio frame failed, taskId: ${s.taskId}`,V,222),t;{if(1!==s.playRate||1!==s.playTempo||1!==s.playPitch||s.enableJitterBuffer?s.useStretchpitcher=!0:s.useStretchpitcher=!1,!s.firstPlayed){const e=(0,D.Mr)(A.f[17](t+104),t+120,B.i0);s.firstPlayed=!0,I.Yz(`got first audio frame, pts: ${A.f[17](t+104)}(${e}ms), taskId: ${s.taskId}`,V,244)}const e=(0,D.Mr)(A.f[17](t+104),t+120,B.i0);(e>BigInt(0)&&s.masterTimer.getMasterTime()-e>G||s.isLive&&e-s.currentPTS>BigInt(4e3))&&s.masterTimer.setMasterTime(e),s.currentPTS=e,b.M[17](s.stats+72,A.f[17](s.stats+72)+BigInt(1)),b.M[17](s.stats+344,e),s.lastRenderTimestamp&&b.M[15](s.stats+252,Math.max((0,L.A)()-s.lastRenderTimestamp,A.f[15](s.stats+252))),s.lastRenderTimestamp=(0,L.A)();let r=!0;if(A.f[15](t+152)!==s.playSampleRate||A.f[15](t+80)!==s.playFormat||A.f[15](t+292)!==s.playChannels){if(s.resampler){const e=s.resampler.getInputPCMParameters();e.format===A.f[15](t+80)&&e.sampleRate===A.f[15](t+152)&&e.channels===A.f[15](t+292)||(s.resampler.close(),s.resampler=null)}s.resampler||(s.resampler=new P.A({resource:s.resamplerResource}),await s.resampler.open({sampleRate:A.f[15](t+152),format:A.f[15](t+80),channels:A.f[15](t+292)},{sampleRate:s.playSampleRate,format:s.playFormat,channels:s.playChannels}));let e=this.avPCMBufferPool.alloc(),r=s.resampler.resample(A.f[20](t+64),e,A.f[15](t+76));if(r<0)return I.z3(`resample error, ret: ${r}, taskId: ${s.taskId}`,V,304),this.avPCMBufferPool.release(e),r;if(s.useStretchpitcher){for(let t=0;t<s.playChannels;t++)s.stretchpitcher.get(t).sendSamples(A.f[20](A.f[20](e)+4*t),A.f[15](e+8));this.avPCMBufferPool.release(e)}else s.waitPCMBuffer=e,s.waitPCMBufferPos=0}else if(s.useStretchpitcher)for(let e=0;e<s.playChannels;e++)s.stretchpitcher.get(e).sendSamples(A.f[20](A.f[20](t+64)+4*e),A.f[15](t+76));else{let e=this.avPCMBufferPool.alloc();A.f[20](e)&&((0,C.aI)(A.f[20](e)),(0,C.aI)(e)),b.M[15](e+8,A.f[15](t+76)),b.M[15](e+12,A.f[15](t+76)),b.M[15](e+20,A.f[15](t+152)),b.M[15](e+16,A.f[15](t+292)),b.M[20](e,A.f[20](t+64)),s.waitAVFrame=t,s.waitPCMBuffer=e,s.waitPCMBufferPos=0,r=!1}b.M[15](s.stats+4,A.f[15](t+152)),b.M[15](s.stats,A.f[15](t+292)),b.M[15](s.stats+8,A.f[15](t+76)),r&&s.avframePool.release(t)}return 0},c=async t=>{let e=0;if(s.seeking&&(await new(o())((t=>{s.receivePCMSync=t})),s.stopping))return-1048576;if(s.enableJitterBuffer&&A.f[15](s.stats+32)/A.f[15](s.stats+244)*1e3<=A.f[15](s.stats+280)&&this.setPlayRate(s.taskId,1),s.ended&&s.useStretchpitcher){let r=0;for(let i=0;i<s.playChannels;i++){const a=s.stretchpitcher.get(i);A.f[20](A.f[20](t)+4*i)&&(r=a.receiveSamples(A.f[20](A.f[20](t)+4*i)+4*e,A.f[15](t+12)-e))}if(e+r<A.f[15](t+12)){s.stretchpitcherEnded=!0;for(let r=0;r<s.playChannels;r++)(0,E.sO)(A.f[20](A.f[20](t)+4*r)+e,0,4*(A.f[15](t+12)-e))}return b.M[15](t+8,e),0}for(;e<A.f[15](t+12);){let r=0;if(s.useStretchpitcher)for(let i=0;i<s.playChannels;i++){const a=s.stretchpitcher.get(i);A.f[20](A.f[20](t)+4*i)&&(r=a.receiveSamples(A.f[20](A.f[20](t)+4*i)+4*e,A.f[15](t+12)-e))}else if(s.waitPCMBuffer){if(r=Math.min(A.f[15](s.waitPCMBuffer+8)-s.waitPCMBufferPos,A.f[15](t+12)-e),r){for(let i=0;i<s.playChannels;i++)(0,E.Mr)(A.f[20](A.f[20](t)+4*i)+4*e,A.f[20](A.f[20](s.waitPCMBuffer)+4*i)+4*s.waitPCMBufferPos,4*r);s.waitPCMBufferPos+=r}A.f[15](s.waitPCMBuffer+8)===s.waitPCMBufferPos&&(s.waitAVFrame&&(b.M[20](s.waitPCMBuffer,0),b.M[15](s.waitPCMBuffer+12,0),s.avframePool.release(s.waitAVFrame),s.waitAVFrame=0),this.avPCMBufferPool.release(s.waitPCMBuffer),s.waitPCMBuffer=0)}if(e+=r,e<A.f[15](t+12)){let r=await n();if(-1048576===r){if(s.ended=!0,s.useStretchpitcher){for(let i=0;i<s.playChannels;i++){const a=s.stretchpitcher.get(i);A.f[20](A.f[20](t)+4*i)&&(a.flush(),r=a.receiveSamples(A.f[20](A.f[20](t)+4*i)+4*e,A.f[15](t+12)-e))}if(e+r<A.f[15](t+12)){s.stretchpitcherEnded=!0;for(let r=0;r<s.playChannels;r++)(0,E.sO)(A.f[20](A.f[20](t)+4*r)+e,0,4*(A.f[15](t+12)-e))}e+=r}break}if(r<0)return r}}return b.M[15](t+8,e),s.seekSync&&(s.seekSync(),s.seekSync=null),0};return r.on(_.S3,(async t=>{switch(t.method){case"pull":{if(s.fakePlay&&(s.fakePlay=!1,this.clearFakePlayTimer(s),s.fakePlaySamples=BigInt(0),s.fakePlayStartTimestamp=0),s.ended&&(s.stretchpitcherEnded||!s.useStretchpitcher))return void r.reply(t,-1048576);const e=t.params.buffer;if(!s.firstPlayed){s.masterTimer.setMasterTime(s.lastMasterPts===B.Dh?s.startPTS:s.lastMasterPts),s.lastMasterPts=B.Dh;let e=await n();if(e<0){r.reply(t,e);break}}if(s.currentPTS-s.masterTimer.getMasterTime()>G&&!s.audioMasterForce){(0,E.sO)(A.f[20](A.f[20](e)),0,4*A.f[15](e+12)*A.f[15](e+16)),r.reply(t,0),this.fakeSyncPts(s);break}this.syncPts(s,A.f[15](e+12));const i=await c(e);r.reply(t,i);break}case"pullBuffer":{var e;if(s.fakePlay&&(s.fakePlay=!1,this.clearFakePlayTimer(s),s.fakePlaySamples=BigInt(0),s.fakePlayStartTimestamp=0),s.ended&&(s.stretchpitcherEnded||!s.useStretchpitcher))return void r.reply(t,-1048576);const i=t.params.nbSamples;if(!s.outPCMBuffer||s.outPCMBuffer.maxnbSamples!==i){s.outPCMBuffer&&((0,C.aI)(s.outPCMBuffer.data),(0,C.aI)(s.outPCMBuffer[f.o9]),(0,x.A)(s.outPCMBuffer)),s.outPCMBuffer=(0,v.A)(w.A),s.outPCMBuffer.data=(0,C.sY)(4*s.playChannels);const t=(0,C.Gy)(4*i*s.playChannels);for(let e=0;e<s.playChannels;e++)b.M[20](s.outPCMBuffer.data+4*e,t+4*i*e);s.outPCMBuffer.maxnbSamples=i}if(!s.firstPlayed){s.masterTimer.setMasterTime(s.lastMasterPts===B.Dh?s.startPTS:s.lastMasterPts),s.lastMasterPts=B.Dh;let e=await n();if(e<0){r.reply(t,e);break}}if(s.currentPTS-s.masterTimer.getMasterTime()>G&&!s.audioMasterForce){const e=new Uint8Array(4*s.outPCMBuffer.nbSamples*s.playChannels);r.reply(t,e.buffer,null,[e.buffer]),this.fakeSyncPts(s);break}this.syncPts(s,s.outPCMBuffer.maxnbSamples);const a=await c(s.outPCMBuffer[f.o9]);if(a<0)return void r.reply(t,a);const o=l()(e=(0,E.s3)(A.f[20](s.outPCMBuffer.data),4*s.outPCMBuffer.nbSamples*s.playChannels)).call(e);r.reply(t,o.buffer,null,[o.buffer]);break}}})),this.tasks.set(t.taskId,s),0}checkUseStretchpitcher(t){const e=1!==t.playRate||1!==t.playTempo||1!==t.playPitch||t.enableJitterBuffer;if(t.useStretchpitcher&&!e)for(let e=0;e<t.playChannels;e++)t.stretchpitcher.get(e).flush()}setPlayRate(t,e){const r=this.tasks.get(t);if(r){r.enableJitterBuffer&&A.f[15](r.stats+32)/A.f[15](r.stats+244)*1e3<=A.f[15](r.stats+280)&&(e=1),r.playRate=e;for(let t=0;t<r.playChannels;t++)r.stretchpitcher.get(t).setRate(e);this.checkUseStretchpitcher(r),r.masterTimer.setRate(r.playRate*r.playTempo),r.fakePlay&&(r.fakePlayStartTimestamp=(0,L.A)(),r.fakePlaySamples=BigInt(0))}}async setPlayTempo(t,e){const r=this.tasks.get(t);if(r){r.playTempo=e;for(let t=0;t<r.playChannels;t++)r.stretchpitcher.get(t).setTempo(e);this.checkUseStretchpitcher(r),r.masterTimer.setRate(r.playRate*r.playTempo),r.fakePlay&&(r.fakePlayStartTimestamp=(0,L.A)(),r.fakePlaySamples=BigInt(0))}}setPlayPitch(t,e){const r=this.tasks.get(t);if(r){r.playPitch=e;for(let t=0;t<r.playChannels;t++)r.stretchpitcher.get(t).setPitch(e);this.checkUseStretchpitcher(r)}}async beforeSeek(t){const e=this.tasks.get(t);if(e){if(e.fakePlay||e.pausing?this.clearFakePlayTimer(e):(I.Yz(`wait current pull front frame before seek, taskId: ${e.taskId}`,V,680),await new(o())((t=>{e.seekSync=t}))),e.seeking=!0,e.stretchpitcher.size)for(const t of u()(r=e.stretchpitcher).call(r)){var r;e.stretchpitcher.get(t).clear()}e.waitPCMBuffer&&(e.waitAVFrame&&(b.M[20](e.waitPCMBuffer,0),b.M[15](e.waitPCMBuffer+12,0),e.avframePool.release(e.waitAVFrame),e.waitAVFrame=0),this.avPCMBufferPool.release(e.waitPCMBuffer),e.waitPCMBuffer=0),I.Yz(`before seek end, taskId: ${e.taskId}`,V,708)}}async syncSeekTime(t,e,r){const i=this.tasks.get(t);if(i){let s=!1;for(;;){if(!i.leftIPCPort)return i.ended=!0,void I.R8(`pull audio frame end after unregisterTask, taskId: ${t}`,V,722);let a=(0,L.A)(),n=A.f[15](i.stats+120);for(;!s&&r&&A.f[15](i.stats+120)>r;)await new U.A(0),(0,L.A)()-a>200&&n===A.f[15](i.stats+120)&&(s=!0),n!==A.f[15](i.stats+120)&&(n=A.f[15](i.stats+120),a=(0,L.A)());let o=await i.leftIPCPort.request("pull");if(o<0){I.R8(`pull audio frame end after seek, taskId: ${t}`,V,744),i.ended=!0;break}if(e<BigInt(0)){I.pq(`use the first audio frame because of the seek time${e} < 0`,V,750);break}const c=(0,D.Mr)(A.f[17](o+104),o+120,B.i0);if(c>=e){i.paddingAVFrame=o,i.ended=!1,i.lastNotifyPTS=c,b.M[17](i.stats+328,c),i.currentPTS=c,i.masterTimer.setMasterTime(e),i.lastMasterPts=e;break}i.avframePool.release(o)}I.Yz(`sync seek time end, taskId: ${i.taskId}`,V,778)}}async isEnd(t){const e=this.tasks.get(t);if(e)return e.ended}async afterSeek(t,e){const r=this.tasks.get(t);r&&(r.seeking=!1,r.receivePCMSync&&(r.receivePCMSync(),r.receivePCMSync=null),r.pausing||(r.fakePlay&&(r.fakePlayStartTimestamp=(0,L.A)(),r.fakePlaySamples=BigInt(0),this.fakePlayNext(r)),r.lastRenderTimestamp=(0,L.A)()),I.Yz(`after seek end, taskId: ${r.taskId}`,V,807))}async restart(t){const e=this.tasks.get(t);if(e){var r;if(e.lastNotifyPTS=BigInt(0),e.ended=!1,e.firstPlayed=!1,e.stretchpitcherEnded=!1,null!==(r=e.stretchpitcher)&&void 0!==r&&r.size)for(let t=0;t<e.playChannels;t++){var i;null===(i=e.stretchpitcher.get(t))||void 0===i||i.clear()}this.clearFakePlayTimer(e),e.fakePlaySamples=BigInt(0),e.fakePlayStartTimestamp=0,e.lastRenderTimestamp=(0,L.A)(),e.masterTimer.setMasterTime(e.startPTS),I.Yz(`restart task, taskId: ${e.taskId}`,V,829)}}async setMasterTime(t,e){const r=this.tasks.get(t);r&&r.masterTimer.setMasterTime(e)}fakeSyncPts(t){const e=t.masterTimer.getMasterTime();e-t.lastNotifyPTS>=BigInt(1e3)&&(t.lastNotifyPTS=e,b.M[17](t.stats+328,e),t.controlIPCPort.notify("syncPts",{pts:e}))}syncPts(t,e){const r=((t.useStretchpitcher?t.stretchpitcher.get(0).getLatency():0)+(3*e>>>1))/t.playSampleRate*1e3>>>0,i=F.T9(t.currentPTS-BigInt(Math.floor(r)),BigInt(0));b.M[17](t.stats+328,i),t.currentPTS-t.lastNotifyPTS>=BigInt(1e3)&&(t.lastNotifyPTS=t.currentPTS,t.controlIPCPort.notify("syncPts",{pts:i}))}clearFakePlayTimer(t){t.fakePlayTimer&&(t.fakePlayWorkerTimer?(t.fakePlayWorkerTimer.clearTimeout(t.fakePlayTimer),t.fakePlayWorkerTimer.destroy(),t.fakePlayWorkerTimer=null):clearTimeout(t.fakePlayTimer),t.fakePlayTimer=null)}setFakePlayTimer(t,e,r){return(0,N.A)()?p()(e,r):(t.fakePlayWorkerTimer||(t.fakePlayWorkerTimer=new O.A),t.fakePlayWorkerTimer.setTimeout(e,r))}async fakePlayNext(t){const e=t.paddingAVFrame||await t.leftIPCPort.request("pull");if(t.paddingAVFrame=0,e<0)return t.ended=!0,I.pq(`audio fake render ended, taskId: ${t.taskId}`,V,900),void t.controlIPCPort.notify("ended");if(!t.fakePlay||t.pausing)return void t.avframePool.release(e);let r=A.f[15](e+76)/A.f[15](e+152)*1e3>>>0;r/=t.playRate*t.playTempo;const i=(0,D.Mr)(A.f[17](e+104),e+120,B.i0);if((i>BigInt(0)&&t.masterTimer.getMasterTime()-i>G||t.isLive&&i-t.currentPTS>BigInt(4e3))&&t.masterTimer.setMasterTime(i),t.currentPTS-t.masterTimer.getMasterTime()>G)return t.paddingAVFrame=e,this.fakeSyncPts(t),void(t.fakePlayTimer=this.setFakePlayTimer(t,(()=>{t.fakePlayTimer=null,this.fakePlayNext(t)}),r));this.syncPts(t,0);let s=BigInt(Math.floor((0,L.A)()-t.fakePlayStartTimestamp))*BigInt(0|A.f[15](e+152))/BigInt(1e3);s=s*BigInt(Math.floor(t.playRate*t.playTempo*100))/BigInt(100),r-=Number(s-t.fakePlaySamples)/A.f[15](e+152)*1e3>>>0,t.fakePlaySamples+=BigInt(0|A.f[15](e+76)),t.avframePool.release(e),t.currentPTS=i,b.M[15](t.stats+80,A.f[15](t.stats+80)+1),b.M[17](t.stats+344,i),t.lastRenderTimestamp&&b.M[15](t.stats+252,Math.max((0,L.A)()-t.lastRenderTimestamp,A.f[15](t.stats+252))),t.lastRenderTimestamp=(0,L.A)(),t.currentPTS-t.lastNotifyPTS>=BigInt(1e3)&&(t.lastNotifyPTS=t.currentPTS,b.M[17](t.stats+328,t.currentPTS),t.controlIPCPort.notify("syncPts",{pts:t.currentPTS})),t.fakePlayTimer=this.setFakePlayTimer(t,(()=>{t.fakePlayTimer=null,this.fakePlayNext(t)}),r)}async fakePlay(t){const e=this.tasks.get(t);e&&(e.fakePlayStartTimestamp=(0,L.A)(),e.fakePlay=!0,e.fakePlaySamples=BigInt(0),this.fakePlayNext(e),I.pq(`start fake play, taskId: ${e.taskId}`,V,981))}async pause(t){const e=this.tasks.get(t);e&&(e.pausing=!0,e.lastMasterPts=e.masterTimer.getMasterTime(),e.fakePlay&&this.clearFakePlayTimer(e),I.pq(`task paused, taskId: ${e.taskId}`,V,994))}async unpause(t){const e=this.tasks.get(t);e&&(e.pausing=!1,e.masterTimer.setMasterTime(e.lastMasterPts),e.lastMasterPts=B.Dh,e.fakePlay&&(e.fakePlayStartTimestamp=(0,L.A)(),e.fakePlaySamples=BigInt(0),e.lastRenderTimestamp=(0,L.A)(),this.fakePlayNext(e)),I.pq(`task unpaused, taskId: ${e.taskId}`,V,1011))}async stop(t){const e=this.tasks.get(t);e&&(e.stopping=!0,e.receivePCMSync&&(e.receivePCMSync(),e.receivePCMSync=null),I.pq(`task stopping, taskId: ${e.taskId}`,V,1023))}async registerTask(t){return this.tasks.has(t.taskId)?T.lh:this.createTask(t)}async unregisterTask(t){const e=this.tasks.get(t);if(e){if(this.clearFakePlayTimer(e),e.resampler&&e.resampler.close(),e.stretchpitcher.size){for(const t of u()(r=e.stretchpitcher).call(r)){var r;e.stretchpitcher.get(t).close()}e.stretchpitcher.clear()}e.outPCMBuffer&&((0,C.aI)(e.outPCMBuffer.data),(0,C.aI)(e.outPCMBuffer[f.o9]),(0,x.A)(e.outPCMBuffer)),e.waitPCMBuffer&&(e.waitAVFrame&&(b.M[20](e.waitPCMBuffer,0),b.M[15](e.waitPCMBuffer+12,0),e.avframePool.release(e.waitAVFrame),e.waitAVFrame=0),this.avPCMBufferPool.release(e.waitPCMBuffer),e.waitPCMBuffer=0),e.paddingAVFrame&&e.avframePool.release(e.paddingAVFrame),e.leftIPCPort&&(e.leftIPCPort.destroy(),e.leftIPCPort=null),e.rightIPCPort&&(e.rightIPCPort.destroy(),e.rightIPCPort=null),e.controlIPCPort&&(e.controlIPCPort.destroy(),e.controlIPCPort=null),this.tasks.delete(t),I.Yz(`unregisterTask task, taskId: ${t}`,V,1080)}}async clear(){await super.clear(),this.avPCMBufferList.clear((t=>{A.f[20](t)&&((0,C.aI)(A.f[20](t)),(0,C.aI)(t))}),20),(0,x.A)(this.avPCMBufferList),(0,x.A)(this.avPCMBufferListMutex)}}},72480:(t,e,r)=>{"use strict";r.d(e,{A:()=>et});var i=r(52730),s=r.n(i),a=r(74707),n=r.n(a),o=r(48079),c=r.n(o),l=r(71426),h=r.n(l),u=r(86226),d=r.n(u),p=r(15413),f=r.n(p),m=r(18979),v=r.n(m),g=r(385),y=r.n(g),A=r(61499),b=r(12264),x=r(29170),w=r(63939),k=r(50932),T=(r(9599),r(44527)),_=r(9705),I=r(84149),S=r(44315),P=r(24175),M=r(34531),C=r(75),R=r(37837),E=r(79630),D=r(4624),B=r(84290),L=r(39148),U=r(72739),F=r(44328),$=r(77231),O=r(43607),N=r(71517),z=r(14686),V=r(49032),G=r(94561),W=r(39638),j=r(26429),H=r(71762),q=r(72703),Y=r(67672),K=r(62815),Q=r(67659),X=r(59166),J=r(95797);const Z="src/avpipeline/DemuxPipeline.ts",tt=-1;class et extends T.A{constructor(){super()}createTask(t){let e,r;if(t.mainTaskId){const i=this.tasks.get(t.mainTaskId);e=i.leftIPCPort,r=i.controlIPCPort}else e=new I.Ay(t.leftPort),t.controlPort&&(r=new I.Ay(t.controlPort));const i=t.bufferLength||1048576,a=(0,R.sY)(i);if(!a)return _.gR;const o=(0,R.sY)(i);if(!o)return _.gR;const c=new E.A(a,i),l=new P.A(i,!0,c),h=new E.A(o,i),u=new M.A(i,!0,h);t.isLive||(l.flags|=1),s()(t)&&(l.flags|=s()(t)),l.onFlush=async r=>{const i={pointer:r.byteOffset,length:r.length};t.ioloaderOptions&&(i.ioloaderOptions=t.ioloaderOptions);try{const t=await e.request("read",i);return Y.ai(t)?t:((0,z.lW)(i.pointer,t.length,t),t.length)}catch(t){return-1048574}},l.onSeek=async r=>{try{const i={pos:r};return t.ioloaderOptions&&(i.ioloaderOptions=t.ioloaderOptions),e.request("seek",i)}catch(t){return-1048574}},l.onSize=async()=>{try{return e.request("size")}catch(t){return BigInt(-1048574)}},u.onFlush=async t=>{const r={pointer:t.byteOffset,length:t.length};try{return await e.request("write",r)}catch(t){return-1048574}};const d=(0,S.Xv)();return d.ioReader=l,d.ioWriter=u,J.A.wasmBaseSupported&&(d.getDecoderResource=async(t,e)=>{if(!r)return;const i=await r.request("getDecoderResource",{codecId:e,mediaType:t});return(0,G.A)(i,0===t)}),this.tasks.set(t.taskId,{...t,leftIPCPort:e,rightIPCPorts:new(n()),controlIPCPort:r,formatContext:d,ioReader:l,iBuffer:a,oBuffer:o,cacheAVPackets:new(n()),cacheRequests:new(n()),streamIndexFlush:new(n()),pendingAVPackets:new(n()),realFormat:-1,demuxEnded:!1,loop:null,gopCounter:0,lastKeyFramePts:BigInt(0),lastAudioDts:BigInt(0),lastVideoDts:BigInt(0),avpacketPool:new B.A((0,x.A)(t.avpacketList,b.A),t.avpacketListMutex)}),0}async openStream(t,e=3e3){const i=this.tasks.get(t);if(i){let t,s,a=await i.leftIPCPort.request("open");if(a<0)return D.z3(`open ioloader failed, ret: ${a}`,Z,305),a;try{6!==i.format?(t=await(0,V.A)(i.ioReader,i.format),i.format=t):t=i.format}catch(t){return _.LR}switch(t){case 0:s=new((await Promise.all([r.e(171),r.e(773)]).then(r.bind(r,28773))).default)(i.formatOptions);break;case 1:s=new((await Promise.all([r.e(883),r.e(85)]).then(r.bind(r,25085))).default)(i.formatOptions);break;case 2:s=new((await Promise.all([r.e(940),r.e(331)]).then(r.bind(r,59331))).default);break;case 3:s=new((await Promise.all([r.e(940),r.e(855)]).then(r.bind(r,83855))).default);break;case 5:s=new((await r.e(634).then(r.bind(r,16634))).default);break;case 4:s=new((await Promise.all([r.e(642),r.e(118)]).then(r.bind(r,29118))).default);break;case 14:s=new((await Promise.all([r.e(982),r.e(839)]).then(r.bind(r,6839))).default);break;case 8:case 9:s=new((await r.e(577).then(r.bind(r,34577))).default);break;case 15:s=new((await Promise.all([r.e(982),r.e(94)]).then(r.bind(r,47094))).default);break;case 17:s=new((await Promise.all([r.e(982),r.e(642),r.e(453)]).then(r.bind(r,18453))).default);break;case 16:s=new((await Promise.all([r.e(982),r.e(531),r.e(791)]).then(r.bind(r,3791))).default);break;case 18:s=new((await r.e(611).then(r.bind(r,85611))).default);break;case 19:s=new((await r.e(70).then(r.bind(r,78070))).default);break;case 20:s=new((await r.e(344).then(r.bind(r,47344))).default);break;case 21:s=new((await r.e(854).then(r.bind(r,98854))).default);break;case 11:s=new((await r.e(299).then(r.bind(r,5299))).default)(i.formatOptions);break;case 12:s=new((await r.e(487).then(r.bind(r,85487))).default)(i.formatOptions);break;case 13:s=new((await r.e(808).then(r.bind(r,95808))).default)(i.formatOptions);break;case 6:s=new((await r.e(522).then(r.bind(r,50522))).default)(i.formatOptions);break;case 10:s=new((await Promise.all([r.e(531),r.e(635)]).then(r.bind(r,96635))).default)(i.formatOptions);break;default:return D.z3("format not support",Z,508),_.E$}return i.realFormat=t,i.formatContext.iformat=s,C.ho(i.formatContext,{maxAnalyzeDuration:e,fastOpen:i.isLive})}D.h2("task not found",Z,523)}async getFormat(t){const e=this.tasks.get(t);if(e)return e.realFormat;D.h2("task not found",Z,533)}async analyzeStreams(t){const e=this.tasks.get(t);if(e){let t=await C.Ib(e.formatContext);if(t)return t;const i=[],s=[];for(let t=0;t<e.formatContext.streams.length;t++){const r=e.formatContext.streams[t];i.push({index:r.index,id:r.id,codecpar:r.codecpar[A.o9],nbFrames:r.nbFrames,metadata:r.metadata,duration:r.duration,startTime:r.startTime,disposition:r.disposition,timeBase:{den:r.timeBase.den,num:r.timeBase.num},attachedPic:r.attachedPic})}for(let t=0;t<e.formatContext.streamGroups.length;t++){var r;const a=e.formatContext.streamGroups[t];s.push({index:a.index,id:a.id,type:a.type,params:a.params,metadata:a.metadata,disposition:a.disposition,streams:c()(r=a.streams).call(r,(t=>h()(i).call(i,(e=>e.id===t.id))))})}return{metadata:e.formatContext.metadata,format:e.realFormat,chapters:e.formatContext.chapters,streams:i,streamGroups:s}}D.h2("task not found",Z,590)}replyAVPacket(t,e,r,i){if((0,W.A)()&&!j.USE_THREADS&&(0,q.A)(i)){const a=(0,H.wm)(i),n=[a.data.buffer];var s;return a.sideData.length&&d()(s=a.sideData).call(s,(t=>{n.push(t.data.buffer)})),e.reply(r,a,null,n),void t.avpacketPool.release(i)}e.reply(r,i)}async connectStreamTask(t,e,r){const i=this.tasks.get(t);if(i){const t=new I.Ay(r);i.cacheAVPackets.set(e,[]),t.streamIndex=e,t.on(I.S3,(async e=>{switch(e.method){case"pull":{const r=i.cacheAVPackets.get(t.streamIndex);if(r.length){const s=r.shift();0!==i.stats&&s>0&&(1===i.formatContext.streams[w.f[15](s+32)].codecpar.codecType?k.M[15](i.stats+32,w.f[15](i.stats+32)-1):0===i.formatContext.streams[w.f[15](s+32)].codecpar.codecType&&k.M[15](i.stats+120,w.f[15](i.stats+120)-1)),this.replyAVPacket(i,t,e,s)}else i.demuxEnded?t.reply(e,-1048576):(i.cacheRequests.set(t.streamIndex,e),i.loop&&i.loop.isStarted()&&i.loop.resetInterval());break}}})),i.rightIPCPorts.set(e,t),D.Yz(`connect stream ${e}, taskId: ${i.taskId}`,Z,651)}else D.h2("task not found",Z,654)}async addPendingStream(t,e){const r=this.tasks.get(t);r?r.pendingAVPackets.set(e,[]):D.h2("task not found",Z,664)}async changeConnectStream(t,e,r,i=!0,s=!1){const a=this.tasks.get(t);if(a){if(e===r)return;let t=a.cacheAVPackets.get(r);const n=a.rightIPCPorts.get(r),o=a.cacheRequests.get(r);t||D.R8(`oldStreamIndex ${r} not found`,Z,681),await a.loop.stopBeforeNextTick(),i?a.pendingAVPackets.has(e)||(U.__(t,(t=>{a.avpacketPool.release(t)})),t.length=0):a.streamIndexFlush.set(e,!0),a.pendingAVPackets.has(e)&&(a.pendingAVPackets.set(r,t),t=a.pendingAVPackets.get(e),a.pendingAVPackets.delete(e)),1===a.formatContext.streams[e].codecpar.codecType?k.M[15](a.stats+32,t.length):0===a.formatContext.streams[e].codecpar.codecType&&k.M[15](a.stats+120,t.length),n.streamIndex=e,a.cacheAVPackets.set(e,t),a.rightIPCPorts.set(e,n),a.cacheAVPackets.delete(r),a.rightIPCPorts.delete(r),o&&(a.cacheRequests.set(e,o),a.cacheRequests.delete(r)),i&&!s||a.loop.start(),D.Yz(`changed connect stream, new ${e}, old: ${r}, force: ${i}, taskId: ${a.taskId}`,Z,727)}else D.h2("task not found",Z,730)}async doDemux(t,e){const r=t.avpacketPool.alloc();let i=await C.Cj(t.formatContext,r);if(i){t.avpacketPool.release(r),-1048576!==i&&-1048572!==i&&(t.controlIPCPort.notify("demuxError",{code:i}),D.z3(`demux error, ret: ${i}, taskId: ${t.taskId}`,Z,890));for(let e of f()(s=t.cacheRequests).call(s)){var s;t.cacheAVPackets.get(e).length||(t.rightIPCPorts.get(e).reply(t.cacheRequests.get(e),-1048576),t.cacheRequests.delete(e))}}else{const i=w.f[15](r+32);if(0!==t.stats)if(1===t.formatContext.streams[i].codecpar.codecType&&t.cacheAVPackets.has(i)){if(k.M[17](t.stats+24,w.f[17](t.stats+24)+BigInt(1)),k.M[17](t.stats+16,w.f[17](t.stats+16)+BigInt(0|w.f[15](r+28))),w.f[17](t.stats+24)>1&&w.f[17](r+16)>t.lastAudioDts){const e=t.cacheAVPackets.get(i);e&&e.length?k.M[15](t.stats+244,Math.round(w.f[15](r+76)/w.f[15](r+72)/(Number(BigInt.asIntN(32,w.f[17](r+16)-w.f[17](e[0]+16)))/e.length))):k.M[15](t.stats+244,Math.round(w.f[15](r+76)/w.f[15](r+72)/Number(BigInt.asIntN(32,w.f[17](r+16)-t.lastAudioDts))))}t.lastAudioDts=w.f[17](r+16)}else if(0===t.formatContext.streams[i].codecpar.codecType&&t.cacheAVPackets.has(i)){if(k.M[17](t.stats+112,w.f[17](t.stats+112)+BigInt(1)),k.M[17](t.stats+104,w.f[17](t.stats+104)+BigInt(0|w.f[15](r+28))),1&w.f[15](r+36)?(k.M[17](t.stats+176,w.f[17](t.stats+176)+BigInt(1)),w.f[17](t.stats+176)>1&&w.f[17](r+8)>t.lastKeyFramePts&&(k.M[15](t.stats+96,t.gopCounter),t.gopCounter=1,k.M[15](t.stats+92,Number(BigInt.asIntN(32,(0,F.Mr)(w.f[17](r+8)-t.lastKeyFramePts,r+72,$.i0))))),t.lastKeyFramePts=w.f[17](r+8)):t.gopCounter++,w.f[17](t.stats+112)>1&&w.f[17](r+16)>t.lastVideoDts){const e=t.cacheAVPackets.get(i);e&&e.length?k.M[15](t.stats+232,Math.round(w.f[15](r+76)/w.f[15](r+72)/(Number(BigInt.asIntN(32,w.f[17](r+16)-w.f[17](e[0]+16)))/e.length))):k.M[15](t.stats+232,Math.round(w.f[15](r+76)/w.f[15](r+72)/Number(BigInt.asIntN(32,w.f[17](r+16)-t.lastVideoDts))))}t.lastVideoDts=w.f[17](r+16)}if(t.streamIndexFlush.get(i)){var a;const e=h()(a=t.formatContext.streams).call(a,(t=>t.index===i));if(!(0,N.rU)(r,1)&&e&&e.codecpar.extradataSize){const t=(0,R.sY)(e.codecpar.extradataSize);(0,z.Mr)(t,e.codecpar.extradata,e.codecpar.extradataSize),(0,N.Ow)(r,1,t,e.codecpar.extradataSize)}t.streamIndexFlush.set(i,!1)}if(t.cacheRequests.has(i))this.replyAVPacket(t,t.rightIPCPorts.get(i),t.cacheRequests.get(i),r),t.cacheRequests.delete(i);else if(t.cacheAVPackets.has(i))t.cacheAVPackets.get(i).push(r),0!==t.stats&&(1===t.formatContext.streams[i].codecpar.codecType?k.M[15](t.stats+32,w.f[15](t.stats+32)+1):0===t.formatContext.streams[i].codecpar.codecType&&k.M[15](t.stats+120,w.f[15](t.stats+120)+1)),3===t.formatContext.streams[i].codecpar.codecType&&t.cacheAVPackets.get(i).length>e&&t.avpacketPool.release(t.cacheAVPackets.get(i).shift());else if(t.pendingAVPackets.has(i)){const s=t.pendingAVPackets.get(i);if(s.push(r),0!==t.stats){const r=t.formatContext.streams[i].codecpar.codecType;for(;s.length;){const i=s[0],a=(0,F.Mr)(w.f[17](i+8),i+72,$.i0),n=O.T9(w.f[17](t.stats+328),w.f[17](t.stats+336));if(1===r&&a>=n||0===r&&a>=n||1!==r&&0!==r&&s.length<=e)break;t.avpacketPool.release(s.shift())}}else s.length>e&&t.avpacketPool.release(s.shift())}else t.rightIPCPorts.has(tt)?t.cacheRequests.has(tt)?(this.replyAVPacket(t,t.rightIPCPorts.get(tt),t.cacheRequests.get(tt),r),t.cacheRequests.delete(tt)):t.cacheAVPackets.get(tt).push(r):t.avpacketPool.release(r)}return i}doAttachedPicture(t){var e;d()(e=t.cacheAVPackets).call(e,((e,r)=>{var i;const s=h()(i=t.formatContext.streams).call(i,(t=>t.index===r));if(1024&s.disposition&&s.attachedPic){const r=t.avpacketPool.alloc();(0,N.rN)(r,s.attachedPic),e.push(r),e.push(-1048576),0!==t.stats&&k.M[15](t.stats+120,1)}}))}async startDemux(t,e,r){const i=this.tasks.get(t);if(i){if(r=Math.max(r,2===i.format?20:10),i.loop&&i.loop.destroy(),i.loop=new L.A((async()=>{if(!e){var t;let e=!1,s=!1;if(d()(t=i.cacheAVPackets).call(t,((t,a)=>{var n;const o=h()(n=i.formatContext.streams).call(n,(t=>t.index===a));t.length<r&&(3!==o.codecpar.codecType&&!(1024&o.disposition)||1===i.cacheAVPackets.size)&&(e=!0),t.length>Math.max(2*r,5e3)&&(s=!0)})),!e||s)return void i.loop.emptyTask()}await this.doDemux(i,r)&&(i.demuxEnded=!0,D.pq(`demuxer ended, taskId: ${i.taskId}`,Z,959),i.loop.stop())}),0,0,!0,!1),e&&i.cacheAVPackets.size)for(;;){var s;let t=!1;if(d()(s=i.cacheAVPackets).call(s,((e,i)=>{e.length>=r&&(t=!0)})),t)break;if(await this.doDemux(i,r))return void(i.demuxEnded=!0)}this.doAttachedPicture(i),i.loop.start(),D.Yz(`start demux loop, taskId: ${i.taskId}`,Z,989)}else D.h2("task not found",Z,992)}async seek(t,e,r,i=-1){const a=this.tasks.get(t);if(a){if(a.loop){await a.loop.stopBeforeNextTick();let l=await C.jF(a.formatContext,i,e,r);if(l>=BigInt(0)){var n,o,c;function u(t){U.__(t,(t=>{if(2&s()(a.formatContext.ioReader)){const r=(0,N.rU)(t,1),i=a.formatContext.streams[w.f[15](t+32)];var e;!i.sideData[1]&&r&&(i.sideData[1]=v()(e=(0,z.s3)(w.f[20](r),w.f[25](r+4))).call(e))}a.avpacketPool.release(t)})),t.length=0}d()(n=a.cacheAVPackets).call(n,u),d()(o=a.pendingAVPackets).call(o,u),0!==a.stats&&d()(c=a.cacheAVPackets).call(c,((t,e)=>{var r;const i=h()(r=a.formatContext.streams).call(r,(t=>t.index===e));1===i.codecpar.codecType?k.M[15](a.stats+32,0):0===i.codecpar.codecType&&k.M[15](a.stats+120,0)}));const p=a.avpacketPool.alloc();for(;l=await C.Cj(a.formatContext,p),!(l<0||a.cacheAVPackets.has(w.f[15](p+32))););if(l>=0){a.demuxEnded=!1;const f=w.f[15](p+32);return a.cacheAVPackets.get(f).push(p),0!==a.stats&&(1===a.formatContext.streams[w.f[15](p+32)].codecpar.codecType?k.M[15](a.stats+32,w.f[15](a.stats+32)+1):0===a.formatContext.streams[w.f[15](p+32)].codecpar.codecType&&k.M[15](a.stats+120,w.f[15](a.stats+120)+1)),this.doAttachedPicture(a),a.loop.start(),(0,F.Mr)(O.T9(w.f[17](p+8),BigInt(0)),p+72,$.i0)}return D.R8(`got first packet failed after seek, taskId: ${a.taskId}`,Z,1063),a.avpacketPool.release(p),a.demuxEnded=!0,e}return a.loop.start(),l}{D.pq("seek before demux loop start",Z,1077);let m=await C.jF(a.formatContext,-1,e,r);return m<0?m:e}}}async croppingAVPacketQueue(t,e){const r=this.tasks.get(t);if(r){var i,s;let a=e;const o=new(n());function c(t,e){if(!(1&w.f[15](t+36)))return!1;let r=0!==(0,N.rU)(t,1);return!r&&64&w.f[15](t+36)&&(27===e?r=!!K.sL((0,N.iI)(t)):173===e?r=!!Q.sL((0,N.iI)(t)):196===e&&(r=!!X.sL((0,N.iI)(t)))),r}const l=new(n());d()(i=r.cacheAVPackets).call(i,((t,e)=>{l.set(e,t)})),d()(s=r.pendingAVPackets).call(s,((t,e)=>{l.set(e,t)})),d()(l).call(l,((t,i)=>{const s=r.formatContext.streams[i].codecpar.codecType,n=r.formatContext.streams[i].codecpar.codecId;if(0===s){const r=w.f[17](t[t.length-1]+16);let s=t.length-2;for(s=t.length-2;s>=0;s--)if(1&w.f[15](t[s]+36)&&(0,F.Mr)(r-w.f[17](t[s]+16),t[s]+72,$.i0)>=e){a=O.T9(a,(0,F.Mr)(r-w.f[17](t[s]+16),t[s]+72,$.i0));break}if((27===n||173===n||196===n)&&s>0&&!c(t[s],n))for(let e=s-1;e>0;e--)if(1&w.f[15](t[e]+36)&&c(t[e],n)){a=O.T9(a,(0,F.Mr)(r-w.f[17](t[e]+16),t[e]+72,$.i0)),s=e;break}s>0&&o.set(i,s)}})),d()(l).call(l,((t,e)=>{if(0!==r.formatContext.streams[e].codecpar.codecType){const r=w.f[17](t[t.length-1]+16);let i=t.length-2;for(i=t.length-2;i>=0&&!((0,F.Mr)(r-w.f[17](t[i]+16),t[i]+72,$.i0)>=a);i--);i>=0&&o.set(e,i)}})),o.size===l.size&&d()(o).call(o,((t,e)=>{var i;const s=l.get(e);d()(i=y()(s).call(s,0,t)).call(i,(t=>{r.avpacketPool.release(t)}));const a=r.formatContext.streams[e].codecpar.codecType;0!==r.stats&&(1===a?k.M[15](r.stats+32,s.length):0===a&&k.M[15](r.stats+120,s.length))}))}}async stop(t){const e=this.tasks.get(t);e&&(e.formatContext.ioReader.flags|=8)}async registerTask(t){return this.tasks.has(t.taskId)?_.lh:this.createTask(t)}async unregisterTask(t){const e=this.tasks.get(t);var r,i,a,n;e&&(e.ioReader&&4&s()(e.ioReader)&&e.ioReader.abort(),e.loop&&(await e.loop.stopBeforeNextTick(),e.loop.destroy()),d()(r=e.cacheAVPackets).call(r,(t=>{d()(t).call(t,(t=>{e.avpacketPool.release(t)}))})),d()(i=e.pendingAVPackets).call(i,(t=>{d()(t).call(t,(t=>{e.avpacketPool.release(t)}))})),d()(a=e.cacheRequests).call(a,((t,r)=>{e.rightIPCPorts.get(r).reply(t,-1048576)})),e.cacheRequests.clear(),await e.formatContext.destroy(),e.mainTaskId||(e.leftIPCPort.destroy(),e.controlIPCPort&&e.controlIPCPort.destroy()),d()(n=e.rightIPCPorts).call(n,(t=>{t.destroy()})),e.rightIPCPorts.clear(),e.iBuffer&&((0,R.Eb)(e.iBuffer),e.iBuffer=0),e.oBuffer&&((0,R.Eb)(e.oBuffer),e.oBuffer=0),this.tasks.delete(t),D.Yz(`unregisterTask task, taskId: ${t}`,Z,1271))}}},87243:(t,e,r)=>{"use strict";r.d(e,{A:()=>m});var i=r(63939),s=r(50932),a=r(44527),n=r(77580),o=r(9705),c=r(84149),l=r(14686),h=r(79686),u=r(4624),d=r(14619),p=r(42383);const f="src/avpipeline/IOPipeline.ts";class m extends a.A{constructor(){super()}async createTask(t){let e;switch(t.type){case 0:e=new n.A(t.options);break;case 1:e=new h.A(t.options);break;case 2:e=new d.A(t.options);break;case 3:e=new p.A(t.options);break;case 4:e=new((await r.e(433).then(r.bind(r,15433))).default)(t.options);break;case 5:e=new((await r.e(576).then(r.bind(r,41576))).default)(t.options);break;case 6:e=new((await Promise.all([r.e(171),r.e(543)]).then(r.bind(r,67543))).default)(t.options)}if(!e)return o.UY;const a=new c.Ay(t.rightPort),m={...t,ioLoader:e,ipcPort:a};return a.on(c.S3,(async r=>{switch(r.method){case"open":try{const i=await e.open(t.info,t.range);if(i<0){u.z3(`loader open error, ${i}, taskId: ${t.taskId}`,f,131),a.reply(r,null,i);break}a.reply(r,i)}catch(e){u.z3(`loader open error, ${e}, taskId: ${t.taskId}`,f,138),a.reply(r,null,e)}break;case"read":{const n=r.params.pointer,c=r.params.length,h=r.params.ioloaderOptions,d=(0,l.JW)(n,c);try{const t=await e.read(d,h);s.M[17](m.stats+192,i.f[17](m.stats+192)+BigInt(0|t)),a.reply(r,t)}catch(e){if(!this.tasks.has(t.taskId))return;u.z3(`loader read error, ${e}, taskId: ${t.taskId}`,f,162),a.reply(r,o.LR)}break}case"write":{const n=r.params.pointer,c=r.params.length,h=(0,l.JW)(n,c);try{const t=await e.write(h);s.M[17](m.stats+200,i.f[17](m.stats+200)+BigInt(0|c)),a.reply(r,t)}catch(e){u.z3(`loader write error, ${e}, taskId: ${t.taskId}`,f,184),a.reply(r,o.LR)}break}case"seek":{const i=r.params.pos,s=r.params.ioloaderOptions;try{const n=await e.seek(i,s);if(n<0){u.z3(`loader seek error, ${n}, taskId: ${t.taskId}`,f,200),a.reply(r,null,n);break}a.reply(r,n)}catch(e){u.z3(`loader seek error, ${e}, taskId: ${t.taskId}`,f,207),a.reply(r,null,e)}break}case"size":a.reply(r,await e.size())}})),this.tasks.set(t.taskId,m),0}async open(t){const e=this.tasks.get(t);if(e)return await e.ioLoader.open(e.info,e.range),0}async getDuration(t){const e=this.tasks.get(t);if(e)return 4===e.type||5===e.type?e.ioLoader.getDuration():0}async hasAudio(t){const e=this.tasks.get(t);if(e){if(5===e.type)return e.ioLoader.hasAudio();if(4===e.type)return e.ioLoader.hasAudio()}return!1}async hasVideo(t){const e=this.tasks.get(t);if(e){if(5===e.type)return e.ioLoader.hasVideo();if(4===e.type)return e.ioLoader.hasVideo()}return!1}async hasSubtitle(t){const e=this.tasks.get(t);if(e){if(5===e.type)return e.ioLoader.hasSubtitle();if(4===e.type)return e.ioLoader.hasSubtitle()}return!1}async getVideoList(t){const e=this.tasks.get(t);if(e){if(5===e.type)return e.ioLoader.getVideoList();if(4===e.type)return e.ioLoader.getVideoList()}return{list:[],selectedIndex:0}}async getAudioList(t){const e=this.tasks.get(t);if(e){if(5===e.type)return e.ioLoader.getAudioList();if(4===e.type)return e.ioLoader.getAudioList()}return{list:[],selectedIndex:0}}async getSubtitleList(t){const e=this.tasks.get(t);if(e){if(5===e.type)return e.ioLoader.getSubtitleList();if(4===e.type)return e.ioLoader.getSubtitleList()}return{list:[],selectedIndex:0}}async selectVideo(t,e){const r=this.tasks.get(t);if(r){if(5===r.type)return r.ioLoader.selectVideo(e);if(4===r.type)return r.ioLoader.selectVideo(e)}}async selectAudio(t,e){const r=this.tasks.get(t);if(r){if(5===r.type)return r.ioLoader.selectAudio(e);if(4===r.type)return r.ioLoader.selectAudio(e)}}async selectSubtitle(t,e){const r=this.tasks.get(t);if(r){if(5===r.type)return r.ioLoader.selectSubtitle(e);if(4===r.type)return r.ioLoader.selectSubtitle(e)}}async getCurrentProtection(t,e){const r=this.tasks.get(t);if(r&&5===r.type)return r.ioLoader.getCurrentProtection(e)}async getMinBuffer(t){const e=this.tasks.get(t);if(e){if(5===e.type)return e.ioLoader.getMinBuffer();if(4===e.type)return e.ioLoader.getMinBuffer()}return 0}async setStart(t,e){const r=this.tasks.get(t);return r&&4===r.type?r.ioLoader.setStart(e):0}async registerTask(t){return this.tasks.has(t.taskId)?o.lh:this.createTask(t)}async unregisterTask(t){const e=this.tasks.get(t);e&&(await e.ioLoader.stop().catch((t=>{u.R8(`stop ioloader error: ${t}, we will ignore it`,f,437)})),e.ipcPort.destroy(),this.tasks.delete(t),u.Yz(`unregisterTask task, taskId: ${t}`,f,441))}}},44527:(t,e,r)=>{"use strict";r.d(e,{A:()=>l});var i=r(49859),s=r(74707),a=r.n(s),n=r(15413),o=r.n(n),c=r(4624);class l{constructor(){(0,i.A)(this,"tasks",void 0),this.tasks=new(a())}async clear(){if(this.tasks.size)for(const e of o()(t=this.tasks).call(t)){var t;await this.unregisterTask(e)}}async setLogLevel(t){c.V$(t)}async getTaskCount(){return this.tasks.size}}},31138:(t,e,r)=>{"use strict";r.d(e,{A:()=>z});var i=r(61240),s=r.n(i),a=r(86226),n=r.n(a),o=r(63939),c=r(50932),l=r(12264),h=r(29170),u=r(9599),d=r(44527),p=r(9705),f=r(84149),m=r(40417),v=r(71039),g=r(4624),y=r(16041),A=r(67672),b=r(72739),x=r(13724),w=(r(77162),r(84290)),k=r(39638),T=r(44328),_=r(86932),I=r(77231),S=r(95797),P=r(72703),M=r(94561),C=r(71762),R=r(37837),E=r(71766),D=r(71517),B=r(14686),L=r(62815),U=r(67659),F=r(59166),$=r(39381),O=r(9781);const N="src/avpipeline/VideoDecodePipeline.ts";class z extends d.A{constructor(){super()}createWebCodecDecoder(t,e=!0){return new v.A({onError:e=>{t.hardwareRetryCount>3||!t.firstDecoded?t.targetDecoder===t.hardwareDecoder?(t.targetDecoder=t.softwareDecoder,t.hardwareDecoder.close(),t.hardwareDecoder=null,t.decoderFallbackReady=this.openSoftwareDecoder(t),g.R8(`video decode error by hardware decoder(${t.hardwareRetryCount}), taskId: ${t.taskId}, error: ${e}, try to fallback to software decoder`,N,140)):t.targetDecoder===t.softwareDecoder&&(t.softwareDecoder.close(),t.softwareDecoder=this.createWasmcodecDecoder(t,t.resource),t.softwareDecoderOpened=!1,t.decoderFallbackReady=this.openSoftwareDecoder(t),g.R8(`video decode error by software(webcodecs) decoder(${t.hardwareRetryCount}), taskId: ${t.taskId}, error: ${e}, try to fallback to software(wasm) decoder`,N,147)):(t.hardwareRetryCount++,t.targetDecoder===t.hardwareDecoder?(g.pq(`retry open hardware decoder(${t.hardwareRetryCount}), taskId: ${t.taskId}`,N,153),t.decoderFallbackReady=t.hardwareDecoder.open(t.parameters)):t.targetDecoder===t.softwareDecoder&&(g.pq(`retry open software(webcodecs) decoder(${t.hardwareRetryCount}), taskId: ${t.taskId}`,N,157),t.decoderFallbackReady=t.softwareDecoder.open(t.parameters))),t.needKeyFrame=!0,t.leftIPCPort.request("requestKeyframe")},onReceiveVideoFrame(e,r){r&&(e.alpha=r),t.firstDecoded=!0,t.frameCaches.push(e),c.M[17](t.stats+144,o.f[17](t.stats+144)+BigInt(1)),t.lastDecodeTimestamp!==I.N_&&(c.M[15](t.stats+256,Math.max((0,_.A)()-t.lastDecodeTimestamp,o.f[15](t.stats+256))),t.lastDecodeTimestamp=I.N_)},enableHardwareAcceleration:e,optimizeForLatency:t.preferLatency,alpha:t.keepAlpha?"keep":"discard"})}createWasmcodecDecoder(t,e){return new m.A({resource:e,onReceiveAVFrame(e){t.firstDecoded=!0,t.frameCaches.push(e),c.M[17](t.stats+144,o.f[17](t.stats+144)+BigInt(1)),t.lastDecodeTimestamp!==I.N_&&(c.M[15](t.stats+256,Math.max((0,_.A)()-t.lastDecodeTimestamp,o.f[15](t.stats+256))),t.lastDecodeTimestamp=I.N_)},avframePool:t.avframePool})}async pullAVPacketInternal(t,e){const r=await e.request("pull");if(A.ai(r)||(0,P.A)(r))return r;{const e=t.avpacketPool.alloc();return(0,C.r0)(r,e),e}}async createTask(t){const e=new f.Ay(t.leftPort),r=new f.Ay(t.rightPort),i=[],a=new y.A((0,h.A)(t.avframeList,l.A),t.avframeListMutex),n={...t,resource:await(0,M.A)(t.resource,!0),leftIPCPort:e,rightIPCPort:r,softwareDecoder:null,hardwareDecoder:null,frameCaches:i,inputEnd:!1,targetDecoder:null,needKeyFrame:!0,parameters:0,hardwareRetryCount:0,lastDecodeTimestamp:0,firstDecoded:!1,decoderFallbackReady:null,softwareDecoderOpened:!1,discard:0,playRate:1,avframePool:a,avpacketPool:new w.A((0,h.A)(t.avpacketList,l.A),t.avpacketListMutex)};if(n.softwareDecoder=n.resource?this.createWasmcodecDecoder(n,n.resource):S.A.videoDecoder?this.createWebCodecDecoder(n,!1):null,!n.softwareDecoder)return g.z3("software decoder not support",N,256),p.lh;function u(t,e){A.ai(e)||(0,P.A)(e)?r.reply(t,e):(0,O.z)(e)?r.reply(t,{ref:e,alpha:e.alpha},null,[e,e.alpha]):r.reply(t,e,null,[e])}return S.A.videoDecoder&&t.enableHardware&&(n.hardwareDecoder=this.createWebCodecDecoder(n)),n.targetDecoder=n.hardwareDecoder||n.softwareDecoder,this.tasks.set(t.taskId,n),r.on(f.S3,(async a=>{switch(a.method){case"pull":if(i.length){u(a,i.shift());break}if(!n.inputEnd){for(;;){if(i.length){u(a,i.shift());break}if(n.decoderFallbackReady){let t=await n.decoderFallbackReady;if(t&&(n.targetDecoder===n.hardwareDecoder&&(n.targetDecoder=n.softwareDecoder,n.hardwareDecoder.close(),n.hardwareDecoder=null,g.R8(`video decode error by hardware decoder(${n.hardwareRetryCount}), taskId: ${n.taskId}, error: ${t}, try to fallback to software decoder`,N,301),t=await this.openSoftwareDecoder(n)),t)){g.pq(`video decoder open error, taskId: ${n.taskId}`,N,305),r.reply(a,p.r8);break}n.decoderFallbackReady=null}n.lastDecodeTimestamp===I.N_&&(n.lastDecodeTimestamp=(0,_.A)());const l=await this.pullAVPacketInternal(n,e);if(-1048576===l){if(n.targetDecoder===n.hardwareDecoder?await s().race([new x.A(2),n.targetDecoder.flush()])&&g.R8(`video hardware decoder flush failed, ignore it, taskId: ${n.taskId}`,N,325):await n.targetDecoder.flush(),n.inputEnd=!0,n.targetDecoder===n.hardwareDecoder&&await new x.A(0),i.length){u(a,i.shift());break}g.pq(`video decoder ended, taskId: ${n.taskId}`,N,341),r.reply(a,-1048576);break}if(!(l>0)){g.z3(`video decode pull avpacket error, taskId: ${t.taskId}, ret: ${l}`,N,486),r.reply(a,l);break}{if(n.needKeyFrame){if(!(1&o.f[15](l+36)&&27!==o.f[15](n.parameters+4)||27===o.f[15](n.parameters+4)&&L.KD(l,o.f[20](n.parameters+12)?1+(3&$.r8(o.f[20](n.parameters+12)+4)):4)||173===o.f[15](n.parameters+4)&&U.KD(l,o.f[20](n.parameters+12)?1+(3&$.r8(o.f[20](n.parameters+12)+21)):4)||196===o.f[15](n.parameters+4)&&F.KD(l,o.f[20](n.parameters+12)?1+($.r8(o.f[20](n.parameters+12))>>>1&3):4))){n.avpacketPool.release(l);continue}n.needKeyFrame=!1,c.M[15](l+36,1|o.f[15](l+36))}let e=n.targetDecoder.decode(l);if(1&o.f[15](l+36)){const t=(0,D.rU)(l,1);0!==t&&(o.f[20](n.parameters+12)&&(0,R.Eb)(o.f[20](n.parameters+12)),c.M[15](n.parameters+16,0|o.f[25](t+4)),c.M[20](n.parameters+12,(0,R.sY)(o.f[25](t+4))),(0,B.Mr)(o.f[20](n.parameters+12),o.f[20](t),o.f[25](t+4)))}if(e<0){if(c.M[15](n.stats+136,o.f[15](n.stats+136)+1),n.targetDecoder instanceof v.A&&n.softwareDecoder){if(g.R8(`video decode error from hardware, taskId: ${n.taskId}, error: ${e}, try to fallback to software decoder`,N,407),n.targetDecoder===n.hardwareDecoder)n.hardwareDecoder.close(),n.hardwareDecoder=null;else{if(!n.resource){g.z3(`cannot fallback to wasm video decoder because of resource not found , taskId: ${t.taskId}`,N,419),r.reply(a,p.r8);break}n.softwareDecoder.close(),n.softwareDecoder=this.createWasmcodecDecoder(n,n.resource),n.softwareDecoderOpened=!1}try{await this.openSoftwareDecoder(n),n.targetDecoder=n.softwareDecoder}catch(e){g.z3(`video software decoder open error, taskId: ${t.taskId}`,N,429),r.reply(a,p.r8);break}if(!(1&o.f[15](l+36))){n.avpacketPool.release(l),n.needKeyFrame=!0,n.leftIPCPort.request("requestKeyframe");continue}if(e=n.targetDecoder.decode(l),e>=0){n.avpacketPool.release(l);continue}if(n.targetDecoder instanceof v.A&&n.resource){g.R8(`video decode error by webcodecs soft decoder, taskId: ${n.taskId}, error: ${e}, try to fallback to wasm software decoder`,N,443),n.softwareDecoder.close(),n.softwareDecoder=this.createWasmcodecDecoder(n,n.resource),n.softwareDecoderOpened=!1;try{await this.openSoftwareDecoder(n),n.targetDecoder=n.softwareDecoder}catch(e){g.z3(`video wasm software decoder open error, taskId: ${t.taskId}`,N,453),r.reply(a,p.r8);break}if(e=n.targetDecoder.decode(l),e>=0){n.avpacketPool.release(l);continue}}}n.avpacketPool.release(l),g.z3(`video decode error, taskId: ${t.taskId}, ret: ${e}`,N,472),r.reply(a,e);break}for(n.avpacketPool.release(l);n.targetDecoder instanceof v.A&&n.targetDecoder.getQueueLength()>20;)await new x.A(0)}}break}g.pq(`video decoder ended, taskId: ${n.taskId}`,N,493),r.reply(a,-1048576)}})),0}async openSoftwareDecoder(t){if(t.softwareDecoder&&!t.softwareDecoderOpened){const e=t.parameters;let r=1;if((0,k.A)()){let t=o.f[15](e+56)*o.f[15](e+60),i=(0,T.lb)((0,h.A)(e+72,u.P));t>=2073600&&t<=2211840?(173!==o.f[15](e+4)&&196!==o.f[15](e+4)&&225!==o.f[15](e+4)||(r=2),i>30?(r=2,173!==o.f[15](e+4)&&196!==o.f[15](e+4)&&225!==o.f[15](e+4)||(r=4)):i>60&&(r=4,173!==o.f[15](e+4)&&196!==o.f[15](e+4)&&225!==o.f[15](e+4)||(r=6))):t>2211840&&t<=8294400?(r=4,173!==o.f[15](e+4)&&196!==o.f[15](e+4)&&225!==o.f[15](e+4)||(r=6)):t>8294400&&(r=6,173!==o.f[15](e+4)&&196!==o.f[15](e+4)&&225!==o.f[15](e+4)||(r=8)),r=Math.min(r,navigator.hardwareConcurrency)}g.Yz(`open software(${t.softwareDecoder instanceof v.A?"webcodecs":"wasm"}) decoder`,N,558);let i=await t.softwareDecoder.open(e,r,t.wasmDecoderOptions);if(i){if(!(t.softwareDecoder instanceof v.A&&t.resource))return i;if(g.R8(`webcodecs software decoder open failed, ${i}, try to fallback to wasm software decoder`,N,564),t.softwareDecoder.close(),t.softwareDecoder=this.createWasmcodecDecoder(t,t.resource),i=await t.softwareDecoder.open(e,r),i)return i;t.targetDecoder=t.softwareDecoder}t.softwareDecoderOpened=!0}return 0}async reopenDecoder(t,e,r,i){const a=this.tasks.get(t);if(a){const t=(0,R.Gy)(168);let n;(0,P.A)(e)?(0,E.Yi)(t,e):(0,C.T8)(e,t),a.parameters&&(0,E.dn)(a.parameters),a.parameters=t,i&&(a.wasmDecoderOptions=i),r&&(r=await(0,M.A)(r,!0)),n=a.preferWebCodecs&&S.A.videoDecoder&&v.A.isSupported(t,!1)?this.createWebCodecDecoder(a,!1):r?this.createWasmcodecDecoder(a,r):S.A.videoDecoder?this.createWebCodecDecoder(a,!1):null;let o=S.A.videoDecoder&&a.enableHardware?this.createWebCodecDecoder(a,!0):null;return new(s())((async(e,i)=>{if(a.softwareDecoder&&a.softwareDecoder.close(),a.hardwareDecoder&&a.hardwareDecoder.close(),a.softwareDecoder=n,a.hardwareDecoder=o,a.targetDecoder=a.hardwareDecoder||a.softwareDecoder,a.hardwareRetryCount=0,a.hardwareDecoder){const e=await a.hardwareDecoder.open(t);e?(g.z3(`cannot reopen hardware decoder, ${e}, taskId: ${a.taskId}`,N,640),a.hardwareDecoder.close(),a.hardwareDecoder=null,a.targetDecoder=a.softwareDecoder):g.Yz(`reopen video hardware decoder, taskId: ${a.taskId}`,N,646)}if(r&&(a.resource=r),a.targetDecoder===a.softwareDecoder){const t=await this.openSoftwareDecoder(a);if(t){if(g.z3(`reopen video software decoder failed, error: ${t}`,N,657),!a.hardwareDecoder)return void e(p.r8)}else g.Yz(`reopen video soft decoder, taskId: ${a.taskId}`,N,664)}e(0)}))}g.h2("task not found",N,670)}async open(t,e,r={}){const i=this.tasks.get(t);if(i){i.wasmDecoderOptions=r;const t=(0,R.Gy)(168);if((0,P.A)(e)?(0,E.Yi)(t,e):(0,C.T8)(e,t),i.parameters&&(0,E.dn)(i.parameters),i.parameters=t,i.preferWebCodecs&&S.A.videoDecoder&&v.A.isSupported(t,!1)&&i.softwareDecoder instanceof m.A){i.softwareDecoder.close();const t=this.createWebCodecDecoder(i,!1);i.softwareDecoder===i.targetDecoder&&(i.targetDecoder=t),i.softwareDecoder=t}return new(s())((async(e,r)=>{if(i.hardwareDecoder){g.Yz("open hardware decoder",N,705);const e=await i.hardwareDecoder.open(t);e&&(g.R8(`cannot open hardware decoder, ${e}, try to open software decoder`,N,708),i.hardwareDecoder.close(),i.hardwareDecoder=null,i.targetDecoder=i.softwareDecoder)}if(i.targetDecoder===i.softwareDecoder){const t=await this.openSoftwareDecoder(i);if(t&&(g.z3(`open video software decoder failed, error: ${t}`,N,718),!i.hardwareDecoder))return void e(p.r8)}e(0)}))}g.h2("task not found",N,728)}async setPlayRate(t,e){const r=this.tasks.get(t);if(r&&r.softwareDecoder){let t=0,i=(0,T.lb)((0,h.A)(r.parameters+72,u.P));t=i>=120?e<=1?0:e<1.5||e<3?8:32:i>=60?e<1.5?0:e<3?8:e<8?24:32:e>=8?32:e>=4?24:0,r.softwareDecoder.setSkipFrameDiscard(t),r.playRate<e?r.discard=t:r.discard=Math.max(r.discard,t),r.playRate=e}}async setNextDiscard(t){const e=this.tasks.get(t);e&&e.softwareDecoder&&e.discard<32&&(e.discard+=8,e.softwareDecoder.setSkipFrameDiscard(e.discard),g.pq(`set next discard, taskId: ${e.taskId}, discard: ${e.discard}`,N,795))}async setPrevDiscard(t){const e=this.tasks.get(t);e&&e.softwareDecoder&&e.discard>0&&(e.discard-=8,e.softwareDecoder.setSkipFrameDiscard(e.discard),g.pq(`set prev discard, taskId: ${e.taskId}, discard: ${e.discard}`,N,807))}async resetTask(t){const e=this.tasks.get(t);e&&(e.targetDecoder===e.softwareDecoder?await e.targetDecoder.flush():e.targetDecoder===e.hardwareDecoder&&(e.hardwareDecoder.close(),e.hardwareDecoder=this.createWebCodecDecoder(e),await e.hardwareDecoder.open(e.parameters)&&g.h2("reopen hardware decoder failed",N,824),e.targetDecoder=e.hardwareDecoder),b.__(e.frameCaches,(t=>{(0,P.A)(t)?e.avframePool.release(t):(t.close(),(0,O.z)(t)&&t.alpha.close())})),e.frameCaches.length=0,e.needKeyFrame=!0,e.inputEnd=!1,e.lastDecodeTimestamp=(0,_.A)(),g.pq(`reset video decoder, taskId: ${e.taskId}`,N,844))}async registerTask(t){return this.tasks.has(t.taskId)?p.lh:this.createTask(t)}async unregisterTask(t){const e=this.tasks.get(t);var r;e&&(e.rightPort.close(),e.leftPort.close(),e.softwareDecoder&&e.softwareDecoder.close(),e.hardwareDecoder&&e.hardwareDecoder.close(),n()(r=e.frameCaches).call(r,(t=>{(0,P.A)(t)?e.avframePool.release(t):(t.close(),(0,O.z)(t)&&t.alpha.close())})),e.parameters&&(0,E.dn)(e.parameters),this.tasks.delete(t),g.Yz(`unregisterTask task, taskId: ${t}`,N,881))}async getTasksInfo(){var t;const e=[];return n()(t=this.tasks).call(t,(t=>{e.push({codecId:o.f[15](t.parameters+4),width:o.f[15](t.parameters+56),height:o.f[15](t.parameters+60),framerate:(0,T.lb)((0,h.A)(t.parameters+72,u.P)),hardware:t.targetDecoder===t.hardwareDecoder})})),e}}},33968:(t,e,r)=>{"use strict";r.d(e,{A:()=>G});var i=r(61240),s=r.n(i),a=r(12264),n=r(29170),o=r(63939),c=(r(9599),r(50932)),l=r(44527),h=r(9705),u=r(84149),d=r(67672),p=r(72739),f=r(16041),m=r(95797),v=r(39148),g=r(86932),y=r(44328),A=r(77231),b=r(86834),x=r(4624),w=r(43607),k=r(15045),T=r(88103),_=r(54750),I=r(69047),S=r(3016),P=r(38222),M=r(87623),C=r(63849),R=r(39638),E=r(7972),D=r(72703),B=r(44690),L=r(74936),U=r(9781);const F="src/avpipeline/VideoRenderPipeline.ts",$=[P.A];$.push(M.A);const O=[I.A];var N;O.push(S.A),function(t){t[t.None=0]="None",t[t.Accelerate=1]="Accelerate",t[t.Decelerate=2]="Decelerate"}(N||(N={}));let z=!1;const V=["bt2020","bt2100","st2048","p3-dcl","hlg"];class G extends l.A{constructor(){super()}async createTask(t){const e=new u.Ay(t.leftPort),r=new u.Ay(t.controlPort),i={...t,leftIPCPort:e,controlIPCPort:r,render:null,frontFrame:null,backFrame:null,renderFrame:null,renderFrameCount:BigInt(0),loop:null,renderRedyed:!1,currentPTS:A.Dh,adjust:N.None,adjustDiff:BigInt(0),lastAdjustTimestamp:BigInt(0),lastMasterPts:A.Dh,masterTimer:new L.A,lastNotifyPTS:BigInt(0),playRate:BigInt(100),firstRendered:!1,canvasUpdated:!1,renderCreating:!1,renderRecreateCount:0,skipRender:!1,isSupport:()=>!1,frontBuffered:!1,ended:!1,seeking:!1,seekSync:null,afterPullResolver:null,pausing:!1,lastRenderTimestamp:0,avframePool:new f.A((0,n.A)(t.avframeList,a.A),t.avframeListMutex)};return r.on(u.Wo,(async t=>{switch(t.method){case"syncPts":{const e=t.params.pts,r=i.masterTimer.getMasterTime(),s=Math.abs(Number(e-r));s>100&&i.currentPTS>BigInt(0)&&(e>r?(i.adjust=N.Accelerate,x.Yz(`video render sync master time accelerate, targetMaster: ${e}, currentMaster: ${r}, diff: ${s}, taskId: ${i.taskId}`,F,232)):(i.adjust=N.Decelerate,x.Yz(`video render sync master time decelerate, targetMaster: ${e}, currentMaster: ${r}, diff: ${s} taskId: ${i.taskId}`,F,236)),i.adjustDiff=BigInt(Math.floor(s)));break}case"skipRender":i.skipRender=t.params.skipRender}})),this.tasks.set(t.taskId,i),0}async pullFrame(t){const e=await t.leftIPCPort.request("pull");return d.ai(e)||(0,D.A)(e)||e instanceof VideoFrame?e:(e.ref.alpha=e.alpha,e.ref)}swap(t){if(!t.seeking){if(t.backFrame&&((0,D.A)(t.backFrame)?t.avframePool.release(t.backFrame):(t.backFrame.close(),(0,U.z)(t.backFrame)&&t.backFrame.alpha.close())),t.backFrame=null,!t.frontBuffered)return!1;if(t.backFrame=t.frontFrame,t.frontFrame=null,c.M[17](t.stats+352,(0,D.A)(t.backFrame)?(0,y.Mr)(o.f[17](t.backFrame+104),t.backFrame+120,A.i0):(0,y.k)(BigInt(t.backFrame.timestamp),A.KR,A.i0)),!t.ended)return t.frontBuffered=!1,this.pullFrame(t).then((e=>(t.afterPullResolver&&t.afterPullResolver(),d.ai(e)&&e<0?(t.ended=!0,void(t.frontFrame=null)):(t.frontFrame=e,t.frontBuffered=!0,t.seekSync?(t.seekSync(),void(t.seekSync=null)):void(t.backFrame||this.swap(t)))))),!0}}fakeSyncPts(t){const e=t.masterTimer.getMasterTime();e-t.lastNotifyPTS>=BigInt(1e3)&&(t.lastNotifyPTS=e,c.M[17](t.stats+336,e),t.controlIPCPort.notify("syncPts",{pts:e}))}async createRender(t,e,r=!1){if(!t.renderCreating){var i;if(t.renderCreating=!0,t.renderRedyed=!1,t.render&&(t.render.destroy(),t.render=null),"function"==typeof WritableStream&&t.canvas instanceof WritableStream?(t.render=new C.A(t.canvas),t.isSupport=C.A.isSupport):(0,D.A)(e)?(t.enableWebGPU&&m.A.webgpu&&!z&&p.__($,(r=>{if(r.isSupport(e))return t.render=new r(t.canvas,{sar:t.sar,devicePixelRatio:t.devicePixelRatio,renderMode:t.renderMode,onRenderContextLost:()=>{t.canvasUpdated=!1,t.renderRedyed=!1,x.R8("render context lost",F,417),t.controlIPCPort.notify("updateCanvas")}}),t.isSupport=r.isSupport,!1})),t.render||p.__(O,(r=>{if(r.isSupport(e))return t.render=new r(t.canvas,{sar:t.sar,devicePixelRatio:t.devicePixelRatio,renderMode:t.renderMode,onRenderContextLost:()=>{t.canvasUpdated=!1,t.renderRedyed=!1,x.R8("render context lost",F,436),t.controlIPCPort.notify("updateCanvas")}}),t.isSupport=r.isSupport,!1}))):t.enableWebGPU&&m.A.webgpu&&!z&&((b.A.chrome||b.A.newEdge)&&b.A.checkVersion(b.A.majorVersion,"116",!0)||b.A.safari&&b.A.checkVersion(b.A.majorVersion,"17.4",!0)||B.A.ios&&b.A.checkVersion(B.A.version,"17.4",!0)||b.A.firefox&&b.A.checkVersion(b.A.majorVersion,"129",!0))&&(i=e.colorSpace.primaries,!p.zy(V,i))?(t.render=new _.A(t.canvas,{sar:t.sar,devicePixelRatio:t.devicePixelRatio,renderMode:t.renderMode,onRenderContextLost:()=>{t.canvasUpdated=!1,t.renderRedyed=!1,x.R8("render context lost",F,377),t.controlIPCPort.notify("updateCanvas")}}),t.isSupport=_.A.isSupport):(t.render=new T.A(t.canvas,{sar:t.sar,devicePixelRatio:t.devicePixelRatio,renderMode:t.renderMode,colorSpace:"pq"===e.colorSpace.transfer?"rec2100-pq":"hlg"===e.colorSpace.transfer?"rec2100-hlg":void 0}),t.isSupport=T.A.isSupport),!t.render)return x.z3(`not found format ${e.format} render`,F,448),void(t.renderCreating=!1);try{var s,a,n;await t.render.init(),t.render.viewport(t.viewportWidth,t.viewportHeight),t.render.setRotate(null!==(s=t.renderRotate)&&void 0!==s?s:0,!1),t.render.enableHorizontalFlip(null!==(a=t.flipHorizontal)&&void 0!==a&&a),t.render.enableVerticalFlip(null!==(n=t.flipVertical)&&void 0!==n&&n),t.render.render(e,e.alpha),t.render.clear()}catch(i){if(t.render instanceof k.A&&!r)return z=!0,t.renderCreating=!1,x.R8("not support webgpu render, try to fallback to webgl render",F,467),this.createRender(t,e,!0);if(r){if(t.renderCreating=!1,x.R8("canvas context lost after fallback, wait for recreate canvas",F,472),t.renderRecreateCount<3)return t.renderRecreateCount++,void t.controlIPCPort.notify("updateCanvas");throw i}}t.renderRedyed=!0,t.renderCreating=!1,t.renderRecreateCount=0}}async play(t){const e=this.tasks.get(t);if(e){if(e.loop&&x.h2("task has already call play",F,494),(0,D.A)(e.backFrame)||d.Ik(e.backFrame)||(e.backFrame=await this.pullFrame(e)),d.ai(e.backFrame)&&e.backFrame<0)return e.backFrame=0,x.pq(`video render ended, taskId: ${e.taskId}`,F,503),void e.controlIPCPort.notify("ended");(0,D.A)(e.frontFrame)||d.Ik(e.frontFrame)||(e.frontFrame=await this.pullFrame(e)),e.frontBuffered=!0,e.ended=!1,d.ai(e.frontFrame)&&e.frontFrame<0&&(e.ended=!0,e.frontBuffered=!1,e.frontFrame=0),await this.createRender(e,e.backFrame),e.currentPTS=(0,D.A)(e.backFrame)?(0,y.Mr)(o.f[17](e.backFrame+104),e.backFrame+120,A.i0):(0,y.k)(BigInt(e.backFrame.timestamp),A.KR,A.i0),x.Yz(`got first video frame, pts: ${(0,D.A)(e.backFrame)?o.f[17](e.backFrame+104):BigInt(e.backFrame.timestamp)}(${e.currentPTS}ms), taskId: ${e.taskId}`,F,535),e.masterTimer.setMasterTime(e.lastMasterPts===A.Dh?e.startPTS:e.lastMasterPts),e.lastMasterPts=A.Dh,c.M[17](e.stats+352,e.currentPTS);const t=(0,R.A)(),r=t&&m.A.shareArrayBuffer?0:10;e.loop=new v.A((()=>{if(!e.backFrame)return void(e.ended?(e.loop.stop(),e.adjust=N.None,x.pq(`video render ended, taskId: ${e.taskId}`,F,556),e.controlIPCPort.notify("ended")):e.loop.emptyTask());if(!e.isSupport(e.backFrame)){if(e.render){if(!e.renderRedyed)return;return e.renderRedyed=!1,e.renderFrame=e.backFrame,void e.controlIPCPort.notify("updateCanvas")}this.createRender(e,e.backFrame)}const r=(0,D.A)(e.backFrame)?(0,y.Mr)(o.f[17](e.backFrame+104),e.backFrame+120,A.i0):(0,y.k)(BigInt(e.backFrame.timestamp),A.KR,A.i0);if(r<e.currentPTS){if(!(e.currentPTS-r>BigInt(5e3)))return x.R8(`dropping frame with pts ${r}, which is earlier then the last rendered frame(${e.currentPTS}), taskId: ${e.taskId}`,F,595),void this.swap(e);e.masterTimer.setMasterTime(r)}else r-e.currentPTS>BigInt(4e3)&&e.isLive&&e.masterTimer.setMasterTime(r);if(e.adjust===N.Accelerate){if(e.adjustDiff<=0)e.adjust=N.None,e.lastAdjustTimestamp=BigInt(0);else if(BigInt(Math.floor((0,g.A)()))-e.lastAdjustTimestamp>=BigInt(100)){const t=w.jk(e.adjustDiff,BigInt(100));e.masterTimer.setMasterTime(e.masterTimer.getMasterTime()+t),e.adjustDiff-=t,x.Yz(`video render accelerate master time add: ${t}, taskId: ${e.taskId}`,F,617),e.lastAdjustTimestamp=BigInt(Math.floor((0,g.A)()))}}else if(e.adjust===N.Decelerate)if(e.adjustDiff<=0)e.adjust=N.None,e.lastAdjustTimestamp=BigInt(0);else if(BigInt(Math.floor((0,g.A)()))-e.lastAdjustTimestamp>=BigInt(300)){const t=w.jk(e.adjustDiff,BigInt(50));e.masterTimer.setMasterTime(e.masterTimer.getMasterTime()-t),e.adjustDiff-=t,x.Yz(`video render decelerate master time sub: ${t}, taskId: ${e.taskId}`,F,635),e.lastAdjustTimestamp=BigInt(Math.floor((0,g.A)()))}e.enableJitterBuffer&&o.f[15](e.stats+120)/o.f[15](e.stats+232)*1e3<=o.f[15](e.stats+280)&&this.setPlayRate(e.taskId,1);const i=r-e.masterTimer.getMasterTime();i<=0?(e.renderRedyed&&!e.skipRender&&(t||-i<BigInt(100)||e.renderFrameCount&BigInt(1))?(e.render.render(e.backFrame,e.backFrame.alpha),c.M[17](e.stats+160,o.f[17](e.stats+160)+BigInt(1)),e.lastRenderTimestamp&&c.M[15](e.stats+260,Math.max((0,g.A)()-e.lastRenderTimestamp,o.f[15](e.stats+260))),e.lastRenderTimestamp=(0,g.A)()):c.M[15](e.stats+168,o.f[15](e.stats+168)+1),c.M[17](e.stats+336,r),e.renderFrameCount++,(0,D.A)(e.backFrame)?(c.M[15](e.stats+84,o.f[15](e.backFrame+68)),c.M[15](e.stats+88,o.f[15](e.backFrame+72))):(c.M[15](e.stats+84,e.backFrame.displayWidth),c.M[15](e.stats+88,e.backFrame.displayHeight)),e.firstRendered||(e.controlIPCPort.notify(e.canvasUpdated?"firstRenderedAfterUpdateCanvas":"firstRendered"),e.firstRendered=!0,e.canvasUpdated=!1),e.currentPTS=r,r-e.lastNotifyPTS>=BigInt(1e3)&&(e.lastNotifyPTS=r,e.controlIPCPort.notify("syncPts",{pts:r})),this.swap(e),e.masterTimer.getMasterTime()-r>=BigInt(2e3)&&e.masterTimer.setMasterTime(r)):(this.fakeSyncPts(e),e.loop.emptyTask())}),0,r),e.loop.start()}else x.h2("task not found",F,707)}async restart(t){const e=this.tasks.get(t);if(e){if(e.loop||x.h2("task has not played",F,715),e.loop.isStarted()&&x.h2("task has already run",F,719),e.backFrame||(e.backFrame=await this.pullFrame(e)),e.frontFrame||(e.frontFrame=await this.pullFrame(e)),e.frontBuffered=!0,e.ended=!1,e.adjust=N.None,e.lastNotifyPTS=A.Dh,e.firstRendered=!1,e.pausing=!1,e.seeking=!1,(!e.frontFrame||d.ai(e.frontFrame)&&e.frontFrame<0)&&(e.frontFrame=null,e.frontBuffered=!1,e.ended=!0),!e.backFrame||d.ai(e.backFrame)&&e.backFrame<0)return void(e.backFrame=null);e.currentPTS=(0,D.A)(e.backFrame)?(0,y.Mr)(o.f[17](e.backFrame+104),e.backFrame+120,A.i0):(0,y.k)(BigInt(e.backFrame.timestamp),A.KR,A.i0),e.masterTimer.setMasterTime(w.T9(e.startPTS,e.currentPTS)),e.loop.start()}}async pause(t){const e=this.tasks.get(t);e&&(e.loop||x.h2("task has not played",F,770),e.loop.stop(),e.pausing=!0,e.lastMasterPts=e.masterTimer.getMasterTime(),x.pq(`task paused, taskId: ${e.taskId}`,F,776))}async unpause(t){const e=this.tasks.get(t);if(e){if(e.seeking)return;e.loop||x.h2("task has not played",F,787),e.masterTimer.setMasterTime(e.lastMasterPts),e.lastMasterPts=A.Dh,e.seeking||e.loop.start(),e.pausing=!1,e.lastRenderTimestamp=(0,g.A)(),x.pq(`task unpaused, taskId: ${e.taskId}`,F,797)}}async updateCanvas(t,e){const r=this.tasks.get(t);r?(r.canvas=e,r.render&&(r.render.destroy(),r.render=null),r.isSupport=()=>!1,r.canvasUpdated=!0,r.firstRendered=!1,r.renderRedyed=!1):x.h2("task not found",F,815)}async setPlayRate(t,e){const r=this.tasks.get(t);r&&(r.enableJitterBuffer&&o.f[15](r.stats+120)/o.f[15](r.stats+232)*1e3<=o.f[15](r.stats+280)&&(e=1),r.masterTimer.setRate(e),r.playRate=BigInt(Math.floor(Math.floor(100*e))))}async setRenderMode(t,e){const r=this.tasks.get(t);r&&r.render&&(r.renderMode=e,r.render.setRenderMode(e),(0,E.A)((()=>{r.pausing&&r.backFrame&&r.render&&r.render.render(r.backFrame,r.backFrame.alpha)})))}async setRenderRotate(t,e){const r=this.tasks.get(t);r&&r.render&&(r.renderRotate=e,r.render.setRotate(e),(0,E.A)((()=>{r.pausing&&r.backFrame&&r.render&&r.render.render(r.backFrame,r.backFrame.alpha)})))}async enableHorizontalFlip(t,e){const r=this.tasks.get(t);r&&r.render&&(r.flipHorizontal=e,r.render.enableHorizontalFlip(e),(0,E.A)((()=>{r.pausing&&r.backFrame&&r.render&&r.render.render(r.backFrame,r.backFrame.alpha)})))}async enableVerticalFlip(t,e){const r=this.tasks.get(t);r&&r.render&&(r.flipVertical=e,r.render.enableVerticalFlip(e),(0,E.A)((()=>{r.pausing&&r.backFrame&&r.render&&r.render.render(r.backFrame,r.backFrame.alpha)})))}async resize(t,e,r){const i=this.tasks.get(t);i&&i.render&&(i.render.viewport(e,r),(0,E.A)((()=>{i.pausing&&i.backFrame&&i.render&&i.render.render(i.backFrame,i.backFrame.alpha)})))}async setSkipRender(t,e){const r=this.tasks.get(t);r&&(r.skipRender=e,c.M[15](r.stats+260,0),r.lastRenderTimestamp=(0,g.A)())}async setMasterTime(t,e){const r=this.tasks.get(t);r&&r.masterTimer.setMasterTime(e)}async beforeSeek(t){const e=this.tasks.get(t);e&&(e.ended||e.frontBuffered||(x.Yz(`wait current pull front frame before seek, taskId: ${e.taskId}`,F,928),await new(s())((t=>{e.seekSync=t}))),e.seeking=!0,e.loop.stop(),e.backFrame&&((0,D.A)(e.backFrame)?e.avframePool.release(e.backFrame):(e.backFrame.close(),(0,U.z)(e.backFrame)&&e.backFrame.alpha.close())),e.frontFrame&&((0,D.A)(e.frontFrame)?e.avframePool.release(e.frontFrame):(e.frontFrame.close(),(0,U.z)(e.frontFrame)&&e.frontFrame.alpha.close())),e.frontFrame=null,e.backFrame=null,e.currentPTS=A.Dh,x.Yz(`before seek end, taskId: ${e.taskId}`,F,962))}async syncSeekTime(t,e,r){const i=this.tasks.get(t);if(i){for(;;){if(i.afterPullResolver)return i.ended=!0,i.adjust=N.None,i.backFrame=null,void x.R8(`pull video frame end after unregisterTask, taskId: ${t}`,F,975);if(i.backFrame=await this.pullFrame(i),d.ai(i.backFrame)&&i.backFrame<0)return i.ended=!0,i.adjust=N.None,i.backFrame=null,void x.R8(`pull video frame end after seek, taskId: ${t}`,F,985);if(e<BigInt(0)){x.pq(`use the first video frame because of the seek time${e} < 0`,F,990);break}const r=(0,D.A)(i.backFrame)?(0,y.Mr)(o.f[17](i.backFrame+104),i.backFrame+120,A.i0):(0,y.k)(BigInt(i.backFrame.timestamp),A.KR,A.i0);if(r>=e){i.ended=!1,c.M[17](i.stats+336,r),i.lastNotifyPTS=r,i.currentPTS=r,i.masterTimer.setMasterTime(e),i.lastMasterPts=e,x.Yz(`got first video frame after syncSeekTime, pts: ${(0,D.A)(i.backFrame)?o.f[17](i.backFrame+104):BigInt(i.backFrame.timestamp)}(${i.currentPTS}ms), taskId: ${i.taskId}`,F,1013);break}(0,D.A)(i.backFrame)?i.avframePool.release(i.backFrame):(i.backFrame.close(),(0,U.z)(i.backFrame)&&i.backFrame.alpha.close())}x.Yz(`sync seek time end, taskId: ${i.taskId}`,F,1036)}}async isEnd(t){const e=this.tasks.get(t);if(e)return e.ended}async afterSeek(t,e){const r=this.tasks.get(t);if(r){if(r.ended)return r.seeking=!1,r.controlIPCPort.notify("ended"),r.afterPullResolver&&(r.afterPullResolver(),r.afterPullResolver=null),void x.Yz(`after seek end with task ended, taskId: ${r.taskId}`,F,1058);if(r.frontFrame=await this.pullFrame(r),d.ai(r.frontFrame)&&r.frontFrame<0?(r.frontFrame=null,r.frontBuffered=!1,r.ended=!0):(r.frontBuffered=!0,r.ended=!1),r.afterPullResolver)return r.backFrame&&((0,D.A)(r.backFrame)?r.avframePool.release(r.backFrame):(r.backFrame.close(),(0,U.z)(r.backFrame)&&r.backFrame.alpha.close()),r.backFrame=null),r.frontFrame&&((0,D.A)(r.frontFrame)?r.avframePool.release(r.frontFrame):(r.frontFrame.close(),(0,U.z)(r.frontFrame)&&r.frontFrame.alpha.close()),r.frontFrame=null),r.seeking=!1,r.ended=!0,r.afterPullResolver(),r.afterPullResolver=null,void x.Yz(`after seek end with unregisterTask call, taskId: ${r.taskId}`,F,1103);r.adjust=N.None,r.lastRenderTimestamp=(0,g.A)(),r.currentPTS=(0,D.A)(r.backFrame)?(0,y.Mr)(o.f[17](r.backFrame+104),r.backFrame+120,A.i0):(0,y.k)(BigInt(r.backFrame.timestamp),A.KR,A.i0),c.M[17](r.stats+336,r.currentPTS),r.seeking=!1,r.pausing?r.backFrame&&r.render.render(r.backFrame,r.backFrame.alpha):r.loop.start(),x.Yz(`after seek end, taskId: ${r.taskId}`,F,1131)}}async renderNextFrame(t){const e=this.tasks.get(t);if(e&&e.backFrame){const t=(0,D.A)(e.backFrame)?(0,y.Mr)(o.f[17](e.backFrame+104),e.backFrame+120,A.i0):(0,y.k)(BigInt(e.backFrame.timestamp),A.KR,A.i0);e.render.render(e.backFrame,e.backFrame.alpha),c.M[17](e.stats+336,t),c.M[17](e.stats+160,o.f[17](e.stats+160)+BigInt(1)),e.currentPTS=t,e.lastMasterPts=t,this.swap(e)}}async registerTask(t){return this.tasks.has(t.taskId)?h.lh:await this.createTask(t)}async unregisterTask(t){const e=this.tasks.get(t);if(e){const r=!!e.loop;e.loop&&(await e.loop.stopBeforeNextTick(),e.loop.destroy(),e.loop=null),!r||e.ended||e.frontFrame||await new(s())((t=>{e.afterPullResolver=t})),e.render&&(e.renderRedyed&&e.render.clear(),e.render.destroy(),e.render=null),e.backFrame&&((0,D.A)(e.backFrame)?e.backFrame>0&&e.avframePool.release(e.backFrame):(e.backFrame.close(),(0,U.z)(e.backFrame)&&e.backFrame.alpha.close()),e.backFrame=null),e.frontFrame&&((0,D.A)(e.frontFrame)?e.frontFrame>0&&e.avframePool.release(e.frontFrame):(e.frontFrame.close(),(0,U.z)(e.frontFrame)&&e.frontFrame.alpha.close()),e.frontFrame=null),e.leftIPCPort.destroy(),e.controlIPCPort.destroy(),this.tasks.delete(t),x.Yz(`unregisterTask task, taskId: ${t}`,F,1220)}}}},30128:(t,e,r)=>{"use strict";r.d(e,{A:()=>u});var i,s,a=r(49859),n=r(74707),o=r.n(n),c=r(61499),l=r(12085);class h{constructor(){(0,a.A)(this,"min",void 0),(0,a.A)(this,"max",void 0)}}i=h.prototype,(s=new(o())).set("min",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),s.set("max",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:4,8:0}),(0,l.A)(i,c.Og,!0),(0,l.A)(i,c.dc,4),(0,l.A)(i,c.g7,8),(0,l.A)(i,c.JY,s);class u{constructor(){(0,a.A)(this,"channels",void 0),(0,a.A)(this,"sampleRate",void 0),(0,a.A)(this,"audioFrameSize",void 0),(0,a.A)(this,"audioPacketBytes",void 0),(0,a.A)(this,"audioPacketCount",void 0),(0,a.A)(this,"audioPacketQueueLength",void 0),(0,a.A)(this,"audioDropPacketCount",void 0),(0,a.A)(this,"audioDecodeErrorPacketCount",void 0),(0,a.A)(this,"audioEncodeErrorFrameCount",void 0),(0,a.A)(this,"audioFrameDecodeCount",void 0),(0,a.A)(this,"audioPacketEncodeCount",void 0),(0,a.A)(this,"audioFrameRenderCount",void 0),(0,a.A)(this,"audioFrameDropCount",void 0),(0,a.A)(this,"width",void 0),(0,a.A)(this,"height",void 0),(0,a.A)(this,"keyFrameInterval",void 0),(0,a.A)(this,"gop",void 0),(0,a.A)(this,"videoPacketBytes",void 0),(0,a.A)(this,"videoPacketCount",void 0),(0,a.A)(this,"videoPacketQueueLength",void 0),(0,a.A)(this,"videoDropPacketCount",void 0),(0,a.A)(this,"videoDecodeErrorPacketCount",void 0),(0,a.A)(this,"videoEncodeErrorFrameCount",void 0),(0,a.A)(this,"videoFrameDecodeCount",void 0),(0,a.A)(this,"videoPacketEncodeCount",void 0),(0,a.A)(this,"videoFrameRenderCount",void 0),(0,a.A)(this,"videoFrameDropCount",void 0),(0,a.A)(this,"keyFrameCount",void 0),(0,a.A)(this,"bufferDropBytes",void 0),(0,a.A)(this,"bufferReceiveBytes",void 0),(0,a.A)(this,"bufferSendBytes",void 0),(0,a.A)(this,"bufferOutputBytes",void 0),(0,a.A)(this,"audioBitrate",void 0),(0,a.A)(this,"videoBitrate",void 0),(0,a.A)(this,"videoDecodeFramerate",void 0),(0,a.A)(this,"videoRenderFramerate",void 0),(0,a.A)(this,"videoEncodeFramerate",void 0),(0,a.A)(this,"audioDecodeFramerate",void 0),(0,a.A)(this,"audioRenderFramerate",void 0),(0,a.A)(this,"audioEncodeFramerate",void 0),(0,a.A)(this,"audioFrameDecodeIntervalMax",void 0),(0,a.A)(this,"audioFrameRenderIntervalMax",void 0),(0,a.A)(this,"videoFrameDecodeIntervalMax",void 0),(0,a.A)(this,"videoFrameRenderIntervalMax",void 0),(0,a.A)(this,"bandwidth",void 0),(0,a.A)(this,"jitter",void 0),(0,a.A)(this,"jitterBuffer",void 0),(0,a.A)(this,"audioStutter",void 0),(0,a.A)(this,"videoStutter",void 0),(0,a.A)(this,"audiocodec",void 0),(0,a.A)(this,"videocodec",void 0),(0,a.A)(this,"firstAudioMuxDts",void 0),(0,a.A)(this,"lastAudioMuxDts",void 0),(0,a.A)(this,"firstVideoMuxDts",void 0),(0,a.A)(this,"lastVideoMuxDts",void 0),(0,a.A)(this,"audioCurrentTime",void 0),(0,a.A)(this,"videoCurrentTime",void 0),(0,a.A)(this,"audioNextTime",void 0),(0,a.A)(this,"videoNextTime",void 0)}}!function(t){var e=new(o());e.set("channels",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),e.set("sampleRate",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:4,8:0}),e.set("audioFrameSize",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:8,8:0}),e.set("audioPacketBytes",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:16,8:0}),e.set("audioPacketCount",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:24,8:0}),e.set("audioPacketQueueLength",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:32,8:0}),e.set("audioDropPacketCount",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:40,8:0}),e.set("audioDecodeErrorPacketCount",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:48,8:0}),e.set("audioEncodeErrorFrameCount",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:52,8:0}),e.set("audioFrameDecodeCount",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:56,8:0}),e.set("audioPacketEncodeCount",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:64,8:0}),e.set("audioFrameRenderCount",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:72,8:0}),e.set("audioFrameDropCount",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:80,8:0}),e.set("width",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:84,8:0}),e.set("height",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:88,8:0}),e.set("keyFrameInterval",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:92,8:0}),e.set("gop",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:96,8:0}),e.set("videoPacketBytes",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:104,8:0}),e.set("videoPacketCount",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:112,8:0}),e.set("videoPacketQueueLength",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:120,8:0}),e.set("videoDropPacketCount",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:128,8:0}),e.set("videoDecodeErrorPacketCount",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:136,8:0}),e.set("videoEncodeErrorFrameCount",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:140,8:0}),e.set("videoFrameDecodeCount",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:144,8:0}),e.set("videoPacketEncodeCount",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:152,8:0}),e.set("videoFrameRenderCount",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:160,8:0}),e.set("videoFrameDropCount",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:168,8:0}),e.set("keyFrameCount",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:176,8:0}),e.set("bufferDropBytes",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:184,8:0}),e.set("bufferReceiveBytes",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:192,8:0}),e.set("bufferSendBytes",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:200,8:0}),e.set("bufferOutputBytes",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:208,8:0}),e.set("audioBitrate",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:216,8:0}),e.set("videoBitrate",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:220,8:0}),e.set("videoDecodeFramerate",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:224,8:0}),e.set("videoRenderFramerate",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:228,8:0}),e.set("videoEncodeFramerate",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:232,8:0}),e.set("audioDecodeFramerate",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:236,8:0}),e.set("audioRenderFramerate",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:240,8:0}),e.set("audioEncodeFramerate",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:244,8:0}),e.set("audioFrameDecodeIntervalMax",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:248,8:0}),e.set("audioFrameRenderIntervalMax",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:252,8:0}),e.set("videoFrameDecodeIntervalMax",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:256,8:0}),e.set("videoFrameRenderIntervalMax",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:260,8:0}),e.set("bandwidth",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:264,8:0}),e.set("jitter",{0:19,1:0,2:0,3:0,4:0,5:0,6:0,7:272,8:0}),e.set("jitterBuffer",{0:h,1:0,2:0,3:0,4:0,5:0,6:0,7:280,8:0}),e.set("audioStutter",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:288,8:0}),e.set("videoStutter",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:292,8:0}),e.set("firstAudioMuxDts",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:296,8:0}),e.set("lastAudioMuxDts",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:304,8:0}),e.set("firstVideoMuxDts",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:312,8:0}),e.set("lastVideoMuxDts",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:320,8:0}),e.set("audioCurrentTime",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:328,8:0}),e.set("videoCurrentTime",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:336,8:0}),e.set("audioNextTime",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:344,8:0}),e.set("videoNextTime",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:352,8:0}),(0,l.A)(t,c.Og,!0),(0,l.A)(t,c.dc,8),(0,l.A)(t,c.g7,360),(0,l.A)(t,c.JY,e)}(u.prototype)},9781:(t,e,r)=>{"use strict";function i(t){return t.alpha&&t.alpha instanceof VideoFrame}r.d(e,{z:()=>i})},61634:(t,e,r)=>{"use strict";r.d(e,{Ay:()=>le,KU:()=>ne});var i=r(49859),s=r(96319),a=r.n(s),n=r(71426),o=r.n(n),c=r(53930),l=r.n(c),h=r(86226),u=r.n(h),d=r(85569),p=r.n(d),f=r(96984),m=r.n(f),v=r(61240),g=r.n(v),y=r(31721),A=r.n(y),b=r(52730),x=r.n(b),w=r(11393),k=r.n(w),T=r(94870),_=r.n(T),I=r(48079),S=r.n(I),P=r(56255),M=r.n(P),C=r(74707),R=r.n(C),E=r(61499),D=r(52277),B=r(74503),L=r(63939),U=r(9599),F=r(29170),$=r(77162),O=r(94300),N=r(87243),z=r(72480),V=r(31138),G=r(18667),W=r(88506),j=r(96172),H=r(8284),q=r(67672),Y=r(95335),K=r(76045),Q=r(56024),X=r(71517),J=r(59377),Z=r(33968),tt=r(8507),et=r(26429),rt=r(41324),it=r(88397),st=r(11473),at=r(11628),nt=r(28090),ot=r(47595),ct=r(4624),lt=r(95797),ht=r(48641),ut=r(36),dt=r(86834),pt=r(44328),ft=r(77231),mt=(r(30128),r(14686)),vt=r(67593),gt=r(28875),yt=r(10333),At=r(85224),bt=r(39365),xt=r(13724),wt=r(78201),kt=r(73783),Tt=r(43607),_t=r(76750),It=r(2368),St=r(79756),Pt=r(62751),Mt=r(548),Ct=r(72739),Rt=r(24310),Et=r(93147),Dt=r(94561),Bt=r(44690),Lt=r(84149),Ut=r(9705),Ft=r(77580),$t=r(79686),Ot=r(49847),Nt=r(71762),zt=r(29998),Vt=r(40097),Gt=r(21678),Wt=r(21862),jt=r(364),Ht=r(14619),qt=r(36773),Yt=r(42383),Kt=r(67603),Qt=r(50315),Xt=r(3680),Jt=r(61619),Zt=r(37837),te=r(80089),ee=r(30691),re=r(50011),ie=r(54058);const se="src/avplayer/AVPlayer.ts",ae={1:"cover",0:"contain"},ne=[27,173,12,196,225,139,167,30,2,1,3,4,20,19,14,15,16,5,6,68,69,17,18,71,7,61,171,97,96,78,86018,86017,86076,86028,86051,86021,86019,86056,86020,86023,86024,86052,86054,86053,86036,86057,86073,94226,94225,94230,94212,94232,94213,94210],oe=[27,173,225,139,167,86018,86017,86076,86028,86021],ce={enableHardware:!0,enableWebGPU:!0,enableWorker:!0,enableWebCodecs:!0,enableAudioWorklet:!0,loop:!1,enableJitterBuffer:!0,jitterBufferMax:4,jitterBufferMin:1,lowLatency:!1,preLoadTime:4};class le extends j.A{constructor(t){super(!0),(0,i.A)(this,"VideoDecoderThread",void 0),(0,i.A)(this,"VideoRenderThread",void 0),(0,i.A)(this,"VideoPipelineProxy",void 0),(0,i.A)(this,"GlobalData",void 0),(0,i.A)(this,"taskId",void 0),(0,i.A)(this,"subTaskId",void 0),(0,i.A)(this,"subtitleTaskId",void 0),(0,i.A)(this,"ext",void 0),(0,i.A)(this,"source",void 0),(0,i.A)(this,"ioIPCPort",void 0),(0,i.A)(this,"options",void 0),(0,i.A)(this,"ioloader2DemuxerChannel",void 0),(0,i.A)(this,"demuxer2VideoDecoderChannel",void 0),(0,i.A)(this,"demuxer2AudioDecoderChannel",void 0),(0,i.A)(this,"videoDecoder2VideoRenderChannel",void 0),(0,i.A)(this,"audioDecoder2AudioRenderChannel",void 0),(0,i.A)(this,"audioRender2AudioWorkletChannel",void 0),(0,i.A)(this,"audioSourceNode",void 0),(0,i.A)(this,"gainNode",void 0),(0,i.A)(this,"formatContext",void 0),(0,i.A)(this,"canvas",void 0),(0,i.A)(this,"updateCanvas",void 0),(0,i.A)(this,"video",void 0),(0,i.A)(this,"audio",void 0),(0,i.A)(this,"controller",void 0),(0,i.A)(this,"volume",void 0),(0,i.A)(this,"playRate",void 0),(0,i.A)(this,"renderMode",void 0),(0,i.A)(this,"renderRotate",void 0),(0,i.A)(this,"flipHorizontal",void 0),(0,i.A)(this,"flipVertical",void 0),(0,i.A)(this,"useMSE",void 0),(0,i.A)(this,"audioEnded",void 0),(0,i.A)(this,"videoEnded",void 0),(0,i.A)(this,"status",void 0),(0,i.A)(this,"lastStatus",void 0),(0,i.A)(this,"playChannels",void 0),(0,i.A)(this,"seekedTimestamp",void 0),(0,i.A)(this,"isLive_",void 0),(0,i.A)(this,"drmSystemKey",void 0),(0,i.A)(this,"drmSession",void 0),(0,i.A)(this,"stopPending",void 0),(0,i.A)(this,"statsController",void 0),(0,i.A)(this,"jitterBufferController",void 0),(0,i.A)(this,"selectedVideoStream",void 0),(0,i.A)(this,"selectedAudioStream",void 0),(0,i.A)(this,"selectedSubtitleStream",void 0),(0,i.A)(this,"lastSelectedInnerSubtitleStreamIndex",void 0),(0,i.A)(this,"subtitleRender",void 0),(0,i.A)(this,"externalSubtitleTasks",void 0),(0,i.A)(this,"changingStreamPending",void 0),(0,i.A)(this,"handleChangingStreamPendingTimer",void 0),this.options=Y.X$({},ce,t),this.taskId=(0,H.A)(),this.status=0,this.volume=1,this.playRate=1,this.renderMode=0,this.renderRotate=0,this.flipHorizontal=!1,this.flipVertical=!1,this.seekedTimestamp=ft.Dh,this.isLive_=!!t.isLive,this.GlobalData=(0,B.A)(D.M),this.statsController=new wt.A(this.GlobalData[E.o9]+32,!(et.USE_THREADS||!lt.A.worker||!this.options.enableWorker),this),this.externalSubtitleTasks=[],this.lastSelectedInnerSubtitleStreamIndex=-1,this.changingStreamPending=[],this.handleChangingStreamPendingTimer=new ie.A((()=>{this.handleChangingStreamPending()}),200,200),kt.Ts(this.GlobalData[E.o9]+24),kt.Ts(this.GlobalData[E.o9]+28),le.Instances.push(this),ct.pq(`create player, taskId: ${this.taskId}`,se,660)}get currentTime(){var t;return this.useMSE?BigInt(Math.floor(1e3*((null===(t=this.video||this.audio)||void 0===t?void 0:t.currentTime)||0))):this.selectedAudioStream&&this.selectedVideoStream?Tt.T9(this.GlobalData.stats.audioCurrentTime,this.GlobalData.stats.videoCurrentTime):this.selectedAudioStream?this.GlobalData.stats.audioCurrentTime:this.selectedVideoStream?this.GlobalData.stats.videoCurrentTime:BigInt(0)}isCodecIdSupported(t,e,r=!1){return t>=65536&&t<=65572||t>=69632&&t<=69683||Ct.zy(!r||1!==e&&0!==e?ne:oe,t)}isAttachmentPicture(t){return 0===L.f[15](t.codecpar)&&1024&t.disposition}findBestStream(t,e,r=!1){if(this.options.findBestStream)return this.options.findBestStream(t,e);const i=a()(t).call(t,(t=>L.f[15](t.codecpar)===e));if(i.length){if(1===i.length)return r&&this.isAttachmentPicture(i[0])?void 0:i[0];const t=a()(i).call(i,(t=>!!(1&t.disposition)&&this.isCodecIdSupported(L.f[15](t.codecpar+4),L.f[15](t.codecpar),r)));if(t.length){if(1===t.length||0!==e)return t[0];const r=o()(t).call(t,(t=>t.nbFrames!==BigInt(1)));return r||t[0]}let s=o()(i).call(i,(t=>this.isCodecIdSupported(L.f[15](t.codecpar+4),L.f[15](t.codecpar),r)&&!this.isAttachmentPicture(t)));if(s)return s;if(s=o()(i).call(i,(t=>!this.isAttachmentPicture(t))),s)return s;if(!r||!this.isAttachmentPicture(i[0]))return i[0]}}async checkUseMSE(t){{if(!lt.A.mse)return ct.R8("disable mse because of not support mse",se,759),!1;if(!lt.A.wasmPlayerSupported)return ct.R8("use mse because of not support wasm",se,765),!0;const e=this.findBestStream(this.formatContext.streams,0,!0),r=this.findBestStream(this.formatContext.streams,1,!0);if(t.video&&e&&!(0,_t.A)().isTypeSupported((0,yt.A)(e.codecpar)))return ct.R8(`can not support mse for codec: ${(0,yt.A)(e.codecpar)}, taskId: ${this.taskId}`,se,774),!1;if(t.audio&&r&&!(0,_t.A)().isTypeSupported((0,At.A)(r.codecpar)))return ct.R8(`can not support mse for codec: ${(0,At.A)(r.codecpar)}, taskId: ${this.taskId}`,se,778),!1;if(t.video&&e&&e.metadata.encryption||t.audio&&r&&r.metadata.encryption)return!0;if(10===this.formatContext.format)return!1;if(this.options.checkUseMES)return this.options.checkUseMES(this.formatContext.streams);if(e&&t.video){if((0,Rt.A)(e.codecpar))return ct.R8("use mse because of hdr",se,802),!0;if(this.isMediaStreamMode()&&!lt.A.trackGenerator){if(dt.A.firefox&&(0,ot.A)()&&(et.USE_THREADS||lt.A.worker&&this.options.enableWorker))return ct.R8("use mse because of cannot use captureStream in OffscreenCanvas on firefox",se,817),!0;if(dt.A.safari||Bt.A.ios)return ct.R8("disable mse because of cannot use captureStream in HTMLMediaElement on safari",se,822),!1}if(L.f[15](e.codecpar+56)*L.f[15](e.codecpar+60)>2073600){if(!lt.A.videoDecoder)return ct.R8("use mse because of cannot use webcodec VideoDecoder with resolution more then 1080p",se,831),!0;if(this.isMediaStreamMode()&&!lt.A.trackGenerator)return ct.R8("use mse because of cannot use MediaStreamTrackGenerator with resolution more then 1080p in MediaStream mode",se,836),!0;let t=null;0!==L.f[20](e.codecpar+12)&&(t=(0,mt.s3)(L.f[20](e.codecpar+12),L.f[15](e.codecpar+16)));try{const r={codec:(0,gt.A)(e.codecpar),codedWidth:L.f[15](e.codecpar+56),codedHeight:L.f[15](e.codecpar+60),description:1&L.f[15](e.codecpar+160)?void 0:t,hardwareAcceleration:(0,bt.C)(!0)};if(r.description||delete r.description,!(await VideoDecoder.isConfigSupported(r)).supported)return ct.R8("use mse because of cannot use webcodec hardwareAcceleration VideoDecoder with resolution more then 1080p",se,860),!0}catch(t){}}else if(L.f[15](e.codecpar+56)*L.f[15](e.codecpar+60)==2073600&&(dt.A.safari&&!dt.A.checkVersion(dt.A.version,"16.1",!0)||Bt.A.ios&&!dt.A.checkVersion(Bt.A.version,"16.1",!0))&&(0,pt.lb)((0,F.A)(e.codecpar+72,U.P))>30)return!0}}return!1}createCanvas(){const t=document.createElement("canvas");return t.id="avplayer-canvas-"+(0,H.A)(),t.className="avplayer-canvas",t.style.cssText="\n      width: 100%;\n      height: 100%;\n    ",t.ondragstart=()=>!1,l()(t,"currentTime",{enumerable:!0,configurable:!1,get:()=>Number(this.currentTime)/1e3,set:t=>{this.seek(BigInt(Math.floor(Math.floor(1e3*t))))}}),t}createVideo(){this.video&&!this.isMediaStreamMode()&&this.options.container.removeChild(this.video);const t=document.createElement("video");t.autoplay=!0,t.playsInline=!0,t.className="avplayer-video",t.style.cssText="\n      width: 100%;\n      height: 100%;\n    ",this.isMediaStreamMode()||this.options.container.appendChild(t),this.video=t}createAudio(){this.audio&&!this.isMediaStreamMode()&&this.options.container.removeChild(this.audio);const t=document.createElement("audio");t.autoplay=!0,t.className="avplayer-audio",this.isMediaStreamMode()||this.options.container.appendChild(t),this.audio=t}handleChangingStreamPending(){var t;const e=Number(this.currentTime)/1e3,r=[];u()(t=this.changingStreamPending).call(t,(t=>{t.start<=e?t.pending.resolve():r.push(t)})),this.changingStreamPending=r,this.changingStreamPending.length||this.handleChangingStreamPendingTimer.stop()}handleTimeupdate(t){let e=0;t.ontimeupdate=()=>{const r=t.currentTime;Math.abs(r-e)>=1&&(6===this.status&&(this.fire(nt.E9,[this.currentTime]),le.MSEThread.setCurrentTime(this.taskId,r)),e=r)},t.onended=()=>{this.audioEnded=!0,this.videoEnded=!0,this.handleEnded()},t.onwaiting=()=>{this.audio===t?this.GlobalData.stats.audioStutter++:(this.GlobalData.stats.audioStutter++,this.GlobalData.stats.videoStutter++)},t.oncanplay=()=>{6===this.status&&t.play()},t.onencrypted=async e=>{if(this.drmSession)return;this.drmSession=t.mediaKeys.createSession(),this.drmSession.onmessage=async t=>{var e;let r,i;if(this.isDash()){if(this.hasVideo()){const t=await le.IOThread.getCurrentProtection(this.taskId,0);null!=t&&t.url&&(r=t.url)}if(!r&&this.hasAudio()){const t=await le.IOThread.getCurrentProtection(this.taskId,1);null!=t&&t.url&&(r=t.url)}}if(null!==(e=this.options.drmSystemOptions)&&void 0!==e&&e.onRequest)i=await this.options.drmSystemOptions.onRequest(this.drmSystemKey,t.messageType,t.message,r);else if(this.options.drmSystemOptions.requestUrl){var s,a,n;i=await fetch(this.options.drmSystemOptions.requestUrl,{method:null!==(s=null===(a=this.options.drmSystemOptions)||void 0===a?void 0:a.method)&&void 0!==s?s:"POST",headers:null===(n=this.options.drmSystemOptions)||void 0===n?void 0:n.header,body:t.message}).then((t=>t.arrayBuffer()))}else if(r){var o,c,l,h;i=await fetch(r,{method:null!==(o=null===(c=this.options.drmSystemOptions)||void 0===c?void 0:c.method)&&void 0!==o?o:"POST",headers:null!==(l=null===(h=this.options.drmSystemOptions)||void 0===h?void 0:h.header)&&void 0!==l?l:{"Content-Type":"application/json"},body:t.message}).then((t=>t.arrayBuffer()))}i&&await this.drmSession.update(i)};let r=e.initDataType,i=e.initData;if(this.drmSystemKey===te.s.CLEARKEY){const t=[];if(this.selectedAudioStream){const e=this.selectedAudioStream.metadata.encryption;null!=e&&e.kid&&t.push((0,ee.A)(e.kid))}if(this.selectedVideoStream){const e=this.selectedVideoStream.metadata.encryption;if(null!=e&&e.kid){const r=(0,ee.A)(e.kid);r!==t[0]&&t.push(r)}}r="keyids",i=re.encode(p()({kids:t})).buffer}await this.drmSession.generateRequest(r,i)},t instanceof HTMLVideoElement&&(t.onresize=()=>{this.GlobalData.stats.width=t.videoWidth,this.GlobalData.stats.height=t.videoHeight})}async replayTo(t){let e=ft.Dh;if(this.isDash()||this.isHls()){if(this.subTaskId&&!this.selectedAudioStream||(e=await le.DemuxerThread.seek(this.taskId,t,16)),this.subTaskId&&this.selectedVideoStream){const r=await le.DemuxerThread.seek(this.subTaskId,t,16);e===ft.Dh&&(e=r)}this.subtitleTaskId&&this.selectedSubtitleStream&&await le.DemuxerThread.seek(this.subtitleTaskId,t,16)}else e=await le.DemuxerThread.seek(this.taskId,t,8);if(this.subtitleRender)for(let e=0;e<this.externalSubtitleTasks.length;e++)await le.DemuxerThread.seek(this.externalSubtitleTasks[0].taskId,t,8);if(this.fire(nt.E9,[t]),this.useMSE){var r;null!==(r=this.video||this.audio)&&void 0!==r&&r.src&&m().revokeObjectURL((this.video||this.audio).src),await le.MSEThread.restart(this.taskId);const e=await le.MSEThread.getMediaSource(this.taskId);var i,s;e&&(lt.A.workerMSE&&e instanceof MediaSourceHandle?(this.video||this.audio).srcObject=e:(this.video||this.audio).src=m().createObjectURL(e),this.video?(this.video.currentTime=Number(t)/1e3,this.video.playbackRate=this.playRate):this.audio&&(this.audio.currentTime=Number(t)/1e3,this.audio.playbackRate=this.playRate),await g().all([null===(i=this.video)||void 0===i?void 0:i.play(),null===(s=this.audio)||void 0===s?void 0:s.play()]))}else{var a;let r=20;u()(a=this.formatContext.streams).call(a,(t=>{0===L.f[15](t.codecpar)&&(r=Math.max(Math.ceil((0,pt.lb)((0,F.A)(t.codecpar+72,U.P))),r))})),this.audioDecoder2AudioRenderChannel&&(await le.AudioDecoderThread.resetTask(this.taskId),await le.AudioRenderThread.syncSeekTime(this.taskId,e>=0?e>t?e:t:ft.Dh,r),this.audioEnded=await le.AudioRenderThread.isEnd(this.taskId),this.audioEnded||(await le.AudioRenderThread.restart(this.taskId),this.controller.setTimeUpdateListenType(1))),this.audioSourceNode&&!this.audioEnded&&(await this.audioSourceNode.request("restart"),"suspended"!==le.audioContext.state&&"interrupted"!==le.audioContext.state||await le.AudioRenderThread.fakePlay(this.taskId)),this.videoDecoder2VideoRenderChannel&&(await this.VideoDecoderThread.resetTask(this.taskId),await this.VideoRenderThread.beforeSeek(this.taskId),await this.VideoRenderThread.syncSeekTime(this.taskId,e>=0?e>t?e:t:ft.Dh,r),this.videoEnded=await this.VideoRenderThread.isEnd(this.taskId),this.videoEnded||await this.VideoRenderThread.restart(this.taskId))}this.subtitleRender&&(this.subtitleRender.reset(),this.subtitleRender.start())}async handleEnded(){this.audioEnded&&this.videoEnded&&(ct.pq(`player ended, taskId: ${this.taskId}`,se,1185),this.options.loop&&!this.isLive_?(ct.pq(`loop play, taskId: ${this.taskId}`,se,1189),await this.replayTo(BigInt(0))):(this.status=7,this.fire(nt.hV),this.changingStreamPending.length=0))}isHls(){return"m3u8"===this.ext||"m3u"===this.ext}isDash(){return"mpd"===this.ext}getMinStartPTS(){let t=ft.Dh;for(const e of this.formatContext.streams)e.startTime!==ft.Dh&&(t=t===ft.Dh?(0,pt.k)(e.startTime,e.timeBase,ft.i0):Tt.jk(t,(0,pt.k)(e.startTime,e.timeBase,ft.i0)));return t<BigInt(1e3)?BigInt(0):t}async getResource(t,e,r){var i;const s=null!=e?`${t}-${e}`:t;if(le.Resource.has(s))return le.Resource.get(s);const a=this.options.getWasm?this.options.getWasm(t,e,r):(0,Kt.A)(null!==(i=this.options.wasmBaseUrl)&&void 0!==i?i:`https://cdn.jsdelivr.net/gh/zhaohappy/libmedia@${"v0.6.1-355-g72ba4aa7".split("-")[0].replace(/^[v|n]/,"")}/dist`,t,e);if(a){let t;if((dt.A.safari&&!dt.A.checkVersion(dt.A.version,"16.4",!0)||Bt.A.ios&&!dt.A.checkVersion(Bt.A.version,"16.4",!0))&&(q.Yj(a)||q.sv(a)))if(q.Yj(a)){const e={method:"GET",headers:{},mode:"cors",cache:"default",referrerPolicy:"no-referrer-when-downgrade"},r=await fetch(a,e);t=await r.arrayBuffer()}else t=a;else t=await(0,Dt.A)(a,0===r);return le.Resource.set(s,t),t}}async createSubtitleRender(t,e){var i,s,a,n;this.isMediaStreamMode()||(this.subtitleRender=new((await Promise.all([r.e(338),r.e(31)]).then(r.bind(r,40031))).default)({dom:this.canvas||this.video||this.options.container,getCurrentTime:()=>this.currentTime,avpacketList:this.GlobalData[E.o9],avpacketListMutex:this.GlobalData[E.o9]+24,codecpar:t.codecpar,container:this.options.container,videoWidth:null!==(i=L.f[15]((null===(s=this.selectedVideoStream)||void 0===s?void 0:s.codecpar)+56))&&void 0!==i?i:0,videoHeight:null!==(a=L.f[15]((null===(n=this.selectedVideoStream)||void 0===n?void 0:n.codecpar)+60))&&void 0!==a?a:0}),this.subtitleRender.setDemuxTask(e),this.selectedSubtitleStream=t,e===this.taskId&&(this.lastSelectedInnerSubtitleStreamIndex=t.index),le.DemuxerThread.connectStreamTask.transfer(this.subtitleRender.getDemuxerPort(e)).invoke(e,t.index,this.subtitleRender.getDemuxerPort(e)))}async loadExternalSubtitle(t){var e;if(1!==this.status&&2!==this.status||ct.h2("player has already destroyed",se,1333),t.source||ct.h2("external subtitle must has source",se,1337),A()(e=this.externalSubtitleTasks).call(e,(e=>e.source===t.source)))return void ct.R8("external subtitle has already loaded",se,1341);const r=(0,H.A)(),i=(0,vt.A)(this.options.enableWorker),s=Y.X$({taskId:r,streamId:-1,ioloader2DemuxerChannel:i},t);let a="",n=0,o=0;q.Yj(t.source)?(o|=4,a=tt.qg(t.source).file.split(".").pop(),n=await le.IOThread.registerTask.transfer(i.port1).invoke({type:0,info:{url:t.source},range:{from:-1,to:-1},taskId:r,options:{isLive:this.isLive_},rightPort:i.port1,stats:this.GlobalData[E.o9]+32})):(a=t.source.name.split(".").pop(),n=await le.IOThread.registerTask.transfer(i.port1).invoke({type:1,info:{file:t.source},range:{from:-1,to:-1},taskId:r,options:{isLive:this.isLive_},rightPort:i.port1,stats:this.GlobalData[E.o9]+32})),n<0&&ct.h2(`register io task failed, ret: ${n}, taskId: ${this.taskId}`,se,1405),await le.DemuxerThread.registerTask.transfer(i.port2).invoke({taskId:r,leftPort:i.port2,format:Pt.HR[a],stats:0,isLive:!1,flags:o,avpacketList:this.GlobalData[E.o9],avpacketListMutex:this.GlobalData[E.o9]+24}),n=await le.DemuxerThread.openStream(r),n<0&&ct.h2(`open external subtitle failed, ret: ${n}, taskId: ${r}`,se,1422);let c=await le.DemuxerThread.analyzeStreams(r);if(q.ai(c))return void ct.h2(`analyze stream failed, ret: ${c}`,se,1426);c.streams.length||ct.h2("not found any stream",se,1430);const l=c.streams[0];this.formatContext.streams.push(l),s.streamId=l.id,t.lang&&(l.metadata.language=t.lang),t.title&&(l.metadata.title=t.title);const h=8===this.status||6===this.status||9===this.status||10===this.status;return h&&await le.DemuxerThread.seek(r,this.currentTime,8),h&&!this.subtitleRender?(await this.createSubtitleRender(l,r),this.subtitleRender.start()):this.subtitleRender&&await le.DemuxerThread.connectStreamTask.transfer(this.subtitleRender.getDemuxerPort(r)).invoke(r,l.index,this.subtitleRender.getDemuxerPort(r)),await le.DemuxerThread.startDemux(r,!1,10),this.externalSubtitleTasks.push(s),this.fire(nt.xv),0}async load(t,e={}){var r;0!==this.status&&7!==this.status&&8!==this.status&&6!==this.status&&4!==this.status&&ct.h2("cannot call load on player status without (stopped, ended, paused, played, loaded)",se,1488),7!==this.status&&8!==this.status&&6!==this.status&&4!==this.status||(ct.pq(`call stop before load because of player status ${this.status}`,se,1496),await this.stop(!0)),ct.pq(`call load, taskId: ${this.taskId}`,se,1500),this.status=3,this.fire(nt.F5),q.zM(e.isLive)?this.isLive_=e.isLive:this.isLive_=!!this.options.isLive,this.controller=new at.A(this,this.options.enableWorker),this.ioloader2DemuxerChannel=(0,vt.A)(this.options.enableWorker),(0,mt.sO)(this.GlobalData[E.o9]+32,0,360),this.externalSubtitleTasks.length=0,await le.startDemuxPipeline(this.options.enableWorker);let i=0,s=0;if(q.Yj(t)){i|=4;let{info:r,type:a,ext:n}=await(0,jt.A)(t,e.ext,e.http);this.ext=n,s=await le.IOThread.registerTask.transfer(this.ioloader2DemuxerChannel.port1).invoke({type:a,info:{...r,httpOptions:e.http,webtransportOptions:e.webtransport,websocketOptions:e.websocket,uri:e.uri},range:{from:-1,to:-1},taskId:this.taskId,options:Y.X$({},e.ioLoaderOptions||{},{isLive:this.isLive_}),rightPort:this.ioloader2DemuxerChannel.port1,stats:this.GlobalData[E.o9]+32})}else t instanceof File?(this.isLive_=!1,this.ext=t.name.split(".").pop(),s=await le.IOThread.registerTask.transfer(this.ioloader2DemuxerChannel.port1).invoke({type:1,info:{file:t},range:{from:-1,to:-1},taskId:this.taskId,options:Y.X$({},e.ioLoaderOptions||{},{isLive:!1}),rightPort:this.ioloader2DemuxerChannel.port1,stats:this.GlobalData[E.o9]+32})):t instanceof Ot.A?(i|=x()(t)||0,this.ext=t.ext,this.ioIPCPort=new Lt.Ay(this.ioloader2DemuxerChannel.port1),this.ioIPCPort.on(Lt.S3,(async e=>{switch(e.method){case"open":try{const r=await t.open();if(r<0){ct.z3(`custom loader open error, ${r}, taskId: ${this.taskId}`,se,1585),this.ioIPCPort.reply(e,null,r);break}this.ioIPCPort.reply(e,r)}catch(t){ct.z3(`loader open error, ${t}, taskId: ${this.taskId}`,se,1592),this.ioIPCPort.reply(e,null,t)}break;case"read":{const r=e.params.pointer,i=e.params.length,s=e.params.ioloaderOptions,a=le.IODemuxProxy?new Uint8Array(i):(0,mt.JW)(r,i);try{const r=await t.read(a,s);r<0?this.ioIPCPort.reply(e,r,null):(this.GlobalData.stats.bufferReceiveBytes+=BigInt(0|r),this.ioIPCPort.reply(e,le.IODemuxProxy?a.subarray(0,r):r,null,le.IODemuxProxy?[a.buffer]:null))}catch(t){ct.z3(`loader read error, ${t}, taskId: ${this.taskId}`,se,1615),this.ioIPCPort.reply(e,Ut.LR)}break}case"write":{const r=e.params.pointer,i=e.params.length,s=(0,mt.JW)(r,i);try{const r=await t.write(s);this.GlobalData.stats.bufferSendBytes+=i,this.ioIPCPort.reply(e,r)}catch(t){ct.z3(`loader write error, ${t}, taskId: ${this.taskId}`,se,1637),this.ioIPCPort.reply(e,Ut.LR)}break}case"seek":{const r=e.params.pos,i=e.params.ioloaderOptions;try{const s=await t.seek(r,i);if(s<0){ct.z3(`custom loader seek error, ${s}, taskId: ${this.taskId}`,se,1653),this.ioIPCPort.reply(e,null,s);break}this.ioIPCPort.reply(e,s)}catch(t){ct.z3(`loader seek error, ${t}, taskId: ${this.taskId}`,se,1660),this.ioIPCPort.reply(e,null,t)}break}case"size":this.ioIPCPort.reply(e,await t.size())}}))):ct.h2("invalid source",se,1674);s<0&&ct.h2(`register io task failed, ret: ${s}, taskId: ${this.taskId}`,se,1678),(this.isDash()||this.isHls())&&(i|=2);const a=Y.X$({},e.formatOptions||{});if(this.isDash()||this.isHls()){await le.IOThread.open(this.taskId);const t=await le.IOThread.hasAudio(this.taskId),e=await le.IOThread.hasVideo(this.taskId);t&&e?(this.subTaskId=(0,H.A)(),await le.DemuxerThread.registerTask.transfer(this.ioloader2DemuxerChannel.port2,this.controller.getDemuxerControlPort()).invoke({taskId:this.taskId,leftPort:this.ioloader2DemuxerChannel.port2,controlPort:this.controller.getDemuxerControlPort(),format:Pt.HR[this.ext],stats:this.GlobalData[E.o9]+32,isLive:this.isLive_,flags:i,ioloaderOptions:{mediaType:1},formatOptions:a,avpacketList:this.GlobalData[E.o9],avpacketListMutex:this.GlobalData[E.o9]+24}),await le.DemuxerThread.registerTask({taskId:this.subTaskId,mainTaskId:this.taskId,flags:i,format:Pt.HR[this.ext],stats:this.GlobalData[E.o9]+32,isLive:this.isLive_,ioloaderOptions:{mediaType:0},formatOptions:a,avpacketList:this.GlobalData[E.o9],avpacketListMutex:this.GlobalData[E.o9]+24})):(t||e)&&await le.DemuxerThread.registerTask.transfer(this.ioloader2DemuxerChannel.port2,this.controller.getDemuxerControlPort()).invoke({taskId:this.taskId,leftPort:this.ioloader2DemuxerChannel.port2,controlPort:this.controller.getDemuxerControlPort(),format:Pt.HR[this.ext],stats:this.GlobalData[E.o9]+32,isLive:this.isLive_,flags:i,ioloaderOptions:{mediaType:t?1:0},formatOptions:a,avpacketList:this.GlobalData[E.o9],avpacketListMutex:this.GlobalData[E.o9]+24})}else"rtsp"!==this.ext&&"rtmp"!==this.ext||(a.uri=e.uri||t.replace(/^\S+:\/\//,this.ext+"://")),await le.DemuxerThread.registerTask.transfer(this.ioloader2DemuxerChannel.port2,this.controller.getDemuxerControlPort()).invoke({taskId:this.taskId,leftPort:this.ioloader2DemuxerChannel.port2,controlPort:this.controller.getDemuxerControlPort(),format:Pt.HR[this.ext],formatOptions:a,stats:this.GlobalData[E.o9]+32,isLive:this.isLive_,flags:i,avpacketList:this.GlobalData[E.o9],avpacketListMutex:this.GlobalData[E.o9]+24});(this.isDash()||this.isHls())&&await le.IOThread.hasSubtitle(this.taskId)&&(this.subtitleTaskId=(0,H.A)(),await le.DemuxerThread.registerTask({taskId:this.subtitleTaskId,mainTaskId:this.taskId,flags:i,format:Pt.HR[this.ext],stats:this.GlobalData[E.o9]+32,isLive:this.isLive_,ioloaderOptions:{mediaType:3},avpacketList:this.GlobalData[E.o9],avpacketListMutex:this.GlobalData[E.o9]+24})),this.fire(nt.Gd,[0]);let n=3e3;e.maxProbeDuration&&(n=Math.floor(1e3*e.maxProbeDuration)),s=await le.DemuxerThread.openStream(this.taskId,n),s<0&&ct.h2(`open stream failed, ret: ${s}, taskId: ${this.taskId}`,se,1801),this.fire(nt.Gd,[1,this.ext]);let o=await le.DemuxerThread.analyzeStreams(this.taskId);if(q.ai(o))ct.h2(`analyze stream failed, ret: ${o}`,se,1808);else{if(o.streams.length||ct.h2("not found any stream",se,1812),this.subTaskId){var c;s=await le.DemuxerThread.openStream(this.subTaskId,n),s<0&&ct.h2(`open stream failed, ret: ${s}, taskId: ${this.subTaskId}`,se,1818);const t=await le.DemuxerThread.analyzeStreams(this.subTaskId);if(q.ai(t))return void ct.h2(`analyze stream failed, ret: ${t}`,se,1822);t.streams.length||ct.h2("not found any stream",se,1826),o.streams=k()(c=o.streams).call(c,t.streams)}if(this.subtitleTaskId){var l;s=await le.DemuxerThread.openStream(this.subtitleTaskId,n),s<0&&ct.h2(`open subtitle stream failed, ret: ${s}, taskId: ${this.subtitleTaskId}`,se,1834);const t=await le.DemuxerThread.analyzeStreams(this.subtitleTaskId);if(q.ai(t))return void ct.h2(`analyze subtitle stream failed, ret: ${t}`,se,1838);t.streams.length||ct.h2("not found any stream",se,1842),o.streams=k()(l=o.streams).call(l,t.streams)}if(this.formatContext=o,this.source=t,e.externalSubtitles)for(let t=0;t<e.externalSubtitles.length;t++)await this.loadExternalSubtitle(e.externalSubtitles[t]);if(u()(r=o.streams).call(r,(t=>{1===L.f[15](t.codecpar)?this.GlobalData.stats.audiocodec=(0,St.A)(t.codecpar):0===L.f[15](t.codecpar)&&(this.GlobalData.stats.videocodec=(0,gt.A)(t.codecpar))})),this.isHls()||this.isDash()){const t=1e3*await le.IOThread.getDuration(this.taskId);if(t>0)for(let e=0;e<this.formatContext.streams.length;e++)this.formatContext.streams[e].duration=(0,pt.k)(BigInt(Math.floor(t)),ft.i0,this.formatContext.streams[e].timeBase)}if(this.isLive_&&this.options.enableJitterBuffer){const t=Math.max(this.source instanceof Ot.A?this.source.minBuffer:await le.IOThread.getMinBuffer(this.taskId),this.options.jitterBufferMin);let e=this.options.jitterBufferMax;e<=t&&(e=t+(this.isHls()||this.isDash()?t:1)),this.jitterBufferController=new It.A({stats:this.GlobalData[E.o9]+32,jitterBuffer:this.GlobalData.stats[E.o9]+280,lowLatencyStart:!(this.isHls()||this.isDash()),lowLatency:this.options.lowLatency,useMse:this.useMSE,max:e,min:t,observer:{onCroppingBuffer:t=>{var e;ct.Yz(`cropping buffer by jitter buffer, max: ${t}, taskId: ${this.taskId}`,se,1902),null===(e=le.DemuxerThread)||void 0===e||e.croppingAVPacketQueue(this.taskId,BigInt(0|t))},onSetPlayRate:t=>{ct.Yz(`set play rate by jitter buffer, rate: ${t}, taskId: ${this.taskId}`,se,1906),this.useMSE?(le.MSEThread.setPlayRate(this.taskId,t),this.video?this.video.playbackRate=t:this.audio&&(this.audio.playbackRate=t)):(this.audioDecoder2AudioRenderChannel&&le.AudioRenderThread.setPlayTempo(this.taskId,t),this.videoDecoder2VideoRenderChannel&&this.VideoRenderThread.setPlayRate(this.taskId,t))}}})}if(ct.pq(`taskId: ${this.taskId}\nAVPlayer version v0.6.1-355-g72ba4aa7 Copyright (c) 2024-present the libmedia developers\n`+(0,Mt.Ay)([o],[{from:q.Yj(t)?t:t.name,tag:"Input",isLive:this.isLive_}]),se,1929),!this.isLive_){var h;let t=ft.Dh;u()(h=o.streams).call(h,(e=>{if(e.startTime!==ft.Dh){const r=(0,pt.k)(e.startTime,e.timeBase,ft.i0);1!==L.f[15](e.codecpar)&&0!==L.f[15](e.codecpar)||(r<t||t===-BigInt(1))&&(t=r)}})),t<BigInt(0)&&t!==ft.Dh?await this.seek(BigInt(0)):t>0&&this.isHls()&&await le.IOThread.setStart(this.taskId,Number(t)/1e3)}this.changingStreamPending.length=0,this.status=4,this.fire(nt.S2)}}async playUseMSE(t){{await le.startMSEPipeline(this.options.enableWorker);const r=this.findBestStream(this.formatContext.streams,0,!0),i=this.findBestStream(this.formatContext.streams,1,!0);let s=!1,a="",n=[];const o=async t=>{const e=(0,X.Un)(t.codecpar+20,t.codecpar+24,24);let r;if(e)r=(0,Qt.ZK)((0,mt.s3)(L.f[20](e),L.f[25](e+4)));else if(this.isDash()){const e=await le.IOThread.getCurrentProtection(this.taskId,L.f[15](t.codecpar));if(e){r=[{systemId:e.systemId,keyIds:[e.kid],data:new Uint8Array(0)}];const i=(0,Qt.bE)(r),s=(0,Zt.sY)(i.length);(0,mt.lW)(s,i.length,i),(0,X.$W)(t.codecpar+20,t.codecpar+24,24,s,i.length)}}const i=t.metadata.encryption;if(r&&i){for(let e=0;e<r.length;e++){const o=(0,Xt.A)(r[e].systemId);if((!a||a===o)&&o)try{const e=[{initDataTypes:["keyids","cenc"]}];var s;if(0===L.f[15](t.codecpar))e[0].videoCapabilities=[{contentType:(0,yt.A)(t.codecpar),encryptionScheme:(0,Jt.A)(i.schemeType),robustness:null===(s=this.options.drmSystemOptions)||void 0===s?void 0:s.videoRobustness}];else if(1===L.f[15](t.codecpar)){var n;e[0].audioCapabilities=[{contentType:(0,At.A)(t.codecpar),robustness:null===(n=this.options.drmSystemOptions)||void 0===n?void 0:n.audioRobustness}]}return await navigator.requestMediaKeySystemAccess(o,e),{key:o,config:e}}catch(t){ct.R8(`drm system ${o} error ${t}`,se,2039)}}a&&ct.h2("audio and video has different drm system key",se,2044)}};if(await le.MSEThread.registerTask.transfer(this.controller.getMuxerControlPort()).invoke({taskId:this.taskId,stats:this.GlobalData[E.o9]+32,controlPort:this.controller.getMuxerControlPort(),isLive:this.isLive_,avpacketList:this.GlobalData[E.o9],avpacketListMutex:this.GlobalData[E.o9]+24,enableJitterBuffer:!!this.jitterBufferController},this.seekedTimestamp>=BigInt(0)?this.seekedTimestamp:ft.Dh),r&&t.video){this.fire(nt.Gd,[3,r]),s=!0,this.selectedVideoStream=r,this.videoEnded=!1,this.demuxer2VideoDecoderChannel=(0,vt.A)(this.options.enableWorker);const t=await o(r);t&&(a=t.key,n.push(...t.config)),await le.DemuxerThread.connectStreamTask.transfer(this.demuxer2VideoDecoderChannel.port1).invoke(this.subTaskId||this.taskId,r.index,this.demuxer2VideoDecoderChannel.port1),await le.MSEThread.addStream.transfer(this.demuxer2VideoDecoderChannel.port2).invoke(this.taskId,r.index,(0,Nt.Wu)(r.codecpar),r.timeBase,r.metadata,r.startTime,this.demuxer2VideoDecoderChannel.port2)}if(i&&t.audio){this.fire(nt.Gd,[2,i]),this.selectedAudioStream=i,this.audioEnded=!1,this.demuxer2AudioDecoderChannel=(0,vt.A)(this.options.enableWorker);const t=await o(i);t&&(a=t.key,n.push(...t.config)),await le.DemuxerThread.connectStreamTask.transfer(this.demuxer2AudioDecoderChannel.port1).invoke(this.taskId,i.index,this.demuxer2AudioDecoderChannel.port1),await le.MSEThread.addStream.transfer(this.demuxer2AudioDecoderChannel.port2).invoke(this.taskId,i.index,(0,Nt.Wu)(i.codecpar),i.timeBase,i.metadata,i.startTime,this.demuxer2AudioDecoderChannel.port2)}if(s?this.createVideo():this.createAudio(),a){var e;const t=await navigator.requestMediaKeySystemAccess(a,n),r=await t.createMediaKeys();null!==(e=this.options.drmSystemOptions)&&void 0!==e&&e.certificate&&await r.setServerCertificate(this.options.drmSystemOptions.certificate).catch((t=>{ct.z3(`setServerCertificate failed, ${t}`,se,2127)})),await(this.video||this.audio).setMediaKeys(r),this.drmSystemKey=a}le.MSEThread.setPlayRate(this.taskId,this.playRate);const c=await le.MSEThread.getMediaSource(this.taskId);c&&(dt.A.safari&&await le.MSEThread.isManagedMediaSource(this.taskId)&&((this.video||this.audio).disableRemotePlayback=!0),lt.A.workerMSE&&c instanceof MediaSourceHandle?(this.video||this.audio).srcObject=c:(this.video||this.audio).src=m().createObjectURL(c),this.handleTimeupdate(this.video||this.audio)),this.video&&!this.selectedAudioStream&&(this.video.muted=!0),(this.video||this.audio).playbackRate=this.playRate}}async playUseDecoder(t){let e=BigInt(0),r=BigInt(0),i=this.findBestStream(this.formatContext.streams,0),s=this.findBestStream(this.formatContext.streams,1);if(i||s||ct.h2("not has any stream to play",se,2167),i&&!this.isCodecIdSupported(L.f[15](i.codecpar+4),0)&&(i=null,ct.R8("video codec not support",se,2172)),s&&!this.isCodecIdSupported(L.f[15](s.codecpar+4),1)&&(s=null,ct.R8("audio codec not support",se,2176)),s||i||ct.h2("not has any supported stream to play",se,2179),i&&t.video){this.fire(nt.Gd,[3,i]),this.selectedVideoStream=i,await le.startVideoRenderPipeline(this.options.enableWorker),await this.createVideoDecoderThread(this.options.enableWorker),r=(0,pt.k)(i.startTime,i.timeBase,ft.i0),this.demuxer2VideoDecoderChannel=(0,vt.A)(this.options.enableWorker),this.videoDecoder2VideoRenderChannel=(0,vt.A)(this.options.enableWorker);let t=await this.getResource("decoder",L.f[15](i.codecpar+4),L.f[15](i.codecpar));t||(lt.A.videoDecoder?(await VideoDecoder.isConfigSupported({codec:(0,gt.A)(i.codecpar)})).supported||ct.h2(`${(0,Mt.eG)(L.f[15](i.codecpar),L.f[15](i.codecpar+4))} codecId ${L.f[15](i.codecpar+4)} not support`,se,2201):ct.h2(`${(0,Mt.eG)(L.f[15](i.codecpar),L.f[15](i.codecpar+4))} codecId ${L.f[15](i.codecpar+4)} not support`,se,2205)),await this.VideoDecoderThread.registerTask.transfer(this.demuxer2VideoDecoderChannel.port2,this.videoDecoder2VideoRenderChannel.port1).invoke({taskId:this.taskId,resource:t,leftPort:this.demuxer2VideoDecoderChannel.port2,rightPort:this.videoDecoder2VideoRenderChannel.port1,stats:this.GlobalData[E.o9]+32,enableHardware:this.options.enableHardware&&this.options.enableWebCodecs&&!(1024&i.disposition),avpacketList:this.GlobalData[E.o9],avpacketListMutex:this.GlobalData[E.o9]+24,avframeList:this.GlobalData[E.o9]+12,avframeListMutex:this.GlobalData[E.o9]+28,preferWebCodecs:!((0,Rt.A)(i.codecpar)||(0,Et.A)(i.codecpar)&&139!==L.f[15](i.codecpar+4)&&167!==L.f[15](i.codecpar+4)&&225!==L.f[15](i.codecpar+4)||!this.options.enableWebCodecs||1024&i.disposition),preferLatency:this.isLive(),keepAlpha:!0}),await this.VideoDecoderThread.open(this.taskId,(0,Nt.Wu)(i.codecpar))<0&&ct.h2(`cannot open video ${(0,Mt.eG)(L.f[15](i.codecpar),L.f[15](i.codecpar+4))} decoder`,se,2239),await le.DemuxerThread.connectStreamTask.transfer(this.demuxer2VideoDecoderChannel.port1).invoke(this.subTaskId||this.taskId,i.index,this.demuxer2VideoDecoderChannel.port1),this.VideoDecoderThread.setPlayRate(this.taskId,this.playRate)}if(s&&t.audio){var n;this.fire(nt.Gd,[2,s]),this.selectedAudioStream=s,await le.startAudioPipeline(this.options.enableWorker),"suspended"!==le.audioContext.state&&"interrupted"!==le.audioContext.state||await g().race([le.audioContext.resume(),new xt.A(.1)]),e=(0,pt.k)(s.startTime,s.timeBase,ft.i0),this.demuxer2AudioDecoderChannel=(0,vt.A)(this.options.enableWorker),this.audioDecoder2AudioRenderChannel=(0,vt.A)(this.options.enableWorker);let t=await this.getResource("decoder",L.f[15](s.codecpar+4),L.f[15](s.codecpar));t||(lt.A.audioDecoder?(await AudioDecoder.isConfigSupported({codec:(0,St.A)(s.codecpar),sampleRate:L.f[15](s.codecpar+136),numberOfChannels:L.f[15](s.codecpar+116)})).supported||ct.h2(`${(0,Mt.eG)(L.f[15](s.codecpar),L.f[15](s.codecpar+4))} codecId ${L.f[15](s.codecpar+4)} not support`,se,2278):ct.h2(`${(0,Mt.eG)(L.f[15](s.codecpar),L.f[15](s.codecpar+4))} codecId ${L.f[15](s.codecpar+4)} not support`,se,2282)),await le.AudioDecoderThread.registerTask.transfer(this.demuxer2AudioDecoderChannel.port2,this.audioDecoder2AudioRenderChannel.port1).invoke({taskId:this.taskId,resource:t,leftPort:this.demuxer2AudioDecoderChannel.port2,rightPort:this.audioDecoder2AudioRenderChannel.port1,stats:this.GlobalData[E.o9]+32,avpacketList:this.GlobalData[E.o9],avpacketListMutex:this.GlobalData[E.o9]+24,avframeList:this.GlobalData[E.o9]+12,avframeListMutex:this.GlobalData[E.o9]+28}),await le.AudioDecoderThread.open(this.taskId,(0,Nt.Wu)(s.codecpar))<0&&ct.h2(`cannot open audio ${(0,Mt.eG)(L.f[15](s.codecpar),L.f[15](s.codecpar+4))} decoder`,se,2303),await le.DemuxerThread.connectStreamTask.transfer(this.demuxer2AudioDecoderChannel.port1).invoke(this.taskId,s.index,this.demuxer2AudioDecoderChannel.port1);const r=a()(n=this.formatContext.streams).call(n,(t=>1===L.f[15](t.codecpar)));if(r.length>1)for(let t=0;t<r.length;t++)r[t]!==s&&await le.DemuxerThread.addPendingStream(this.taskId,r[t].index)}if(this.videoDecoder2VideoRenderChannel){let t;if(this.isMediaStreamMode())if(lt.A.trackGenerator){const e=new MediaStreamTrackGenerator({kind:"video"});t=e.writable;const r=this.options.container,i=r.getVideoTracks()[0];i&&r.removeTrack(i),r.addTrack(e)}else{this.canvas=this.createCanvas(),this.canvas.width=L.f[15](i.codecpar+56),this.canvas.height=L.f[15](i.codecpar+60),t=(0,ot.A)()&&(et.USE_THREADS||lt.A.worker&&this.options.enableWorker)?this.canvas.transferControlToOffscreen():this.canvas;const e=this.canvas.captureStream(),r=this.options.container,s=r.getVideoTracks()[0];s&&r.removeTrack(s),r.addTrack(e.getVideoTracks()[0])}else this.canvas=this.createCanvas(),this.canvas.width=this.options.container.offsetWidth*devicePixelRatio,this.canvas.height=this.options.container.offsetHeight*devicePixelRatio,this.options.container.appendChild(this.canvas),t=(0,ot.A)()&&(et.USE_THREADS||lt.A.worker&&this.options.enableWorker)?this.canvas.transferControlToOffscreen():this.canvas;i.metadata.matrix&&!this.useMSE&&(this.renderRotate=-Math.atan2(i.metadata.matrix[3],i.metadata.matrix[0])*(180/Math.PI)),await this.VideoRenderThread.registerTask.transfer(this.videoDecoder2VideoRenderChannel.port2,this.controller.getVideoRenderControlPort(),t).invoke({taskId:this.taskId,isLive:this.isLive_,leftPort:this.videoDecoder2VideoRenderChannel.port2,controlPort:this.controller.getVideoRenderControlPort(),canvas:t,renderMode:this.renderMode,renderRotate:this.renderRotate,flipHorizontal:this.flipHorizontal,flipVertical:this.flipVertical,viewportWidth:this.isMediaStreamMode()?L.f[15](i.codecpar+56):this.options.container.offsetWidth,viewportHeight:this.isMediaStreamMode()?L.f[15](i.codecpar+60):this.options.container.offsetHeight,devicePixelRatio:this.isMediaStreamMode()?1:devicePixelRatio,stats:this.GlobalData[E.o9]+32,enableWebGPU:this.options.enableWebGPU,startPTS:this.isLive_?(0,pt.k)(i.startTime<BigInt(1e3)?BigInt(0):i.startTime,i.timeBase,ft.i0):this.getMinStartPTS(),avframeList:this.GlobalData[E.o9]+12,avframeListMutex:this.GlobalData[E.o9]+28,enableJitterBuffer:!!this.jitterBufferController&&!this.audioDecoder2AudioRenderChannel,sar:(0,pt.lb)((0,F.A)(i.codecpar+64,U.P))}),this.videoEnded=!1,this.VideoRenderThread.setPlayRate(this.taskId,this.playRate)}if(this.audioDecoder2AudioRenderChannel){this.audioRender2AudioWorkletChannel=new MessageChannel,this.isMediaStreamMode()?this.playChannels=2:this.playChannels=Math.min(L.f[15](s.codecpar+116),le.audioContext.destination.maxChannelCount||2);let e,r=await this.getResource("resampler"),i=await this.getResource("stretchpitcher");if(r||ct.h2("resampler not found",se,2431),i||ct.h2("stretch pitcher not found",se,2434),await le.AudioRenderThread.registerTask.transfer(this.audioDecoder2AudioRenderChannel.port2,this.audioRender2AudioWorkletChannel.port1,this.controller.getAudioRenderControlPort()).invoke({taskId:this.taskId,isLive:this.isLive_,leftPort:this.audioDecoder2AudioRenderChannel.port2,rightPort:this.audioRender2AudioWorkletChannel.port1,controlPort:this.controller.getAudioRenderControlPort(),playFormat:8,playSampleRate:le.audioContext.sampleRate,playChannels:this.playChannels,resamplerResource:r,stretchpitcherResource:i,stats:this.GlobalData[E.o9]+32,startPTS:this.isLive_?(0,pt.k)(s.startTime<BigInt(1e3)?BigInt(0):s.startTime,s.timeBase,ft.i0):this.getMinStartPTS(),avframeList:this.GlobalData[E.o9]+12,avframeListMutex:this.GlobalData[E.o9]+28,enableJitterBuffer:!!this.jitterBufferController,audioMasterForce:t.audioMasterForce}),e=lt.A.audioWorklet&&this.options.enableAudioWorklet?it.A:ht.A,this.audioSourceNode=new e(le.audioContext,{onEnded:()=>{this.onAudioEnded()},onFirstRendered:()=>{this.onFirstAudioRendered()},onStutter:()=>{this.onAudioStutter()}},{numberOfInputs:1,numberOfOutputs:1,outputChannelCount:[this.playChannels],isMainWorker:!!le.AudioPipelineProxy}),await this.audioSourceNode.request("init",{memory:!et.USE_THREADS||dt.A.safari&&!dt.A.checkVersion(dt.A.version,"16.1",!0)||Bt.A.ios&&!dt.A.checkVersion(Bt.A.version,"16.1",!0)?null:st.ce,bufferLength:this.options.audioWorkletBufferLength}),le.AudioRenderThread.setPlayTempo(this.taskId,this.playRate),this.gainNode=le.audioContext.createGain(),this.audioSourceNode.connect(this.gainNode),this.isMediaStreamMode()){const t=le.audioContext.createMediaStreamDestination();this.gainNode.connect(t);const e=this.options.container,r=e.getAudioTracks()[0];r&&e.removeTrack(r),e.addTrack(t.stream.getAudioTracks()[0])}else this.gainNode.connect(le.audioContext.destination);this.setVolume(this.volume),this.audioEnded=!1}this.audioDecoder2AudioRenderChannel?this.controller.setTimeUpdateListenType(1):this.videoDecoder2VideoRenderChannel&&this.controller.setTimeUpdateListenType(0),this.videoDecoder2VideoRenderChannel&&this.audioDecoder2AudioRenderChannel&&Tt.tn(r-e)>BigInt(1e4)&&this.controller.setEnableAudioVideoSync(!1)}async play(t={audio:!0,video:!0,subtitle:!0}){if(ct.pq(`call play, options: ${p()(t)}, status: ${this.status} taskId: ${this.taskId}`,se,2556),6===this.status)return void ct.R8("ignored call play because of player status is played",se,2559);if(7===this.status)return this.isLive()?void ct.R8("ignored call play because of player status is ended with live mode",se,2564):(ct.pq("replay to 0n because of player status is ended",se,2567),await this.replayTo(BigInt(0)),this.status=6,void this.fire(nt.CN));4!==this.status&&8!==this.status&&ct.h2("player status is not loaded, please call load method first",se,2574),t.audio||t.video||(ct.R8(`video and audio must play one, ignore options, we will try to play video and audio, taskId: ${this.taskId}`,se,2578),t.audio=!0,t.video=!0);const e=[];if(8===this.status)return this.useMSE?(e.push(le.MSEThread.unpause(this.taskId)),this.audio?this.audio.play():this.video&&this.video.play()):(this.selectedAudioStream&&this.selectedVideoStream&&this.GlobalData.stats.videoCurrentTime-this.GlobalData.stats.audioCurrentTime>BigInt(400)&&await le.AudioRenderThread.syncSeekTime(this.taskId,this.GlobalData.stats.videoCurrentTime),this.audioSourceNode&&(e.push(this.audioSourceNode.request("unpause")),e.push(le.AudioRenderThread.unpause(this.taskId))),this.videoDecoder2VideoRenderChannel&&e.push(this.VideoRenderThread.unpause(this.taskId))),g().all(e).then((()=>{this.status=6,this.fire(nt.CN),this.jitterBufferController&&this.jitterBufferController.start(),this.subtitleRender&&this.subtitleRender.start()}));this.status=5,this.fire(nt.d6),this.useMSE=await this.checkUseMSE(t),this.audioEnded=!0,this.videoEnded=!0,this.useMSE?await this.playUseMSE(t):await this.playUseDecoder(t);{const e=this.findBestStream(this.formatContext.streams,3);if(e&&t.subtitle&&this.isCodecIdSupported(L.f[15](e.codecpar+4),L.f[15](e.codecpar))){var r;const t=o()(r=this.externalSubtitleTasks).call(r,(t=>t.streamId===e.id));await this.createSubtitleRender(e,t?t.taskId:this.subtitleTaskId||this.taskId)}if(this.subtitleRender&&this.externalSubtitleTasks.length)for(let t=0;t<this.externalSubtitleTasks.length;t++){var i;const r=o()(i=this.formatContext.streams).call(i,(e=>e.id===this.externalSubtitleTasks[t].streamId));r!==e&&await le.DemuxerThread.connectStreamTask.transfer(this.subtitleRender.getDemuxerPort(this.externalSubtitleTasks[t].taskId)).invoke(this.externalSubtitleTasks[t].taskId,r.index,this.subtitleRender.getDemuxerPort(this.externalSubtitleTasks[t].taskId))}}let s=10;if(q.Yj(this.source)||this.source instanceof Ot.A){var a;let t=this.isLive_?this.options.jitterBufferMin:this.options.preLoadTime;this.source instanceof Ot.A&&(t=Math.max(t,this.source.minBuffer)),u()(a=this.formatContext.streams).call(a,(e=>{0===L.f[15](e.codecpar)?s=Math.max(Math.ceil((0,pt.lb)((0,F.A)(e.codecpar+72,U.P))*t),s):1===L.f[15](e.codecpar)&&L.f[15](e.codecpar+144)&&(s=Math.max(Math.ceil(L.f[15](e.codecpar+136)/L.f[15](e.codecpar+144)*t),s))}))}if(this.subTaskId&&!this.selectedAudioStream||e.push(le.DemuxerThread.startDemux(this.taskId,this.isLive_,s)),this.subTaskId&&this.selectedVideoStream&&e.push(le.DemuxerThread.startDemux(this.subTaskId,this.isLive_,s)),this.subtitleTaskId&&this.selectedSubtitleStream&&e.push(le.DemuxerThread.startDemux(this.subtitleTaskId,this.isLive_,10)),this.seekedTimestamp>=BigInt(0)){var n;let t=20;u()(n=this.formatContext.streams).call(n,(e=>{0===L.f[15](e.codecpar)&&(t=Math.max(Math.ceil((0,pt.lb)((0,F.A)(e.codecpar+72,U.P))),t))})),this.videoDecoder2VideoRenderChannel&&e.push(this.VideoRenderThread.syncSeekTime(this.taskId,this.seekedTimestamp,t)),this.audioDecoder2AudioRenderChannel&&e.push(le.AudioRenderThread.syncSeekTime(this.taskId,this.seekedTimestamp,t)),this.seekedTimestamp=ft.Dh}return g().all(e).then((async()=>{if(this.useMSE){var t,e;if(await g().all([null===(t=this.video)||void 0===t?void 0:t.play(),null===(e=this.audio)||void 0===e?void 0:e.play()]).catch((t=>{if(this.fire(nt.IY),ct.R8("the audioContext was not started. It must be resumed after a user gesture",se,2704),this.video)return this.video.muted=!0,this.video.play()})),this.isMediaStreamMode()){dt.A.firefox||((this.video||this.audio).muted=!0);const t=this.options.container;let e=(this.video||this.audio).captureStream||(this.video||this.audio).mozCaptureStream;const r=_()(e).call(e,this.video||this.audio)(),i=t.getAudioTracks()[0],s=t.getVideoTracks()[0];i&&t.removeTrack(i),s&&t.removeTrack(s);const a=r.getAudioTracks()[0],n=r.getVideoTracks()[0];a&&t.addTrack(a),n&&t.addTrack(n)}}else{const t=[];this.videoDecoder2VideoRenderChannel&&t.push(this.VideoRenderThread.play(this.taskId)),this.audioDecoder2AudioRenderChannel&&t.push(this.audioSourceNode.request("start",{port:this.audioRender2AudioWorkletChannel.port2,channels:this.playChannels},[this.audioRender2AudioWorkletChannel.port2])),await g().all(t),!this.audioSourceNode||"suspended"!==le.audioContext.state&&"interrupted"!==le.audioContext.state||("suspended"!==le.audioContext.state&&"interrupted"!==le.audioContext.state||(this.fire(nt.IY),ct.R8("the audioContext was not started. It must be resumed after a user gesture",se,2759)),this.videoDecoder2VideoRenderChannel&&(await le.AudioRenderThread.fakePlay(this.taskId),this.controller.setTimeUpdateListenType(0)))}this.status=6,this.fire(nt.CN),this.statsController.start(),this.jitterBufferController&&this.jitterBufferController.start(),this.subtitleRender&&this.subtitleRender.start()}))}async pause(){if(ct.pq(`call pause, taskId: ${this.taskId}`,se,2784),!this.isLive_){const t=[];return this.useMSE?(this.audio&&this.audio.pause(),this.video&&this.video.pause(),t.push(le.MSEThread.pause(this.taskId))):(this.audioSourceNode&&(t.push(this.audioSourceNode.request("pause")),t.push(le.AudioRenderThread.pause(this.taskId))),this.videoDecoder2VideoRenderChannel&&t.push(this.VideoRenderThread.pause(this.taskId))),g().all(t).then((()=>{9===this.status?this.lastStatus=8:this.status=8,this.fire(nt.NN),this.jitterBufferController&&this.jitterBufferController.stop(),this.subtitleRender&&this.subtitleRender.pause()}))}ct.R8(`pause can only used in vod, taskId: ${this.taskId}`,se,2824)}async doSeek(t,e,r={}){var i,s;this.useMSE?await le.MSEThread.beforeSeek(this.taskId):await g().all([null===(i=le.AudioRenderThread)||void 0===i?void 0:i.beforeSeek(this.taskId),null===(s=this.VideoRenderThread)||void 0===s?void 0:s.beforeSeek(this.taskId)]),r.onBeforeSeek&&await r.onBeforeSeek();let a=ft.Dh;if(this.isDash()||this.isHls()){if(this.subTaskId&&!this.selectedAudioStream||(a=await le.DemuxerThread.seek(this.taskId,t,16)),this.subTaskId&&this.selectedVideoStream){let e=await le.DemuxerThread.seek(this.subTaskId,t,16);a===ft.Dh&&(a=e)}}else a=await le.DemuxerThread.seek(this.taskId,t,8,e);if(this.subtitleTaskId&&this.selectedSubtitleStream&&await le.DemuxerThread.seek(this.subtitleTaskId,t,16),a>=BigInt(0)?ct.Yz(`seeked to packet timestamp: ${a}, taskId: ${this.taskId}`,se,2870):ct.z3(`demuxer seek failed, code: ${a}, taskId: ${this.taskId}`,se,2873),this.useMSE)if(a>=BigInt(0)){const e=await le.MSEThread.afterSeek(this.taskId,a>t?a:t);this.video?this.video.currentTime=e:this.audio&&(this.audio.currentTime=e)}else await le.MSEThread.afterSeek(this.taskId,ft.Dh);else{var n;let e=20;var o,c,l,h,d,p,f,m,v,y;u()(n=this.formatContext.streams).call(n,(t=>{0===L.f[15](t.codecpar)&&(e=Math.max(Math.ceil((0,pt.lb)((0,F.A)(t.codecpar+72,U.P))),e))})),a>=BigInt(0)?(await g().all([null===(o=le.AudioDecoderThread)||void 0===o?void 0:o.resetTask(this.taskId),null===(c=this.VideoDecoderThread)||void 0===c?void 0:c.resetTask(this.taskId)]),await g().all([null===(l=le.AudioRenderThread)||void 0===l?void 0:l.syncSeekTime(this.taskId,a>t?a:t,e),null===(h=this.VideoRenderThread)||void 0===h?void 0:h.syncSeekTime(this.taskId,a>t?a:t,e)]),await g().all([null===(d=le.AudioRenderThread)||void 0===d?void 0:d.afterSeek(this.taskId,a>t?a:t),null===(p=this.VideoRenderThread)||void 0===p?void 0:p.afterSeek(this.taskId,a>t?a:t)])):(await g().all([null===(f=le.AudioRenderThread)||void 0===f?void 0:f.syncSeekTime(this.taskId,ft.Dh,e),null===(m=this.VideoRenderThread)||void 0===m?void 0:m.syncSeekTime(this.taskId,ft.Dh,e)]),await g().all([null===(v=le.AudioRenderThread)||void 0===v?void 0:v.afterSeek(this.taskId,ft.Dh),null===(y=this.VideoRenderThread)||void 0===y?void 0:y.afterSeek(this.taskId,ft.Dh)])),this.jitterBufferController&&this.jitterBufferController.reset()}if((4===this.lastStatus||3===this.lastStatus)&&a>=BigInt(0)&&(this.seekedTimestamp=a>t?a:t),this.subtitleRender)for(let t=0;t<this.externalSubtitleTasks.length;t++)await le.DemuxerThread.seek(this.externalSubtitleTasks[t].taskId,this.currentTime,8);this.subtitleRender&&(this.subtitleRender.reset(),this.subtitleRender.start())}async seek(t){if(ct.pq(`call seek, timestamp: ${t}, taskId: ${this.taskId}`,se,2959),this.formatContext.streams.length)if(9!==this.status)if(this.isLive_)ct.R8(`seek can only used in vod, taskId: ${this.taskId}`,se,2998);else{this.lastStatus=this.status,this.status=9,this.fire(nt.Nz);let e=-1;this.selectedVideoStream&&!this.isAttachmentPicture(this.selectedVideoStream)?e=this.selectedVideoStream.index:this.selectedAudioStream&&(e=this.selectedAudioStream.index),7===this.lastStatus?(await this.replayTo(t),this.status=6,this.fire(nt.mQ),this.fire(nt.CN)):(await this.doSeek(t,e),this.status=this.lastStatus,this.fire(nt.mQ))}else ct.R8(`player is seeking now, taskId: ${this.taskId}`,se,2967);else ct.z3(`cannot found any stream to seek, taskId: ${this.taskId}`,se,2962)}getStreams(){var t;return S()(t=this.formatContext.streams).call(t,(t=>({...t,mediaType:(0,Mt.yl)(Pt.Mb,L.f[15](t.codecpar)),codecparProxy:(0,F.A)(t.codecpar,$.A)})))}getSelectedVideoStreamId(){return this.selectedVideoStream?this.selectedVideoStream.id:-1}getSelectedAudioStreamId(){return this.selectedAudioStream?this.selectedAudioStream.id:-1}getSelectedSubtitleStreamId(){return this.selectedSubtitleStream?this.selectedSubtitleStream.id:-1}getChapters(){return this.formatContext.chapters}getDuration(){if(!this.isLive_){var t;let e=BigInt(0);return u()(t=this.formatContext.streams).call(t,(t=>{if(1===L.f[15](t.codecpar)||0===L.f[15](t.codecpar)){const r=(0,pt.k)(t.duration,{den:t.timeBase.den,num:t.timeBase.num},ft.i0);r>e&&(e=r)}})),e}return BigInt(0)}async stop(t=!1){var e;if(ct.pq(`call stop, taskId: ${this.taskId}`,se,3102),0===this.status)return void ct.pq(`player has already stopped, taskId: ${this.taskId}`,se,3105);if(this.stopPending)return this.stopPending;let r;this.stopPending=new(g())((t=>{r=t})),this.audioSourceNode&&(9===this.status&&await le.AudioRenderThread.stop(this.taskId),await this.audioSourceNode.request("stop"),this.audioSourceNode.disconnect(),this.audioSourceNode=null),9===this.status&&le.DemuxerThread&&(await le.DemuxerThread.stop(this.taskId),this.subTaskId&&await le.DemuxerThread.stop(this.subTaskId),this.subtitleTaskId&&await le.DemuxerThread.stop(this.subtitleTaskId)),this.VideoRenderThread&&await this.VideoRenderThread.unregisterTask(this.taskId),le.AudioRenderThread&&await le.AudioRenderThread.unregisterTask(this.taskId),this.VideoDecoderThread&&await this.VideoDecoderThread.unregisterTask(this.taskId),le.AudioDecoderThread&&await le.AudioDecoderThread.unregisterTask(this.taskId),le.MSEThread&&await le.MSEThread.unregisterTask(this.taskId),le.DemuxerThread&&(this.subTaskId&&await le.DemuxerThread.unregisterTask(this.subTaskId),this.subtitleTaskId&&await le.DemuxerThread.unregisterTask(this.subtitleTaskId),await le.DemuxerThread.unregisterTask(this.taskId)),le.IOThread&&await le.IOThread.unregisterTask(this.taskId),this.ioIPCPort&&(await this.source.stop().catch((t=>{ct.z3(`stop custom ioloader error, ${t}`,se,3167)})),this.ioIPCPort.destroy(),this.ioIPCPort=null);for(let t=0;t<this.externalSubtitleTasks.length;t++)await le.DemuxerThread.unregisterTask(this.externalSubtitleTasks[t].taskId),await le.IOThread.unregisterTask(this.externalSubtitleTasks[t].taskId);if(this.subtitleRender&&(this.subtitleRender.destroy(),this.subtitleRender=null),this.gainNode&&(this.gainNode.disconnect(),this.gainNode=null),this.controller&&this.controller.destroy(),this.drmSession&&(await this.drmSession.close(),this.drmSession=null),null!==(e=this.video||this.audio)&&void 0!==e&&e.src&&m().revokeObjectURL((this.video||this.audio).src),!this.isMediaStreamMode()){const t=this.options.container;this.video&&(t.removeChild(this.video),this.video=null),this.audio&&(t.removeChild(this.audio),this.audio=null),this.canvas&&(t.removeChild(this.canvas),this.canvas=null)}this.ioloader2DemuxerChannel=null,this.demuxer2VideoDecoderChannel=null,this.demuxer2AudioDecoderChannel=null,this.videoDecoder2VideoRenderChannel=null,this.audioDecoder2AudioRenderChannel=null,this.audioRender2AudioWorkletChannel=null,this.selectedAudioStream=null,this.selectedVideoStream=null,this.selectedSubtitleStream=null,this.lastSelectedInnerSubtitleStreamIndex=-1,this.source=null,this.ext="",this.subTaskId="",this.subtitleTaskId="",this.seekedTimestamp=ft.Dh,this.statsController.stop(),this.jitterBufferController&&(this.jitterBufferController.stop(),this.jitterBufferController=null),this.changingStreamPending.length=0,this.status=0,r(),this.stopPending=null,t||this.fire(nt.yd),ct.pq(`avplayer stopped, task: ${this.taskId}`,se,3247)}setPlaybackRate(t){var e,r,i,s;this.isLive_?ct.R8(`setPlaybackRate can only used in playback, taskId: ${this.taskId}`,se,3275):(this.playRate=(0,ut.A)(t,.5,2),this.useMSE?(null===(e=le.MSEThread)||void 0===e||e.setPlayRate(this.taskId,this.playRate),this.video?this.video.playbackRate=this.playRate:this.audio&&(this.audio.playbackRate=this.playRate)):(null===(r=le.AudioRenderThread)||void 0===r||r.setPlayTempo(this.taskId,this.playRate),null===(i=this.VideoRenderThread)||void 0===i||i.setPlayRate(this.taskId,this.playRate),null===(s=this.VideoDecoderThread)||void 0===s||s.setPlayRate(this.taskId,this.playRate)),ct.pq(`player call setPlaybackRate, set ${this.playRate}, taskId: ${this.taskId}`,se,3272))}getPlaybackRate(){return this.playRate}async resume(){var t,e;"suspended"!==(null===(t=le.audioContext)||void 0===t?void 0:t.state)&&"interrupted"!==(null===(e=le.audioContext)||void 0===e?void 0:e.state)||(await g().race([le.audioContext.resume(),new xt.A(.1)]),"suspended"===le.audioContext.state||"interrupted"===le.audioContext.state?ct.R8("the audioContext was not allowed to start. It must be resumed after a user gesture",se,3304):(this.audioSourceNode&&this.controller.setTimeUpdateListenType(1),this.fire(nt.dQ))),this.video?(this.video.muted=!1,this.video.paused&&await this.video.play()):this.audio&&(this.audio.muted=!1,this.audio.paused&&await this.audio.play()),ct.pq(`call resume, taskId: ${this.taskId}`,se,3326)}isSuspended(){var t,e;return"suspended"===(null===(t=le.audioContext)||void 0===t?void 0:t.state)||"interrupted"===(null===(e=le.audioContext)||void 0===e?void 0:e.state)}getVolume(){return this.volume}setVolume(t,e=!1){this.volume=this.useMSE?(0,ut.A)(t,0,1):(0,ut.A)(t,0,3),this.gainNode&&le.audioContext?(this.gainNode.gain.cancelScheduledValues(le.audioContext.currentTime),dt.A.firefox&&!e?this.gainNode.gain.setValueAtTime(this.volume,le.audioContext.currentTime+1):0===this.gainNode.gain.value||0===this.volume||e?this.gainNode.gain.value=this.volume:this.gainNode.gain.exponentialRampToValueAtTime(this.volume,le.audioContext.currentTime+1)):this.video?this.video.volume=this.volume:this.audio&&(this.audio.volume=this.volume),this.fire(nt.Wu,[this.volume]),ct.pq(`player call setVolume, set ${t}, used ${this.volume}, taskId: ${this.taskId}`,se,3378)}getRenderMode(){return this.renderMode}setRenderMode(t){var e;this.renderMode=t,this.useMSE&&this.video?this.video.style["object-fit"]=ae[this.renderMode]:null===(e=this.VideoRenderThread)||void 0===e||e.setRenderMode(this.taskId,t),ct.pq(`player call setRenderMode, mode: ${t}, taskId: ${this.taskId}`,se,3408)}getVideoTransformContext(){let t="";return 0!==this.renderRotate&&(t+=`rotateZ(${this.renderRotate}deg)`),this.flipHorizontal&&(t+=(t.length?" ":"")+"scaleX(-1)"),this.flipVertical&&(t+=(t.length?" ":"")+"scaleY(-1)"),t}setRotate(t){var e;this.renderRotate=t,this.useMSE&&this.video?this.video.style.transform=this.getVideoTransformContext():null===(e=this.VideoRenderThread)||void 0===e||e.setRenderRotate(this.taskId,t),ct.pq(`player call setRotate, angle: ${t}, taskId: ${this.taskId}`,se,3438)}enableHorizontalFlip(t){var e;this.flipHorizontal=t,this.useMSE&&this.video?this.video.style.transform=this.getVideoTransformContext():null===(e=this.VideoRenderThread)||void 0===e||e.enableHorizontalFlip(this.taskId,t),ct.pq(`player call enableHorizontalFlip, enable: ${t}, taskId: ${this.taskId}`,se,3449)}enableVerticalFlip(t){var e;this.flipVertical=t,this.useMSE&&this.video?this.video.style.transform=this.getVideoTransformContext():null===(e=this.VideoRenderThread)||void 0===e||e.enableVerticalFlip(this.taskId,t),ct.pq(`player call enableVerticalFlip, enable: ${t}, taskId: ${this.taskId}`,se,3460)}setLoop(t){this.options.loop=t,ct.pq(`call setLoop, enable: ${t}, taskId: ${this.taskId}`,se,3472)}setSubtitleDelay(t){this.subtitleRender&&this.getSubtitleDelay()!==t&&(this.subtitleRender.setDelay(BigInt(0|t)),ct.pq(`set subtitle delay ${t}`,se,3485),this.fire(nt.W1,[t]))}getSubtitleDelay(){return this.subtitleRender?Number(BigInt.asIntN(32,this.subtitleRender.getDelay())):0}setSubtitleEnable(t){if(this.subtitleRender&&this.selectedSubtitleStream)if(t){var e;const t=o()(e=this.externalSubtitleTasks).call(e,(t=>t.streamId===this.selectedSubtitleStream.id));t&&le.DemuxerThread.seek(t.taskId,this.currentTime,8),this.subtitleRender.reset(),this.subtitleRender.start()}else this.subtitleRender.stop()}resize(t,e){var r;this.useMSE||null===(r=this.VideoRenderThread)||void 0===r||r.resize(this.taskId,t,e),ct.pq(`player call resize, width: ${t}, height: ${e}, taskId: ${this.taskId}`,se,3536)}isMSE(){return this.useMSE}isMediaStreamMode(){return"function"==typeof MediaStream&&this.options.container instanceof MediaStream}isLive(){return this.isLive_}async getVideoList(){var t;return null===(t=le.IOThread)||void 0===t?void 0:t.getVideoList(this.taskId)}async getAudioList(){var t;return null===(t=le.IOThread)||void 0===t?void 0:t.getAudioList(this.taskId)}async getSubtitleList(){var t;return null===(t=le.IOThread)||void 0===t?void 0:t.getSubtitleList(this.taskId)}getStatus(){return this.status}hasAudio(){return!!this.selectedAudioStream}hasVideo(){return!!this.selectedVideoStream}hasSubtitle(){return!!this.selectedSubtitleStream}getSource(){return this.source}getFormatContext(){return this.formatContext}getExternalSubtitle(){var t;return S()(t=this.externalSubtitleTasks).call(t,(t=>({source:t.source,lang:t.lang,title:t.title})))}getOptions(){return this.options}getAudioOutputNode(){return this.gainNode}isPictureInPicture(){return this.useMSE?this.video&&document.pictureInPictureElement===this.video:!(!this.canvas||"object"!=typeof documentPictureInPicture)&&documentPictureInPicture.window&&documentPictureInPicture.window.document.body.querySelector("#"+this.canvas.id)===this.canvas}async selectVideo(t,e){if(this.isHls()||this.isDash()){if(ct.pq(`call IOThread selectVideo, index: ${t}, taskId: ${this.taskId}`,se,3701),10===this.status)return void ct.R8(`player is changing now, taskId: ${this.taskId}`,se,3704);const{selectedIndex:i}=await le.IOThread.getVideoList(this.taskId);if(this.lastStatus=this.status,this.status=10,this.fire(nt.Wt,[0,t,i]),e||this.isLive()){const e=await le.IOThread.selectVideo(this.taskId,t);if(this.status=this.lastStatus,e>=0){var r;const t=o()(r=this.changingStreamPending).call(r,(t=>0===t.mediaType&&t.start===e));await new(g())((r=>{t?t.pending.resolve=r:(this.changingStreamPending.push({pending:{resolve:r},mediaType:0,start:e}),this.handleChangingStreamPendingTimer.isStarted()||this.handleChangingStreamPendingTimer.start())}))}}else{let e=this.currentTime,r=-1;this.selectedVideoStream?r=this.selectedVideoStream.index:this.selectedAudioStream&&(r=this.selectedAudioStream.index),await this.doSeek(e,r,{onBeforeSeek:async()=>{await le.IOThread.selectVideo(this.taskId,t)}}),this.status=this.lastStatus}this.fire(nt.Rj,[0,t,i])}else{var i;const e=o()(i=this.formatContext.streams).call(i,(e=>e.id===t));if(this.selectedVideoStream&&e&&0===L.f[15](e.codecpar)&&e!==this.selectedVideoStream&&!(1024&e.disposition)){if(10===this.status)return void ct.R8(`player is changing now, taskId: ${this.taskId}`,se,3768);const t=this.selectedVideoStream.id;this.lastStatus=this.status,this.status=10,this.fire(nt.Wt,[0,e.id,t]),this.useMSE?(dt.A.safari&&(this.status=this.lastStatus,ct.h2("safari not support switch stream in mse, please use chrome",se,3779)),(0,_t.A)().isTypeSupported((0,yt.A)(e.codecpar))||(this.status=this.lastStatus,ct.h2(`select video stream(${e.index}) not support mse`,se,3783)),await this.doSeek(this.currentTime,e.index,{onBeforeSeek:async()=>{await le.DemuxerThread.changeConnectStream(this.taskId,e.index,this.selectedVideoStream.index),await le.MSEThread.reAddStream(this.taskId,e.index,(0,Nt.Wu)(e.codecpar),e.timeBase,e.metadata,e.startTime)}})):(Ct.zy(ne,L.f[15](e.codecpar+4))||(this.status=this.lastStatus,ct.h2(`select video stream(${e.index}) not support`,se,3802)),await this.doSeek(this.currentTime,e.index,{onBeforeSeek:async()=>{await le.DemuxerThread.changeConnectStream(this.taskId,e.index,this.selectedVideoStream.index),await this.VideoDecoderThread.reopenDecoder(this.taskId,(0,Nt.Wu)(e.codecpar),await this.getResource("decoder",L.f[15](e.codecpar+4),0))}})),ct.pq(`changed selected video stream, from ${this.selectedVideoStream.id} to ${e.id}, taskId: ${this.taskId}`,se,3816),this.selectedVideoStream=e,this.subtitleRender&&this.subtitleRender.updateVideoResolution(L.f[15](e.codecpar+56),L.f[15](e.codecpar+60)),this.status=this.lastStatus,this.fire(nt.Rj,[0,e.id,t])}}}async selectAudio(t,e){if(this.isHls()||this.isDash()){if(ct.pq(`call IOThread selectAudio, index: ${t}, taskId: ${this.taskId}`,se,3838),10===this.status)return void ct.R8(`player is changing now, taskId: ${this.taskId}`,se,3841);const{selectedIndex:i}=await le.IOThread.getAudioList(this.taskId);if(this.lastStatus=this.status,this.status=10,this.fire(nt.Wt,[1,t,i]),e||this.isLive()){const e=await le.IOThread.selectAudio(this.taskId,t);if(this.status=this.lastStatus,e>=0){var r;const t=o()(r=this.changingStreamPending).call(r,(t=>1===t.mediaType&&t.start===e));await new(g())(((r,i)=>{t?t.pending.resolve=r:(this.changingStreamPending.push({pending:{resolve:r},mediaType:1,start:e}),this.handleChangingStreamPendingTimer.isStarted()||this.handleChangingStreamPendingTimer.start())}))}}else{let e=this.currentTime,r=-1;this.selectedVideoStream?r=this.selectedVideoStream.index:this.selectedAudioStream&&(r=this.selectedAudioStream.index),await this.doSeek(e,r,{onBeforeSeek:async()=>{await le.IOThread.selectAudio(this.taskId,t)}}),this.status=this.lastStatus}this.fire(nt.Rj,[1,t,i])}else{var i;const e=o()(i=this.formatContext.streams).call(i,(e=>e.id===t));if(this.selectedAudioStream&&e&&1===L.f[15](e.codecpar)&&e!==this.selectedAudioStream){if(10===this.status)return void ct.R8(`player is changing now, taskId: ${this.taskId}`,se,3899);const t=this.selectedAudioStream.id;if(this.lastStatus=this.status,this.status=10,this.fire(nt.Wt,[1,e.id,t]),L.f[15](e.codecpar+4)!==L.f[15](this.selectedAudioStream.codecpar+4)||L.f[15](e.codecpar+136)!==L.f[15](this.selectedAudioStream.codecpar+136)||L.f[15](e.codecpar+116)!==L.f[15](this.selectedAudioStream.codecpar+116)||L.f[15](e.codecpar+48)!==L.f[15](this.selectedAudioStream.codecpar+48))if(this.useMSE){dt.A.safari&&(this.status=this.lastStatus,ct.h2("safari not support switch stream in mse, please use chrome",se,3915));let t=e.index;this.selectedVideoStream&&(t=this.selectedVideoStream.index),(0,_t.A)().isTypeSupported((0,At.A)(e.codecpar))||(this.status=this.lastStatus,ct.h2(`select audio stream(${e.index}) not support mse`,se,3923)),await this.doSeek(this.currentTime,t,{onBeforeSeek:async()=>{await le.DemuxerThread.changeConnectStream(this.taskId,e.index,this.selectedAudioStream.index),await le.MSEThread.reAddStream(this.taskId,e.index,(0,Nt.Wu)(e.codecpar),e.timeBase,e.metadata,e.startTime)}})}else Ct.zy(ne,L.f[15](e.codecpar+4))||(this.status=this.lastStatus,ct.h2(`select audio stream(${e.index}) not support`,se,3935)),await le.AudioDecoderThread.beforeReopenDecoder(this.taskId),await le.DemuxerThread.changeConnectStream(this.taskId,e.index,this.selectedAudioStream.index,!0,!0),await le.AudioDecoderThread.reopenDecoder(this.taskId,(0,Nt.Wu)(e.codecpar),await this.getResource("decoder",L.f[15](e.codecpar+4),1)),this.audioEnded&&(this.audioDecoder2AudioRenderChannel&&(await le.AudioDecoderThread.resetTask(this.taskId),await le.AudioRenderThread.restart(this.taskId),await le.AudioRenderThread.syncSeekTime(this.taskId,this.currentTime),this.controller.setTimeUpdateListenType(1)),this.audioSourceNode&&(await this.audioSourceNode.request("restart"),"suspended"!==le.audioContext.state&&"interrupted"!==le.audioContext.state||await le.AudioRenderThread.fakePlay(this.taskId)),this.audioEnded=!1);else await le.DemuxerThread.changeConnectStream(this.taskId,e.index,this.selectedAudioStream.index,!1);ct.pq(`changed selected audio stream, from ${this.selectedAudioStream.id} to ${e.id}, taskId: ${this.taskId}`,se,3968),this.selectedAudioStream=e,this.status=this.lastStatus,this.fire(nt.Rj,[1,e.id,t])}}}async selectSubtitle(t){if(this.isHls()||this.isDash()){if(ct.pq(`call IOThread selectSubtitle, index: ${t}, taskId: ${this.taskId}`,se,3987),10===this.status)return void ct.R8(`player is changing now, taskId: ${this.taskId}`,se,3990);const{selectedIndex:e}=await le.IOThread.getSubtitleList(this.taskId);this.lastStatus=this.status,this.status=10,this.fire(nt.Wt,[3,t,e]),await le.IOThread.selectSubtitle(this.taskId,t),this.subtitleTaskId&&await le.DemuxerThread.seek(this.subtitleTaskId,this.currentTime,16),this.subtitleRender&&(this.subtitleRender.reset(),this.subtitleRender.start()),this.status=this.lastStatus,this.fire(nt.Rj,[3,t,e])}else{var e;const s=o()(e=this.formatContext.streams).call(e,(e=>e.id===t));if(this.selectedSubtitleStream&&s&&3===L.f[15](s.codecpar)&&s!==this.selectedSubtitleStream){var r;if(10===this.status)return void ct.R8(`player is changing now, taskId: ${this.taskId}`,se,4014);const t=this.selectedSubtitleStream.id;this.lastStatus=this.status,this.status=10,this.fire(nt.Wt,[3,s.id,t]),this.subtitleRender.reopenDecoder(s.codecpar);const e=o()(r=this.externalSubtitleTasks).call(r,(t=>t.streamId===s.id));var i;if(e)this.subtitleRender.setDemuxTask(e.taskId),this.subtitleRender.reset(),await le.DemuxerThread.seek(e.taskId,this.currentTime,8,s.index);else this.subtitleRender.setDemuxTask(this.taskId),-1===this.lastSelectedInnerSubtitleStreamIndex?await le.DemuxerThread.connectStreamTask.transfer(this.subtitleRender.getDemuxerPort(this.taskId)).invoke(this.taskId,s.index,this.subtitleRender.getDemuxerPort(this.taskId)):await le.DemuxerThread.changeConnectStream(this.taskId,s.index,this.lastSelectedInnerSubtitleStreamIndex,!1),o()(i=this.externalSubtitleTasks).call(i,(t=>t.streamId===this.selectedSubtitleStream.id))&&this.subtitleRender.reset(),this.lastSelectedInnerSubtitleStreamIndex=s.index;this.subtitleRender&&this.subtitleRender.start(),ct.pq(`changed selected subtitle stream, from ${this.selectedSubtitleStream.id} to ${s.id}, taskId: ${this.taskId}`,se,4054),this.selectedSubtitleStream=s,this.status=this.lastStatus,this.fire(nt.Rj,[3,s.id,t])}else ct.z3(`call selectSubtitle failed, id: ${t}, taskId: ${this.taskId}`,se,4062)}}async playNextFrame(){!this.useMSE&&8===this.status&&this.selectedVideoStream&&await this.VideoRenderThread.renderNextFrame(this.taskId)}enterFullscreen(){if(this.isMediaStreamMode())return;const t=this.options.container;t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen(),ct.pq(`player call enterFullscreen, taskId: ${this.taskId}`,se,4097)}exitFullscreen(){document.exitFullscreen?document.exitFullscreen():document.mozExitFullScreen?document.mozExitFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen(),ct.pq(`player call exitFullscreen, taskId: ${this.taskId}`,se,4113)}snapshot(t="png",e=1){if(this.useMSE&&this.video){const r=document.createElement("canvas");return r.width=this.video.videoWidth,r.height=this.video.videoHeight,r.getContext("2d").drawImage(this.video,0,0),r.toDataURL(`image/${t}`,e)}if(this.canvas)return this.canvas.toDataURL(`image/${t}`,e)}getStats(){return this.GlobalData.stats}async destroy(){ct.pq(`call destroy, taskId: ${this.taskId}`,se,4152),2!==this.status?(await this.stop(),this.VideoPipelineProxy&&(await this.VideoDecoderThread.clear(),await this.VideoRenderThread.clear(),await this.VideoPipelineProxy.destroy(),this.VideoDecoderThread=null,this.VideoPipelineProxy=null),this.VideoDecoderThread&&(await this.VideoDecoderThread.clear(),(0,W.nE)(this.VideoDecoderThread),this.VideoDecoderThread=null),this.VideoRenderThread=null,this.GlobalData&&(this.GlobalData.avframeList.clear((t=>{(0,Q.to)(t)}),20),this.GlobalData.avpacketList.clear((t=>{(0,X.Up)(t)}),20),kt.zr(this.GlobalData[E.o9]+24),kt.zr(this.GlobalData[E.o9]+28),(0,O.A)(this.GlobalData),this.GlobalData=null),Ct.TF(le.Instances,this),this.status=2):ct.R8(`player has already destroyed, taskId: ${this.taskId}`,se,4155)}onVideoEnded(){this.videoEnded=!0,this.handleEnded()}onAudioEnded(){this.audioEnded=!0,this.selectedVideoStream&&this.controller.setTimeUpdateListenType(0),this.handleEnded()}onCanvasUpdated(){this.updateCanvas=this.createCanvas(),this.updateCanvas.width=this.options.container.offsetWidth*devicePixelRatio,this.updateCanvas.height=this.options.container.offsetHeight*devicePixelRatio;const t=(0,ot.A)()&&(et.USE_THREADS||lt.A.worker&&this.options.enableWorker)?this.updateCanvas.transferControlToOffscreen():this.updateCanvas;this.VideoRenderThread.updateCanvas.transfer(t).invoke(this.taskId,t)}async onGetDecoderResource(t,e){return this.getResource("decoder",e,t)}onFirstVideoRendered(){ct.pq(`first video frame rendered, taskId: ${this.taskId}`,se,4248),this.fire(nt.NX)}onFirstAudioRendered(){ct.pq(`first audio frame rendered, taskId: ${this.taskId}`,se,4256),this.fire(nt.Sw)}onAudioStutter(){6===this.status&&this.GlobalData.stats.audioStutter++}onVideoStutter(){6===this.status&&this.GlobalData.stats.videoStutter++}onVideoDiscard(){6===this.status&&this.VideoDecoderThread.setNextDiscard(this.taskId)}onFirstVideoRenderedAfterUpdateCanvas(){if(this.updateCanvas&&!this.isMediaStreamMode()){const t=this.options.container;this.canvas&&t.removeChild(this.canvas),this.canvas=this.updateCanvas,t.appendChild(this.canvas),this.updateCanvas=null}}onTimeUpdate(t){this.fire(nt.E9,[this.currentTime])}onMSESeek(t){const e=this.audio||this.video;e.buffered.length?e.currentTime=t:M()((()=>{e.currentTime=t}),500)}onMasterTimerUpdate(t){var e,r;null===(e=le.AudioRenderThread)||void 0===e||e.setMasterTime(this.taskId,t),null===(r=le.VideoRenderThread)||void 0===r||r.setMasterTime(this.taskId,t)}onAudioContextStateChange(){"interrupted"!==le.audioContext.state&&"suspended"!==le.audioContext.state||6!==this.status&&8!==this.status||(ct.R8(`the audioContext state changed to ${le.audioContext.state}. It may be resumed after a user gesture`,se,4338),le.AudioRenderThread.fakePlay(this.taskId),this.fire(nt.IY))}onError(t){this.fire(nt.ff,[t])}async createVideoDecoderThread(t=!0){this.VideoDecoderThread||(!et.USE_THREADS&&lt.A.worker&&t&&(0,ot.A)()?(this.VideoPipelineProxy=new Gt.A,await this.VideoPipelineProxy.run(),this.VideoPipelineProxy.setLogLevel(le.level),this.VideoDecoderThread=this.VideoPipelineProxy.VideoDecodePipeline,this.VideoRenderThread=this.VideoPipelineProxy.VideoRenderPipeline):(this.VideoDecoderThread=await(0,W.pt)(V.A,{name:"VideoDecoderThread"},31138).run(),this.VideoDecoderThread.setLogLevel(le.level),this.VideoRenderThread=le.VideoRenderThread))}static async startDemuxPipeline(t=!0){return le.DemuxThreadReady?le.DemuxThreadReady:le.DemuxThreadReady=new(g())((async e=>{!et.USE_THREADS&&lt.A.worker&&t?(le.IODemuxProxy=new zt.A,await le.IODemuxProxy.run(),le.IODemuxProxy.setLogLevel(le.level),le.IOThread=le.IODemuxProxy.IOPipeline,le.DemuxerThread=le.IODemuxProxy.DemuxPipeline):(le.IOThread=await(0,W.pt)(N.A,{name:"IOThread"},87243).run(),le.IOThread.setLogLevel(le.level),le.DemuxerThread=await(0,W.pt)(z.A,{name:"DemuxerThread"},72480).run(),le.DemuxerThread.setLogLevel(le.level)),e()}))}static async startAudioContext(){le.audioContext||(le.audioContext=new(AudioContext||webkitAudioContext)),le.audioContext.addEventListener("statechange",(()=>{Ct.__(le.Instances,(t=>{t.onAudioContextStateChange()}))})),lt.A.audioWorklet&&await(0,rt.A)(le.audioContext,!et.USE_THREADS||dt.A.safari&&!dt.A.checkVersion(dt.A.version,"16.1",!0)||Bt.A.ios&&!dt.A.checkVersion(Bt.A.version,"16.1",!0)?34268:5676)}static async startAudioPipeline(t=!0){return le.AudioThreadReady?le.AudioThreadReady:le.AudioThreadReady=new(g())((async e=>{await le.startAudioContext(),!et.USE_THREADS&&lt.A.worker&&t?(le.AudioPipelineProxy=new Vt.A,await le.AudioPipelineProxy.run(),le.AudioPipelineProxy.setLogLevel(le.level),le.AudioDecoderThread=le.AudioPipelineProxy.AudioDecodePipeline,le.AudioRenderThread=le.AudioPipelineProxy.AudioRenderPipeline):(le.AudioDecoderThread=await(0,W.pt)(G.A,{name:"AudioDecoderThread"},18667).run(),le.AudioDecoderThread.setLogLevel(le.level),le.AudioRenderThread=await(0,W.pt)(J.A,{name:"AudioRenderThread"},59377).run(),le.AudioRenderThread.setLogLevel(le.level)),e()}))}static async startVideoRenderPipeline(t=!0){return le.VideoThreadReady?le.VideoThreadReady:le.VideoThreadReady=new(g())((async e=>{!et.USE_THREADS&&lt.A.worker&&t&&(0,ot.A)()||(le.VideoRenderThread=await(0,W.pt)(Z.A,{name:"VideoRenderThread",disableWorker:!(0,ot.A)()},33968).run(),le.VideoRenderThread.setLogLevel(le.level)),e()}))}static async startMSEPipeline(t=!0){return le.MSEThreadReady?le.MSEThreadReady:le.MSEThreadReady=new(g())((async e=>{if(!et.USE_THREADS&&lt.A.worker&&t&&lt.A.workerMSE)await Promise.all([r.e(883),r.e(115)]).then(r.bind(r,25115)),le.MSEPipelineProxy=new Wt.A,await le.MSEPipelineProxy.run(),le.MSEPipelineProxy.setLogLevel(le.level),le.MSEThread=le.MSEPipelineProxy.MSEPipeline;else{const t=(await Promise.all([r.e(883),r.e(115)]).then(r.bind(r,25115))).default;le.MSEThread=await(0,W.pt)(t,{name:"MSEThread",disableWorker:!lt.A.workerMSE},25115).run(),le.MSEThread.setLogLevel(le.level)}e()}))}static async startPipelines(t=!0){await le.startDemuxPipeline(t),await le.startAudioPipeline(t),await le.startVideoRenderPipeline(t),await le.startMSEPipeline(t),ct.pq("AVPlayer pipelines started",se,4535)}static async stopPipelines(){le.VideoRenderThread&&(await le.VideoRenderThread.clear(),(0,W.nE)(le.VideoRenderThread)),le.AudioPipelineProxy&&(await le.AudioRenderThread.clear(),await le.AudioDecoderThread.clear(),await le.AudioPipelineProxy.destroy(),le.AudioRenderThread=null,le.AudioDecoderThread=null),le.AudioRenderThread&&(await le.AudioRenderThread.clear(),(0,W.nE)(le.AudioRenderThread)),le.AudioDecoderThread&&(await le.AudioDecoderThread.clear(),(0,W.nE)(le.AudioDecoderThread)),le.IODemuxProxy&&(await le.DemuxerThread.clear(),await le.IOThread.clear(),await le.IODemuxProxy.destroy(),le.DemuxerThread=null,le.IOThread=null),le.DemuxerThread&&(await le.DemuxerThread.clear(),(0,W.nE)(le.DemuxerThread)),le.IOThread&&(await le.IOThread.clear(),(0,W.nE)(le.IOThread)),le.MSEPipelineProxy&&(await le.MSEThread.clear(),le.MSEPipelineProxy.destroy(),le.MSEThread=null),le.MSEThread&&(await le.MSEThread.clear(),(0,W.nE)(le.MSEThread)),le.AudioPipelineProxy=null,le.AudioDecoderThread=null,le.IODemuxProxy=null,le.DemuxerThread=null,le.IOThread=null,le.audioContext=null,le.MSEThread=null,le.MSEPipelineProxy=null,le.DemuxThreadReady=null,le.VideoThreadReady=null,le.AudioThreadReady=null,le.MSEThreadReady=null,ct.pq("AVPlayer pipelines stopped",se,4605)}static setLogLevel(t){le.level=t,ct.V$(t),le.IOThread&&le.IOThread.setLogLevel(t),le.DemuxerThread&&le.DemuxerThread.setLogLevel(t),le.AudioDecoderThread&&le.AudioDecoderThread.setLogLevel(t),le.AudioRenderThread&&le.AudioRenderThread.setLogLevel(t),le.VideoRenderThread&&le.VideoRenderThread.setLogLevel(t),le.MSEThread&&le.MSEThread.setLogLevel(t),ct.pq(`set log level: ${t}`,se,4637)}on(t,e,r={}){return super.on(t,Y.X$({fn:e},r)),this}one(t,e,r={}){return super.on(t,Y.X$({fn:e,max:1},r)),this}}(0,i.A)(le,"Instances",[]),(0,i.A)(le,"Util",{compile:K.A,browser:dt.A,os:Bt.A}),(0,i.A)(le,"IOLoader",{CustomIOLoader:Ot.A,FetchIOLoader:Ft.A,FileIOLoader:$t.A,WebSocketIOLoader:Ht.A,SocketIOLoader:qt.A,WebTransportIOLoader:Yt.A}),(0,i.A)(le,"level",ct.rD),(0,i.A)(le,"DemuxThreadReady",void 0),(0,i.A)(le,"AudioThreadReady",void 0),(0,i.A)(le,"VideoThreadReady",void 0),(0,i.A)(le,"MSEThreadReady",void 0),(0,i.A)(le,"IODemuxProxy",void 0),(0,i.A)(le,"AudioPipelineProxy",void 0),(0,i.A)(le,"MSEPipelineProxy",void 0),(0,i.A)(le,"IOThread",void 0),(0,i.A)(le,"DemuxerThread",void 0),(0,i.A)(le,"AudioDecoderThread",void 0),(0,i.A)(le,"AudioRenderThread",void 0),(0,i.A)(le,"VideoRenderThread",void 0),(0,i.A)(le,"MSEThread",void 0),(0,i.A)(le,"audioContext",void 0),(0,i.A)(le,"Resource",new(R()))},11628:(t,e,r)=>{"use strict";r.d(e,{A:()=>n});var i=r(49859),s=r(84149),a=r(67593);class n{constructor(t,e){(0,i.A)(this,"videoRenderControlChannel",void 0),(0,i.A)(this,"audioRenderControlChannel",void 0),(0,i.A)(this,"muxerControlChannel",void 0),(0,i.A)(this,"demuxerControlChannel",void 0),(0,i.A)(this,"videoRenderControlIPCPort",void 0),(0,i.A)(this,"audioRenderControlIPCPort",void 0),(0,i.A)(this,"muxerControlIPCPort",void 0),(0,i.A)(this,"demuxerControlIPCPort",void 0),(0,i.A)(this,"observer",void 0),(0,i.A)(this,"visibilityHidden",void 0),(0,i.A)(this,"onVisibilityChange",void 0),(0,i.A)(this,"timeUpdateListenType",void 0),(0,i.A)(this,"enableAudioVideoSync",void 0),this.observer=t,this.videoRenderControlChannel=(0,a.A)(e),this.audioRenderControlChannel=(0,a.A)(e),this.muxerControlChannel=(0,a.A)(e),this.demuxerControlChannel=(0,a.A)(e),this.videoRenderControlIPCPort=new s.Ay(this.videoRenderControlChannel.port2),this.audioRenderControlIPCPort=new s.Ay(this.audioRenderControlChannel.port2),this.muxerControlIPCPort=new s.Ay(this.muxerControlChannel.port2),this.demuxerControlIPCPort=new s.Ay(this.demuxerControlChannel.port2),this.enableAudioVideoSync=!0,this.videoRenderControlIPCPort.on(s.Wo,(t=>{switch(t.method){case"ended":this.observer.onVideoEnded();break;case"updateCanvas":this.observer.onCanvasUpdated();break;case"firstRendered":this.observer.onFirstVideoRendered();break;case"firstRenderedAfterUpdateCanvas":this.observer.onFirstVideoRenderedAfterUpdateCanvas();break;case"syncPts":0===this.timeUpdateListenType&&this.observer.onTimeUpdate(t.params.pts)}})),this.audioRenderControlIPCPort.on(s.Wo,(t=>{switch(t.method){case"syncPts":this.enableAudioVideoSync&&this.videoRenderControlIPCPort.notify("syncPts",t.params),1===this.timeUpdateListenType&&this.observer.onTimeUpdate(t.params.pts);break;case"ended":this.observer.onAudioEnded(),this.timeUpdateListenType=0}})),this.muxerControlIPCPort.on(s.Wo,(t=>{"seek"===t.method&&this.observer.onMSESeek(t.params.time)})),this.demuxerControlIPCPort.on(s.S3,(async t=>{"getDecoderResource"===t.method&&this.demuxerControlIPCPort.reply(t,await this.observer.onGetDecoderResource(t.params.mediaType,t.params.codecId))})),this.demuxerControlIPCPort.on(s.Wo,(async t=>{"demuxError"===t.method&&this.observer.onError(new Error(`demux error, code: ${t.params.code}`))})),this.onVisibilityChange=e=>{this.visibilityHidden="hidden"===document.visibilityState&&!this.observer.isPictureInPicture(),t.isMediaStreamMode()||this.videoRenderControlIPCPort.notify("skipRender",{skipRender:this.visibilityHidden}),this.muxerControlIPCPort.notify("visibilitychange",{visibilityHidden:this.visibilityHidden})},this.visibilityHidden="hidden"===document.visibilityState&&!this.observer.isPictureInPicture(),document.addEventListener("visibilitychange",this.onVisibilityChange),this.muxerControlIPCPort.notify("visibilitychange",{visibilityHidden:this.visibilityHidden})}getVideoRenderControlPort(){return this.videoRenderControlChannel.port1}getAudioRenderControlPort(){return this.audioRenderControlChannel.port1}getMuxerControlPort(){return this.muxerControlChannel.port1}getDemuxerControlPort(){return this.demuxerControlChannel.port1}setTimeUpdateListenType(t){this.timeUpdateListenType=t}setEnableAudioVideoSync(t){this.enableAudioVideoSync=t}destroy(){this.videoRenderControlIPCPort&&this.videoRenderControlIPCPort.destroy(),this.audioRenderControlIPCPort&&this.audioRenderControlIPCPort.destroy(),this.muxerControlIPCPort&&this.muxerControlIPCPort.destroy(),this.demuxerControlIPCPort&&this.demuxerControlIPCPort.destroy(),this.onVisibilityChange&&(document.removeEventListener("visibilitychange",this.onVisibilityChange),this.onVisibilityChange=null),this.videoRenderControlIPCPort=this.audioRenderControlIPCPort=this.muxerControlIPCPort=this.videoRenderControlChannel=this.audioRenderControlChannel=this.demuxerControlChannel=this.muxerControlChannel=null}}},2368:(t,e,r)=>{"use strict";r.d(e,{A:()=>p});var i=r(49859),s=r(94870),a=r.n(s),n=r(73363),o=r.n(n),c=r(63939),l=r(50932),h=r(54058),u=r(38724);const d=500;class p{constructor(t){var e;(0,i.A)(this,"timer",void 0),(0,i.A)(this,"interval",void 0),(0,i.A)(this,"data",void 0),(0,i.A)(this,"lastIncomingPacketCount",void 0),(0,i.A)(this,"shutterCount",void 0),(0,i.A)(this,"lastShutterCount",void 0),(0,i.A)(this,"isFirst",void 0),(0,i.A)(this,"max",void 0),(0,i.A)(this,"min",void 0),(0,i.A)(this,"targetPlaybackRate",void 0),(0,i.A)(this,"currentPlaybackRate",void 0),(0,i.A)(this,"playbackRateTimer",void 0),(0,i.A)(this,"options",void 0),this.options=t,this.interval=1e3,this.isFirst=!0,this.data=[],this.lastIncomingPacketCount=BigInt(0),this.shutterCount=0,this.lastShutterCount=0,this.max=1e3*t.max>>>0,this.min=1e3*t.min>>>0,l.M[15](this.options.jitterBuffer,this.min),l.M[15](this.options.jitterBuffer+4,this.max),t.lowLatencyStart&&l.M[15](this.options.jitterBuffer+4,this.min+d),this.targetPlaybackRate=1,this.currentPlaybackRate=1,this.playbackRateTimer=new h.A((()=>{if(this.currentPlaybackRate>this.targetPlaybackRate){const t=Math.max(this.targetPlaybackRate,this.currentPlaybackRate-.01);this.options.observer.onSetPlayRate(t),this.currentPlaybackRate=t}else if(this.currentPlaybackRate<this.targetPlaybackRate){const t=Math.min(this.targetPlaybackRate,this.currentPlaybackRate+.01);this.options.observer.onSetPlayRate(t),this.currentPlaybackRate=t}else this.playbackRateTimer.stop()}),0,200),this.timer=new u.A(a()(e=this.onTimer).call(e,this),1e3,this.interval)}start(){this.timer.start(),this.isFirst=!0,this.lastIncomingPacketCount=c.f[17](this.options.stats+24)+c.f[17](this.options.stats+112),this.shutterCount=0,this.lastShutterCount=c.f[15](this.options.stats+292)+c.f[15](this.options.stats+288),this.computePlayRate()}stop(){this.timer.stop(),this.data.length=0,this.isFirst=!0,this.playbackRateTimer.isStarted()&&(this.playbackRateTimer.stop(),this.targetPlaybackRate=this.currentPlaybackRate=1,this.options.observer.onSetPlayRate(1))}reset(){this.data.length=0,this.isFirst=!0,this.lastIncomingPacketCount=c.f[17](this.options.stats+24)+c.f[17](this.options.stats+112),this.shutterCount=0,this.lastShutterCount=c.f[15](this.options.stats+292)+c.f[15](this.options.stats+288),this.targetPlaybackRate=this.currentPlaybackRate=1}setPlayRate(t){this.targetPlaybackRate=t,this.options.useMse?(this.options.observer.onSetPlayRate(this.targetPlaybackRate),this.currentPlaybackRate=this.targetPlaybackRate):this.currentPlaybackRate===t||this.playbackRateTimer.isStarted()||this.playbackRateTimer.start()}computePlayRate(){let t=c.f[15](this.options.stats+244)?c.f[15](this.options.stats+32)/c.f[15](this.options.stats+244)*1e3:c.f[15](this.options.stats+232)?c.f[15](this.options.stats+120)/c.f[15](this.options.stats+232)*1e3:c.f[15](this.options.jitterBuffer);const e=(c.f[15](this.options.jitterBuffer)+c.f[15](this.options.jitterBuffer+4))/2;t<c.f[15](this.options.jitterBuffer)>>1&&t<2e3?this.setPlayRate(.9):t<c.f[15](this.options.jitterBuffer)-d&&t<2e3?this.setPlayRate(.95):t>c.f[15](this.options.jitterBuffer+4)+d?this.setPlayRate(1.05):(this.currentPlaybackRate<1&&t>=e||this.currentPlaybackRate>1&&t<=e)&&this.setPlayRate(1),t>2e3&&this.max>2e3&&t>this.max<<1&&this.options.observer.onCroppingBuffer(c.f[15](this.options.jitterBuffer+4))}process(){var t,e;const r=o()(t=this.data).call(t,((t,e,r)=>t+e*(r+1)),0)/55,i=o()(e=this.data).call(e,((t,e)=>t+Math.pow(e-r,2)),0)/this.data.length,s=Math.sqrt(i);if(this.options.lowLatency){const t=Math.round(r/(this.interval/1e3)),e=c.f[15](this.options.stats+232)+c.f[15](this.options.stats+244);t<e>>1||this.shutterCount>3?(l.M[15](this.options.jitterBuffer,Math.min(2*c.f[15](this.options.jitterBuffer),this.max-d)),l.M[15](this.options.jitterBuffer+4,Math.min(2*c.f[15](this.options.jitterBuffer+4),this.max))):t>=e&&s<50?(l.M[15](this.options.jitterBuffer,Math.max(c.f[15](this.options.jitterBuffer)-d,this.min)),l.M[15](this.options.jitterBuffer+4,Math.max(c.f[15](this.options.jitterBuffer+4)-d,this.min+d))):s>100?(l.M[15](this.options.jitterBuffer,Math.min(c.f[15](this.options.jitterBuffer)+d,this.max-d)),l.M[15](this.options.jitterBuffer+4,Math.min(c.f[15](this.options.jitterBuffer+4)+d,this.max))):s<20?c.f[15](this.options.jitterBuffer)===this.min?l.M[15](this.options.jitterBuffer+4,Math.max(c.f[15](this.options.jitterBuffer+4)-d,this.min+d)):l.M[15](this.options.jitterBuffer,Math.max(c.f[15](this.options.jitterBuffer)-d,this.min)):c.f[15](this.options.jitterBuffer+4)===this.max?l.M[15](this.options.jitterBuffer,Math.min(c.f[15](this.options.jitterBuffer)+d,this.max-d)):l.M[15](this.options.jitterBuffer+4,Math.min(c.f[15](this.options.jitterBuffer+4)+d,this.max))}this.computePlayRate(),l.M[19](this.options.stats+272,s)}onTimer(){const t=c.f[17](this.options.stats+24)+c.f[17](this.options.stats+112);this.isFirst?this.isFirst=!1:this.data.push(Number(BigInt.asIntN(32,t-this.lastIncomingPacketCount))),this.lastIncomingPacketCount=t,c.f[15](this.options.stats+292)+c.f[15](this.options.stats+288)>this.lastShutterCount?this.shutterCount++:this.shutterCount=0,this.lastShutterCount=c.f[15](this.options.stats+292)+c.f[15](this.options.stats+288),this.data.length>10&&this.data.shift(),10===this.data.length&&this.process()}}},78201:(t,e,r)=>{"use strict";r.d(e,{A:()=>h});var i=r(49859),s=r(94870),a=r.n(s),n=r(63939),o=r(50932),c=r(54058),l=r(43607);class h{constructor(t,e,r){var s;(0,i.A)(this,"stats",void 0),(0,i.A)(this,"timer",void 0),(0,i.A)(this,"videoFrameRenderCount",void 0),(0,i.A)(this,"videoFrameDecodeCount",void 0),(0,i.A)(this,"audioFrameRenderCount",void 0),(0,i.A)(this,"audioFrameDecodeCount",void 0),(0,i.A)(this,"videoPacketBytes",void 0),(0,i.A)(this,"audioPacketBytes",void 0),(0,i.A)(this,"bufferReceiveBytes",void 0),(0,i.A)(this,"observer",void 0),(0,i.A)(this,"isWorkerMain",void 0),(0,i.A)(this,"videoDecodeMaxIntervalCounter",void 0),(0,i.A)(this,"lastAudioStutterCount",void 0),(0,i.A)(this,"lastAVDelta",void 0),this.stats=t,this.observer=r,this.isWorkerMain=e,this.timer=new c.A(a()(s=this.onTimer).call(s,this),1e3,1e3)}reset(){this.videoFrameRenderCount=n.f[17](this.stats+160),this.videoFrameDecodeCount=n.f[17](this.stats+144),this.audioFrameRenderCount=n.f[17](this.stats+72),this.audioFrameDecodeCount=n.f[17](this.stats+56),this.videoPacketBytes=n.f[17](this.stats+104),this.audioPacketBytes=n.f[17](this.stats+16),this.bufferReceiveBytes=n.f[17](this.stats+192),this.isWorkerMain||(o.M[15](this.stats+248,0),o.M[15](this.stats+252,0),o.M[15](this.stats+256,0),o.M[15](this.stats+260,0))}start(){this.reset(),this.videoDecodeMaxIntervalCounter=0,this.lastAudioStutterCount=0,this.lastAVDelta=BigInt(0),this.timer.start()}stop(){this.timer.stop()}onTimer(){o.M[15](this.stats+228,Number(BigInt.asIntN(32,n.f[17](this.stats+160)-this.videoFrameRenderCount))),o.M[15](this.stats+224,Number(BigInt.asIntN(32,n.f[17](this.stats+144)-this.videoFrameDecodeCount))),o.M[15](this.stats+240,Number(BigInt.asIntN(32,n.f[17](this.stats+72)-this.audioFrameRenderCount))),o.M[15](this.stats+236,Number(BigInt.asIntN(32,n.f[17](this.stats+56)-this.audioFrameDecodeCount))),o.M[15](this.stats+220,Number(BigInt.asIntN(32,n.f[17](this.stats+104)-this.videoPacketBytes))),o.M[15](this.stats+216,Number(BigInt.asIntN(32,n.f[17](this.stats+16)-this.audioPacketBytes))),o.M[15](this.stats+264,Number(BigInt.asIntN(32,n.f[17](this.stats+192)-this.bufferReceiveBytes))),"visible"===document.visibilityState&&(n.f[15](this.stats+228)<.5*n.f[15](this.stats+232)||n.f[15](this.stats+260)>6e3/n.f[15](this.stats+232))&&this.observer.onVideoStutter(),n.f[15](this.stats+256)>1e3/n.f[15](this.stats+232)&&n.f[15](this.stats+224)<.9*n.f[15](this.stats+232)&&(n.f[17](this.stats+328)>0&&n.f[17](this.stats+336)>0&&n.f[17](this.stats+328)-n.f[17](this.stats+336)>BigInt(1e3)&&n.f[17](this.stats+328)-n.f[17](this.stats+336)>this.lastAVDelta||n.f[15](this.stats+288)>this.lastAudioStutterCount)?this.videoDecodeMaxIntervalCounter++:this.videoDecodeMaxIntervalCounter=0,this.videoDecodeMaxIntervalCounter>5&&(this.observer.onVideoDiscard(),this.videoDecodeMaxIntervalCounter=0),this.lastAudioStutterCount=n.f[15](this.stats+288),this.lastAVDelta=n.f[17](this.stats+328)-n.f[17](this.stats+336),this.reset();const t=n.f[17](this.stats+344),e=n.f[17](this.stats+352),r=n.f[17](this.stats+328),i=n.f[17](this.stats+336);if(t&&e&&t-r>2e3&&e-i>2e3||t&&!e&&t-r>2e3||e&&!t&&e-i>2e3){const r=t&&e?l.jk(t,e):t||e;this.observer.onMasterTimerUpdate(r)}}}},80089:(t,e,r)=>{"use strict";var i;r.d(e,{s:()=>i}),function(t){t.WIDEVINE="com.widevine.alpha",t.PLAYREADY="com.microsoft.playready",t.CLEARKEY="org.w3.clearkey",t.FAIRPLAY="com.apple.fps.1_0"}(i||(i={}))},3680:(t,e,r)=>{"use strict";r.d(e,{A:()=>n});var i=r(86226),s=r.n(i),a=r(80089);function n(t){const e={edef8ba979d64acea3c827dcd51d21ed:a.s.WIDEVINE,"9a04f07998404286ab92e65be0885f95":a.s.PLAYREADY,e2719d58a985b3c9781ab030af78d30e:a.s.CLEARKEY,"94ce86fb07ff4f43adb893d2fa968ca2":a.s.FAIRPLAY};let r="";return s()(t).call(t,(t=>{let e=t.toString(16);1===e.length&&(e="0"+e),r+=e})),e[r]}},30691:(t,e,r)=>{"use strict";r.d(e,{A:()=>a});var i=r(86226),s=r.n(i);function a(t){let e="";return s()(t).call(t,(t=>{e+=String.fromCharCode(t)})),e=btoa(e),e.replace(/=/g,"").replace(/\//g,"_").replace(/\+/g,"-")}},28090:(t,e,r)=>{"use strict";r.d(e,{CN:()=>n,E9:()=>m,F5:()=>i,Gd:()=>x,IY:()=>v,NN:()=>o,NX:()=>A,Nz:()=>h,Rj:()=>p,S2:()=>s,Sw:()=>y,W1:()=>k,Wt:()=>d,Wu:()=>w,d6:()=>a,dQ:()=>g,ff:()=>f,hV:()=>l,mQ:()=>u,xv:()=>b,yd:()=>c});const i="loading",s="loaded",a="playing",n="played",o="paused",c="stopped",l="ended",h="seeking",u="seeked",d="changing",p="changed",f="error",m="time",v="resume",g="audioContextRunning",y="firstAudioRendered",A="firstVideoRendered",b="streamUpdate",x="progress",w="volumeChange",k="subtitleDelayChange"},67593:(t,e,r)=>{"use strict";r.d(e,{A:()=>n});var i=r(26429),s=r(42577),a=r(95797);function n(t){return i.USE_THREADS||a.A.worker&&t?new MessageChannel:new s.A}},76750:(t,e,r)=>{"use strict";function i(){if("function"==typeof MediaSource)return MediaSource;if("function"==typeof ManagedMediaSource)return ManagedMediaSource;throw new Error("not support mse")}r.d(e,{A:()=>i})},47595:(t,e,r)=>{"use strict";r.d(e,{A:()=>n});var i=r(95797),s=r(86834),a=r(44690);function n(){let t=i.A.offscreenCanvas;return(s.A.safari&&!s.A.checkVersion(s.A.version,"17",!0)||a.A.ios&&!s.A.checkVersion(a.A.version,"17",!0))&&(t=!1),t}},52277:(t,e,r)=>{"use strict";r.d(e,{M:()=>p});var i,s,a=r(49859),n=r(74707),o=r.n(n),c=r(61499),l=r(12085),h=r(12264),u=r(73783),d=r(30128);class p{constructor(){(0,a.A)(this,"avpacketList",void 0),(0,a.A)(this,"avframeList",void 0),(0,a.A)(this,"avpacketListMutex",void 0),(0,a.A)(this,"avframeListMutex",void 0),(0,a.A)(this,"stats",void 0)}}i=p.prototype,(s=new(o())).set("avpacketList",{0:h.A,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),s.set("avframeList",{0:h.A,1:0,2:0,3:0,4:0,5:0,6:0,7:12,8:0}),s.set("avpacketListMutex",{0:u.eu,1:0,2:0,3:0,4:0,5:0,6:0,7:24,8:0}),s.set("avframeListMutex",{0:u.eu,1:0,2:0,3:0,4:0,5:0,6:0,7:28,8:0}),s.set("stats",{0:d.A,1:0,2:0,3:0,4:0,5:0,6:0,7:32,8:0}),(0,l.A)(i,c.Og,!0),(0,l.A)(i,c.dc,8),(0,l.A)(i,c.g7,392),(0,l.A)(i,c.JY,s)},27089:(t,e,r)=>{"use strict";r.d(e,{A:()=>k});var i=r(49859),s=r(74707),a=r.n(s),n=r(86226),o=r.n(n),c=r(61499),l=r(52277),h=r(74503),u=r(94300),d=r(67672),p=r(4624),f=r(18667),m=r(59377),v=r(56024),g=r(71517),y=r(73783),A=r(84149),b=r(54058),x=r(95335);const w="src/avplayer/worker/AudioPipeline.ts";class k{constructor(){(0,i.A)(this,"decoder",void 0),(0,i.A)(this,"render",void 0),(0,i.A)(this,"globalDataMap",void 0),(0,i.A)(this,"controlPort",void 0),(0,i.A)(this,"timer",void 0),this.decoder=new f.A,this.render=new m.A,this.globalDataMap=new(a())}createGlobalData(t){const e=(0,h.A)(l.M);return y.Ts(e[c.o9]+24),y.Ts(e[c.o9]+28),this.globalDataMap.set(t,e),e}releaseGlobalData(t){t.avframeList.clear((t=>{(0,v.to)(t)}),20),t.avpacketList.clear((t=>{(0,g.Up)(t)}),20),y.zr(t[c.o9]+24),y.zr(t[c.o9]+28),(0,u.A)(t)}async init(t){this.controlPort=new A.Ay(t);let e=0;this.timer=new b.A((()=>{var t;e++;const r=[];o()(t=this.globalDataMap).call(t,((t,i)=>{const s=t.stats;r.push({taskId:i,stats:{audioFrameDecodeCount:s.audioFrameDecodeCount,audioFrameDecodeIntervalMax:s.audioFrameDecodeIntervalMax,audioDecodeErrorPacketCount:s.audioDecodeErrorPacketCount,audioFrameRenderCount:s.audioFrameRenderCount,audioFrameRenderIntervalMax:s.audioFrameRenderIntervalMax,sampleRate:s.sampleRate,channels:s.channels,audioFrameSize:s.audioFrameSize,audioCurrentTime:s.audioCurrentTime}}),2===e&&(s.audioFrameDecodeIntervalMax=0,s.audioFrameRenderIntervalMax=0)})),this.controlPort.notify("stats",{data:r}),2===e&&(e=0)}),0,500),this.controlPort.on(A.Wo,(t=>{if("stats"===t.method){const e=t.params.data;for(let t=0;t<e.length;t++){const r=this.globalDataMap.get(e[t].taskId).stats;r&&(x.__(e[t].stats,((t,e)=>{r[e]=t})),r.jitterBuffer.min=e[t].jitterBuffer.min,r.jitterBuffer.max=e[t].jitterBuffer.max)}}})),this.timer.start()}async invoke(t,e,r){const i=this;function s(t,e,r){if("unregisterTask"===t){const t=i.globalDataMap.get(e[0]);t&&(i.releaseGlobalData(t),i.globalDataMap.delete(e[0]))}else if("clear"===t){var s;o()(s=i.globalDataMap).call(s,(t=>{i.releaseGlobalData(t)})),i.globalDataMap.clear()}else if("syncSeekTime"===t){const t=i.globalDataMap.get(e[0]);if(t)return t.stats.audioCurrentTime}return r}if("decoder"===t){if("registerTask"===e){const t=this.globalDataMap.get(r[0].taskId)||this.createGlobalData(r[0].taskId);r[0].stats=t[c.o9]+32,r[0].avpacketList=t[c.o9],r[0].avpacketListMutex=t[c.o9]+24,r[0].avframeList=t[c.o9]+12,r[0].avframeListMutex=t[c.o9]+28}if(d.Pc(this.decoder[e]))return this.decoder[e](...r).then((t=>s(e,r,t)));p.h2(`method ${e} not found`,w,180)}else{if("registerTask"===e){const t=this.globalDataMap.get(r[0].taskId)||this.createGlobalData(r[0].taskId);r[0].stats=t[c.o9]+32,r[0].avframeList=t[c.o9]+12,r[0].avframeListMutex=t[c.o9]+28}if(d.Pc(this.render[e]))return this.render[e](...r).then((t=>s(e,r,t)));p.h2(`method ${e} not found`,w,198)}}async setLogLevel(t){p.V$(t)}}},40097:(t,e,r)=>{"use strict";r.d(e,{A:()=>d});var i=r(49859),s=r(74707),a=r.n(s),n=r(30128),o=r(29170),c=r(88506),l=r(27089),h=r(84149),u=r(95335);class d{constructor(){(0,i.A)(this,"thread",void 0),(0,i.A)(this,"controlMessageChannel",void 0),(0,i.A)(this,"controlPort",void 0),(0,i.A)(this,"statsMap",void 0),this.statsMap=new(a())}async run(){this.thread=await(0,c.pt)(l.A,{name:"AudioPipeline",dispatchToWorker:!0},27089).run(),this.controlMessageChannel=new MessageChannel,this.controlPort=new h.Ay(this.controlMessageChannel.port1),this.controlPort.on(h.Wo,(t=>{if("stats"===t.method){const e=t.params.data,r=[];for(let t=0;t<e.length;t++){const i=this.statsMap.get(e[t].taskId);i&&(u.__(e[t].stats,((t,e)=>{i[e]=t})),r.push({taskId:e[t].taskId,stats:{audioPacketQueueLength:i.audioPacketQueueLength,audioEncodeFramerate:i.audioEncodeFramerate,videoPacketQueueLength:i.videoPacketQueueLength},jitterBuffer:{min:i.jitterBuffer.min,max:i.jitterBuffer.max}}))}this.controlPort.notify("stats",{data:{stats:r}})}})),await this.thread.init.transfer(this.controlMessageChannel.port2).invoke(this.controlMessageChannel.port2)}async destroy(){await(0,c.nx)(this.thread),this.thread=null}setLogLevel(t){this.thread.setLogLevel(t)}transformResult(t,e,r){if("unregisterTask"===t)this.statsMap.delete(e[0]);else if("clear"===t)this.statsMap.clear();else if("registerTask"===t)this.statsMap.set(e[0].taskId,(0,o.A)(e[0].stats,n.A));else if("syncSeekTime"===t){const t=this.statsMap.get(e[0]);if(t)return void(t.audioCurrentTime=r)}return r}get AudioDecodePipeline(){const t=this;return new Proxy({},{get(e,r,i){if(e[r])return e[r];const s=async function(...e){return t.thread.invoke("decoder",r,e).then((i=>t.transformResult(r,e,i)))};return s.transfer=function(...e){return{invoke:async function(...i){return t.thread.invoke.transfer(...e).invoke("decoder",r,i).then((e=>t.transformResult(r,i,e)))}}},e[r]=s,e[r]}})}get AudioRenderPipeline(){const t=this;return new Proxy({},{get(e,r,i){if(e[r])return e[r];const s=async function(...e){return t.thread.invoke("render",r,e).then((i=>t.transformResult(r,e,i)))};return s.transfer=function(...e){return{invoke:async function(...i){return t.thread.invoke.transfer(...e).invoke("render",r,i).then((e=>t.transformResult(r,i,e)))}}},e[r]=s,e[r]}})}}},59016:(t,e,r)=>{"use strict";r.d(e,{A:()=>k});var i=r(49859),s=r(74707),a=r.n(s),n=r(86226),o=r.n(n),c=r(61499),l=r(52277),h=r(74503),u=r(94300),d=r(87243),p=r(72480),f=r(67672),m=r(4624),v=r(71762),g=r(56024),y=r(71517),A=r(73783),b=r(84149),x=r(54058);const w="src/avplayer/worker/IODemuxPipeline.ts";class k{constructor(){(0,i.A)(this,"ioThread",void 0),(0,i.A)(this,"demuxPipeline",void 0),(0,i.A)(this,"globalDataMap",void 0),(0,i.A)(this,"controlPort",void 0),(0,i.A)(this,"timer",void 0),this.ioThread=new d.A,this.demuxPipeline=new p.A,this.globalDataMap=new(a())}createGlobalData(t){const e=(0,h.A)(l.M);return A.Ts(e[c.o9]+24),A.Ts(e[c.o9]+28),this.globalDataMap.set(t,e),e}releaseGlobalData(t){t.avframeList.clear((t=>{(0,g.to)(t)}),20),t.avpacketList.clear((t=>{(0,y.Up)(t)}),20),A.zr(t[c.o9]+24),A.zr(t[c.o9]+28),(0,u.A)(t)}async init(t){this.controlPort=new b.Ay(t),this.timer=new x.A((()=>{var t;const e=[];o()(t=this.globalDataMap).call(t,((t,r)=>{const i=t.stats,s={bufferReceiveBytes:i.bufferReceiveBytes},a=this.demuxPipeline.tasks.get(r);a&&(a.formatContext.getStreamByMediaType(1)&&(s.audioPacketQueueLength=i.audioPacketQueueLength,s.audioPacketCount=i.audioPacketCount,s.audioPacketBytes=i.audioPacketBytes,s.audioEncodeFramerate=i.audioEncodeFramerate),a.formatContext.getStreamByMediaType(0)&&(s.videoPacketQueueLength=i.videoPacketQueueLength,s.videoPacketCount=i.videoPacketCount,s.videoPacketBytes=i.videoPacketBytes,s.keyFrameCount=i.keyFrameCount,s.gop=i.gop,s.keyFrameInterval=i.keyFrameInterval,s.videoEncodeFramerate=i.videoEncodeFramerate),e.push({taskId:r,stats:s}))})),this.controlPort.notify("stats",{data:e})}),0,500),this.timer.start()}async invoke(t,e,r){const i=this;function s(t,e,r){if("unregisterTask"===t){const t=i.globalDataMap.get(e[0]);t&&(i.releaseGlobalData(t),i.globalDataMap.delete(e[0]))}else if("clear"===t){var s;o()(s=i.globalDataMap).call(s,(t=>{i.releaseGlobalData(t)})),i.globalDataMap.clear()}else if("analyzeStreams"===t&&!f.ai(r)){var a;o()(a=r.streams).call(a,(t=>{t.codecpar=(0,v.Wu)(t.codecpar)}))}}if("io"===t){if("registerTask"===e){const t=this.globalDataMap.get(r[0].taskId)||this.createGlobalData(r[0].taskId);r[0].stats=t[c.o9]+32}if(f.Pc(this.ioThread[e]))return this.ioThread[e](...r).then((t=>(s(e,r,t),t)));m.h2(`method ${e} not found`,w,163)}else{if("registerTask"===e){const t=this.globalDataMap.get(r[0].taskId)||this.createGlobalData(r[0].taskId);r[0].stats=t[c.o9]+32,r[0].avpacketList=t[c.o9],r[0].avpacketListMutex=t[c.o9]+24}if(f.Pc(this.demuxPipeline[e]))return this.demuxPipeline[e](...r).then((t=>(s(e,r,t),t)));m.h2(`method ${e} not found`,w,181)}}async setLogLevel(t){m.V$(t)}}},29998:(t,e,r)=>{"use strict";r.d(e,{A:()=>y});var i=r(49859),s=r(74707),a=r.n(s),n=r(86226),o=r.n(n),c=r(30128),l=r(29170),h=r(88506),u=r(59016),d=r(71762),p=r(67672),f=r(72703),m=r(71766),v=r(84149),g=r(95335);class y{constructor(){(0,i.A)(this,"thread",void 0),(0,i.A)(this,"codecparMap",void 0),(0,i.A)(this,"controlMessageChannel",void 0),(0,i.A)(this,"controlPort",void 0),(0,i.A)(this,"statsMap",void 0),this.codecparMap=new(a()),this.statsMap=new(a())}async run(){this.thread=await(0,h.pt)(u.A,{name:"IODemuxPipeline",dispatchToWorker:!0},59016).run(),this.controlMessageChannel=new MessageChannel,this.controlPort=new v.Ay(this.controlMessageChannel.port1),this.controlPort.on(v.Wo,(t=>{if("stats"===t.method){const e=t.params.data;for(let t=0;t<e.length;t++){const r=this.statsMap.get(e[t].taskId);r&&g.__(e[t].stats,((t,e)=>{r[e]=t}))}}})),await this.thread.init.transfer(this.controlMessageChannel.port2).invoke(this.controlMessageChannel.port2)}setLogLevel(t){this.thread.setLogLevel(t)}async destroy(){await(0,h.nx)(this.thread),this.thread=null}get IOPipeline(){const t=this;return new Proxy({},{get(e,r,i){if(e[r])return e[r];const s=async function(...e){return t.thread.invoke("io",r,e)};return s.transfer=function(...e){return{invoke:async function(...i){return t.thread.invoke.transfer(...e).invoke("io",r,i)}}},e[r]=s,e[r]}})}get DemuxPipeline(){const t=this;function e(e,r,i){if("analyzeStreams"!==e||p.ai(i))if("unregisterTask"===e){const e=t.codecparMap.get(r[0]);e&&(o()(e).call(e,(t=>{(0,m.dn)(t)})),t.codecparMap.delete(r[0])),t.statsMap.delete(r[0])}else if("clear"===e){var s;o()(s=t.codecparMap).call(s,(t=>{o()(t).call(t,(t=>{(0,m.dn)(t)}))})),t.codecparMap.clear(),t.statsMap.clear()}else"registerTask"===e&&t.statsMap.set(r[0].taskId,(0,l.A)(r[0].stats,c.A));else{var a;const e=[];o()(a=i.streams).call(a,(i=>{(0,f.A)(i.codecpar)||(i.codecpar=(0,d.T8)(i.codecpar),e.push(i.codecpar)),t.codecparMap.set(r[0],e)}))}}return new Proxy({},{get(r,i,s){if(r[i])return r[i];const a=async function(...r){return t.thread.invoke("demux",i,r).then((t=>(e(i,r,t),t)))};return a.transfer=function(...r){return{invoke:async function(...s){return t.thread.invoke.transfer(...r).invoke("demux",i,s).then((t=>(e(i,s,t),t)))}}},r[i]=a,r[i]}})}}},75392:(t,e,r)=>{"use strict";r.d(e,{A:()=>b});var i=r(49859),s=r(74707),a=r.n(s),n=r(86226),o=r.n(n),c=r(61499),l=r(52277),h=r(74503),u=r(94300),d=r(67672),p=r(4624),f=r(56024),m=r(71517),v=r(73783),g=r(84149),y=r(54058),A=r(95335);class b{constructor(){(0,i.A)(this,"mse",void 0),(0,i.A)(this,"globalDataMap",void 0),(0,i.A)(this,"controlPort",void 0),(0,i.A)(this,"timer",void 0),this.globalDataMap=new(a())}createGlobalData(t){const e=(0,h.A)(l.M);return v.Ts(e[c.o9]+24),v.Ts(e[c.o9]+28),this.globalDataMap.set(t,e),e}releaseGlobalData(t){t.avframeList.clear((t=>{(0,f.to)(t)}),20),t.avpacketList.clear((t=>{(0,m.Up)(t)}),20),v.zr(t[c.o9]+24),v.zr(t[c.o9]+28),(0,u.A)(t)}async init(t){this.mse=new((await Promise.all([r.e(883),r.e(115)]).then(r.bind(r,25115))).default),this.controlPort=new g.Ay(t),this.timer=new y.A((()=>{var t;const e=[];o()(t=this.globalDataMap).call(t,((t,r)=>{const i=t.stats;e.push({taskId:r,stats:{audioFrameDecodeCount:i.audioFrameDecodeCount,audioFrameRenderCount:i.audioFrameRenderCount,sampleRate:i.sampleRate,channels:i.channels,videoFrameDecodeCount:i.videoFrameDecodeCount,videoFrameRenderCount:i.videoFrameRenderCount,width:i.width,height:i.height}})})),this.controlPort.notify("stats",{data:e})}),0,500),this.controlPort.on(g.Wo,(t=>{if("stats"===t.method){const e=t.params.data;for(let t=0;t<e.length;t++){const r=this.globalDataMap.get(e[t].taskId).stats;r&&(A.__(e[t].stats,((t,e)=>{r[e]=t})),r.jitterBuffer.min=e[t].jitterBuffer.min,r.jitterBuffer.max=e[t].jitterBuffer.max)}}})),this.timer.start()}async invoke(t,e){const r=this;if("registerTask"===t){const t=this.globalDataMap.get(e[0].taskId)||this.createGlobalData(e[0].taskId);e[0].stats=t[c.o9]+32,e[0].avpacketList=t[c.o9],e[0].avpacketListMutex=t[c.o9]+24}if(d.Pc(this.mse[t]))return this.mse[t].transfer||(this.mse[t].transfer=[]),this.mse[t](...e).then((i=>(this.mse[t].transfer.length&&(this.invoke.transfer=this.mse[t].transfer),i=function(t,e,i){if("unregisterTask"===t){const t=r.globalDataMap.get(e[0]);t&&(r.releaseGlobalData(t),r.globalDataMap.delete(e[0]))}else if("clear"===t){var s;o()(s=r.globalDataMap).call(s,(t=>{r.releaseGlobalData(t)})),r.globalDataMap.clear()}return i}(t,e,i),i)));p.h2(`method ${t} not found`,"src/avplayer/worker/MSEPipeline.ts",163)}async setLogLevel(t){p.V$(t)}}},21862:(t,e,r)=>{"use strict";r.d(e,{A:()=>d});var i=r(49859),s=r(74707),a=r.n(s),n=r(30128),o=r(29170),c=r(88506),l=r(84149),h=r(95335),u=r(75392);class d{constructor(){(0,i.A)(this,"thread",void 0),(0,i.A)(this,"controlMessageChannel",void 0),(0,i.A)(this,"controlPort",void 0),(0,i.A)(this,"statsMap",void 0),this.statsMap=new(a())}async run(){this.thread=await(0,c.pt)(u.A,{name:"MSEPipeline",dispatchToWorker:!0},75392).run(),this.controlMessageChannel=new MessageChannel,this.controlPort=new l.Ay(this.controlMessageChannel.port1),this.controlPort.on(l.Wo,(t=>{if("stats"===t.method){const e=t.params.data,r=[];for(let t=0;t<e.length;t++){const i=this.statsMap.get(e[t].taskId);i&&(h.__(e[t].stats,((t,e)=>{i[e]=t})),r.push({taskId:e[t].taskId,stats:{videoEncodeFramerate:i.videoEncodeFramerate,videoPacketQueueLength:i.videoPacketQueueLength,audioPacketQueueLength:i.audioPacketQueueLength,audioEncodeFramerate:i.audioEncodeFramerate},jitterBuffer:{min:i.jitterBuffer.min,max:i.jitterBuffer.max}}))}this.controlPort.notify("stats",{data:{stats:r}})}})),await this.thread.init.transfer(this.controlMessageChannel.port2).invoke(this.controlMessageChannel.port2)}setLogLevel(t){this.thread.setLogLevel(t)}async destroy(){await(0,c.nx)(this.thread),this.thread=null}transformResult(t,e,r){return"unregisterTask"===t?this.statsMap.delete(e[0]):"clear"===t?this.statsMap.clear():"registerTask"===t&&this.statsMap.set(e[0].taskId,(0,o.A)(e[0].stats,n.A)),r}get MSEPipeline(){const t=this;return new Proxy({},{get(e,r,i){if(e[r])return e[r];const s=async function(...e){return t.thread.invoke(r,e).then((i=>t.transformResult(r,e,i)))};return s.transfer=function(...e){return{invoke:async function(...i){return t.thread.invoke.transfer(...e).invoke(r,i).then((e=>t.transformResult(r,i,e)))}}},e[r]=s,e[r]}})}}},71272:(t,e,r)=>{"use strict";r.d(e,{A:()=>k});var i=r(49859),s=r(74707),a=r.n(s),n=r(86226),o=r.n(n),c=r(61499),l=r(52277),h=r(74503),u=r(94300),d=r(67672),p=r(4624),f=r(31138),m=r(33968),v=r(56024),g=r(71517),y=r(73783),A=r(84149),b=r(54058),x=r(95335);const w="src/avplayer/worker/VideoPipeline.ts";class k{constructor(){(0,i.A)(this,"decoder",void 0),(0,i.A)(this,"render",void 0),(0,i.A)(this,"globalDataMap",void 0),(0,i.A)(this,"controlPort",void 0),(0,i.A)(this,"timer",void 0),this.decoder=new f.A,this.render=new m.A,this.globalDataMap=new(a())}createGlobalData(t){const e=(0,h.A)(l.M);return y.Ts(e[c.o9]+24),y.Ts(e[c.o9]+28),this.globalDataMap.set(t,e),e}releaseGlobalData(t){t.avframeList.clear((t=>{(0,v.to)(t)}),20),t.avpacketList.clear((t=>{(0,g.Up)(t)}),20),y.zr(t[c.o9]+24),y.zr(t[c.o9]+28),(0,u.A)(t)}async init(t){this.controlPort=new A.Ay(t);let e=0;this.timer=new b.A((()=>{var t;e++;const r=[];o()(t=this.globalDataMap).call(t,((t,i)=>{const s=t.stats;r.push({taskId:i,stats:{videoFrameDecodeCount:s.videoFrameDecodeCount,videoFrameDecodeIntervalMax:s.videoFrameDecodeIntervalMax,videoDecodeErrorPacketCount:s.videoDecodeErrorPacketCount,videoCurrentTime:s.videoCurrentTime,videoFrameRenderCount:s.videoFrameRenderCount,videoFrameRenderIntervalMax:s.videoFrameRenderIntervalMax,videoFrameDropCount:s.videoFrameDropCount,width:s.width,height:s.height}}),2===e&&(s.videoFrameDecodeIntervalMax=0,s.videoFrameRenderIntervalMax=0)})),this.controlPort.notify("stats",{data:r}),2===e&&(e=0)}),0,500),this.controlPort.on(A.Wo,(t=>{if("stats"===t.method){const e=t.params.data;for(let t=0;t<e.length;t++){const r=this.globalDataMap.get(e[t].taskId).stats;r&&(x.__(e[t].stats,((t,e)=>{r[e]=t})),r.jitterBuffer.min=e[t].jitterBuffer.min,r.jitterBuffer.max=e[t].jitterBuffer.max)}}})),this.timer.start()}async invoke(t,e,r){const i=this;function s(t,e,r){if("unregisterTask"===t){const t=i.globalDataMap.get(e[0]);t&&(i.releaseGlobalData(t),i.globalDataMap.delete(e[0]))}else if("clear"===t){var s;o()(s=i.globalDataMap).call(s,(t=>{i.releaseGlobalData(t)})),i.globalDataMap.clear()}else if("syncSeekTime"===t){const t=i.globalDataMap.get(e[0]);if(t)return t.stats.videoCurrentTime}return r}if("decoder"===t){if("registerTask"===e){const t=this.globalDataMap.get(r[0].taskId)||this.createGlobalData(r[0].taskId);r[0].stats=t[c.o9]+32,r[0].avpacketList=t[c.o9],r[0].avpacketListMutex=t[c.o9]+24,r[0].avframeList=t[c.o9]+12,r[0].avframeListMutex=t[c.o9]+28}if(d.Pc(this.decoder[e]))return this.decoder[e](...r).then((t=>s(e,r,t)));p.h2(`method ${e} not found`,w,180)}else{if("registerTask"===e){const t=this.globalDataMap.get(r[0].taskId)||this.createGlobalData(r[0].taskId);r[0].stats=t[c.o9]+32,r[0].avframeList=t[c.o9]+12,r[0].avframeListMutex=t[c.o9]+28}if(d.Pc(this.render[e]))return this.render[e](...r).then((t=>s(e,r,t)));p.h2(`method ${e} not found`,w,198)}}async setLogLevel(t){p.V$(t)}}},21678:(t,e,r)=>{"use strict";r.d(e,{A:()=>d});var i=r(49859),s=r(74707),a=r.n(s),n=r(30128),o=r(29170),c=r(88506),l=r(71272),h=r(84149),u=r(95335);class d{constructor(){(0,i.A)(this,"thread",void 0),(0,i.A)(this,"controlMessageChannel",void 0),(0,i.A)(this,"controlPort",void 0),(0,i.A)(this,"statsMap",void 0),this.statsMap=new(a())}async run(){this.thread=await(0,c.pt)(l.A,{name:"VideoPipeline",dispatchToWorker:!0},71272).run(),this.controlMessageChannel=new MessageChannel,this.controlPort=new h.Ay(this.controlMessageChannel.port1),this.controlPort.on(h.Wo,(t=>{if("stats"===t.method){const e=t.params.data,r=[];for(let t=0;t<e.length;t++){const i=this.statsMap.get(e[t].taskId);i&&(u.__(e[t].stats,((t,e)=>{i[e]=t})),r.push({taskId:e[t].taskId,stats:{videoEncodeFramerate:i.videoEncodeFramerate,videoPacketQueueLength:i.videoPacketQueueLength},jitterBuffer:{min:i.jitterBuffer.min,max:i.jitterBuffer.max}}))}this.controlPort.notify("stats",{data:{stats:r}})}})),await this.thread.init.transfer(this.controlMessageChannel.port2).invoke(this.controlMessageChannel.port2)}setLogLevel(t){this.thread.setLogLevel(t)}async destroy(){await(0,c.nx)(this.thread),this.thread=null}transformResult(t,e,r){if("unregisterTask"===t)this.statsMap.delete(e[0]);else if("clear"===t)this.statsMap.clear();else if("registerTask"===t)this.statsMap.set(e[0].taskId,(0,o.A)(e[0].stats,n.A));else if("syncSeekTime"===t){const t=this.statsMap.get(e[0]);if(t)return void(t.videoCurrentTime=r)}return r}get VideoDecodePipeline(){const t=this;return new Proxy({},{get(e,r,i){if(e[r])return e[r];const s=async function(...e){return t.thread.invoke("decoder",r,e).then((i=>t.transformResult(r,e,i)))};return s.transfer=function(...e){return{invoke:async function(...i){return t.thread.invoke.transfer(...e).invoke("decoder",r,i).then((e=>t.transformResult(r,i,e)))}}},e[r]=s,e[r]}})}get VideoRenderPipeline(){const t=this;return new Proxy({},{get(e,r,i){if(e[r])return e[r];const s=async function(...e){return t.thread.invoke("render",r,e).then((i=>t.transformResult(r,e,i)))};return s.transfer=function(...e){return{invoke:async function(...i){return t.thread.invoke.transfer(...e).invoke("render",r,i).then((e=>t.transformResult(r,i,e)))}}},e[r]=s,e[r]}})}}},88103:(t,e,r)=>{"use strict";r.d(e,{A:()=>c});var i=r(49859),s=r(43356),a=r(4624),n=r(98543),o=r(95797);class c extends s.A{constructor(t,e){super(t,e),(0,i.A)(this,"context",void 0),(0,i.A)(this,"paddingLeft",void 0),(0,i.A)(this,"paddingTop",void 0),(0,i.A)(this,"flipX",void 0),(0,i.A)(this,"flipY",void 0),(0,i.A)(this,"hasAlpha",void 0),(0,i.A)(this,"alphaMask",void 0),this.paddingLeft=0,this.paddingTop=0,this.flipX=1,this.flipY=1}async init(){if("rec2100-hlg"===this.options.colorSpace||"rec2100-pq"===this.options.colorSpace)try{this.context=this.canvas.getContext("2d",{colorSpace:this.options.colorSpace,pixelFormat:"float16"})}catch(t){a.R8("cannot got hdr context, video rendering colors may not be correct, please use the latest version of chrome then in chrome://flags, set: Experimental Web Platform features: Enabled","src/avrender/image/Canvas2dRender.ts",69)}this.context||(this.context=this.canvas.getContext("2d"))}clear(){const t=this.canvas.width>>1,e=this.canvas.height>>1;this.rotate&&(this.context.translate(t,e),this.context.rotate(-this.rotate*Math.PI/180),this.context.translate(-t,-e)),this.context.clearRect(0,0,this.canvasWidth*this.options.devicePixelRatio,this.canvasHeight*this.options.devicePixelRatio),this.rotate&&(this.context.translate(t,e),this.context.rotate(this.rotate*Math.PI/180),this.context.translate(-t,-e))}checkFrame(t,e){const r=!!e;t.codedWidth===this.textureWidth&&t.codedHeight===this.videoHeight&&t.codedWidth===this.videoWidth&&this.hasAlpha===r||(this.alphaMask&&(this.alphaMask.destroy(),this.alphaMask=null),this.hasAlpha=r,this.videoWidth=t.codedWidth,this.videoHeight=t.codedHeight,this.textureWidth=t.codedWidth,this.layout(),this.clear(),this.hasAlpha&&o.A.offscreenCanvas&&o.A.webgl&&(this.alphaMask=new n.A(t.codedWidth,t.codedHeight)))}render(t,e){this.lost||(this.checkFrame(t,e),this.clear(),this.context.drawImage(t,this.paddingLeft,this.paddingTop,this.canvasWidth*this.options.devicePixelRatio-2*this.paddingLeft,this.canvasHeight*this.options.devicePixelRatio-2*this.paddingTop),this.alphaMask&&(this.context.globalCompositeOperation="destination-in",this.alphaMask.process(e),this.context.drawImage(this.alphaMask.getTarget(),this.paddingLeft,this.paddingTop,this.canvasWidth*this.options.devicePixelRatio-2*this.paddingLeft,this.canvasHeight*this.options.devicePixelRatio-2*this.paddingTop),this.context.globalCompositeOperation="source-over"))}layout(){let t=this.videoWidth,e=this.videoHeight,r=this.canvasWidth,i=this.canvasHeight;this.options.sar&&1!==this.options.sar&&(t=Math.floor(this.videoWidth*this.options.sar));let s=0,a=0;90!==this.rotate&&270!==this.rotate||(a=Math.floor((i-r)/2),s=Math.floor((r-i)/2),r=this.canvasHeight,i=this.canvasWidth);const n=t/r,o=e/i;let c;if(c=n>1?!(n<o):n>o,1===this.renderMode&&(c=!c),c){const n=(i-e*r/t)/i;this.paddingTop=(Math.floor(n/2*i)+a)*this.options.devicePixelRatio,this.paddingLeft=s*this.options.devicePixelRatio}else{const n=(r-t*i/e)/r;this.paddingLeft=(Math.floor(n/2*r)+s)*this.options.devicePixelRatio,this.paddingTop=a*this.options.devicePixelRatio}if(this.context){let t=1,e=1;this.flipHorizontal&&(t=-1),this.flipVertical&&(e=-1);const r=this.canvas.width>>1,i=this.canvas.height>>1;this.context.translate(r,i),t!==this.flipX&&this.context.scale(-1,1),e!==this.flipY&&this.context.scale(1,-1),this.context.translate(-r,-i),this.flipX=t,this.flipY=e}}setRotate(t,e=!0){if((t%=360)===this.rotate)return;const r=this.canvas.width>>1,i=this.canvas.height>>1;this.rotate&&(this.context.translate(r,i),this.context.rotate(-this.rotate*Math.PI/180),this.context.translate(-r,-i)),e&&this.clear(),this.rotate=t,this.context&&(this.context.translate(r,i),this.context.rotate(this.rotate*Math.PI/180),this.context.translate(-r,-i)),this.layout()}destroy(){this.context=null,this.alphaMask&&(this.alphaMask.destroy(),this.alphaMask=null),super.destroy()}static isSupport(t){return t instanceof VideoFrame||t instanceof ImageBitmap}}},43356:(t,e,r)=>{"use strict";r.d(e,{A:()=>a});var i=r(49859),s=r(6110);class a{constructor(t,e){(0,i.A)(this,"canvas",void 0),(0,i.A)(this,"options",void 0),(0,i.A)(this,"textureWidth",void 0),(0,i.A)(this,"videoWidth",void 0),(0,i.A)(this,"videoHeight",void 0),(0,i.A)(this,"canvasWidth",void 0),(0,i.A)(this,"canvasHeight",void 0),(0,i.A)(this,"rotate",void 0),(0,i.A)(this,"renderMode",void 0),(0,i.A)(this,"format",void 0),(0,i.A)(this,"lost",void 0),(0,i.A)(this,"destroyed",void 0),(0,i.A)(this,"srcColorSpace",void 0),(0,i.A)(this,"dstColorSpace",void 0),(0,i.A)(this,"flipHorizontal",void 0),(0,i.A)(this,"flipVertical",void 0),this.canvas=t,this.options=e,this.canvasWidth=t.width,this.canvasHeight=t.height,this.videoWidth=0,this.videoHeight=0,this.textureWidth=0,this.rotate=0,this.renderMode=e.renderMode,this.flipHorizontal=!1,this.flipVertical=!1,this.lost=!1,this.destroyed=!1,e.dstColorSpace?this.dstColorSpace=e.dstColorSpace:this.dstColorSpace=new s.A(1,1,1,1)}getRotateMatrix(t){t=Math.PI*t/180;const e=Math.sin(t),r=Math.cos(t);return[r,-e,0,0,e,r,0,0,0,0,1,0,0,0,0,1]}setRenderMode(t){this.renderMode!==t&&(this.renderMode=t,this.layout(),this.clear())}enableHorizontalFlip(t){this.flipHorizontal!==t&&(this.flipHorizontal=t,this.layout(),this.clear())}enableVerticalFlip(t){this.flipVertical!==t&&(this.flipVertical=t,this.layout(),this.clear())}viewport(t,e){if(this.canvasWidth!==t||this.canvasHeight!==e){const r=this.options.devicePixelRatio;this.canvasWidth=t,this.canvasHeight=e,this.canvas.width=t*r,this.canvas.height=e*r,this.videoWidth&&this.videoHeight&&this.layout()}}getVideoWidth(){return this.videoWidth}getVideoHeight(){return this.videoHeight}destroy(){this.canvas=null,this.destroyed=!0}setDstColorSpace(t){this.dstColorSpace=t}static isSupport(t){return!1}}},3016:(t,e,r)=>{"use strict";r.d(e,{A:()=>_});var i=r(49859),s=r(86226),a=r.n(s),n=r(52730),o=r.n(n),c=r(73363),l=r.n(c),h=r(5496),u=r.n(h),d=r(20088),p=r(74503),f=r(63939),m=r(94300),v=r(14686),g=r(97317),y=r(10243),A=r(25669),b=r(57517),x=r(6110),w=r(56024),k=r(25408),T=r(72703);class _ extends y.A{constructor(t,e){super(t,e),(0,i.A)(this,"linesize",void 0),(0,i.A)(this,"hdrMetadata",void 0),this.hdrMetadata=(0,p.A)(d.A),this.hdrMetadata.multiplier=1}async init(){if(await super.init(),!(this.gl instanceof WebGL2RenderingContext))throw new Error("not support webgl2")}generateVertexSource(){return"#version 300 es\n      precision highp float;\n      in vec3 point;\n      in vec4 color;\n      out vec4 v_color;\n      uniform mat4 rotateMatrix;\n      void main(void) {\n        gl_Position = rotateMatrix * vec4(point, 1.0);\n        v_color = color;\n      }\n    "}generateFragmentSource(t,e){var r;e.outputRGB=!0;const i=(0,A.A)(this.srcColorSpace,this.dstColorSpace,e),s=["y","u","v","a"],n=["r","g","b","a"],c=[],h=[],u=[];a()(r=t.comp).call(r,((t,e)=>{c[e]=t.depth+7>>>3,h[e]=t.shift,u[e]=(1<<t.depth)-1}));let d=`texture(${s[t.comp[0].plane]}_Sampler, v_color.xy).${n[t.comp[0].offset/c[0]]}`,p=t.comp[1]?`texture(${s[t.comp[1].plane]}_Sampler, v_color.xy).${n[t.comp[1].offset/c[1]]}`:32&o()(t)?"0.0":"0.5",f=t.comp[2]?`texture(${s[t.comp[2].plane]}_Sampler, v_color.xy).${n[t.comp[2].offset/c[2]]}`:32&o()(t)?"0.0":"0.5",m="1.0";function v(t){return/^texture/.test(t)}128&o()(t)&&(m=`texture(${s[t.comp[t.comp.length-1].plane]}_Sampler, v_color.xy).${n[t.comp[t.comp.length-1].offset/c[t.comp.length-1]]}`,2===t.comp.length&&(p=32&o()(t)?"0.0":"0.5")),this.fragmentSource=`#version 300 es\n      precision highp float;\n      precision highp usampler2D;\n      in vec4 v_color;\n      out vec4 outColor;\n      uniform usampler2D y_Sampler;\n      uniform usampler2D u_Sampler;\n      uniform usampler2D v_Sampler;\n      uniform usampler2D a_Sampler;\n      uniform float offset;\n      uniform float multiplier;\n      uniform float pq_tonemap_a;\n      uniform float pq_tonemap_b;\n      uniform float hlg_ootf_gamma_minus_one;\n      uniform float nits_to_sdr_relative_factor;\n      uniform float sdr_relative_to_nits_factor;\n      ${1&o()(t)?"\n        uint swap(uint x) {\n          uint l = x & 0xFFu;\n          uint h = (x >> 8u) & 0xFFu;\n          return (l << 8u) | h;\n        }\n      ":""}\n      void main () {\n        float y = ${v(d)?`float(${1&o()(t)?`swap(${d})`:d} >> ${h[0]}) / float(${u[0]})`:d};\n        float u = ${v(p)?`float(${1&o()(t)?`swap(${p})`:p} >> ${h[1]}) / float(${u[1]})`:p};\n        float v = ${v(f)?`float(${1&o()(t)?`swap(${f})`:f} >> ${h[2]}) / float(${u[2]})`:f};\n        float a = ${v(m)?`float(${1&o()(t)?`swap(${m})`:m} >> ${h[t.comp.length-1]}) / float(${u[t.comp.length-1]})`:m};\n        vec4 color = vec4(y, u, v, a);\n        if (color.a > 0.0) {\n          color.r /= color.a;\n          color.g /= color.a;\n          color.b /= color.a;\n        }\n        color.r -= offset;\n        color.g -= offset;\n        color.b -= offset;\n        color.r *= multiplier;\n        color.g *= multiplier;\n        color.b *= multiplier;\n        ${l()(i).call(i,((t,e)=>t+e),"")}\n        color.r *= color.a;\n        color.g *= color.a;\n        color.b *= color.a;\n        outColor = color;\n      }\n    `}checkFrame(t){if(f.f[15](t+32)!==this.linesize||f.f[15](t+72)!==this.videoHeight||f.f[15](t+68)!==this.videoWidth||f.f[15](t+80)!==this.format){const e=(0,g.I)(f.f[15](t+80));this.srcColorSpace=new x.A(f.f[15](t+220),f.f[15](t+212),f.f[15](t+216),f.f[15](t+208));const r={type:0,bitDepth:e.comp[0].depth,toneMapPQAndHlgToDst:!0,metadata:this.hdrMetadata,dstSdrMaxLuminanceNits:b.kH,dstMaxLuminanceRelative:1},i=(0,w.aH)(t,14);if(i){const t=f.f[20](i+4);f.f[8](t)>0&&(r.maxContentLightLevel=f.f[8](t))}if(this.generateFragmentSource(e,r),this.program=new k.A(this.fragmentSource,this.generateVertexSource()),this.useProgram(!0),this.program.setMetaData(this.hdrMetadata),this.yTexture.setFormat(this.gl.RED_INTEGER),this.yTexture.setInternalformat(this.gl.R16UI),this.yTexture.setDataType(this.gl.UNSIGNED_SHORT),this.uTexture.setFormat(this.gl.RED_INTEGER),this.uTexture.setInternalformat(this.gl.R16UI),this.uTexture.setDataType(this.gl.UNSIGNED_SHORT),this.vTexture.setFormat(this.gl.RED_INTEGER),this.vTexture.setInternalformat(this.gl.R16UI),this.vTexture.setDataType(this.gl.UNSIGNED_SHORT),this.aTexture.setFormat(this.gl.RED_INTEGER),this.aTexture.setInternalformat(this.gl.R16UI),this.aTexture.setDataType(this.gl.UNSIGNED_SHORT),16&o()(e)){let r=0;if(this.yTexture.setSize(f.f[15](t+32+4*r++)>>>1,f.f[15](t+72)),e.comp.length>2){const i=e.comp[1].plane===e.comp[2].plane;this.uTexture.setSize(f.f[15](t+32+4*r++)>>>(i?2:1),f.f[15](t+72)>>>e.log2ChromaH),i||this.vTexture.setSize(f.f[15](t+32+4*r++)>>>1,f.f[15](t+72)>>>e.log2ChromaH),i&&(this.uTexture.setFormat(this.gl.RG_INTEGER),this.uTexture.setInternalformat(this.gl.RG16UI))}128&o()(e)&&this.aTexture.setSize(f.f[15](t+32+4*r++)>>>1,f.f[15](t+72)),this.textureWidth=f.f[15](t+32)>>>1}else{const r=e.comp[0].depth+7>>>3;let i=e.comp[0].step/r;const s=[0,this.gl.RED_INTEGER,this.gl.RG_INTEGER,this.gl.RGB_INTEGER,this.gl.RGBA_INTEGER],a=[0,this.gl.R16UI,this.gl.RG16UI,this.gl.RGB16UI,this.gl.RGBA16UI];this.yTexture.setFormat(s[i]),this.yTexture.setInternalformat(a[i]),this.yTexture.setSize(f.f[15](t+32)/i>>>1,f.f[15](t+72)),this.textureWidth=f.f[15](t+32)/i>>>1}this.linesize=f.f[15](t+32),this.videoWidth=f.f[15](t+68),this.videoHeight=f.f[15](t+72),this.format=f.f[15](t+80),this.layout()}}render(t){var e;if(this.lost)return;let r=(0,g.I)(f.f[15](t+80));if(!r)return;this.checkFrame(t);let i=0;var s,a,n;(u()(e=this.yTexture).call(e,(0,v.bg)(f.f[20](t+4*i),(f.f[15](t+32+4*i++)>>>1)*this.yTexture.height)),16&o()(r))&&(r.comp.length>2&&(u()(s=this.uTexture).call(s,(0,v.bg)(f.f[20](t+4*i),(f.f[15](t+32+4*i++)>>>1)*this.uTexture.height)),r.comp[1].plane!==r.comp[2].plane&&u()(a=this.vTexture).call(a,(0,v.bg)(f.f[20](t+4*i),(f.f[15](t+32+4*i++)>>>1)*this.vTexture.height))),128&o()(r)&&u()(n=this.aTexture).call(n,(0,v.bg)(f.f[20](t+4*i),(f.f[15](t+32+4*i++)>>>1)*this.aTexture.height)));this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4)}destroy(){this.hdrMetadata&&((0,m.A)(this.hdrMetadata),this.hdrMetadata=null),super.destroy()}static isSupport(t){if((0,T.A)(t)){const e=(0,g.I)(f.f[15](t+80));if(e)return e.comp[0].depth+7>>>3==2}return!1}}},69047:(t,e,r)=>{"use strict";r.d(e,{A:()=>y});var i=r(49859),s=r(52730),a=r.n(s),n=r(73363),o=r.n(n),c=r(5496),l=r.n(c),h=r(63939),u=r(14686),d=r(97317),p=r(10243),f=r(18915),m=r(25669),v=r(6110),g=r(72703);class y extends p.A{constructor(t,e){super(t,e),(0,i.A)(this,"linesize",void 0)}async init(){await super.init()}generateFragmentSource(t){const e=(0,m.A)(this.srcColorSpace,this.dstColorSpace,{bitDepth:8,type:0,outputRGB:!0}),r=["y","u","v","a"],i=16&a()(t)&&t.comp.length>2&&t.comp[1].plane===t.comp[2].plane?["r","a"]:["r","g","b","a"];let s=`texture2D(${r[t.comp[0].plane]}_Sampler, v_color.xy).${i[t.comp[0].offset]}`,n=t.comp[1]?`texture2D(${r[t.comp[1].plane]}_Sampler, v_color.xy).${i[t.comp[1].offset]}`:32&a()(t)?"0.0":"0.5",c=t.comp[2]?`texture2D(${r[t.comp[2].plane]}_Sampler, v_color.xy).${i[t.comp[2].offset]}`:32&a()(t)?"0.0":"0.5",l="1.0";128&a()(t)&&(l=`texture2D(${r[t.comp[t.comp.length-1].plane]}_Sampler, v_color.xy).${i[t.comp[t.comp.length-1].offset]}`,2===t.comp.length&&(n=32&a()(t)?"0.0":"0.5")),this.fragmentSource=`\n      precision highp float;\n      varying vec4 v_color;\n      uniform sampler2D y_Sampler;\n      uniform sampler2D u_Sampler;\n      uniform sampler2D v_Sampler;\n      uniform sampler2D a_Sampler;\n      void main () {\n        float y = ${s};\n        float u = ${n};\n        float v = ${c};\n        float alpha = ${l};\n        vec4 color = vec4(y, u, v, alpha);\n        ${o()(e).call(e,((t,e)=>t+e),"")}\n        gl_FragColor = color;\n      }\n    `}checkFrame(t){if(h.f[15](t+32)!==this.linesize||h.f[15](t+72)!==this.videoHeight||h.f[15](t+68)!==this.videoWidth){const e=(0,d.I)(h.f[15](t+80));if(this.srcColorSpace=new v.A(h.f[15](t+220),h.f[15](t+212),h.f[15](t+216),h.f[15](t+208)),this.generateFragmentSource(e),this.program=new f.A(this.fragmentSource),this.useProgram(),16&a()(e)){let r=0;if(this.yTexture.setSize(h.f[15](t+32+4*r++),h.f[15](t+72)),e.comp.length>2){const i=e.comp[1].plane===e.comp[2].plane;this.uTexture.setSize(h.f[15](t+32+4*r++)>>>(i?1:0),h.f[15](t+72)>>>e.log2ChromaH),i||this.vTexture.setSize(h.f[15](t+32+4*r++),h.f[15](t+72)>>>e.log2ChromaH),i&&(this.uTexture.setFormat(this.gl.LUMINANCE_ALPHA),this.uTexture.setInternalformat(this.gl.LUMINANCE_ALPHA))}128&a()(e)&&this.aTexture.setSize(h.f[15](t+32+4*r++),h.f[15](t+72)),this.textureWidth=h.f[15](t+32)}else{const r=e.comp[0].depth+7>>>3;let i=e.comp[0].step/r;const s=[0,this.gl.LUMINANCE,this.gl.LUMINANCE_ALPHA,this.gl.RGB,this.gl.RGBA];this.yTexture.setFormat(s[i]),this.yTexture.setInternalformat(s[i]),this.yTexture.setSize(h.f[15](t+32)/i,h.f[15](t+72)),this.textureWidth=h.f[15](t+32)/i}this.linesize=h.f[15](t+32),this.videoWidth=h.f[15](t+68),this.videoHeight=h.f[15](t+72),this.format=h.f[15](t+80),this.layout()}}render(t){var e;if(this.lost)return;let r=(0,d.I)(h.f[15](t+80));if(!r)return;this.checkFrame(t);let i=0;var s,n,o;(l()(e=this.yTexture).call(e,(0,u.s3)(h.f[20](t+4*i),h.f[15](t+32+4*i++)*this.yTexture.height)),16&a()(r))&&(r.comp.length>2&&(l()(s=this.uTexture).call(s,(0,u.s3)(h.f[20](t+4*i),h.f[15](t+32+4*i++)*this.uTexture.height)),r.comp[1].plane!==r.comp[2].plane&&l()(n=this.vTexture).call(n,(0,u.s3)(h.f[20](t+4*i),h.f[15](t+32+4*i++)*this.vTexture.height))),128&a()(r)&&l()(o=this.aTexture).call(o,(0,u.s3)(h.f[20](t+4*i),h.f[15](t+32+4*i)*this.aTexture.height)));this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4)}static isSupport(t){if((0,g.A)(t)){const e=(0,d.I)(h.f[15](t+80));if(e)return e.comp[0].depth+7>>>3==1}return!1}}},10243:(t,e,r)=>{"use strict";r.d(e,{A:()=>c});var i=r(49859),s=r(94870),a=r.n(s),n=r(18105),o=r(94012);class c extends o.A{constructor(t,e){super(t,e),(0,i.A)(this,"yTexture",void 0),(0,i.A)(this,"uTexture",void 0),(0,i.A)(this,"vTexture",void 0),(0,i.A)(this,"aTexture",void 0)}useProgram(t=!1){var e,r,i,s;super.useProgram(),this.yTexture=new n.A(this.gl),t&&this.yTexture.setFilter(this.gl.NEAREST),a()(e=this.yTexture).call(e,0),this.yTexture.init(),this.program.bindYTexture(0),this.uTexture=new n.A(this.gl),t&&this.uTexture.setFilter(this.gl.NEAREST),a()(r=this.uTexture).call(r,1),this.uTexture.init(),this.program.bindUTexture(1),this.vTexture=new n.A(this.gl),t&&this.vTexture.setFilter(this.gl.NEAREST),a()(i=this.vTexture).call(i,2),this.vTexture.init(),this.program.bindVTexture(2),this.aTexture=new n.A(this.gl),t&&this.aTexture.setFilter(this.gl.NEAREST),a()(s=this.aTexture).call(s,3),this.aTexture.init(),this.program.bindATexture(3)}destroy(){this.yTexture&&(this.yTexture.destroy(),this.yTexture=null),this.uTexture&&(this.uTexture.destroy(),this.uTexture=null),this.vTexture&&(this.vTexture.destroy(),this.vTexture=null),this.aTexture&&(this.aTexture.destroy(),this.aTexture=null),super.destroy()}}},94012:(t,e,r)=>{"use strict";r.d(e,{A:()=>d});var i=r(49859),s=r(56255),a=r.n(s),n=r(94870),o=r.n(n),c=r(4624),l=r(43356),h=r(38469);const u="src/avrender/image/WebGLRender.ts";class d extends l.A{constructor(t,e){super(t,e),(0,i.A)(this,"gl",void 0),(0,i.A)(this,"vbo",void 0),(0,i.A)(this,"program",void 0),(0,i.A)(this,"vertex",void 0),(0,i.A)(this,"webglContextLostTimer",void 0),(0,i.A)(this,"onWebglContextLost",void 0),(0,i.A)(this,"onWebglContextRestored",void 0),(0,i.A)(this,"fragmentSource",void 0),(0,i.A)(this,"vertexSource",void 0)}async init(){this.gl=this.canvas.getContext("webgl2",{alpha:!0,antialias:!1,preserveDrawingBuffer:this.options.preserveDrawingBuffer}),this.gl||(this.gl=this.canvas.getContext("webgl",{alpha:!0,antialias:!1,preserveDrawingBuffer:this.options.preserveDrawingBuffer})),this.gl||(this.gl=this.canvas.getContext("experimental-webgl",{alpha:!0,antialias:!1,preserveDrawingBuffer:this.options.preserveDrawingBuffer})),this.gl||c.h2("can not support webgl, got WebGLRenderingContext failed",u,97),this.vbo=this.gl.createBuffer(),this.vbo||c.h2("create vao buffer failed",u,102),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vbo),this.gl.enable(this.gl.BLEND),this.gl.clearColor(0,0,0,0),this.gl.clearDepth(1),this.viewport(this.canvasWidth||this.canvas.width,this.canvasHeight||this.canvas.height),this.onWebglContextLost=t=>{this.destroyed||(this.webglContextLostTimer=a()((()=>{this.lost=!0,this.webglContextLostTimer=null,c.z3("webgl context lost",u,119),this.options.onRenderContextLost&&this.options.onRenderContextLost()}),3e3))},this.onWebglContextRestored=t=>{this.webglContextLostTimer&&(clearTimeout(this.webglContextLostTimer),this.webglContextLostTimer=null)},this.canvas.addEventListener("webglcontextlost",this.onWebglContextLost),this.canvas.addEventListener("webglcontextrestored",this.onWebglContextRestored)}viewport(t,e){this.gl.viewport(0,0,t*this.options.devicePixelRatio,e*this.options.devicePixelRatio),super.viewport(t,e)}useProgram(){var t;this.program.link(this.gl),o()(t=this.program).call(t),this.program.setRotateMatrix(this.getRotateMatrix(this.rotate))}clear(){this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}layout(){let t=this.videoWidth,e=this.videoHeight,r=this.canvasWidth,i=this.canvasHeight,s=this.textureWidth;this.options.sar&&1!==this.options.sar&&(t=Math.floor(this.videoWidth*this.options.sar),s=Math.floor(this.textureWidth*this.options.sar)),90!==this.rotate&&270!==this.rotate||(r=this.canvasHeight,i=this.canvasWidth);const a=t/r,n=e/i;let o;o=a>1?!(a<n):a>n,1===this.renderMode&&(o=!o);let c=0;if(s!==t&&(c=(s-t)/s),o){const s=(i-e*r/t)/i;this.vertex=[-1,1-s,0,0,0,0,0,-1,-1+s,0,0,1,0,0,1,1-s,0,1-c,0,0,0,1,-1+s,0,1-c,1,0,0]}else{const s=(r-t*i/e)/r;this.vertex=[-1+s,1,0,0,0,0,0,-1+s,-1,0,0,1,0,0,1-s,1,0,1-c,0,0,0,1-s,-1,0,1-c,1,0,0]}(0,h.A)(this.vertex,this.flipHorizontal,this.flipVertical),this.gl&&this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array(this.vertex),this.gl.STATIC_DRAW)}setRotate(t,e=!0){(t%=360)!==this.rotate&&(this.rotate=t,this.gl&&this.program.setRotateMatrix(this.getRotateMatrix(this.rotate)),this.layout(),e&&this.clear())}destroy(){this.vbo&&(this.gl.deleteBuffer(this.vbo),this.vbo=null),this.program&&this.program.stop(),this.gl=null,this.vertex=null,this.onWebglContextLost&&(this.canvas.removeEventListener("webglcontextlost",this.onWebglContextLost),this.onWebglContextLost=null),this.onWebglContextRestored&&(this.canvas.removeEventListener("webglcontextrestored",this.onWebglContextRestored),this.onWebglContextRestored=null),super.destroy()}}},87623:(t,e,r)=>{"use strict";r.d(e,{A:()=>I});var i=r(49859),s=r(86226),a=r.n(s),n=r(52730),o=r.n(n),c=r(73363),l=r.n(c),h=r(18979),u=r.n(h),d=r(61499),p=r(20088),f=r(74503),m=r(63939),v=r(94300),g=r(54024),y=r(97317),A=r(14686),b=r(6110),x=r(57517),w=r(25669),k=r(56024),T=r(72703),_=r(11473);class I extends g.A{constructor(t,e){super(t,e),(0,i.A)(this,"linesize",void 0),(0,i.A)(this,"hdrMetadata",void 0),(0,i.A)(this,"hdrMetadataBuffer",void 0),this.hdrMetadata=(0,f.A)(p.A),this.hdrMetadata.multiplier=1}generateFragmentSource(t,e){var r;e.outputRGB=!0;const i=(0,w.A)(this.srcColorSpace,this.dstColorSpace,e),s=["y","u","v","a"],n=["r","g","b","a"],c=[],h=[],u=[];a()(r=t.comp).call(r,((t,e)=>{c[e]=t.depth+7>>>3,h[e]=t.shift,u[e]=(1<<t.depth)-1}));let d=`textureLoad(${s[t.comp[0].plane]}Texture,\n      vec2<i32>(coord.xy * vec2<f32>(\n        ${this[`${s[t.comp[0].plane]}Texture`].width}.0,\n        ${this[`${s[t.comp[0].plane]}Texture`].height}.0\n      )), 0).${n[t.comp[0].offset/c[0]]}`,p=t.comp[1]?`textureLoad(${s[t.comp[1].plane]}Texture,\n          vec2<i32>(coord.xy * vec2<f32>(\n            ${this[`${s[t.comp[1].plane]}Texture`].width}.0,\n            ${this[`${s[t.comp[1].plane]}Texture`].height}.0\n          )), 0).${n[t.comp[1].offset/c[1]]}`:32&o()(t)?"0.0":"0.5",f=t.comp[2]?`textureLoad(${s[t.comp[2].plane]}Texture,\n          vec2<i32>(coord.xy * vec2<f32>(\n            ${this[`${s[t.comp[2].plane]}Texture`].width}.0,\n            ${this[`${s[t.comp[2].plane]}Texture`].height}.0\n          )), 0).${n[t.comp[2].offset/c[2]]}`:32&o()(t)?"0.0":"0.5",m="1.0";function v(t){return/^textureLoad/.test(t)}128&o()(t)&&(m=`textureLoad(${s[t.comp[t.comp.length-1].plane]}Texture,\n        vec2<i32>(coord.xy * vec2<f32>(\n          ${this[`${s[t.comp[t.comp.length-1].plane]}Texture`].width}.0,\n          ${this[`${s[t.comp[t.comp.length-1].plane]}Texture`].height}.0\n        )), 0).${n[t.comp[t.comp.length-1].offset/c[t.comp.length-1]]}`,2===t.comp.length&&(p=32&o()(t)?"0.0":"0.5")),this.fragmentSource=`\n      struct HdrMetadata {\n        offset: f32,\n        multiplier: f32,\n        pqTonemapA: f32,\n        pqTonemapB: f32,\n        hlgOOTFGammaMinusOne: f32,\n        nitsToSdrRelativeFactor: f32,\n        sdrRelativeToNitsFactor: f32\n      };\n      @group(0) @binding(1) var<uniform> hdrMetadata: HdrMetadata;\n      @group(0) @binding(2) var yTexture: texture_2d<u32>;\n      ${this.uTexture?"@group(0) @binding(3) var uTexture: texture_2d<u32>;":""}\n      ${this.vTexture?"@group(0) @binding(4) var vTexture: texture_2d<u32>;":""}\n      ${this.aTexture?"@group(0) @binding(5) var aTexture: texture_2d<u32>;":""}\n      ${1&o()(t)?"\n        fn swap(x: u32) -> u32 {\n          var low = x & 0xff;\n          var high = (x >> 8) & 0xff;\n          return (low << 8) | high;\n        }\n      ":""}\n      @fragment\n      fn main(@location(0) coord: vec4<f32>) -> @location(0) vec4<f32> {\n        let offset = hdrMetadata.offset;\n        let multiplier = hdrMetadata.multiplier;\n        let pq_tonemap_a = hdrMetadata.pqTonemapA;\n        let pq_tonemap_b = hdrMetadata.pqTonemapB;\n        let hlg_ootf_gamma_minus_one = hdrMetadata.hlgOOTFGammaMinusOne;\n        let nits_to_sdr_relative_factor = hdrMetadata.nitsToSdrRelativeFactor;\n        let sdr_relative_to_nits_factor = hdrMetadata.sdrRelativeToNitsFactor;\n        let y = ${v(d)?`f32(${1&o()(t)?`swap(${d})`:d} >> ${h[0]}) / f32(${u[0]})`:d};\n        let u = ${v(p)?`f32(${1&o()(t)?`swap(${p})`:p} >> ${h[1]}) / f32(${u[1]})`:p};\n        let v = ${v(f)?`f32(${1&o()(t)?`swap(${f})`:f} >> ${h[2]}) / f32(${u[2]})`:f};\n        let a = ${v(m)?`f32(${1&o()(t)?`swap(${m})`:m} >> ${h[t.comp.length-1]}) / f32(${u[t.comp.length-1]})`:m};\n        var color = vec4(y, u, v, a);\n        if (color.a > 0) {\n          color.r /= color.a;\n          color.g /= color.a;\n          color.b /= color.a;\n        }\n        color.r -= offset;\n        color.g -= offset;\n        color.b -= offset;\n        color.r *= multiplier;\n        color.g *= multiplier;\n        color.b *= multiplier;\n        ${l()(i).call(i,((t,e)=>t+e),"")}\n        color.r *= color.a;\n        color.g *= color.a;\n        color.b *= color.a;\n        return color;\n      }\n    `}async init(){await super.init(),this.hdrMetadataBuffer=this.device.createBuffer({size:32,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST})}generateBindGroup(){if(!this.yTexture)return;const t=[{binding:0,visibility:GPUShaderStage.VERTEX,buffer:{type:"uniform"}},{binding:1,visibility:GPUShaderStage.FRAGMENT,buffer:{type:"uniform"}},{binding:2,visibility:GPUShaderStage.FRAGMENT,texture:{sampleType:"uint"}}];this.uTexture&&t.push({binding:3,visibility:GPUShaderStage.FRAGMENT,texture:{sampleType:"uint"}}),this.vTexture&&t.push({binding:4,visibility:GPUShaderStage.FRAGMENT,texture:{sampleType:"uint"}}),this.aTexture&&t.push({binding:5,visibility:GPUShaderStage.FRAGMENT,texture:{sampleType:"uint"}}),this.bindGroupLayout=this.device.createBindGroupLayout({entries:t});const e=[{binding:0,resource:{buffer:this.rotateMatrixBuffer,size:16*Float32Array.BYTES_PER_ELEMENT}},{binding:1,resource:{buffer:this.hdrMetadataBuffer,size:this.hdrMetadataBuffer.size}},{binding:2,resource:this.yTexture.createView()}];this.uTexture&&e.push({binding:3,resource:this.uTexture.createView()}),this.vTexture&&e.push({binding:4,resource:this.vTexture.createView()}),this.aTexture&&e.push({binding:5,resource:this.aTexture.createView()}),this.bindGroup=this.device.createBindGroup({layout:this.bindGroupLayout,entries:e})}checkFrame(t){if(m.f[15](t+32)!==this.linesize||m.f[15](t+72)!==this.videoHeight||m.f[15](t+68)!==this.videoWidth||m.f[15](t+80)!==this.format){var e;const r=(0,y.I)(m.f[15](t+80));if(this.yTexture&&(this.yTexture.destroy(),this.yTexture=null),this.uTexture&&(this.uTexture.destroy(),this.uTexture=null),this.vTexture&&(this.vTexture.destroy(),this.vTexture=null),this.aTexture&&(this.aTexture.destroy(),this.aTexture=null),16&o()(r)){let e=0;if(this.yTexture=this.device.createTexture({size:[m.f[15](t+32+4*e++)>>>1,m.f[15](t+72)],usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_DST,format:"r16uint"}),r.comp.length>2){const i=r.comp[1].plane===r.comp[2].plane;this.uTexture=this.device.createTexture({size:[m.f[15](t+32+4*e++)>>>(i?2:1),m.f[15](t+72)>>>r.log2ChromaH],usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_DST,format:i?"rg16uint":"r16uint"}),i||(this.vTexture=this.device.createTexture({size:[m.f[15](t+32+4*e++)>>>1,m.f[15](t+72)>>>r.log2ChromaH],usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_DST,format:"r16uint"}))}128&o()(r)&&(this.aTexture=this.device.createTexture({size:[m.f[15](t+32+4*e++)>>>1,m.f[15](t+72)],usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_DST,format:"r16uint"})),this.textureWidth=m.f[15](t+32)>>>1}else{const e=r.comp[0].depth+7>>>3;let i=r.comp[0].step/e;const s=["","r16uint","rg16uint","","rgba16uint"];this.yTexture=this.device.createTexture({size:[m.f[15](t+32)/i>>>1,m.f[15](t+72)],usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_DST,format:s[i]}),this.textureWidth=m.f[15](t+32)/i>>>1}this.linesize=m.f[15](t+32),this.srcColorSpace=new b.A(m.f[15](t+220),m.f[15](t+212),m.f[15](t+216),m.f[15](t+208)),this.videoWidth=m.f[15](t+68),this.videoHeight=m.f[15](t+72),this.format=m.f[15](t+80);const i={type:1,bitDepth:r.comp[0].depth,toneMapPQAndHlgToDst:!0,metadata:this.hdrMetadata,dstSdrMaxLuminanceNits:x.kH,dstMaxLuminanceRelative:1},s=(0,k.aH)(t,14);if(s){const t=m.f[20](s+4);m.f[8](t)>0&&(i.maxContentLightLevel=m.f[8](t))}this.generateFragmentSource(r,i),this.layout(),this.generatePipeline(),this.generateRenderBundleEncoder();const a=u()(e=(0,A.s3)(this.hdrMetadata[d.o9],28)).call(e);this.device.queue.writeBuffer(this.hdrMetadataBuffer,0,a.buffer,a.byteOffset,a.byteLength)}}render(t){if(this.lost)return;let e=(0,y.I)(m.f[15](t+80));if(!e)return;this.checkFrame(t);const r=this.device.createCommandEncoder();let i=0;this.device.queue.writeTexture({texture:this.yTexture},(0,_.Lv)(),{offset:m.f[20](t+4*i),bytesPerRow:m.f[15](t+32+4*i++),rowsPerImage:this.yTexture.height},{width:this.yTexture.width,height:this.yTexture.height,depthOrArrayLayers:1}),16&o()(e)&&(this.uTexture&&this.device.queue.writeTexture({texture:this.uTexture},(0,_.Lv)(),{offset:m.f[20](t+4*i),bytesPerRow:m.f[15](t+32+4*i++),rowsPerImage:this.uTexture.height},{width:this.uTexture.width,height:this.uTexture.height,depthOrArrayLayers:1}),this.vTexture&&this.device.queue.writeTexture({texture:this.vTexture},(0,_.Lv)(),{offset:m.f[20](t+4*i),bytesPerRow:m.f[15](t+32+4*i++),rowsPerImage:this.vTexture.height},{width:this.vTexture.width,height:this.vTexture.height,depthOrArrayLayers:1}),this.aTexture&&this.device.queue.writeTexture({texture:this.aTexture},(0,_.Lv)(),{offset:m.f[20](t+4*i),bytesPerRow:m.f[15](t+32+4*i++),rowsPerImage:this.aTexture.height},{width:this.aTexture.width,height:this.aTexture.height,depthOrArrayLayers:1}));const s=r.beginRenderPass({colorAttachments:[{view:this.context.getCurrentTexture().createView(),clearValue:{r:0,g:0,b:0,a:0},loadOp:"clear",storeOp:"store"}]});s.executeBundles([this.renderBundle]),s.end(),this.device.queue.submit([r.finish()])}destroy(){this.hdrMetadata&&((0,v.A)(this.hdrMetadata),this.hdrMetadata=null),this.hdrMetadataBuffer&&(this.hdrMetadataBuffer.destroy(),this.hdrMetadataBuffer=null),super.destroy()}static isSupport(t){if((0,T.A)(t)){const e=(0,y.I)(m.f[15](t+80));if(e){const t=e.comp[0].depth+7>>>3;if(2!==t)return!1;let r=e.comp[0].step/t;return!!(16&o()(e)||3!==r)}}return!1}}},38222:(t,e,r)=>{"use strict";r.d(e,{A:()=>m});var i=r(49859),s=r(52730),a=r.n(s),n=r(73363),o=r.n(n),c=r(63939),l=r(54024),h=r(97317),u=r(6110),d=r(25669),p=r(72703),f=r(11473);class m extends l.A{constructor(t,e){super(t,e),(0,i.A)(this,"linesize",void 0)}async init(){await super.init()}generateFragmentSource(t){const e=(0,d.A)(this.srcColorSpace,this.dstColorSpace,{bitDepth:8,type:1,outputRGB:!0}),r=["y","u","v","a"],i=["r","g","b","a"];let s=`textureSample(${r[t.comp[0].plane]}Texture, s, in_texcoord.xy).${i[t.comp[0].offset]}`,n=t.comp[1]?`textureSample(${r[t.comp[1].plane]}Texture, s, in_texcoord.xy).${i[t.comp[1].offset]}`:32&a()(t)?"0.0":"0.5",c=t.comp[2]?`textureSample(${r[t.comp[2].plane]}Texture, s, in_texcoord.xy).${i[t.comp[2].offset]}`:32&a()(t)?"0.0":"0.5",l="1.0";128&a()(t)&&(l=`textureSample(${r[t.comp[t.comp.length-1].plane]}Texture, s, in_texcoord.xy).${i[t.comp[t.comp.length-1].offset]}`,2===t.comp.length&&(n=32&a()(t)?"0.0":"0.5")),this.fragmentSource=`\n      @group(0) @binding(1) var s: sampler;\n      @group(0) @binding(2) var yTexture: texture_2d<f32>;\n      ${this.uTexture?"@group(0) @binding(3) var uTexture: texture_2d<f32>;":""}\n      ${this.vTexture?"@group(0) @binding(4) var vTexture: texture_2d<f32>;":""}\n      ${this.aTexture?"@group(0) @binding(5) var aTexture: texture_2d<f32>;":""}\n      \n      @fragment\n      fn main(@location(0) in_texcoord: vec4<f32>) -> @location(0) vec4<f32> {\n        let y = ${s};\n        let u = ${n};\n        let v = ${c};\n        let alpha = ${l};\n        var color = vec4(y, u, v, alpha);\n        ${o()(e).call(e,((t,e)=>t+e),"")}\n        return color;\n      }\n    `}checkFrame(t){if(c.f[15](t+32)!==this.linesize||c.f[15](t+72)!==this.videoHeight||c.f[15](t+68)!==this.videoWidth){const e=(0,h.I)(c.f[15](t+80));if(this.yTexture&&(this.yTexture.destroy(),this.yTexture=null),this.uTexture&&(this.uTexture.destroy(),this.uTexture=null),this.vTexture&&(this.vTexture.destroy(),this.vTexture=null),this.aTexture&&(this.aTexture.destroy(),this.aTexture=null),16&a()(e)){let r=0;if(this.yTexture=this.device.createTexture({size:[c.f[15](t+32+4*r++),c.f[15](t+72)],usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.RENDER_ATTACHMENT,format:"r8unorm"}),e.comp.length>2){const i=e.comp[1].plane===e.comp[2].plane;this.uTexture=this.device.createTexture({size:[c.f[15](t+32+4*r++)>>>(i?1:0),c.f[15](t+72)>>>e.log2ChromaH],usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.RENDER_ATTACHMENT,format:i?"rg8unorm":"r8unorm"}),i||(this.vTexture=this.device.createTexture({size:[c.f[15](t+32+4*r++),c.f[15](t+72)>>>e.log2ChromaH],usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.RENDER_ATTACHMENT,format:"r8unorm"}))}128&a()(e)&&(this.aTexture=this.device.createTexture({size:[c.f[15](t+32+4*r++),c.f[15](t+72)],usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.RENDER_ATTACHMENT,format:"r8unorm"})),this.textureWidth=c.f[15](t+32)}else{const r=e.comp[0].depth+7>>>3;let i=e.comp[0].step/r;const s=["","r8unorm","rg8unorm","","rgba8unorm"];this.yTexture=this.device.createTexture({size:[c.f[15](t+32)/i,c.f[15](t+72)],usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.RENDER_ATTACHMENT,format:s[i]}),this.textureWidth=c.f[15](t+32)/i}this.linesize=c.f[15](t+32),this.srcColorSpace=new u.A(c.f[15](t+220),c.f[15](t+212),c.f[15](t+216),c.f[15](t+208)),this.generateFragmentSource(e),this.videoWidth=c.f[15](t+68),this.videoHeight=c.f[15](t+72),this.format=c.f[15](t+80),this.layout(),this.generatePipeline(),this.generateRenderBundleEncoder()}}render(t){if(this.lost)return;let e=(0,h.I)(c.f[15](t+80));if(!e)return;this.checkFrame(t);let r=0;this.device.queue.writeTexture({texture:this.yTexture},(0,f.Lv)(),{offset:c.f[20](t+4*r),bytesPerRow:c.f[15](t+32+4*r++),rowsPerImage:this.yTexture.height},{width:this.yTexture.width,height:this.yTexture.height,depthOrArrayLayers:1}),16&a()(e)&&(this.device.queue.writeTexture({texture:this.uTexture},(0,f.Lv)(),{offset:c.f[20](t+4*r),bytesPerRow:c.f[15](t+32+4*r++),rowsPerImage:this.uTexture.height},{width:this.uTexture.width,height:this.uTexture.height,depthOrArrayLayers:1}),this.vTexture&&this.device.queue.writeTexture({texture:this.vTexture},(0,f.Lv)(),{offset:c.f[20](t+4*r),bytesPerRow:c.f[15](t+32+4*r++),rowsPerImage:this.vTexture.height},{width:this.vTexture.width,height:this.vTexture.height,depthOrArrayLayers:1}),this.aTexture&&this.device.queue.writeTexture({texture:this.aTexture},(0,f.Lv)(),{offset:c.f[20](t+4*r),bytesPerRow:c.f[15](t+32+4*r),rowsPerImage:this.aTexture.height},{width:this.aTexture.width,height:this.aTexture.height,depthOrArrayLayers:1}));const i=this.device.createCommandEncoder(),s=i.beginRenderPass({colorAttachments:[{view:this.context.getCurrentTexture().createView(),clearValue:{r:0,g:0,b:0,a:0},loadOp:"clear",storeOp:"store"}]});s.executeBundles([this.renderBundle]),s.end(),this.device.queue.submit([i.finish()])}static isSupport(t){if((0,p.A)(t)){const e=(0,h.I)(c.f[15](t+80));if(e){const t=e.comp[0].depth+7>>>3;if(1!==t)return!1;let r=e.comp[0].step/t;return!!(16&a()(e)||3!==r)}}return!1}}},54024:(t,e,r)=>{"use strict";r.d(e,{A:()=>n});var i=r(49859),s=r(54895),a=r(15045);class n extends a.A{constructor(t,e){super(t,e),(0,i.A)(this,"yTexture",void 0),(0,i.A)(this,"uTexture",void 0),(0,i.A)(this,"vTexture",void 0),(0,i.A)(this,"aTexture",void 0),this.vertexSource=s.A}generateBindGroup(){if(!this.yTexture)return;const t=[{binding:0,visibility:GPUShaderStage.VERTEX,buffer:{type:"uniform"}},{binding:1,visibility:GPUShaderStage.FRAGMENT,sampler:{type:"filtering"}},{binding:2,visibility:GPUShaderStage.FRAGMENT,texture:{sampleType:"float"}}];this.uTexture&&t.push({binding:3,visibility:GPUShaderStage.FRAGMENT,texture:{sampleType:"float"}}),this.vTexture&&t.push({binding:4,visibility:GPUShaderStage.FRAGMENT,texture:{sampleType:"float"}}),this.aTexture&&t.push({binding:5,visibility:GPUShaderStage.FRAGMENT,texture:{sampleType:"float"}}),this.bindGroupLayout=this.device.createBindGroupLayout({entries:t});const e=[{binding:0,resource:{buffer:this.rotateMatrixBuffer,size:16*Float32Array.BYTES_PER_ELEMENT}},{binding:1,resource:this.sampler},{binding:2,resource:this.yTexture.createView()}];this.uTexture&&e.push({binding:3,resource:this.uTexture.createView()}),this.vTexture&&e.push({binding:4,resource:this.vTexture.createView()}),this.aTexture&&e.push({binding:5,resource:this.aTexture.createView()}),this.bindGroup=this.device.createBindGroup({layout:this.bindGroupLayout,entries:e})}destroy(){this.yTexture&&this.yTexture.destroy(),this.uTexture&&this.uTexture.destroy(),this.vTexture&&this.vTexture.destroy(),this.aTexture&&this.aTexture.destroy(),super.destroy()}}},54750:(t,e,r)=>{"use strict";r.d(e,{A:()=>u});var i=r(49859),s=r(2457),a=r.n(s),n=r(31721),o=r.n(n),c=r(54895),l=r(15045);const h=["bt2020","bt2100","st2048","p3-dcl","hlg"];class u extends l.A{constructor(t,e){super(t,e),(0,i.A)(this,"hasAlpha",void 0),this.vertexSource=c.A}generateFragmentSource(){this.fragmentSource=`\n      @group(0) @binding(1) var eTexture: texture_external;\n      @group(0) @binding(2) var s: sampler;\n      ${this.hasAlpha?"@group(0) @binding(3) var aTexture: texture_external;":""}\n\n      @fragment\n      fn main(@location(0) in_texcoord: vec4<f32>) -> @location(0) vec4<f32> {\n        let rgb: vec4<f32> = textureSampleBaseClampToEdge(eTexture, s, in_texcoord.xy);\n        let alpha: f32 = ${this.hasAlpha?"textureSampleBaseClampToEdge(aTexture, s, in_texcoord.xy).r":"rgb.a"};\n        return vec4<f32>(rgb.rgb, alpha);\n      }\n    `}checkFrame(t,e){const r=!!e;t.codedWidth===this.textureWidth&&t.codedHeight===this.videoHeight&&t.codedWidth===this.videoWidth&&this.hasAlpha===r||(this.videoWidth=t.codedWidth,this.videoHeight=t.codedHeight,this.textureWidth=t.codedWidth,this.hasAlpha=r,this.layout(),this.generateFragmentSource(),this.generatePipeline())}generateBindGroup(){const t={entries:[{binding:0,visibility:GPUShaderStage.VERTEX,buffer:{type:"uniform"}},{binding:1,visibility:GPUShaderStage.FRAGMENT,externalTexture:{}},{binding:2,visibility:GPUShaderStage.FRAGMENT,sampler:{type:"filtering"}}]};this.hasAlpha&&a()(t).push({binding:3,visibility:GPUShaderStage.FRAGMENT,externalTexture:{}}),this.bindGroupLayout=this.device.createBindGroupLayout(t)}render(t,e){if(this.lost)return;this.checkFrame(t,e);const r={layout:this.renderPipeline.getBindGroupLayout(0),entries:[{binding:0,resource:{buffer:this.rotateMatrixBuffer,size:16*Float32Array.BYTES_PER_ELEMENT}},{binding:1,resource:this.device.importExternalTexture({source:t})},{binding:2,resource:this.sampler}]};e&&a()(r).push({binding:3,resource:this.device.importExternalTexture({source:e})});const i=this.device.createBindGroup(r),s=this.device.createCommandEncoder(),n={colorAttachments:[{view:this.context.getCurrentTexture().createView(),clearValue:{r:0,g:0,b:0,a:0},loadOp:"clear",storeOp:"store"}]},o=s.beginRenderPass(n);o.setPipeline(this.renderPipeline),o.setBindGroup(0,i),o.setVertexBuffer(0,this.vbo),o.draw(4,4,0,0),o.end(),this.device.queue.submit([s.finish()])}static isSupport(t){return t instanceof VideoFrame&&!o()(h).call(h,(e=>e===t.colorSpace.primaries))}}},15045:(t,e,r)=>{"use strict";r.d(e,{A:()=>l});var i=r(49859),s=r(4624),a=r(43356),n=r(72739),o=r(38469);const c="src/avrender/image/WebGPURender.ts";class l extends a.A{constructor(t,e){super(t,e),(0,i.A)(this,"adapter",void 0),(0,i.A)(this,"device",void 0),(0,i.A)(this,"context",void 0),(0,i.A)(this,"vsModule",void 0),(0,i.A)(this,"fsModule",void 0),(0,i.A)(this,"rotateMatrixBuffer",void 0),(0,i.A)(this,"renderPipeline",void 0),(0,i.A)(this,"rotateMatrix",void 0),(0,i.A)(this,"vbo",void 0),(0,i.A)(this,"sampler",void 0),(0,i.A)(this,"vertex",void 0),(0,i.A)(this,"fragmentSource",void 0),(0,i.A)(this,"vertexSource",void 0),(0,i.A)(this,"renderBundleEncoder",void 0),(0,i.A)(this,"renderBundle",void 0),(0,i.A)(this,"bindGroupLayout",void 0),(0,i.A)(this,"bindGroup",void 0),(0,i.A)(this,"pipelineLayout",void 0)}async init(t){var e;this.adapter=await navigator.gpu.requestAdapter({powerPreference:null!==(e=this.options.powerPreference)&&void 0!==e?e:"high-performance"}),this.adapter||s.h2("not support webgpu render",c,87);const r=[];n.__(t,(t=>{this.adapter.features.has(t)&&r.push(t)})),this.device=await this.adapter.requestDevice({requiredFeatures:r.length?r:void 0}),this.device.lost.then((()=>{var t;this.destroyed||(this.lost=!0,s.z3("gpu device lost",c,106),null!==(t=this.options)&&void 0!==t&&t.onRenderContextLost&&this.options.onRenderContextLost())})),this.context=this.canvas.getContext("webgpu"),this.context||s.h2("can not support webgpu, got GPUCanvasContext failed",c,115),this.context.configure({device:this.device,format:navigator.gpu.getPreferredCanvasFormat(),alphaMode:"premultiplied"}),this.sampler=this.device.createSampler({magFilter:"linear",minFilter:"linear"}),this.vbo=this.device.createBuffer({size:28*Float32Array.BYTES_PER_ELEMENT,usage:GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_DST}),this.rotateMatrixBuffer=this.device.createBuffer({size:16*Float32Array.BYTES_PER_ELEMENT,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST}),this.setRotateMatrix(this.getRotateMatrix(0))}generatePipeline(){this.generateBindGroup(),this.pipelineLayout=this.device.createPipelineLayout({bindGroupLayouts:[this.bindGroupLayout]}),this.vsModule=this.device.createShaderModule({code:this.vertexSource}),this.fsModule=this.device.createShaderModule({code:this.fragmentSource}),this.renderPipeline=this.device.createRenderPipeline({layout:this.pipelineLayout,vertex:{module:this.vsModule,entryPoint:"main",buffers:[{arrayStride:28,attributes:[{shaderLocation:0,offset:0,format:"float32x3"},{shaderLocation:1,offset:12,format:"float32x4"}]}]},fragment:{module:this.fsModule,entryPoint:"main",targets:[{format:navigator.gpu.getPreferredCanvasFormat()}]},primitive:{topology:"triangle-strip"}})}generateRenderBundleEncoder(){this.renderPipeline&&(this.renderBundleEncoder=this.device.createRenderBundleEncoder({colorFormats:[navigator.gpu.getPreferredCanvasFormat()]}),this.renderBundleEncoder.setPipeline(this.renderPipeline),this.renderBundleEncoder.setBindGroup(0,this.bindGroup),this.renderBundleEncoder.setVertexBuffer(0,this.vbo),this.renderBundleEncoder.draw(4,4,0,0),this.renderBundle=this.renderBundleEncoder.finish())}setRotateMatrix(t){this.rotateMatrix=t;const e=new Float32Array(this.rotateMatrix);this.device.queue.writeBuffer(this.rotateMatrixBuffer,0,e.buffer,e.byteOffset,e.byteLength)}setVertices(){const t=new Float32Array(this.vertex);this.device.queue.writeBuffer(this.vbo,0,t.buffer,t.byteOffset,t.byteLength)}clear(){this.context.getCurrentTexture().destroy()}layout(){let t=this.videoWidth,e=this.videoHeight,r=this.canvasWidth,i=this.canvasHeight,s=this.textureWidth;this.options.sar&&1!==this.options.sar&&(t=Math.floor(this.videoWidth*this.options.sar),s=Math.floor(this.textureWidth*this.options.sar)),90!==this.rotate&&270!==this.rotate||(r=this.canvasHeight,i=this.canvasWidth);const a=t/r,n=e/i;let c;c=a>1?!(a<n):a>n,1===this.renderMode&&(c=!c);let l=0;if(s!==t&&(l=(s-t)/s),c){const s=(i-e*r/t)/i;this.vertex=[-1,1-s,0,0,0,0,0,-1,-1+s,0,0,1,0,0,1,1-s,0,1-l,0,0,0,1,-1+s,0,1-l,1,0,0]}else{const s=(r-t*i/e)/r;this.vertex=[-1+s,1,0,0,0,0,0,-1+s,-1,0,0,1,0,0,1-s,1,0,1-l,0,0,0,1-s,-1,0,1-l,1,0,0]}(0,o.A)(this.vertex,this.flipHorizontal,this.flipVertical),this.setVertices()}viewport(t,e){super.viewport(t,e)}setRotate(t,e=!0){(t%=360)!==this.rotate&&(this.rotate=t,this.setRotateMatrix(this.getRotateMatrix(t)),this.layout(),e&&this.clear())}destroy(){this.sampler=null,this.vbo&&this.vbo.destroy(),this.rotateMatrixBuffer&&this.rotateMatrixBuffer.destroy(),this.bindGroupLayout=null,this.bindGroup=null,this.pipelineLayout=null,this.renderBundle=null,this.renderBundleEncoder=null,this.fsModule=null,this.vsModule=null,this.renderPipeline=null,this.rotateMatrix=null,this.vertex=null,this.context=null,this.options=null,this.destroyed=!0,this.device&&(this.device.destroy(),this.device=null),this.adapter&&(this.adapter=null),super.destroy()}}},63849:(t,e,r)=>{"use strict";r.d(e,{A:()=>c});var i=r(49859),s=r(72703),a=r(43356),n=r(86932),o=r(89188);class c extends a.A{constructor(t){super({width:0,height:0},{devicePixelRatio:1,renderMode:0}),(0,i.A)(this,"writableStream",void 0),(0,i.A)(this,"writer",void 0),this.writableStream=t}async init(){this.writer=this.writableStream.getWriter()}clear(){}render(t){t=t instanceof VideoFrame?new VideoFrame(t,{timestamp:1e3*(0,n.A)(),rotation:(this.rotate+(this.flipVertical?180:0))%360,flip:(this.flipHorizontal||this.flipVertical)&&!(this.flipHorizontal&&this.flipVertical)}):(0,o.pt)(t,BigInt(1e3*(0,n.A)()),{rotation:(this.rotate+(this.flipVertical?180:0))%360,flip:(this.flipHorizontal||this.flipVertical)&&!(this.flipHorizontal&&this.flipVertical)}),this.writer.write(t)}layout(){}setRotate(t,e=!0){(t%=360)!==this.rotate&&(this.rotate=t,e&&this.clear())}static isSupport(t){return t instanceof VideoFrame||(0,s.A)(t)}}},6110:(t,e,r)=>{"use strict";r.d(e,{A:()=>c});var i=r(49859),s=r(12535),a=r(1064),n=r(86141),o=r(91131);class c{constructor(t,e,r,s){(0,i.A)(this,"matrixId",void 0),(0,i.A)(this,"primaryId",void 0),(0,i.A)(this,"transferId",void 0),(0,i.A)(this,"rangeId",void 0),this.matrixId=t,this.primaryId=e,this.transferId=r,this.rangeId=s}getMatrixId(){return this.matrixId}getPrimaryId(){return this.primaryId}getTransferId(){return this.transferId}getRangeId(){return this.rangeId}isWide(){return 9===this.primaryId||11===this.primaryId||12===this.primaryId}isHDR(){return 18===this.transferId||16===this.transferId}isToneMappedByDefault(){return 18===this.transferId||16===this.transferId}isAffectedBySDRWhiteLevel(){return 18===this.transferId||16===this.transferId}fullRangeEncodedValues(){return 12===this.transferId||11===this.transferId}getTransformMatrix(t){const e=(1<<t-1)/((1<<t)-1);let r=0,i=0;switch(this.matrixId){case 0:return new s.A;case 1:case 2:r=.2126,i=.0722;break;case 4:r=.3,i=.11;break;case 5:case 6:r=.299,i=.114;break;case 7:r=.212,i=.087;break;case 8:return s.A.RowMajor([.25,.5,.25,0,-.25,.5,-.25,e,.5,0,-.5,e,0,0,0,1]);case 10:return r=.2627,i=.0593,s.A.RowMajor([1,0,0,0,r,1-r-i,i,0,0,0,1,0,0,0,0,1]);case 9:r=.2627,i=.0593;break;case 11:return s.A.RowMajor([0,1,0,0,0,-.5,.493283,.5,.5,-.495951,0,.5,0,0,0,1])}let a=1-r-i,n=.5/(1-i),o=.5/(1-r);return s.A.RowMajor([r,a,i,0,n*-r,n*-a,n*(1-i),.5,o*(1-r),o*-a,o*-i,.5,0,0,0,1])}getRangeAdjustMatrix(t){if(2===this.rangeId)return new s.A;const e=t-8,r=(1<<t)-1,i=r/(219<<e);switch(this.matrixId){case 0:case 8:return(new s.A).setScale(new a.P([i,i,i])).postTranslate(new a.P([-16/219,-16/219,-16/219]));case 1:case 4:case 5:case 6:case 7:case 9:case 10:case 11:case 2:{const t=224<<e,n=r/t,o=(t-r)/(2*t);return(new s.A).setScale(new a.P([i,n,n])).postTranslate(new a.P([-16/219,o,o]))}}return new s.A}getTransferFunction_(){switch(this.transferId){case 8:return n.Hi;case 4:return n.$_;case 5:return n.J7;case 7:return n.q;case 1:case 6:case 14:case 15:return n.aP;case 17:return n.Cr;case 18:case 12:case 9:case 10:case 16:case 2:return null}}getTransferFunction(t){return this.transferId,this.getTransferFunction_()}getInverseTransferFunction(t){const e=this.getTransferFunction(t);if(e){const t={a:0,b:0,c:0,d:0,e:0,f:0,g:0};if(e.a>0&&e.g>0){const r=Math.pow(e.a,e.g);t.a=1/r,t.b=-e.e/r,t.g=1/e.g}return t.d=e.c*e.d+e.f,t.e=-e.b/e.a,0!=e.c&&(t.c=1/e.c,t.f=-e.f/e.c),t}}hasExtendedSkTransferFn(){return 0===this.matrixId}isValid(){return 2!==this.matrixId&&2!==this.primaryId&&2!==this.transferId&&0!==this.rangeId}getColorSpacePrimaries(){const t=o.WO;switch(this.primaryId){case 1:return o.P5;case 4:return o.Wc;case 5:return o.cA;case 7:return o.vi;case 8:return o.cp;case 9:return o.Je;case 10:return o.lf;case 11:return o.Rk;case 12:return o.tR}return t}getPrimaryMatrix(){const t=this.getColorSpacePrimaries(),e=o._O(t);return s.A.RowMajor([e.rc(0,0),e.rc(0,1),e.rc(0,2),0,e.rc(1,0),e.rc(1,1),e.rc(1,2),0,e.rc(2,0),e.rc(2,1),e.rc(2,2),0,0,0,0,1])}}},91131:(t,e,r)=>{"use strict";r.d(e,{Je:()=>d,P5:()=>o,Rk:()=>f,WO:()=>v,Wc:()=>c,_O:()=>g,cA:()=>l,cp:()=>u,lf:()=>p,tR:()=>m,vi:()=>h});var i=r(45726),s=r(1064),a=r(66551),n=r(60153);const o=[.64,.33,.3,.6,.15,.06,.3127,.329],c=[.67,.33,.21,.71,.14,.08,.31,.316],l=[.64,.33,.29,.6,.15,.06,.3127,.329],h=[.63,.34,.31,.595,.155,.07,.3127,.329],u=[.681,.319,.243,.692,.145,.049,.31,.316],d=[.708,.292,.17,.797,.131,.046,.3127,.329],p=[1,0,0,1,0,0,.3333333333333333,.3333333333333333],f=[.68,.32,.265,.69,.15,.06,.314,.351],m=[.68,.32,.265,.69,.15,.06,.3127,.329],v=[0,0,0,0,0,0,0,0];function g(t){const e=i.A.RowMajor([t[0],t[2],t[4],t[1],t[3],t[5],1-t[0]-t[1],1-t[2]-t[3],1-t[4]-t[5]]),r=e.copy().invert(),o=new s.P([t[6]/t[7],1,(1-t[6]-t[7])/t[7]]),c=(0,n.Y3)(r,o);let l=new i.A([c.x,0,0,0,c.y,0,0,0,c.z]);l=(0,a.B)(e,l);const h=function(t,e){const r=new s.P([t/e,1,(1-t-e)/e]),o=new s.P([.96422,1,.82521]),c=i.A.RowMajor([.8951,.2664,-.1614,-.7502,1.7135,.0367,.0389,-.0685,1.0296]),l=i.A.RowMajor([.9869929,-.1470543,.1599627,.4323053,.5183603,.0492912,-.0085287,.0400428,.9684867]),h=(0,n.Y3)(c,r),u=(0,n.Y3)(c,o);let d=new i.A([u.x/h.x,0,0,0,u.y/h.y,0,0,0,u.z/h.z]);return d=(0,a.B)(d,c),d=(0,a.B)(l,d),d}(t[6],t[7]);return(0,a.B)(h,l)}},86141:(t,e,r)=>{"use strict";r.d(e,{$_:()=>i,Cr:()=>c,Hi:()=>n,J7:()=>s,aP:()=>o,q:()=>a});const i={g:2.2,a:1,b:0,c:0,d:0,e:0,f:0},s={g:2.8,a:1,b:0,c:0,d:0,e:0,f:0},a={g:2.222222222222,a:.899626676224,b:.100373323776,c:.25,d:.091286342118,e:0,f:0},n={g:1,a:1,b:0,c:0,d:0,e:0,f:0},o={g:2.4,a:.9478672985781991,b:.05213270142180095,c:.07739938080495357,d:.04045,e:0,f:0},c={g:2.6,a:1.034080527699,b:0,c:0,d:0,e:0,f:0}},89401:(t,e,r)=>{"use strict";r.d(e,{A:()=>o,U:()=>n});const i=.2627,s=.678,a=.0593;function n(t){t.metadata.hlgOOTFGammaMinusOne=.2}function o(t){return 0===t.type?`\n      {\n        vec4 luma_vec = vec4(${i}, ${s}, ${a}, 0.0);\n        float L = dot(color, luma_vec);\n        if (L > 0.0) {\n          color.r *= pow(L, hlg_ootf_gamma_minus_one);\n          color.g *= pow(L, hlg_ootf_gamma_minus_one);\n          color.b *= pow(L, hlg_ootf_gamma_minus_one);\n        }\n      }\n    `:1===t.type?`\n      {\n        let luma_vec: vec4<f32> = vec4(${i}, ${s}, ${a}, 0.0);\n        let L: f32 = dot(color, luma_vec);\n        if (L > 0.0) {\n          color.r *= pow(L, hlg_ootf_gamma_minus_one);\n          color.g *= pow(L, hlg_ootf_gamma_minus_one);\n          color.b *= pow(L, hlg_ootf_gamma_minus_one);\n        }\n      }\n    `:""}},7511:(t,e,r)=>{"use strict";function i(t,e){let r="",i="";if(0===e.type?(r="mat4",i="vec4"):1===e.type&&(r="mat4x4",i="vec4"),!r||!i)return"";let s=`\n      color = ${r}(\n        ${t.rc(0,0)}, ${t.rc(1,0)}, ${t.rc(2,0)}, 0,\n        ${t.rc(0,1)}, ${t.rc(1,1)}, ${t.rc(2,1)}, 0,\n        ${t.rc(0,2)}, ${t.rc(1,2)}, ${t.rc(2,2)}, 0,\n        0, 0, 0, 1\n      ) * color;\n    `;return 0===t.rc(0,3)&&0===t.rc(1,3)&&0===t.rc(2,3)||(s+=`\n        color += ${i}(${t.rc(0,3)}, ${t.rc(1,3)}, ${t.rc(2,3)}, 0);\n      `),s}r.d(e,{A:()=>i})},79955:(t,e,r)=>{"use strict";function i(t,e){e.metadata.sdrRelativeToNitsFactor=e.dstSdrMaxLuminanceNits/t}function s(t){return"\n    color.r *= sdr_relative_to_nits_factor;\n    color.g *= sdr_relative_to_nits_factor;\n    color.b *= sdr_relative_to_nits_factor;\n "}r.d(e,{A:()=>s,j:()=>i})},64748:(t,e,r)=>{"use strict";r.d(e,{A:()=>a,n:()=>s});var i=r(57517);function s(t,e,r){let s=r.dstSdrMaxLuminanceNits;e&&(s=i.kH,r.sdrWhiteLevel&&(s=r.sdrWhiteLevel)),r.metadata.nitsToSdrRelativeFactor=t/s}function a(t){return"\n    color.r *= nits_to_sdr_relative_factor;\n    color.g *= nits_to_sdr_relative_factor;\n    color.b *= nits_to_sdr_relative_factor;\n  "}},70194:(t,e,r)=>{"use strict";r.d(e,{A:()=>a,J:()=>s});var i=r(57517);function s(t,e){const r=function(t,e){let r=i.hD;18!==t.getTransferId()&&e.maxContentLightLevel>0&&(r=e.maxContentLightLevel);let s=i.kH;return e.sdrWhiteLevel&&(s=e.sdrWhiteLevel),r/s}(t,e);r>e.dstMaxLuminanceRelative?(e.metadata.pqTonemapA=e.dstMaxLuminanceRelative/(r*r),e.metadata.pqTonemapB=1/e.dstMaxLuminanceRelative):(e.metadata.pqTonemapA=0,e.metadata.pqTonemapB=0)}function a(t){return`\n    {\n      ${1===t.type?"let maximum: f32":"float maximum"} = max(color.r, max(color.g, color.b));\n      if (maximum > 0.0) {\n        color.r *= (1.0 + pq_tonemap_a * maximum) / (1.0 + pq_tonemap_b * maximum);\n        color.g *= (1.0 + pq_tonemap_a * maximum) / (1.0 + pq_tonemap_b * maximum);\n        color.b *= (1.0 + pq_tonemap_a * maximum) / (1.0 + pq_tonemap_b * maximum);\n      }\n    }\n `}},15380:(t,e,r)=>{"use strict";function i(t){return t===t>>>0?`${t}.0`:t.toString()}r.d(e,{A:()=>i})},25669:(t,e,r)=>{"use strict";r.d(e,{A:()=>g});var i=r(6110),s=r(57517),a=r(7511),n=r(5361),o=r(63921),c=r(55168),l=r(16307),h=r(89401),u=r(64748),d=r(70194),p=r(79955),f=r(84272),m=r(51025),v=r(40326);function g(t,e,r){const g=[],y=8===t.getMatrixId(),A=(0,a.A)(t.getRangeAdjustMatrix(r.bitDepth),r);if(y||g.push(A),g.push((0,a.A)(t.getTransformMatrix(r.bitDepth).invert(),r)),y&&g.push(A),e.isValid()){if(t.isHDR()){switch(t.getTransferId()){case 18:g.push((0,n.A)(r));break;case 16:g.push((0,o.A)(r));break;default:const e=t.getTransferFunction();e?g.push((0,c.A)(e,t.hasExtendedSkTransferFn(),r)):g.push((0,l.A)(t.getTransferId(),r))}10===t.getMatrixId()&&g.push((0,a.A)(t.getTransformMatrix(r.bitDepth).invert(),r)),g.push((0,a.A)(t.getPrimaryMatrix(),r));const y=new i.A(0,9,8,2);switch(t.getTransferId()){case 18:g.push((0,a.A)(y.getPrimaryMatrix().invert(),r)),(0,h.U)(r),g.push((0,h.A)(r)),(0,u.n)(s.hD,!0,r),g.push((0,u.A)(r)),r.toneMapPQAndHlgToDst&&((0,d.J)(t,r),g.push((0,d.A)(r))),g.push((0,a.A)(y.getPrimaryMatrix(),r));break;case 16:(0,u.n)(s.th,!0,r),g.push((0,u.A)(r)),r.toneMapPQAndHlgToDst&&(g.push((0,a.A)(y.getPrimaryMatrix().invert(),r)),(0,d.J)(t,r),g.push((0,d.A)(r)),g.push((0,a.A)(y.getPrimaryMatrix(),r)))}switch(g.push((0,a.A)(e.getPrimaryMatrix().invert(),r)),10===e.getMatrixId()&&g.push((0,a.A)(e.getTransformMatrix(r.bitDepth),r)),e.getTransferId()){case 18:(0,p.j)(s.kH,r),g.push((0,p.A)(r)),g.push((0,f.A)(r));break;case 16:(0,p.j)(s.th,r),g.push((0,p.A)(r)),g.push((0,m.A)(r));default:const i=e.getInverseTransferFunction();i?g.push((0,c.A)(i,t.hasExtendedSkTransferFn(),r)):g.push((0,v.A)(t.getTransferId(),r))}}if(!r.outputRGB){const t=8===e.getMatrixId(),i=(0,a.A)(e.getRangeAdjustMatrix(r.bitDepth).invert(),r);t&&g.push(i),g.push((0,a.A)(e.getTransformMatrix(r.bitDepth),r)),t||g.push(i)}}return g}},57517:(t,e,r)=>{"use strict";r.d(e,{hD:()=>s,kH:()=>i,th:()=>a});const i=203,s=1e3,a=1e4},71323:(t,e,r)=>{"use strict";function i(t,e,r){return e?`\n      {\n        ${1===r.type?"var v: f32":"float v"} = abs(color.r);\n        ${t()}\n        color.r = sign(color.r) * v;\n      }\n      {\n        ${1===r.type?"var v: f32":"float v"} = abs(color.g);\n        ${t()}\n        color.g = sign(color.g) * v;\n      }\n      {\n        ${1===r.type?"var v: f32":"float v"} = abs(color.b);\n        ${t()}\n        color.b = sign(color.b) * v;\n      }\n    `:`\n      {\n        ${1===r.type?"var v: f32":"float v"} = color.r;\n        ${t()}\n        color.r = v;\n      }\n      {\n        ${1===r.type?"var v: f32":"float v"} = color.g;\n        ${t()}\n        color.g = v;\n      }\n      {\n        ${1===r.type?"var v: f32":"float v"} = color.b;\n        ${t()}\n        color.b = v;\n      }\n    `}r.d(e,{A:()=>i})},40326:(t,e,r)=>{"use strict";r.d(e,{A:()=>s});var i=r(71323);function s(t,e){return(0,i.A)((function(){switch(t){case 9:return"\n          if (v < 0.0) {\n            v = 0.0;\n          }\n          else {\n            v =  1.0 + log(v) / log(10.0) / 2.0;\n          }\n        ";case 10:return"\n          if (v < sqrt(10.0) / 1000.0)\n            v = 0.0;\n          }\n          else {\n            v = 1.0 + log(v) / log(10.0) / 2.5;\n          }\n        ";case 11:return`\n          ${1===e.type?"let a: f32":"float a"} = 1.099296826809442;\n          ${1===e.type?"let b: f32":"float b"}= 0.018053968510807;\n          if (v < -b) {\n            v = -a * pow(-v, 0.45) + (a - 1.0);\n          }\n          else if (v <= b) {\n            v = 4.5 * v;\n          }\n          else {\n            v = a * pow(v, 0.45) - (a - 1.0);\n          }\n        `;case 12:return`\n          ${1===e.type?"let a: f32":"float a"} = 1.099;\n          ${1===e.type?"let b: f32":"float b"} = 0.018;\n          ${1===e.type?"let l: f32":"float l"} = 0.0045;\n\n          if (v < -l) {\n            v = -(a * pow(-4.0 * v, 0.45) + (a - 1.0)) / 4.0;\n          }\n          else if (v <= b) {\n            v = 4.5 * v;\n          }\n          else {\n            v = a * pow(v, 0.45) - (a - 1.0);\n          }\n        `;default:return""}}),!1,e)}},5361:(t,e,r)=>{"use strict";r.d(e,{A:()=>s});var i=r(71323);function s(t){return(0,i.A)((function(){return`\n      v = max(0.0, v);\n      ${1===t.type?"let a: f32":"float a"} = 0.17883277;\n      ${1===t.type?"let b: f32":"float b"} = 0.28466892;\n      ${1===t.type?"let c: f32":"float c"} = 0.55991073;\n      if (v <= 0.5) {\n        v = v * v * 4.0;\n      }\n      else {\n        v = exp((v - c) / a) + b;\n      }\n      v = v / 12.0;\n    `}),!1,t)}},84272:(t,e,r)=>{"use strict";r.d(e,{A:()=>s});var i=r(71323);function s(t){return(0,i.A)((function(){return`\n      v = max(0.0, v);\n      ${1===t.type?"let a: f32":"float a"} = 0.17883277;\n      ${1===t.type?"let b: f32":"float b"} = 0.28466892;\n      ${1===t.type?"let c: f32":"float c"} = 0.55991073;\n      if (v <= 1.0) {\n        v = 0.5 * sqrt(v);\n      }\n      else {\n        v = a * log(v - b) + c;\n      }\n    `}),!1,t)}},63921:(t,e,r)=>{"use strict";r.d(e,{A:()=>s});var i=r(71323);function s(t){return(0,i.A)((function(){return`\n      v = max(0.0, v);\n      ${1===t.type?"let m1: f32":"float m1"} = (2610.0 / 4096.0) / 4.0;\n      ${1===t.type?"let m2: f32":"float m2"} = (2523.0 / 4096.0) * 128.0;\n      ${1===t.type?"let c1: f32":"float c1"} = 3424.0 / 4096.0;\n      ${1===t.type?"let c2: f32":"float c2"} = (2413.0 / 4096.0) * 32.0;\n      ${1===t.type?"let c3: f32":"float c3"} = (2392.0 / 4096.0) * 32.0;\n      \n      ${0===t.type?"\n        #ifdef GL_FRAGMENT_PRECISION_HIGH\n        highp float v2 = v;\n        #else\n        float v2 = v;\n        #endif\n      ":"var v2: f32 = v;"}\n  \n      v2 = pow(max(pow(v2, 1.0 / m2) - c1, 0.0) / (c2 - c3 * pow(v2, 1.0 / m2)), 1.0 / m1);\n      v = v2;\n    `}),!1,t)}},51025:(t,e,r)=>{"use strict";r.d(e,{A:()=>s});var i=r(71323);function s(t){return(0,i.A)((function(){return`\n      v = max(0.0, v);\n      ${1===t.type?"let m1: f32":"float m1"} = (2610.0 / 4096.0) / 4.0;\n      ${1===t.type?"let m2: f32":"float m2"} = (2523.0 / 4096.0) * 128.0;\n      ${1===t.type?"let c1: f32":"float c1"} = 3424.0 / 4096.0;\n      ${1===t.type?"let c2: f32":"float c2"} = (2413.0 / 4096.0) * 32.0;\n      ${1===t.type?"let c3: f32":"float c3"} = (2392.0 / 4096.0) * 32.0;\n      v =  pow((c1 + c2 * pow(v, m1)) / (1.0 + c3 * pow(v, m1)), m2);\n    `}),!1,t)}},16307:(t,e,r)=>{"use strict";r.d(e,{A:()=>s});var i=r(71323);function s(t,e){return(0,i.A)((function(){switch(t){case 9:return"\n          if (v < 0.0) {\n            v = 0.0;\n          }\n          else {\n            v = pow(10.0, (v - 1.0) * 2.0);\n          }\n        ";case 10:return"\n          if (v < 0.0) {\n            v = 0.0;\n          }\n          else {\n            v = pow(10.0, (v - 1.0) * 2.5);\n          }\n        ";case 11:return`\n          ${1===e.type?"let a: f32":"float a"} = 1.099296826809442;\n          ${1===e.type?"let from_linear_neg_a: f32":"float from_linear_neg_a"} = -1.047844;\n          ${1===e.type?"let from_linear_b: f32":"float from_linear_b"} = 0.081243;\n          if (v < from_linear_neg_a) {\n            v = -pow((a - 1.0 - v) / a, 1.0 / 0.45);\n          }\n          else if (v <= from_linear_b) {\n            v = v / 4.5;\n          }\n          else {\n            v = pow((v + a - 1.0) / a, 1.0 / 0.45);\n          }\n        `;case 12:return`\n          ${1===e.type?"let a: f32":"float a"} = 1.099;\n          ${1===e.type?"let from_linear_neg_l: f32":"float from_linear_neg_l"} = -0.020250;\n          ${1===e.type?"let from_linear_b: f32":"float from_linear_b"} = 0.081000;\n          if (v < from_linear_neg_l) {\n            v = -pow((1.0 - a - v * 4.0) / a, 1.0 / 0.45) / 4.0;\n          }\n          else if (v <= from_linear_b) {\n            v = v / 4.5;\n          }\n          else {\n            v = pow((v + a - 1.0) / a, 1.0 / 0.45);\n          }\n        `;default:return""}}),!1,e)}},55168:(t,e,r)=>{"use strict";r.d(e,{A:()=>a});var i=r(71323),s=r(15380);function a(t,e,r){return(0,i.A)((function(){let e=.0009765625,r="v";Math.abs(t.c-1)>e&&(r=`${(0,s.A)(t.c)} * ${r}`),Math.abs(t.f)>e&&(r=`${r} + ${(0,s.A)(t.f)}`);let i="v";return Math.abs(t.a=1)>e&&(i=`${(0,s.A)(t.a)} * ${i}`),Math.abs(t.b)>e&&(i=`${i} + ${(0,s.A)(t.b)}`),Math.abs(t.g-1)>e&&(i=`pow(${i}, ${(0,s.A)(t.g)})`),Math.abs(t.e)>e&&(i=`${i} + ${(0,s.A)(t.e)}`),`\n      if (v < ${(0,s.A)(t.d)}) {\n        v = ${r};\n      }\n      else {\n        v = ${i};\n      }\n    `}),!1,r)}},38469:(t,e,r)=>{"use strict";function i(t,e,r){if(e){let e=t[3],r=t[4];t[3]=t[17],t[4]=t[18],t[17]=e,t[18]=r,e=t[10],r=t[11],t[10]=t[24],t[11]=t[25],t[24]=e,t[25]=r}if(r){let e=t[3],r=t[4];t[3]=t[10],t[4]=t[11],t[10]=e,t[11]=r,e=t[17],r=t[18],t[17]=t[24],t[18]=t[25],t[24]=e,t[25]=r}}r.d(e,{A:()=>i})},20088:(t,e,r)=>{"use strict";r.d(e,{A:()=>h});var i,s,a=r(49859),n=r(74707),o=r.n(n),c=r(61499),l=r(12085);class h{constructor(){(0,a.A)(this,"offset",void 0),(0,a.A)(this,"multiplier",void 0),(0,a.A)(this,"pqTonemapA",void 0),(0,a.A)(this,"pqTonemapB",void 0),(0,a.A)(this,"hlgOOTFGammaMinusOne",void 0),(0,a.A)(this,"nitsToSdrRelativeFactor",void 0),(0,a.A)(this,"sdrRelativeToNitsFactor",void 0)}}i=h.prototype,(s=new(o())).set("offset",{0:18,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),s.set("multiplier",{0:18,1:0,2:0,3:0,4:0,5:0,6:0,7:4,8:0}),s.set("pqTonemapA",{0:18,1:0,2:0,3:0,4:0,5:0,6:0,7:8,8:0}),s.set("pqTonemapB",{0:18,1:0,2:0,3:0,4:0,5:0,6:0,7:12,8:0}),s.set("hlgOOTFGammaMinusOne",{0:18,1:0,2:0,3:0,4:0,5:0,6:0,7:16,8:0}),s.set("nitsToSdrRelativeFactor",{0:18,1:0,2:0,3:0,4:0,5:0,6:0,7:20,8:0}),s.set("sdrRelativeToNitsFactor",{0:18,1:0,2:0,3:0,4:0,5:0,6:0,7:24,8:0}),(0,l.A)(i,c.Og,!0),(0,l.A)(i,c.dc,4),(0,l.A)(i,c.g7,28),(0,l.A)(i,c.JY,s)},98543:(t,e,r)=>{"use strict";r.d(e,{A:()=>s});var i=r(49859);class s{constructor(t,e){(0,i.A)(this,"context",void 0),(0,i.A)(this,"canvas",void 0),(0,i.A)(this,"rgbCanvas",void 0),(0,i.A)(this,"rgbContext",void 0),(0,i.A)(this,"vs",void 0),(0,i.A)(this,"fs",void 0),(0,i.A)(this,"program",void 0),(0,i.A)(this,"posBuffer",void 0),(0,i.A)(this,"texBuffer",void 0),(0,i.A)(this,"texture",void 0),this.canvas=new OffscreenCanvas(t,e),this.context=this.canvas.getContext("webgl"),this.rgbCanvas=new OffscreenCanvas(t,e),this.rgbContext=this.rgbCanvas.getContext("2d"),this.vs=this.context.createShader(this.context.VERTEX_SHADER),this.context.shaderSource(this.vs,"\n      attribute vec2 a_position;\n      attribute vec2 a_texCoord;\n      varying vec2 v_texCoord;\n      void main() {\n        gl_Position = vec4(a_position, 0, 1);\n        v_texCoord = a_texCoord;\n      }\n    "),this.context.compileShader(this.vs),this.fs=this.context.createShader(this.context.FRAGMENT_SHADER),this.context.shaderSource(this.fs,"\n      precision mediump float;\n      uniform sampler2D u_texture;\n      varying vec2 v_texCoord;\n      void main() {\n        vec4 rgb = texture2D(u_texture, v_texCoord);\n        gl_FragColor = vec4(rgb.rgb, rgb.r);\n      }\n    "),this.context.compileShader(this.fs);const r=this.program=this.context.createProgram();this.context.attachShader(r,this.vs),this.context.attachShader(r,this.fs),this.context.linkProgram(r),this.context.useProgram(r),this.posBuffer=this.context.createBuffer(),this.context.bindBuffer(this.context.ARRAY_BUFFER,this.posBuffer),this.context.bufferData(this.context.ARRAY_BUFFER,new Float32Array([-1,1,-1,-1,1,1,1,-1]),this.context.STATIC_DRAW);const s=this.context.getAttribLocation(r,"a_position");this.context.enableVertexAttribArray(s),this.context.vertexAttribPointer(s,2,this.context.FLOAT,!1,0,0),this.texBuffer=this.context.createBuffer(),this.context.bindBuffer(this.context.ARRAY_BUFFER,this.texBuffer),this.context.bufferData(this.context.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,1,1]),this.context.STATIC_DRAW);const a=this.context.getAttribLocation(r,"a_texCoord");this.context.enableVertexAttribArray(a),this.context.vertexAttribPointer(a,2,this.context.FLOAT,!1,0,0),this.texture=this.context.createTexture(),this.context.bindTexture(this.context.TEXTURE_2D,this.texture),this.context.texParameteri(this.context.TEXTURE_2D,this.context.TEXTURE_WRAP_S,this.context.CLAMP_TO_EDGE),this.context.texParameteri(this.context.TEXTURE_2D,this.context.TEXTURE_WRAP_T,this.context.CLAMP_TO_EDGE),this.context.texParameteri(this.context.TEXTURE_2D,this.context.TEXTURE_MIN_FILTER,this.context.LINEAR),this.context.clearColor(0,0,0,0),this.context.clearDepth(1),this.setUnpackAlignment(t)}setUnpackAlignment(t){t%8==0?this.context.pixelStorei(this.context.UNPACK_ALIGNMENT,8):t%4==0?this.context.pixelStorei(this.context.UNPACK_ALIGNMENT,4):t%2==0?this.context.pixelStorei(this.context.UNPACK_ALIGNMENT,2):this.context.pixelStorei(this.context.UNPACK_ALIGNMENT,1)}getTarget(){return this.canvas}process(t){this.rgbContext.drawImage(t,0,0,this.rgbCanvas.width,this.rgbCanvas.height),this.context.texImage2D(this.context.TEXTURE_2D,0,this.context.RGBA,this.context.RGBA,this.context.UNSIGNED_BYTE,this.rgbCanvas),this.context.clear(this.context.COLOR_BUFFER_BIT|this.context.DEPTH_BUFFER_BIT),this.context.drawArrays(this.context.TRIANGLE_STRIP,0,4)}destroy(){this.context.deleteTexture(this.texture),this.context.deleteBuffer(this.texBuffer),this.context.deleteBuffer(this.posBuffer),this.context.deleteProgram(this.program),this.context.deleteShader(this.fs),this.context.deleteShader(this.vs)}}},36719:(t,e,r)=>{"use strict";r.d(e,{A:()=>a});var i=r(49859),s=r(9188);class a extends s.A{constructor(t,e,r=!0){super(t,e),(0,i.A)(this,"enableColor",void 0),(0,i.A)(this,"aPoint",void 0),(0,i.A)(this,"aColor",void 0),this.enableColor=r}link(t){super.link(t),this.aPoint=this.gl.getAttribLocation(this.program,"point"),this.aColor=this.gl.getAttribLocation(this.program,"color"),this.enableColor?(this.gl.enableVertexAttribArray(this.aPoint),this.gl.enableVertexAttribArray(this.aColor)):this.gl.enableVertexAttribArray(this.aPoint)}bind(){super.bind(),this.enableColor?(this.gl.vertexAttribPointer(this.aPoint,3,this.gl.FLOAT,!1,7*Float32Array.BYTES_PER_ELEMENT,0),this.gl.vertexAttribPointer(this.aColor,4,this.gl.FLOAT,!1,7*Float32Array.BYTES_PER_ELEMENT,3*Float32Array.BYTES_PER_ELEMENT)):this.gl.vertexAttribPointer(this.aPoint,3,this.gl.FLOAT,!1,7*Float32Array.BYTES_PER_ELEMENT,0)}}},9188:(t,e,r)=>{"use strict";r.d(e,{A:()=>s});var i=r(49859);r(4624);class s{constructor(t,e){(0,i.A)(this,"gl",void 0),(0,i.A)(this,"_program",void 0),(0,i.A)(this,"vertexShader",void 0),(0,i.A)(this,"fragmentShader",void 0),this.vertexShader=t,this.fragmentShader=e}link(t){this.gl=t,this.vertexShader&&this.vertexShader.compile(this.gl),this.fragmentShader&&this.fragmentShader.compile(this.gl),this._program=this.gl.createProgram(),this.gl.attachShader(this._program,this.vertexShader.shader),this.gl.attachShader(this._program,this.fragmentShader.shader),this.gl.linkProgram(this._program)}stop(){this.vertexShader.stop(this.gl),this.fragmentShader.stop(this.gl),this.gl.deleteProgram(this._program),this.vertexShader=null,this.fragmentShader=null,this._program=null}bind(){this.gl.useProgram(this._program)}get program(){return this._program}}},24399:(t,e,r)=>{"use strict";r.d(e,{A:()=>c});var i=r(49859),s=r(36719),a=r(37022),n=r(36200),o=r(84209);class c extends s.A{constructor(t,e){super(new a.A(e||o.A),new n.A(t)),(0,i.A)(this,"rotateMatrixLocation",void 0),(0,i.A)(this,"ySamplerLocation",void 0),(0,i.A)(this,"uSamplerLocation",void 0),(0,i.A)(this,"vSamplerLocation",void 0),(0,i.A)(this,"aSamplerLocation",void 0)}link(t){super.link(t),this.rotateMatrixLocation=this.gl.getUniformLocation(this.program,"rotateMatrix"),this.ySamplerLocation=this.gl.getUniformLocation(this.program,"y_Sampler"),this.uSamplerLocation=this.gl.getUniformLocation(this.program,"u_Sampler"),this.vSamplerLocation=this.gl.getUniformLocation(this.program,"v_Sampler"),this.aSamplerLocation=this.gl.getUniformLocation(this.program,"a_Sampler")}setRotateMatrix(t){this.gl.uniformMatrix4fv(this.rotateMatrixLocation,!1,new Float32Array(t))}bindYTexture(t=0){this.gl.uniform1i(this.ySamplerLocation,t)}bindUTexture(t=0){this.gl.uniform1i(this.uSamplerLocation,t)}bindVTexture(t=0){this.gl.uniform1i(this.vSamplerLocation,t)}bindATexture(t=0){this.gl.uniform1i(this.aSamplerLocation,t)}}},25408:(t,e,r)=>{"use strict";r.d(e,{A:()=>a});var i=r(49859),s=r(24399);class a extends s.A{constructor(t,e){super(t,e),(0,i.A)(this,"offsetLocation",void 0),(0,i.A)(this,"multiplierLocation",void 0),(0,i.A)(this,"pqTonemapALocation",void 0),(0,i.A)(this,"pqTonemapBLocation",void 0),(0,i.A)(this,"hlgOOTFGammaMinusOneLocation",void 0),(0,i.A)(this,"hlgDstMaxLuminanceRelativeLocation",void 0),(0,i.A)(this,"nitsToSdrRelativeFactorLocation",void 0),(0,i.A)(this,"sdrRelativeToNitsFactorLocation",void 0)}link(t){super.link(t),this.offsetLocation=this.gl.getUniformLocation(this.program,"offset"),this.multiplierLocation=this.gl.getUniformLocation(this.program,"multiplier"),this.pqTonemapALocation=this.gl.getUniformLocation(this.program,"pq_tonemap_a"),this.pqTonemapBLocation=this.gl.getUniformLocation(this.program,"pq_tonemap_b"),this.hlgOOTFGammaMinusOneLocation=this.gl.getUniformLocation(this.program,"hlg_ootf_gamma_minus_one"),this.nitsToSdrRelativeFactorLocation=this.gl.getUniformLocation(this.program,"nits_to_sdr_relative_factor"),this.sdrRelativeToNitsFactorLocation=this.gl.getUniformLocation(this.program,"sdr_relative_to_nits_factor")}setMetaData(t){this.gl.uniform1f(this.offsetLocation,t.offset),this.gl.uniform1f(this.multiplierLocation,t.multiplier),this.gl.uniform1f(this.pqTonemapALocation,t.pqTonemapA),this.gl.uniform1f(this.pqTonemapBLocation,t.pqTonemapB),this.gl.uniform1f(this.hlgOOTFGammaMinusOneLocation,t.hlgOOTFGammaMinusOne),this.gl.uniform1f(this.nitsToSdrRelativeFactorLocation,t.nitsToSdrRelativeFactor),this.gl.uniform1f(this.sdrRelativeToNitsFactorLocation,t.sdrRelativeToNitsFactor)}}},18915:(t,e,r)=>{"use strict";r.d(e,{A:()=>s});var i=r(24399);class s extends i.A{constructor(t,e){super(t,e)}}},36200:(t,e,r)=>{"use strict";r.d(e,{A:()=>s});var i=r(27976);class s extends i.A{constructor(t){super(1,t)}}},27976:(t,e,r)=>{"use strict";r.d(e,{A:()=>s});var i=r(49859);r(4624);class s{constructor(t,e){(0,i.A)(this,"type",void 0),(0,i.A)(this,"_shader",void 0),(0,i.A)(this,"_source",void 0),(0,i.A)(this,"compiled",void 0),this.type=t,this._shader=null,this._source=e,this.compiled=!1}compile(t){this.compiled||(this._shader=t.createShader(0===this.type?t.VERTEX_SHADER:t.FRAGMENT_SHADER),t.shaderSource(this._shader,this._source),t.compileShader(this._shader),this.compiled=!0)}stop(t){t.deleteShader(this._shader),this._shader=null}get shader(){return this._shader}}},37022:(t,e,r)=>{"use strict";r.d(e,{A:()=>s});var i=r(27976);class s extends i.A{constructor(t){super(0,t)}}},22684:(t,e,r)=>{"use strict";r.d(e,{A:()=>a});var i=r(49859),s=r(67672);class a{constructor(t,e,r){(0,i.A)(this,"gl",void 0),(0,i.A)(this,"width",void 0),(0,i.A)(this,"height",void 0),(0,i.A)(this,"texture",void 0),this.gl=t,this.width=e,this.height=r,this.texture=this.gl.createTexture()}getTexture(){return this.texture}bind(t){s.ai(t)&&this.gl.activeTexture(this.gl.TEXTURE0+t),this.gl.bindTexture(this.gl.TEXTURE_2D,this.texture)}setSize(t,e){this.width=t,this.height=e}setUnpackAlignment(){this.width%8==0?this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,8):this.width%4==0?this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,4):this.width%2==0?this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,2):this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,1)}destroy(){this.texture&&(this.gl.deleteTexture(this.texture),this.texture=null)}}},18105:(t,e,r)=>{"use strict";r.d(e,{A:()=>c});var i=r(49859),s=r(96319),a=r.n(s),n=r(22684),o=r(4624);class c extends n.A{constructor(t,e,r){super(t,e,r),(0,i.A)(this,"filter",void 0),(0,i.A)(this,"format",void 0),(0,i.A)(this,"internalformat",void 0),(0,i.A)(this,"dataType",void 0),(0,i.A)(this,"firstUploaded",void 0),(0,i.A)(this,"pbo",void 0),this.format=this.gl.LUMINANCE,this.filter=this.gl.LINEAR,this.internalformat=this.gl.LUMINANCE,this.dataType=this.gl.UNSIGNED_BYTE}init(){this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,a()(this)),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,a()(this)),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.firstUploaded=!1}setFormat(t){this.format=t}setInternalformat(t){this.internalformat=t}setDataType(t){this.dataType=t}setFilter(t){this.filter=t}fill(t){if(this.gl.bindTexture(this.gl.TEXTURE_2D,this.texture),this.setUnpackAlignment(),this.firstUploaded)if(this.pbo){const e=this.gl;e.bindBuffer(e.PIXEL_UNPACK_BUFFER,this.pbo),e.bufferSubData(e.PIXEL_UNPACK_BUFFER,0,t),e.texSubImage2D(this.gl.TEXTURE_2D,0,0,0,this.width,this.height,this.format,this.dataType,0)}else this.gl.texSubImage2D(this.gl.TEXTURE_2D,0,0,0,this.width,this.height,this.format,this.dataType,t);else{if("function"==typeof WebGL2RenderingContext&&this.gl instanceof WebGL2RenderingContext)try{this.pbo=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.PIXEL_UNPACK_BUFFER,this.pbo),this.gl.bufferData(this.gl.PIXEL_UNPACK_BUFFER,t,this.gl.STREAM_DRAW),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.internalformat,this.width,this.height,0,this.format,this.dataType,0)}catch(e){this.pbo=null,o.R8("not support pbo","src/avrender/image/webgl/texture/VideoTexture.ts",109),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.internalformat,this.width,this.height,0,this.format,this.dataType,t)}else this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.internalformat,this.width,this.height,0,this.format,this.dataType,t);this.firstUploaded=!0}}destroy(){this.pbo&&this.gl.deleteBuffer(this.pbo),super.destroy()}}},48641:(t,e,r)=>{"use strict";r.d(e,{A:()=>A});var i=r(49859),s=r(86226),a=r.n(s),n=r(63939),o=r(50932),c=(r(10278),r(37837)),l=r(11473),h=r(84149),u=r(4624),d=r(26429),p=r(44690),f=r(67672),m=r(14686),v=r(86932);const g="src/avrender/pcm/AudioSourceBufferNode.ts",y=p.A.windows||p.A.mac||p.A.linux?20:30;class A{constructor(t,e,r={}){(0,i.A)(this,"context",void 0),(0,i.A)(this,"observer",void 0),(0,i.A)(this,"options",void 0),(0,i.A)(this,"pullIPC",void 0),(0,i.A)(this,"buffer",void 0),(0,i.A)(this,"channels",void 0),(0,i.A)(this,"ended",void 0),(0,i.A)(this,"float32",void 0),(0,i.A)(this,"buffered",void 0),(0,i.A)(this,"pause",void 0),(0,i.A)(this,"startTime",void 0),(0,i.A)(this,"dest",void 0),(0,i.A)(this,"queue",void 0),(0,i.A)(this,"firstRendered",void 0),(0,i.A)(this,"lastStutterTimestamp",void 0),this.context=t,this.observer=e,this.options=r}async request(t,e,r){switch(t){case"init":break;case"start":{const{port:t,channels:r}=e;this.channels=r,this.pullIPC=new h.Ay(t),this.buffer=this.allocBuffer(),this.float32=new Float32Array((0,l.eq)().buffer),this.queue=[],this.startTime=0,this.ended=!1,this.pause=!1,this.firstRendered=!1,this.buffered=!0,this.lastStutterTimestamp=(0,v.A)();let i=await this.pullInterval();if(i<0)return this.ended=!0,this.buffered=!1,this.freeBuffer(this.buffer),u.pq("audio source ended",g,105),void this.observer.onEnded();this.buffering(),i=await this.pullInterval(),i<0&&(this.ended=!0,this.buffered=!1),this.process();break}case"restart":{if(!this.ended)return;this.buffer=this.allocBuffer(),this.queue=[],this.startTime=0,this.ended=!1,this.pause=!1,this.firstRendered=!1,this.buffered=!0,this.lastStutterTimestamp=(0,v.A)();let t=await this.pullInterval();if(t<0)return this.ended=!0,this.buffered=!1,this.freeBuffer(this.buffer),u.pq("audio source ended",g,144),void this.observer.onEnded();this.buffering(),t=await this.pullInterval(),t<0&&(this.ended=!0,this.buffered=!1),this.process();break}case"stop":this.freeBuffer(this.buffer),this.buffer=null,this.ended=!0,this.pullIPC.destroy();break;case"clear":var i;a()(i=this.queue).call(i,(t=>{t.disconnect()})),this.queue.length=0;break;case"pause":this.pause=!0;break;case"unpause":this.pause=!1,this.queue.length||this.process()}}allocBuffer(){const t=(0,c.Gy)(48);o.M[20](t,(0,c.Gy)(4*this.channels));const e=(0,c.Gy)(512*y*this.channels);for(let r=0;r<this.channels;r++)o.M[20](n.f[20](t)+4*r,e+128*y*4*r);return o.M[15](t+12,128*y),t}freeBuffer(t){t&&((0,c.aI)(n.f[20](t)),(0,c.aI)(t),(0,c.Eb)(t))}async pullInterval(){let t=0;if(this.options.isMainWorker){const e=await this.pullIPC.request("pullBuffer",{nbSamples:128*y});f.sv(e)?(t=0,(0,m.lW)(n.f[20](n.f[20](this.buffer)),e.byteLength,new Uint8Array(e))):t=e}else t=await this.pullIPC.request("pull",{buffer:this.buffer});return t}async pull(){this.buffered=!1,await this.pullInterval()<0?this.ended=!0:(this.buffered=!0,this.queue.length||this.process())}buffering(){this.float32.length||(this.float32=new Float32Array((0,l.eq)().buffer));const t=this.context.createBuffer(this.channels,128*y,this.context.sampleRate);for(let e=0;e<this.channels;e++)if(n.f[20](n.f[20](this.buffer)+4*e)){let r=n.f[20](n.f[20](this.buffer)+4*e)>>>2;t.copyToChannel&&!d.USE_THREADS?t.copyToChannel(this.float32.subarray(r,r+128*y),e,0):t.getChannelData(e).set(this.float32.subarray(r,r+128*y),0)}const e=this.context.createBufferSource();e.buffer=t,e.onended=()=>{if(this.queue.shift(),this.ended&&!this.queue.length)return this.freeBuffer(this.buffer),u.pq("audio source ended",g,280),void this.observer.onEnded();this.process(),this.queue.length||(0,v.A)()-this.lastStutterTimestamp>1e3&&(this.observer.onStutter(),this.lastStutterTimestamp=(0,v.A)()),this.firstRendered||(this.firstRendered=!0,this.observer.onFirstRendered())},0===this.startTime&&(this.startTime=this.context.currentTime),e.start(this.startTime),this.dest&&e.connect(this.dest),this.startTime+=e.buffer.duration,this.queue.push(e)}connect(t){this.dest=t}disconnect(){for(let t=0;t<this.queue.length;t++)this.queue[t].disconnect();this.dest=null,this.queue.length=0}process(){this.buffer&&!this.pause&&this.buffered&&(this.buffering(),this.pull())}}},88397:(t,e,r)=>{"use strict";r.d(e,{A:()=>s});var i=r(6534);class s extends i.A{constructor(t,e,r={}){super(t,e,"audio-source-processor",r)}}},6534:(t,e,r)=>{"use strict";r.d(e,{A:()=>c});var i=r(49859),s=r(86226),a=r.n(s),n=r(84149),o=r(67672);class c{constructor(t,e,r,s={}){(0,i.A)(this,"audioWorkletNode",void 0),(0,i.A)(this,"ipcPort",void 0),(0,i.A)(this,"observer",void 0),this.observer=e,this.audioWorkletNode=new AudioWorkletNode(t,r,s),this.ipcPort=new n.Ay(this.audioWorkletNode.port),this.ipcPort.on(n.Wo,(t=>{switch(t.method){case"ended":this.observer.onEnded();break;case"firstRendered":this.observer.onFirstRendered();break;case"stutter":this.observer.onStutter()}}))}async request(t,e,r){return this.ipcPort.request(t,e,r)}connect(t){this.audioWorkletNode.connect(t)}getNode(){return this.audioWorkletNode}disconnect(){this.audioWorkletNode.disconnect()}getParameters(t){const e=this.audioWorkletNode.parameters;if(o.Pc(e.get))return e.get(t);a()(e).call(e,((e,r)=>{if(r===t)return e}))}}},41324:(t,e,r)=>{"use strict";r.d(e,{A:()=>n});var i=r(96984),s=r.n(i),a=r(61837);async function n(t,e){const r=(0,a.A)(e,{varName:"processor"}),i=new Blob([r],{type:"text/javascript"}),n=s().createObjectURL(i),o=t.audioWorkletModule||{};o[e]=n,t.audioWorkletModule=o,await t.audioWorklet.addModule(n)}},85224:(t,e,r)=>{"use strict";r.d(e,{A:()=>n});var i=r(63939),s=r(79756),a=r(86834);function n(t){let e="";return e=86017!==i.f[15](t+4)||a.A.firefox?`audio/mp4; codecs="${(0,s.A)(t)}"`:"audio/mpeg",e}},10333:(t,e,r)=>{"use strict";r.d(e,{A:()=>a});var i=r(63939),s=r(28875);function a(t){return 139===i.f[15](t+4)?`video/webm; codecs="${(0,s.A)(t)}"`:`video/mp4; codecs="${(0,s.A)(t)}"`}},68960:(t,e,r)=>{"use strict";r.d(e,{Ay:()=>d,Tr:()=>f,de:()=>p});var i=r(49859),s=r(74707),a=r.n(s),n=r(77162),o=r(74503),c=r(9599),l=r(94300),h=r(77231),u=r(71517);class d{constructor(){(0,i.A)(this,"index",h.N_),(0,i.A)(this,"id",h.N_),(0,i.A)(this,"privData",null),(0,i.A)(this,"privateData2",null),(0,i.A)(this,"codecpar",(0,o.A)(new n.A,n.A)),(0,i.A)(this,"sideData",{}),(0,i.A)(this,"nbFrames",BigInt(0)),(0,i.A)(this,"metadata",{}),(0,i.A)(this,"duration",h.Dh),(0,i.A)(this,"startTime",h.Dh),(0,i.A)(this,"firstDTS",h.Dh),(0,i.A)(this,"disposition",0),(0,i.A)(this,"discard",-16),(0,i.A)(this,"timeBase",(0,o.A)(c.P)),(0,i.A)(this,"sampleIndexes",[]),(0,i.A)(this,"sampleIndexesPosMap",new(a())),(0,i.A)(this,"attachedPic",0)}destroy(){this.codecpar&&(this.codecpar.destroy(),(0,l.A)(this.codecpar),this.codecpar=null),this.timeBase&&((0,l.A)(this.timeBase),this.timeBase=null),this.attachedPic&&((0,u.Qe)(this.attachedPic),this.attachedPic=0),this.sampleIndexes.length=0,this.sampleIndexesPosMap.clear()}}class p{constructor(){(0,i.A)(this,"codedWidth",0),(0,i.A)(this,"codedHeight",0),(0,i.A)(this,"offsets",[]),(0,i.A)(this,"background",null),(0,i.A)(this,"horizontalOffset",h.N_),(0,i.A)(this,"verticalOffset",h.N_),(0,i.A)(this,"width",0),(0,i.A)(this,"height",0),(0,i.A)(this,"sideData",{})}}class f{constructor(){(0,i.A)(this,"privData",null),(0,i.A)(this,"index",h.N_),(0,i.A)(this,"id",h.N_),(0,i.A)(this,"type",0),(0,i.A)(this,"params",null),(0,i.A)(this,"metadata",{}),(0,i.A)(this,"streams",[]),(0,i.A)(this,"disposition",0)}destroy(){this.streams.length=0,this.params=null}}},95832:(t,e,r)=>{"use strict";r.d(e,{Bq:()=>u,En:()=>c,Ij:()=>h,XC:()=>l,f7:()=>d,hY:()=>o,uF:()=>a});var i=r(77231),s=r(37246);const a={1:"Main",2:"LC",3:"SSR",4:"LTP",5:"HE",6:"SCALABLE",29:"HEv2",23:"LD",39:"ELD"},n={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12},o=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350,i.N_,i.N_,i.N_],c=[i.N_,1,2,3,4,5,6,7];function l(t,e){if(!e&&t.sideData[1]&&(e=t.sideData[1]),e){const{profile:r,sampleRate:s,channels:a}=function(t){let e=i.N_,r=i.N_,s=i.N_;return t.length>=2&&(e=t[0]>>3&31,r=o[(7&t[0])<<1|t[1]>>7],s=c[t[1]>>3&15]),{profile:e,sampleRate:r,channels:s}}(e);t.codecpar.profile=r,t.codecpar.sampleRate=s,t.codecpar.chLayout.nbChannels=a,t.codecpar.frameSize=5===r?2048:1024,t.codecpar.format=8}}function h(t){const e=n[t.sampleRate],r=t.chLayout.nbChannels,s=t.profile===i.N_?2:t.profile,a=new Uint8Array(2);return a[0]=(31&s)<<3|(14&e)>>1,a[1]=(1&e)<<7|(15&r)<<3,a}function u(t){if(t.length<7)return-1;const e=t[0]<<4|t[1]>>4;if(4095!==e)return-1;const r=1&t[1],i=(192&t[2])>>>6,s=(60&t[2])>>>2,a=(1&t[2])<<2|(192&t[3])>>>6,n=(3&t[3])<<11|t[4]<<3|(224&t[5])>>>5,l=3&t[6];let h=1===r?7:9,u=n-h;return{syncWord:e,profile:i+1,sampleRate:o[s],channels:c[a],aacFrameLength:n,numberOfRawDataBlocksInFrame:l,headerLength:h,framePayloadLength:u}}function d(t,e){function r(){const t=e.readU(2);let r=0;for(let i=0;i<=t;i++)r<<=8,r|=e.readU(8);return r}e||(e=new s.A).appendBuffer(t);const i=e.getPointer(),a={syncWord:0,profile:0,sampleRate:0,channels:0,useSameStreamMux:!1,headerLength:0,framePayloadLength:0,muxLengthBytes:0},n=e.readU(11);if(695!==n)return-1;a.syncWord=n,a.muxLengthBytes=e.readU(13);const l=1===e.readU1();if(a.useSameStreamMux=l,!l){const t=1===e.readU1();if(t&&1===e.readU1())return-1;if(t&&r(),1!==e.readU1())return-1;if(0!==e.readU(6))return-1;if(0!==e.readU(4))return-1;if(0!==e.readU(3))return-1;let i=t?r():0;const s=e.readU(5);i-=5;const n=e.readU(4);i-=4;const l=e.readU(4);if(i-=4,e.readU(3),i-=3,i>0&&e.readU(i),0!==e.readU(3))return-1;if(e.readU(8),1===e.readU1())if(t)r();else{let t=0;for(;;){t<<=8;const r=1===e.readU1();if(t+=e.readU(8),!r)break}}1===e.readU1()&&e.readU(8),a.profile=s+1,a.sampleRate=o[n],a.channels=c[l]}let h=0;for(;;){const t=e.readU(8);if(h+=t,255!==t)break}return a.framePayloadLength=h,a.headerLength=e.getPointer()-i+(8===e.getBitLeft()?0:1),a}},21477:(t,e,r)=>{"use strict";r.d(e,{Ui:()=>n,XC:()=>a,zk:()=>s}),r(71426);var i=r(37246);r(11573),r(83314),r(97317);const s={0:"Main",1:"High",2:"Professional"};function a(t,e){if(!e&&t.sideData[1]&&(e=t.sideData[1]),e&&e.length>=4){const r=n(e);t.codecpar.profile=r.profile,t.codecpar.level=r.level}}function n(t){const e=new i.A(t.length);e.appendBuffer(t),e.readU1(),e.readU(7);const r=e.readU(3),s=e.readU(5),a=e.readU1();let n=e.readU1()?10:8;return e.readU1()&&(n=12),{profile:r,level:s,tier:a,bitDepth:n,monochrome:e.readU1(),chromaSubsamplingX:e.readU1(),chromaSubsamplingY:e.readU1(),chromaSamplePosition:e.readU(2)}}},62815:(t,e,r)=>{"use strict";r.d(e,{KD:()=>F,S1:()=>E,XC:()=>U,kM:()=>L,oT:()=>B,sL:()=>D,tZ:()=>C,wf:()=>$});var i=r(18979),s=r.n(i),a=r(73363),n=r.n(a),o=r(86226),c=r.n(o),l=r(96319),h=r.n(l),u=r(11393),d=r.n(u),p=r(31721),f=r.n(p),m=r(63939),v=r(72739),g=r(729),y=r(31865),A=r(37246),b=r(4624),x=r(14686),w=r(60264),k=r(37837),T=r(23991),_=r(39381),I=r(82774);const S="src/avutil/codecs/h264.ts",P=16,M=3,C={66:"Constrained Baseline",77:"Main",100:"High",110:"High10",122:"High422",244:"High444"};function R(t,e,r=[]){t.length>32&&(b.R8(`h264 metadata's sps max length is 32, but get ${t.length}`,S,218),t=s()(t).call(t,0,32)),t.length>256&&(b.R8(`h264 metadata's pps max length is 256, but get ${t.length}`,S,222),t=s()(t).call(t,0,256));let i=7;i=n()(t).call(t,((t,e)=>t+2+e.length),i),i=n()(e).call(e,((t,e)=>t+2+e.length),i);const a=t[0],o=$(a);66!==o.profile&&77!==o.profile&&88!==o.profile&&(i+=4,r.length&&(i=n()(r).call(r,((t,e)=>t+2+e.length),i)));const c=new Uint8Array(i),l=new g.A(c);return l.writeUint8(1),l.writeUint8(a[1]),l.writeUint8(a[2]),l.writeUint8(a[3]),l.writeUint8(252|M),l.writeUint8(224|31&t.length),v.__(t,(t=>{l.writeUint16(t.length),l.writeBuffer(t)})),l.writeUint8(e.length),v.__(e,(t=>{l.writeUint16(t.length),l.writeBuffer(t)})),66!==o.profile&&77!==o.profile&&88!==o.profile&&(l.writeUint8(252|o.chromaFormatIdc),l.writeUint8(248|o.bitDepthLumaMinus8),l.writeUint8(248|o.bitDepthChromaMinus8),r.length&&v.__(r,(t=>{l.writeUint16(t.length),l.writeBuffer(t)}))),c}function E(t){let e=w.py(t);if(e.length>1){const t=[],r=[],i=[];if(c()(e).call(e,(e=>{const s=31&e[0];7===s?t.push(e):8===s?r.push(e):13===s&&i.push(e)})),t.length&&r.length)return R(t,r,i)}}function D(t){let e=w.py(t);if(e.length>1){const t=[],r=[],i=[];if(c()(e).call(e,(e=>{const s=31&e[0];7===s?t.push(e):8===s?r.push(e):13===s&&i.push(e)})),t.length&&r.length){const e=[t[0],r[0]];return i.length&&e.push(i[0]),w.nW(e,0)}}}function B(t,e=!1){let r,i=w.py(t),s=!1;if(i.length){const t=[],a=[],n=[];c()(i).call(i,(e=>{const r=31&e[0];7===r?t.push(e):8===r?a.push(e):13===r?n.push(e):5===r&&(s=!0)})),t.length&&a.length?(r=R(t,a,n),i=h()(i).call(i,(t=>{const r=31&t[0];return e?9!==r:9!==r&&8!==r&&7!==r&&13!==r}))):i=h()(i).call(i,(t=>9!=(31&t[0])))}const a=n()(i).call(i,((t,e)=>t+M+1+e.length),0),o=(0,k.sY)(a),l=(0,x.s3)(o,a);return w.S9(i,M,l),{bufferPointer:o,length:a,key:s,extradata:r}}function L(t,e){var r;let i=d()(r=w.py(t)).call(r,w.py(e));if(i.length){const t=[],e=[],r=[],s=[],a=[];return c()(i).call(i,(i=>{const n=31&i[0];7===n?t.push(i):8===n?e.push(i):13===n?r.push(i):6===n?s.push(i):9!==n&&a.push(i)})),function(t,e,r,i,s){const a=[w.Le(i,0),w.Le(t,0),w.Le(e,0),w.Le(r,0),w.Le(s,2)];let o=n()(a).call(a,((t,e)=>t+e),0);const c=(0,k.sY)(o+6);let l=c;return I.w8((l+=1,l-1),0),I.w8((l+=1,l-1),0),I.w8((l+=1,l-1),0),I.w8((l+=1,l-1),1),I.w8((l+=1,l-1),9),I.w8((l+=1,l-1),240),i.length&&(w.nW(i,0,(0,x.s3)(l,a[0])),l+=a[0]),t.length&&(w.nW(t,0,(0,x.s3)(l,a[1])),l+=a[1]),e.length&&(w.nW(e,0,(0,x.s3)(l,a[2])),l+=a[2]),r.length&&(w.nW(r,0,(0,x.s3)(l,a[3])),l+=a[3]),s.length&&w.nW(s,2,(0,x.s3)(l,a[4])),{bufferPointer:c,length:o+6}}(t,e,r,s,a)}}function U(t,e){let r;if(!e&&t.sideData[1]&&(e=t.sideData[1]),e&&w.Bs(e))v.__(w.py(e),(t=>{if(7==(31&t[0]))return r=t,!1}));else if(e&&e.length>=6){const{spss:t}=function(t){const e=new y.A(t);e.skip(5);const r=[],i=[],s=[],a=31&e.readUint8();for(let t=0;t<a;t++){const t=e.readUint16();r.push(e.readBuffer(t))}const n=e.readUint8();for(let t=0;t<n;t++){const t=e.readUint16();i.push(e.readBuffer(t))}if(e.remainingSize()>4){e.skip(3);const t=e.readUint8();if(t>0)for(let r=0;r<t;r++){const t=e.readUint16();s.push(e.readBuffer(t))}}return{spss:r,ppss:i,spsExts:s}}(e);t.length&&(r=t[0])}if(r){const{profile:e,level:i,width:s,height:a,videoDelay:n,chromaFormatIdc:o,bitDepthLumaMinus8:c}=$(r);switch(t.codecpar.profile=e,t.codecpar.level=i,t.codecpar.width=s,t.codecpar.height=a,t.codecpar.videoDelay=n,c){case 0:t.codecpar.format=3===o?5:2===o?4:0;break;case 1:t.codecpar.format=3===o?66:2===o?70:60;break;case 2:t.codecpar.format=3===o?68:2===o?64:62}}}function F(t,e=4){if(64&m.f[15](t+36)){let e=w.py((0,x.s3)(m.f[20](t+24),m.f[15](t+28)));return f()(e).call(e,(t=>5==(31&t[0])))}{const r=m.f[15](t+28);let i=0;for(;i<r-e;){if(5==(31&_.r8(m.f[20](t+24)+(i+e))))return!0;i+=4===e?_.Sg(m.f[20](t+24)+i):3===e?_.ht(m.f[20](t+24)+i):2===e?_.yd(m.f[20](t+24)+i):_.r8(m.f[20](t+24)+i),i+=e}return!1}}function $(t){if(!t||t.length<3)return;let e=0;0===t[0]&&0===t[1]&&0===t[2]&&1===t[3]&&(e=4);const r=w.BN(t.subarray(e)),i=new A.A(r.length);i.appendBuffer(r),i.readU1(),i.readU(2),i.readU(5);const s=i.readU(8);i.readU1(),i.readU1(),i.readU1(),i.readU1(),i.readU1(),i.readU1(),i.readU(2);const a=i.readU(8);T.xb(i);let n=1,o=0,c=0;if(100==s||110==s||122==s||244==s||44==s||83==s||86==s||118==s||128==s||138==s||139==s||134==s||135==s){function x(t){let e,r=8,s=8;for(let a=0;a<t;a++)0!==s&&(e=T.$x(i),s=(r+e+256)%256),r=0===s?r:s}if(n=T.xb(i),3===n&&i.readU1(),o=T.xb(i),c=T.xb(i),i.readU1(),i.readU1()){const k=new Array(8);for(let _=0;_<(3!=n?8:12);_++)k[_]=i.readU1(),k[_]&&x(_<6?16:64)}}const l=T.xb(i),h=T.xb(i);let u=0,d=0;if(0===h)u=T.xb(i);else if(1===h){d=i.readU1(),T.$x(i),T.$x(i);const I=T.xb(i);for(let S=0;S<I;S++)T.$x(i)}T.xb(i),i.readU1();const p=T.xb(i),f=T.xb(i),m=i.readU1();let v=16*(p+1),g=(2-m)*(f+1)*16;m||i.readU1(),i.readU1();const y=i.readU1();if(y){let M=1,C=2-y;1===n?(M=2,C=2*(2-y)):2===y&&(M=2,C=2-y),v-=M*(T.xb(i)+T.xb(i)),g-=C*(T.xb(i)+T.xb(i))}let b=0;if(i.readU1()){let R=i.readU1();function E(){const t=T.xb(i)+1;i.readU(4),i.readU(4);for(let e=0;e<t;e++)T.xb(i),T.xb(i),i.readU1();i.readU(5),i.readU(5),i.readU(5),i.readU(5)}R&&i.readU(8)>=17&&(i.readU(16),i.readU(16)),R=i.readU1(),R&&i.readU1(),R=i.readU1(),R&&(i.readU(3),i.readU1(),R=i.readU1(),R&&(i.readU(8),i.readU(8),i.readU(8))),R=i.readU1(),R&&(T.xb(i),T.xb(i)),R=i.readU1(),R&&(i.readU(32),i.readU(32),i.readU1());let D=i.readU1();D&&E();let B=i.readU1();B&&E(),(D||B)&&i.readU1(),i.readU1(),R=i.readU1(),R&&(i.readU1(),T.xb(i),T.xb(i),T.xb(i),T.xb(i),b=Math.min(T.xb(i),P))}return{profile:s,level:a,width:v,height:g,chromaFormatIdc:n,bitDepthLumaMinus8:o,bitDepthChromaMinus8:c,frameMbsOnlyFlag:m,picOrderCntType:h,log2MaxPicOrderCntLsbMinus4:u,deltaPicOrderAlwaysZeroFlag:d,log2MaxFrameNumMinus4:l,videoDelay:b}}},67659:(t,e,r)=>{"use strict";r.d(e,{KD:()=>D,S1:()=>P,XC:()=>E,ZU:()=>L,dT:()=>_,kM:()=>R,oT:()=>C,sL:()=>M,wf:()=>B});var i=r(73363),s=r.n(i),a=r(86226),n=r.n(a),o=r(96319),c=r.n(o),l=r(11393),h=r.n(l),u=r(31721),d=r.n(u),p=r(63939),f=r(72739),m=r(729),v=r(31865),g=r(37246),y=r(14686),A=r(60264),b=r(37837),x=r(23991),w=r(39381),k=r(82774);const T=16,_={1:"Main",2:"Main10",3:"MainStillPicture",4:"Main444"},I=3;function S(t,e,r){const i=e[0];let a=23;t.length&&(a+=3,a=s()(t).call(t,((t,e)=>t+2+e.length),a)),e.length&&(a+=3,a=s()(e).call(e,((t,e)=>t+2+e.length),a)),r.length&&(a+=3,a=s()(r).call(r,((t,e)=>t+2+e.length),a));const n=new Uint8Array(a),o=new m.A(n,!0),c=B(i);o.writeUint8(1),o.writeUint8(i[1]),o.writeUint8(i[2]),o.writeUint8(i[3]),o.writeUint8(i[4]),o.writeUint8(i[5]),o.writeUint8(i[6]),o.writeUint8(i[7]),o.writeUint8(i[8]),o.writeUint8(i[9]),o.writeUint8(i[10]),o.writeUint8(i[11]),o.writeUint8(c.level),o.writeUint8(1020),o.writeUint8(0),o.writeUint8(16320),o.writeUint8(16320|c.chroma_format_idc),o.writeUint8(8160|c.bit_depth_luma_minus8),o.writeUint8(8160|c.bit_depth_chroma_minus8),o.writeUint16(0),o.writeUint8(8|(1&i[0])<<2|I);let l=0;return t.length&&l++,e.length&&l++,r.length&&l++,o.writeUint8(l),t.length&&(o.writeUint8(160),o.writeUint16(t.length),f.__(t,(t=>{o.writeUint16(t.length),o.writeBuffer(t)}))),e.length&&(o.writeUint8(161),o.writeUint16(e.length),f.__(e,(t=>{o.writeUint16(t.length),o.writeBuffer(t)}))),r.length&&(o.writeUint8(162),o.writeUint16(r.length),f.__(r,(t=>{o.writeUint16(t.length),o.writeBuffer(t)}))),n}function P(t){let e=A.py(t);if(e.length>=2){const t=[],r=[],i=[];if(n()(e).call(e,(e=>{const s=e[0]>>>1&63;32===s?t.push(e):33===s?r.push(e):34===s&&i.push(e)})),r.length&&i.length)return S(t,r,i)}}function M(t){let e=A.py(t);if(e.length>=2){const t=[],r=[],i=[];if(n()(e).call(e,(e=>{const s=e[0]>>>1&63;32===s?t.push(e):33===s?r.push(e):34===s&&i.push(e)})),r.length&&i.length){const e=[r[0],i[0]];return t.length&&e.unshift(t[0]),A.nW(e,0)}}}function C(t,e=!1){let r,i=!1,a=A.py(t);if(a.length){const t=[],s=[],o=[];n()(a).call(a,(e=>{const r=e[0]>>>1&63;32===r?t.push(e):33===r?s.push(e):34===r&&o.push(e),19!==r&&20!==r&&21!==r||(i=!0)})),s.length&&o.length?(r=S(t,s,o),a=c()(a).call(a,(t=>{const r=t[0]>>>1&63;return(e||32!==r&&33!==r&&34!==r)&&35!==r}))):a=c()(a).call(a,(t=>35!=(t[0]>>>1&63)))}const o=s()(a).call(a,((t,e)=>t+I+1+e.length),0),l=(0,b.sY)(o),h=(0,y.s3)(l,o);return A.S9(a,I,h),{bufferPointer:l,length:o,extradata:r,key:i}}function R(t,e){var r;let i=h()(r=A.py(t)).call(r,A.py(e));if(i.length){let t=[],e=[],r=[],a=[];return n()(i).call(i,(i=>{const s=i[0]>>>1&63;32===s?t.push(i):33===s?e.push(i):34===s?r.push(i):35!==s&&a.push(i)})),function(t,e,r,i){const a=[A.Le(t,0),A.Le(e,0),A.Le(r,0),A.Le(i,2)];let n=s()(a).call(a,((t,e)=>t+e),0);const o=(0,b.sY)(n+7);let c=o;return k.w8((c+=1,c-1),0),k.w8((c+=1,c-1),0),k.w8((c+=1,c-1),0),k.w8((c+=1,c-1),1),k.w8((c+=1,c-1),70),k.w8((c+=1,c-1),1),k.w8((c+=1,c-1),80),t.length&&(A.nW(t,0,(0,y.s3)(c,a[0])),c+=a[0]),e.length&&(A.nW(e,0,(0,y.s3)(c,a[1])),c+=a[1]),r.length&&(A.nW(r,0,(0,y.s3)(c,a[2])),c+=a[2]),i.length&&A.nW(i,2,(0,y.s3)(c,a[3])),{bufferPointer:o,length:n+7}}(t,e,r,a)}}function E(t,e){let r;if(!e&&t.sideData[1]&&(e=t.sideData[1]),e&&A.Bs(e))f.__(A.py(e),(t=>{if(33==(t[0]>>>1&63))return r=t,!1}));else if(e&&e.length>=6){const{spss:t}=function(t){const e=new v.A(t,!0);e.skip(22);let r=[],i=[],s=[];const a=e.readUint8();for(let t=0;t<a;t++){const t=63&e.readUint8(),a=e.readUint16(),n=[];for(let t=0;t<a;t++){const t=e.readUint16();n.push(e.readBuffer(t))}32===t?r=n:33===t?i=n:34===t&&(s=n)}return{vpss:r,spss:i,ppss:s}}(e);t.length&&(r=t[0])}if(r){const{profile:e,level:i,width:s,height:a,video_delay:n,chroma_format_idc:o,bit_depth_luma_minus8:c}=B(r);switch(t.codecpar.profile=e,t.codecpar.level=i,t.codecpar.width=s,t.codecpar.height=a,t.codecpar.videoDelay=n,c){case 0:t.codecpar.format=3===o?5:2===o?4:0;break;case 2:t.codecpar.format=3===o?68:2===o?64:62}}}function D(t,e=4){if(64&p.f[15](t+36)){let e=A.py((0,y.s3)(p.f[20](t+24),p.f[15](t+28)));return d()(e).call(e,(t=>{const e=t[0]>>>1&63;return 20===e||19===e}))}{const r=p.f[15](t+28);let i=0;for(;i<r-e;){const r=w.r8(p.f[20](t+24)+(i+e))>>>1&63;if(20===r||19===r)return!0;i+=4===e?w.Sg(p.f[20](t+24)+i):3===e?w.ht(p.f[20](t+24)+i):2===e?w.yd(p.f[20](t+24)+i):w.r8(p.f[20](t+24)+i),i+=e}return!1}}function B(t){if(!t||t.length<3)return;let e=0;0===t[0]&&0===t[1]&&0===t[2]&&1===t[3]&&(e=4);let r=0,i=0,s=0,a=0,n=0,o=0,c=1,l=0,h=0,u=0,d=0;const p=A.BN(t.subarray(e)),f=new g.A(p.length);f.appendBuffer(p),f.readU1(),f.readU(6),f.readU(6),f.readU(3),f.readU(4);const m=f.readU(3);f.readU1();let v=0;if(m<=6){l=f.readU(2),h=f.readU1(),r=f.readU(5),u=f.readU(32),d=f.readU(48),i=f.readU(8);const t=new Array(6),e=new Array(6);for(let r=0;r<m;r++)t[r]=f.readU1(),e[r]=f.readU1();if(m>0)for(let t=m;t<8;t++)f.readU(2);for(let r=0;r<m;r++)t[r]&&(f.readU(2),f.readU(1),f.readU(5),f.readU(32),f.readU(1),f.readU(1),f.readU(1),f.readU(1),f.readU(44)),e[r]&&f.readU(8);x.xb(f),c=x.xb(f),3===c&&(v=f.readU(1)),s=x.xb(f),a=x.xb(f);let p=0,g=0,y=0,A=0;f.readU1()&&(p=x.xb(f),g=x.xb(f),y=x.xb(f),A=x.xb(f)),n=x.xb(f),o=x.xb(f);let b=2,w=2;0===c?b=w=0:2===c?(b=2,w=1):3===c&&(b=w=1),s-=b*(1<<n+1)*(p+g),a-=w*(1<<n+1)*(y+A)}const y=x.xb(f)+4;let b=0;for(let t=f.readU1()?0:m;t<m+1;t++)x.xb(f),b=Math.max(b,Math.min(x.xb(f),T)),x.xb(f);const w=x.xb(f)+3,k=x.xb(f),_=x.xb(f)+2,I=x.xb(f),S=w+k,P=w-1,M=s+(1<<S)-1>>S,C=a+(1<<S)-1>>S;return{profile:r,level:i,width:s,height:a,chroma_format_idc:c,bit_depth_luma_minus8:n,bit_depth_chroma_minus8:o,general_profile_space:l,general_tier_flag:h,general_profile_compatibility_flags:u,constraint_flags:d,separate_colour_plane_flag:v,log2_min_cb_size:w,log2_diff_max_min_coding_block_size:k,log2_min_tb_size:_,log2_diff_max_min_transform_block_size:I,log2_max_trafo_size:I+_,log2_ctb_size:S,log2_min_pu_size:P,ctb_width:M,ctb_height:C,ctb_size:M*C,min_cb_width:s>>w,min_cb_height:a>>w,min_tb_width:s>>_,min_tb_height:a>>_,min_pu_width:s>>P,min_pu_height:a>>P,log2_max_poc_lsb:y,video_delay:b}}function L(t){if(!t||t.length<3)return;let e=0;0===t[0]&&0===t[1]&&0===t[2]&&1===t[3]&&(e=4);const r=A.BN(t.subarray(e)),i=new g.A(r.length);return i.appendBuffer(r),{pps_pic_parameter_set_id:x.xb(i),pps_seq_parameter_set_id:x.xb(i),dependent_slice_segment_flag:i.readU1(),output_flag_present_flag:i.readU1(),num_extra_slice_header_bits:i.readU(3)}}},64093:(t,e,r)=>{"use strict";r.d(e,{Au:()=>y,He:()=>A,XC:()=>b,Y2:()=>m,hG:()=>v,oz:()=>g});var i=r(77231);const s=[44100,48e3,32e3,0],a=[22050,24e3,16e3,0],n=[11025,12e3,8e3,0],o=[0,1152,1152,384],c=[0,576,1152,384],l=[0,576,1152,384],h=[0,32,64,96,128,160,192,224,256,288,320,352,384,416,448,-1],u=[0,32,48,56,64,80,96,112,128,160,192,224,256,320,384,-1],d=[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],p=[0,32,48,56,64,80,96,112,128,144,160,176,192,224,256,-1],f=[0,8,16,24,32,40,48,56,64,80,96,112,128,144,160,-1];function m(t,e){switch(t){case 0:return n[e];case 2:return a[e];case 3:return s[e]}return i.N_}function v(t,e){switch(t){case 0:return l[e];case 2:return c[e];case 3:return o[e]}return i.N_}function g(t,e,r){switch(e){case 1:switch(t){case 0:case 2:return f[r];case 3:return d[r]}break;case 2:switch(t){case 0:case 2:return f[r];case 3:return u[r]}case 3:switch(t){case 0:case 2:return p[r];case 3:return h[r]}}return i.N_}function y(t){switch(t){case 1:return 34;case 2:return 33;case 3:return 32}return i.N_}const A={32:"Layer1",33:"Layer2",34:"Layer3"};function b(t,e){if(e&&e.length>=4){const r=e[1]>>>3&3,i=(6&e[1])>>1,s=(12&e[2])>>>2,a=3&~(e[3]>>>6)?2:1,n=y(i),o=m(r,s);t.codecpar.profile=n,t.codecpar.sampleRate=o,t.codecpar.chLayout.nbChannels=a}}},97077:(t,e,r)=>{"use strict";r.d(e,{Ui:()=>a,XC:()=>s});var i=r(37246);function s(t,e){if(!e&&t.sideData[1]&&(e=t.sideData[1]),e&&e.length>=6){const r=a(e);t.codecpar.profile=r.profile,t.codecpar.level=r.level}}function a(t){const e=new i.A(t.length);return e.appendBuffer(t.subarray(4)),{profile:e.readU(8),level:e.readU(8),bitDepth:e.readU(4),chromaSubsampling:e.readU(3),fullRangeFlag:e.readU1(),colorPrimaries:e.readU(8),colorTrc:e.readU(8),colorSpace:e.readU(8)}}},82014:(t,e,r)=>{"use strict";r.d(e,{Ui:()=>n,XC:()=>a,wN:()=>s}),r(9599);var i=r(37246);r(77231),r(97317),r(44328),r(729);const s={0:"Profile0",1:"Profile1",2:"Profile2",3:"Profile3"};function a(t,e){if(!e&&t.sideData[1]&&(e=t.sideData[1]),e&&e.length>=6){const r=n(e);t.codecpar.profile=r.profile,t.codecpar.level=r.level}}function n(t){const e=new i.A(t.length);return e.appendBuffer(t),{profile:e.readU(8),level:e.readU(8),bitDepth:e.readU(4),chromaSubsampling:e.readU(3),fullRangeFlag:e.readU1(),colorPrimaries:e.readU(8),colorTrc:e.readU(8),colorSpace:e.readU(8)}}},59166:(t,e,r)=>{"use strict";r.d(e,{KD:()=>F,S1:()=>E,Ui:()=>O,XC:()=>U,kM:()=>L,oT:()=>B,sL:()=>D,wf:()=>$});var i=r(5496),s=r.n(i),a=r(73363),n=r.n(a),o=r(86226),c=r.n(o),l=r(96319),h=r.n(l),u=r(11393),d=r.n(u),p=r(31721),f=r.n(p),m=r(54810),v=r.n(m),g=r(63939),y=r(72739),A=r(729),b=r(31865),x=r(37246),w=r(14686),k=r(60264),T=r(37837),_=r(23991),I=r(83314),S=r(39381),P=r(82774);const M=3;function C(t){const e=t.readU(9),r=t.readU(3),i=t.readU(2),s=t.readU(2),a=t.readU(3);t.readU(5),t.readU(2);const n=t.readU(6),o=t.readU(7),c=t.readU(1),l=t.readU(8),h=t.readU(1),u=t.readU(1),d=[],p=[];if(n){for(let e=0;e<n-1;e++)d[e]=t.readU(8);d[n-1]=t.readU(6)}else t.readU(6);if(r>1){let e=0;for(let i=r-2;i>=0;--i)e|=t.readU(1)<<i;for(let e=r;e<=8&&r>1;++e)t.readU(1);for(let i=r-2;i>=0;--i)e&1<<i&&(p[i]=t.readU(8))}const f=t.readU(8),m=[];if(f)for(let e=0;e<f;e++)m.push(t.readU(8));return{olsIdx:e,numSublayers:r,bitDepthMinus8:a,chromaFormatIdc:s,constantFrameRate:i,generalProfileIdc:o,generalTierFlag:c,generalLevelIdc:l,ptlFrameOnlyConstraintFlag:h,ptlMultilayerEnabledFlag:u,generalConstraintInfo:d,sublayerLevelIdc:p,generalSubProfileIdc:m,maxPictureWidth:t.readU(16),maxPictureHeight:t.readU(16),avgFramerate:t.readU(16)}}function R(t,e,r){const i=e[0];let a;if(i){const t=$(i);let e=t.generalConstraintInfo;var o;e.length||(e=s()(o=new Array(12)).call(o,0));const r=new I.A;if(r.writeU(9,0),r.writeU(3,t.spsMaxSublayersMinus1+1),r.writeU(2,1),r.writeU(2,t.chromaFormatIdc),r.writeU(3,t.bitDepthMinus8),r.writeU(5,31),r.writeU(2,0),r.writeU(6,e.length),r.writeU(7,t.profile),r.writeU1(t.tierFlag),r.writeU(8,t.level),r.writeU1(t.ptlFrameOnlyConstraintFlag),r.writeU1(t.ptlMultilayerEnabledFlag),e.length){for(let t=0;t<e.length-1;t++)r.writeU(8,e[t]);r.writeU(6,e[e.length-1])}else r.writeU(6,63);if(t.spsMaxSublayersMinus1+1>1){let e=0;for(let r=t.spsMaxSublayersMinus1-1;r>=0;r--)e=e<<1|t.ptlSublayerLevelPresentFlag[r];r.writeU(t.spsMaxSublayersMinus1,e);for(let e=t.spsMaxSublayersMinus1+1;e<=8&&t.spsMaxSublayersMinus1>0;++e)r.writeU1(0);for(let e=t.spsMaxSublayersMinus1-1;e>=0;e--)t.ptlSublayerLevelPresentFlag[e]&&r.writeU(8,t.sublayerLevelIdc[e])}r.writeU(8,t.generalSubProfileIdc.length);for(let e=0;e<t.generalSubProfileIdc.length;e++)r.writeU(8,t.sublayerLevelIdc[e]);r.writeU(16,t.width),r.writeU(16,t.height),r.writeU(16,0),r.padding(),a=r.getBuffer().subarray(0,r.getPointer())}let c=2+(a?a.length:0);t.length&&(c+=3,c=n()(t).call(t,((t,e)=>t+2+e.length),c)),e.length&&(c+=3,c=n()(e).call(e,((t,e)=>t+2+e.length),c)),r.length&&(c+=3,c=n()(r).call(r,((t,e)=>t+2+e.length),c));const l=new Uint8Array(c),h=new A.A(l,!0);h.writeUint8(M<<1|(a?1:0)|248),a&&h.writeBuffer(a);let u=0;return t.length&&u++,e.length&&u++,r.length&&u++,h.writeUint8(u),t.length&&(h.writeUint8(142),h.writeUint16(t.length),y.__(t,(t=>{h.writeUint16(t.length),h.writeBuffer(t)}))),e.length&&(h.writeUint8(143),h.writeUint16(e.length),y.__(e,(t=>{h.writeUint16(t.length),h.writeBuffer(t)}))),r.length&&(h.writeUint8(144),h.writeUint16(r.length),y.__(r,(t=>{h.writeUint16(t.length),h.writeBuffer(t)}))),l}function E(t){let e=k.py(t);if(e.length>=2){const t=[],r=[],i=[];if(c()(e).call(e,(e=>{const s=e[1]>>>3&31;14===s?t.push(e):15===s?r.push(e):16===s&&i.push(e)})),r.length&&i.length)return R(t,r,i)}}function D(t){let e=k.py(t);if(e.length>=2){const t=[],r=[],i=[];if(c()(e).call(e,(e=>{const s=e[1]>>>3&31;14===s?t.push(e):15===s?r.push(e):16===s&&i.push(e)})),r.length&&i.length){const e=[r[0],i[0]];return t.length&&e.unshift(t[0]),k.nW(e,0)}}}function B(t,e=!1){let r,i=!1,s=k.py(t);if(s.length){const t=[],a=[],n=[];c()(s).call(s,(e=>{const r=e[1]>>>3&31;14===r?t.push(e):15===r?a.push(e):16===r&&n.push(e),8!==r&&7!==r&&9!==r&&10!==r||(i=!0)})),a.length&&n.length?(r=R(t,a,n),s=h()(s).call(s,(t=>{const r=t[1]>>>3&31;return(e||14!==r&&15!==r&&16!==r)&&20!==r}))):s=h()(s).call(s,(t=>20!=(t[1]>>>3&31)))}const a=n()(s).call(s,((t,e)=>t+M+1+e.length),0),o=(0,T.sY)(a),l=(0,w.s3)(o,a);return k.S9(s,M,l),{bufferPointer:o,length:a,extradata:r,key:i}}function L(t,e){var r;let i=d()(r=k.py(t)).call(r,k.py(e));if(i.length){let t=[],e=[],r=[],s=[];return c()(i).call(i,(i=>{const a=i[1]>>>3&31;14===a?t.push(i):15===a?e.push(i):16===a?r.push(i):20!==a&&s.push(i)})),function(t,e,r,i,s){const a=[k.Le(t,0),k.Le(e,0),k.Le(r,0),k.Le(i,2)];let o=n()(a).call(a,((t,e)=>t+e),0);const c=(0,T.sY)(o+7);let l=c;return P.w8((l+=1,l-1),0),P.w8((l+=1,l-1),0),P.w8((l+=1,l-1),0),P.w8((l+=1,l-1),1),P.w8((l+=1,l-1),0),P.w8((l+=1,l-1),161),P.w8((l+=1,l-1),(s?1:0)<<7|40),t.length&&(k.nW(t,0,(0,w.s3)(l,a[0])),l+=a[0]),e.length&&(k.nW(e,0,(0,w.s3)(l,a[1])),l+=a[1]),r.length&&(k.nW(r,0,(0,w.s3)(l,a[2])),l+=a[2]),i.length&&k.nW(i,2,(0,w.s3)(l,a[3])),{bufferPointer:c,length:o+7}}(t,e,r,s,!0)}}function U(t,e){let r;if(!e&&t.sideData[1]&&(e=t.sideData[1]),e&&k.Bs(e))y.__(k.py(e),(t=>{if(15==(t[1]>>>3&31))return r=t,!1}));else if(e&&e.length>=6){const{spss:t}=function(t){const e=new b.A(t,!0);if(1&e.readUint8()){const r=new x.A;r.appendBuffer(t.subarray(1)),C(r),e.skip(r.getPointer())}let r=[],i=[],s=[];const a=e.readUint8();for(let t=0;t<a;t++){const t=31&e.readUint8();let a=1;13!==t&&12!==t&&(a=e.readUint16());const n=[];for(let t=0;t<a;t++){const t=e.readUint16();n.push(e.readBuffer(t))}14===t?r=n:15===t?i=n:16===t&&(s=n)}return{vpss:r,spss:i,ppss:s}}(e);t.length&&(r=t[0])}r&&function(t,e){const{profile:r,level:i,width:s,height:a,videoDelay:n,chromaFormatIdc:o,bitDepthMinus8:c}=$(e);switch(t.codecpar.profile=r,t.codecpar.level=i,t.codecpar.width=s,t.codecpar.height=a,t.codecpar.videoDelay=n,c){case 0:t.codecpar.format=3===o?5:2===o?4:0;break;case 2:t.codecpar.format=3===o?68:2===o?64:62}}(t,r)}function F(t,e=4){if(64&g.f[15](t+36)){let e=k.py((0,w.s3)(g.f[20](t+24),g.f[15](t+28)));return f()(e).call(e,(t=>{const e=t[1]>>>3&31;return 8===e||7===e}))}{const r=g.f[15](t+28);let i=0;for(;i<r-e;){const r=S.r8(g.f[20](t+24)+(i+e+1))>>>3&31;if(8===r||7===r)return!0;i+=4===e?S.Sg(g.f[20](t+24)+i):3===e?S.ht(g.f[20](t+24)+i):2===e?S.yd(g.f[20](t+24)+i):S.r8(g.f[20](t+24)+i),i+=e}return!1}}function $(t){if(!t||t.length<3)return;let e=0;0===t[0]&&0===t[1]&&0===t[2]&&1===t[3]&&(e=4);let r=0,i=0,s=0,a=0,n=0,o=1,c=0,l=0,h=0;const u=[],d=[],p=[],f=[],m=k.BN(t.subarray(e)),g=new x.A(m.length);g.appendBuffer(m),g.readU1(),g.readU1(),g.readU(6),g.readU(5),g.readU(3),g.readU(8);const y=g.readU(3);o=g.readU(2);const A=g.readU(2);if(g.readU(1)){if(r=g.readU(7),c=g.readU(1),i=g.readU(8),l=g.readU(1),h=g.readU(1),g.readU(1)){for(let t=0;t<8;t++)u[t]=g.readU(8);u[8]=g.readU(7);const t=g.readU(8);g.readU(t)}g.skipPadding();for(let t=y-1;t>=0;t--)d[t]=g.readU(1);g.skipPadding();for(let t=y-1;t>=0;t--)d[t]&&(p[t]=g.readU(8));const t=g.readU(8);if(t)for(let e=0;e<t;e++)f[e]=g.readU(32)}g.readU1(),g.readU1()&&g.readU1();const b=s=_.xb(g),w=a=_.xb(g);if(g.readU1()&&(_.xb(g),_.xb(g),_.xb(g),_.xb(g)),g.readU1()){const t=_.xb(g),e=A+5,r=1<<e,i=b/(1<<e),s=w/(1<<e),a=Math.ceil(v()(i)),n=Math.ceil(v()(s));let o=0,c=0,l=0;t>0&&(l=g.readU1(),c=g.readU1());for(let e=0;t>0&&e<=t;e++)c&&0!=e||(e>0&&b>r&&g.readU(a),e>0&&w>r&&g.readU(n),e<t&&b>r&&g.readU(a),e<t&&w>r&&g.readU(n)),l||g.readU(2);if(o=_.xb(g)+1,g.readU(1)&&g.readU(1))for(let e=0;e<=t;e++)g.readU(o)}n=_.xb(g),g.readU(1),g.readU(1);const T=g.readU(4),I=g.readU(1);let S=0;I&&(S=_.xb(g));const P=[],M=g.readU(2);for(let t=0;t<8*M;t++)P[t]=g.readU(1);return{profile:r,level:i,width:s,height:a,videoDelay:y+1>2?2:y,chromaFormatIdc:o,bitDepthMinus8:n,generalProfileSpace:0,tierFlag:c,generalConstraintInfo:u,generalSubProfileIdc:f,ptlFrameOnlyConstraintFlag:l,ptlMultilayerEnabledFlag:h,spsMaxSublayersMinus1:y,ptlSublayerLevelPresentFlag:d,sublayerLevelIdc:p,sps_log2_max_pic_order_cnt_lsb_minus4:T,sps_poc_msb_cycle_flag:I,sps_poc_msb_cycle_len_minus1:S,sps_num_extra_ph_bytes:M,sps_extra_ph_bit_present_flag:P}}function O(t){k.Bs(t)&&(t=E(t));const e=new x.A;return e.appendBuffer(t),1&e.readU(8)?C(e):{}}},77231:(t,e,r)=>{"use strict";r.d(e,{Dh:()=>s,FQ:()=>d,H3:()=>c,KR:()=>h,N_:()=>a,SF:()=>n,WT:()=>l,f7:()=>v,go:()=>p,i0:()=>u,pu:()=>g,qs:()=>o,vh:()=>f,zg:()=>m});var i=r(9599);const s=-BigInt(1),a=-1,n=1e6,o=1e3,c=1e9,l=BigInt(2208988800)*BigInt(1e6),h=new i.P({den:n,num:1}),u=new i.P({den:o,num:1}),d=new i.P({den:c,num:1}),p=(new i.P({den:1,num:1}),2147483647),f=BigInt(0x8000000000000000),m=65535,v=4294967295,g=(BigInt(0x10000000000000000),8)},9705:(t,e,r)=>{"use strict";r.d(e,{E$:()=>i,LR:()=>s,LT:()=>l,NU:()=>u,OY:()=>c,UY:()=>a,gR:()=>n,lh:()=>o,nr:()=>d,r8:()=>h});const i=-1,s=-2,a=-3,n=-4,o=-5,c=-6,l=-7,h=-8,u=-9,d=-10},49032:(t,e,r)=>{"use strict";r.d(e,{A:()=>o});var i=r(18979),s=r.n(i),a=r(8628),n=r.n(a);async function o(t,e=-1){var r;let i=await t.peekString(8);if(/^FLV/.test(i))return 0;if(/^DKIF/.test(i))return 5;if(/^ftyp/.test(s()(i).call(i,4,8)))return 1;if(/^OggS/.test(i))return 4;if(/^ID3/.test(i))return 14;if(/^fLaC/.test(i))return 17;if(/^RIFF/.test(i)){var a;const e=s()(a=await t.peekString(12)).call(a,8);if(/^WAVE/.test(e))return 16;if(/^AVI/.test(e))return 10}else{if(/^ADIF/.test(i))return 15;if(440786851===await t.peekUint32())return 8;if(/^WEBVTT/.test(i))return 18;if(/^LIMA/.test(i))return await t.skip(4),await t.readUint16();{const e=await t.peekBuffer(2);switch(e[0]){case 86:if(!(224&~e[1]))return 15;break;case 255:if(240==(246&e[1]))return 15;if(n()(r=[242,244,246,250,252]).call(r,254&e[1]))return 14}}}return e}},364:(t,e,r)=>{"use strict";r.d(e,{A:()=>d});var i=r(64007),s=r.n(i),a=r(62751),n=r(92647),o=r(95335),c=r(50011),l=r(8507),h=r(72739);const u=["php","asp","aspx","jsp","do","pl"];async function d(t,e="",r={}){let i,d="",p={url:t};if(/^rtsp/.test(t)||/^rtmp/.test(t)){/^rtsp/.test(t)?d="rtsp":/^rtmp/.test(t)&&(d="rtmp"),i=2;const e=l.qg(t).protocol.split("+")[1]||"wss";"wss"===e||"ws"===e?i=2:"webtransport"===e&&(i=3),p.url=p.url.replace(/^\S+:\/\//,e+"://"),"rtmp"===d&&(p.subProtocol=i,i=6)}else{var f;const p=l.qg(t).protocol;d=e||l.qg(t).file.split(".").pop(),d&&!h.zy(u,d)||!/^https?/.test(p)||(d=await async function(t,e={}){const r={method:"GET",headers:{},mode:"cors",cache:"default",referrerPolicy:"no-referrer-when-downgrade"};let i;e.headers&&o.__(e.headers,((t,e)=>{r.headers[e]=t})),e.credentials&&(r.credentials=e.credentials),e.referrerPolicy&&(r.referrerPolicy=e.referrerPolicy),"function"==typeof AbortController&&(i=new AbortController,r.signal=i.signal);const a=await fetch(t,r);if(a.ok&&a.status>=200&&a.status<=299){const t=a.body.getReader(),e=[];let r=0;for(;;){let i=await t.read();if(i.done)break;if(r+=i.value.length,e.push(i.value),r>=100)break}if(i&&i.abort(),e.length){const t=e.length>1?(0,n.A)(Uint8Array,e):e[0];if(t.length){const e=c.decode(t.subarray(0,100));if(/<\?xml/.test(e)){if(s()(e).call(e,"<MPD")>-1)return"mpd"}else if(/#EXTM3U/.test(e))return"m3u8"}}}return""}(t,r));let m=0;"wss"===p||"ws"===p?m=2:"webtransport"===p&&(m=3),i=null!==(f=a.$$[d])&&void 0!==f?f:m}return{type:i,ext:d,info:p}}},36204:(t,e,r)=>{"use strict";r.d(e,{t:()=>l});var i=r(63939),s=r(50932),a=r(56024),n=r(66788),o=r(14686),c=r(77231);function l(t,e=0){0===e&&(e=(0,a.FP)()),s.M[15](e+152,t.sampleRate),s.M[15](e+76,t.numberOfFrames),s.M[15](e+292,t.numberOfChannels),s.M[15](e+80,function(t){switch(t){case"u8":return 0;case"s16":return 1;case"s32":return 2;case"f32":return 3;case"u8-planar":return 5;case"s16-planar":return 6;case"s32-planar":return 7;case"f32-planar":return 8;default:throw new Error("not support")}}(t.format)),s.M[17](e+104,t.timestamp<0?c.Dh:BigInt(Math.floor(t.timestamp))),s.M[17](e+312,BigInt(Math.floor(t.duration))),s.M[15](e+124,c.SF),s.M[15](e+120,1),(0,a.rh)(e);const r=(0,n.K0)(i.f[15](e+80))?i.f[15](e+292):1;for(let s=0;s<r;s++)t.copyTo((0,o.s3)(i.f[20](i.f[20](e+64)+4*s),i.f[15](e+32)),{planeIndex:s});return e}},89188:(t,e,r)=>{"use strict";r.d(e,{pt:()=>m});var i=r(63939),s=(r(9599),r(97317)),a=r(44328),n=r(77231),o=r(11473),c=r(95335),l=r(15980);const h=c.BE(l.GR),u=c.BE(l.OG),d=c.BE(l.SY),p=c.BE(l.re);function f(t){var e,r,s;const a={fullRange:!1,matrix:null!==(e=d[i.f[15](t+220)])&&void 0!==e?e:null,primaries:null!==(r=u[i.f[15](t+212)])&&void 0!==r?r:null,transfer:null!==(s=p[i.f[15](t+216)])&&void 0!==s?s:null};return 2===i.f[15](t+208)&&(a.fullRange=!0),a}function m(t,e,r={}){let l=i.f[15](t+72);const u=(0,s.I)(i.f[15](t+80)),d=[];for(let e=0;e<u.comp.length;e++)d.push({offset:i.f[20](t+4*e),stride:i.f[15](t+32+4*e)});const p=c.X$({codedWidth:i.f[15](t+68),codedHeight:l,timestamp:Number(e||(0,a.Mr)(i.f[17](t+104),t+120,n.KR)),format:(m=i.f[15](t+80),null!==(v=h[m])&&void 0!==v?v:null),duration:Number((0,a.Mr)(i.f[17](t+312),t+120,n.KR)),layout:d,colorSpace:f(t),visibleRect:{x:i.f[25](t+276),y:i.f[25](t+268),width:i.f[15](t+68)-(i.f[25](t+276)+i.f[25](t+280)),height:i.f[15](t+72)-(i.f[25](t+268)+i.f[25](t+272))}},r);var m,v;return new VideoFrame((0,o.Lv)(),p)}},22898:(t,e,r)=>{"use strict";r.d(e,{A:()=>o});var i=r(63939),s=(r(9599),r(44328)),a=r(14686),n=r(77231);function o(t){const e=1&i.f[15](t+36);return new EncodedAudioChunk({type:e?"key":"delta",duration:i.f[17](t+48)<0?void 0:Number((0,s.Mr)(i.f[17](t+48),t+72,n.KR)),timestamp:i.f[17](t+8)===n.Dh?n.N_:Number((0,s.Mr)(i.f[17](t+8),t+72,n.KR)),data:(0,a.s3)(i.f[20](t+24),i.f[15](t+28))})}},28917:(t,e,r)=>{"use strict";r.d(e,{A:()=>o});var i=r(63939),s=(r(9599),r(44328)),a=r(14686),n=r(77231);function o(t){const e=1&i.f[15](t+36);return new EncodedVideoChunk({type:e?"key":"delta",duration:i.f[17](t+48)<0?void 0:Number((0,s.Mr)(i.f[17](t+48),t+72,n.KR)),timestamp:i.f[17](t+8)===n.Dh?n.N_:Number((0,s.Mr)(i.f[17](t+8),t+72,n.KR)),data:(0,a.s3)(i.f[20](t+24),i.f[15](t+28))})}},94561:(t,e,r)=>{"use strict";r.d(e,{A:()=>n});var i=r(26429),s=r(76045),a=r(67672);async function n(t,e=!1){let r;return a.Yj(t)||a.sv(t)?(r=await(0,s.A)({source:t}),i.USE_THREADS&&e&&(r.threadModule=await(0,s.A)({source:r.buffer},{child:!0})),delete r.buffer):r=t,r}},15980:(t,e,r)=>{"use strict";r.d(e,{GR:()=>i,OG:()=>a,SY:()=>s,re:()=>n});const i={BGRA:28,BGRX:121,I420:0,I420P10:62,I420P12:123,I420A:33,I420AP10:87,I420AP12:229,I422:4,I422P10:64,I422P12:127,I422A:78,I422AP10:89,I422AP12:185,I444:5,I444P10:68,I444P12:131,I444A:79,I444AP10:91,I444AP12:187,NV12:23,RGBA:26,RGBX:119},s={bt709:1,smpte170m:6,bt470bg:5,"bt2020-ncl":9,rgb:0},a={bt709:1,bt470bg:5,smpte170m:6,bt2020:9,smpte432:12},n={bt709:1,"iec61966-2-1":13,smpte170m:6,linear:8,pq:16,hlg:18}},79756:(t,e,r)=>{"use strict";r.d(e,{A:()=>a});var i=r(63939),s=r(62751);function a(t){const e=i.f[15](t+4);let r=i.f[15](t+48),a=s.os[e];return 86018===e&&(a=`${a}.${r}`),a||"unknown"}},39365:(t,e,r)=>{"use strict";r.d(e,{C:()=>s});var i=r(86834);function s(t){return t?!i.A.chrome||i.A.checkVersion(i.A.majorVersion,"94",!0)?"prefer-hardware":"allow":!i.A.chrome||i.A.checkVersion(i.A.majorVersion,"94",!0)?"prefer-software":"deny"}},28875:(t,e,r)=>{"use strict";r.d(e,{A:()=>A});var i=r(18979),s=r.n(i),a=r(48079),n=r.n(a),o=r(63939),c=r(62751),l=r(21477),h=r(97077),u=r(82014),d=r(59166),p=r(67659),f=r(20525),m=r(77231),v=r(14686),g=r(90932),y=r(60264);function A(t,e){const r=o.f[15](t+4);let i=o.f[15](t+48),a=o.f[15](t+52);!e&&0!==o.f[20](t+12)&&o.f[15](t+16)&&(e=(0,v.s3)(o.f[20](t+12),o.f[15](t+16)));let A=c.os[r],b="";if(27===r)110===i&&(i=100),b=f.GP("%s.%02x00%02x",A,255&i,255&a);else if(173===r){let t=0,r=0,s=0,n=0;e&&(y.Bs(e)&&(e=p.S1(e)),e.length>13&&(t=e[1]>>>6&3,s=e[1]>>>5&1,r=e[2]|e[3]<<8|e[4]<<16|e[5]<<24,n=240&e[6]));const o={0:"",1:"A",2:"B",3:"C"};b=f.GP("%s.%s%d.%x.%s%d.%x",A,o[t],i,r,0===s?"L":"H",a,n)}else if(196===r){var x;let t=0;if((null===(x=e)||void 0===x?void 0:x.length)>13&&(t=1&e[5]),b=f.GP("%s.%d.%s%d",A,i,0===t?"L":"H",a),e){y.Bs(e)&&(e=d.S1(e));const t=d.Ui(e);if(t.generalConstraintInfo.length){var w;let e=t.generalConstraintInfo.length-1;for(;e>0&&0===t.generalConstraintInfo[e];)e--;const r=s()(w=t.generalConstraintInfo).call(w,0,e+1);r.length&&(b+=`.C${g.l(new Uint8Array(r),!1)}`)}var k;t.generalSubProfileIdc.length&&(b+=`.S${n()(k=t.generalSubProfileIdc).call(k,(t=>t.toString(16))).join("+")}`),b+=`.O${t.olsIdx}+${t.numSublayers}`}}else if(225===r)if(e){const t=l.Ui(e);b=f.GP("%s.%d.%02d%s.%02d.%d.%d%d%d",A,t.profile,t.level,t.tier?"H":"M",t.bitDepth,t.monochrome,t.chromaSubsamplingX,t.chromaSubsamplingY,t.chromaSamplePosition)}else b=f.GP("%s.%d.%02dM.08",A,i,a);else if(139===r)if(e){const t=h.Ui(e);b=f.GP("%s.%02d.%02d.%02d",A,t.profile,t.level,t.bitDepth)}else b=i!==m.N_&&a!==m.N_?f.GP("%s.%02d.%02d.08",A,i,a):A;else if(167===r)if(e){const t=u.Ui(e);b=f.GP("%s.%02d.%02d.%02d.%02d.%02d.%02d.%02d.%02d",A,t.profile,t.level,t.bitDepth,t.chromaSubsampling,t.colorPrimaries,t.colorTrc,t.colorSpace,t.fullRangeFlag)}else b=i!==m.N_&&a!==m.N_?f.GP("%s.%02d.%02d.08.00",A,i,a):f.GP("%s.%02d.%02d.08.00",A,0,40);else b=A||"unknown";return b}},67603:(t,e,r)=>{"use strict";r.d(e,{A:()=>n});var i=r(4919);let s=WebAssembly.validate((0,i.E_)("AGFzbQEAAAABBgFgAX8BfwISAQNlbnYGbWVtb3J5AgMBgIACAwIBAAcJAQVsb2FkOAAACgoBCAAgAP4SAAAL")),a=WebAssembly.validate((0,i.E_)("AGFzbQEAAAABBQFgAAF7AhIBA2VudgZtZW1vcnkCAwGAgAIDAgEACgoBCABBAP0ABAAL"));function n(t,e,r){let i=a?"-simd":s?"-atomic":"";switch(e){case"decoder":if(r>65536&&r<=65572)return`${t}/decode/pcm${i}.wasm`;if(r>=69632&&r<=69683)return`${t}/decode/adpcm${i}.wasm`;switch(r){case 2:return`${t}/decode/mpeg2video${i}.wasm`;case 27:return`${t}/decode/h264${i}.wasm`;case 30:return`${t}/decode/theora${i}.wasm`;case 86018:return`${t}/decode/aac${i}.wasm`;case 86019:return`${t}/decode/ac3${i}.wasm`;case 86056:return`${t}/decode/eac3${i}.wasm`;case 86020:return`${t}/decode/dca${i}.wasm`;case 86017:return`${t}/decode/mp3${i}.wasm`;case 173:return`${t}/decode/hevc${i}.wasm`;case 196:return`${t}/decode/vvc${i}.wasm`;case 12:return`${t}/decode/mpeg4${i}.wasm`;case 225:return`${t}/decode/av1${i}.wasm`;case 86051:return`${t}/decode/speex${i}.wasm`;case 86076:return`${t}/decode/opus${i}.wasm`;case 86028:return`${t}/decode/flac${i}.wasm`;case 86021:return`${t}/decode/vorbis${i}.wasm`;case 139:return`${t}/decode/vp8${i}.wasm`;case 167:return`${t}/decode/vp9${i}.wasm`;case 86022:return`${t}/decode/dvaudio${i}.wasm`;case 24:return`${t}/decode/dvvideo${i}.wasm`;case 3:return`${t}/decode/h261${i}.wasm`;case 4:case 20:case 19:return`${t}/decode/h263${i}.wasm`;case 14:case 15:case 16:case 5:case 6:case 68:case 69:return`${t}/decode/msmpeg4${i}.wasm`;case 86036:case 86057:case 86073:return`${t}/decode/ra${i}.wasm`;case 86023:case 86024:case 86052:case 86054:case 86053:return`${t}/decode/wma${i}.wasm`;case 17:case 18:case 71:return`${t}/decode/wmv${i}.wasm`;case 7:return`${t}/decode/mjpeg${i}.wasm`;case 61:return`${t}/decode/png${i}.wasm`;case 171:return`${t}/decode/webp${i}.wasm`;case 97:return`${t}/decode/gif${i}.wasm`;case 96:return`${t}/decode/tiff${i}.wasm`;case 78:return`${t}/decode/bmp${i}.wasm`;default:return null}case"encoder":if(r>65536&&r<=65572)return`${t}/encode/pcm${i}.wasm`;switch(r){case 27:return`${t}/encode/x264${i}.wasm`;case 30:return`${t}/encode/theora${i}.wasm`;case 86018:return`${t}/encode/aac${i}.wasm`;case 86019:return`${t}/encode/ac3${i}.wasm`;case 86056:return`${t}/encode/eac3${i}.wasm`;case 86020:return`${t}/encode/dca${i}.wasm`;case 86017:return`${t}/encode/mp3lame${i}.wasm`;case 173:return`${t}/encode/x265${i}.wasm`;case 12:return`${t}/encode/mpeg4${i}.wasm`;case 225:return`${t}/encode/av1${i}.wasm`;case 86051:return`${t}/encode/speex${i}.wasm`;case 86076:return`${t}/encode/opus${i}.wasm`;case 86028:return`${t}/encode/flac${i}.wasm`;case 86021:return`${t}/encode/vorbis${i}.wasm`;case 139:return`${t}/encode/vp8${i}.wasm`;case 167:return`${t}/encode/vp9${i}.wasm`;default:return null}case"resampler":return`${t}/resample/resample${i}.wasm`;case"scaler":return`${t}/scale/scale${i}.wasm`;case"stretchpitcher":return`${t}/stretchpitch/stretchpitch${i}.wasm`}}},93147:(t,e,r)=>{"use strict";r.d(e,{A:()=>o});var i=r(52730),s=r.n(i),a=r(63939),n=r(97317);function o(t){if(0!==a.f[15](t))return!1;const e=(0,n.I)(a.f[15](t+28));return e&&128&s()(e)}},24310:(t,e,r)=>{"use strict";r.d(e,{A:()=>a});var i=r(63939),s=r(97317);function a(t){if(0!==i.f[15](t))return!1;const e=(0,s.I)(i.f[15](t+28));return!(!e||e.comp[0].depth<=8||18!==i.f[15](t+92)&&16!==i.f[15](t+92))}},16041:(t,e,r)=>{"use strict";r.d(e,{A:()=>h});var i=r(49859),s=r(71426),a=r.n(s),n=(r(55833),r(40046)),o=r(73783),c=r(37837),l=r(56024);class h{constructor(t,e){(0,i.A)(this,"list",void 0),(0,i.A)(this,"mutex",void 0),this.list=t,this.mutex=e}alloc(){var t;let e=a()(t=this.list).call(t,(t=>-1===n.p_(t+320,-1,1,16,2)),20);return e||(e=(0,c.Gy)(328),(0,l._h)(e),n.M_(e+320,1,16,2),o.s2(this.mutex),this.list.push(e,20),o.Tl(this.mutex)),e}release(t){n.Hh(t+320,16,2)<=0||1===n.jb(t+320,1,16,2)&&((0,l.to)(t),n.M_(t+320,-1,16,2))}}},47442:(t,e,r)=>{"use strict";r.d(e,{A:()=>l});var i=r(49859),s=r(71426),a=r.n(s),n=(r(10278),r(40046)),o=r(73783),c=r(37837);class l{constructor(t,e){(0,i.A)(this,"list",void 0),(0,i.A)(this,"mutex",void 0),this.list=t,this.mutex=e}alloc(){var t;let e=a()(t=this.list).call(t,(t=>-1===n.p_(t+48,-1,1,16,2)),20);return e||(e=(0,c.Gy)(56),n.M_(e+48,1,16,2),o.s2(this.mutex),this.list.push(e,20),o.Tl(this.mutex)),e}release(t){n.Hh(t+48,16,2)<=0||1===n.jb(t+48,1,16,2)&&n.M_(t+48,-1,16,2)}}},84290:(t,e,r)=>{"use strict";r.d(e,{A:()=>h});var i=r(49859),s=r(71426),a=r.n(s),n=r(40046),o=r(73783),c=r(37837),l=(r(47958),r(71517));class h{constructor(t,e){(0,i.A)(this,"list",void 0),(0,i.A)(this,"mutex",void 0),this.list=t,this.mutex=e}alloc(){var t;let e=a()(t=this.list).call(t,(t=>-1===n.p_(t+80,-1,1,16,2)),20);return e||(e=(0,c.Gy)(88),(0,l.Pd)(e),n.M_(e+80,1,16,2),o.s2(this.mutex),this.list.push(e,20),o.Tl(this.mutex)),e}release(t){n.Hh(t+80,16,2)<=0||1===n.jb(t+80,1,16,2)&&((0,l.Up)(t),n.M_(t+80,-1,16,2))}}},97317:(t,e,r)=>{"use strict";r.d(e,{I:()=>c});var i=r(74707),s=r.n(i),a=r(48079),n=r.n(a);const o=new(s());function c(t){var e;if(o.has(t))return o.get(t);const r=B[t];if(!r)return;const i={log2ChromaW:r[0],log2ChromaH:r[1],flags:r[2],comp:n()(e=r[3]).call(e,(t=>({plane:t[0],step:t[1],offset:t[2],shift:t[3],depth:t[4]})))};return o.set(t,i),i}const l=[[0,1,0,0,8],[1,1,0,0,8],[2,1,0,0,8]],h=[...l,[3,1,0,0,8]],u=[[0,2,0,0,9],[1,2,0,0,9],[2,2,0,0,9]],d=[...u,[3,2,0,0,9]],p=[[0,2,0,0,10],[1,2,0,0,10],[2,2,0,0,10]],f=[...p,[3,2,0,0,10]],m=[[0,2,0,0,12],[1,2,0,0,12],[2,2,0,0,12]],v=[...m,[3,2,0,0,12]],g=[[0,2,0,0,14],[1,2,0,0,14],[2,2,0,0,14]],y=[[0,2,0,0,16],[1,2,0,0,16],[2,2,0,0,16]],A=[...y,[3,2,0,0,16]],b=[[0,1,0,0,8],[1,2,0,0,8],[1,2,1,0,8]],x=[[0,1,0,0,8],[1,2,1,0,8],[1,2,0,0,8]],w=[[0,8,2,0,16],[0,8,4,0,16],[0,8,6,0,16],[0,8,0,0,16]],k=[[0,2,0,6,10],[1,4,0,6,10],[1,4,2,6,10]],T=[[0,2,0,4,12],[1,4,0,4,12],[1,4,2,4,12]],_=[[0,2,0,0,16],[1,4,0,0,16],[1,4,2,0,16]],I=[[0,8,0,0,16],[0,8,2,0,16],[0,8,4,0,16],[0,8,6,0,16]],S=[[0,8,4,0,16],[0,8,2,0,16],[0,8,0,0,16],[0,8,6,0,16]],P=[[2,2,0,0,9],[0,2,0,0,9],[1,2,0,0,9]],M=[[2,2,0,0,10],[0,2,0,0,10],[1,2,0,0,10]],C=[[2,2,0,0,12],[0,2,0,0,12],[1,2,0,0,12]],R=[[2,2,0,0,14],[0,2,0,0,14],[1,2,0,0,14]],E=[[2,2,0,0,16],[0,2,0,0,16],[1,2,0,0,16]],D=[[2,2,0,0,16],[0,2,0,0,16],[1,2,0,0,16],[3,2,0,0,16]],B={6:[2,2,16,l],0:[1,1,16,l],12:[1,1,16,l],4:[1,0,16,l],13:[1,0,16,l],5:[0,0,16,l],14:[0,0,16,l],23:[1,1,16,b],24:[1,1,16,x],188:[0,0,16,b],189:[0,0,16,x],59:[1,1,17,u],60:[1,1,16,u],69:[1,0,17,u],70:[1,0,16,u],65:[0,0,17,u],66:[0,0,16,u],61:[1,1,17,p],62:[1,1,16,p],63:[1,0,17,p],64:[1,0,16,p],67:[0,0,17,p],68:[0,0,16,p],122:[1,1,17,m],123:[1,1,16,m],126:[1,0,17,m],127:[1,0,16,m],130:[0,0,17,m],131:[0,0,16,m],124:[1,1,17,g],125:[1,1,16,g],128:[1,0,17,g],129:[1,0,16,g],132:[0,0,17,g],133:[0,0,16,g],46:[1,1,17,y],45:[1,1,16,y],48:[1,0,17,y],47:[1,0,16,y],50:[0,0,17,y],49:[0,0,16,y],33:[1,1,144,h],78:[1,0,144,h],79:[0,0,144,h],80:[1,1,145,d],81:[1,1,144,d],82:[1,0,145,d],83:[1,0,144,d],84:[0,0,145,d],85:[0,0,144,d],86:[1,1,145,f],87:[1,1,144,f],88:[1,0,145,f],89:[1,0,144,f],90:[0,0,145,f],91:[0,0,144,f],230:[1,1,145,v],229:[1,1,144,v],184:[1,0,145,v],185:[1,0,144,v],186:[0,0,145,v],187:[0,0,144,v],92:[1,1,145,A],93:[1,1,144,A],94:[1,0,145,A],95:[1,0,144,A],96:[0,0,145,A],97:[0,0,144,A],156:[0,0,129,w],155:[0,0,128,w],159:[1,1,17,k],158:[1,1,16,k],210:[1,1,17,T],209:[1,1,16,T],170:[1,1,17,_],169:[1,1,16,_],8:[0,0,0,[[0,1,0,0,8]]],29:[0,0,1,[[0,2,0,0,16]]],30:[0,0,0,[[0,2,0,0,16]]],56:[0,0,128,[[0,2,0,0,8],[0,2,1,0,8]]],109:[0,0,129,[[0,4,0,0,16],[0,4,2,0,16]]],110:[0,0,128,[[0,4,0,0,16],[0,4,2,0,16]]],26:[0,0,160,[[0,4,0,0,8],[0,4,1,0,8],[0,4,2,0,8],[0,4,3,0,8]]],25:[0,0,160,[[0,4,1,0,8],[0,4,2,0,8],[0,4,3,0,8],[0,4,0,0,8]]],104:[0,0,161,I],105:[0,0,160,I],28:[0,0,160,[[0,4,2,0,8],[0,4,1,0,8],[0,4,0,0,8],[0,4,3,0,8]]],27:[0,0,160,[[0,4,3,0,8],[0,4,2,0,8],[0,4,1,0,8],[0,4,0,0,8]]],106:[0,0,161,S],107:[0,0,160,S],2:[0,0,32,[[0,3,0,0,8],[0,3,1,0,8],[0,3,2,0,8]]],3:[0,0,32,[[0,3,2,0,8],[0,3,1,0,8],[0,3,0,0,8]]],119:[0,0,32,[[0,4,0,0,8],[0,4,1,0,8],[0,4,2,0,8]]],121:[0,0,32,[[0,4,2,0,8],[0,4,1,0,8],[0,4,0,0,8]]],71:[0,0,48,[[2,1,0,0,8],[0,1,0,0,8],[1,1,0,0,8]]],111:[0,0,176,[[2,1,0,0,8],[0,1,0,0,8],[1,1,0,0,8],[3,1,0,0,8]]],72:[0,0,49,P],73:[0,0,48,P],74:[0,0,49,M],75:[0,0,48,M],134:[0,0,49,C],135:[0,0,48,C],136:[0,0,49,R],137:[0,0,48,R],76:[0,0,49,E],77:[0,0,48,E],112:[0,0,177,D],113:[0,0,176,D]}},58055:(t,e,r)=>{"use strict";r.d(e,{J:()=>i});const i={0:{bits:8,planar:!1},1:{bits:16,planar:!1},2:{bits:32,planar:!1},10:{bits:64,planar:!1},3:{bits:32,planar:!1},4:{bits:64,planar:!1},5:{bits:8,planar:!0},6:{bits:16,planar:!0},7:{bits:32,planar:!0},11:{bits:64,planar:!0},8:{bits:32,planar:!0},9:{bits:64,planar:!0}}},62751:(t,e,r)=>{"use strict";r.d(e,{$$:()=>a,Eh:()=>m,HR:()=>s,IY:()=>b,Ki:()=>A,Ld:()=>l,Mb:()=>g,Sz:()=>u,Xp:()=>c,_R:()=>n,_m:()=>f,d8:()=>v,iW:()=>d,mX:()=>p,n1:()=>o,os:()=>i,qO:()=>h,u6:()=>y});const i={86017:"mp3",86018:"mp4a.40",86021:"vorbis",86028:"flac",86076:"opus",65542:"ulaw",65543:"alaw",86019:"ac-3",86056:"ec-3",86020:"dtsc",65541:"pcm-u8",65540:"pcm-s8",65536:"pcm-s16",65537:"pcm-s16be",65548:"pcm-s24",65549:"pcm-s24be",65544:"pcm-s32",65545:"pcm-s32be",65557:"pcm-f32",65556:"pcm-f32be",65559:"pcm-f64",65558:"pcm-f64be",225:"av01",27:"avc1",173:"hev1",196:"vvc1",139:"vp8",167:"vp09",12:"mp4v"},s={flv:0,mp4:1,m4s:1,mov:1,ts:2,mts:2,m2ts:2,ivf:5,opus:4,oggs:4,ogg:4,m3u8:2,m3u:2,mpd:1,mp3:14,mkv:8,mka:8,webm:9,aac:15,flac:17,wav:16,srt:19,vtt:18,ssa:20,ass:20,xml:21,ttml:21,h264:11,264:11,avc:11,h265:12,265:12,hevc:12,h266:13,266:13,vvc:13,mpeg:3,mpg:3,rtsp:6,rtmp:7,avi:10,avif:1,heic:1},a={m3u8:4,m3u:4,mpd:5},n={copy:0,h264:27,h261:3,h263:4,h263i:20,h263p:19,mjpeg:7,wmv1:17,wmv2:18,wmv3:71,avc:27,hevc:173,h265:173,vvc:196,h266:196,av1:225,vp9:167,vp8:139,mpeg4:12,theora:30,mpeg2video:2,rv10:5,rv20:6,rv30:68,rv40:69,png:61,bmp:78,webp:171,tiff:96,gif:97},o={copy:0,aac:86018,ac3:86019,eac3:86056,dts:86020,mp3:86017,opus:86076,flac:86028,speex:86051,vorbis:86021,pcm_alaw:65543,pcm_mulaw:65542,wmav1:86023,wmav2:86024,cook:86036,sipr:86057,ralf:86073,pcm_u8:65541,pcm_s16le:65536,pcm_s24le:65548,pcm_s32le:65544,pcm_s64le:65567,pcm_f32le:65557,pcm_f64le:65559},c={webvtt:94226,subrip:94225,ass:94230,ttml:94232,mov_text:94213,hdmv_pgs:94214,hdmv_text:94231,dvd:94208,dvb:94209,eia_608:94218},l={bin_data:98314},h={yuv420p:0,yuv422p:4,yuv444p:5,yuva420p:33,yuva422p:78,yuva444p:79,yuvj420p:12,yuvj422p:13,yuvj444p:14,yuv420p10le:62,yuv422p10le:64,yuv444p10le:68,yuva420p10le:87,yuva422p10le:89,yuva444p10le:91,yuv420p10be:61,yuv422p10be:63,yuv444p10be:67,yuva420p10be:86,yuva422p10be:88,yuva444p10be:90,rgba:26,rgb24:2,bgr24:3,gray:8},u={u8:0,"u8-planar":5,s16:1,"s16-planar":6,s32:2,"s32-planar":7,s64:10,"s64-planar":11,float:3,"float-planar":8,double:4,"double-planar":9},d={flv:0,isobmff:1,mp4:1,mov:1,ts:2,mpegts:2,mpeg:3,ivf:5,ogg:4,opus:4,m3u8:2,m3u:2,mpd:1,mp3:14,mkv:8,matroska:8,mka:8,webm:9,aac:15,flac:17,wav:16,raw_h264:11,raw_h265:12,raw_vvc:13,rtsp:6,rtmp:7,avi:10,h264:11,h265:12,h266:13},p={tv:1,pc:2},f={bt709:1,fcc:4,bt470bg:5,smpte170m:6,smpte240m:7,ycgco:8,gbr:0,bt2020nc:9},m={bt709:1,bt470m:4,bt470bg:5,smpte170m:6,smpte240m:7,smpte428:10,film:8,smpte431:11,smpte432:12,bt2020:9,"jedec-p22":22,ebu3213:22},v={bt709:1,gamma22:4,gamma28:5,smpte170m:6,smpte240m:7,srgb:13,xvycc:11,"bt2020-10":14,"bt2020-12":15,smpte2084:16,"arib-std-b67":18},g={Audio:1,Video:0,Subtitle:3,Attachment:4,Data:2},y={"Tile Grid":3,"Audio Element":1,"Mix Presentation":2},A={default:1,dub:2,original:4,comment:8,lyrics:16,karaoke:32,forced:64,"hearing impaired":128,"visual impaired":256,"clean effects":512,"attached pic":1024,"timed thumbnails":2048,captions:65536,descriptions:131072,metadata:262144,dependent:524288,"still image":1048576,thumbnail:8192},b={mono:4,stereo:3,2.1:11,"3.0":7,"3.0(back)":259,"4.0":263,quad:51,"quad(side)":1539,3.1:15,"5.0":55,"5.0(side)":1543,4.1:271,5.1:63,"5.1(side)":1551,"6.0":1799,"6.0(front)":1731,"3.1.2":20495,hexagonal:311,6.1:1807,"6.1(back)":319,"6.1(front)":1739,"7.0":1591,"7.0(front)":1735,7.1:1599,"7.1(wide)":255,"7.1(wide-side)":1743,"5.1.2":20543,octagonal:1847,cube:184371,"5.1.4":184383,"7.1.2":22079,"7.1.4":185919,"7.2.3":34359825983,"9.1.4":186111,hexadecagonal:6442710839,downmix:1610612736,22.2:2164663779327}},36981:(t,e,r)=>{"use strict";r.d(e,{r:()=>u});var i,s,a=r(49859),n=r(74707),o=r.n(n),c=r(61499),l=r(12085);class h{constructor(){(0,a.A)(this,"id",void 0),(0,a.A)(this,"name",void 0),(0,a.A)(this,"opaque",void 0)}}i=h.prototype,(s=new(o())).set("id",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),s.set("name",{0:4,1:0,2:0,3:1,4:16,5:0,6:0,7:4,8:0}),s.set("opaque",{0:1,1:1,2:1,3:0,4:0,5:0,6:0,7:20,8:0}),(0,l.A)(i,c.Og,!0),(0,l.A)(i,c.dc,4),(0,l.A)(i,c.g7,24),(0,l.A)(i,c.JY,s);class u{constructor(){(0,a.A)(this,"order",void 0),(0,a.A)(this,"nbChannels",void 0),(0,a.A)(this,"u",void 0),(0,a.A)(this,"opaque",void 0)}}!function(t){var e=new(o());e.set("order",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),e.set("nbChannels",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:4,8:0}),e.set("u",{0:function(t){var e=new(o());return e.set("mask",{0:10,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),e.set("map",{0:h,1:1,2:1,3:0,4:0,5:0,6:0,7:0,8:0}),(0,l.A)(t,c.Og,!0),(0,l.A)(t,c.dc,8),(0,l.A)(t,c.g7,8),(0,l.A)(t,c.JY,e),t}({}),1:0,2:0,3:0,4:0,5:0,6:0,7:8,8:0}),e.set("opaque",{0:1,1:1,2:1,3:0,4:0,5:0,6:0,7:16,8:0}),(0,l.A)(t,c.Og,!0),(0,l.A)(t,c.dc,8),(0,l.A)(t,c.g7,24),(0,l.A)(t,c.JY,e)}(u.prototype)},50288:(t,e,r)=>{"use strict";r.d(e,{BU:()=>d});var i,s,a=r(49859),n=r(74707),o=r.n(n),c=r(61499),l=r(12085),h=r(73783);r(37837);class u{constructor(){(0,a.A)(this,"data",0),(0,a.A)(this,"size",0),(0,a.A)(this,"refcount",0),(0,a.A)(this,"free",0),(0,a.A)(this,"opaque",0),(0,a.A)(this,"flags",0),(0,a.A)(this,"flagsInternal",0)}}i=u.prototype,(s=new(o())).set("data",{0:2,1:1,2:1,3:0,4:0,5:0,6:0,7:0,8:0}),s.set("size",{0:25,1:0,2:0,3:0,4:0,5:0,6:0,7:4,8:0}),s.set("refcount",{0:9,1:0,2:0,3:0,4:0,5:0,6:0,7:8,8:0}),s.set("free",{0:1,1:1,2:1,3:0,4:0,5:0,6:0,7:12,8:0}),s.set("opaque",{0:1,1:1,2:1,3:0,4:0,5:0,6:0,7:16,8:0}),s.set("flags",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:20,8:0}),s.set("flagsInternal",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:24,8:0}),(0,l.A)(i,c.Og,!0),(0,l.A)(i,c.dc,4),(0,l.A)(i,c.g7,28),(0,l.A)(i,c.JY,s);class d{constructor(){(0,a.A)(this,"buffer",0),(0,a.A)(this,"data",0),(0,a.A)(this,"size",0)}}!function(t){var e=new(o());e.set("buffer",{0:u,1:1,2:1,3:0,4:0,5:0,6:0,7:0,8:0}),e.set("data",{0:2,1:1,2:1,3:0,4:0,5:0,6:0,7:4,8:0}),e.set("size",{0:25,1:0,2:0,3:0,4:0,5:0,6:0,7:8,8:0}),(0,l.A)(t,c.Og,!0),(0,l.A)(t,c.dc,4),(0,l.A)(t,c.g7,12),(0,l.A)(t,c.JY,e)}(d.prototype);class p{constructor(){(0,a.A)(this,"mutex",void 0),(0,a.A)(this,"pool",0),(0,a.A)(this,"refcount",0),(0,a.A)(this,"size",0),(0,a.A)(this,"opaque",0),(0,a.A)(this,"alloc",0),(0,a.A)(this,"alloc2",0),(0,a.A)(this,"poolFree",0)}}!function(t){var e=new(o());e.set("mutex",{0:h.eu,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),e.set("pool",{get 0(){return f},1:1,2:1,3:0,4:0,5:0,6:0,7:4,8:0}),e.set("refcount",{0:9,1:0,2:0,3:0,4:0,5:0,6:0,7:8,8:0}),e.set("size",{0:25,1:0,2:0,3:0,4:0,5:0,6:0,7:12,8:0}),e.set("opaque",{0:1,1:1,2:1,3:0,4:0,5:0,6:0,7:16,8:0}),e.set("alloc",{0:1,1:1,2:1,3:0,4:0,5:0,6:0,7:20,8:0}),e.set("alloc2",{0:1,1:1,2:1,3:0,4:0,5:0,6:0,7:24,8:0}),e.set("poolFree",{0:1,1:1,2:1,3:0,4:0,5:0,6:0,7:28,8:0}),(0,l.A)(t,c.Og,!0),(0,l.A)(t,c.dc,4),(0,l.A)(t,c.g7,32),(0,l.A)(t,c.JY,e)}(p.prototype);class f{constructor(){(0,a.A)(this,"data",0),(0,a.A)(this,"opaque",0),(0,a.A)(this,"free",0),(0,a.A)(this,"pool",0),(0,a.A)(this,"next",0),(0,a.A)(this,"buffer",void 0)}}!function(t){var e=new(o());e.set("data",{0:2,1:1,2:1,3:0,4:0,5:0,6:0,7:0,8:0}),e.set("opaque",{0:1,1:1,2:1,3:0,4:0,5:0,6:0,7:4,8:0}),e.set("free",{0:1,1:1,2:1,3:0,4:0,5:0,6:0,7:8,8:0}),e.set("pool",{0:p,1:1,2:1,3:0,4:0,5:0,6:0,7:12,8:0}),e.set("next",{0:f,1:1,2:1,3:0,4:0,5:0,6:0,7:16,8:0}),e.set("buffer",{0:u,1:0,2:0,3:0,4:0,5:0,6:0,7:20,8:0}),(0,l.A)(t,c.Og,!0),(0,l.A)(t,c.dc,4),(0,l.A)(t,c.g7,48),(0,l.A)(t,c.JY,e)}(f.prototype)},77162:(t,e,r)=>{"use strict";r.d(e,{A:()=>m});var i,s,a=r(49859),n=r(74707),o=r.n(n),c=r(61499),l=r(12085),h=r(47958),u=r(9599),d=r(36981),p=r(77231),f=r(71766);class m{constructor(){(0,a.A)(this,"codecType",-1),(0,a.A)(this,"codecId",0),(0,a.A)(this,"codecTag",0),(0,a.A)(this,"extradata",0),(0,a.A)(this,"extradataSize",0),(0,a.A)(this,"codedSideData",0),(0,a.A)(this,"nbCodedSideData",0),(0,a.A)(this,"format",p.N_),(0,a.A)(this,"bitrate",BigInt(0)),(0,a.A)(this,"bitsPerCodedSample",0),(0,a.A)(this,"bitsPerRawSample",0),(0,a.A)(this,"profile",p.N_),(0,a.A)(this,"level",p.N_),(0,a.A)(this,"width",0),(0,a.A)(this,"height",0),(0,a.A)(this,"sampleAspectRatio",new u.P({den:1,num:1})),(0,a.A)(this,"framerate",new u.P({den:1,num:0})),(0,a.A)(this,"fieldOrder",0),(0,a.A)(this,"colorRange",0),(0,a.A)(this,"colorPrimaries",2),(0,a.A)(this,"colorTrc",2),(0,a.A)(this,"colorSpace",2),(0,a.A)(this,"chromaLocation",0),(0,a.A)(this,"videoDelay",0),(0,a.A)(this,"chLayout",void 0),(0,a.A)(this,"sampleRate",p.N_),(0,a.A)(this,"blockAlign",0),(0,a.A)(this,"frameSize",0),(0,a.A)(this,"initialPadding",0),(0,a.A)(this,"trailingPadding",0),(0,a.A)(this,"seekPreroll",0),(0,a.A)(this,"flags",0)}destroy(){(0,f.dn)(this[c.o9]),this[c.o9]=0}}i=m.prototype,(s=new(o())).set("codecType",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),s.set("codecId",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:4,8:0}),s.set("codecTag",{0:8,1:0,2:0,3:0,4:0,5:0,6:0,7:8,8:0}),s.set("extradata",{0:2,1:1,2:1,3:0,4:0,5:0,6:0,7:12,8:0}),s.set("extradataSize",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:16,8:0}),s.set("codedSideData",{0:h.lg,1:1,2:1,3:0,4:0,5:0,6:0,7:20,8:0}),s.set("nbCodedSideData",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:24,8:0}),s.set("format",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:28,8:0}),s.set("bitrate",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:32,8:0}),s.set("bitsPerCodedSample",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:40,8:0}),s.set("bitsPerRawSample",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:44,8:0}),s.set("profile",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:48,8:0}),s.set("level",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:52,8:0}),s.set("width",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:56,8:0}),s.set("height",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:60,8:0}),s.set("sampleAspectRatio",{0:u.P,1:0,2:0,3:0,4:0,5:0,6:0,7:64,8:0}),s.set("framerate",{0:u.P,1:0,2:0,3:0,4:0,5:0,6:0,7:72,8:0}),s.set("fieldOrder",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:80,8:0}),s.set("colorRange",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:84,8:0}),s.set("colorPrimaries",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:88,8:0}),s.set("colorTrc",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:92,8:0}),s.set("colorSpace",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:96,8:0}),s.set("chromaLocation",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:100,8:0}),s.set("videoDelay",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:104,8:0}),s.set("chLayout",{0:d.r,1:0,2:0,3:0,4:0,5:0,6:0,7:112,8:0}),s.set("sampleRate",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:136,8:0}),s.set("blockAlign",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:140,8:0}),s.set("frameSize",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:144,8:0}),s.set("initialPadding",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:148,8:0}),s.set("trailingPadding",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:152,8:0}),s.set("seekPreroll",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:156,8:0}),s.set("flags",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:160,8:0}),(0,l.A)(i,c.Og,!0),(0,l.A)(i,c.dc,8),(0,l.A)(i,c.g7,168),(0,l.A)(i,c.JY,s)},56490:(t,e,r)=>{"use strict";r.d(e,{A:()=>u});var i,s,a=r(49859),n=r(74707),o=r.n(n),c=r(61499),l=r(12085);class h{constructor(){(0,a.A)(this,"key",0),(0,a.A)(this,"value",0)}}i=h.prototype,(s=new(o())).set("key",{0:1,1:1,2:1,3:0,4:0,5:0,6:0,7:0,8:0}),s.set("value",{0:1,1:1,2:1,3:0,4:0,5:0,6:0,7:4,8:0}),(0,l.A)(i,c.Og,!0),(0,l.A)(i,c.dc,4),(0,l.A)(i,c.g7,8),(0,l.A)(i,c.JY,s);class u{constructor(){(0,a.A)(this,"count",0),(0,a.A)(this,"elems",0)}}!function(t){var e=new(o());e.set("count",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),e.set("elems",{0:h,1:1,2:1,3:0,4:0,5:0,6:0,7:4,8:0}),(0,l.A)(t,c.Og,!0),(0,l.A)(t,c.dc,4),(0,l.A)(t,c.g7,8),(0,l.A)(t,c.JY,e)}(u.prototype)},55833:(t,e,r)=>{"use strict";var i,s,a=r(49859),n=r(74707),o=r.n(n),c=r(5496),l=r.n(c),h=r(61499),u=r(12085),d=r(56490),p=r(50288),f=r(9599),m=r(94300),v=r(36981),g=r(77231),y=r(56024);class A{constructor(){(0,a.A)(this,"type",0),(0,a.A)(this,"data",0),(0,a.A)(this,"size",0),(0,a.A)(this,"metadata",0),(0,a.A)(this,"buf",0)}}i=A.prototype,(s=new(o())).set("type",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),s.set("data",{0:2,1:1,2:1,3:0,4:0,5:0,6:0,7:4,8:0}),s.set("size",{0:25,1:0,2:0,3:0,4:0,5:0,6:0,7:8,8:0}),s.set("metadata",{0:d.A,1:1,2:1,3:0,4:0,5:0,6:0,7:12,8:0}),s.set("buf",{0:p.BU,1:1,2:1,3:0,4:0,5:0,6:0,7:16,8:0}),(0,u.A)(i,h.Og,!0),(0,u.A)(i,h.dc,4),(0,u.A)(i,h.g7,20),(0,u.A)(i,h.JY,s),function(t){var e=new(o());e.set("displayPrimaries",{0:f.P,1:0,2:0,3:1,4:6,5:0,6:0,7:0,8:0}),e.set("whitePoint",{0:f.P,1:0,2:0,3:1,4:2,5:0,6:0,7:48,8:0}),e.set("minLuminance",{0:f.P,1:0,2:0,3:0,4:0,5:0,6:0,7:64,8:0}),e.set("maxLuminance",{0:f.P,1:0,2:0,3:0,4:0,5:0,6:0,7:72,8:0}),e.set("hasPrimaries",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:80,8:0}),e.set("hasLuminance",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:84,8:0}),(0,u.A)(t,h.Og,!0),(0,u.A)(t,h.dc,4),(0,u.A)(t,h.g7,88),(0,u.A)(t,h.JY,e)}(class{constructor(){(0,a.A)(this,"displayPrimaries",void 0),(0,a.A)(this,"whitePoint",void 0),(0,a.A)(this,"minLuminance",void 0),(0,a.A)(this,"maxLuminance",void 0),(0,a.A)(this,"hasPrimaries",void 0),(0,a.A)(this,"hasLuminance",void 0)}}.prototype),function(t){var e=new(o());e.set("maxCLL",{0:8,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),e.set("maxFALL",{0:8,1:0,2:0,3:0,4:0,5:0,6:0,7:4,8:0}),(0,u.A)(t,h.Og,!0),(0,u.A)(t,h.dc,4),(0,u.A)(t,h.g7,8),(0,u.A)(t,h.JY,e)}(class{constructor(){(0,a.A)(this,"maxCLL",void 0),(0,a.A)(this,"maxFALL",void 0)}}.prototype);class b{constructor(){var t,e,r;(0,a.A)(this,"data",l()(t=new Array(g.pu)).call(t,0,0,g.pu)),(0,a.A)(this,"linesize",l()(e=new Array(g.pu)).call(e,0,0,g.pu)),(0,a.A)(this,"extendedData",0),(0,a.A)(this,"width",g.N_),(0,a.A)(this,"height",g.N_),(0,a.A)(this,"nbSamples",g.N_),(0,a.A)(this,"format",g.N_),(0,a.A)(this,"keyFrame",0),(0,a.A)(this,"pictType",0),(0,a.A)(this,"sampleAspectRatio",new f.P({den:1,num:0})),(0,a.A)(this,"pts",g.Dh),(0,a.A)(this,"pktDts",g.Dh),(0,a.A)(this,"timeBase",void 0),(0,a.A)(this,"quality",g.N_),(0,a.A)(this,"opaque",0),(0,a.A)(this,"repeatPict",g.N_),(0,a.A)(this,"interlacedFrame",g.N_),(0,a.A)(this,"topFieldFirst",g.N_),(0,a.A)(this,"paletteHasChanged",g.N_),(0,a.A)(this,"sampleRate",g.N_),(0,a.A)(this,"buf",l()(r=new Array(g.pu)).call(r,0,0,g.pu)),(0,a.A)(this,"extendedBuf",0),(0,a.A)(this,"nbExtendedBuf",0),(0,a.A)(this,"sideData",0),(0,a.A)(this,"nbSideData",0),(0,a.A)(this,"flags",0),(0,a.A)(this,"colorRange",0),(0,a.A)(this,"colorPrimaries",2),(0,a.A)(this,"colorTrc",2),(0,a.A)(this,"colorSpace",2),(0,a.A)(this,"chromaLocation",0),(0,a.A)(this,"bestEffortTimestamp",g.Dh),(0,a.A)(this,"pktPos",g.Dh),(0,a.A)(this,"metadata",0),(0,a.A)(this,"decodeErrorFlags",0),(0,a.A)(this,"pktSize",g.N_),(0,a.A)(this,"hwFramesCtx",0),(0,a.A)(this,"opaqueRef",0),(0,a.A)(this,"cropTop",0),(0,a.A)(this,"cropBottom",0),(0,a.A)(this,"cropLeft",0),(0,a.A)(this,"cropRight",0),(0,a.A)(this,"privateRef",0),(0,a.A)(this,"chLayout",void 0),(0,a.A)(this,"duration",BigInt(0))}close(){(0,y.to)(this[h.o9]),(0,m.A)(this)}}!function(t){var e=new(o());e.set("data",{0:2,1:1,2:1,3:1,4:8,5:0,6:0,7:0,8:0}),e.set("linesize",{0:15,1:0,2:0,3:1,4:8,5:0,6:0,7:32,8:0}),e.set("extendedData",{0:2,1:1,2:2,3:0,4:0,5:0,6:0,7:64,8:0}),e.set("width",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:68,8:0}),e.set("height",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:72,8:0}),e.set("nbSamples",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:76,8:0}),e.set("format",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:80,8:0}),e.set("keyFrame",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:84,8:0}),e.set("pictType",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:88,8:0}),e.set("sampleAspectRatio",{0:f.P,1:0,2:0,3:0,4:0,5:0,6:0,7:92,8:0}),e.set("pts",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:104,8:0}),e.set("pktDts",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:112,8:0}),e.set("timeBase",{0:f.P,1:0,2:0,3:0,4:0,5:0,6:0,7:120,8:0}),e.set("quality",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:128,8:0}),e.set("opaque",{0:1,1:1,2:1,3:0,4:0,5:0,6:0,7:132,8:0}),e.set("repeatPict",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:136,8:0}),e.set("interlacedFrame",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:140,8:0}),e.set("topFieldFirst",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:144,8:0}),e.set("paletteHasChanged",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:148,8:0}),e.set("sampleRate",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:152,8:0}),e.set("buf",{0:p.BU,1:1,2:1,3:1,4:8,5:0,6:0,7:156,8:0}),e.set("extendedBuf",{0:p.BU,1:1,2:2,3:0,4:0,5:0,6:0,7:188,8:0}),e.set("nbExtendedBuf",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:192,8:0}),e.set("sideData",{0:A,1:1,2:2,3:0,4:0,5:0,6:0,7:196,8:0}),e.set("nbSideData",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:200,8:0}),e.set("flags",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:204,8:0}),e.set("colorRange",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:208,8:0}),e.set("colorPrimaries",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:212,8:0}),e.set("colorTrc",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:216,8:0}),e.set("colorSpace",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:220,8:0}),e.set("chromaLocation",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:224,8:0}),e.set("bestEffortTimestamp",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:232,8:0}),e.set("pktPos",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:240,8:0}),e.set("metadata",{0:d.A,1:1,2:1,3:0,4:0,5:0,6:0,7:248,8:0}),e.set("decodeErrorFlags",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:252,8:0}),e.set("pktSize",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:256,8:0}),e.set("hwFramesCtx",{0:p.BU,1:1,2:1,3:0,4:0,5:0,6:0,7:260,8:0}),e.set("opaqueRef",{0:p.BU,1:1,2:1,3:0,4:0,5:0,6:0,7:264,8:0}),e.set("cropTop",{0:25,1:0,2:0,3:0,4:0,5:0,6:0,7:268,8:0}),e.set("cropBottom",{0:25,1:0,2:0,3:0,4:0,5:0,6:0,7:272,8:0}),e.set("cropLeft",{0:25,1:0,2:0,3:0,4:0,5:0,6:0,7:276,8:0}),e.set("cropRight",{0:25,1:0,2:0,3:0,4:0,5:0,6:0,7:280,8:0}),e.set("privateRef",{0:p.BU,1:1,2:1,3:0,4:0,5:0,6:0,7:284,8:0}),e.set("chLayout",{0:v.r,1:0,2:0,3:0,4:0,5:0,6:0,7:288,8:0}),e.set("duration",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:312,8:0}),(0,u.A)(t,h.Og,!0),(0,u.A)(t,h.dc,8),(0,u.A)(t,h.g7,320),(0,u.A)(t,h.JY,e)}(b.prototype),function(t){var e=new(o());e.set("refCount",{0:16,1:0,2:0,3:0,4:0,5:0,6:0,7:320,8:0}),(0,u.A)(t,h.Og,!0),(0,u.A)(t,h.dc,8),(0,u.A)(t,h.g7,328),(0,u.A)(t,h.JY,e)}(class extends b{constructor(...t){super(...t),(0,a.A)(this,"refCount",void 0)}}.prototype)},47958:(t,e,r)=>{"use strict";r.d(e,{lg:()=>p});var i,s,a=r(49859),n=r(74707),o=r.n(n),c=r(61499),l=r(12085),h=r(50288),u=r(9599),d=r(77231);class p{constructor(){(0,a.A)(this,"data",0),(0,a.A)(this,"size",0),(0,a.A)(this,"type",-1)}}i=p.prototype,(s=new(o())).set("data",{0:2,1:1,2:1,3:0,4:0,5:0,6:0,7:0,8:0}),s.set("size",{0:25,1:0,2:0,3:0,4:0,5:0,6:0,7:4,8:0}),s.set("type",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:8,8:0}),(0,l.A)(i,c.Og,!0),(0,l.A)(i,c.dc,4),(0,l.A)(i,c.g7,12),(0,l.A)(i,c.JY,s),function(t){var e=new(o());e.set("wallclock",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),e.set("flags",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:8,8:0}),(0,l.A)(t,c.Og,!0),(0,l.A)(t,c.dc,8),(0,l.A)(t,c.g7,16),(0,l.A)(t,c.JY,e)}(class{constructor(){(0,a.A)(this,"wallclock",void 0),(0,a.A)(this,"flags",void 0)}}.prototype);class f{constructor(){(0,a.A)(this,"buf",0),(0,a.A)(this,"pts",d.Dh),(0,a.A)(this,"dts",d.Dh),(0,a.A)(this,"data",0),(0,a.A)(this,"size",0),(0,a.A)(this,"streamIndex",d.N_),(0,a.A)(this,"flags",0),(0,a.A)(this,"sideData",0),(0,a.A)(this,"sideDataElems",0),(0,a.A)(this,"duration",d.Dh),(0,a.A)(this,"pos",d.Dh),(0,a.A)(this,"opaque",0),(0,a.A)(this,"opaqueRef",0),(0,a.A)(this,"timeBase",new u.P({den:d.SF,num:1}))}}!function(t){var e=new(o());e.set("buf",{0:h.BU,1:1,2:1,3:0,4:0,5:0,6:0,7:0,8:0}),e.set("pts",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:8,8:0}),e.set("dts",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:16,8:0}),e.set("data",{0:2,1:1,2:1,3:0,4:0,5:0,6:0,7:24,8:0}),e.set("size",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:28,8:0}),e.set("streamIndex",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:32,8:0}),e.set("flags",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:36,8:0}),e.set("sideData",{0:p,1:1,2:1,3:0,4:0,5:0,6:0,7:40,8:0}),e.set("sideDataElems",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:44,8:0}),e.set("duration",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:48,8:0}),e.set("pos",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:56,8:0}),e.set("opaque",{0:1,1:1,2:1,3:0,4:0,5:0,6:0,7:64,8:0}),e.set("opaqueRef",{0:h.BU,1:1,2:1,3:0,4:0,5:0,6:0,7:68,8:0}),e.set("timeBase",{0:u.P,1:0,2:0,3:0,4:0,5:0,6:0,7:72,8:0}),(0,l.A)(t,c.Og,!0),(0,l.A)(t,c.dc,8),(0,l.A)(t,c.g7,80),(0,l.A)(t,c.JY,e)}(f.prototype),function(t){var e=new(o());e.set("refCount",{0:16,1:0,2:0,3:0,4:0,5:0,6:0,7:80,8:0}),(0,l.A)(t,c.Og,!0),(0,l.A)(t,c.dc,8),(0,l.A)(t,c.g7,88),(0,l.A)(t,c.JY,e)}(class extends f{constructor(...t){super(...t),(0,a.A)(this,"refCount",void 0)}}.prototype)},10278:(t,e,r)=>{"use strict";r.d(e,{A:()=>h});var i,s,a=r(49859),n=r(74707),o=r.n(n),c=r(61499),l=r(12085);class h{constructor(){(0,a.A)(this,"data",void 0),(0,a.A)(this,"linesize",void 0),(0,a.A)(this,"nbSamples",void 0),(0,a.A)(this,"maxnbSamples",void 0),(0,a.A)(this,"channels",void 0),(0,a.A)(this,"sampleRate",void 0),(0,a.A)(this,"format",void 0),(0,a.A)(this,"timestamp",void 0),(0,a.A)(this,"duration",void 0)}}i=h.prototype,(s=new(o())).set("data",{0:2,1:1,2:2,3:0,4:0,5:0,6:0,7:0,8:0}),s.set("linesize",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:4,8:0}),s.set("nbSamples",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:8,8:0}),s.set("maxnbSamples",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:12,8:0}),s.set("channels",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:16,8:0}),s.set("sampleRate",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:20,8:0}),s.set("format",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:24,8:0}),s.set("timestamp",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:32,8:0}),s.set("duration",{0:19,1:0,2:0,3:0,4:0,5:0,6:0,7:40,8:0}),(0,l.A)(i,c.Og,!0),(0,l.A)(i,c.dc,8),(0,l.A)(i,c.g7,48),(0,l.A)(i,c.JY,s),function(t){var e=new(o());e.set("refCount",{0:16,1:0,2:0,3:0,4:0,5:0,6:0,7:48,8:0}),(0,l.A)(t,c.Og,!0),(0,l.A)(t,c.dc,8),(0,l.A)(t,c.g7,56),(0,l.A)(t,c.JY,e)}(class extends h{constructor(...t){super(...t),(0,a.A)(this,"refCount",void 0)}}.prototype)},9599:(t,e,r)=>{"use strict";r.d(e,{P:()=>h});var i,s,a=r(49859),n=r(74707),o=r.n(n),c=r(61499),l=r(12085);class h{constructor(t){(0,a.A)(this,"num",1),(0,a.A)(this,"den",1),t&&(this.den=t.den,this.num=t.num)}}i=h.prototype,(s=new(o())).set("num",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),s.set("den",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:4,8:0}),(0,l.A)(i,c.Og,!0),(0,l.A)(i,c.dc,4),(0,l.A)(i,c.g7,8),(0,l.A)(i,c.JY,s)},11573:(t,e,r)=>{"use strict";r(54810)},37815:(t,e,r)=>{"use strict";r.d(e,{A6:()=>g,D$:()=>d,Q7:()=>m,VG:()=>p,aw:()=>u,us:()=>v});var i=r(14686),s=r(63939),a=r(50932),n=r(37837),o=r(40046),c=(r(50288),r(73783)),l=r(52699);const h=1;function u(t,e,r=0,i=0,s=0){const c=(0,n.Gy)(28);if(!c)return 0;const l=function(t,e,r,i=0,s=0,c=0){a.M[20](t,e),a.M[25](t+4,r),a.M[20](t+12,i),a.M[20](t+16,s),o.M_(t+8,1,9,2),a.M[15](t+20,c);const l=(0,n.Gy)(12);return l?(a.M[20](l,t),a.M[20](l+4,e),a.M[25](l+8,r),l):0}(c,t,e,r,i,s);return l||((0,n.Eb)(c),0)}function d(t){return u((0,n.sY)(t),t)}function p(t){const e=(0,n.Gy)(12);return(0,i.Mr)(e,t,12),o.WQ(s.f[20](t)+8,1,9,2),e}function f(t,e){const r=s.f[20](s.f[20](t));if(e?((0,i.Mr)(s.f[20](t),s.f[20](e),12),(0,n.aI)(e)):(0,n.aI)(t),1===o.jb(r+8,1,9,2)){const t=!(2&s.f[15](r+24));s.f[20](r+16)?y(s.f[20](r+16),s.f[20](r)):(0,n.Eb)(s.f[20](r)),t&&(0,n.Eb)(r)}}function m(t){t&&s.f[20](t)&&f(t,0)}function v(t,e){const r=s.f[20](t);if(!e)return m(t),0;if(r&&s.f[20](r+4)===s.f[20](e+4))return a.M[20](r+4,s.f[20](e+4)),a.M[25](r+8,s.f[25](e+8)),0;const i=p(e);return m(t),a.M[20](t,i),0}function g(t,e){if(!s.f[20](t)){const r=u((0,n.cz)(0,e),e);return a.M[20](t,r),a.M[15](s.f[20](r)+24,s.f[15](s.f[20](r)+24)|h),0}const r=s.f[20](t),c=s.f[20](r);if(s.f[25](r+8)===e)return 0;if(!(s.f[15](c+24)&h&&function(t){return 1&s.f[15](s.f[20](t)+20)?0:1===o.Hh(s.f[20](t)+8,9,2)?1:0}(r)&&s.f[20](r+4)===s.f[20](c))){let r=l.z(4);a.M[20](r,0);const n=g(r,e);return n<0?(l.t(4),n):((0,i.Mr)(s.f[20](s.f[20](r)+4),s.f[20](c),Math.min(e,s.f[25](c+4))),f(t,r),l.t(4),0)}const d=(0,n.cz)(s.f[20](c),e);return a.M[20](r+4,d),a.M[20](c,d),a.M[25](r+8,e),a.M[25](c+4,e),0}function y(t,e){const r=t,i=s.f[20](r+12);c.s2(i),a.M[20](r+16,s.f[20](i+4)),a.M[20](i+4,r),c.Tl(i),1===o.jb(i+8,1,9,2)&&function(t){!function(t){for(;s.f[20](t+4);){const e=s.f[20](t+4);a.M[20](t+4,s.f[20](e+16)),s.f[20](e+4)?y(s.f[20](e+4),s.f[20](e)):(0,n.Eb)(s.f[20](e)),(0,n.Eb)(e)}}(t),c.zr(t),(0,n.Eb)(t)}(i)}},73749:(t,e,r)=>{"use strict";r.d(e,{AO:()=>p,IH:()=>d,a5:()=>m});var i=r(64007),s=r.n(i),a=r(63939),n=r(50932),o=(r(56490),r(11473)),c=r(14686),l=r(37837),h=r(67672),u=r(62100);function d(t){p(a.f[20](t)),(0,l.aI)(t)}function p(t){if(t){for(;n.M[15](t,a.f[15](t)-1),a.f[15](t)+1;)(0,l.aI)(a.f[20](t+4)+8*a.f[15](t)),(0,l.aI)(a.f[20](t+4)+8*a.f[15](t)+4);(0,l.aI)(t+4)}}function f(t,e){let r=0;return t?(e&&(r=1+(e-a.f[20](t+4)>>3)),r>=a.f[15](t)?0:a.f[20](t+4)+8*r):0}function m(t,e,r,i=0){if(!t)throw new Error("m is nullptr");let l=0;if(64&i&&(l=function(t,e,r=0,i=0){if(!t)return 0;let n=r;if(!e)return 0;for(;n=f(t,n);){let t=(0,c.lH)(a.f[20](n));if(1&i&&(t.toLocaleLowerCase(),e.toLocaleLowerCase()),t===e||2&i&&0===s()(t).call(t,e))return n}}(t,e,0,i)),l){if(16&i)return 0;32&i&&(r=`${(0,c.lH)(a.f[20](l+4))},${r}`),o.s_.free(a.f[20](l+4)),n.M[20](l+4,o.s_.malloc(r.length+1)),(0,c.qW)(a.f[20](l+4),r,r.length)}else{h.Yj(r)||(r=(0,u.A)(r));let i=o.s_.realloc(a.f[20](t+4),8*(a.f[15](t)+1));n.M[20](t+4,i),n.M[20](a.f[20](t+4)+8*a.f[15](t),o.s_.malloc(e.length+1)),n.M[20](a.f[20](t+4)+8*a.f[15](t)+4,o.s_.malloc(r.length+1)),(0,c.qW)(a.f[20](a.f[20](t+4)+8*a.f[15](t)),e,e.length),(0,c.qW)(a.f[20](a.f[20](t+4)+8*a.f[15](t)+4),r,r.length),n.M[15](t,a.f[15](t)+1)}return 0}},56024:(t,e,r)=>{"use strict";r.d(e,{FP:()=>f,_h:()=>y,aH:()=>g,rh:()=>A,to:()=>b,xj:()=>m});var i,s=r(63939),a=r(50932),n=(r(36981),r(9599),r(55833),r(37837)),o=r(14686),c=r(77231),l=r(37815),h=r(73749),u=r(99991),d=r(66788),p=r(9705);function f(){const t=(0,n.Gy)(320);return y(t),t}function m(t){b(t),(0,n.Eb)(t)}function v(t){const e=s.f[20](t);(0,l.Q7)(e+16),(0,h.IH)(e+12),(0,n.aI)(t)}function g(t,e){for(let r=0;r<s.f[15](t+200);r++)if(s.f[15](s.f[20](s.f[20](t+196)+4*r))===e)return s.f[20](s.f[20](t+196)+4*r);return 0}function y(t){s.f[20](t+64)!==t&&(0,n.aI)(t+64),(0,u.bl)(t+288),(0,o.sO)(t,0,320),a.M[17](t+104,c.Dh),a.M[17](t+112,c.Dh),a.M[17](t+232,c.Dh),a.M[17](t+240,c.Dh),a.M[15](t+256,-1),a.M[15](t+84,1),a.M[15](t+92,0),a.M[15](t+96,1),a.M[15](t+80,-1),a.M[20](t+64,t),a.M[15](t+212,2),a.M[15](t+216,2),a.M[15](t+220,2),a.M[15](t+208,0),a.M[15](t+224,0),a.M[15](t+204,0)}function A(t,e){const r=(0,d.K0)(s.f[15](t+80)),i=s.f[15](t+292),o=r?i:1;let h=0;if(!s.f[15](t+32)){if(h=(0,d.f8)(s.f[15](t+80),i,s.f[15](t+76),e),h<0)return h;a.M[15](t+32,h)}if(o>c.pu){if(a.M[20](t+64,(0,n.sY)(4*o)),a.M[20](t+188,(0,n.sY)(4*o)),!s.f[20](t+188)||!s.f[20](t+64))return(0,n.aI)(t+64),(0,n.aI)(t+188),p.gR;a.M[15](t+192,o-c.pu)}else a.M[20](t+64,t);for(let e=0;e<Math.min(o,c.pu);e++){if(a.M[20](t+156+4*e,(0,l.D$)(s.f[15](t+32))),!s.f[20](t+156+4*e))return b(t),p.gR;a.M[20](s.f[20](t+64)+4*e,s.f[20](s.f[20](t+156+4*e)+4)),a.M[20](t+4*e,s.f[20](s.f[20](t+156+4*e)+4))}for(let e=0;e<o-c.pu;e++){if(a.M[20](s.f[20](t+188)+4*e,(0,l.D$)(s.f[15](t+32))),!s.f[20](s.f[20](t+188)+4*e))return b(t),p.gR;a.M[20](s.f[20](t+64)+4*(e+c.pu),s.f[20](s.f[20](s.f[20](t+188)+4*e)+4))}}function b(t){if(t){!function(t){!function(t,e){const r=s.f[15](e),i=s.f[20](t);for(let t=0;t<r;t++)v(i+4*t);a.M[15](e,0),(0,n.aI)(t)}(t+196,t+200)}(t);for(let e=0;e<8;e++)(0,l.Q7)(t+156+4*e);for(let e=0;e<s.f[15](t+192);e++)(0,l.Q7)(s.f[20](t+188)+4*e);(0,n.aI)(t+188),(0,h.IH)(t+248),(0,l.Q7)(t+260),(0,l.Q7)(t+264),(0,l.Q7)(t+284),y(t)}}r(97317),r(38156),function(t){t[t.UNIQUE=1]="UNIQUE"}(i||(i={}))},71517:(t,e,r)=>{"use strict";r.d(e,{$W:()=>m,E4:()=>v,Is:()=>y,NX:()=>P,NZ:()=>x,Ow:()=>g,Pd:()=>w,Qe:()=>b,Un:()=>u,Up:()=>I,Zx:()=>S,_5:()=>A,fQ:()=>f,iI:()=>h,rN:()=>_,rU:()=>d,sn:()=>p,zu:()=>k});var i=r(14686),s=r(63939),a=r(50932),n=(r(47958),r(37837)),o=r(77231),c=r(37815);const l=64;function h(t,e){return e?(0,i.JW)(s.f[20](t+24),s.f[15](t+28)):(0,i.s3)(s.f[20](t+24),s.f[15](t+28))}function u(t,e,r){const i=s.f[15](e),a=s.f[20](t);for(let t=0;t<i;t++)if(s.f[15](a+12*t+8)===r)return a+12*t;return 0}function d(t,e){return u(t+40,t+44,e)}function p(t,e,r){const i=s.f[15](e),a=s.f[20](t);for(let t=0;t<i;t++)if(s.f[15](a+12*t+8)===r)return!0;return!1}function f(t,e){return p(t+40,t+44,e)}function m(t,e,r,o,c){const l=s.f[15](e),h=s.f[20](t);for(let t=0;t<l;t++)if(s.f[15](h+12*t+8)===r)return(0,n.Eb)(s.f[20](h+12*t)),a.M[20](h+12*t,o),void a.M[25](h+12*t+4,c);const u=12*(l+1),d=(0,n.Gy)(u);if(l)for(let t=0;t<l;t++)(0,i.Mr)(d+12*t,h+12*t,12);const p=d+12*l;return a.M[20](p,o),a.M[15](p+8,r),a.M[25](p+4,c),h&&(0,n.Eb)(h),a.M[20](t,d),a.M[15](e,l+1),p}function v(t,e,r,s){const a=(0,n.sY)(s+l);return(0,i.sO)(a+s,0,l),m(t,e,r,a,s)}function g(t,e,r,i){m(t+40,t+44,e,r,i)}function y(t,e){let r=-1;for(let i=0;i<s.f[15](t+44);i++)if(s.f[15](s.f[20](t+40)+12*i+8)===e){r=i;break}if(r>-1)if(1===s.f[15](t+44))(0,n.Eb)(s.f[20](s.f[20](t+40))),(0,n.Eb)(s.f[20](t+40)),a.M[20](t+40,0),a.M[15](t+44,0);else{const e=12*(s.f[15](t+44)-1),o=(0,n.Gy)(e);for(let e=0;e<s.f[15](t+44);e++)e!==r?(0,i.Mr)(o+12*e,s.f[20](t+40)+12*e,12):(0,n.Eb)(s.f[20](s.f[20](t+40)+12*e));(0,n.Eb)(s.f[20](t+40)),a.M[20](t+40,o),a.M[15](t+44,s.f[15](t+44)-1)}}function A(){const t=(0,n.Gy)(80);return w(t),t}function b(t){I(t),(0,n.Eb)(t)}function x(t,e){const r=s.f[20](t),i=s.f[15](e);if(r){for(let t=0;t<i;t++)(0,n.Eb)(s.f[20](r+12*t));(0,n.aI)(t),a.M[15](e,0)}}function w(t){a.M[20](t+24,0),a.M[15](t+28,0),a.M[20](t+40,0),a.M[15](t+44,0),a.M[15](t+32,o.N_),a.M[17](t+56,o.Dh),a.M[17](t+48,o.Dh),a.M[15](t+36,0),a.M[17](t+16,o.Dh),a.M[17](t+8,o.Dh),a.M[15](t+76,o.SF),a.M[15](t+72,1),a.M[20](t,0)}function k(t,e){return a.M[15](t+32,s.f[15](e+32)),a.M[17](t+56,s.f[17](e+56)),a.M[17](t+48,s.f[17](e+48)),a.M[15](t+36,s.f[15](e+36)),a.M[17](t+16,s.f[17](e+16)),a.M[17](t+8,s.f[17](e+8)),a.M[20](t+64,s.f[20](e+64)),a.M[15](t+76,s.f[15](e+76)),a.M[15](t+72,s.f[15](e+72)),a.M[20](t+68,0),(0,c.us)(t+68,s.f[20](e+68)),function(t,e){if(x(t+40,t+44),s.f[15](e+44)){let r=12;a.M[20](t+40,(0,n.Gy)(r*s.f[15](e+44)));for(let r=0;r<s.f[15](e+44);r++)a.M[25](s.f[20](t+40)+12*r+4,s.f[25](s.f[20](e+40)+12*r+4)),a.M[15](s.f[20](t+40)+12*r+8,s.f[15](s.f[20](e+40)+12*r+8)),a.M[20](s.f[20](t+40)+12*r,(0,n.sY)(s.f[25](s.f[20](e+40)+12*r+4))),(0,i.Mr)(s.f[20](s.f[20](t+40)+12*r),s.f[20](s.f[20](e+40)+12*r),s.f[25](s.f[20](e+40)+12*r+4));a.M[15](t+44,s.f[15](e+44))}}(t,e),0}function T(t,e){return(0,c.A6)(t,e+l),(0,i.sO)(s.f[20](s.f[20](t)+4)+e,0,l),0}function _(t,e){return s.f[20](t)&&(0,c.Q7)(t),a.M[20](t,0),k(t,e),!s.f[20](e)&&s.f[15](e+28)?(T(t,s.f[15](e+28)),s.f[15](e+28)&&(0,i.Mr)(s.f[20](s.f[20](t)+4),s.f[20](e+24),s.f[15](e+28)),a.M[20](t+24,s.f[20](s.f[20](t)+4))):s.f[20](e)&&(a.M[20](t,(0,c.VG)(s.f[20](e))),a.M[20](t+24,s.f[20](e+24))),a.M[15](t+28,s.f[15](e+28)),0}function I(t){x(t+40,t+44),(0,c.Q7)(t+68),s.f[20](t)?(0,c.Q7)(t):s.f[20](t+24)&&(0,n.Eb)(s.f[20](t+24)),w(t)}function S(t,e){s.f[20](t)&&(0,c.Q7)(t),a.M[20](t,0),!s.f[20](e)&&s.f[15](e+28)?(T(t,s.f[15](e+28)),s.f[15](e+28)&&(0,i.Mr)(s.f[20](s.f[20](t)+4),s.f[20](e+24),s.f[15](e+28)),a.M[20](t+24,s.f[20](s.f[20](t)+4))):s.f[20](e)&&(a.M[20](t,(0,c.VG)(s.f[20](e))),a.M[20](t+24,s.f[20](e+24))),a.M[15](t+28,s.f[15](e+28))}function P(t,e,r){s.f[20](t)?(0,c.Q7)(t):s.f[20](t+24)&&(0,n.Eb)(s.f[20](t+24)),a.M[20](t,(0,c.aw)(e,r+l)),a.M[20](t+24,e),a.M[15](t+28,r)}},99991:(t,e,r)=>{"use strict";r.d(e,{ML:()=>h,bl:()=>l,xY:()=>u});var i=r(63939),s=r(50932),a=r(85103),n=r(37837),o=r(14686),c=r(9705);function l(t){2==i.f[15](t)&&(0,n.aI)(t+8),(0,o.sO)(t,0,24)}function h(t,e){return e?(s.M[15](t,1),s.M[15](t+4,(0,a.Xb)(e)),s.M[10](t+8,e),0):c.UY}function u(t,e){if(e<=0)throw new Error("invalid channels");const r=(0,n.Gy)(24*e);for(let t=0;t<e;t++)s.M[15](r+24*t,768);s.M[15](t,2),s.M[15](t+4,e),s.M[20](t+8,r)}},71766:(t,e,r)=>{"use strict";r.d(e,{Yi:()=>h,dn:()=>u});var i=r(14686),s=r(63939),a=r(50932),n=(r(36981),r(9599),r(37837)),o=r(99991),c=r(71517),l=r(77231);function h(t,e){a.M[15](t,s.f[15](e)),a.M[15](t+4,s.f[15](e+4)),a.M[8](t+8,s.f[8](e+8)),a.M[15](t+28,s.f[15](e+28)),a.M[17](t+32,s.f[17](e+32)),a.M[15](t+40,s.f[15](e+40)),a.M[15](t+44,s.f[15](e+44)),a.M[15](t+48,s.f[15](e+48)),a.M[15](t+52,s.f[15](e+52)),a.M[15](t+56,s.f[15](e+56)),a.M[15](t+60,s.f[15](e+60)),a.M[15](t+68,s.f[15](e+68)),a.M[15](t+64,s.f[15](e+64)),a.M[15](t+80,s.f[15](e+80)),a.M[15](t+84,s.f[15](e+84)),a.M[15](t+88,s.f[15](e+88)),a.M[15](t+92,s.f[15](e+92)),a.M[15](t+96,s.f[15](e+96)),a.M[15](t+100,s.f[15](e+100)),a.M[15](t+104,s.f[15](e+104)),(0,i.Mr)(t+112,e+112,24),a.M[15](t+136,s.f[15](e+136)),a.M[15](t+140,s.f[15](e+140)),a.M[15](t+144,s.f[15](e+144)),a.M[15](t+148,s.f[15](e+148)),a.M[15](t+152,s.f[15](e+152)),a.M[15](t+156,s.f[15](e+156)),a.M[15](t+160,s.f[15](e+160)),(0,i.Mr)(t+72,e+72,8),s.f[20](e+12)&&(s.f[20](t+12)&&(0,n.Eb)(s.f[20](t+12)),a.M[20](t+12,(0,n.sY)(s.f[15](e+16))),a.M[15](t+16,s.f[15](e+16)),(0,i.Mr)(s.f[20](t+12),s.f[20](e+12),s.f[15](e+16))),s.f[20](e+20)&&function(t,e,r,o){if(!r)return;const c=(0,n.Gy)(12*o);for(let t=0;t<o;t++)a.M[15](c+12*t+8,s.f[15](r+12*t+8)),a.M[25](c+12*t+4,s.f[25](r+12*t+4)),a.M[20](c+12*t,(0,n.sY)(s.f[25](r+12*t+4))),(0,i.Mr)(s.f[20](c+12*t),s.f[20](r+12*t),s.f[25](r+12*t+4));a.M[15](e,o),a.M[20](t,c)}(t+20,t+24,s.f[20](e+20),s.f[15](e+24))}function u(t){t&&(function(t){s.f[20](t+12)&&(0,n.aI)(t+12),(0,o.bl)(t+112),(0,c.NZ)(t+20,t+24),(0,i.sO)(t,0,168),a.M[15](t,-1),a.M[15](t+4,0),a.M[15](t+28,-1),a.M[15](t+112,0),a.M[15](t+80,0),a.M[15](t+84,0),a.M[15](t+88,2),a.M[15](t+92,2),a.M[15](t+96,2),a.M[15](t+100,0),a.M[15](t+64,0),a.M[15](t+68,1),a.M[15](t+72,0),a.M[15](t+72,1),a.M[15](t+48,l.N_),a.M[15](t+52,l.N_),a.M[15](t+160,0)}(t),(0,n.Eb)(t))}r(47958)},85103:(t,e,r)=>{"use strict";function i(t){return t=(t=(858993459&(t-=t>>1&1431655765))+(t>>2&858993459))+(t>>4)&252645135,(t+=t>>8)+(t>>16)&63}function s(t){return i(Number(BigInt.asUintN(32,t)))+i(Number(BigInt.asUintN(32,t>>BigInt(32))))}function a(t){const e=t/BigInt(1e3),r=t-e*BigInt(1e3);return Number(e)+Number(r)/1e3}r.d(e,{Xb:()=>s,yw:()=>a})},50315:(t,e,r)=>{"use strict";r.d(e,{ZK:()=>l,bE:()=>h,p$:()=>o,zz:()=>c});var i=r(86226),s=r.n(i),a=r(31865),n=r(729);function o(t){const e=new a.A(t,!0),r=e.readUint32(),i=e.readUint32(),s=e.readUint32(),n=e.readUint32(),o=e.readUint32(),c=e.readUint32(),l={scheme:r,cryptByteBlock:i,skipByteBlock:s,keyId:e.readBuffer(n),iv:e.readBuffer(o),subsamples:[]};if(c)for(let t=0;t<c;t++)l.subsamples.push({bytesOfClearData:e.readUint32(),bytesOfProtectedData:e.readUint32()});return l}function c(t){var e;const r=new Uint8Array(24+t.keyId.length+t.iv.length+8*t.subsamples.length),i=new n.A(r,!0);return i.writeUint32(t.scheme),i.writeUint32(t.cryptByteBlock),i.writeUint32(t.skipByteBlock),i.writeUint32(t.keyId.length),i.writeUint32(t.iv.length),i.writeUint32(t.subsamples.length),i.writeBuffer(t.keyId),i.writeBuffer(t.iv),s()(e=t.subsamples).call(e,(t=>{i.writeUint32(t.bytesOfClearData),i.writeUint32(t.bytesOfProtectedData)})),r}function l(t){const e=new a.A(t,!0),r=e.readUint32(),i=[];for(let t=0;t<r;t++){const t=e.readUint32(),r=e.readUint32(),s=e.readUint32(),a=e.readUint32(),n={systemId:e.readBuffer(t),keyIds:[],data:null};if(r)for(let t=0;t<r;t++)n.keyIds.push(e.readBuffer(s));n.data=e.readBuffer(a),i.push(n)}return i}function h(t){let e=4;s()(t).call(t,(t=>{e+=16+t.systemId.length+t.keyIds.length*(t.keyIds.length?t.keyIds[0].length:0)+t.data.length}));const r=new Uint8Array(e),i=new n.A(r,!0);return i.writeUint32(t.length),s()(t).call(t,(t=>{var e;i.writeUint32(t.systemId.length),i.writeUint32(t.keyIds.length),i.writeUint32(t.keyIds.length?t.keyIds[0].length:0),i.writeUint32(t.data.length),i.writeBuffer(t.systemId),s()(e=t.keyIds).call(e,(t=>{i.writeBuffer(t)})),i.writeBuffer(t.data)})),r}},23991:(t,e,r)=>{"use strict";function i(t){let e=0,r=0;for(;r<32&&0===t.readU1();)r++;return e=t.readU(r),e+=(1<<r)-1,e}function s(t){let e=i(t);return e=1&e?(e+1)/2:-e/2,e}r.d(e,{$x:()=>s,xb:()=>i})},39381:(t,e,r)=>{"use strict";r.d(e,{E3:()=>a,Sg:()=>l,Y0:()=>c,ht:()=>o,r8:()=>s,v4:()=>h,yd:()=>n});var i=r(63939);function s(t){return i.f[2](t)}function a(t){return s(t+1)<<8|s(t)}function n(t){return s(t)<<8|s(t+1)}function o(t){return s(t)<<16|s(t+1)<<8|s(t+2)}function c(t){return a(t+2)<<16|a(t)}function l(t){return n(t)<<16|n(t+2)}function h(t){return BigInt(l(t))<<BigInt(32)|BigInt(l(t+4))}},82774:(t,e,r)=>{"use strict";r.d(e,{Cv:()=>o,w8:()=>s});var i=r(50932);function s(t,e){i.M[2](t,255&e)}function a(t,e){s(t,e>>>8),s(t+1,e)}function n(t,e){a(t,e>>>16),a(t+2,65535&e)}function o(t,e){n(t,Number(BigInt.asUintN(32,e>>BigInt(32)))),n(t+4,Number(BigInt.asUintN(32,e)))}},37837:(t,e,r)=>{"use strict";r.d(e,{Eb:()=>u,Gy:()=>h,aI:()=>d,cz:()=>p,sY:()=>l});var i=r(11473),s=r(63939),a=r(50932),n=r(14686),o=r(4624);const c="src/avutil/util/mem.ts";function l(t){const e=i.s_.malloc(t);return e||o.h2("can not alloc buffer",c,32),e}function h(t){const e=i.s_.malloc(t);return e||o.h2("can not alloc buffer",c,40),(0,n.sO)(e,0,t),e}function u(t){i.s_.free(t)}function d(t){i.s_.free(s.f[20](t)),a.M[20](t,0)}function p(t,e){return i.s_.realloc(t,e)}},60264:(t,e,r)=>{"use strict";r.d(e,{BN:()=>v,Bs:()=>h,Ky:()=>u,Le:()=>p,S9:()=>m,nW:()=>f,py:()=>d});var i=r(73363),s=r.n(i),a=r(18979),n=r.n(a),o=r(79630),c=(r(31865),r(729)),l=r(72739);function h(t){return t.length>4&&0===t[0]&&0===t[1]&&(1===t[2]||0===t[2]&&1===t[3])}function u(t,e){let r=0;for(let i=e;i<t.length;i++)switch(t[i]){case 0:r++;break;case 1:if(r>=2)return{offset:i-Math.min(r,3),startCode:Math.min(r+1,4)};r=0;break;default:r=0}return{offset:-1,startCode:0}}function d(t){const e=[];t instanceof o.A&&(t=t.subarray(0,t.length,!1));let r=u(t,0),i={offset:-1,startCode:0};for(;i=u(t,r.offset+r.startCode),i.offset>-1;)e.push(t.subarray(r.offset+r.startCode,i.offset,!0)),r=i;return e.push(t.subarray(r.offset+r.startCode,void 0,!0)),e}function p(t,e){return s()(t).call(t,((t,r,i)=>0===e?t+4+r.length:1===e?t+3+r.length:t+(i?3:4)+r.length),0)}function f(t,e,r){if(!r){let i=s()(t).call(t,((t,r,i)=>0===e?t+4+r.length:1===e?t+3+r.length:t+(i?3:4)+r.length),0);r=new Uint8Array(i)}const i=new c.A(r);return l.__(t,((t,r)=>{i.writeUint8(0),i.writeUint8(0),(0===e||2===e&&!r)&&i.writeUint8(0),i.writeUint8(1),i.writeBuffer(t)})),r}function m(t,e,r){if(!r){const i=s()(t).call(t,((t,r)=>t+e+1+r.length),0);r=new Uint8Array(i)}const i=new c.A(r);return l.__(t,(t=>{3===e?i.writeUint32(t.length):2===e?i.writeUint24(t.length):1===e?i.writeUint16(t.length):i.writeUint8(t.length),i.writeBuffer(t)})),r}function v(t,e=0,r){r||(r=t.length);const i=new Uint8Array(t.length);let s=0,a=0;for(let n=0;n<t.length;n++){if(n>=e&&n<r)if(0===t[n])s++;else if(3===t[n]&&2===s&&n+1<t.length&&t[n+1]<=3){if(n++,n===t.length)break;s=0===t[n]?1:0}else s=0;i[a++]=t[n]}return n()(i).call(i,0,a)}},38156:(t,e,r)=>{"use strict";r(52730),r(97317),r(77231),r(37837)},44328:(t,e,r)=>{"use strict";r.d(e,{FP:()=>c,Mr:()=>o,iU:()=>u,j2:()=>h,k:()=>n,lb:()=>l});var i=r(63939),s=r(77231),a=r(31658);function n(t,e,r){return t*BigInt(e.num)*BigInt(r.den)/(BigInt(e.den)*BigInt(r.num))}function o(t,e,r){return t*BigInt(i.f[15](e))*BigInt(r.den)/(BigInt(i.f[15](e+4))*BigInt(r.num))}function c(t,e,r){return t*BigInt(e.num)*BigInt(i.f[15](r+4))/(BigInt(e.den)*BigInt(i.f[15](r)))}function l(t){return t.num/t.den}function h(t,e){if(isNaN(19))return{den:0,num:0};if(Math.abs(t)>s.go+3)return{den:0,num:t<0?-1:1};const r=t>1?{den:Math.floor(e/t+.5),num:e}:{den:e,num:Math.floor(t*e+.5)};return u(r),r}function u(t){const e=(0,a.A)(t.num,t.den);e<=1||(t.den/=e,t.num/=e)}},66788:(t,e,r)=>{"use strict";r.d(e,{K0:()=>n,f8:()=>o});var i=r(77231),s=r(95073),a=(r(37837),r(58055));function n(t){return!(t<0||t>=12)&&a.J[t].planar}function o(t,e,r,o){const c=function(t){return t<0||t>=12?0:a.J[t].bits>>3}(t),l=n(t);return!c||r<=0||e<=0?-1:(o||(o=1,r=(0,s.A)(r,32)),e>i.go/o||e*r>(i.go-o*e)/c?-1:l?(0,s.A)(r*c,o):(0,s.A)(r*c*e,o))}},71762:(t,e,r)=>{"use strict";r.d(e,{T8:()=>m,Wu:()=>f,r0:()=>p,wm:()=>d});var i=r(18979),s=r.n(i),a=r(52730),n=r.n(a),o=r(63939),c=r(50932),l=r(14686),h=r(71517),u=r(37837);function d(t){var e;const r={pts:o.f[17](t+8),dts:o.f[17](t+16),data:s()(e=(0,h.iI)(t)).call(e),streamIndex:o.f[15](t+32),flags:o.f[15](t+36),sideData:[],duration:o.f[17](t+48),pos:o.f[17](t+56),timeBase:{den:o.f[15](t+76),num:o.f[15](t+72)}};for(let e=0;e<o.f[15](t+44);e++){var i;const a={type:o.f[15](o.f[20](t+40)+12*e+8),data:s()(i=(0,l.s3)(o.f[20](o.f[20](t+40)+12*e),o.f[25](o.f[20](t+40)+12*e+4))).call(i)};r.sideData.push(a)}return r}function p(t,e=0){e||(e=(0,h._5)()),c.M[17](e+8,t.pts),c.M[17](e+16,t.dts);const r=(0,u.sY)(t.data.length);if((0,l.lW)(r,t.data.length,t.data),(0,h.NX)(e,r,t.data.length),c.M[15](e+32,t.streamIndex),c.M[15](e+36,n()(t)),c.M[17](e+48,t.duration),c.M[17](e+56,t.pos),c.M[15](e+76,t.timeBase.den),c.M[15](e+72,t.timeBase.num),t.sideData.length)for(let r=0;r<t.sideData.length;r++){const i=(0,u.sY)(t.sideData[r].data.length);(0,l.lW)(i,t.sideData[r].data.length,t.sideData[r].data),(0,h.Ow)(e,t.sideData[r].type,i,t.sideData[r].data.length)}else(0,h.NZ)(e+40,e+44);return e}function f(t){const e={codecType:o.f[15](t),codecId:o.f[15](t+4),codecTag:o.f[8](t+8),extradata:null,codedSideData:[],format:o.f[15](t+28),bitrate:o.f[17](t+32),bitsPerCodedSample:o.f[15](t+40),bitsPerRawSample:o.f[15](t+44),profile:o.f[15](t+48),level:o.f[15](t+52),width:o.f[15](t+56),height:o.f[15](t+60),sampleAspectRatio:{den:o.f[15](t+68),num:o.f[15](t+64)},framerate:{den:o.f[15](t+76),num:o.f[15](t+72)},fieldOrder:o.f[15](t+80),colorRange:o.f[15](t+84),colorPrimaries:o.f[15](t+88),colorTrc:o.f[15](t+92),colorSpace:o.f[15](t+96),chromaLocation:o.f[15](t+100),videoDelay:o.f[15](t+104),chLayout:{order:o.f[15](t+112),nbChannels:o.f[15](t+116),u:o.f[10](t+120)},sampleRate:o.f[15](t+136),blockAlign:o.f[15](t+140),frameSize:o.f[15](t+144),initialPadding:o.f[15](t+148),trailingPadding:o.f[15](t+152),seekPreroll:o.f[15](t+156),flags:o.f[15](t+160)};var r;o.f[15](t+16)&&(e.extradata=s()(r=(0,l.s3)(o.f[20](t+12),o.f[15](t+16))).call(r));for(let r=0;r<o.f[15](t+24);r++){var i;const a={type:o.f[15](o.f[20](t+20)+12*r+8),data:s()(i=(0,l.s3)(o.f[20](o.f[20](t+20)+12*r),o.f[25](o.f[20](t+20)+12*r+4))).call(i)};e.codedSideData.push(a)}return e}function m(t,e=0){if(e||(e=(0,u.sY)(168),(0,l.sO)(e,0,168)),c.M[15](e,t.codecType),c.M[15](e+4,t.codecId),c.M[8](e+8,t.codecTag),t.extradata&&(o.f[20](e+12)&&(0,u.Eb)(o.f[20](e+12)),c.M[20](e+12,(0,u.sY)(t.extradata.length)),(0,l.lW)(o.f[20](e+12),t.extradata.length,t.extradata),c.M[15](e+16,t.extradata.length)),t.codedSideData.length)for(let r=0;r<t.codedSideData.length;r++){const i=(0,u.sY)(t.codedSideData[r].data.length);(0,l.lW)(i,t.codedSideData[r].data.length,t.codedSideData[r].data),(0,h.$W)(e+20,e+24,t.codedSideData[r].type,i,t.codedSideData[r].data.length)}else(0,h.NZ)(e+20,e+24);return c.M[15](e+28,t.format),c.M[17](e+32,t.bitrate),c.M[15](e+40,t.bitsPerCodedSample),c.M[15](e+44,t.bitsPerRawSample),c.M[15](e+48,t.profile),c.M[15](e+52,t.level),c.M[15](e+56,t.width),c.M[15](e+60,t.height),c.M[15](e+68,t.sampleAspectRatio.den),c.M[15](e+64,t.sampleAspectRatio.num),c.M[15](e+76,t.framerate.den),c.M[15](e+72,t.framerate.num),c.M[15](e+80,t.fieldOrder),c.M[15](e+84,t.colorRange),c.M[15](e+88,t.colorPrimaries),c.M[15](e+92,t.colorTrc),c.M[15](e+96,t.colorSpace),c.M[15](e+100,t.chromaLocation),c.M[15](e+104,t.videoDelay),c.M[15](e+112,t.chLayout.order),c.M[15](e+116,t.chLayout.nbChannels),c.M[10](e+120,t.chLayout.u),c.M[15](e+136,t.sampleRate),c.M[15](e+140,t.blockAlign),c.M[15](e+144,t.frameSize),c.M[15](e+148,t.initialPadding),c.M[15](e+152,t.trailingPadding),c.M[15](e+156,t.seekPreroll),c.M[15](e+160,n()(t)),e}r(77162)},95007:(t,e,r)=>{"use strict";r.d(e,{A:()=>m});var i=r(49859),s=r(5496),a=r.n(s),n=r(95335),o=r(72739),c=r(73783),l=r(7417),h=r(4624);const u="src/cheap/allocator/AllocatorJS.ts",d=A(16),p=32,f=68;class m{constructor(t,e=!0){var r,s,o,c,l;(0,i.A)(this,"buffer",void 0),(0,i.A)(this,"byteOffset",void 0),(0,i.A)(this,"heapOffset",void 0),(0,i.A)(this,"heapLength",void 0),(0,i.A)(this,"int32Array",void 0),(0,i.A)(this,"updates",void 0),(0,i.A)(this,"options",void 0),(0,i.A)(this,"shared",void 0),(0,i.A)(this,"handles",void 0),this.options=n.X$({growSize:1048576,maxHeapSize:2097152e3},t),this.handles=[],this.buffer=t.buffer,this.shared=!1,this.options.memory||this.buffer instanceof ArrayBuffer||this.buffer instanceof SharedArrayBuffer?(this.byteOffset=null!==(r=t.byteOffset)&&void 0!==r?r:0,this.heapOffset=x(this.byteOffset+y(p),null!==(s=t.byteLength)&&void 0!==s?s:this.buffer.byteLength),this.heapLength=w((null!==(o=t.byteLength)&&void 0!==o?o:this.buffer.byteLength)-this.heapOffset),this.int32Array=new Int32Array(this.buffer,this.heapOffset,A(this.heapLength)),this.updates=new Int32Array(this.buffer,this.byteOffset,p),"function"==typeof SharedArrayBuffer&&this.buffer instanceof SharedArrayBuffer&&(this.shared=!0)):h.h2("Expected buffer to be an instance of Buffer or ArrayBuffer",u,109),e&&(a()(c=this.updates).call(c,1),function(t){return 65===t[0]&&65===t[66]}(l=this.int32Array)||function(t){const e=t.length-69;_(t,65,1),t[1]=1,t[3]=68;for(let e=1;e<p;e++)t[3+e]=1;_(t,e,68),t[68]=1,t[70]=1}(l),function(t){let e=f;for(;e<t.length-1;){const r=T(t,e);r<2||r>=t.length-f?h.h2(`Got invalid sized chunk at ${y(e)} (${y(r)} bytes).`,u,565):P(t,e)?v(t,e,r):g(t,e,r),e+=r+2}}(this.int32Array))}addUpdateHandle(t){o.zy(this.handles,t)||this.handles.push(t)}removeUpdateHandle(t){o.TF(this.handles,t)}malloc_(t){(t=b(t,7))<16&&(t=16);const e=A(t),r=this.findFreeBlock(this.int32Array,e);if(r<=1)return 0;const i=T(this.int32Array,r);return i-(e+2)>=d?function(t,e,r,i,s){const a=e+r+2,n=i-(a-e);S(t,e,i,s),t[e-1]=-r,t[e+r]=-r,t[a-1]=-n,t[a+n]=-n,R(t,a,n,s)}(this.int32Array,r,e,i,this.updates):S(this.int32Array,r,i,this.updates),y(r)+this.heapOffset}malloc(t){this.shared&&((0,c.s2)(l.II,!0),this.checkBuffer());const e=this.malloc_(t);return this.shared&&(0,c.Tl)(l.II),e}calloc_(t,e){var r;let i=t*e;i=i<16?16:b(i,7);const s=this.malloc_(i);if(0===s)return 0;const n=A(s-this.heapOffset);return a()(r=this.int32Array.subarray(n,n+A(i))).call(r,0),s}calloc(t,e){this.shared&&((0,c.s2)(l.II,!0),this.checkBuffer());const r=this.calloc_(t,e);return this.shared&&(0,c.Tl)(l.II),r}realloc_(t,e){if(0===t)return this.malloc_(e);const r=t;if(0===e)return this.free_(r),0;let i=A(t-=this.heapOffset),s=i,a=0;M(this.int32Array,i)&&(s=this.int32Array[i-1],a=i-s);const n=T(this.int32Array,s)-a;if(n>=A(b(e,7)))return r;{const t=this.malloc_(e);return 0===t?(this.free_(r),0):(this.int32Array.set(this.int32Array.subarray(i,i+n),A(t-this.heapOffset)),this.free_(r),t)}}realloc(t,e){return this.shared&&((0,c.s2)(l.II,!0),this.checkBuffer()),t=this.realloc_(t,e),this.shared&&(0,c.Tl)(l.II),t}alignedAlloc_(t,e){if(t<=8)return this.malloc_(e);const r=this.malloc_(e+t-1+4);if(0===r)return 0;const i=r+t-1+4&~(t-1);return this.int32Array[A(i-this.heapOffset)-1]=A(r-this.heapOffset),i}alignedAlloc(t,e){this.shared&&((0,c.s2)(l.II,!0),this.checkBuffer());const r=this.alignedAlloc_(t,e);return this.shared&&(0,c.Tl)(l.II),r}free_(t){if(0===t)return;let e=A(t-=this.heapOffset);if(M(this.int32Array,e)&&(e=this.int32Array[e-1]),P(this.int32Array,e))return;const r=T(this.int32Array,e),i=C(this.int32Array,e),s=function(t,e){const r=T(t,e);if(e+r+2>=t.length-2)return 0;const i=e+r+2;return t[i-1]<2?0:i}(this.int32Array,e);0!==i?0!==s?function(t,e,r,i,s,a){const n=T(t,e),o=T(t,s),c=s-e+o;S(t,e,n,a),S(t,s,o,a),t[e-1]=-c,t[s+o]=-c,R(t,e,c,a)}(this.int32Array,i,0,0,s,this.updates):E(this.int32Array,i,e,r,this.updates):0!==s?function(t,e,r,i,s){const a=T(t,e);S(t,e,a,s);const n=i+a+2;t[r-1]=-n,t[e+a]=-n,R(t,r,n,s)}(this.int32Array,s,e,r,this.updates):R(this.int32Array,e,r,this.updates)}free(t){this.shared&&((0,c.s2)(l.II,!0),this.checkBuffer()),this.free_(t),this.shared&&(0,c.Tl)(l.II)}sizeof(t){if(0===t)return 0;let e=A(t-=this.heapOffset);return M(this.int32Array,e)&&(e=this.int32Array[e-1]),y(T(this.int32Array,e))}inspect(){return this.checkBuffer(),function(t,e){const r=[],i=k(t,1,e);let s=f,a=0;for(;s<t.length-1;){const i=T(t,s);(i<2||i>=t.length)&&h.h2(`Got invalid sized chunk at ${y(s)} (${y(i)})`,u,621),P(t,s)?r.push(k(t,s,e)):(a+=y(i),r.push({type:"used",block:s,offset:y(s)+e,size:y(i)})),s+=i+2}return{header:i,blocks:r,total:y(t.length),used:a}}(this.int32Array,this.heapOffset)}findFreeBlock(t,e){let r=function(t,e){let r=1;for(let i=t[1];i>0;i--){let s=t[r+2+(i-1)];for(;1!==s&&t[s-1]<e;)r=s,s=t[r+2+(i-1)]}return r=t[r+2],r}(t,e);if(1===r){if(this.options.growAllowed&&this.heapLength<this.options.maxHeapSize){const t=this.int32Array.length+1;let r,n,c=0,l=0,h=0;if(this.options.onResize){var i,s,a;const t=this.options.onResize(this.int32Array,this.int32Array.byteLength+b(Math.max(this.options.growSize,y(e)),7));c=null!==(i=t.byteOffset)&&void 0!==i?i:0,h=x(c+y(p),null!==(s=t.byteLength)&&void 0!==s?s:t.buffer.byteLength),l=w((null!==(a=t.byteLength)&&void 0!==a?a:t.buffer.byteLength)-h),r=new Int32Array(t.buffer,h,A(l)),n=new Int32Array(t.buffer,c,p)}else{const t=new ArrayBuffer(this.int32Array.length+A(this.options.growSize));h=x(c+y(p),t.byteLength),l=w(t.byteLength-h),r=new Int32Array(t,h,A(l)),r.set(this.int32Array,0),n=new Int32Array(t,c,p)}this.byteOffset=c,this.heapOffset=h,this.buffer=r.buffer,this.heapLength=l,this.int32Array=r,this.updates=n;const u=r.length-(t-1)-2;_(r,u,t);const d=C(r,t);return 0!==d?E(r,d,t,u,this.updates):R(r,t,u,this.updates),this.handles.length&&o.__(this.handles,(t=>{t(this.buffer)})),this.findFreeBlock(this.int32Array,e)}return r}return r}getBuffer(){return this.buffer}isAlloc(t){this.shared&&((0,c.s2)(l.II,!0),this.checkBuffer());const e=A(t-this.heapOffset);let r=this.int32Array[3];for(;r&&1!==r;){if(e>=r&&e<r+this.int32Array[r-1])return this.shared&&(0,c.Tl)(l.II),!1;r=this.int32Array[r+2]}return this.shared&&(0,c.Tl)(l.II),!0}checkBuffer(){this.options.memory&&this.options.memory.buffer!==this.buffer&&(this.buffer=this.options.memory.buffer,this.heapLength=w(this.buffer.byteLength-this.heapOffset),this.int32Array=new Int32Array(this.buffer,this.heapOffset,A(this.heapLength)))}}function v(t,e,r){t[e-1]!==t[e+r]&&h.h2(`Block length header does not match footer (${y(t[e-1])} vs ${y(t[e+r])}).`,u,581);const i=t[e+0];(i<1||i>p)&&h.h2(`Block ${y(e)} height must be between 1 and 32, got ${i}.`,u,586);for(let r=0;r<i;r++){const i=t[e+2+r];i>=f&&!P(t,i)&&h.h2(`Block ${y(e)} has a pointer to a non-free block (${y(i)}).`,u,592)}return!0}function g(t,e,r){if(t[e-1]===t[e+r])return!0;h.h2(`Block length header does not match footer (${y(t[e-1])} vs ${y(t[e+r])}).`,u,601)}function y(t){return t<<2>>>0}function A(t){return t>>>2}function b(t,e){return(t+e&~e)>>>0}function x(t,e){const r=e-t;return t+(b(r,7)===r?0:r-b(r,7)+8)}function w(t){return t-4}function k(t,e,r){const i=t[e+0],s=[];for(let r=0;r<i;r++)s.push(t[e+2+r]);return{type:"free",block:e,offset:y(e)+r,height:i,pointers:s,size:y(t[e-1])}}function T(t,e){const r=t[e-1],i=r>>31;return r+i^i}function _(t,e,r){t[r-1]=e,t[r+e]=e}function I(t,e,r){let i=1;for(let s=t[1];s>0;s--){let a=i+2+(s-1);for(;t[a]>=f&&t[t[a]-1]<e;)i=t[a],a=i+2+(s-1);r[s-1]=i}}function S(t,e,r,i){I(t,r,i);let s=t[i[0]+2];for(;s!==e&&1!==s&&t[s-1]<=r;){for(let r=t[s+0]-1;r>=0;r--)t[s+2+r]===e&&(i[r]=s);s=t[s+2]}let a=t[1];for(let r=0;r<a&&t[i[r]+2+r]===e;r++)t[i[r]+2+r]=t[e+2+r];for(;a>0&&1===t[a-1+3];)a--,t[1]=a;t[e-1]=-r,t[e+r]=-r}function P(t,e){return!(e<65)&&!(t[e-1]<0)}function M(t,e){return!(e<65)&&!(t[e-1]<0)}function C(t,e){if(e<=f)return 0;const r=t[e-2];return r<2?0:e-(2+r)}function R(t,e,r,i){I(t,r,i);const s=function(t,e,r,i){const s=t[1];let a=function(){let t=1;for(;Math.random()<.5&&t<p;)t+=1;return t}();if(r-1<a+1&&(a=r-2),a>s){const r=s+1;return t[1]=r,t[r-1+3]=1,i[r]=1,t[e+0]=r,r}return t[e+0]=a,a}(t,e,r,i);for(let r=1;r<=s;r++){const s=i[r-1]+2+(r-1);t[e+2+(r-1)]=t[s],t[s]=e,i[r-1]=1}return t[e-1]=r,t[e+r]=r,r}function E(t,e,r,i,s){const a=r-e+i;return S(t,e,r-e-2,s),t[e-1]=-a,t[r+i]=-a,R(t,e,a,s),i}},94321:(t,e,r)=>{"use strict";r.d(e,{z:()=>n});var i=r(49859),s=r(385),a=r.n(s);class n{constructor(){(0,i.A)(this,"table",void 0),(0,i.A)(this,"pointer",void 0),(0,i.A)(this,"nodes",void 0),this.table=new WebAssembly.Table({initial:16,element:"anyfunc",address:"i32",index:"i32"}),this.pointer=6,this.nodes=[{pointer:this.pointer,length:10,free:!0}]}getPointer(){return this.pointer}alloc(t){let e=this.findFree(t);if(e<0){const r=this.nodes[this.nodes.length-1],i=t-(r.free?r.length:0);this.table.grow(i),r.free?r.length=r.length+i:this.nodes.push({pointer:r.pointer+r.length,length:i,free:!0}),e=this.findFree(t)}const r=this.nodes[e];var i;return r.length>t&&(a()(i=this.nodes).call(i,e+1,0,{pointer:r.pointer+t,length:r.length-t,free:!0}),r.length=t),r.free=!1,r.pointer}free(t){let e=this.findNode(t);const r=this.nodes[e];if(r&&!r.free){const t=this.nodes[e-1],o=this.nodes[e+1];var i,s,n;t&&t.free?o&&o.free?(t.length+=r.length+o.length,a()(i=this.nodes).call(i,e,2)):(t.length+=r.length,a()(s=this.nodes).call(s,e,1)):o&&o.free?(r.length+=o.length,a()(n=this.nodes).call(n,e+1,1),r.free=!0):r.free=!0}if(1===this.nodes.length&&this.nodes[0].free){const t=new WebAssembly.Table({initial:16,element:"anyfunc",address:"i32",index:"i32"});this.pointer=6,this.nodes=[{pointer:this.pointer,length:10,free:!0}];for(let e=1;e<this.pointer;e++)t.set(e,this.table.get(e));this.table=t}}get(t){return this.table.get(t)}set(t,e){if(t<0||t>=this.pointer)throw new RangeError("index out of bound");this.table.set(t,e)}inspect(){return this.nodes}findFree(t){let e=-1;for(let r=0;r<this.nodes.length;r++)if(this.nodes[r].length>=t&&this.nodes[r].free){e=r;break}return e}findNode(t){let e=-1;for(let r=0;r<this.nodes.length;r++)if(this.nodes[r].pointer===t){e=r;break}return e}}},15541:(t,e,r)=>{"use strict";r.d(e,{A:()=>i});const i="AGFzbQEAAAABLwlgAn9/AGACf34AYAJ/fQBgAn98AGABfwF/YAF/AX5gAX8BfWABfwF8YAN/f38AAhIBA2VudgZtZW1vcnkCAwGAgAQDERAAAAABAgMEBAQEBAUGBwgIB5YBEAZ3cml0ZTgAAAd3cml0ZTE2AAEHd3JpdGUzMgACB3dyaXRlNjQAAwh3cml0ZWYzMgAECHdyaXRlZjY0AAUFcmVhZDgABgZyZWFkVTgABwZyZWFkMTYACAdyZWFkVTE2AAkGcmVhZDMyAAoGcmVhZDY0AAsHcmVhZGYzMgAMB3JlYWRmNjQADQRmaWxsAA4EY29weQAPCpYBEAkAIAAgAToAAAsJACAAIAE7AQALCQAgACABNgIACwkAIAAgATcDAAsJACAAIAE4AgALCQAgACABOQMACwcAIAAsAAALBwAgAC0AAAsHACAALgEACwcAIAAvAQALBwAgACgCAAsHACAAKQMACwcAIAAqAgALBwAgACsDAAsLACAAIAEgAvwLAAsMACAAIAEgAvwKAAAL"},98564:(t,e,r)=>{"use strict";r.d(e,{Ts:()=>p});var i=r(5496),s=r.n(i),a=r(4919),n=r(4624),o=r(63939),c=r(50932),l=r(88096),h=r(15541);const u="src/cheap/asm/memory.ts";let d;function p(t,e,r){try{const i=l.bx((0,a.E_)(h.A),{shared:"function"==typeof SharedArrayBuffer&&t.buffer instanceof SharedArrayBuffer,initial:e,maximum:r});d=new WebAssembly.Instance(new WebAssembly.Module(i),{env:{memory:t}}),(0,o.$)({4:d.exports.readU8,5:d.exports.readU8,2:d.exports.readU8,3:d.exports.readU8,6:d.exports.readU16,7:d.exports.readU16,8:t=>d.exports.read32(t)>>>0,9:t=>d.exports.read32(t)>>>0,10:t=>BigInt.asUintN(64,d.exports.read64(t)),22:t=>BigInt.asUintN(64,d.exports.read64(t)),11:d.exports.read8,12:d.exports.read8,13:d.exports.read16,14:d.exports.read16,15:d.exports.read32,16:d.exports.read32,17:d.exports.read64,21:d.exports.read64,18:d.exports.readf32,19:d.exports.readf64,20:t=>d.exports.read32(t)>>>0,25:t=>d.exports.read32(t)>>>0}),(0,c.$)({4:d.exports.write8,5:d.exports.write8,2:d.exports.write8,3:d.exports.write8,6:d.exports.write16,7:d.exports.write16,8:d.exports.write32,9:d.exports.write32,10:d.exports.write64,22:d.exports.write64,11:d.exports.write8,12:d.exports.write8,13:d.exports.write16,14:d.exports.write16,15:d.exports.write32,16:d.exports.write32,17:d.exports.write64,21:d.exports.write64,18:d.exports.writef32,19:d.exports.writef64,20:d.exports.write32,25:d.exports.write32,copy:d.exports.copy,fill:s()(d.exports)})}catch(t){n.R8("memory asm not support, cannot use asm memory function",u,119)}}},26429:(t,e,r)=>{"use strict";r.r(e),r.d(e,{HEAP_INITIAL:()=>f,HEAP_MAXIMUM:()=>m,HEAP_OFFSET:()=>p,STACK_ALIGNMENT:()=>u,STACK_SIZE:()=>d,USE_THREADS:()=>h});var i,s,a=r(95797),n=r(10576),o=r(86834),c=r(44690);const l=n.TK,h=!!a.A.thread&&!l.CHEAP_DISABLE_THREAD;let u=16,d=1048576;const p=1024,f=null!==(i=l.CHEAP_HEAP_INITIAL)&&void 0!==i?i:265,m=null!==(s=l.CHEAP_HEAP_MAXIMUM)&&void 0!==s?s:h&&c.A.ios&&!o.A.checkVersion(c.A.version,"17",!0)?8192:65536},73281:(t,e,r)=>{"use strict";r.d(e,{A:()=>E});var i=r(59135),s=r(63939),a=r(50932);let n,o;const c=(0,i.A)();function l(t,e){o().setUint8(t,e)}function h(t){return o().getUint8(t)}function u(t,e){o().setUint16(t,e,c)}function d(t){return o().getUint16(t,c)}function p(t,e){o().setUint32(t,e,c)}function f(t){return o().getUint32(t,c)}function m(t,e){o().setBigUint64(t,e,c)}function v(t){return o().getBigUint64(t,c)}function g(t,e){o().setInt8(t,e)}function y(t){return o().getInt8(t)}function A(t,e){o().setInt16(t,e,c)}function b(t){return o().getInt16(t,c)}function x(t,e){o().setInt32(t,e,c)}function w(t){return o().getInt32(t,c)}function k(t,e){o().setBigInt64(t,e,c)}function T(t){return o().getBigInt64(t,c)}function _(t,e){o().setFloat32(t,e,c)}function I(t){return o().getFloat32(t,c)}function S(t,e){o().setFloat64(t,e,c)}function P(t){return o().getFloat64(t,c)}function M(t){return o().getUint32(t,c)}function C(t,e){return o().setUint32(t,e,c)}function R(t,e){o().setUint32(t,e,c)}function E(t,e){n=t,o=e,(0,s.$)({4:h,5:h,2:h,3:h,6:d,7:d,8:f,9:f,10:v,11:y,12:y,13:b,14:b,15:w,16:w,17:T,18:I,19:P,20:M,23:t=>!!y(t),24:t=>!!y(t),25:t=>function(t){return o().getUint32(t,c)}(t)}),(0,a.$)({4:l,5:l,2:l,3:l,6:u,7:u,8:p,9:p,10:m,11:g,12:g,13:A,14:A,15:x,16:x,17:k,18:_,19:S,20:C,23:(t,e)=>{g(t,e?1:0)},24:(t,e)=>{g(t,e?1:0)},25:R})}},63939:(t,e,r)=>{"use strict";r.d(e,{$:()=>a,f:()=>s});var i=r(95335);const s={4:function(t){throw new Error("unimplemented")},5:function(t){throw new Error("unimplemented")},2:function(t){throw new Error("unimplemented")},3:function(t){throw new Error("unimplemented")},6:function(t){throw new Error("unimplemented")},7:function(t){throw new Error("unimplemented")},8:function(t){throw new Error("unimplemented")},9:function(t){throw new Error("unimplemented")},10:function(t){throw new Error("unimplemented")},11:function(t){throw new Error("unimplemented")},12:function(t){throw new Error("unimplemented")},13:function(t){throw new Error("unimplemented")},14:function(t){throw new Error("unimplemented")},15:function(t){throw new Error("unimplemented")},16:function(t){throw new Error("unimplemented")},17:function(t){throw new Error("unimplemented")},18:function(t){throw new Error("unimplemented")},19:function(t){throw new Error("unimplemented")},20:function(t){throw new Error("unimplemented")},0:function(t){throw new Error("invalid operate")},1:function(t){throw new Error("invalid operate")},22:function(t){throw new Error("invalid operate")},21:function(t){throw new Error("invalid operate")},23:function(t){throw new Error("invalid operate")},24:function(t){throw new Error("invalid operate")},25:function(t){throw new Error("unimplemented")}};function a(t){i.X$(s,t)}},50932:(t,e,r)=>{"use strict";r.d(e,{$:()=>a,M:()=>s});var i=r(95335);const s={4:function(t,e){throw new Error("unimplemented")},5:function(t,e){throw new Error("unimplemented")},2:function(t,e){throw new Error("unimplemented")},3:function(t,e){throw new Error("unimplemented")},6:function(t,e){throw new Error("unimplemented")},7:function(t,e){throw new Error("unimplemented")},8:function(t,e){throw new Error("unimplemented")},9:function(t,e){throw new Error("unimplemented")},10:function(t,e){throw new Error("unimplemented")},11:function(t,e){throw new Error("unimplemented")},12:function(t,e){throw new Error("unimplemented")},13:function(t,e){throw new Error("unimplemented")},14:function(t,e){throw new Error("unimplemented")},15:function(t,e){throw new Error("unimplemented")},16:function(t,e){throw new Error("unimplemented")},17:function(t,e){throw new Error("unimplemented")},18:function(t,e){throw new Error("unimplemented")},19:function(t,e){throw new Error("unimplemented")},20:function(t,e){throw new Error("unimplemented")},0:function(t,e){throw new Error("invalid operate")},1:function(t,e){throw new Error("invalid operate")},22:function(t,e){throw new Error("invalid operate")},21:function(t,e){throw new Error("invalid operate")},23:function(t,e){throw new Error("invalid operate")},24:function(t,e){throw new Error("invalid operate")},25:function(t,e){throw new Error("unimplemented")},copy:function(t,e,r){throw new Error("invalid operate")},fill:function(t,e,r){throw new Error("invalid operate")}};function a(t){i.X$(s,t)}},25323:(t,e,r)=>{"use strict";r.d(e,{X:()=>L,l:()=>B});var i=r(53930),s=r.n(i),a=r(12854),n=r.n(a),o=r(86226),c=r.n(o),l=r(7074),h=r.n(l),u=r(99921),d=r(63939),p=r(50932),f=r(61499),m=r(6704),v=r(67672),g=r(95335),y=r(62100),A=r(72739);function b(t,e,r,i){s()(t,e,{get:r,set:i,configurable:!0,enumerable:!0})}function x(t){return function(){return d.f[20](t())}}function w(t,e,r,i){return function(){return t[`__$__${e}`]||(t[`__$__${e}`]=B(r(),i))}}function k(t,e){return function(){return d.f[e](t())}}function T(t,e,r,i){const s=8*m.i[e]-i-r,a=Math.pow(2,r)-1;return function(){return d.f[e](t())>>>s&a}}function _(t){return function(e){p.M[20](t(),e)}}function I(t,e,r,i){const s=`__$__${e}`;return function(e){const a=t[s]||(t[s]=B(r(),i));g.__(e,((t,e)=>{a[e]=t})),t[s]=a}}function S(t,e){return function(r){p.M[e](t(),r)}}function P(t,e,r,i){let s=0,a=8*m.i[e];for(let t=0;t<r;t++)s|=1<<a-1-(t+i);const n=Math.pow(2,r)-1,o=a-i-r;return function(r){const i=t(),a=d.f[e](i);p.M[e](i,a&~s|(r&n)<<o)}}function M(t,e,r){const i={};let s=(0,u.A)(r);for(let a=0;a<e;a++){const e=(0,y.A)(a);b(i,e,w(i,e,(()=>t()+s*a),r),I(i,e,(()=>t()+s*a),r))}return i}function C(t,e,r){const i={};let s=(0,u.A)(r);for(let a=0;a<e;a++)b(i,(0,y.A)(a),k((()=>t()+s*a),r),S((()=>t()+s*a),r));return i}function R(t,e,r,i,s){return function(){let a=e[`__$__${r}`];return a||(a=v.Pc(s)||v.Ik(s)?M(t,i,s):C(t,i,s),e[`__$__${r}`]=a),a[f.o9]=t(),a}}function E(t,e,r,i,s){const a=`__$__${e}`;return function(e){let n=t[a]||M(r,i,s);n[f.o9]=r(),A.__(e,((t,e)=>{n[e]=t})),t[a]=n}}function D(t,e,r,i,s){const a=`__$__${e}`;return function(e){let n=t[a]||C(r,i,s);n[f.o9]=r(),A.__(e,((t,e)=>{n[e]=t})),t[a]=n}}function B(t,e){let r=v.Pc(e)?e.prototype:e;const i={};for(i[f.o9]=t,n()(i,r);;){let t=r[f.JY];if(t&&c()(t).call(t,((t,e)=>{t[3]?t[1]?b(i,e,R((()=>i[f.o9]+t[7]),i,e,t[4],t[0]),D(i,e,(()=>i[f.o9]+t[7]),t[4],20)):v.Pc(t[0])||v.Ik(t[0])?b(i,e,R((()=>i[f.o9]+t[7]),i,e,t[4],t[0]),E(i,e,(()=>i[f.o9]+t[7]),t[4],t[0])):b(i,e,R((()=>i[f.o9]+t[7]),i,e,t[4],t[0]),D(i,e,(()=>i[f.o9]+t[7]),t[4],t[0])):t[1]?b(i,e,x((()=>i[f.o9]+t[7])),_((()=>i[f.o9]+t[7]))):v.Pc(t[0])||v.Ik(t[0])?b(i,e,w(i,e,(()=>i[f.o9]+t[7]),t[0]),I(i,e,(()=>i[f.o9]+t[7]),t[0])):t[5]?b(i,e,T((()=>i[f.o9]+t[7]),t[0],t[6],t[8]),P((()=>i[f.o9]+t[7]),t[0],t[6],t[8])):b(i,e,k((()=>i[f.o9]+t[7]),t[0]),S((()=>i[f.o9]+t[7]),t[0]))})),r=h()(r),!r)break}return i}function L(t){let e=h()(t);for(;;){let r=e[f.JY];if(r&&c()(r).call(r,((e,r)=>{delete t[r]})),e=h()(e),!e)break}}},12085:(t,e,r)=>{"use strict";r.d(e,{A:()=>a});var i=r(53930),s=r.n(i);function a(t,e,r){s()(t,e,{value:r,writable:!1,enumerable:!1,configurable:!1})}},11473:(t,e,r)=>{"use strict";r.d(e,{GE:()=>w,Lv:()=>O,Tg:()=>H,XI:()=>_,ce:()=>S,eq:()=>v,pv:()=>j,s_:()=>I,wE:()=>k});var i=r(39638),s=r(95007),a=r(94321),n=r(10576),o=r(26429),c=r(7417),l=r(33856),h=r(98564),u=r(82854),d=r(73281),p=r(54568),f=r(86834),m=r(44690);let v,g,y,A=-1,b=!0,x="",w=null,k=null,T=0,_=null,I=null,S=null,P=null,M=null,C=null,R=null,E=null,D=null,B=null,L=null,U=null,F={5:E,3:E,7:D,9:B,22:L,12:P,14:M,16:C,21:R};function $(){return!(!S||S.buffer===E.buffer)}function O(){return S.buffer}function N(){return $()&&W(S.buffer),E}function z(){return $()&&W(S.buffer),U}function V(t){return $()&&W(S.buffer),F[t]}function G(){o.USE_THREADS?(v=N,g=z,y=V):(v=()=>E,g=()=>U,y=t=>F[t])}function W(t){P=new Int8Array(t),M=new Int16Array(t),C=new Int32Array(t),R=new BigInt64Array(t),E=new Uint8Array(t),D=new Uint16Array(t),B=new Uint32Array(t),L=new BigUint64Array(t),U=new DataView(t),F={5:E,3:E,7:D,9:B,22:L,12:P,14:M,16:C,21:R}}function j(){return Atomics.add(B,c.hb>>>2,1)}async function H(t){var e;G(),(0,d.A)((()=>I),g),(0,l.A)(y),S=t.memory,t.disableAsm||("function"==typeof BigInt&&BigInt!==Number&&(f.A.chrome&&f.A.checkVersion(f.A.majorVersion,"85",!0)||f.A.firefox&&f.A.checkVersion(f.A.majorVersion,"78",!0)||f.A.safari&&f.A.checkVersion(f.A.majorVersion,"15",!0)||m.A.ios&&f.A.checkVersion(m.A.version,"15",!0)||f.A.newEdge)&&h.Ts(S,o.HEAP_INITIAL,o.HEAP_MAXIMUM),(f.A.chrome&&f.A.checkVersion(f.A.majorVersion,"85",!0)||f.A.firefox&&f.A.checkVersion(f.A.majorVersion,"78",!0)||f.A.safari&&f.A.checkVersion(f.A.majorVersion,"15",!0)||m.A.ios&&f.A.checkVersion(m.A.version,"15",!0)||f.A.newEdge)&&u.Ts(S,o.HEAP_INITIAL,o.HEAP_MAXIMUM));var r;r=new s.A({buffer:S.buffer,memory:S,byteOffset:o.HEAP_OFFSET,maxHeapSize:64*o.HEAP_MAXIMUM*1024,growAllowed:!0,onResize:(t,e)=>(S.grow(e-t.byteLength>>>16),{buffer:S.buffer,byteOffset:o.HEAP_OFFSET})},!1),I&&I.removeUpdateHandle(W),I=r,n.TK.CHeap&&(n.TK.CHeap.Allocator=I),I.addUpdateHandle(W),W(I.getBuffer()),t.stackPointer&&(T=t.stackSize,k=t.stackPointer,w=new WebAssembly.Global({value:"i32",mutable:!0},k+T),_=new a.z),A="number"==typeof t.id?t.id:Atomics.add(B,c.hb>>>2,1),x=null!==(e=t.name)&&void 0!==e?e:"anonymous",n.TK.CHeap={initThread:H,Allocator:I,Table:_,ThreadId:A,ThreadName:x,Memory:S,Config:o,StackSize:T,StackTop:k,StackPointer:w,isMainThread:!1},b=!1}!(0,i.A)()&&!(0,p.A)()||(0,i.A)()&&!o.USE_THREADS?function(){var t,e,r,i,p,v,P,M;if(G(),(0,d.A)((()=>I),g),(0,l.A)(y),S=null!==(t=n.TK.CHeap)&&void 0!==t&&t.Memory?n.TK.CHeap.Memory:new WebAssembly.Memory({initial:o.HEAP_INITIAL,maximum:o.HEAP_MAXIMUM,shared:o.USE_THREADS,address:"i32",index:"i32"}),"function"==typeof BigInt&&BigInt!==Number&&(f.A.chrome&&f.A.checkVersion(f.A.majorVersion,"85",!0)||f.A.firefox&&f.A.checkVersion(f.A.majorVersion,"78",!0)||f.A.safari&&f.A.checkVersion(f.A.majorVersion,"15",!0)||m.A.ios&&f.A.checkVersion(m.A.version,"15",!0)||f.A.newEdge)&&o.USE_THREADS&&h.Ts(S,o.HEAP_INITIAL,o.HEAP_MAXIMUM),o.USE_THREADS&&(f.A.chrome&&f.A.checkVersion(f.A.majorVersion,"85",!0)||f.A.firefox&&f.A.checkVersion(f.A.majorVersion,"78",!0)||f.A.safari&&f.A.checkVersion(f.A.majorVersion,"15",!0)||m.A.ios&&f.A.checkVersion(m.A.version,"15",!0)||f.A.newEdge)&&u.Ts(S,o.HEAP_INITIAL,o.HEAP_MAXIMUM),I=null!==(e=n.TK.CHeap)&&void 0!==e&&e.Allocator?n.TK.CHeap.Allocator:new s.A({buffer:S.buffer,memory:S,byteOffset:o.HEAP_OFFSET,maxHeapSize:64*o.HEAP_MAXIMUM*1024,growAllowed:!0,onResize:(t,e)=>(S.grow(e-t.byteLength>>>16),{buffer:S.buffer,byteOffset:o.HEAP_OFFSET})}),I.addUpdateHandle(W),W(I.getBuffer()),T=null!==(r=n.TK.CHeap)&&void 0!==r&&r.StackSize?n.TK.CHeap.StackSize:o.STACK_SIZE,k=null!==(i=n.TK.CHeap)&&void 0!==i&&i.StackTop?n.TK.CHeap.StackTop:I.malloc(T),w=null!==(p=n.TK.CHeap)&&void 0!==p&&p.StackPointer?n.TK.CHeap.StackPointer:new WebAssembly.Global({value:"i32",mutable:!0},k+T),_=null!==(v=n.TK.CHeap)&&void 0!==v&&v.Table?n.TK.CHeap.Table:new a.z,A=null!==(P=n.TK.CHeap)&&void 0!==P&&P.ThreadId?n.TK.CHeap.ThreadId:0,x=null!==(M=n.TK.CHeap)&&void 0!==M&&M.ThreadName?n.TK.CHeap.ThreadName:"main",!n.TK.CHeap)if(o.USE_THREADS)Atomics.store(B,c.hb>>>2,A+1),Atomics.store(C,c.II>>>2,0);else{B[c.hb>>>2]=A+1;let t=c.II>>>2;C[t]=0}n.TK.CHeap||(n.TK.CHeap={Allocator:I,Table:_,ThreadId:A,ThreadName:x,Memory:S,Config:o,StackSize:T,StackTop:k,StackPointer:w,isMainThread:!0}),b=!0}():(n.TK.CHeap={initThread:H,isMainThread:!1,Config:o},b=!1)},80098:(t,e,r)=>{"use strict";r.d(e,{I_:()=>k,SQ:()=>T});var i=r(7074),s=r.n(i),a=r(12854),n=r.n(a),o=r(49763),c=r.n(o),l=r(15413),h=r.n(l),u=r(99921),d=r(63939),p=r(50932),f=r(61499),m=r(6704),v=r(67672),g=r(95335),y=r(72739),A=r(2148);const b=s()({});function x(t,e){for(;;){let r=t[f.JY];if(r){const t=r.get(e);if(t)return t}if(!(t=s()(t))||t===b)return null}}function w(t,e,r,i){const s={};s[f.o9]=t;let a=(0,u.A)(i?20:r);return new Proxy(s,{get(t,e,s){if(e===f.o9)return t[f.o9];const n=(0,A.A)(e);return i?d.f[20](t[f.o9]+n*a):v.Pc(r)?t[e]:d.f[r](t[f.o9]+n*a)},set(t,e,s,n){if(e===f.o9)return t[f.o9]=s,!0;const o=(0,A.A)(e);if(i)p.M[20](t[f.o9]+o*a,s),t[e]=s;else if(v.Pc(r)){const i=t[e]||(t[e]=k(t[f.o9]+o*a,r));g.__(s,((t,e)=>{i[e]=t})),t[e]=i}else p.M[r](t[f.o9]+o*a,s),t[e]=s;return!0}})}function k(t,e){const r=v.Pc(e)?e.prototype:e,i={};i[f.o9]=t,n()(i,r);const{proxy:s,revoke:a}=Proxy.revocable(i,{get(t,e,i){if(v.Yj(e)){const i=x(r,e.replace(/^\$+/,""));if(i){const r=t[f.o9]+i[7];if(i[3]){let s=t[e];return s||(s=w(r,i[4],i[0],i[1]),t[e]=s),s[f.o9]=r,s}if(i[1])return d.f[20](r);if(v.Pc(i[0])||v.Ik(i[0]))return t[e]||(t[e]=k(r,i[0]));{let t=d.f[i[0]](r);return i[5]&&(t=t>>>8*m.i[i[0]]-i[8]-i[6]&Math.pow(2,i[6])-1),t}}return t[e]}return t[e]},set(t,e,i,s){if(v.Yj(e)){const s=x(r,e.replace(/^\$+/,""));if(s){const r=t[f.o9]+s[7];if(s[3]){const a=t[e]||w(r,s[4],s[0],s[1]);y.__(i,((t,e)=>{a[e]=t})),t[e]=a}else if(s[1])p.M[20](r,i),t[e]=i;else if(v.Pc(s[0])||v.Ik(s[0])){const a=t[e]||(t[e]=k(r,s[0]));g.__(i,((t,e)=>{a[e]=t})),t[e]=a}else{if(s[5]){let t=0,e=8*m.i[s[0]];for(let r=0;r<s[6];r++)t|=1<<e-1-(r+s[8]);const a=d.f[s[0]](r);p.M[s[0]](r,a&~t|(i&Math.pow(2,s[6])-1)<<e-s[8]-s[6])}else p.M[s[0]](r,i);t[e]=i}}else t[e]=i}else t[e]=i;return!0},getOwnPropertyDescriptor:(t,e)=>({enumerable:!0,configurable:!0}),ownKeys(t){var e;return c()(h()(e=t[f.JY]).call(e))}});return i[f.kE]=a,s}function T(t){const e=t[f.kE];e&&e()}},52699:(t,e,r)=>{"use strict";r.d(e,{t:()=>a,z:()=>s});var i=r(11473);function s(t){return i.GE.value=i.GE.value-t,i.GE.value}function a(t){i.GE.value=i.GE.value+t}},7417:(t,e,r)=>{"use strict";r.d(e,{II:()=>n,hb:()=>a,hf:()=>o});let i=4;function s(t,e=1){let r=i;for(;r%e;)r+=1;return i=r+t,r}const a=s(4,4),n=s(4,4),o=s(4,4);s(8,8)},79630:(t,e,r)=>{"use strict";r.d(e,{A:()=>d});var i=r(49859),s=r(18979),a=r.n(s),n=r(63939),o=r(50932),c=r(11473),l=r(61403),h=r(26429);class u{constructor(t,e){(0,i.A)(this,"pointer",void 0),(0,i.A)(this,"len",void 0),(0,i.A)(this,"view",void 0),this.pointer=t,this.len=e}get byteLength(){return this.len}get buffer(){return c.Lv}get byteOffset(){return this.pointer}getView(){return this.view&&this.view.buffer===c.ce.buffer||(this.view=new DataView((0,c.Lv)(),this.pointer,this.len)),this.view}getFloat32(t,e){return this.getView().getFloat32(t,e)}getFloat64(t,e){return this.getView().getFloat64(t,e)}getInt8(t){return this.getView().getInt8(t)}getInt16(t,e){return this.getView().getInt16(t,e)}getInt32(t,e){return this.getView().getInt32(t,e)}getUint8(t){return this.getView().getUint8(t)}getUint16(t,e){return this.getView().getUint16(t,e)}getUint32(t,e){return this.getView().getUint32(t,e)}setFloat32(t,e,r){this.getView().setFloat32(t,e,r)}setFloat64(t,e,r){this.getView().setFloat64(t,e,r)}setInt8(t,e){this.getView().setInt8(t,e)}setInt16(t,e,r){this.getView().setInt16(t,e,r)}setInt32(t,e,r){this.getView().setInt32(t,e,r)}setUint8(t,e){this.getView().setUint8(t,e)}setUint16(t,e,r){this.getView().setUint16(t,e,r)}setUint32(t,e,r){this.getView().setUint32(t,e,r)}getBigInt64(t,e){return this.getView().getBigInt64(t,e)}getBigUint64(t,e){return this.getView().getBigUint64(t,e)}setBigInt64(t,e,r){this.getView().setBigInt64(t,e,r)}setBigUint64(t,e,r){this.getView().setBigUint64(t,e,r)}}class d extends l.A{constructor(t,e){return super(),(0,i.A)(this,"pointer",void 0),(0,i.A)(this,"len",void 0),this.pointer=t,this.len=e,this.proxy}getIndexValue(t){return n.f[2](this.pointer+t)}setIndexValue(t,e){o.M[2](this.pointer+t,e)}set(t,e=0){new Uint8Array((0,c.Lv)(),this.pointer,this.len).set(t,e)}subarray(t=0,e,r){return r&&!h.USE_THREADS?new d(this.pointer+t,(e||this.len)-t):new Uint8Array((0,c.Lv)(),this.pointer+t,(null!=e?e:this.len)-t)}slice(t=0,e){var r;return a()(r=new Uint8Array((0,c.Lv)(),this.pointer+t,(null!=e?e:this.len)-t)).call(r)}get length(){return this.len}get byteLength(){return this.len}get buffer(){return(0,c.Lv)()}get byteOffset(){return this.pointer}get view(){return new u(this.pointer,this.len)}}},12264:(t,e,r)=>{"use strict";r.d(e,{A:()=>y});var i,s,a=r(49859),n=r(74707),o=r.n(n),c=r(61499),l=r(12085),h=r(11473),u=r(63939),d=r(50932),p=r(99921),f=r(14686),m=r(67672),v=r(29170);class g{constructor(){(0,a.A)(this,"prev",void 0),(0,a.A)(this,"next",void 0),(0,a.A)(this,"data",void 0)}}i=g.prototype,(s=new(o())).set("prev",{0:g,1:1,2:1,3:0,4:0,5:0,6:0,7:0,8:0}),s.set("next",{0:g,1:1,2:1,3:0,4:0,5:0,6:0,7:4,8:0}),s.set("data",{0:1,1:1,2:1,3:0,4:0,5:0,6:0,7:8,8:0}),(0,l.A)(i,c.Og,!0),(0,l.A)(i,c.dc,4),(0,l.A)(i,c.g7,12),(0,l.A)(i,c.JY,s);class y{constructor(){(0,a.A)(this,"length",0),(0,a.A)(this,"head",0),(0,a.A)(this,"tail",0)}createNode(t,e,r=!1){const i=h.s_.malloc(12);if(d.M[20](i+4,0),d.M[20](i,0),m.ai(e))if(20===e)d.M[20](i+8,t);else{const r=h.s_.malloc((0,p.A)(e));d.M[e](r,t),d.M[20](i+8,r)}else if(r)d.M[20](i+8,t);else{const r=h.s_.malloc((0,p.A)(e));(0,f.Mr)(r,t[c.o9],(0,p.A)(e)),d.M[20](i+8,r)}return i}getItem(t,e){let r;return r=m.ai(e)?20===e?t:u.f[e](t):(0,v.A)(t,e),r}push(t,e,r=!1){const i=this.createNode(t,e,r);this.tail?(d.M[20](this.tail+4,i),d.M[20](i,this.tail),this.tail=i):(this.head=i,this.tail=i),this.length++}pop(t){const e=this.tail;let r=this.getItem(u.f[20](e+8),t);return this.length>1?(d.M[20](u.f[20](e)+4,0),this.tail=u.f[20](e)):(this.head=0,this.tail=0),this.length--,h.s_.free(u.f[20](e+8)),h.s_.free(e),r}shift(t){const e=this.head;let r=this.getItem(u.f[20](e+8),t);return this.length>1?(d.M[20](u.f[20](e+4),0),this.head=u.f[20](e+4)):(this.head=0,this.tail=0),this.length--,h.s_.free(u.f[20](e+8)),h.s_.free(e),r}unshift(t,e,r=!1){const i=this.createNode(t,e,r);this.head?(d.M[20](this.head,i),d.M[20](i+4,this.head),this.head=i):(this.head=i,this.tail=i),this.length++}forEach(t,e){if(!this.length)return;let r=this.head,i=0;for(;0!==r&&!1!==t(this.getItem(u.f[20](r+8),e),i);)r=u.f[20](r+4),i++}find(t,e){if(!this.length)return 0;let r=this.head,i=0;for(;0!==r;){const s=this.getItem(u.f[20](r+8),e);if(!0===t(s,i))return s;r=u.f[20](r+4),i++}return 0}indexOf(t,e){if(!this.length)return 0;let r=this.head,i=0;for(;0!==r;){if(i===t)return this.getItem(u.f[20](r+8),e);r=u.f[20](r+4),i++}return 0}clear(t,e){if(this.length){let r=this.head;for(;0!==r;){t&&t(this.getItem(u.f[20](r+8),e)),h.s_.free(u.f[20](r+8));const i=u.f[20](r+4);h.s_.free(r),r=i}}this.head=0,this.tail=0,this.length=0}}!function(t){var e=new(o());e.set("length",{0:8,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),e.set("head",{0:g,1:1,2:1,3:0,4:0,5:0,6:0,7:4,8:0}),e.set("tail",{0:g,1:1,2:1,3:0,4:0,5:0,6:0,7:8,8:0}),(0,l.A)(t,c.Og,!0),(0,l.A)(t,c.dc,4),(0,l.A)(t,c.g7,12),(0,l.A)(t,c.JY,e)}(y.prototype)},20756:(t,e,r)=>{"use strict";r.d(e,{A:()=>a});var i=r(7417),s=r(40046);function a(){return s.WQ(i.hf,1,9,2)}},72703:(t,e,r)=>{"use strict";r.d(e,{A:()=>s});var i=r(67672);function s(t){return i.ai(t)&&t>=0}},74503:(t,e,r)=>{"use strict";r.d(e,{A:()=>l});var i=r(99921),s=r(11473),a=r(14686),n=r(95335),o=r(34677),c=r(29170);function l(t,e){(0,o.A)(e)||(e=t,t=null);const r=(0,i.A)(e),l=s.s_.malloc(r);if(!l)throw new TypeError("cannot alloc memory for struct");(0,a.sO)(l,0,r);const h=(0,c.A)(l,e),u=new e;return t&&n.X$(u,t),n.__(u,((t,e)=>{(0,o.A)(t)&&(h[e]=t)})),h}},14686:(t,e,r)=>{"use strict";r.d(e,{JW:()=>f,Mr:()=>u,bg:()=>v,lH:()=>g,lW:()=>d,qW:()=>y,s3:()=>m,sO:()=>p}),r(50314);var i=r(5496),s=r.n(i),a=r(11473),n=r(50011),o=r(50932),c=r(79630),l=r(26429),h=r(63939);function u(t,e,r){(0,a.eq)().set((0,a.eq)().subarray(e,e+r),t)}function d(t,e,r){(0,a.eq)().set(r.subarray(0,e),t)}function p(t,e,r){var i;s()(i=(0,a.eq)().subarray(t,t+r)).call(i,e)}function f(t,e){return l.USE_THREADS?m(t,e):new c.A(t,e)}function m(t,e){return new Uint8Array((0,a.Lv)(),t,e)}function v(t,e){return new Uint16Array((0,a.Lv)(),t,e)}function g(t,e){let r=0;for(;h.f[4]((t+=1)-1)&&(r++,!(e&&r>=e)););const i=Math.min(r,null!=e?e:r);return n.decode(m(t,i))}function y(t,e,r,i=!0){const s=n.encode(e);let a=s.length,c=i?1:0;r&&a-c>r&&(a=r-c),d(t,a,s),i&&o.M[11](t+a,0)}},99921:(t,e,r)=>{"use strict";r.d(e,{A:()=>n});var i=r(61499),s=r(67672),a=r(6704);function n(t){return s.ai(t)?a.i[t]||0:s.Pc(t)&&t.prototype[i.Og]?t.prototype[i.g7]:0}},29170:(t,e,r)=>{"use strict";r.d(e,{A:()=>l});var i=r(61499),s=r(80098),a=r(25323),n=r(95797),o=r(67672),c=r(10534);function l(t,e){return arguments[2]&&o.Yj(arguments[2])&&(e=e.prototype,c.__(arguments[2],(t=>{const r=e[i.JY];e=r.get(t)[0]}))),n.A.proxy?(0,s.I_)(t,e):(0,a.l)(t,e)}},94300:(t,e,r)=>{"use strict";r.d(e,{A:()=>c});var i=r(11473),s=r(61499),a=r(80098),n=r(25323),o=r(95797);function c(t){const e=t[s.o9];e&&(i.s_.free(e),t[s.o9]=0,o.A.proxy?(0,a.SQ)(t):(0,n.X)(t))}},61499:(t,e,r)=>{"use strict";r.d(e,{JY:()=>l,Og:()=>a,dc:()=>o,g7:()=>n,kE:()=>h,o9:()=>c});var i=r(16781),s=r.n(i);const a=s()("Struct"),n=s()("StructLength"),o=s()("StructMaxBaseTypeByteLength"),c=s()("StructAddress"),l=(s()("StructKeysQueue"),s()("StructKeysMeta")),h=(s()("StructKeysInstance"),s()("StructProxyRevoke"))},10047:(t,e,r)=>{"use strict";r.d(e,{A:()=>i});const i="AGFzbQEAAAABLAdgAX8Bf2ABfwF+YAJ/fwF/YAJ/fgF+YAN/f38Bf2ADf35+AX5gA39/fgF/AhIBA2VudgZtZW1vcnkCAwGAgAQDKCcAAAABAgICAwICAgMCAgIDAgICAwICAgMCAgIDAgICAwQEBAUCAgYHhgMnBWxvYWQ4AAAGbG9hZDE2AAEGbG9hZDMyAAIGbG9hZDY0AAMGc3RvcmU4AAQHc3RvcmUxNgAFB3N0b3JlMzIABgdzdG9yZTY0AAcEYWRkOAAIBWFkZDE2AAkFYWRkMzIACgVhZGQ2NAALBHN1YjgADAVzdWIxNgANBXN1YjMyAA4Fc3ViNjQADwRhbmQ4ABAFYW5kMTYAEQVhbmQzMgASBWFuZDY0ABMDb3I4ABQEb3IxNgAVBG9yMzIAFgRvcjY0ABcEeG9yOAAYBXhvcjE2ABkFeG9yMzIAGgV4b3I2NAAbCWV4Y2hhbmdlOAAcCmV4Y2hhbmdlMTYAHQpleGNoYW5nZTMyAB4KZXhjaGFuZ2U2NAAfEWNvbXBhcmVfZXhjaGFuZ2U4ACASY29tcGFyZV9leGNoYW5nZTE2ACESY29tcGFyZV9leGNoYW5nZTMyACISY29tcGFyZV9leGNoYW5nZTY0ACMGbm90aWZ5ACQEd2FpdAAlC3dhaXRUaW1lb3V0ACYKugMnCAAgAP4SAAALCAAgAP4TAQALCAAgAP4QAgALCAAgAP4RAwALDAAgACAB/hkAACABCwwAIAAgAf4aAQAgAQsMACAAIAH+FwIAIAELDAAgACAB/hgDACABCwoAIAAgAf4gAAALCgAgACAB/iEBAAsKACAAIAH+HgIACwoAIAAgAf4fAwALCgAgACAB/icAAAsKACAAIAH+KAEACwoAIAAgAf4lAgALCgAgACAB/iYDAAsKACAAIAH+LgAACwoAIAAgAf4vAQALCgAgACAB/iwCAAsKACAAIAH+LQMACwoAIAAgAf41AAALCgAgACAB/jYBAAsKACAAIAH+MwIACwoAIAAgAf40AwALCgAgACAB/jwAAAsKACAAIAH+PQEACwoAIAAgAf46AgALCgAgACAB/jsDAAsKACAAIAH+QwAACwoAIAAgAf5EAQALCgAgACAB/kECAAsKACAAIAH+QgMACwwAIAAgASAC/koAAAsMACAAIAEgAv5LAQALDAAgACABIAL+SAIACwwAIAAgASAC/kkDAAsKACAAIAH+AAIACwwAIAAgAUJ//gECAAsMACAAIAEgAv4BAgAL"},82854:(t,e,r)=>{"use strict";r.d(e,{KJ:()=>l,Ko:()=>h,Ts:()=>u});var i=r(4919),s=r(4624),a=r(88096),n=r(10047),o=r(40046);const c="src/cheap/thread/asm/atomics.ts";let l;function h(){return!!l}function u(t,e,r){try{if(!("function"==typeof SharedArrayBuffer&&t.buffer instanceof SharedArrayBuffer))return;{const s=a.bx((0,i.E_)(n.A),{shared:!0,initial:e,maximum:r});l=new WebAssembly.Instance(new WebAssembly.Module(s),{env:{memory:t}})}(0,o.$Z)({add:function(t,e,r){switch(r){case 5:case 3:return 255&l.exports.add8(t,e);case 12:return l.exports.add8(t,e);case 14:return l.exports.add16(t,e);case 7:return 65535&l.exports.add16(t,e);case 16:return l.exports.add32(t,e);case 9:return 4294967295&l.exports.add32(t,e);case 21:return l.exports.add64(t,e);case 22:return BigInt.asUintN(64,l.exports.add64(t,e))}},sub:function(t,e,r){switch(r){case 5:case 3:return 255&l.exports.sub8(t,e);case 12:return l.exports.sub8(t,e);case 14:return l.exports.sub16(t,e);case 7:return 65535&l.exports.sub16(t,e);case 16:return l.exports.sub32(t,e);case 9:return 4294967295&l.exports.sub32(t,e);case 21:return l.exports.sub64(t,e);case 22:return BigInt.asUintN(64,l.exports.sub64(t,e))}},and:function(t,e,r){switch(r){case 5:case 3:return 255&l.exports.and8(t,e);case 12:return l.exports.and8(t,e);case 14:return l.exports.and16(t,e);case 7:return 65535&l.exports.and16(t,e);case 16:return l.exports.and32(t,e);case 9:return 4294967295&l.exports.and32(t,e);case 21:return l.exports.and64(t,e);case 22:return BigInt.asUintN(64,l.exports.and64(t,e))}},or:function(t,e,r){switch(r){case 5:case 3:return 255&l.exports.or8(t,e);case 12:return l.exports.or8(t,e);case 14:return l.exports.or16(t,e);case 7:return 65535&l.exports.or16(t,e);case 16:case 9:return l.exports.or32(t,e);case 21:return l.exports.or64(t,e);case 22:return BigInt.asUintN(64,l.exports.or64(t,e))}},xor:function(t,e,r){switch(r){case 5:case 3:return 255&l.exports.xor8(t,e);case 12:return l.exports.xor8(t,e);case 14:return l.exports.xor16(t,e);case 7:return 65535&l.exports.xor16(t,e);case 16:case 9:return l.exports.xor32(t,e);case 21:return l.exports.xor64(t,e);case 22:return BigInt.asUintN(64,l.exports.xor64(t,e))}},store:function(t,e,r){switch(r){case 5:case 12:case 3:return l.exports.store8(t,e);case 14:case 7:return l.exports.store16(t,e);case 16:case 9:return l.exports.store32(t,e);case 21:case 22:return l.exports.store64(t,e)}},load:function(t,e){switch(e){case 5:case 3:return 255&l.exports.load8(t);case 12:return l.exports.load8(t);case 14:case 7:return l.exports.load16(t);case 16:return l.exports.load32(t);case 9:return 4294967295&l.exports.load32(t);case 21:return l.exports.load64(t);case 22:return BigInt.asUintN(64,l.exports.load64(t))}},compareExchange:function(t,e,r,i){switch(i){case 5:case 3:return 255&l.exports.compare_exchange8(t,e,r);case 12:return l.exports.compare_exchange8(t,e,r);case 14:return l.exports.compare_exchange16(t,e,r);case 7:return 65535&l.exports.compare_exchange16(t,e,r);case 16:return l.exports.compare_exchange32(t,e,r);case 9:return 4294967295&l.exports.compare_exchange32(t,e,r);case 21:return l.exports.compare_exchange64(t,e,r);case 22:return BigInt.asUintN(64,l.exports.compare_exchange64(t,e,r))}},exchange:function(t,e,r){switch(r){case 5:case 3:return 255&l.exports.exchange8(t,e);case 12:return l.exports.exchange8(t,e);case 14:return l.exports.exchange16(t,e);case 7:return 65535&l.exports.exchange16(t,e);case 16:return l.exports.exchange32(t,e);case 9:return 4294967295&l.exports.exchange32(t,e);case 21:return l.exports.exchange64(t,e);case 22:return BigInt.asUintN(64,l.exports.exchange64(t,e))}},notify:function(t,e){return l.exports.notify(t,e)},wait:function(t,e){return l.exports.wait(t,e)},waitTimeout:function(t,e,r){return l.exports.waitTimeout(t,e,BigInt(0|r)*BigInt(1e6))}})}catch(t){s.R8("atomics asm not support, cannot use asm atomics function",c,291)}}},40046:(t,e,r)=>{"use strict";let i,s,a,n,o,c,l,h,u,d,p,f,m,v;function g(t){t.add&&(i=t.add),t.sub&&(s=t.sub),t.and&&(a=t.and),t.or&&(n=t.or),t.xor&&(o=t.xor),t.store&&(c=t.store),t.load&&(l=t.load),t.compareExchange&&(h=t.compareExchange),t.exchange&&(u=t.exchange),t.notify&&(d=t.notify),t.wait&&(p=t.wait),t.waitTimeout&&(f=t.waitTimeout),t.waitAsync&&(m=t.waitAsync),t.waitTimeoutAsync&&(v=t.waitTimeoutAsync)}r.d(e,{$Z:()=>g,Hh:()=>l,I8:()=>o,M_:()=>c,Uo:()=>a,WQ:()=>i,cv:()=>u,j4:()=>f,jb:()=>s,me:()=>d,or:()=>n,p_:()=>h,uk:()=>p})},33856:(t,e,r)=>{"use strict";r.d(e,{A:()=>P});var i=r(61240),s=r.n(i),a=r(86932),n=r(7972),o=r(40046),c=r(26429),l=r(86834),h=r(95797);let u;const d=c.USE_THREADS||!l.A.chrome&&h.A.atomics||l.A.checkVersion(l.A.majorVersion,"94",!0);function p(t,e,r,i){if(d)return Atomics.add(u(r),t>>>i,e);{const s=u(r),a=t>>>i,n=s[a];return s[a]+=e,n}}function f(t,e,r,i){if(d)return Atomics.sub(u(r),t>>>i,e);{const s=u(r),a=t>>>i,n=s[a];return s[a]-=e,n}}function m(t,e,r,i){if(d)return Atomics.and(u(r),t>>>i,e);{const s=u(r),a=t>>>i,n=s[a];return s[a]&=e,n}}function v(t,e,r,i){if(d)return Atomics.or(u(r),t>>>i,e);{const s=u(r),a=t>>>i,n=s[a];return s[a]|=e,n}}function g(t,e,r,i){if(d)return Atomics.xor(u(r),t>>>i,e);{const s=u(r),a=t>>>i,n=s[a];return s[a]^=e,n}}function y(t,e,r,i){if(d)return Atomics.store(u(r),t>>>i,e);{const s=u(r),a=t>>>i,n=s[a];return s[a]=e,n}}function A(t,e,r){return d?Atomics.load(u(e),t>>>r):u(e)[t>>>r]}function b(t,e,r,i,s){if(d)return Atomics.compareExchange(u(i),t>>>s,e,r);{const a=u(i),n=t>>>s,o=a[n];return o===e&&(a[n]=r),o}}function x(t,e,r,i){if(d)return Atomics.exchange(u(r),t>>>i,e);{const s=u(r),a=t>>>i,n=s[a];return s[a]=e,n}}function w(t,e){return d?Atomics.notify(u(16),t>>>2,e):void 0}const k={ok:0,"not-equal":1,"timed-out":2};function T(t,e){return k[Atomics.wait(u(16),t>>>2,e)]}function _(t,e,r){return k[Atomics.wait(u(16),t>>>2,e,r)]}async function I(t,e){if(Atomics.waitAsync){const r=Atomics.waitAsync(u(16),t>>>2,e);return r.async?k[await r.value]:k[r.value]}if(A(t)!==e)return 1;for(;A(t)===e;)await new(s())((t=>{(0,n.A)((()=>{t()}))}));return 0}async function S(t,e,r){if(Atomics.waitAsync){const i=Atomics.waitAsync(u(16),t>>>2,e,r);return i.async?k[await i.value]:k[i.value]}if(A(t)!==e)return 1;{const i=(0,a.A)();for(;A(t)===e&&(0,a.A)()-i<r;)await new(s())((t=>{(0,n.A)((()=>{t()}))}));return A(t)!==e?0:2}}function P(t){u=t,(0,o.$Z)({add:p,sub:f,and:m,or:v,xor:g,store:y,load:A,compareExchange:b,exchange:x,notify:w,wait:T,waitTimeout:_,waitAsync:I,waitTimeoutAsync:S})}},42518:(t,e,r)=>{"use strict";r.d(e,{Ts:()=>d,XR:()=>g,mq:()=>m,uk:()=>v,vP:()=>f,zr:()=>p});var i,s,a=r(49859),n=r(74707),o=r.n(n),c=r(61499),l=r(12085),h=r(73783),u=r(40046);function d(t,e){return u.M_(t,0,16,2),0}function p(t){return u.M_(t,0,16,2),0}function f(t){return u.WQ(t,1,16,2),u.me(t,1),0}function m(t){return u.WQ(t,1,16,2),u.me(t,1073741824),0}function v(t,e){let r=u.Hh(t,16,2);return h.Tl(e),u.uk(t,r),h.s2(e),0}function g(t,e,r){let i=u.Hh(t,16,2);h.Tl(e);let s=u.j4(t,i,r);return h.s2(e),2===s?110:0}i=class{constructor(){(0,a.A)(this,"atomic",void 0)}}.prototype,(s=new(o())).set("atomic",{0:16,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),(0,l.A)(i,c.Og,!0),(0,l.A)(i,c.dc,4),(0,l.A)(i,c.g7,4),(0,l.A)(i,c.JY,s)},81574:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>o});var i=r(84149),s=(r(55013),r(10576)),a=r(67672);let n=s.TK;function o(t){let e,r;n.onmessage=o=>{const c=o.data,l=c.type,h=c.data;switch(l){case"init":if(s.TK.CHeap&&s.TK.CHeap.initThread&&s.TK.CHeap.Config.USE_THREADS)return void s.TK.CHeap.initThread(h).then((()=>{n.postMessage({type:"ready"})}));n.postMessage({type:"ready"});break;case"run":n.postMessage({type:"running"}),r=t(h.params),u=h.port,e=new i.Ay(u),e.on(i.S3,(async t=>{const i=t.method,s=t.params;if(a.Pc(r[i]))try{r[i].transfer||(r[i].transfer=[]);const a=await r[i](...s.params);e.reply(t,a,null,r[i].transfer),r[i].transfer.length=0}catch(r){e.reply(t,-2097152,{message:r.message})}}));break;case"stop":e&&e.destroy(),s.TK.__freeSmartPtr__&&s.TK.__freeSmartPtr__(),n.postMessage({type:"stopped"})}var u}}},26848:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>a});var i=r(10576);let s=i.TK;function a(t){let e;s.onmessage=r=>{const a=r.data,n=a.type,o=a.data;switch(n){case"init":if(i.TK.CHeap&&i.TK.CHeap.initThread&&i.TK.CHeap.Config.USE_THREADS)return void i.TK.CHeap.initThread(o).then((()=>{s.postMessage({type:"ready"})}));s.postMessage({type:"ready"});break;case"run":e=t(o.params);break;case"stop":e&&e.then?e.then((t=>{i.TK.__freeSmartPtr__&&i.TK.__freeSmartPtr__(),s.postMessage({type:"stopped",data:t})})):(i.TK.__freeSmartPtr__&&i.TK.__freeSmartPtr__(),s.postMessage({type:"stopped",data:e}))}}}},67524:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>o});var i=r(84149),s=(r(55013),r(10576)),a=r(67672);let n=s.TK;function o(t){let e;n.onmessage=r=>{const o=r.data,c=o.type,l=o.data;switch(c){case"init":if(s.TK.CHeap&&s.TK.CHeap.initThread&&s.TK.CHeap.Config.USE_THREADS)return void s.TK.CHeap.initThread(l).then((()=>{n.postMessage({type:"ready"})}));n.postMessage({type:"ready"});break;case"run":n.postMessage({type:"running"}),h=l.port,e=new i.Ay(h),e.on(i.S3,(async r=>{const i=r.method,s=r.params;if(a.Pc(t[i]))try{t[i].transfer||(t[i].transfer=[]);const a=await t[i](...s.params);e.reply(r,a,null,t[i].transfer),t[i].transfer.length=0}catch(t){e.reply(r,-2097152,{message:t.message})}}));break;case"stop":e&&e.destroy(),s.TK.__freeSmartPtr__&&s.TK.__freeSmartPtr__(),n.postMessage({type:"stopped"})}var h}}},73783:(t,e,r)=>{"use strict";r.d(e,{Tl:()=>v,Ts:()=>p,bh:()=>m,eu:()=>d,s2:()=>f,zr:()=>g});var i,s,a=r(49859),n=r(74707),o=r.n(n),c=r(61499),l=r(12085),h=r(40046),u=r(39638);class d{constructor(){(0,a.A)(this,"atomic",void 0)}}function p(t){return h.M_(t,0,16,2),0}function f(t,e=!1){let r;if(0!==(r=h.p_(t,0,1,16,2)))do{2!=r&&0===h.p_(t,1,2,16,2)||!e&&(0,u.A)()&&h.uk(t,2)}while(0!==(r=h.p_(t,0,2,16,2)));return 0}function m(t){return 0===h.p_(t,0,1,16,2)?0:16}function v(t){return 1!==h.jb(t,1,16,2)&&(h.M_(t,0,16,2),h.me(t,1)),0}function g(t){return h.M_(t,0,16,2),0}i=d.prototype,(s=new(o())).set("atomic",{0:16,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),(0,l.A)(i,c.Og,!0),(0,l.A)(i,c.dc,4),(0,l.A)(i,c.g7,4),(0,l.A)(i,c.JY,s)},79490:(t,e,r)=>{"use strict";r.d(e,{Ts:()=>f,XR:()=>A,Zr:()=>y,bE:()=>v,uk:()=>g,zr:()=>m});var i,s,a=r(49859),n=r(74707),o=r.n(n),c=r(61499),l=r(12085),h=r(73783),u=r(63939),d=r(50932),p=r(40046);function f(t,e){return p.M_(t,0|e,16,2),h.Ts(t+4),0}function m(t){return h.zr(t+4),0}function v(t){return p.WQ(t,1,16,2),p.me(t,1),0}function g(t){for(;p.uk(t,0),p.jb(t,1,16,2)<=0;)p.WQ(t,1,16,2);return 0}function y(t){return h.s2(t+4),u.f[16](t)>0?(d.M[16](t,u.f[16](t)-1),h.Tl(t+4),0):(h.Tl(t+4),11)}function A(t,e){return 2!==p.j4(t,0,e)&&p.jb(t,1,16,2)<=0?(p.WQ(t,1,16,2),110):0}i=class{constructor(){(0,a.A)(this,"atomic",void 0),(0,a.A)(this,"mutex",void 0)}}.prototype,(s=new(o())).set("atomic",{0:16,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),s.set("mutex",{0:h.eu,1:0,2:0,3:0,4:0,5:0,6:0,7:4,8:0}),(0,l.A)(i,c.Og,!0),(0,l.A)(i,c.dc,4),(0,l.A)(i,c.g7,8),(0,l.A)(i,c.JY,s)},88506:(t,e,r)=>{"use strict";r.d(e,{nE:()=>I,nx:()=>S,pt:()=>_});var i=r(16781),s=r.n(i),a=r(74707),n=r.n(a),o=r(96984),c=r.n(o),l=r(61240),h=r.n(l),u=r(11473),d=r(84149),p=(r(55013),r(61837)),f=r(26429),m=r(67672),v=r(10576),g=r(62100),y=r(95073);let A=v.TK.Worker,b=v.TK.MessageChannel;r(81574),r(26848),r(67524);const x=(0,p.A)(81574,{varName:"init"}),w=((0,p.A)(26848,{varName:"init"}),(0,p.A)(67524,{varName:"init"}),s()("revoke")),k=new(n());function T(t,e){return`${t}_${e}`}function _(t,e,r){e=e||{},m.Pc(e)&&(r=e,e={});let i,s=[];function a(...e){const i=new t(...e);return new(h())((e=>{const s={$worker:null,$ipc:null,$channel:null,$moduleId:(0,g.A)(r),$stackPointer:0,$instance:i,$type:"class"},{proxy:a,revoke:n}=Proxy.revocable(s,{get(e,r,a){if(e[r])return s[r];if(r in t.prototype&&"function"==typeof t.prototype[r]){const t=function(...t){return i[r](...t)};t.transfer=function(...t){return{invoke:function(...t){return i[r](...t)}}},e[r]=t}return e[r]}});s[w]=n,e(a)}))}return i=(...i)=>{let a;if(m.Pc(r))a=r();else{let e;const i=T(r,"class");if(k.has(i))e=k.get(i).url,k.get(i).refCount++;else{const s=(0,p.A)(r,{varName:`__module_${t.name}__`,exportName:`__${t.name}__`,pointName:t.name,exportIsClass:!0}),a=`\n            self.CHEAP_DISABLE_THREAD = ${v.TK.CHEAP_DISABLE_THREAD}\n            self.CHEAP_HEAP_INITIAL = ${v.TK.CHEAP_HEAP_INITIAL}\n            self.CHEAP_HEAP_MAXIMUM = ${v.TK.CHEAP_HEAP_MAXIMUM}\n            ${v.TK.CHEAP_POLYFILL_URL?`self.CHEAP_POLYFILL_URL = '${v.TK.CHEAP_POLYFILL_URL}'`:""}\n            ${v.TK.CHEAP_POLYFILL_URL?`importScripts('${v.TK.CHEAP_POLYFILL_URL}');`:""}\n            ${s}\n            function run(params) {\n              params.unshift(null)\n              return new (Function.prototype.bind.apply(__module_${t.name}__.__${t.name}__, params))()\n            }\n            ${x}\n            init.default(run);\n          `;{const t=new Blob([a],{type:"text/javascript"});e=c().createObjectURL(t)}k.set(i,{url:e,refCount:1})}a=new A(e)}const n=new b;return new(h())(((o,c)=>{var l;const h=f.USE_THREADS?u.s_.alignedAlloc(f.STACK_ALIGNMENT,e.stackSize?(0,y.A)(e.stackSize,f.STACK_ALIGNMENT):f.STACK_SIZE):0;a.onmessage=e=>{const c=e.data,l=c.type;switch(c.data,l){case"ready":a.postMessage({type:"run",data:{port:n.port2,params:i}},[n.port2,...s]);break;case"running":!function(){const e=new d.Ay(n.port1),i={$worker:a,$ipc:e,$channel:n,$moduleId:(0,g.A)(r),$stackPointer:h,$type:"class"},{proxy:s,revoke:c}=Proxy.revocable(i,{get(r,s,a){if(r[s])return i[s];if(s in t.prototype&&"function"==typeof t.prototype[s]){const t=async function(...t){return e.request(s,{params:t})};t.transfer=function(...t){return{invoke:async function(...r){return e.request(s,{params:r},t)}}},r[s]=t}return r[s]}});i[w]=c,o(s)}()}},a.postMessage({type:"init",data:{memory:f.USE_THREADS?u.ce:null,name:e.name||t.name,stackPointer:h,stackSize:null!==(l=e.stackSize)&&void 0!==l?l:f.STACK_SIZE}})}))},{run:!f.USE_THREADS&&!e.dispatchToWorker||e.disableWorker?a:i,transfer:function(...t){return s=t,{run:!f.USE_THREADS&&!e.dispatchToWorker||e.disableWorker?a:i}}}}function I(t){if(t.$worker&&(t.$worker.terminate(),t.$worker=null),t.$moduleId){if(m.Yj(t.$moduleId)){const e=T(t.$moduleId,t.$type);k.has(e)&&(k.get(e).refCount--,0===k.get(e).refCount&&(c().revokeObjectURL(k.get(e).url),k.delete(e)))}t.$moduleId=null}if(t.$ipc&&(t.$ipc.destroy(),t.$ipc=null),t.$stackPointer&&(u.s_.free(t.$stackPointer),t.$stackPointer=0),t.$channel=null,t.$instance=null,t[w]){const e=t[w];t[w]=null,e()}}async function S(t){return t.$worker?new(h())((e=>{t.$worker.onmessage=function(r){const i=r.data,s=i.type,a=i.data;"stopped"===s&&(I(t),e(a))},t.$worker.postMessage({type:"stop"})})):t.$retval?t.$retval:void 0}},6704:(t,e,r)=>{"use strict";r.d(e,{_:()=>s,i:()=>i});const i={2:1,3:1,4:1,5:1,6:2,7:2,8:4,9:4,10:8,11:1,12:1,13:2,14:2,15:4,16:4,17:8,18:4,19:8,20:4,0:4,1:4,22:8,21:8,23:1,24:1,25:4},s={2:0,3:0,4:0,5:0,6:1,7:1,8:2,9:2,10:4,11:0,12:0,13:1,14:1,15:2,16:2,17:4,18:2,19:4,20:2,1:2,0:2,22:4,21:4,23:0,24:0,25:2}},19094:(t,e,r)=>{"use strict";r.d(e,{A:()=>y});var i=r(49859),s=r(61240),a=r.n(s),n=r(48079),o=r.n(n),c=r(5496),l=r.n(c),h=r(11473),u=r(63939),d=r(50932),p=r(26429),f=r(14686),m=r(42518),v=r(73783),g=r(40046);class y{constructor(t,e,r){(0,i.A)(this,"count",void 0),(0,i.A)(this,"url",void 0),(0,i.A)(this,"childImportUrl",void 0),(0,i.A)(this,"childThreads",void 0),this.count=t,this.url=e,this.childImportUrl=r,this.childThreads=[]}async createTheadPoolEntry(t){return new(a())(((e,r)=>{const i=new Worker(this.url),s=h.s_.alignedAlloc(p.STACK_ALIGNMENT,p.STACK_SIZE),a=h.s_.malloc(8);(0,f.sO)(a,0,8),d.M[15](a+4,0),d.M[15](a,2|u.f[15](a));const n=(0,h.pv)();i.onmessage=t=>{if("ready"===t.data.type){const t=s;(0,f.sO)(t,0,20),v.Ts(t+16),m.Ts(t+12),i.postMessage({type:"wait"}),e({id:n,thread:{thread:0,worker:i,stackPointer:s,threadDescriptor:a},threadWait:t})}},this.childImportUrl&&i.postMessage({type:"import",data:{url:this.childImportUrl.href}}),i.postMessage({type:"ready",data:{cheap:{memory:h.ce,stackPointer:s,stackSize:p.STACK_SIZE,id:n},runner:{resource:{tableSize:t.tableSize,module:t.module,initFuncs:t.initFuncs},options:{memoryBase:t.memoryBase,tableBase:t.tableBase,threadDescriptor:a,childImports:t.childImports},imports:t.childImports}}})}))}async ready(t){var e,r;this.childThreads=await a().all(o()(e=l()(r=new Array(this.count)).call(r,0)).call(e,(()=>this.createTheadPoolEntry(t))))}hasFree(){for(let t=0;t<this.childThreads.length;t++)if(0===u.f[15](this.childThreads[t].thread.threadDescriptor+4))return!0;return!1}isPoolThread(t){for(let e=0;e<this.childThreads.length;e++)if(this.childThreads[e].thread.thread===t)return!0;return!1}createThread(t,e,r,i){for(let e=0;e<this.childThreads.length;e++)if(0===u.f[15](this.childThreads[e].thread.threadDescriptor+4))return d.M[15](this.childThreads[e].thread.threadDescriptor+4,1),this.childThreads[e].thread.thread=t,d.M[15](t+8,2|u.f[15](t+8)),v.s2(this.childThreads[e].threadWait+16),d.M[20](this.childThreads[e].threadWait,t),d.M[20](this.childThreads[e].threadWait+4,r),d.M[20](this.childThreads[e].threadWait+8,i),v.Tl(this.childThreads[e].threadWait+16),void m.vP(this.childThreads[e].threadWait+12)}joinThread(t,e){let r;for(let e=0;e<this.childThreads.length;e++)if(this.childThreads[e].thread.thread===t){r=this.childThreads[e];break}return r?(1&u.f[15](t+8)||(g.uk(t+12,1),0!==e&&d.M[20](e,u.f[20](t+4)),d.M[15](r.thread.threadDescriptor+4,0)),0):-1}detachThread(t){let e;for(let r=0;r<this.childThreads.length;r++)if(this.childThreads[r].thread.thread===t){e=this.childThreads[r];break}return e?(d.M[15](e.thread.threadDescriptor,1|u.f[15](e.thread.threadDescriptor)),d.M[15](t+8,1|u.f[15](t+8)),0):-1}destroy(){for(let t=0;t<this.childThreads.length;t++)h.s_.free(this.childThreads[t].thread.stackPointer),h.s_.free(this.childThreads[t].thread.threadDescriptor),this.childThreads[t].thread.worker.terminate();this.childThreads=[]}}},16030:(t,e,r)=>{"use strict";r.d(e,{A:()=>O});var i=r(49859),s=r(74707),a=r.n(s),n=r(96984),o=r.n(n),c=r(61240),l=r.n(c),h=r(86226),u=r.n(h),d=r(63939),p=r(50932),f=r(11473),m=r(95335),v=r(72739),g=r(4624),y=r(67672),A=r(14686),b=r(14621),x=r(1708),w=r(20357),k=r(77775),T=r(26429),_=r(40046),I=r(82854),S=r(80905),P=r(24565),M=r(19094),C=r(42518),R=r(73783),E=r(95797),D=(r(81999),r(10576)),B=r(61837);const L="src/cheap/webassembly/WebAssemblyRunner.ts";let U=D.TK.Worker;function F(){}let $=!1;class O{static getTable(){return f.XI}static mutexLock(t){R.s2(t)}static mutexUnlock(t){R.Tl(t)}static condWait(t,e){C.uk(t,e)}static readPointer(t){return d.f[20](t)}static writePointer(t,e){p.M[20](t,e)}constructor(t,e={}){var r,s;(0,i.A)(this,"resource",void 0),(0,i.A)(this,"instance",void 0),(0,i.A)(this,"options",void 0),(0,i.A)(this,"builtinMalloc",void 0),(0,i.A)(this,"memoryBase",void 0),(0,i.A)(this,"tableBase",void 0),(0,i.A)(this,"childImports",void 0),(0,i.A)(this,"childUrl",void 0),(0,i.A)(this,"childImportUrl",void 0),(0,i.A)(this,"childBlob",void 0),(0,i.A)(this,"childThreads",void 0),(0,i.A)(this,"imports",void 0),(0,i.A)(this,"childReadyPromises",void 0),(0,i.A)(this,"threadPool",void 0),(0,i.A)(this,"initCalling",void 0),(0,i.A)(this,"promisingMap",void 0),this.resource=t,this.builtinMalloc=[],this.initCalling=!1,this.childThreads=new(a()),this.childReadyPromises=[],this.promisingMap=new(a()),y.Yj(e.childImports)?this.childImports=e.childImports:y.Ik(e.childImports)&&e.childImports instanceof Blob&&(this.childImports=o().createObjectURL(e.childImports)),this.memoryBase=t.dataSize?f.s_.alignedAlloc(null!==(r=t.dataAlign)&&void 0!==r?r:8,t.dataSize):0,this.memoryBase&&t.bssSize&&(0,A.sO)(this.memoryBase+(t.dataSize-t.bssSize),0,t.bssSize),e.thread&&e.tableBase&&f.XI.getPointer()!==e.tableBase&&f.XI.alloc(e.tableBase-f.XI.getPointer()),this.tableBase=t.tableSize?f.XI.alloc(t.tableSize):0,this.options=e,this.imports={env:{memory:f.ce,__stack_pointer:f.GE,__indirect_function_table:f.XI.table,clock_time_get:b.WU,clock_res_get:b.Lq,random_get:b.Pp,abort:b.h2,proc_exit:function(t){g.z3(`wasm module exit, code: ${t}`,L,160)},__syscall_renameat:F,__syscall_unlinkat:F,environ_get:b.B,environ_sizes_get:b.CK,fd_close:F,fd_fdstat_get:b.LS,fd_read:F,fd_seek:F,fd_write:b.nK,emscripten_builtin_malloc:t=>{const e=f.s_.malloc(t);return this.builtinMalloc.push(e),e},emscripten_builtin_free:t=>{f.s_.free(t)},emscripten_builtin_memalign:(t,e,r)=>{const i=f.s_.alignedAlloc(e,r);return 0!==i?(p.M[20](t,i),this.builtinMalloc.push(i),0):-1},emscripten_memcpy_big:function(t,e,r){(0,A.Mr)(t,e,r)},__libc_malloc:function(t){return f.s_.malloc(t)},__libc_free:t=>{f.s_.free(t)},malloc:t=>{if(!0===this.initCalling){const e=f.s_.malloc(t);return this.builtinMalloc.push(e),e}return f.s_.malloc(t)},calloc:function(t,e){return f.s_.calloc(t,e)},realloc:function(t,e){return f.s_.realloc(t,e)},aligned_alloc:(t,e)=>f.s_.alignedAlloc(t,e),free:function(t){f.s_.free(t)},posix_memalign:function(t,e,r){const i=f.s_.alignedAlloc(e,r);return 0!==i?(p.M[20](t,i),0):-1},memalign:function(t,e){return f.s_.alignedAlloc(t,e)}},"GOT.func":{malloc:new WebAssembly.Global({mutable:!0,value:"i32"},2),calloc:new WebAssembly.Global({mutable:!0,value:"i32"},3),realloc:new WebAssembly.Global({mutable:!0,value:"i32"},4),aligned_alloc:new WebAssembly.Global({mutable:!0,value:"i32"},5),free:new WebAssembly.Global({mutable:!0,value:"i32"},1)}};{const t=(t,e,r,i)=>{if(this.threadPool&&this.threadPool.hasFree())return this.threadPool.createThread(t,e,r,i),0;this.childUrl||this.createChildUrl();const s=new U(this.childUrl);p.M[15](t,(0,f.pv)()),p.M[16](t+12,1),p.M[15](t+8,0),p.M[20](t+4,0);const a=f.s_.alignedAlloc(T.STACK_ALIGNMENT,T.STACK_SIZE),n=f.s_.malloc(8);let o;(0,A.sO)(n,0,8),this.childThreads.set(d.f[15](t),{thread:t,worker:s,stackPointer:a,threadDescriptor:n});const c=new(l())((t=>{o=t}));E.A.jspi||this.childReadyPromises.push(c);return s.onmessage=t=>{const e=t.data,r=e.type;e.data,"run"===r&&o(0)},this.childImportUrl&&s.postMessage({type:"import",data:{url:this.childImportUrl.href}}),s.postMessage({type:"run",data:{cheap:{memory:f.ce,stackPointer:a,stackSize:T.STACK_SIZE,id:d.f[15](t)},runner:{resource:{tableSize:this.resource.tableSize,module:this.resource.threadModule.module,initFuncs:this.resource.threadModule.initFuncs},options:{memoryBase:this.options.memoryBase||this.memoryBase,tableBase:this.tableBase,thread:t,threadDescriptor:n,childImports:this.childImports},func:r,args:i,imports:this.childImports,thread:t}}}),E.A.jspi?c:0};m.X$(this.imports.env,{wasm_pthread_create:E.A.jspi?new WebAssembly.Suspending(t):t,wasm_pthread_join2:(t,e)=>{if(this.threadPool&&this.threadPool.isPoolThread(t))return this.threadPool.joinThread(t,e),0;if(1&d.f[15](t+8))return this.childThreads.delete(d.f[15](t)),0;_.uk(t+12,1),0!==e&&p.M[20](e,d.f[20](t+4));const r=this.childThreads.get(d.f[15](t));return f.s_.free(r.stackPointer),f.s_.free(r.threadDescriptor),r.worker.terminate(),this.childThreads.delete(d.f[15](t)),(0,A.sO)(t,0,16),0},wasm_pthread_detach2:t=>{if(this.threadPool&&this.threadPool.isPoolThread(t))return this.threadPool.detachThread(t),0;const e=this.childThreads.get(d.f[15](t));p.M[15](e.threadDescriptor,1|d.f[15](e.threadDescriptor)),p.M[15](t+8,1|d.f[15](t+8))}}),m.X$(this.imports.env,x),m.X$(this.imports.env,w),m.X$(this.imports.env,k)}if(this.memoryBase?m.X$(this.imports.env,{__memory_base:this.memoryBase}):e.memoryBase&&m.X$(this.imports.env,{__memory_base:e.memoryBase}),this.tableBase&&m.X$(this.imports.env,{__table_base:this.tableBase}),null!==(s=e.imports)&&void 0!==s&&s.env&&(m.X$(this.imports.env,e.imports.env),e.envKey&&e.importMap)){const t={};m.__(this.imports.env,((r,i)=>{e.importMap[i]&&(t[e.importMap[i]]=r)})),this.imports[e.envKey]=t}this.imports.wasi_snapshot_preview1=this.imports.env}createChildUrl(){{let t="";{r(81999);const e=(0,B.A)(16030,{varName:"__WebAssemblyRunner__",exportName:"__WebAssemblyRunner__",pointName:O.name,exportIsClass:!0}),i=(0,B.A)(81999,{varName:"runThread"});let s="",a="";this.childImports&&(s=`importScripts('${this.childImports}');`),D.TK.CHEAP_POLYFILL_URL&&(a=`importScripts('${D.TK.CHEAP_POLYFILL_URL}');`),t=`\n          ${e}\n          ${i}\n          self.imports = {env:{}};\n          ${a}\n          ${s}\n          runThread.default();\n        `}this.childBlob=new Blob([t],{type:"text/javascript"}),this.childUrl=o().createObjectURL(this.childBlob)}}overrideAtomic(){x.override({atomic_add_i8:I.KJ.exports.add8,atomic_sub_i8:I.KJ.exports.sub8,atomic_and_i8:I.KJ.exports.and8,atomic_or_i8:I.KJ.exports.or8,atomic_xor_i8:I.KJ.exports.xor8,atomic_store_i8:I.KJ.exports.store8,atomic_load_i8:I.KJ.exports.load8,atomic_compare_exchange_i8:I.KJ.exports.compare_exchange8,atomic_exchange_i8:I.KJ.exports.exchange8,atomic_add_i16:I.KJ.exports.add16,atomic_sub_i16:I.KJ.exports.sub16,atomic_and_i16:I.KJ.exports.and16,atomic_or_i16:I.KJ.exports.or16,atomic_xor_i16:I.KJ.exports.xor16,atomic_store_i16:I.KJ.exports.store16,atomic_load_i16:I.KJ.exports.load16,atomic_compare_exchange_i16:I.KJ.exports.compare_exchange16,atomic_exchange_i16:I.KJ.exports.exchange16,atomic_add_i32:I.KJ.exports.add32,atomic_sub_i32:I.KJ.exports.sub32,atomic_and_i32:I.KJ.exports.and32,atomic_or_i32:I.KJ.exports.or32,atomic_xor_i32:I.KJ.exports.xor32,atomic_store_i32:I.KJ.exports.store32,atomic_load_i32:I.KJ.exports.load32,atomic_compare_exchange_i32:I.KJ.exports.compare_exchange32,atomic_exchange_i32:I.KJ.exports.exchange32,atomic_add_i64:I.KJ.exports.add64,atomic_sub_i64:I.KJ.exports.sub64,atomic_and_i64:I.KJ.exports.and64,atomic_or_i64:I.KJ.exports.or64,atomic_xor_i64:I.KJ.exports.xor64,atomic_store_i64:I.KJ.exports.store64,atomic_load_i64:I.KJ.exports.load64,atomic_compare_exchange_i64:I.KJ.exports.compare_exchange64,atomic_exchange_i64:I.KJ.exports.exchange64,atomics_notify:I.KJ.exports.notify,atomics_wait:I.KJ.exports.wait}),m.X$(this.imports.env,x)}async run(t,e){if(y.Ik(t)&&m.X$(this.options.imports,t),P.Ko()&&this.resource.threadModule&&(P.LK||P.Ts(f.ce,T.HEAP_INITIAL,T.HEAP_MAXIMUM,w.override),m.X$(this.imports.env,w)),!S.LK&&S.Ko()&&S.Ts(f.ce,T.HEAP_INITIAL,T.HEAP_MAXIMUM),!$&&I.Ko()&&($=!0,this.overrideAtomic()),this.instance=await WebAssembly.instantiate(this.resource.module,this.imports),this.initRunTime(),this.resource.threadModule&&this.resource.enableThreadPool&&e>0&&!E.A.jspi){this.childUrl||this.createChildUrl();let t=e;this.resource.enableThreadCountRate&&(t*=this.resource.enableThreadCountRate),this.threadPool=new M.A(t,this.childUrl,this.childImportUrl),await this.threadPool.ready({tableSize:this.resource.tableSize,module:this.resource.threadModule.module,initFuncs:this.resource.threadModule.initFuncs,memoryBase:this.options.memoryBase||this.memoryBase,tableBase:this.tableBase,childImports:this.childImports})}}runAsChild(t){y.Ik(t)&&m.X$(this.options.imports,t),P.Ko()&&(P.LK||P.Ts(f.ce,T.HEAP_INITIAL,T.HEAP_MAXIMUM,w.override),m.X$(this.imports.env,w)),!$&&I.Ko()&&($=!0,this.overrideAtomic()),this.instance=new WebAssembly.Instance(this.resource.module,this.imports),this.initRunTime()}async childThreadsReady(){if(!this.childReadyPromises.length)return;const t=this.childReadyPromises;this.childReadyPromises=[],await l().all(t)}initRunTime(){this.builtinMalloc=[],this.initCalling=!0,y.YO(this.resource.initFuncs)&&v.__(this.resource.initFuncs,(t=>{let e;if(this.asm[t]&&(e=this.asm[t]),e)return e()})),this.initCalling=!1}invoke(t,...e){if(!this.asm)return-1;let r;if(this.asm[t]?r=this.asm[t]:this.options.exportMap&&this.options.exportMap[t]&&this.asm[this.options.exportMap[t]]&&(r=this.asm[this.options.exportMap[t]]),r)return r.apply(null,e);g.z3(`the wasm module has not function ${t} to call`,L,693)}async invokeAsync(t,...e){if(!this.asm)return-1;if(!E.A.jspi)return this.invoke(t,...e);let r;if(this.promisingMap.has(t)?r=this.promisingMap.get(t):(this.asm[t]?r=this.asm[t]:this.options.exportMap&&this.options.exportMap[t]&&this.asm[this.options.exportMap[t]]&&(r=this.asm[this.options.exportMap[t]]),r=WebAssembly.promising(r),this.promisingMap.set(t,r)),r)return r.apply(null,e);g.z3(`the wasm module has not function ${t} to call`,L,734)}get asm(){return this.instance&&this.instance.exports}getInstance(){return this.instance}getChildThreadCount(){return this.childThreads.size}destroy(){var t,e;null!==(t=this.builtinMalloc)&&void 0!==t&&t.length&&(v.__(this.builtinMalloc,(t=>{f.s_.free(t)})),this.builtinMalloc.length=0),this.memoryBase&&(f.s_.free(this.memoryBase),this.memoryBase=null),this.tableBase&&(f.XI.free(this.tableBase),this.tableBase=0),this.childImports&&(o().revokeObjectURL(this.childImports),this.childImports=null),this.childUrl&&(y.Yj(this.childUrl)&&o().revokeObjectURL(this.childUrl),this.childUrl=null),this.childBlob=null,this.childImportUrl=null,this.childReadyPromises.length=0,this.childThreads.size&&u()(e=this.childThreads).call(e,((t,e)=>{1&d.f[15](t.threadDescriptor)||(g.R8("has child thread running, maybe resource leakage",L,790),t.worker.terminate(),p.M[16](t.thread+12,0),t.stackPointer&&f.s_.free(t.stackPointer),f.s_.free(t.threadDescriptor),this.childThreads.delete(e))})),this.builtinMalloc=null,this.instance=null,this.options.thread&&(this.options.threadDescriptor&&p.M[15](this.options.threadDescriptor+4,0),this.options.threadDescriptor&&(1&d.f[15](this.options.threadDescriptor)||4&d.f[15](this.options.thread+8))?2&d.f[15](this.options.threadDescriptor)||(f.wE&&f.s_.free(f.wE),f.s_.free(this.options.threadDescriptor),(0,A.sO)(this.options.thread,0,16),self.close()):(p.M[16](this.options.thread+12,0),_.me(this.options.thread+12,1))),this.threadPool&&this.threadPool.destroy(),this.threadPool=null,this.promisingMap&&(this.promisingMap.clear(),this.promisingMap=null)}}},76045:(t,e,r)=>{"use strict";r.d(e,{A:()=>y});var i=r(18979),s=r.n(i),a=r(61240),n=r.n(a),o=r(67672),c=r(24175),l=r(34531),h=r(88096),u=r(92647),d=r(95335),p=r(26429),f=r(86834),m=r(44690),v=r(729),g=r(4304);async function y(t,e={}){let r,i,a,y,A,b,x;if(e=d.X$({enableThread:p.USE_THREADS,initFuncs:e.child?[]:["__wasm_apply_data_relocs","_initialize"]},e),o.ai(t.dataSize)&&o.ai(t.tableSize))if(i=t.dataSize,y=t.dataSize,a=t.dataAlign,A=t.dataAlign,b=t.bssSize,o.Yj(t.source)){const e={method:"GET",headers:{},mode:"cors",cache:"default",referrerPolicy:"no-referrer-when-downgrade"};if(o.Pc(WebAssembly.compileStreaming))r=await WebAssembly.compileStreaming(fetch(t.source,e));else{const i=await fetch(t.source,e);x=await i.arrayBuffer(),r=await WebAssembly.compile(x)}}else r=await WebAssembly.compile(t.source),x=o.sv(t.source)?t.source:t.source.buffer;else{const d={ioReader:new c.A(1048576),ioWriter:new l.A(1048576),bufferEnded:!1,compileStopped:!1,error:"",abortController:null,pullResolve:null,bufferResolve:null,buffers:[],data:{},options:e},g=new Response(new ReadableStream({async start(e){if(o.Yj(t.source)){var r;"function"==typeof AbortController&&(d.abortController=new AbortController);const i={method:"GET",headers:{},mode:"cors",cache:"default",referrerPolicy:"no-referrer-when-downgrade",signal:null===(r=d.abortController)||void 0===r?void 0:r.signal},s=await fetch(t.source,i);let a;s.ok&&s.status>=200&&s.status<=299?a=s.body.getReader():e.error(`Http code invalid, ${s.status} ${s.statusText}`);const n=[];d.ioReader.onFlush=async t=>{let e=0;for(;n.length&&e<t.length;){const r=n.shift();r.length>t.length-e?(t.set(r.subarray(0,t.length-e),e),n.unshift(r.subarray(t.length-e)),e=t.length):(t.set(r,e),e+=r.length)}if(e>=t.length)return t.length;const{value:r,done:i}=await a.read();return i?e>0?e:-1048576:(d.buffers.push(r),r.length>t.length-e?(t.set(r.subarray(0,t.length-e),e),n.push(r.subarray(t.length-e)),t.length):(t.set(r,e),e+=r.length,e))}}else{let e=0,r=t.source.byteLength;const i=o.sv(t.source)?new Uint8Array(t.source):t.source;d.ioReader.onFlush=async t=>{if(e>=r)return-1048576;const s=Math.min(t.length,r-e);return t.set(i.subarray(e,e+s),0),e+=s,s}}d.ioWriter.onFlush=async t=>{if(d.pullResolve)return d.pullResolve(s()(t).call(t)),d.pullResolve=null,0;const e=await new(n())((t=>{d.bufferResolve=t}));return e.enqueue(s()(t).call(t)),d.bufferEnded&&e.close(),0},async function(t){try{for(await t.ioWriter.writeUint32(await t.ioReader.readUint32()),await t.ioWriter.writeUint32(await t.ioReader.readUint32());;){if(t.compileStopped){t.abortController&&t.abortController.abort();break}const e=await t.ioReader.readUint8();if(t.options.child&&11===e){await t.ioWriter.writeUint8(e),await(0,h.$z)(t.ioWriter,7),await(0,h.$z)(t.ioWriter,1),await(0,h.$z)(t.ioWriter,0),await t.ioWriter.writeUint8(65),await t.ioWriter.writeUint8(0),await t.ioWriter.writeUint8(11),await(0,h.$z)(t.ioWriter,1),await t.ioWriter.writeUint8(0);const r=await(0,h.GW)(t.ioReader);await t.ioReader.skip(r);continue}await t.ioWriter.writeUint8(e);const r=await(0,h.GW)(t.ioReader),i=t.ioReader.getPos();if(0===e){await(0,h.$z)(t.ioWriter,r);const e=t.ioReader.getPos(),i=await(0,h.GW)(t.ioReader),s=await t.ioReader.readString(i);if(await(0,h.$z)(t.ioWriter,i),await t.ioWriter.writeString(s),"dylink.0"===s){const i=t.ioReader.getPos()+(BigInt(Math.floor(r))-(t.ioReader.getPos()-e));for(;t.ioReader.getPos()<i;){const e=await t.ioReader.readUint8();await t.ioWriter.writeUint8(e);const r=await(0,h.GW)(t.ioReader);await(0,h.$z)(t.ioWriter,r),1===e?(t.data.dataSize=await(0,h.GW)(t.ioReader),t.data.dataAlign=await(0,h.GW)(t.ioReader),t.data.tableSize=await(0,h.GW)(t.ioReader),t.data.tableAlign=await(0,h.GW)(t.ioReader),await(0,h.$z)(t.ioWriter,t.data.dataSize),await(0,h.$z)(t.ioWriter,t.data.dataAlign),await(0,h.$z)(t.ioWriter,t.data.tableSize),await(0,h.$z)(t.ioWriter,t.data.tableAlign)):await t.ioWriter.writeBuffer(await t.ioReader.readBuffer(r))}}}else if(11===e){await(0,h.$z)(t.ioWriter,r);const e=await(0,h.GW)(t.ioReader);if(await(0,h.$z)(t.ioWriter,e),e){for(await(0,h.$z)(t.ioWriter,await(0,h.GW)(t.ioReader));;){const e=await t.ioReader.readUint8();if(await t.ioWriter.writeUint8(e),11===e)break}const e=await(0,h.GW)(t.ioReader);t.data.dataSize?t.data.bssSize=t.data.dataSize-e:t.data.dataSize=e,await(0,h.$z)(t.ioWriter,e)}}else if(2===e){const e=new v.A(new Uint8Array(r+100));let s=await(0,h.GW)(t.ioReader);(0,h.tt)(e,s);let a=0;for(;s--;){const r=await(0,h.GW)(t.ioReader);(0,h.tt)(e,r),e.writeBuffer(await t.ioReader.readBuffer(r));const i=await(0,h.GW)(t.ioReader);(0,h.tt)(e,i),e.writeBuffer(await t.ioReader.readBuffer(i));const s=await t.ioReader.readUint8();switch(e.writeUint8(s),s){case 0:(0,h.tt)(e,await(0,h.GW)(t.ioReader));break;case 3:(0,h.p2)(e,await(0,h.WP)(t.ioReader)),(0,h.tt)(e,await(0,h.GW)(t.ioReader));break;case 2:{let r=await(0,h.GW)(t.ioReader);t.options.enableThread?r|=2:r&=-3,(0,h.tt)(e,r);const i=await(0,h.GW)(t.ioReader);if((0,h.tt)(e,p.HEAP_INITIAL||i),1&r){let r=await(0,h.GW)(t.ioReader);m.A.ios&&!f.A.checkVersion(m.A.version,"17",!0)&&t.options.enableThread||(r=p.HEAP_MAXIMUM),(0,h.tt)(e,r)}a++;break}case 1:{(0,h.p2)(e,await(0,h.WP)(t.ioReader));const r=await(0,h.GW)(t.ioReader);(0,h.tt)(e,r);const i=await(0,h.GW)(t.ioReader);(0,h.tt)(e,i),t.data.tableSize=i,1&r&&(0,h.tt)(e,await(0,h.GW)(t.ioReader)),a++;break}}if(2===a)break}const n=e.getWroteBuffer(),o=r-Number(t.ioReader.getPos()-i);await(0,h.$z)(t.ioWriter,n.length+o),await t.ioWriter.writeBuffer(n)}else await(0,h.$z)(t.ioWriter,r);r-Number(t.ioReader.getPos()-i)&&await t.ioReader.pipe(t.ioWriter,r-Number(t.ioReader.getPos()-i))}}catch(e){-1048576===t.ioReader.error?t.bufferEnded=!0:t.error=e,t.ioReader.remainingLength()&&await t.ioWriter.writeBuffer(await t.ioReader.readBuffer(t.ioReader.remainingLength())),await t.ioWriter.flush()}}(d)},async pull(t){if(d.error)t.close();else{if(d.bufferResolve)return d.bufferResolve(t),void(d.bufferResolve=null);t.enqueue(await new(n())(((t,e)=>{d.pullResolve=t}))),d.bufferEnded?t.close():d.error&&t.error(d.error)}},cancel(t){d.compileStopped=!0}}),{headers:{"Content-Type":"application/wasm"}});r=o.Pc(WebAssembly.compileStreaming)?await WebAssembly.compileStreaming(g):await WebAssembly.compile(await g.arrayBuffer()),x=o.Yj(t.source)?(0,u.A)(Uint8Array,d.buffers).buffer:o.sv(t.source)?t.source:t.source.buffer,i=d.data.tableSize,y=d.data.dataSize,a=d.data.tableAlign,A=d.data.dataAlign,b=d.data.bssSize}return e.child?{module:r,initFuncs:e.initFuncs||[],tableSize:0,tableAlign:a||0,dataSize:1,dataAlign:A?Math.max((0,g.A)(A),8):8,bssSize:0,buffer:x}:{module:r,tableSize:i,tableAlign:a||0,dataSize:y,dataAlign:A?Math.max((0,g.A)(A),8):8,bssSize:b||0,initFuncs:e.initFuncs||[],buffer:x}}},81999:(t,e,r)=>{"use strict";function i(){let t;"object"==typeof __WebAssemblyRunner__?t=__WebAssemblyRunner__.__WebAssemblyRunner__:"object"==typeof __CHeap_WebAssemblyRunner__&&(t=__CHeap_WebAssemblyRunner__.default);let e,r,i=self,s=0;i.onmessage=a=>{const n=a.data,o=n.type,c=n.data;switch(o){case"run":i.postMessage({type:"run"}),self.CHeap&&self.CHeap.initThread&&self.CHeap.initThread(c.cheap).then((()=>{self.__SELF_THREAD__=c.runner.thread,c.runner.options.imports=self.imports,e=new t(c.runner.resource,c.runner.options),e.runAsChild(),t.getTable().get(c.runner.func)(c.runner.args),e.destroy()}));break;case"ready":r=c.runner,s=c.cheap.stackPointer,self.CHeap&&self.CHeap.initThread&&self.CHeap.initThread(c.cheap).then((()=>{i.postMessage({type:"ready"})}));break;case"wait":{async function l(){for(;;){for(t.mutexLock(s+16);0===t.readPointer(s);)t.condWait(s+12,s+16);self.__SELF_THREAD__=t.readPointer(s),r.options.thread=t.readPointer(s),r.thread=t.readPointer(s),r.func=t.readPointer(s+4),r.args=t.readPointer(s+8),e=new t(r.resource,r.options),e.runAsChild(),t.getTable().get(r.func)(r.args),e.destroy(),t.writePointer(s,0),t.mutexUnlock(s+16)}}r.options.imports=self.imports,l();break}}}}r.r(e),r.d(e,{default:()=>i})},91808:(t,e,r)=>{"use strict";r.d(e,{A:()=>i});const i="AGFzbQEAAAABEANgAX8Bf2ABfwBgAn9/AX8CWQYDZW52Bm1lbW9yeQIDAYCABANlbnYGbWFsbG9jAAADZW52BGZyZWUAAQNlbnYGY2FsbG9jAAIDZW52B3JlYWxsb2MAAgNlbnYNYWxpZ25lZF9hbGxvYwACAwYFAAECAgIHMwUGbWFsbG9jAAUEZnJlZQAGBmNhbGxvYwAHB3JlYWxsb2MACAxhbGlnbmVkQWxsb2MACQoqBQYAIAAQAAsGACAAEAELCAAgACABEAILCAAgACABEAMLCAAgACABEAML"},80905:(t,e,r)=>{"use strict";r.d(e,{Ko:()=>u,LK:()=>l,Ts:()=>d});var i=r(11473),s=r(4919),a=r(4624),n=r(91808),o=r(88096);const c="src/cheap/webassembly/runtime/asm/libc.ts";let l,h=!0;function u(){return h}function d(t,e,r){try{const a=o.bx((0,s.E_)(n.A),{shared:"function"==typeof SharedArrayBuffer&&t.buffer instanceof SharedArrayBuffer,initial:e,maximum:r});l=new WebAssembly.Instance(new WebAssembly.Module(a),{env:{memory:t,malloc:function(t){return i.s_.malloc(t)},calloc:function(t,e){return i.s_.calloc(t,e)},realloc:function(t,e){return i.s_.realloc(t,e)},aligned_alloc:(t,e)=>i.s_.alignedAlloc(t,e),free:function(t){i.s_.free(t)}}}),i.XI.set(2,l.exports.malloc),i.XI.set(1,l.exports.free),i.XI.set(3,l.exports.calloc),i.XI.set(4,l.exports.realloc),i.XI.set(5,l.exports.alignedAlloc)}catch(t){h=!1,a.R8("libc asm not support, cannot use asm thread function",c,60)}}},60:(t,e,r)=>{"use strict";r.d(e,{A:()=>i});const i="AGFzbQEAAAABEwNgAX8Bf2ACf38Bf2ADf39/AX8CEgEDZW52Bm1lbW9yeQIDAYCABAMIBwAAAAECAAAHQwcEbG9jawAAB3RyeWxvY2sAAQZ1bmxvY2sAAgR3YWl0AAMJdGltZWR3YWl0AAQGc2lnbmFsAAUJYnJvYWRjYXN0AAYKnAIHVgEBfyAAQQBBAf5IAgAhASABQQBHBEADQCABQQJGBH9BAQUgAEEBQQL+SAIAQQBHCwRAIABBAkJ//gECABoLIABBAEEC/kgCACEBIAFBAEcNAAsLQQALFwAgAEEAQQH+SAIAQQBGBH9BAAVBEAsLIwAgAEEB/iUCAEEBRwRAIABBAP4XAgAgAEEB/gACABoLQQALHQAgACAA/hACACABEAIaQn/+AQIAGiABEAAaQQALNwAgACAA/hACACABEAIaIAIpAwBCgJTr3AN+IAIoAgitfP4BAgAgARAAGkECRgR/QfAABUEACwsWACAAQQH+HgIAGiAAQQH+AAIAGkEACxoAIABBAf4eAgAaIABBgICAgAT+AAIAGkEACw=="},24565:(t,e,r)=>{"use strict";r.d(e,{Ko:()=>h,LK:()=>c,Ts:()=>u});var i=r(4919),s=r(4624),a=r(60),n=r(88096);const o="src/cheap/webassembly/runtime/asm/thread.ts";let c,l=!0;function h(){return l}function u(t,e,r,h){try{if(!("function"==typeof SharedArrayBuffer&&t.buffer instanceof SharedArrayBuffer))return void(l=!1);{const s=n.bx((0,i.E_)(a.A),{shared:!0,initial:e,maximum:r});c=new WebAssembly.Instance(new WebAssembly.Module(s),{env:{memory:t}})}h({wasm_pthread_mutex_lock:c.exports.lock,wasm_pthread_mutex_trylock:c.exports.trylock,wasm_pthread_mutex_unlock:c.exports.unlock,wasm_pthread_cond_wait:c.exports.wait,wasm_pthread_cond_timedwait:c.exports.timedwait,wasm_pthread_cond_signal:c.exports.signal,wasm_pthread_cond_broadcast:c.exports.broadcast})}catch(t){l=!1,s.R8("thread asm not support, cannot use asm thread function",o,69)}}},1708:(t,e,r)=>{"use strict";r.r(e),r.d(e,{atomic_add_i16:()=>f,atomic_add_i32:()=>k,atomic_add_i64:()=>E,atomic_add_i8:()=>a,atomic_and_i16:()=>v,atomic_and_i32:()=>_,atomic_and_i64:()=>B,atomic_and_i8:()=>o,atomic_compare_exchange_i16:()=>x,atomic_compare_exchange_i32:()=>C,atomic_compare_exchange_i64:()=>O,atomic_compare_exchange_i8:()=>d,atomic_exchange_i16:()=>w,atomic_exchange_i32:()=>R,atomic_exchange_i64:()=>N,atomic_exchange_i8:()=>p,atomic_load_i16:()=>b,atomic_load_i32:()=>M,atomic_load_i64:()=>$,atomic_load_i8:()=>u,atomic_or_i16:()=>g,atomic_or_i32:()=>I,atomic_or_i64:()=>L,atomic_or_i8:()=>c,atomic_store_i16:()=>A,atomic_store_i32:()=>P,atomic_store_i64:()=>F,atomic_store_i8:()=>h,atomic_sub_i16:()=>m,atomic_sub_i32:()=>T,atomic_sub_i64:()=>D,atomic_sub_i8:()=>n,atomic_xor_i16:()=>y,atomic_xor_i32:()=>S,atomic_xor_i64:()=>U,atomic_xor_i8:()=>l,atomics_notify:()=>z,atomics_wait:()=>V,atomics_wait_timeout:()=>G,override:()=>W});var i=r(40046),s=r(6704);let a=function(t,e){return i.WQ(t,e,12,s._[12])},n=function(t,e){return i.jb(t,e,12,s._[12])},o=function(t,e){return i.Uo(t,e,12,s._[12])},c=function(t,e){return i.or(t,e,12,s._[12])},l=function(t,e){return i.I8(t,e,12,s._[12])},h=function(t,e){return i.M_(t,e,12,s._[12])},u=function(t){return i.Hh(t,12,s._[12])},d=function(t,e,r){return i.p_(t,e,r,12,s._[12])},p=function(t,e){return i.cv(t,e,12,s._[12])},f=function(t,e){return i.WQ(t,e,14,s._[14])},m=function(t,e){return i.jb(t,e,14,s._[14])},v=function(t,e){return i.Uo(t,e,14,s._[14])},g=function(t,e){return i.or(t,e,14,s._[14])},y=function(t,e){return i.I8(t,e,14,s._[14])},A=function(t,e){return i.M_(t,e,14,s._[14])},b=function(t){return i.Hh(t,14,s._[14])},x=function(t,e,r){return i.p_(t,e,r,14,s._[14])},w=function(t,e){return i.cv(t,e,14,s._[14])},k=function(t,e){return i.WQ(t,e,16,s._[16])},T=function(t,e){return i.jb(t,e,16,s._[16])},_=function(t,e){return i.Uo(t,e,16,s._[16])},I=function(t,e){return i.or(t,e,16,s._[16])},S=function(t,e){return i.I8(t,e,16,s._[16])},P=function(t,e){return i.M_(t,e,16,s._[16])},M=function(t){return i.Hh(t,16,s._[16])},C=function(t,e,r){return i.p_(t,e,r,16,s._[16])},R=function(t,e){return i.cv(t,e,16,s._[16])},E=function(t,e){return i.WQ(t,e,21,s._[21])},D=function(t,e){return i.jb(t,e,21,s._[21])},B=function(t,e){return i.Uo(t,e,21,s._[21])},L=function(t,e){return i.or(t,e,21,s._[21])},U=function(t,e){return i.I8(t,e,21,s._[21])},F=function(t,e){return i.M_(t,e,21,s._[21])},$=function(t){return i.Hh(t,21,s._[21])},O=function(t,e,r){return i.p_(t,e,r,21,s._[21])},N=function(t,e){return i.cv(t,e,21,s._[21])},z=function(t,e){return i.me(t,e)},V=function(t,e){return i.uk(t,e)},G=function(t,e,r){return i.j4(t,e,Number(BigInt.asIntN(32,r)))};function W(t){t.atomic_add_i8&&(a=t.atomic_add_i8),t.atomic_sub_i8&&(n=t.atomic_sub_i8),t.atomic_and_i8&&(o=t.atomic_and_i8),t.atomic_or_i8&&(c=t.atomic_or_i8),t.atomic_xor_i8&&(l=t.atomic_xor_i8),t.atomic_store_i8&&(h=t.atomic_store_i8),t.atomic_load_i8&&(u=t.atomic_load_i8),t.atomic_compare_exchange_i8&&(d=t.atomic_compare_exchange_i8),t.atomic_exchange_i8&&(p=t.atomic_exchange_i8),t.atomic_add_i16&&(f=t.atomic_add_i16),t.atomic_sub_i16&&(m=t.atomic_sub_i16),t.atomic_and_i16&&(v=t.atomic_and_i16),t.atomic_or_i16&&(g=t.atomic_or_i16),t.atomic_xor_i16&&(y=t.atomic_xor_i16),t.atomic_store_i16&&(A=t.atomic_store_i16),t.atomic_load_i16&&(b=t.atomic_load_i16),t.atomic_compare_exchange_i16&&(x=t.atomic_compare_exchange_i16),t.atomic_exchange_i16&&(w=t.atomic_exchange_i16),t.atomic_add_i32&&(k=t.atomic_add_i32),t.atomic_sub_i32&&(T=t.atomic_sub_i32),t.atomic_and_i32&&(_=t.atomic_and_i32),t.atomic_or_i32&&(I=t.atomic_or_i32),t.atomic_xor_i32&&(S=t.atomic_xor_i32),t.atomic_store_i32&&(P=t.atomic_store_i32),t.atomic_load_i32&&(M=t.atomic_load_i32),t.atomic_compare_exchange_i32&&(C=t.atomic_compare_exchange_i32),t.atomic_exchange_i32&&(R=t.atomic_exchange_i32),t.atomic_add_i64&&(E=t.atomic_add_i64),t.atomic_sub_i64&&(D=t.atomic_sub_i64),t.atomic_and_i64&&(B=t.atomic_and_i64),t.atomic_or_i64&&(L=t.atomic_or_i64),t.atomic_xor_i64&&(U=t.atomic_xor_i64),t.atomic_store_i64&&(F=t.atomic_store_i64),t.atomic_load_i64&&($=t.atomic_load_i64),t.atomic_compare_exchange_i64&&(O=t.atomic_compare_exchange_i64),t.atomic_exchange_i64&&(N=t.atomic_exchange_i64),t.atomics_notify&&(z=t.atomics_notify),t.atomics_wait&&(V=t.atomics_wait),t.atomics_wait_timeout&&(G=t.atomics_wait_timeout)}},14621:(t,e,r)=>{"use strict";r.d(e,{B:()=>T,CK:()=>_,LS:()=>I,Lq:()=>E,Pp:()=>D,WU:()=>R,h2:()=>C,nK:()=>M});var i=r(49859),s=r(94870),a=r.n(s),n=r(86226),o=r.n(n),c=r(74707),l=r.n(c),h=r(61499),u=r(50932),d=r(12085),p=r(63939),f=r(14686),m=r(50011);const v=[null,[],[]],g=0,y=28;function A(t,e){const r=v[t];var i,s;0===e||10===e?((1===t?a()(i=console.log).call(i,console):a()(s=console.log).call(s,console))(m.decode(r)),r.length=0):r.push(e)}const b={};let x,w="./this.program";function k(){if(!x){const t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:w||"./this.program"};for(let e in b)t[e]=b[e];const e=[];for(let r in t)e.push(r+"="+t[r]);x=e}return x}function T(t,e){var r;let i=0;return o()(r=k()).call(r,(function(r,s){const a=e+i;u.M[20](t+4*s,a),function(t,e){for(let r=0;r<t.length;++r)u.M[4](e,t.charCodeAt(r)),e+=1;u.M[4](e,0)}(r,a),i+=r.length+1})),0}function _(t,e){const r=k();u.M[25](t,r.length);let i=0;return o()(r).call(r,(function(t){i+=t.length+1})),u.M[25](e,i),0}function I(t,e){let r=0;return 0==t?r=2:1!=t&&2!=t||(r=64),u.M[11](e,2),u.M[13](e+2,1),u.M[15](e+8,r),u.M[15](e+12,0),u.M[17](e+16,BigInt(0)),g}var S,P;function M(t,e,r,i){let s=0;for(let i=0;i<r;i++){let r=p.f[20](e),i=p.f[25](e+4);for(let e=0;e<i;e++)A(t,p.f[4](r+e));s+=i,e+=8}return u.M[25](i,s),g}function C(t){throw t=`abort(${t+=""}). Build with -s ASSERTIONS=1 for more info.`,new WebAssembly.RuntimeError(t)}function R(t,e,r){if(0!==t)return y;const i=(new Date).getTime();return u.M[10](r,BigInt(i)*BigInt(1e6)),g}function E(t,e){return 0!==t?y:(u.M[10](e,BigInt(1e6)),g)}function D(t,e){const r=(0,f.s3)(t,e);return crypto.getRandomValues(r),g}S=class{constructor(){(0,i.A)(this,"buf",void 0),(0,i.A)(this,"len",void 0)}}.prototype,(P=new(l())).set("buf",{0:1,1:1,2:1,3:0,4:0,5:0,6:0,7:0,8:0}),P.set("len",{0:25,1:0,2:0,3:0,4:0,5:0,6:0,7:4,8:0}),(0,d.A)(S,h.Og,!0),(0,d.A)(S,h.dc,4),(0,d.A)(S,h.g7,8),(0,d.A)(S,h.JY,P)},20357:(t,e,r)=>{"use strict";r.r(e),r.d(e,{override:()=>C,wasm_cpu_core_count:()=>P,wasm_pthread_cond_broadcast:()=>w,wasm_pthread_cond_destroy:()=>y,wasm_pthread_cond_init:()=>g,wasm_pthread_cond_signal:()=>x,wasm_pthread_cond_timedwait:()=>b,wasm_pthread_cond_wait:()=>A,wasm_pthread_equal2:()=>I,wasm_pthread_exit:()=>_,wasm_pthread_mutex_destroy:()=>p,wasm_pthread_mutex_init:()=>d,wasm_pthread_mutex_lock:()=>f,wasm_pthread_mutex_trylock:()=>m,wasm_pthread_mutex_unlock:()=>v,wasm_pthread_once:()=>k,wasm_pthread_self2:()=>T,wasm_pthread_support:()=>S,wasm_threw_error:()=>M});var i=r(63939),s=r(50932),a=r(73783),n=r(42518),o=r(26429),c=r(11473),l=r(40046),h=r(10576),u=r(14686);let d,p,f,m,v,g,y,A,b,x,w,k;function T(){return h.TK.__SELF_THREAD__}function _(t){const e=h.TK.__SELF_THREAD__;s.M[20](e+4,t),s.M[15](e+8,4|i.f[15](e+8))}function I(t,e){return i.f[15](t)===i.f[15](e)?1:0}function S(){return o.USE_THREADS?1:0}function P(){return navigator.hardwareConcurrency}function M(t,e){throw new Error((0,u.lH)(e))}function C(t){t.wasm_pthread_mutex_lock&&(f=t.wasm_pthread_mutex_lock),t.wasm_pthread_mutex_trylock&&(m=t.wasm_pthread_mutex_trylock),t.wasm_pthread_mutex_unlock&&(v=t.wasm_pthread_mutex_unlock),t.wasm_pthread_cond_wait&&(A=t.wasm_pthread_cond_wait),t.wasm_pthread_cond_timedwait&&(b=t.wasm_pthread_cond_timedwait),t.wasm_pthread_cond_signal&&(x=t.wasm_pthread_cond_signal),t.wasm_pthread_cond_broadcast&&(w=t.wasm_pthread_cond_broadcast)}d=function(t,e){return a.Ts(t)},p=function(t){return a.zr(t)},f=function(t){return a.s2(t)},m=function(t){return a.bh(t)},v=function(t){return a.Tl(t)},g=function(t,e){return n.Ts(t,e)},y=function(t){return n.zr(t)},A=function(t,e){return n.uk(t,e)},b=function(t,e,r){let s=1e3*Number(i.f[17](r))+i.f[15](r+8)/1e6;return n.XR(t,e,s)},x=function(t){return n.vP(t)},w=function(t){return n.mq(t)},k=function(t,e){return 0===l.WQ(t,1,16,2)&&c.XI.get(e)(),0}},77775:(t,e,r)=>{"use strict";r.r(e),r.d(e,{Timespec:()=>d,wasm_sem_destroy:()=>f,wasm_sem_init:()=>p,wasm_sem_post:()=>y,wasm_sem_timedwait:()=>g,wasm_sem_trywait:()=>v,wasm_sem_wait:()=>m});var i,s,a=r(49859),n=r(74707),o=r.n(n),c=r(61499),l=r(12085),h=r(63939),u=r(79490);class d{constructor(){(0,a.A)(this,"tvSec",void 0),(0,a.A)(this,"tvNSec",void 0)}}function p(t,e,r){return u.Ts(t,r)}function f(t){return u.zr(t)}function m(t){return u.uk(t)}function v(t){return u.Zr(t)}function g(t,e){let r=1e3*Number(h.f[17](e))+h.f[15](e+8)/1e6;return u.XR(t,r)}function y(t){return u.bE(t)}i=d.prototype,(s=new(o())).set("tvSec",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),s.set("tvNSec",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:8,8:0}),(0,l.A)(i,c.Og,!0),(0,l.A)(i,c.dc,8),(0,l.A)(i,c.g7,16),(0,l.A)(i,c.JY,s)},6331:(t,e,r)=>{"use strict";r.d(e,{A:()=>a});var i=r(49859),s=r(10576);class a{constructor(t,e){(0,i.A)(this,"type",void 0),(0,i.A)(this,"phase",void 0),(0,i.A)(this,"ns",void 0),(0,i.A)(this,"target",void 0),(0,i.A)(this,"originalEvent",void 0),(0,i.A)(this,"isPrevented",void 0),(0,i.A)(this,"isStopped",void 0),(0,i.A)(this,"listener",void 0),this.type=t,this.phase=a.PHASE_CURRENT,e&&(this.originalEvent=e)}preventDefault(){const t=this;if(!t.isPrevented){const{originalEvent:e}=t;e&&e.preventDefault(),t.isPrevented=s.rT}return t}stopPropagation(){const t=this;if(!t.isStopped){const{originalEvent:e}=t;e&&e.stopPropagation(),t.isStopped=s.rT}return t}prevent(){return this.preventDefault()}stop(){return this.stopPropagation()}}(0,i.A)(a,"PHASE_CURRENT",0),(0,i.A)(a,"PHASE_UPWARD",1),(0,i.A)(a,"PHASE_DOWNWARD",s.Cy)},96172:(t,e,r)=>{"use strict";r.d(e,{A:()=>p});var i=r(49859),s=r(385),a=r.n(s),n=r(67672),o=r(72739),c=r(6331),l=r(95335),h=r(20525),u=(r(4624),r(56401)),d=r(10576);class p{constructor(t){(0,i.A)(this,"ns",void 0),(0,i.A)(this,"listeners",void 0),(0,i.A)(this,"nativeListeners",void 0),this.ns=t||d.W8,this.listeners={}}fire(t,e,r){let i=this,s=n.Yj(t)?i.parse(t):t,a=i.listeners[s.type],h=d.rT;if(a){a=l.C(a);const t=e&&e[0]instanceof c.A?e[0]:d.ZH;o.__(a,(function(n){if(!v(s.ns,n,d.rT)||!o.zy(a,n)||r&&!r(s,e,n))return;t&&(t.listener=n.fn);let c=(0,u.A)(n.fn,n.ctx,e);return t&&(t.listener=d.ZH),n.num=n.num?n.num+1:1,n.num===n.max&&i.off(s,n.fn),t&&(c===d.W8?t.prevent().stop():t.isStopped&&(c=d.W8)),c===d.W8?h=d.W8:void 0}))}return h}on(t,e){const r=this,i=r.listeners,s=n.Pc(e)?{fn:e}:e;if(n.Ik(s)&&n.Pc(s.fn)){const e=n.Yj(t)?r.parse(t):t;s.ns=e.ns,o.VC(i[e.type]||(i[e.type]=[]),s)}return this}one(t,e){return n.Pc(e)?e={fn:e,max:1}:e.max=1,this.on(t,e)}off(t,e){const r=this,i=r.listeners;if(t){const s=n.Yj(t)?r.parse(t):t,c=s.type,h=s.ns,u=m(e),p=function(t,e){o.__(t,(function(e,r){u(e)&&a()(t).call(t,r,1)}),d.rT),t.length||delete i[e]},f=function(t,e){o.__(t,(function(e,r){v(h,e)&&a()(t).call(t,r,1)}),d.rT),t.length||delete i[e]};c?i[c]&&p(i[c],c):h&&l.__(i,f)}else r.listeners={}}has(t,e){let r=this.listeners,i=n.Yj(t)?this.parse(t):t,s=i.type,a=i.ns,c=d.rT,h=m(e);var u;return s?r[s]&&(u=r[s],o.__(u,(function(t){if(h(t))return c=d.W8}))):a&&l.__(r,(function(t){return o.__(t,(function(t){if(v(a,t))return c=d.W8})),c})),!c}parse(t){const e={type:t,ns:d.u1};if(this.ns){const r=h.qh(t,d.ZG);r>=0&&(e.type=h.di(t,0,r),e.ns=h.di(t,r+1))}return e}}function f(){return d.rT}function m(t){return n.Pc(t)?function(e){return t===e.fn}:f}function v(t,e,r){const{ns:i}=e;return i&&t?i===t:r?d.rT:d.W8}},84504:(t,e,r)=>{"use strict";r.d(e,{A:()=>s});var i=r(2148);function s(t,e,r=!1){const s=e.split("."),a=t.split(".");for(let t=0;t<a.length;t++){if(r&&t==a.length-1&&(0,i.A)(a[t])>=(0,i.A)(s[t]))return a.length>=s.length;if((0,i.A)(a[t])>(0,i.A)(s[t]))return!0;if((0,i.A)(a[t])<(0,i.A)(s[t]))return!1;if(t===s.length-1&&t===a.length-1)return r;if(t===s.length-1)return!0;if(t===a.length-1)return!1}return!0}},92647:(t,e,r)=>{"use strict";function i(t,e){if(!e.length)return null;if(1===e.length)return e[0];let r,i=0;for(r of e)i+=r.length;let s=new t(i),a=0;for(r of e)s.set(r,a),a+=r.length;return s}r.d(e,{A:()=>i})},78995:(t,e,r)=>{"use strict";r.d(e,{A:()=>c});var i=r(56255),s=r.n(i),a=r(56401),n=r(72739),o=r(10576);function c(t,e,r,i=!1){let c,l;return function(){let h=this;i&&(l=n.$r(arguments)),c||(i||(l=n.$r(arguments)),r&&(0,a.A)(t,h,l),c=s()((function(){c=o.ZH,r||(0,a.A)(t,h,l)}),e))}}},56401:(t,e,r)=>{"use strict";r.d(e,{A:()=>a});var i=r(67672),s=r(10576);function a(t,e,r){if(i.Pc(t))return i.YO(r)?t.apply(e,r):e!==s.ZH?t.call(e,r):r!==s.ZH?t(r):t()}},8284:(t,e,r)=>{"use strict";function i(){let t=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){let r=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?r:3&r|8).toString(16)}))}r.d(e,{A:()=>i})},86932:(t,e,r)=>{"use strict";r.d(e,{A:()=>a});var i=r(29550),s=r.n(i);function a(){return s()()}},54568:(t,e,r)=>{"use strict";function i(){return"function"==typeof registerProcessor&&"number"==typeof sampleRate&&"number"==typeof currentFrame&&"number"==typeof currentTime}r.d(e,{A:()=>i})},34677:(t,e,r)=>{"use strict";r.d(e,{A:()=>s});var i=r(10576);function s(t){return t!==i.ZH}},59135:(t,e,r)=>{"use strict";r.d(e,{A:()=>a});var i=r(34677);let s;function a(){if((0,i.A)(s))return s;const t=new ArrayBuffer(2);return new DataView(t).setInt16(0,256,!0),s=256===new Int16Array(t)[0],s}},20491:(t,e,r)=>{"use strict";r.d(e,{A:()=>n});var i=r(67672),s=r(62100),a=r(20525);function n(t){return i.Pc(t)&&a.zy((0,s.A)(t),"[native code]")}},39638:(t,e,r)=>{"use strict";r.d(e,{A:()=>a});var i=r(34677),s=r(54568);function a(){return!("object"==typeof window&&(0,i.A)(window.document)||(0,s.A)())}},7972:(t,e,r)=>{"use strict";r.d(e,{A:()=>h});var i=r(7189),s=r.n(i),a=r(56255),n=r.n(a),o=r(20491),c=r(10576);let l;typeof s()===c.s0&&(0,o.A)(s())&&(l=s()),l=typeof MessageChannel===c.s0&&(0,o.A)(MessageChannel)?function(t){const e=new MessageChannel;e.port1.onmessage=t,e.port2.postMessage(1)}:"function"==typeof n()?n():function(t){n()(t)};const h=l},36:(t,e,r)=>{"use strict";function i(t,e,r){return t<e?t=e:t>r&&(t=r),t}r.d(e,{A:()=>i})},61837:(t,e,r)=>{"use strict";r.d(e,{A:()=>x});var i=r(50697),s=r.n(i),a=r(73363),n=r.n(a),o=r(11393),c=r.n(o),l=r(85569),h=r.n(l),u=r(48079),d=r.n(u),p=r(18979),f=r.n(p);const m='\nfunction webpackBootstrapFunc (modules) {\n  var installedModules = {};\n  function __webpack_require__(moduleId) {\n    if(installedModules[moduleId])\n    return installedModules[moduleId].exports;\n    var module = installedModules[moduleId] = {\n      i: moduleId,\n      l: false,\n      exports: {}\n    };\n    if (!modules[moduleId]) {\n      console.error(\'can not found module:\', moduleId)\n    }\n    modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n    module.l = true;\n    return module.exports;\n  }\n  __webpack_require__.m = modules;\n  __webpack_require__.c = installedModules;\n  __webpack_require__.i = function(value) { return value; };\n  __webpack_require__.d = function(exports, definition, getter) {\n    if (typeof definition === \'string\') {\n      if(!__webpack_require__.o(exports, definition)) {\n        Object.defineProperty(exports, definition, {\n          enumerable: true,\n          get: getter\n        });\n      }\n    }\n    else {\n      for(var key in definition) {\n        if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n          Object.defineProperty(exports, key, {\n            enumerable: true,\n            get: definition[key]\n          });\n        }\n      }\n    }\n  };\n  __webpack_require__.r = function(exports) {\n    if(typeof Symbol !== \'undefined\' && Symbol.toStringTag) {\n    \tObject.defineProperty(exports, Symbol.toStringTag, { value: \'Module\' });\n    }\n    Object.defineProperty(exports, \'__esModule\', { value: true });\n  };\n  __webpack_require__.f = {};\n  __webpack_require__.e = function(chunkId) {\n    return Promise.all(Object.keys(__webpack_require__.f).reduce(function (promises, key) {\n      __webpack_require__.f[key](chunkId, promises);\n        return promises;\n    \t}, []));\n\t};\n  __webpack_require__.u = function(chunkId) {\n    return chunkId + "LIB_NAME";\n  };\n  __webpack_require__.n = function(module) {\n    var getter = module && module.__esModule ?\n      function getDefault() { return module[\'default\']; } :\n      function getModuleExports() { return module; };\n    __webpack_require__.d(getter, \'a\', getter);\n    return getter;\n  };\n  (function() {\n    var installedChunks = {\n      "main": 0\n    };\n    __webpack_require__.f.j = function(chunkId, promises) {\n      var installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n      if (installedChunkData !== 0) {\n        if(installedChunkData) {\n          promises.push(installedChunkData[2]);\n        } else {\n          if (true) {\n            var promise = new Promise(function(resolve, reject){installedChunkData = installedChunks[chunkId] = [resolve, reject]});\n            promises.push(installedChunkData[2] = promise);\n            var url = __webpack_require__.p + __webpack_require__.u(chunkId);\n            var error = new Error();\n            var loadingEnded = function(event) {\n              if(__webpack_require__.o(installedChunks, chunkId)) {\n                installedChunkData = installedChunks[chunkId];\n                if(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n                if(installedChunkData) {\n                  var errorType = event && (event.type === \'load\' ? \'missing\' : event.type);\n                  var realSrc = url;\n                  error.message = "Loading chunk " + chunkId + " failed.\\n(" + errorType + ": " + realSrc + ")";\n                  error.name = "ChunkLoadError";\n                  error.type = errorType;\n                  error.request = realSrc;\n                  installedChunkData[1](error);\n                }\n              }\n            };\n            __webpack_require__.l(url, loadingEnded);\n          }\n        }\n      }\n    };\n    var webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n    var [chunkIds, moreModules, runtime] = data;\n    var moduleId, chunkId, i = 0;\n    if (chunkIds.some(function(id){return installedChunks[id] !== 0})) {\n      for(moduleId in moreModules) {\n        if(__webpack_require__.o(moreModules, moduleId)) {\n          __webpack_require__.m[moduleId] = moreModules[moduleId];\n        }\n      }\n      if(runtime) runtime(__webpack_require__);\n    }\n    if (parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n      for (;i < chunkIds.length; i++) {\n        chunkId = chunkIds[i];\n        if (__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n          installedChunks[chunkId][0]();\n        }\n        installedChunks[chunkId] = 0;\n      }\n    }\n    var self = typeof globalThis !== undefined ? globalThis : self\n    var exportName = \'LIBRARY_EXPORT_NAME\'\n    var chunkLoadingGlobal = self["webpackChunk" + exportName] = self["webpackChunk" + exportName] || [];\n    chunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\n    chunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));\n  })();\n  (function() {\n    var inProgress = {};\n    __webpack_require__.l = function(url, done) {\n      if (inProgress[url]) { inProgress[url].push(done); return; }\n        inProgress[url] = [done];\n        var onComplete = function(event) {\n          clearTimeout(timeout);\n          var doneFns = inProgress[url];\n          delete inProgress[url];\n          doneFns && doneFns.forEach(function(fn){fn(event)});\n        }\n        var timeout = setTimeout(onComplete.bind(null, undefined, { type: "timeout" }), 120000);\n      if (typeof importScripts === \'function\') {\n        try {\n          importScripts(url);onComplete({type: "load"});\n        }\n        catch(e) {\n          onComplete({type: "missing"});\n        }\n      }\n      else {\n        import(url).then(function() {\n          onComplete({\n            type: "load"\n          });\n        }, function (error) {\n          onComplete({\n            type: "missing"\n          });\n        })\n      }\n    };\n  })();\n  __webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n  __webpack_require__.p = "ROOT_URL";\n  __webpack_require__.oe = function(err) { console.error(err); throw err; };\n  var f = __webpack_require__(__webpack_require__.s = ENTRY_MODULE);\n  return f;\n}\n',v="[\\.|\\-|\\+|\\w|/|@|!]+",g="\\(\\s*(/\\*.*?\\*/)?\\s*.*?("+v+").*?\\)";function y(t){return(t+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function A(t,e,i,a){const n={};n[i]=[];let o=e.toString();const c=o.match(/^(function)?\s?\w*\(\w+,\s*(\w+),\s*(\w+)\)/);if(!c)return n;const l=c[3];a.__webpack_exports_process__||(a.__webpack_require__=l,a.__webpack_exports__=c[2],a.__webpack_exports_process__=!0);let h,u=new RegExp("(\\\\n|\\W)"+y(l)+g,"g");for(;h=u.exec(o);)"dll-reference"!==h[3]&&n[i].push(h[3]);for(u=new RegExp("(\\\\n|\\W)"+y(l)+"\\.bind\\("+l+",\\s*(/\\*.*?\\*/)?\\s*.*?("+v+").*?\\)","g");h=u.exec(o);)"dll-reference"!==h[3]&&n[i].push(h[3]);for(u=new RegExp("\\("+y(l)+'\\("(dll-reference\\s('+v+'))"\\)\\)'+g,"g");h=u.exec(o);)t[h[2]]||(n[i].push(h[1]),t[h[2]]=r(h[1]).m),n[h[2]]=n[h[2]]||[],n[h[2]].push(h[4]);const d=s()(n);for(let t=0;t<d.length;t++)for(let e=0;e<n[d[t]].length;e++)p=+n[d[t]][e],isNaN(p)||(n[d[t]][e]=+n[d[t]][e]);var p;return n}function b(t){const e=s()(t);return n()(e).call(e,(function(e,r){return e||t[r].length>0}),!1)}function x(t,e){var i;const a={main:r.m},n=function(t,e){const r={main:[e]},i={main:[],__webpack_exports__:"__webpack_exports__",__webpack_require__:"__webpack_require__",__webpack_exports_process__:!1},a={main:{}};for(;b(r);){const e=s()(r);for(let o=0;o<e.length;o++){let l=e[o],h=r[l].pop();if(a[l]=a[l]||{},a[l][h]||!t[l][h])continue;a[l][h]=!0,i[l]=i[l]||[],i[l].push(h);let u=A(t,t[l][h],l,i),d=s()(u);for(let t=0;t<d.length;t++){var n;r[d[t]]=r[d[t]]||[],r[d[t]]=c()(n=r[d[t]]).call(n,u[d[t]])}}}return i}(a,t);let o=h()(t);return"var "+e.varName+"=("+m.replace("ENTRY_MODULE",o).replace("ROOT_URL",r.p||"").replace("LIBRARY_EXPORT_NAME","AVPlayer").replace("LIB_NAME",r.u&&r.u("")||"")+")({"+d()(i=n.main).call(i,(function(t){const r=h()(t);let i=r+": "+a.main[t].toString();if(r===o&&e.exportName&&e.pointName){const t=`;${n.__webpack_require__}.d(\n          ${n.__webpack_exports__},\n          "${e.exportName}",\n          function() {\n            if (${e.exportIsClass}) {\n              for (var key in ${n.__webpack_exports__}) {\n                if (key === '${e.exportName}') {\n                  continue;\n                }\n                var v = ${n.__webpack_exports__}[key];\n                if (typeof v === 'function' && v.name === '${e.pointName}') {\n                  return v;\n                }\n              }\n            }\n            return ${e.pointName};\n          }\n        );`;i=f()(i).call(i,0,i.length-1)+t+"}"}return i})).join(",")+"});"}},6498:(t,e,r)=>{"use strict";r.d(e,{A:()=>o});var i=r(11265),s=r.n(i),a=r(67672),n=r(72739);function o(t,e){const r=[];return a.ai(t)&&(t+=""),t&&a.Yj(t)&&n.__(t.split(e),((t,e)=>{(t=s()(t).call(t))&&r.push(t)})),r}},2148:(t,e,r)=>{"use strict";r.d(e,{A:()=>a});var i=r(67672),s=r(10576);function a(t,e){return i.sH(t)?+t:e!==s.ZH?e:0}},62100:(t,e,r)=>{"use strict";r.d(e,{A:()=>s});var i=r(10576);function s(t,e){return t!=i.Cq&&t.toString?t.toString():e!==i.ZH?e:i.u1}},65196:(t,e,r)=>{"use strict";r.d(e,{A:()=>c});var i=r(49859),s=r(61240),a=r.n(s),n=r(67672),o=r(72739);class c{constructor(){(0,i.A)(this,"queue",void 0),this.queue=[]}async execute(t){try{const e=await t.task();t.resolve(e)}catch(e){t.reject(e)}}async next(){if(this.queue.length){const t=this.queue[0];t.error?t.reject(t.error):await this.execute(t),this.queue.shift(),this.queue.length&&this.next()}}async push(t){if(!n.Pc(t))throw new TypeError("task must be a function");return new(a())(((e,r)=>{const i={task:t,resolve:e,reject:r};this.queue.push(i),1===this.queue.length&&this.next()}))}clear(t){o.__(this.queue,(e=>{e.error=t||new Error("command queue clear")}))}clearPadding(){this.queue.length=0}get length(){return this.queue.length}}},68391:(t,e,r)=>{"use strict";r.d(e,{A:()=>o});var i=r(49859),s=r(67672),a=r(54058),n=r(86932);class o{constructor(t,e=0){(0,i.A)(this,"queue",void 0),(0,i.A)(this,"timer",void 0),(0,i.A)(this,"ended",void 0),(0,i.A)(this,"onEnd",void 0),(0,i.A)(this,"lastTime",void 0),(0,i.A)(this,"interval",void 0),this.queue=[],this.interval=t,this.timer=new a.A((()=>{this.queue.length?this.queue.shift()():this.ended?(this.onEnd&&this.onEnd(),this.timer.stop()):this.lastTime=(0,n.A)()}),e,t)}push(t){if(!s.Pc(t))throw new TypeError("task must be a function");this.ended=!1;const e=(0,n.A)();this.timer.isStarted()&&!this.queue.length&&e-this.lastTime>this.interval?(t(),this.lastTime=e):(this.queue.push(t),1!==this.queue.length||this.timer.isStarted()||this.timer.start())}end(){this.ended=!0}reset(){this.timer.stop(),this.queue.length=0}}},61403:(t,e,r)=>{"use strict";r.d(e,{A:()=>a});var i=r(49859),s=r(67672);class a{constructor(){(0,i.A)(this,"proxy",void 0),this.proxy=new Proxy(this,{get:(t,e,r)=>s.sH(e)?t.getIndexValue(+e):t[e],set:(t,e,r,i)=>(s.sH(e)?t.setIndexValue(+e,r):t[e]=r,!0)})}}},37246:(t,e,r)=>{"use strict";r.d(e,{A:()=>a});var i=r(49859),s=r(4624);class a{constructor(t=1048576){(0,i.A)(this,"buffer",void 0),(0,i.A)(this,"pointer",void 0),(0,i.A)(this,"bitsLeft",void 0),(0,i.A)(this,"size",void 0),(0,i.A)(this,"endPointer",void 0),(0,i.A)(this,"pos",void 0),(0,i.A)(this,"error",void 0),(0,i.A)(this,"onFlush",void 0),this.pointer=0,this.bitsLeft=8,this.pos=BigInt(0),this.size=t,this.endPointer=0,this.error=0,this.buffer=new Uint8Array(this.size)}peekU1(){let t=0;(this.remainingLength()<1||1===this.remainingLength()&&0===this.bitsLeft)&&this.flush();let e=this.pointer,r=this.bitsLeft;return 0===r&&(e++,r=8),t=this.buffer[e]>>r-1&1,t}readU1(){let t=0;return(this.remainingLength()<1||1===this.remainingLength()&&0===this.bitsLeft)&&this.flush(),this.bitsLeft--,t=this.buffer[this.pointer]>>this.bitsLeft&1,0===this.bitsLeft&&(this.pointer++,this.bitsLeft=8,this.pos++),t}readU(t){let e=0;for(let r=0;r<t;r++)e|=this.readU1()<<t-r-1;return e}peekU(t){const e=this.pointer,r=this.bitsLeft,i=this.pos,s=this.readU(t);return this.pointer=e,this.bitsLeft=r,this.pos=i,s}remainingLength(){return this.endPointer-this.pointer}getBitLeft(){return this.bitsLeft}getPointer(){return this.pointer}setPointer(t){this.pointer=t}getPos(){return this.pos}skip(t){const e=(t-t%8)/8;this.pointer+=e,this.pos+=BigInt(e);const r=t%8;this.bitsLeft<=r?(this.pointer++,this.pos++,this.bitsLeft=8-(r-this.bitsLeft)):this.bitsLeft-=r}flush(){if(!this.onFlush)throw this.error=-1048574,Error("IOReader error, flush failed because of no flush callback");if(0===this.bitsLeft&&(this.pointer++,this.pos++),!(this.size-this.remainingLength()<=0))if(this.pointer<this.endPointer){this.buffer.set(this.buffer.subarray(this.pointer,this.endPointer),0);const t=this.onFlush(this.buffer.subarray(this.endPointer-this.pointer,this.size));if(t<0)throw this.error=t,Error("IOReader error, flush failed");this.endPointer=this.endPointer-this.pointer+t,this.pointer=0}else{const t=this.onFlush(this.buffer);if(this.endPointer=t,this.pointer=0,this.bitsLeft=8,t<0)throw this.error=t,Error("IOReader error, flush failed")}}getBuffer(){return this.buffer}appendBuffer(t){if(this.size-this.endPointer>=t.length)this.buffer.set(t,this.endPointer),this.endPointer+=t.length;else if(this.buffer.set(this.buffer.subarray(this.pointer,this.endPointer),0),this.endPointer=this.endPointer-this.pointer,this.pointer=0,this.size-this.endPointer>=t.length)this.buffer.set(t,this.endPointer),this.endPointer+=t.length;else{const e=Math.min(this.size-this.endPointer,t.length);this.buffer.set(t.subarray(0,e),this.endPointer),this.endPointer+=e,s.R8("BSReader, call appendBuffer but the buffer's size is lagger then the remaining size","src/common/io/BitReader.ts",257)}}reset(){this.pointer=this.endPointer=0,this.bitsLeft=8,this.error=0,this.pos=BigInt(0)}skipPadding(){this.bitsLeft<8&&(this.bitsLeft=8,this.pointer++,this.pos++)}}},83314:(t,e,r)=>{"use strict";r.d(e,{A:()=>n});var i=r(49859),s=r(18979),a=r.n(s);class n{constructor(t=1048576){(0,i.A)(this,"buffer",void 0),(0,i.A)(this,"pointer",void 0),(0,i.A)(this,"pos",void 0),(0,i.A)(this,"bitPointer",void 0),(0,i.A)(this,"size",void 0),(0,i.A)(this,"error",void 0),(0,i.A)(this,"onFlush",void 0),this.pointer=0,this.bitPointer=0,this.size=t,this.error=0,this.pos=BigInt(0),this.buffer=new Uint8Array(this.size)}writeU1(t){(this.remainingLength()<1||1===this.remainingLength()&&this.bitPointer>=8)&&this.flush(),1&t?this.buffer[this.pointer]|=1<<7-this.bitPointer:this.buffer[this.pointer]&=~(1<<7-this.bitPointer),this.bitPointer++,8===this.bitPointer&&(this.pointer++,this.pos++,this.bitPointer=0)}writeU(t,e){for(let r=0;r<t;r++)this.writeU1(e>>t-r-1&1)}remainingLength(){return this.size-this.pointer}flush(){if(!this.onFlush)throw this.error=-1048574,Error("BSWriter error, flush failed because of no flush callback");if(this.pointer)if(this.bitPointer&&this.pointer>0){var t;const e=this.onFlush(a()(t=this.buffer.subarray(0,this.pointer)).call(t));if(0!==e)throw this.error=e,Error("BSWriter error, flush failed");this.buffer[0]=this.buffer[this.pointer]}else if(0===this.bitPointer){const t=this.onFlush(this.buffer.subarray(0,this.pointer));if(0!==t)throw this.error=t,Error("BSWriter error, flush failed")}this.pointer=0}padding(){for(;0!==this.bitPointer;)this.writeU1(0)}reset(){this.pointer=0,this.bitPointer=0,this.error=0,this.pos=BigInt(0)}getBuffer(){return this.buffer}getPointer(){return this.pointer}getPos(){return this.pos}}},31865:(t,e,r)=>{"use strict";r.d(e,{A:()=>c});var i=r(49859),s=r(18979),a=r.n(s),n=r(92647),o=r(50011);class c{constructor(t,e=!0){(0,i.A)(this,"data",void 0),(0,i.A)(this,"buffer",void 0),(0,i.A)(this,"byteStart",void 0),(0,i.A)(this,"pos",void 0),(0,i.A)(this,"size",void 0),(0,i.A)(this,"littleEndian",void 0),this.buffer=t,this.data=t instanceof Uint8Array?new DataView(t.buffer):t.view,this.byteStart=t instanceof Uint8Array?t.byteOffset:0,this.pos=0,this.size=t.byteLength,this.littleEndian=!e}readUint8(){return this.data.getUint8(this.pos+++this.byteStart)}peekUint8(){return this.data.getUint8(this.pos+this.byteStart)}readUint16(){const t=this.data.getUint16(this.pos+this.byteStart,this.littleEndian);return this.pos+=2,t}peekUint16(){return this.data.getUint16(this.pos+this.byteStart,this.littleEndian)}readUint24(){const t=this.readUint16(),e=this.readUint8();return this.littleEndian?e<<16|t:t<<8|e}peekUint24(){const t=this.readUint16(),e=this.readUint8();return this.pos-=3,this.littleEndian?e<<16|t:t<<8|e}readUint32(){const t=this.data.getUint32(this.pos+this.byteStart,this.littleEndian);return this.pos+=4,t}peekUint32(){return this.data.getUint32(this.pos+this.byteStart,this.littleEndian)}readUint64(){const t=BigInt(this.readUint32()),e=BigInt(this.readUint32());return this.littleEndian?e<<BigInt(32)|t:t<<BigInt(32)|e}peekUint64(){const t=BigInt(this.readUint32()),e=BigInt(this.readUint32());return this.pos-=8,this.littleEndian?e<<BigInt(32)|t:t<<BigInt(32)|e}readInt8(){return this.data.getInt8(this.pos+++this.byteStart)}peekInt8(){return this.data.getInt8(this.pos+this.byteStart)}readInt16(){const t=this.data.getInt16(this.pos+this.byteStart,this.littleEndian);return this.pos+=2,t}peekInt16(){return this.data.getInt16(this.pos+this.byteStart,this.littleEndian)}readInt24(){const t=this.readUint24();return 8388608&t?t-16777216:t}peekInt24(){const t=this.peekUint24();return 8388608&t?t-16777216:t}readInt32(){const t=this.data.getInt32(this.pos+this.byteStart,this.littleEndian);return this.pos+=4,t}peekInt32(){return this.data.getInt32(this.pos+this.byteStart,this.littleEndian)}readInt64(){const t=BigInt(this.readInt32()),e=BigInt(this.readInt32());return this.littleEndian?e<<BigInt(32)|t:t<<BigInt(32)|e}peekInt64(){const t=BigInt(this.readInt32()),e=BigInt(this.readInt32());return this.pos-=8,this.littleEndian?e<<BigInt(32)|t:t<<BigInt(32)|e}readFloat(){const t=this.data.getFloat32(this.pos+this.byteStart,this.littleEndian);return this.pos+=4,t}peekFloat(){return this.data.getFloat32(this.pos+this.byteStart,this.littleEndian)}readDouble(){const t=this.data.getFloat64(this.pos+this.byteStart,this.littleEndian);return this.pos+=8,t}peekDouble(){return this.data.getFloat64(this.pos+this.byteStart,this.littleEndian)}readHex(t=1){let e="";for(let r=0;r<t;r++){const t=this.readUint8().toString(16);e+=1===t.length?"0"+t:t}return e}peekHex(t=1){const e=this.pos,r=this.readHex(t);return this.pos=e,r}readString(t=1){let e="";if(t){let r=this.pos;for(let e=0;e<t&&0===this.buffer[this.pos+e];e++)r++;e=o.decode(this.buffer.subarray(r,r+t))}return this.pos+=t,e}peekString(t=1){const e=this.pos,r=this.readString(t);return this.pos=e,r}readLine(){let t="";for(let e=this.pos;e<this.size;e++)if(10===this.buffer[e]||13===this.buffer[e]){t+=this.readString(e-this.pos);break}for(let t=this.pos;t<this.size&&(10===this.buffer[t]||13===this.buffer[t]);t++)this.readUint8();return t}peekLine(){const t=this.pos,e=this.readLine();return this.pos=t,e}getPos(){return BigInt(this.pos)}seek(t){t>this.size&&(t=this.size),this.pos=Math.max(0,t)}skip(t){this.seek(this.pos+t)}back(t){this.seek(this.pos-t)}remainingSize(){return this.size-this.pos}readBuffer(t){var e;t=Math.min(t,this.remainingSize());const r=a()(e=this.buffer).call(e,this.pos,this.pos+t);return this.pos+=t,r}appendBuffer(t){var e;this.buffer=(0,n.A)(Uint8Array,[a()(e=this.buffer).call(e),a()(t).call(t)]),this.data=new DataView(this.buffer.buffer),this.size+=t.byteLength,this.byteStart=0}resetBuffer(t,e=!0){this.buffer=t,this.data=t instanceof Uint8Array?new DataView(t.buffer):t.view,this.byteStart=t instanceof Uint8Array?t.byteOffset:0,this.pos=0,this.size=t.byteLength,this.littleEndian=!e}}},729:(t,e,r)=>{"use strict";r.d(e,{A:()=>n});var i=r(49859),s=r(4624),a=r(50011);class n{constructor(t,e=!0){(0,i.A)(this,"data",void 0),(0,i.A)(this,"buffer",void 0),(0,i.A)(this,"byteStart",void 0),(0,i.A)(this,"pos",void 0),(0,i.A)(this,"size",void 0),(0,i.A)(this,"littleEndian",void 0),this.buffer=t,this.data=t instanceof Uint8Array?new DataView(t.buffer):t.view,this.byteStart=t instanceof Uint8Array?t.byteOffset:0,this.pos=0,this.size=t.byteLength,this.littleEndian=!e}writeUint8(t){this.data.setUint8(this.pos+++this.byteStart,t)}writeUint16(t){this.data.setUint16(this.pos+this.byteStart,t,this.littleEndian),this.pos+=2}writeUint24(t){const e=3840&t,r=240&t,i=15&t;this.littleEndian?(this.writeUint8(i),this.writeUint8(r),this.writeUint8(e)):(this.writeUint8(e),this.writeUint8(r),this.writeUint8(i))}writeUint32(t){this.data.setUint32(this.pos+this.byteStart,t,this.littleEndian),this.pos+=4}writeUint64(t){this.data.setBigUint64(this.pos+this.byteStart,t,this.littleEndian),this.pos+=8}writeInt8(t){this.data.setInt8(this.pos+++this.byteStart,t)}writeInt16(t){this.data.setInt16(this.pos+this.byteStart,t,this.littleEndian),this.pos+=2}writeInt24(t){this.writeUint24(t<0?t+16777216:t)}writeInt32(t){this.data.setInt32(this.pos+this.byteStart,t,this.littleEndian),this.pos+=4}writeInt64(t){this.data.setBigInt64(this.pos+this.byteStart,t,this.littleEndian),this.pos+=8}writeFloat(t){this.data.setFloat32(this.pos+this.byteStart,t,this.littleEndian),this.pos+=4}writeDouble(t){this.data.setFloat64(this.pos+this.byteStart,t,this.littleEndian),this.pos+=8}getPos(){return this.pos}seek(t){t>this.size&&(t=this.size),this.pos=Math.max(0,t)}skip(t){this.seek(this.pos+t)}back(t){this.seek(this.pos-t)}remainingSize(){return this.size-this.pos}writeBuffer(t){let e=t.length;this.remainingSize()<e&&(e=this.remainingSize(),s.R8(`the remaining buffer size is smaller then the wrote buffer, hope set ${t.length}, but set ${e}`,"src/common/io/BufferWriter.ts",202)),this.buffer.set(t,this.pos),this.pos+=t.length}writeString(t){const e=a.encode(t);return this.writeBuffer(e),e.length}getWroteBuffer(){return this.buffer.subarray(0,this.pos)}resetBuffer(t,e=!0){this.buffer=t,this.data=t instanceof Uint8Array?new DataView(t.buffer):t.view,this.byteStart=t instanceof Uint8Array?t.byteOffset:0,this.pos=0,this.size=t.byteLength,this.littleEndian=!e}}},24175:(t,e,r)=>{"use strict";r.d(e,{A:()=>h});var i=r(49859),s=r(61240),a=r.n(s),n=r(4624),o=r(50011),c=r(13724);const l="src/common/io/IOReader.ts";class h{constructor(t=1048576,e=!0,r){if((0,i.A)(this,"data",void 0),(0,i.A)(this,"buffer",void 0),(0,i.A)(this,"pointer",void 0),(0,i.A)(this,"endPointer",void 0),(0,i.A)(this,"pos",void 0),(0,i.A)(this,"size",void 0),(0,i.A)(this,"littleEndian",void 0),(0,i.A)(this,"fileSize_",void 0),(0,i.A)(this,"error",void 0),(0,i.A)(this,"onFlush",void 0),(0,i.A)(this,"onSeek",void 0),(0,i.A)(this,"onSize",void 0),(0,i.A)(this,"flags",void 0),(0,i.A)(this,"flushResolve",void 0),this.pos=BigInt(0),this.pointer=0,this.error=0,this.endPointer=0,this.littleEndian=!e,this.flags=0,r&&r.view)this.size=r.length,this.buffer=r,this.data=r.view;else if(r&&!r.byteOffset)this.size=r.length,this.buffer=r,this.data=new DataView(this.buffer.buffer);else{if(r)throw new Error("not support subarray of ArrayBuffer");this.size=Math.max(t,102400),this.buffer=new Uint8Array(this.size),this.data=new DataView(this.buffer.buffer)}}async readUint8(){this.remainingLength()<1&&await this.flush(1);const t=this.data.getUint8(this.pointer);return this.pointer++,this.pos++,t}async peekUint8(){return this.remainingLength()<1&&await this.flush(1),this.data.getUint8(this.pointer)}async readUint16(){this.remainingLength()<2&&await this.flush(2);const t=this.data.getUint16(this.pointer,this.littleEndian);return this.pointer+=2,this.pos+=BigInt(2),t}async peekUint16(){return this.remainingLength()<2&&await this.flush(2),this.data.getUint16(this.pointer,this.littleEndian)}async readUint24(){this.remainingLength()<3&&await this.flush(3);const t=await this.readUint16(),e=await this.readUint8();return this.littleEndian?e<<16|t:t<<8|e}async peekUint24(){this.remainingLength()<3&&await this.flush(3);const t=this.pointer,e=this.pos,r=await this.readUint16(),i=await this.readUint8(),s=this.littleEndian?i<<16|r:r<<8|i;return this.pointer=t,this.pos=e,s}async readUint32(){this.remainingLength()<4&&await this.flush(4);const t=this.data.getUint32(this.pointer,this.littleEndian);return this.pointer+=4,this.pos+=BigInt(4),t}async peekUint32(){return this.remainingLength()<4&&await this.flush(4),this.data.getUint32(this.pointer,this.littleEndian)}async readUint64(){this.remainingLength()<8&&await this.flush(8);const t=this.data.getBigUint64(this.pointer,this.littleEndian);return this.pointer+=8,this.pos+=BigInt(8),t}async peekUint64(){return this.remainingLength()<8&&await this.flush(8),this.data.getBigUint64(this.pointer,this.littleEndian)}async readInt8(){this.remainingLength()<1&&await this.flush(1);const t=this.data.getInt8(this.pointer);return this.pointer++,this.pos++,t}async peekInt8(){return this.remainingLength()<1&&await this.flush(1),this.data.getInt8(this.pointer)}async readInt16(){this.remainingLength()<2&&await this.flush(2);const t=this.data.getInt16(this.pointer,this.littleEndian);return this.pointer+=2,this.pos+=BigInt(2),t}async peekInt16(){return this.remainingLength()<2&&await this.flush(2),this.data.getInt16(this.pointer,this.littleEndian)}async readInt24(){const t=await this.readUint24();return 8388608&t?t-16777216:t}async peekInt24(){const t=await this.peekUint24();return 8388608&t?t-16777216:t}async readInt32(){this.remainingLength()<4&&await this.flush(4);const t=this.data.getInt32(this.pointer,this.littleEndian);return this.pointer+=4,this.pos+=BigInt(4),t}async peekInt32(){return this.remainingLength()<4&&await this.flush(4),this.data.getInt32(this.pointer,this.littleEndian)}async readInt64(){this.remainingLength()<8&&await this.flush(8);const t=this.data.getBigInt64(this.pointer,this.littleEndian);return this.pointer+=8,this.pos+=BigInt(8),t}async peekInt64(){return this.remainingLength()<8&&await this.flush(8),this.data.getBigInt64(this.pointer,this.littleEndian)}async readFloat(){this.remainingLength()<4&&await this.flush(4);const t=this.data.getFloat32(this.pointer,this.littleEndian);return this.pointer+=4,this.pos+=BigInt(4),t}async peekFloat(){return this.remainingLength()<4&&await this.flush(4),this.data.getFloat32(this.pointer,this.littleEndian)}async readDouble(){this.remainingLength()<8&&await this.flush(8);const t=this.data.getFloat64(this.pointer,this.littleEndian);return this.pointer+=8,this.pos+=BigInt(8),t}async peekDouble(){return this.remainingLength()<8&&await this.flush(8),this.data.getFloat64(this.pointer,this.littleEndian)}async readHex(t=1){let e="";for(let r=0;r<t;r++){const t=(await this.readUint8()).toString(16);e+=1===t.length?"0"+t:t}return e}async peekHex(t=1){t>this.size&&(this.error=-1048574,n.h2("peekHex, length too large",l,416)),this.remainingLength()<t&&await this.flush(t);const e=this.pointer,r=this.pos;let i="";for(let e=0;e<t;e++){const t=(await this.readUint8()).toString(16);i+=1===t.length?"0"+t:t}return this.pointer=e,this.pos=r,i}async readBuffer(t,e){if(e||(e=new Uint8Array(t)),this.remainingLength()<t){let r=0;if(this.remainingLength()>0){const i=this.remainingLength();e.set(this.buffer.subarray(this.pointer,this.pointer+i),r),r+=i,this.pointer+=i,this.pos+=BigInt(i),t-=i}for(;t>0;){await this.flush();const i=Math.min(this.endPointer-this.pointer,t);e.set(this.buffer.subarray(this.pointer,this.pointer+i),r),r+=i,this.pointer+=i,this.pos+=BigInt(i),t-=i}}else e.set(this.buffer.subarray(this.pointer,this.pointer+t),0),this.pointer+=t,this.pos+=BigInt(t);return e}async peekBuffer(t,e){return t>this.size&&(this.error=-1048574,n.h2("peekBuffer, length too large",l,501)),this.remainingLength()<t&&await this.flush(t),e||(e=new Uint8Array(t)),e.set(this.buffer.subarray(this.pointer,this.pointer+t),0),e}async readToBuffer(t,e){if(this.remainingLength()<t){let r=0;if(this.remainingLength()>0){const i=this.remainingLength();e.set(this.buffer.subarray(this.pointer,this.pointer+i),r),r+=i,this.pointer+=i,this.pos+=BigInt(i),t-=i}for(;t>0;){try{await this.flush()}catch(t){if(-1048576===this.error&&r)return r;throw t}const i=Math.min(this.endPointer-this.pointer,t);e.set(this.buffer.subarray(this.pointer,this.pointer+i),r),r+=i,this.pointer+=i,this.pos+=BigInt(i),t-=i}return r}return e.set(this.buffer.subarray(this.pointer,this.pointer+t),0),this.pointer+=t,this.pos+=BigInt(t),t}async readString(t=1){const e=await this.readBuffer(t);return o.decode(e)}async peekString(t=1){const e=await this.peekBuffer(t);return o.decode(e)}async readLine(){let t="";for(;;){let e=!1;for(let r=this.pointer;r<this.endPointer;r++)if(10===this.buffer[r]||13===this.buffer[r]){r!==this.pointer&&(t+=await this.readString(r-this.pointer)),e=!0;break}if(e)break;t+=await this.readString(this.remainingLength()),await this.flush()}let e=await this.peekUint8();return 10!==e&&13!==e||(this.pointer++,13===e&&(e=await this.peekUint8(),10===e&&this.pointer++)),t}async peekLine(){if(this.remainingLength()<this.size)try{await this.flush()}catch(t){if(-1048576!==this.error)throw t}let t="",e=!1;for(let r=this.pointer;r<this.endPointer;r++)if(10===this.buffer[r]||13===this.buffer[r]){t+=await this.peekString(r-this.pointer),e=!0;break}return e||(this.error=-1048574,n.h2("peekLine, out of buffer",l,659)),t}getPointer(){return this.pointer}getPos(){return this.pos}async skip(t){const e=t;for(;this.remainingLength()<t;)t-=this.remainingLength(),this.pointer=this.endPointer,await this.flush();this.remainingLength()>=t&&(this.pointer+=t),this.pos+=BigInt(e)}remainingLength(){return this.endPointer-this.pointer}async flush_(t){return new(a())((async e=>{for(this.flushResolve=e;;){const r=await this.onFlush(t);if(-1048575!==r){this.flushResolve=null,e(r);break}await new c.A(0)}}))}async flush(t=0){if(this.onFlush||(this.error=-1048574,n.h2("IOReader error, flush failed because of no flush callback",l,738)),!(this.size-this.remainingLength()<=0)){if(t=Math.min(t,this.size),this.pointer<this.endPointer?(this.buffer.set(this.buffer.subarray(this.pointer,this.endPointer),0),this.endPointer=this.endPointer-this.pointer):this.endPointer=0,this.pointer=0,t)for(;this.remainingLength()<t;){const t=await this.flush_(this.buffer.subarray(this.endPointer));if(t<0)throw this.error=t,new Error(`IOReader error, flush ${-1048576===t?"ended":"failed"}, ret: ${t}`);this.endPointer+=t}else{const t=await this.flush_(this.buffer.subarray(this.endPointer));if(t<0)throw this.error=t,new Error(`IOReader error, flush ${-1048576===t?"ended":"failed"}, ret: ${t}`);this.endPointer+=t}this.error=0}}async seek(t,e=!1,r=!0){if(!e){const e=Number(t-this.pos);if(e<0&&Math.abs(e)<=this.pointer)return this.pointer+=e,void(this.pos=t);if(e>0&&this.pointer+e<this.endPointer)return this.pointer+=e,void(this.pos=t);if(0===e)return}this.onSeek||(this.error=-1048574,n.h2("IOReader error, seek failed because of no seek callback",l,809)),this.pointer=this.endPointer=0,this.pos=t;const i=await this.onSeek(t);0!==i&&(this.error=i,n.h2("IOReader error, seek failed",l,818)),r&&await this.flush()}getBuffer(){return this.buffer}appendBuffer(t){if(this.size-this.endPointer>=t.length)this.buffer.set(t,this.endPointer),this.endPointer+=t.length;else if(this.buffer.set(this.buffer.subarray(this.pointer,this.endPointer),0),this.endPointer=this.endPointer-this.pointer,this.pointer=0,this.size-this.endPointer>=t.length)this.buffer.set(t,this.endPointer),this.endPointer+=t.length;else{const e=Math.min(this.size-this.endPointer,t.length);this.buffer.set(t.subarray(0,e),this.endPointer),this.endPointer+=e,n.R8("IOReader, call appendBuffer but the buffer's size is lagger then the remaining size",l,856)}}reset(){this.pointer=this.endPointer=0,this.pos=BigInt(0),this.error=0}setEndian(t){this.littleEndian=!t}isBigEndian(){return!this.littleEndian}async fileSize(){if(this.fileSize_)return this.fileSize_;if(!this.onSize)return n.R8("IOReader error, fileSize failed because of no onSize callback",l,898),BigInt(0);try{this.fileSize_=await this.onSize()}catch(t){n.R8(`IOReader error, call fileSize failed: ${t}`,l,905),this.fileSize_=BigInt(0)}return this.fileSize_}getBufferSize(){return this.size}async pipe(t,e){if(e)if(this.remainingLength()<e){if(this.remainingLength()>0){const r=this.remainingLength();await t.writeBuffer(this.buffer.subarray(this.pointer,this.pointer+r)),this.pointer+=r,this.pos+=BigInt(r),e-=r}for(;e>0;){await this.flush();const r=Math.min(this.remainingLength(),e);await t.writeBuffer(this.buffer.subarray(this.pointer,this.pointer+r)),this.pointer+=r,this.pos+=BigInt(r),e-=r}}else await t.writeBuffer(this.buffer.subarray(this.pointer,this.pointer+e)),this.pointer+=e,this.pos+=BigInt(e);else{if(this.remainingLength()>0){const e=this.remainingLength();await t.writeBuffer(this.buffer.subarray(this.pointer,this.pointer+e)),this.pointer+=e,this.pos+=BigInt(e)}for(;await this.flush_(this.buffer.subarray(0))>0;){const e=this.remainingLength();await t.writeBuffer(this.buffer.subarray(this.pointer,this.pointer+e)),this.pointer+=e,this.pos+=BigInt(e)}}}abort(){this.error=-1048572,this.flushResolve&&(this.flushResolve(-1048572),this.flushResolve=null)}}},34531:(t,e,r)=>{"use strict";r.d(e,{A:()=>a});var i=r(49859),s=r(50011);class a{constructor(t=1048576,e=!0,r){if((0,i.A)(this,"data",void 0),(0,i.A)(this,"buffer",void 0),(0,i.A)(this,"pointer",void 0),(0,i.A)(this,"pos",void 0),(0,i.A)(this,"size",void 0),(0,i.A)(this,"littleEndian",void 0),(0,i.A)(this,"error",void 0),(0,i.A)(this,"onFlush",void 0),(0,i.A)(this,"onSeek",void 0),this.pointer=0,this.pos=BigInt(0),this.size=t,this.littleEndian=!e,this.error=0,r&&r.view)this.size=r.length,this.buffer=r,this.data=r.view;else if(r&&!r.byteOffset)this.size=r.length,this.buffer=r,this.data=new DataView(this.buffer.buffer);else{if(r)throw new Error("not support subarray of ArrayBuffer");this.buffer=new Uint8Array(this.size),this.data=new DataView(this.buffer.buffer)}}async writeUint8(t){this.remainingLength()<1&&await this.flush(),this.data.setUint8(this.pointer,t),this.pointer++,this.pos++}async writeUint16(t){this.remainingLength()<2&&await this.flush(),this.data.setUint16(this.pointer,t,this.littleEndian),this.pointer+=2,this.pos+=BigInt(2)}async writeUint24(t){this.remainingLength()<3&&await this.flush();const e=(16711680&t)>>16,r=(65280&t)>>8,i=255&t;this.littleEndian?(await this.writeUint8(i),await this.writeUint8(r),await this.writeUint8(e)):(await this.writeUint8(e),await this.writeUint8(r),await this.writeUint8(i))}async writeUint32(t){this.remainingLength()<4&&await this.flush(),this.data.setUint32(this.pointer,t,this.littleEndian),this.pointer+=4,this.pos+=BigInt(4)}async writeUint64(t){this.remainingLength()<8&&await this.flush(),this.data.setBigUint64(this.pointer,t,this.littleEndian),this.pointer+=8,this.pos+=BigInt(8)}async writeInt8(t){this.remainingLength()<1&&await this.flush(),this.data.setInt8(this.pointer,t),this.pointer++,this.pos++}async writeInt16(t){this.remainingLength()<2&&await this.flush(),this.data.setInt16(this.pointer,t,this.littleEndian),this.pointer+=2,this.pos+=BigInt(2)}async writeInt24(t){await this.writeUint24(t<0?t+16777216:t)}async writeInt32(t){this.remainingLength()<4&&await this.flush(),this.data.setInt32(this.pointer,t,this.littleEndian),this.pointer+=4,this.pos+=BigInt(4)}async writeInt64(t){this.remainingLength()<8&&await this.flush(),this.data.setBigInt64(this.pointer,t,this.littleEndian),this.pointer+=8,this.pos+=BigInt(8)}async writeFloat(t){this.remainingLength()<4&&await this.flush(),this.data.setFloat32(this.pointer,t,this.littleEndian),this.pointer+=4,this.pos+=BigInt(4)}async writeDouble(t){this.remainingLength()<8&&await this.flush(),this.data.setFloat64(this.pointer,t,this.littleEndian),this.pointer+=8,this.pos+=BigInt(8)}getPointer(){return this.pointer}getPos(){return this.pos}remainingLength(){return this.size-this.pointer}async writeBuffer(t){if(!t.length)return;let e=t.length;if(this.remainingLength()<e){let r=0;for(;e>0;){await this.flush();const i=Math.min(this.size,e);this.buffer.set(t.subarray(r,r+i),this.pointer),this.pointer+=i,this.pos+=BigInt(i),r+=i,e-=i}}else this.buffer.set(t,this.pointer),this.pointer+=e,this.pos+=BigInt(e)}async writeString(t){const e=s.encode(t);return await this.writeBuffer(e),e.length}async flush(){if(!this.onFlush)throw this.error=-1048574,Error("IOWriter error, flush failed because of no flush callback");if(this.pointer){const t=await this.onFlush(this.buffer.subarray(0,this.pointer));if(0!==t)throw this.error=t,Error("IOWriter error, flush failed")}this.pointer=0}async flushToPos(t){if(!this.onFlush)throw this.error=-1048574,Error("IOWriter error, flush failed because of no flush callback");if(this.pointer){const e=await this.onFlush(this.buffer.subarray(0,this.pointer),t);if(0!==e)throw this.error=e,Error("IOWriter error, flush failed")}this.pointer=0}async seek(t){if(!this.onSeek)throw this.error=-1048574,Error("IOWriter error, seek failed because of no seek callback");await this.flush();const e=await this.onSeek(t);if(0!==e)throw this.error=e,Error("IOWriter error, seek failed");this.pos=t}seekInline(t){const e=this.pointer;this.pointer=Math.max(0,Math.min(this.size,t)),this.pos+=BigInt(this.pointer-e)}skip(t){const e=this.pointer;this.pointer=Math.min(this.size,this.pointer+t),this.pos+=BigInt(this.pointer-e)}back(t){const e=this.pointer;this.pointer=Math.max(0,this.pointer-t),this.pos+=BigInt(this.pointer-e)}getBuffer(){return this.buffer.subarray(0,this.pointer)}setEndian(t){this.littleEndian=!t}reset(){this.pointer=0,this.pos=BigInt(0),this.error=0}getBufferSize(){return this.size}}},45726:(t,e,r)=>{"use strict";r.d(e,{A:()=>o});var i=r(49859),s=r(72739),a=r(4624);const n="src/common/math/Matrix3.ts";class o{static RowMajor(t){return new o([t[0],t[3],t[6],t[1],t[4],t[7],t[2],t[5],t[8]])}static ColMajor(t){return new o(t)}constructor(t){(0,i.A)(this,"element",void 0),t?(this.element=new Float32Array(9),this.set(t)):this.element=new Float32Array([1,0,0,0,1,0,0,0,1])}rc(t,e){return this.getValue(3*e+t)}setRC(t,e,r){this.setValue(3*e+t,r)}getValue(t){if(t>=0&&t<9)return this.element[t];a.z3("index out of Matrix4's rang [0 - 9]",n,47)}setValue(t,e){t>=0&&t<9?this.element[t]=e:a.z3("index out of Matrix4's rang [0 - 9]",n,56)}setIdentity(){return this.element=new Float32Array([1,0,0,0,1,0,0,0,1]),this}set(t){return s.__(t,((t,e)=>{this.element[e]=t})),this}invert(){const t=this.element,e=t[0],r=t[1],i=t[2],s=t[3],a=t[4],n=t[5],o=t[6],c=t[7],l=t[8],h=l*a-n*c,u=n*o-l*s,d=c*s-a*o,p=e*h+r*u+i*d;if(0===p)return this.set([0,0,0,0,0,0,0,0,0]);const f=1/p;return t[0]=h*f,t[1]=(i*c-l*r)*f,t[2]=(n*r-i*a)*f,t[3]=u*f,t[4]=(l*e-i*o)*f,t[5]=(i*s-n*e)*f,t[6]=d*f,t[7]=(r*o-c*e)*f,t[8]=(a*e-r*s)*f,this}toArray(){let t=[];for(let e=0;e<9;e++)t[e]=this.element[e];return t}copy(){return(new o).set(this.toArray())}}},12535:(t,e,r)=>{"use strict";r.d(e,{A:()=>l});var i=r(49859),s=r(72739),a=r(4624),n=r(1064);const o="src/common/math/Matrix4.ts";let c;class l{static shared(){return c||(c=new l)}static RowMajor(t){return new l([t[0],t[4],t[8],t[12],t[1],t[5],t[9],t[13],t[2],t[6],t[10],t[14],t[3],t[7],t[11],t[15]])}static ColMajor(t){return new l(t)}constructor(t){(0,i.A)(this,"element",void 0),t?(this.element=new Float32Array(16),this.set(t)):this.element=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}rc(t,e){return this.getValue(4*e+t)}setRC(t,e,r){this.setValue(4*e+t,r)}getValue(t){if(t>=0&&t<=15)return this.element[t];a.z3("index out of Matrix4's rang [0 - 15]",o,58)}setValue(t,e){t>=0&&t<=15?this.element[t]=e:a.z3("index out of Matrix4's rang [0 - 15]",o,67)}setIdentity(){return this.element=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this}set(t){return s.__(t,((t,e)=>{this.element[e]=t})),this}multiply(t){let e,r,i,s,a,n,o,c;if(s=r=this.element,i=t.element,s===i)for(i=new Float32Array(16),e=0;e<16;e++)i[e]=s[e];for(e=0;e<4;e++)a=r[e],n=r[e+4],o=r[e+8],c=r[e+12],s[e]=a*i[0]+n*i[1]+o*i[2]+c*i[3],s[e+4]=a*i[4]+n*i[5]+o*i[6]+c*i[7],s[e+8]=a*i[8]+n*i[9]+o*i[10]+c*i[11],s[e+12]=a*i[12]+n*i[13]+o*i[14]+c*i[15];return this}multiplyVector3(t){let e=this.element,r=t.element;return new n.P([r[0]*e[0]+r[1]*e[4]+r[2]*e[8]+e[12],r[0]*e[1]+r[1]*e[5]+r[2]*e[9]+e[13],r[0]*e[2]+r[1]*e[6]+r[2]*e[10]+e[14]])}multiplyVector4(t){let e=this.element,r=t.element;return new n.I([r[0]*e[0]+r[1]*e[4]+r[2]*e[8]+r[3]*e[12],r[0]*e[1]+r[1]*e[5]+r[2]*e[9]+r[3]*e[13],r[0]*e[2]+r[1]*e[6]+r[2]*e[10]+r[3]*e[14],r[0]*e[3]+r[1]*e[7]+r[2]*e[11]+r[3]*e[15]])}transpose(){let t,e;return t=this.element,e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setInverseOf(t){let e,r,i,s,a;if(r=t.element,i=this.element,s=new Float32Array(16),s[0]=r[5]*r[10]*r[15]-r[5]*r[11]*r[14]-r[9]*r[6]*r[15]+r[9]*r[7]*r[14]+r[13]*r[6]*r[11]-r[13]*r[7]*r[10],s[1]=-r[1]*r[10]*r[15]+r[1]*r[11]*r[14]+r[9]*r[2]*r[15]-r[9]*r[3]*r[14]-r[13]*r[2]*r[11]+r[13]*r[3]*r[10],s[2]=r[1]*r[6]*r[15]-r[1]*r[7]*r[14]-r[5]*r[2]*r[15]+r[5]*r[3]*r[14]+r[13]*r[2]*r[7]-r[13]*r[3]*r[6],s[3]=-r[1]*r[6]*r[11]+r[1]*r[7]*r[10]+r[5]*r[2]*r[11]-r[5]*r[3]*r[10]-r[9]*r[2]*r[7]+r[9]*r[3]*r[6],s[4]=-r[4]*r[10]*r[15]+r[4]*r[11]*r[14]+r[8]*r[6]*r[15]-r[8]*r[7]*r[14]-r[12]*r[6]*r[11]+r[12]*r[7]*r[10],s[5]=r[0]*r[10]*r[15]-r[0]*r[11]*r[14]-r[8]*r[2]*r[15]+r[8]*r[3]*r[14]+r[12]*r[2]*r[11]-r[12]*r[3]*r[10],s[6]=-r[0]*r[6]*r[15]+r[0]*r[7]*r[14]+r[4]*r[2]*r[15]-r[4]*r[3]*r[14]-r[12]*r[2]*r[7]+r[12]*r[3]*r[6],s[7]=r[0]*r[6]*r[11]-r[0]*r[7]*r[10]-r[4]*r[2]*r[11]+r[4]*r[3]*r[10]+r[8]*r[2]*r[7]-r[8]*r[3]*r[6],s[8]=r[4]*r[9]*r[15]-r[4]*r[11]*r[13]-r[8]*r[5]*r[15]+r[8]*r[7]*r[13]+r[12]*r[5]*r[11]-r[12]*r[7]*r[9],s[9]=-r[0]*r[9]*r[15]+r[0]*r[11]*r[13]+r[8]*r[1]*r[15]-r[8]*r[3]*r[13]-r[12]*r[1]*r[11]+r[12]*r[3]*r[9],s[10]=r[0]*r[5]*r[15]-r[0]*r[7]*r[13]-r[4]*r[1]*r[15]+r[4]*r[3]*r[13]+r[12]*r[1]*r[7]-r[12]*r[3]*r[5],s[11]=-r[0]*r[5]*r[11]+r[0]*r[7]*r[9]+r[4]*r[1]*r[11]-r[4]*r[3]*r[9]-r[8]*r[1]*r[7]+r[8]*r[3]*r[5],s[12]=-r[4]*r[9]*r[14]+r[4]*r[10]*r[13]+r[8]*r[5]*r[14]-r[8]*r[6]*r[13]-r[12]*r[5]*r[10]+r[12]*r[6]*r[9],s[13]=r[0]*r[9]*r[14]-r[0]*r[10]*r[13]-r[8]*r[1]*r[14]+r[8]*r[2]*r[13]+r[12]*r[1]*r[10]-r[12]*r[2]*r[9],s[14]=-r[0]*r[5]*r[14]+r[0]*r[6]*r[13]+r[4]*r[1]*r[14]-r[4]*r[2]*r[13]-r[12]*r[1]*r[6]+r[12]*r[2]*r[5],s[15]=r[0]*r[5]*r[10]-r[0]*r[6]*r[9]-r[4]*r[1]*r[10]+r[4]*r[2]*r[9]+r[8]*r[1]*r[6]-r[8]*r[2]*r[5],a=r[0]*s[0]+r[1]*s[4]+r[2]*s[8]+r[3]*s[12],0===a)return this;for(a=1/a,e=0;e<16;e++)i[e]=s[e]*a;return this}invert(){return this.setInverseOf(this),this}setOrtho(t,e,r,i,s,n){let c,l,h;return t!==e&&r!==i&&s!==n||a.h2("null frustum",o,240),c=1/(e-t),l=1/(i-r),h=1/(n-s),this.set([2*c,0,0,0,0,2*l,0,0,0,0,-2*h,0,-(e+t)*c,-(i+r)*l,-(n+s)*h,1]),this}ortho(t,e,r,i,s,a){return this.multiply((new l).setOrtho(t,e,r,i,s,a))}setFrustum(t,e,r,i,s,n){let c,l,h;return t!==e&&r!==i&&s!==n||a.z3("null frustum",o,281),s<=0&&a.h2("near <= 0",o,284),n<=0&&a.h2("far <= 0",o,287),c=1/(e-t),l=1/(i-r),h=1/(n-s),this.set([2*s*c,0,0,0,0,2*s*l,0,0,(e+t)*c,(i+r)*l,-(n+s)*h,-1,0,0,-2*s*n*h,0]),this}frustum(t,e,r,i,s,a){return this.multiply((new l).setOrtho(t,e,r,i,s,a))}setPerspective(t,e,r,i){let s,n,c;return r!==i&&0!==e||a.h2("null frustum",o,328),r<=0&&a.h2("near <= 0",o,331),i<=0&&a.h2("far <= 0",o,334),t=Math.PI*t/180/2,n=Math.sin(t),0===n&&a.h2("null frustum",o,342),s=1/(i-r),c=Math.cos(t)/n,this.set([c/e,0,0,0,0,c,0,0,0,0,-(i+r)*s,-1,0,0,-2*r*i*s,0]),this}perspective(t,e,r,i){return this.multiply((new l).setPerspective(t,e,r,i))}setScale(t){return this.set([t.x,0,0,0,0,t.y,0,0,0,0,t.z,0,0,0,0,1]),this}scale(t){let e=this.element;return e[0]*=t.x,e[1]*=t.x,e[2]*=t.x,e[3]*=t.x,e[4]*=t.y,e[5]*=t.y,e[6]*=t.y,e[7]*=t.y,e[8]*=t.z,e[9]*=t.z,e[10]*=t.z,e[11]*=t.z,this}setTranslate(t){return this.set([1,0,0,0,0,1,0,0,0,0,1,0,t.x,t.y,t.z,1]),this}preTranslate(t){let e=this.element;return e[12]+=e[0]*t.x+e[4]*t.y+e[8]*t.z,e[13]+=e[1]*t.x+e[5]*t.y+e[9]*t.z,e[14]+=e[2]*t.x+e[6]*t.y+e[10]*t.z,e[15]+=e[3]*t.x+e[7]*t.y+e[11]*t.z,this}postTranslate(t){let e=this.element;return e[0]+=t.x*e[3],e[1]+=t.y*e[3],e[2]+=t.z*e[3],e[4]+=t.x*e[7],e[5]+=t.y*e[7],e[6]+=t.z*e[7],e[8]+=t.x*e[11],e[9]+=t.y*e[11],e[10]+=t.z*e[11],e[12]+=t.x*e[15],e[13]+=t.y*e[15],e[14]+=t.z*e[15],this}setRotate(t,e){let r,i,s,a,n,o,c,l,h,u,d,p,f,m;return t=Math.PI*t/180,r=e.x,i=e.y,s=e.z,a=Math.sin(t),n=Math.cos(t),0!==e.x&&0===e.y&&0===e.z?(e.x<0&&(a=-a),this.set([1,0,0,0,0,n,-a,0,0,a,n,0,0,0,0,1])):0===e.x&&0!==e.y&&0===e.z?(e.y<0&&(a=-a),this.set([n,0,a,0,0,1,0,0,-a,0,n,0,0,0,0,1])):0===e.x&&0===e.y&&0!==e.z?(e.z<0&&(a=-a),this.set([n,-a,0,0,a,n,0,0,0,0,1,0,0,0,0,1])):(o=e.magnitude,1!==o&&(c=1/o,r*=c,i*=c,s*=c),l=1-n,h=r*i,u=i*s,d=s*r,p=r*a,f=i*a,m=s*a,this.set([r*r*l+n,h*l+m,d*l-f,0,h*l-m,i*i*l+n,u*l+p,0,d*l+f,u*l-p,s*s*l+n,0,0,0,0,1])),this}rotate(t,e){return this.multiply((new l).setRotate(t,e)),this}setLookAt(t,e,r){let i,s,a,o,c,l,h,u,d,p,f;return i=e.x-t.x,s=e.y-t.y,a=e.z-t.z,o=1/Math.sqrt(i*i+s*s+a*a),i*=o,s*=o,a*=o,c=s*r.z-a*r.y,l=a*r.x-i*r.z,h=i*r.y-s*r.x,u=1/Math.sqrt(c*c+l*l+h*h),c*=u,l*=u,h*=u,d=l*a-h*s,p=h*i-c*a,f=c*s-l*i,this.set([c,d,-i,0,l,p,-s,0,h,f,-a,0,0,0,0,1]),this.preTranslate(new n.P([-t.x,-t.y,-t.z]))}lookAt(t,e,r){return this.multiply((new l).setLookAt(t,e,r))}toArray(){let t=[];for(let e=0;e<16;e++)t[e]=this.element[e];return t}copy(){return(new l).set(this.toArray())}}},1064:(t,e,r)=>{"use strict";r.d(e,{I:()=>a,P:()=>s});var i=r(49859);class s{constructor(t){(0,i.A)(this,"element",void 0),this.element=new Float32Array(3),t&&(this.element[0]=t[0],this.element[1]=t[1],this.element[2]=t[2])}normalize(){let t=this.x,e=this.y,r=this.z,i=this.magnitude;return i?(1===i||(i=1/i,this.x=t*i,this.y=e*i,this.z=r*i),this):(this.x=this.y=this.z=0,this)}toArray(){return[this.x,this.y,this.z]}get magnitude(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}get sqrMagnitude(){return this.x*this.x+this.y*this.y+this.z*this.z}get x(){return this.element[0]}set x(t){this.element[0]=t}get y(){return this.element[1]}set y(t){this.element[1]=t}get z(){return this.element[2]}set z(t){this.element[2]=t}}class a{constructor(t){(0,i.A)(this,"element",void 0),this.element=new Float32Array(4),t&&(this.element[0]=t[0],this.element[1]=t[1],this.element[2]=t[2],this.element[4]=t[3])}}},95073:(t,e,r)=>{"use strict";function i(t,e){return t+(e-1)&~(e-1)}r.d(e,{A:()=>i})},31658:(t,e,r)=>{"use strict";function i(t,e){for(;0!==e;)[t,e]=[e,t%e];return t}r.d(e,{A:()=>i})},66551:(t,e,r)=>{"use strict";r.d(e,{B:()=>s});var i=r(45726);function s(t,e){const r=new i.A([0,0,0,0,0,0,0,0,0]);for(let i=0;i<3;i++)for(let s=0;s<3;s++){let a=t.rc(i,0)*e.rc(0,s)+t.rc(i,1)*e.rc(1,s)+t.rc(i,2)*e.rc(2,s);r.setRC(i,s,a)}return r}r(12535)},4304:(t,e,r)=>{"use strict";r.d(e,{A:()=>a});var i=r(54810),s=r.n(i);function a(t){return t<=0?1:Math.pow(2,Math.ceil(s()(t)))}},60153:(t,e,r)=>{"use strict";r.d(e,{Y3:()=>s}),r(12535);var i=r(1064);function s(t,e){const r=new i.P([0,0,0]);for(let i=0;i<3;i++)r.element[i]=t.rc(i,0)*e.x+t.rc(i,1)*e.y+t.rc(i,2)*e.z;return r}},42577:(t,e,r)=>{"use strict";r.d(e,{A:()=>a});var i=r(49859);class s extends EventTarget{constructor(...t){super(...t),(0,i.A)(this,"peer",void 0),(0,i.A)(this,"onmessage",void 0),(0,i.A)(this,"onmessageerror",void 0)}postMessage(t,e){var r;null!==(r=this.peer)&&void 0!==r&&r.onmessage&&this.peer.onmessage({data:t})}close(){this.peer=null}start(){}}class a{constructor(){(0,i.A)(this,"port1",void 0),(0,i.A)(this,"port2",void 0),this.port1=new s,this.port2=new s,this.port1.peer=this.port2,this.port2.peer=this.port1}}},84149:(t,e,r)=>{"use strict";r.d(e,{Ay:()=>v,S3:()=>m,Wo:()=>f});var i=r(49859),s=r(94870),a=r.n(s),n=r(74707),o=r.n(n),c=r(61240),l=r.n(c),h=r(86226),u=r.n(h),d=r(96172),p=r(34677);const f="notify",m="request";class v extends d.A{constructor(t){var e;super(!0),(0,i.A)(this,"port",void 0),(0,i.A)(this,"requestMap",void 0),(0,i.A)(this,"seq",void 0),(0,i.A)(this,"closed",void 0),this.port=t,this.port.onmessage=a()(e=this.handle).call(e,this),this.seq=0,this.requestMap=new(o()),this.port.start(),this.closed=!1}handle(t){const e=t.data,r=e.type,i=e.data;if("notify"===r)this.fire(f,i);else if("reply"===r){const t=this.requestMap.get(i.seq);t&&((0,p.A)(i.result)?t.resolve(i.result):i.error?t.reject(i.error):t.resolve(void 0),this.requestMap.delete(i.seq))}else"request"===r&&this.fire(m,i)}notify(t,e={},r=[]){this.port.postMessage({type:"notify",data:{method:t,params:e}},r)}async request(t,e={},r=[]){return new(l())(((i,s)=>{const a=this.seq++;this.requestMap.set(a,{resolve:i,reject:s}),this.port.postMessage({type:"request",data:{seq:a,method:t,params:e}},r)}))}reply(t,e,r,i=[]){const s={seq:t.seq};(0,p.A)(e)?s.result=e:r&&(s.error=r),null!=i&&i.length?this.port.postMessage({type:"reply",data:s},i):this.port.postMessage({type:"reply",data:s})}getPort(){return this.port}destroy(){var t;this.requestMap.size&&(u()(t=this.requestMap).call(t,(t=>{t.reject("ipc port close")})),this.requestMap.clear()),this.port&&(this.port.close(),this.port=null),this.closed=!0}}},55013:(t,e,r)=>{"use strict";r(94870),r(84149).Ay},6253:(t,e,r)=>{"use strict";r.d(e,{A:()=>f});var i=r(49859),s=r(56255),a=r.n(s),n=r(39638),o=r(86932),c=r(47222),l=r(78995);let h,u=0;function d(){return h?(u++,h):(h=new c.A,u=1,h)}function p(){0!==u&&(u--,0===u&&(h.destroy(),h=null))}class f{constructor(t,e=!0,r=!1){(0,i.A)(this,"messageChannel",void 0),(0,i.A)(this,"interval",void 0),(0,i.A)(this,"started",void 0),(0,i.A)(this,"timer",void 0),(0,i.A)(this,"workerTimer",void 0),(0,i.A)(this,"workerSetTimeout",void 0),(0,i.A)(this,"onClock",void 0),(0,i.A)(this,"nextTick",void 0),(0,i.A)(this,"a",void 0),(0,i.A)(this,"b",void 0),(0,i.A)(this,"beta",void 0),(0,i.A)(this,"alpha",void 0),(0,i.A)(this,"count",void 0),(0,i.A)(this,"equivalent",void 0),(0,i.A)(this,"timestamp",void 0),(0,i.A)(this,"onVisibilityChange",void 0),(0,i.A)(this,"timeoutNext",void 0),(0,i.A)(this,"running",void 0),(0,i.A)(this,"highPerformance",void 0),(0,i.A)(this,"forceWorker",void 0),this.started=!1,this.interval=t,this.highPerformance=e,this.forceWorker=r,this.a=.2,this.b=4,this.equivalent=50,this.timestamp=0,this.nextTick=()=>{if(this.started&&!this.running)if(this.running=!0,this.interval>=4||!this.highPerformance)this.timeoutTick();else if(this.interval<=0)this.messageChannel.port1.postMessage(null);else{const t=(0,o.A)();t-this.timestamp>this.equivalent&&(this.count=0,this.timestamp=t),this.count<this.beta?this.messageChannel.port1.postMessage(null):this.timeoutTick()}},this.compute(),this.messageChannel=new MessageChannel,this.handleEvent(),this.timeoutNext=t=>{t?this.workerTimer=null:this.timer=null,this.running=!1,this.count++,this.onClock?this.onClock(this.nextTick):this.nextTick()},(0,n.A)()||"hidden"!==document.visibilityState||(this.workerSetTimeout=d()),this.running=!1}compute(t=!0){this.interval>0&&(this.beta=Math.ceil(this.equivalent*(1-this.b/this.interval)/(this.a-this.b)),this.alpha=Math.floor(this.equivalent/this.interval-this.beta),t&&(this.count=0))}timeoutTick(){this.workerSetTimeout&&"hidden"===document.visibilityState&&(this.interval<1e3||this.forceWorker)?this.workerTimer=this.workerSetTimeout.setTimeout(this.timeoutNext,this.interval):this.timer=a()(this.timeoutNext,this.interval)}start(){this.started||(this.started=!0,this.timestamp=(0,o.A)(),this.nextTick())}stop(){this.started=!1,this.timer&&(clearTimeout(this.timer),this.timer=null),this.workerTimer&&this.workerSetTimeout&&this.workerSetTimeout.clearTimeout(this.workerTimer),this.running=!1}isStarted(){return this.started}setInterval(t){this.interval=Math.max(t,0),this.compute()}getInterval(){return this.interval}isZeroTimeout(){return this.interval<4}destroy(){this.stop(),this.workerSetTimeout&&(p(),this.workerSetTimeout=null),this.onVisibilityChange&&(document.removeEventListener("visibilitychange",this.onVisibilityChange),this.onVisibilityChange=null)}handleEvent(){this.messageChannel.port2.onmessage=()=>{this.started&&(this.running=!1,this.count++,this.onClock?this.onClock(this.nextTick):this.nextTick())},(0,n.A)()||(this.onVisibilityChange=(0,l.A)((t=>{"hidden"===document.visibilityState?(this.workerSetTimeout=d(),this.timer&&(clearTimeout(this.timer),this.timer=null,this.running=!1),this.nextTick()):(this.workerTimer&&(this.workerSetTimeout.clearTimeout(this.workerTimer),this.workerTimer=null,this.running=!1),this.timer&&(clearTimeout(this.timer),this.timer=null,this.running=!1),p(),this.workerSetTimeout=null,this.nextTick())}),20),document.addEventListener("visibilitychange",this.onVisibilityChange))}}},39148:(t,e,r)=>{"use strict";r.d(e,{A:()=>h});var i=r(49859),s=r(56255),a=r.n(s),n=r(61240),o=r.n(n),c=r(6253),l=r(86932);class h{constructor(t,e=0,r=0,s=!0,a=!0){(0,i.A)(this,"task",void 0),(0,i.A)(this,"count",void 0),(0,i.A)(this,"emptyCount",void 0),(0,i.A)(this,"started",void 0),(0,i.A)(this,"clock",void 0),(0,i.A)(this,"timestamp",void 0),(0,i.A)(this,"timeout",void 0),(0,i.A)(this,"interval",void 0),(0,i.A)(this,"startTimer",void 0),(0,i.A)(this,"autoInterval",void 0),(0,i.A)(this,"sync",void 0),(0,i.A)(this,"tickAfter",void 0),(0,i.A)(this,"processing",void 0),this.task=t,this.timeout=e,this.interval=r,this.autoInterval=s,this.sync=a,this.count=0,this.emptyCount=0,this.timestamp=0,this.started=!1,this.processing=!1,this.clock=new c.A(this.interval),this.clock.onClock=t=>{if(this.started)if(this.count++,this.sync)this.tickAfter&&(this.tickAfter(),this.tickAfter=null),!1===this.task()?this.stop():this.next(t);else{if(this.processing)return;this.processing=!0,this.task().then((e=>{this.processing=!1,this.tickAfter&&(this.tickAfter(),this.tickAfter=null),!1===e?this.stop():this.next(t)}))}}}next(t){if(!this.started)return;const e=(0,l.A)();if(this.autoInterval&&e-this.timestamp>50){const t=this.emptyCount/this.count;0===this.emptyCount?this.clock.setInterval(Math.max(this.clock.getInterval()>>1,this.interval)):t<.1?this.clock.setInterval(this.clock.getInterval()-1):t>.2?this.clock.setInterval(Math.min(this.clock.getInterval()+1,20)):t>.5&&this.clock.setInterval(this.clock.getInterval()<<1),this.count=0,this.emptyCount=0,this.timestamp=e}t()}start(){this.started=!0,this.timeout?this.startTimer=a()((()=>{this.count=0,this.emptyCount=0,this.timestamp=(0,l.A)(),this.clock.start(),this.startTimer=null}),this.timeout):(this.count=0,this.emptyCount=0,this.timestamp=(0,l.A)(),this.clock.start())}stop(){this.started=!1,this.processing=!1,this.startTimer&&(clearTimeout(this.startTimer),this.startTimer=null),this.clock.stop()}async stopBeforeNextTick(){if(this.startTimer&&(clearTimeout(this.startTimer),this.startTimer=null),this.clock.isStarted())return this.sync?(this.started=!1,this.processing=!1,void this.clock.stop()):new(o())((t=>{this.tickAfter=()=>{this.started=!1,this.processing=!1,this.clock.stop(),t()}}))}isStarted(){return this.started}emptyTask(){this.emptyCount++}isZeroTimeout(){var t;return null===(t=this.clock)||void 0===t?void 0:t.isZeroTimeout()}restart(){this.clock&&(this.stop(),this.clock.setInterval(this.interval),this.start())}resetInterval(){this.clock.setInterval(Math.max(this.clock.getInterval()>>1,this.interval)),this.emptyCount=0,this.count=0,this.timestamp=(0,l.A)()}destroy(){this.stop(),this.task=null,this.timeout=null,this.interval=null}}},74936:(t,e,r)=>{"use strict";r.d(e,{A:()=>a});var i=r(49859),s=r(86932);class a{constructor(){(0,i.A)(this,"base",BigInt(0)),(0,i.A)(this,"rate",BigInt(1e3)),(0,i.A)(this,"startTimestamp",BigInt(0))}start(){this.base=BigInt(0),this.startTimestamp=BigInt((0,s.A)())}getMasterTime(){return this.base+(BigInt((0,s.A)())-this.startTimestamp)*this.rate/BigInt(1e3)}setRate(t){this.base=this.getMasterTime(),this.startTimestamp=BigInt((0,s.A)()),this.rate=BigInt(1e3*t>>>0)}setMasterTime(t){this.base=t,this.startTimestamp=BigInt((0,s.A)())}}},13724:(t,e,r)=>{"use strict";r.d(e,{A:()=>c});var i=r(49859),s=r(29550),a=r.n(s),n=r(56255),o=r.n(n);class c{constructor(t){(0,i.A)(this,"timeout",void 0),(0,i.A)(this,"timer",void 0),(0,i.A)(this,"resolve",void 0),(0,i.A)(this,"reject",void 0),(0,i.A)(this,"startTime",void 0),this.timeout=t}then(t,e){this.resolve=t,this.reject=e,this.startTime=a()(),this.timer=o()((()=>{this.resolve(a()()-this.startTime),this.timer=null}),1e3*this.timeout)}stop(t=!0){this.timer&&(clearTimeout(this.timer),this.timer=null,this.resolve&&t?this.resolve(a()()-this.startTime):this.reject&&!t&&this.reject(a()()-this.startTime))}reset(t){t&&(this.timeout=t),this.timer&&(clearTimeout(this.timer),this.timer=o()((()=>{this.resolve(a()()-this.startTime),this.timer=null}),1e3*this.timeout))}}},54058:(t,e,r)=>{"use strict";r.d(e,{A:()=>n});var i=r(49859),s=r(56255),a=r.n(s);class n{constructor(t,e,r){(0,i.A)(this,"task",void 0),(0,i.A)(this,"timeout",void 0),(0,i.A)(this,"interval",void 0),(0,i.A)(this,"timer",void 0),this.task=t,this.timeout=e,this.interval=r}start(){const t=this;t.stop();let e=t.timeout;const r=t.interval,i=function(){!1!==t.task()&&t.timer?t.timer=a()(i,t.interval):t.stop()};null==e&&(e=r),t.timer=a()(i,e)}stop(){this.timer&&(clearTimeout(this.timer),this.timer=null)}updateInterval(t){this.interval=t}isStarted(){return!!this.timer}destroy(){this.stop(),this.task=this.timeout=this.interval=null}}},47222:(t,e,r)=>{"use strict";r.d(e,{A:()=>u});var i=r(49859),s=r(56255),a=r.n(s),n=r(74707),o=r.n(n),c=r(96984),l=r.n(c);function h(t){t.addEventListener("message",(e=>{var r;let i=e.data.data;a()((()=>{t.postMessage({type:"pong",id:i.id})}),Math.max(null!==(r=i.timeout)&&void 0!==r?r:0,4))}))}class u{constructor(){(0,i.A)(this,"worker",void 0),(0,i.A)(this,"workerUrl",void 0),(0,i.A)(this,"taskMap",void 0),(0,i.A)(this,"id",void 0),this.id=0,this.taskMap=new(o());const t=`\n      ${h.toString()}\n      ${h.name}(self)\n    `,e=new Blob([t],{type:"text/javascript"});this.workerUrl=l().createObjectURL(e),this.worker=new Worker(this.workerUrl),this.worker.addEventListener("message",(t=>{const e=t.data,r=e.type,i=e.id;if("pong"===r){const t=this.taskMap.get(i);t&&t(!0)}}))}setTimeout(t,e=0){const r=this.id++;return this.taskMap.set(r,t),this.worker.postMessage({type:"ping",data:{timeout:e,id:r}}),r}clearTimeout(t){this.taskMap.delete(t)}destroy(){this.worker&&(this.worker.terminate(),this.worker=null),this.workerUrl&&(l().revokeObjectURL(this.workerUrl),this.workerUrl=null),this.taskMap&&(this.taskMap.clear(),this.taskMap=null)}}},38724:(t,e,r)=>{"use strict";r.d(e,{A:()=>o});var i=r(49859),s=r(56255),a=r.n(s),n=r(6253);class o{constructor(t,e,r){(0,i.A)(this,"task",void 0),(0,i.A)(this,"timeout",void 0),(0,i.A)(this,"interval",void 0),(0,i.A)(this,"clock",void 0),(0,i.A)(this,"started",void 0),(0,i.A)(this,"timer",void 0),this.task=t,this.timeout=e,this.interval=r,this.started=!1,this.clock=new n.A(this.interval,!1,!0),this.clock.onClock=t=>{this.started&&!1===this.task()?this.stop():t()}}start(){this.started=!0,this.timeout>0?this.timer=a()((()=>{this.timer=null,this.clock.start()}),this.timeout):this.clock.start()}stop(){this.started=!1,this.clock.stop(),this.timer&&(clearTimeout(this.timer),this.timer=null)}isStarted(){return this.started}updateInterval(t){this.interval=t,this.clock.setInterval(t)}destroy(){this.clock&&(this.stop(),this.clock.destroy(),this.clock=null),this.started=!1,this.task=this.timeout=this.interval=null}}},72739:(t,e,r)=>{"use strict";r.d(e,{$r:()=>v,El:()=>g,FB:()=>A,TF:()=>f,VC:()=>d,_:()=>y,__:()=>h,qh:()=>p,zy:()=>m});var i=r(385),s=r.n(i),a=r(18979),n=r.n(a),o=r(67672),c=r(10576),l=r(56401);function h(t,e,r){if(!t)return;const{length:i}=t;if(i)if(r)for(let r=i-1;r>=0&&e(t[r],r)!==c.W8;r--);else for(let r=0;r<i&&e(t[r],r)!==c.W8;r++);}function u(t,e){t[t.length]=e}function d(t,e){!function(t,e,r){o.YO(e)?h(e,(function(e){r(t,e)})):r(t,e)}(t,e,u)}function p(t,e,r){let i=c.Cy;return h(t,(function(t,s){if(r===c.W8?t==e:t===e)return i=s,c.W8})),i}function f(t,e,r){let i=0;return h(t,(function(a,n){(r===c.W8?a==e:a===e)&&(s()(t).call(t,n,1),i++)}),c.rT),i}function m(t,e,r){return p(t,e,r)>=0}function v(t){return o.YO(t)?t:(0,l.A)(n()(c.Ml),t)}function g(t,e){let r=0,i=t.length-1,s=-1;for(;r<=i;){let a=(r+i)/2>>>0;const n=e(t[a]);if(0===n){s=a;break}1===n?r=a+1:(i=a-1,s=a)}return s}function y(t,e,r){const i=g(t,r);i>-1?s()(t).call(t,i,0,e):t.push(e)}function A(t,e){if(t===e)return!0;if(!t||!e)return!1;if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}},90932:(t,e,r)=>{"use strict";r.d(e,{l:()=>s}),r(64007);const i="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567";function s(t,e=!0){const r=t.length;let s=0,a=0,n="";for(let e=0;e<r;e++)for(a=a<<8|t[e],s+=8;s>=5;)n+=i[a>>>s-5&31],s-=5;if(s>0&&(n+=i[a<<5-s&31]),e)for(;n.length%8!=0;)n+="=";return n}},4919:(t,e,r)=>{"use strict";r.d(e,{E_:()=>o});var i=r(64007),s=r.n(i),a=r(72739);const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function o(t){const e="function"==typeof atob?atob(t):function(t){function e(t){const e=s()(n).call(n,t);return-1===e?0:e}let r="";for(let i=0;i<t.length;){const s=e(t[i++]),a=e(t[i++]),n=e(t[i++]),o=e(t[i++]),c=s<<2|a>>4,l=(15&a)<<4|n>>2,h=(3&n)<<6|o;r+=String.fromCharCode(c),64!==n&&(r+=String.fromCharCode(l)),64!==o&&(r+=String.fromCharCode(h))}return r}(t),r=new Uint8Array(e.length);for(let t=0;t<e.length;t++)r[t]=e.charCodeAt(t);return r}const c={};a.__(["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"],((t,e)=>{c[t]=e}))},43607:(t,e,r)=>{"use strict";function i(t){return t>0?t:-t}function s(t,e){return t>e?t:e}function a(t,e){return t>e?e:t}r.d(e,{T9:()=>s,jk:()=>a,tn:()=>i})},86834:(t,e,r)=>{"use strict";r.d(e,{A:()=>f});var i=r(36586),s=r.n(i),a=r(72739),n=r(67672),o=r(84504),c=r(44690);function l(t){return n.Yj(t)&&t.split(".").shift()||""}const h=[["alipay",/alipay/],["wechat",/micromessenger/],["dingtalk",/dingtalk[ \/]([\d_.]+)/],["baiduApp",/baiduboxapp/],["baidu",/baidubrowser/],["baidu",/bdbrowser/],["uc",/ucbrowser/],["uc",/ucweb/],["qq",/qqbrowser/],["qqApp",/qq/],["ie",/iemobile[ \/]([\d_.]+)/],["ie",/msie[ \/]([\d_.]+)/],["ie",/trident[ \/]([\d_.]+)/,4],["edge",/edge[ \/]([\d_.]+)/],["newEdge",/edg[ \/]([\d_.]+)/],["chrome",/chrome[ \/]([\d_.]+)/],["firefox",/firefox[ \/]([\d_.]+)/],["opera",/opera(?:.*version)?[ \/]([\d_.]+)/],["safari",/version[ \/]([\d_.]+) safari/],["safari",/version[ \/]([\d_.]+) \S* safari/],["safari",/safari/]],u={},d={},p=function(t){let e,r;return(0,a.__)(h,(i=>{let a=i[1].exec(t);if(a)return e=i[0],r=a[1],r&&(r=r.replace(/_/g,"."),i[2]&&(r=s()(r,10)+i[2]+".0")),!1})),"safari"!==e||r||(r=c.A.version),{name:e||"",version:r||"",majorVersion:(u[e]||l)(r),checkVersion:d[e]||o.A}}(("object"==typeof navigator&&navigator.userAgent||"").toLowerCase());p.name&&(p[p.name]=!0);const f=p},10576:(t,e,r)=>{"use strict";r.d(e,{Cq:()=>l,Cy:()=>u,M_:()=>v,Ml:()=>A,TK:()=>g,W8:()=>c,ZG:()=>f,ZH:()=>h,aV:()=>d,rT:()=>o,s0:()=>p,u1:()=>b,x7:()=>y});var i=r(72601),s=r.n(i),a=r(94474),n=r.n(a);const o=!0,c=!1,l=null,h=void 0,u=-1,d="undefined",p="function",f=".",m=typeof window!==d?window:h,v=(typeof document!==d&&document,typeof s()!==d?s():typeof r.g!==d?r.g:m),g=typeof self!==d?self:v,y=function(){},A=(n()({}),n()([])),b=""},67672:(t,e,r)=>{"use strict";r.d(e,{Ik:()=>h,Pc:()=>c,YO:()=>l,Yj:()=>u,ai:()=>d,o:()=>p,sH:()=>m,sv:()=>v,zM:()=>f});var i=r(66615),s=r.n(i),a=r(43981),n=r.n(a),o=r(10576);function c(t){return typeof t===o.s0}function l(t){return s()(t)}function h(t){return t!==o.Cq&&"object"==typeof t}function u(t){return"string"==typeof t}function d(t){return"number"==typeof t&&!isNaN(t)}function p(t){return"bigint"==typeof t}function f(t){return"boolean"==typeof t}function m(t){return d(t)||u(t)&&!isNaN(n()(t))&&isFinite(+t)}function v(t){return t instanceof ArrayBuffer}},57817:(t,e,r)=>{"use strict";r.d(e,{ZV:()=>n,ay:()=>a,wb:()=>s});var i=r(95335);const s={a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,"`":192,"+":187,"-":189,"=":61,"[":219,"]":221,"\\":220,";":59,"'":222,",":188,".":190,"/":191,$0:96,$1:97,$2:98,$3:99,$4:100,$5:101,$6:102,$7:103,$8:104,$9:105,"$.":110,"$+":107,"$-":109,"$*":106,"$/":111,space:32,tab:9},a={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,enter:13,esc:27,capslock:20,insert:45,home:36,end:35,pageup:33,pagedown:34,left:37,right:39,up:38,down:40},n={shift:16,ctrl:17,meta:91,alt:18};(0,i.BE)(s),(0,i.BE)({backspace:8,delete:46}),(0,i.BE)(a),(0,i.BE)(n)},10534:(t,e,r)=>{"use strict";r.d(e,{__:()=>a}),r(20525);var i=r(10576);const s={};function a(t,e){const r=s.hasOwnProperty(t)?s[t]:s[t]=t.split(i.ZG);for(let t=0,s=r.length-1;t<=s&&e(r[t],t===s)!==i.W8;t++);}},4624:(t,e,r)=>{"use strict";r.d(e,{R8:()=>b,V$:()=>g,Yz:()=>y,h2:()=>w,pq:()=>A,rD:()=>o,z3:()=>x});var i=r(10576),s=r(62100);const a=0,n=1,o=2,c=3,l=4,h=5,u=typeof console!==i.aV?console:i.Cq,d=/common/.test((0,s.A)(i.x7))?o:c,p=u?function(t,e){u.log(t,e)}:i.x7,f=u?function(t,e){u.warn(t,e)}:i.x7,m=u?function(t,e){u.error(t,e)}:i.x7;function v(){if(i.M_){const t=i.TK.COMMON_LOG_LEVEL;if(t>=a&&t<=h)return t}return d}function g(t){i.TK.COMMON_LOG_LEVEL=t}function y(t,e,r){v()<=n&&p(`[${arguments[1]}][line ${arguments[2]}] [debug]`,t)}function A(t,e,r){v()<=o&&p(`[${arguments[1]}][line ${arguments[2]}] [info]`,t)}function b(t,e,r){v()<=c&&f(`[${arguments[1]}][line ${arguments[2]}] [warn]`,t)}function x(t,e,r){v()<=l&&m(`[${arguments[1]}][line ${arguments[2]}] [error]`,t)}function w(t,e,r){if(v()<=h)throw x(t,e,r),new Error(`[${arguments[1]}][line ${arguments[2]}] [fatal]: ${t}`)}},95335:(t,e,r)=>{"use strict";r.d(e,{BE:()=>g,C:()=>m,HP:()=>u,X$:()=>f,__:()=>d,zy:()=>v});var i=r(50697),s=r.n(i),a=(r(129),r(18979)),n=r.n(a),o=r(67672),c=r(72739),l=r(10576),h=(r(10534),r(34677));function u(t){return(0,h.A)(t)?s()(t):[]}function d(t,e){for(let r in t)if(e(t[r],r)===l.W8)break}function p(t,e){return o.Ik(t)?o.Ik(e)?(d(e,(function(e,r){t[r]=e})),t):t:e}function f(t,e,r){return p(p(t,e),r)}function m(t,e){let r=t;return o.YO(t)?e?(r=[],c.__(t,(function(t,i){r[i]=m(t,e)}))):r=n()(t).call(t):o.Ik(t)&&(r={},d(t,(function(t,i){r[i]=e?m(t,e):t}))),r}function v(t,e){return t[e]!==l.ZH}function g(t){const e={};return d(t,((t,r)=>{e[t]=r})),e}},44690:(t,e,r)=>{"use strict";r.d(e,{A:()=>c});var i=r(64007),s=r.n(i),a=r(72739);const n=[["harmony",/harmonyos ([\d_.]+)/],["harmony",/openharmony ([\d_.]+)/],["iphone",/iphone os ([\d_.]+)/],["ipad",/ipad; cpu os ([\d_.]+)/],["itouch",/itouch; cpu os ([\d_.]+)/],["android",/android ([\d_.]+)/],["wp",/windows phone ([\d_.]+)/],["windows",/windows nt ([\d_.]+)/],["linux",/linux/],["mac",/mac os x ([\d_.]+)/]],o=function(t){let e,r;return(0,a.__)(n,(i=>{let s=i[1].exec(t);if(s)return e=i[0],r=s[1],r&&(r=r.replace(/_/g,".")),!1})),{name:e||"",version:r||"",mobile:s()(t).call(t,"mobile")>-1}}(("object"==typeof navigator&&navigator.userAgent||"").toLowerCase());o.name&&(o[o.name]=!0,{iphone:1,ipad:1,itouch:1}[o.name]&&(o.ios=!0));const c=o},20525:(t,e,r)=>{"use strict";r.d(e,{GP:()=>g,di:()=>f,qh:()=>m,zy:()=>v}),r(11265);var i=r(18979),s=r.n(i),a=r(64007),n=r.n(a),o=(r(56712),r(36586)),c=r.n(o),l=r(5496),h=r.n(l),u=r(67672),d=r(10576),p=r(62100);function f(t,e,r){return u.ai(r)?e===r?d.u1:s()(t).call(t,e,r):s()(t).call(t,e)}function m(t,e,r){return n()(t).call(t,e,r!==d.ZH?r:0)}function v(t,e){return m(t,e)>=0}function g(t,...e){let r=0;const i=e.length;return t.replace(/(%[sdvx%])|(%0(\d)+[dx])/g,(t=>{if(r>=i)return t;const s=e[r++];if(/%0(\d)+[dx]/g.test(t)){const e=c()(t.substring(1));let r="d"===t[t.length-1]?(0,p.A)(Number(s)):Number(s).toString(16);var a;return e>r.length&&(r=h()(a=new Array(e-r.length)).call(a,"0").join("")+r),r}switch(t){case"%%":return"%";case"%s":return String(s);case"%d":return(0,p.A)(Number(s));case"%v":return"";case"%x":return Number(s).toString(16)}return t}))}},95797:(t,e,r)=>{"use strict";r.d(e,{A:()=>l});var i=r(23398),s=r.n(i),a=r(54568),n=r(39638),o=r(86834),c=r(44690);const l=function(){let t="function"==typeof Blob,e="object"==typeof WebAssembly&&"function"==typeof WebAssembly.instantiate,r="function"==typeof fetch,i="object"==typeof document&&document.createElement("canvas"),l=i&&!!i.getContext("webgl"),h="function"==typeof OffscreenCanvas,u="function"==typeof Worker,d="function"==typeof ArrayBuffer,p="object"==typeof Atomics&&"Atomics"===Atomics[s()],f="function"==typeof AudioContext||"function"==typeof webkitAudioContext,m="function"==typeof AudioWorklet,v="function"==typeof VideoDecoder,g="function"==typeof VideoEncoder,y="function"==typeof AudioDecoder,A="function"==typeof AudioEncoder,b="function"==typeof SharedArrayBuffer,x="function"==typeof MediaSource||"function"==typeof ManagedMediaSource,w="function"==typeof Proxy,k=(u||(0,n.A)()||(0,a.A)())&&b&&p&&w,T="function"==typeof WebAssembly.Suspending&&"function"==typeof WebAssembly.promising;(o.A.safari&&!o.A.checkVersion(o.A.majorVersion,"11",!0)||c.A.ios&&!o.A.checkVersion(c.A.version,"11",!0))&&(e=!1),o.A.chrome&&!o.A.checkVersion(o.A.majorVersion,"94",!0)&&(v=!1,y=!1),(o.A.safari&&!o.A.checkVersion(o.A.majorVersion,"17",!0)||c.A.ios&&!o.A.checkVersion(c.A.version,"17",!0))&&(v=!1);let _="object"==typeof navigator&&"object"==typeof navigator.gpu,I="function"==typeof MediaSourceHandle,S=e&&"function"==typeof WebAssembly.Global,P="function"==typeof MediaStreamTrackGenerator;return{browser:o.A,blob:t,wasm:e,fetch:r,webgl:l,worker:u,mse:x,arrayBuffer:d,audioContext:f,audioWorklet:m,videoDecoder:v,videoEncoder:g,audioDecoder:y,audioEncoder:A,atomics:p,shareArrayBuffer:b,thread:k,webgpu:_,offscreenCanvas:h,workerMSE:I,webAssemblyGlobal:S,jspi:T,proxy:w,simd:(o.A.chrome||o.A.newEdge)&&o.A.checkVersion(o.A.majorVersion,"91",!0)||o.A.firefox&&o.A.checkVersion(o.A.majorVersion,"89",!0)||o.A.safari&&o.A.checkVersion(o.A.version,"16.4",!0)||c.A.ios&&o.A.checkVersion(c.A.version,"16.4",!0),wasmPlayerSupported:r&&e&&l&&f&&d&&S,wasmBaseSupported:e&&S&&d,trackGenerator:P}}()},50011:(t,e,r)=>{"use strict";r.r(e),r.d(e,{decode:()=>o,encode:()=>a});const i="function"==typeof TextEncoder?new TextEncoder:null,s="function"==typeof TextDecoder?new TextDecoder:null;function a(t){if(i)return i.encode(t);const e=[];for(let r=0;r<t.length;++r){let i=t.charCodeAt(r);i>=55296&&i<=57343&&(i=65536+((1023&i)<<10)|1023&t.charCodeAt(++r)),i<=127?e.push(i):i<=2047?(e.push(192|i>>6),e.push(128|63&i)):i<=65535?(e.push(224|i>>12),e.push(128|i>>6&63),e.push(128|63&i)):(e.push(240|i>>18),e.push(128|i>>12&63),e.push(128|i>>6&63),e.push(128|63&i))}return new Uint8Array(e)}function n(t){let e="";for(let r=0;r<t.length;){let i=t[r++>>>0];if(!(128&i)){e+=String.fromCharCode(i);continue}let s=63&t[r++>>>0];if(192==(224&i)){e+=String.fromCharCode((31&i)<<6|s);continue}let a=63&t[r++>>>0];if(i=224==(240&i)?(15&i)<<12|s<<6|a:(7&i)<<18|s<<12|a<<6|63&t[r++>>>0],i<65536)e+=String.fromCharCode(i);else{let t=i-65536;e+=String.fromCharCode(55296|t>>10,56320|1023&t)}}return e}function o(t){if(t instanceof Uint8Array&&s&&!("function"==typeof SharedArrayBuffer&&t.buffer instanceof SharedArrayBuffer))try{return s.decode(t)}catch(e){return n(t)}return n(t)}},8507:(t,e,r)=>{"use strict";r.d(e,{ll:()=>k,mA:()=>f,qg:()=>m});var i=r(64007),s=r.n(i),a=r(11265),n=r.n(a),o=(r(85569),r(57855)),c=r.n(o),l=r(56712),h=r.n(l),u=r(67672),d=r(6498),p=r(72739);function f(t,e="&"){const r={};if(u.Yj(t)&&s()(t).call(t,"=")>=0){let i=t.charAt(0),s="?"===i||"#"===i?1:0;s>0&&(t=t.substr(s)),p.__((0,d.A)(t,e),(t=>{let e=t.split("=");if(2===e.length){var i;let t=null===(i=e[0])||void 0===i?void 0:n()(i).call(i);t&&(r[t]=decodeURIComponent(e[1]))}}))}return r}function m(t){const e=t,r=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],i=/:\/\/([^\/@]*@?)\[(\S+)\]/;let s="";i.test(t)&&(t=t.replace(i,((t,e,r)=>(s=r,`://${e||""}a.b`))));const a={},n=/^(?:(?![^:@\/]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*)(?::([^:@\/]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(t);let o=14;for(;o--;){var c;a[r[o]]=null!==(c=n[o])&&void 0!==c?c:""}return s&&(a.host=s,a.source=e,a.authority=s+(a.port?":"+a.port:"")),{protocol:a.protocol,file:a.file,host:a.host,port:a.port,user:a.user,password:a.password,origin:`${a.protocol}://${a.authority}`,pathname:a.path,search:`?${a.query}`,hash:a.anchor?`#${a.anchor}`:""}}r(95335);const v=/(?:\/|^)\.(?=\/)/g,g=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,y=/^(?=([^\/?#]*))\1([^]*)$/,A=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/;function b(t){return t.scheme+t.netLoc+t.path+t.params+t.query+t.fragment}function x(t){const e=A.exec(t);return e?{scheme:e[1]||"",netLoc:e[2]||"",path:e[3]||"",params:e[4]||"",query:e[5]||"",fragment:e[6]||""}:null}function w(t){var e,r;for(t=c()(e=t.split("")).call(e).join("").replace(v,"");t.length!==(t=t.replace(g,"")).length;);return c()(r=t.split("")).call(r).join("")}function k(t,e,r){if(r=r||{},t=n()(t).call(t),!(e=n()(e).call(e))){if(!r.alwaysNormalize)return t;let e=x(t);if(!e)throw new Error("Error trying to parse base URL.");return e.path=w(e.path),b(e)}let i=x(e);if(!i)throw new Error("Error trying to parse relative URL.");if(i.scheme)return r.alwaysNormalize?(i.path=w(i.path),b(i)):e;let s=x(t);if(!s)throw new Error("Error trying to parse base URL.");if(!s.netLoc&&s.path&&"/"!==s.path[0]){let t=y.exec(s.path);s.netLoc=t[1],s.path=t[2]}s.netLoc&&!s.path&&(s.path="/");const a={scheme:s.scheme,netLoc:i.netLoc,path:null,params:i.params,query:i.query,fragment:i.fragment};if(!i.netLoc&&(a.netLoc=s.netLoc,"/"!==i.path[0]))if(i.path){let t=s.path,e=t.substring(0,h()(t).call(t,"/")+1)+i.path;a.path=w(e)}else a.path=s.path,i.params||(a.params=s.params,i.query||(a.query=s.query));return null===a.path&&(a.path=r.alwaysNormalize?w(i.path):i.path),b(a)}},88096:(t,e,r)=>{"use strict";r.d(e,{$z:()=>p,GW:()=>c,WP:()=>h,bx:()=>f,p2:()=>u,tt:()=>d});var i=r(729),s=r(31865),a=r(86834),n=r(44690);function o(t){let e=0,r=0;for(;;){const i=t.readUint8();if(e|=(127&i)<<r,r+=7,!(128&i))break}return e}async function c(t){let e=0,r=0;for(;;){const i=await t.readUint8();if(e|=(127&i)<<r,r+=7,!(128&i))break}return e}function l(t){let e,r=0,i=0;for(;e=t.readUint8(),r|=(127&e)<<i,i+=7,128&e;);return 64&e&&(r|=-1<<i),r}async function h(t){let e,r=0,i=0;for(;e=await t.readUint8(),r|=(127&e)<<i,i+=7,128&e;);return 64&e&&(r|=-1<<i),r}function u(t,e){let r=!0;for(;r;){let i=127&e;0==(e>>=7)&&!(64&i)||-1===e&&64&i?r=!1:i|=128,t.writeUint8(i)}}function d(t,e){do{let r=127&e;0!=(e>>=7)&&(r|=128),t.writeUint8(r)}while(0!==e)}async function p(t,e){do{let r=127&e;0!=(e>>=7)&&(r|=128),await t.writeUint8(r)}while(0!==e)}function f(t,e){const r=new s.A(t,!0),c=new i.A(new Uint8Array(t.length+100),!0);for(c.writeBuffer(r.readBuffer(8));r.remainingSize();){const t=r.readUint8();c.writeUint8(t);const s=o(r);if(2===t){const t=new i.A(new Uint8Array(s+100));let h=o(r);for(d(t,h);h--;){const i=o(r);d(t,i),t.writeBuffer(r.readBuffer(i));const s=o(r);d(t,s),t.writeBuffer(r.readBuffer(s));const c=r.readUint8();switch(t.writeUint8(c),c){case 0:d(t,o(r));break;case 3:u(t,l(r)),d(t,o(r));break;case 2:{let i=o(r);e.shared?d(t,2|i):d(t,-3&i);const s=o(r);if(d(t,e.initial||s),1&i){let i=o(r);!e.maximum||n.A.ios&&!a.A.checkVersion(n.A.version,"17",!0)&&e.shared||(i=e.maximum),d(t,i)}break}case 1:{u(t,l(r));const e=o(r);d(t,e),d(t,o(r)),1&e&&d(t,o(r));break}}}const p=t.getWroteBuffer();d(c,p.length),c.writeBuffer(p)}else d(c,s),c.writeBuffer(r.readBuffer(s))}return c.getWroteBuffer()}},72631:(t,e,r)=>{"use strict";r.d(e,{default:()=>H});var i=r(49859),s=r(56255),a=r.n(s),n=r(96319),o=r.n(n),c=r(63939),l=r(61634),h=r(47451),u=r.n(h),d=r(95335),p=r(28090),f=r(67672),m=r(72739),v=r(8507),g=r(44690),y=r(23601),A=r(76793),b=r(92053),x=r(37463),w=r(13203),k=r(30019),T=r(7233),_=r(64147),I=r(40777),S=r(59715),P=r(86213),M=r(91011),C=r(14667),R=r(45553),E=r(30499),D=r(65893),B=r(53891),L=r(44341),U=r(83327),F=r.n(U),$=r(35308),O=r.n($),N=r(6204),z=r(78995),V=r(93108),G=r(72913),W=r(64804);const j={name:"AVPlayer",template:F(),propTypes:{player:{type:"object",required:!0},indicatorUrl:{type:"string"},pauseStateUrl:{type:"string"},errorStateUrl:{type:"string"},fullscreenDom:{type:"object"},hasFolder:{type:"boolean",value:!0},hasHeader:{type:"boolean",value:!0},hasFooter:{type:"boolean",value:!0},folderFolded:{type:"boolean",value:!1}},data:function(){const t=(0,N.A)(),e=[{name:t.MENU_STATS,action:0}];return{style:O(),title:"",error:"",showBar:!0,played:!1,folded:this.get("folderFolded"),loading:!1,language:t,streams:[],videoList:[],audioList:[],subtitleList:[],isLive:!1,menu:e,showMenu:!1,menuTop:0,menuLeft:0,showInfo:!1,showSettings:!1}},events:{error:function(t,e){console.log("error",e.message),this.set("error",e.message)},closeInfo:function(){this.set("showInfo",!1)},openSettings:function(){this.set("showSettings",!0)},closeSettings:function(){this.set("showSettings",!1)},folderLoaded:function(){this.get("player").fire(G.J)}},watchers:{played:function(t){t&&(this.showBarTimer&&clearTimeout(this.showBarTimer),this.get("folded")&&(this.showBarTimer=a()((()=>{this.set("showBar",!1),this.showBarTimer=null}),5e3)))},folded:function(t){t&&(this.showBarTimer&&clearTimeout(this.showBarTimer),this.showBarTimer=a()((()=>{this.set("showBar",!1),this.showBarTimer=null}),5e3))}},computed:{hasVideoTrack:function(){var t;const e=this.get("streams"),r=this.get("videoList");return o()(t=o()(e).call(e,(t=>0===c.f[15](t.codecpar)))).call(t,(t=>m.zy(l.KU,c.f[15](t.codecpar+4)))).length>1||r.length>1},hasAudioTrack:function(){var t;const e=this.get("streams"),r=this.get("audioList");return o()(t=o()(e).call(e,(t=>1===c.f[15](t.codecpar)))).call(t,(t=>m.zy(l.KU,c.f[15](t.codecpar+4)))).length>1||r.length>1},hasSubtitleTrack:function(){var t;const e=this.get("streams"),r=this.get("subtitleList");return!this.get("isLive")&&o()(t=o()(e).call(e,(t=>0===c.f[15](t.codecpar)))).call(t,(t=>m.zy(l.KU,c.f[15](t.codecpar+4)))).length>0||r.length>1},hasPip:function(){var t;const e=this.get("streams");return o()(t=o()(e).call(e,(t=>0===c.f[15](t.codecpar)))).call(t,(t=>m.zy(l.KU,c.f[15](t.codecpar+4)))).length>0},hasPcmVisualization:function(){var t,e,r;const i=this.get("streams");return o()(t=o()(i).call(i,(t=>1===c.f[15](t.codecpar)))).call(t,(t=>m.zy(l.KU,c.f[15](t.codecpar+4)))).length>0&&0===o()(e=o()(r=o()(i).call(i,(t=>0===c.f[15](t.codecpar)))).call(r,(t=>m.zy(l.KU,c.f[15](t.codecpar+4))))).call(e,(t=>!(1024&t.disposition))).length}},methods:{init(t){const e=t.getSource();f.Yj(e)?this.set("title",v.qg(decodeURI(e)).file):this.set("title",e.name),this.set("streams",t.getStreams()),this.set("isLive",t.isLive()),this.set("played",6===t.getStatus()),t.getVideoList().then((t=>{this.set("videoList",t.list)})),t.getAudioList().then((t=>{this.set("audioList",t.list)})),t.getSubtitleList().then((t=>{this.set("subtitleList",t.list)}))},mousemove(){a()((()=>{this.set("showBar",!0),this.showBarTimer&&clearTimeout(this.showBarTimer),this.get("played")&&this.get("folded")&&(this.showBarTimer=a()((()=>{this.set("showBar",!1),this.showBarTimer=null}),5e3))}))},playClick(t){const e=this.get("player");e.isSuspended()&&(e.resume(),6===e.getStatus())||g.A.ios||g.A.android||g.A.harmony&&g.A.mobile||this.$refs.play&&(!this.get("showMenu")&&this.get("showBar")||!t)&&this.$refs.play.playClick()},toggleFold(){this.set("folded",!this.get("folded"))},fold(){this.set("folded",!0)},unfold(){this.set("folded",!1)},toggleFolder(){this.set("folded",!this.get("folded"))},menuAction(t){0===t&&this.set("showInfo",!0),this.set("showMenu",!1)},menuOutside(){this.set("showMenu",!1)},addUrl(t,e,r){this.$refs.folder&&this.$refs.folder.openUrl(t,e,r)}},afterMount(){this.namespace=".avplayer"+Math.random();const t=this.get("player"),e=this.$el.querySelectorAll(".avplayer-ui-player")[0];t.options.container=e,t.on(p.F5+this.namespace,(()=>{this.set("loading",!0),this.set("error","")})),t.on(p.S2+this.namespace,(()=>{this.init(t)})),t.on(p.CN+this.namespace,(()=>{this.set("loading",!1),this.set("played",!0)})),t.on(p.NN+this.namespace,(()=>{this.set("played",!1)})),t.on(p.yd+this.namespace,(()=>{this.set("title",""),this.set("streams",[]),this.set("played",!1)})),t.getStatus()>=4&&this.init(t),this.onresize=(0,z.A)((()=>{t.resize(e.offsetWidth,e.offsetHeight)}),500),window.addEventListener("resize",this.onresize),this.oncontextmenu=t=>{this.$refs.playerContainer.contains(t.target)&&(this.set("showMenu",!0),this.set("menuTop",t.clientY),this.set("menuLeft",t.clientX),t.preventDefault())},window.addEventListener("contextmenu",this.oncontextmenu)},beforeDestroy(){const t=this.get("player");this.namespace&&t.off(this.namespace),window.removeEventListener("resize",this.onresize),window.removeEventListener("contextmenu",this.oncontextmenu)},components:{Progress:y.A,Play:A.A,Volume:b.A,Timer:x.A,Setting:w.A,Fullscreen:k.A,Playrate:T.A,AudioTrack:_.A,VideoTrack:I.A,SubtitleTrack:S.A,Loop:P.A,Pip:M.A,Folder:C.A,Loading:R.A,PcmVisualization:E.A,LoadingTip:D.A,Info:B.A,Settings:L.A}};class H extends l.Ay{constructor(t){var e,r,s,a;super(d.X$({},t,{container:null})),(0,i.A)(this,"ui",void 0),(0,i.A)(this,"keyboard",void 0),u().dom.addSpecialEvent("outside",W.A),this.ui=new(u())(d.X$({el:t.container,replace:!1,props:{player:this,indicatorUrl:t.indicatorUrl,pauseStateUrl:t.pauseStateUrl,errorStateUrl:t.errorStateUrl,fullscreenDom:t.fullscreenDom,hasFolder:null===(e=t.ui)||void 0===e?void 0:e.hasFolder,hasHeader:null===(r=t.ui)||void 0===r?void 0:r.hasHeader,hasFooter:null===(s=t.ui)||void 0===s?void 0:s.hasFooter,folderFolded:null===(a=t.ui)||void 0===a?void 0:a.folderFolded}},j)),this.keyboard=new V.A(this)}foldFolder(){this.ui.fold()}unfoldFolder(){this.ui.unfold()}toggleFolder(){this.ui.toggleFolder()}addUrl(t,e,r){this.ui.addUrl(t,e,r)}async destroy(){await super.destroy(),this.keyboard.destroy(),this.ui.destroy()}}},93108:(t,e,r)=>{"use strict";r.d(e,{A:()=>g});var i=r(49859),s=r(74707),a=r.n(s),n=r(96984),o=r.n(n),c=r(56255),l=r.n(c),h=r(57817),u=r(95335),d=r(72739),p=r(65196),f=r(43607),m=r(67672);const v={16:[{keyCode:h.wb["+"],with:[h.ZV.ctrl],action:"up",playerStatus:[6,8]},{keyCode:h.wb["+"],with:[h.ZV.ctrl,h.ZV.shift],action:"up",playerStatus:[6,8]}],17:[{keyCode:h.wb["-"],with:[h.ZV.ctrl],action:"up",playerStatus:[6,8]},{keyCode:h.wb["-"],with:[h.ZV.ctrl,h.ZV.shift],action:"up",playerStatus:[6,8]}],1:{keyCode:h.wb.space,with:[],action:"up",playerStatus:[6,8]},3:{keyCode:h.ay.right,with:[],action:"up",playerStatus:[6]},2:{keyCode:h.ay.left,with:[],action:"up",playerStatus:[6,8]},4:{keyCode:h.ay.right,with:[],action:"longDown",playerStatus:[6]},5:{keyCode:h.ay.right,with:[],action:"up",playerStatus:[6],longDownBefore:!0},6:{keyCode:h.wb.n,with:[h.ZV.ctrl],action:"up"},7:{keyCode:h.wb.p,with:[h.ZV.ctrl],action:"up"},8:{keyCode:h.ay.right,with:[],action:"up",playerStatus:[8]},9:{keyCode:h.wb.p,with:[h.ZV.ctrl,h.ZV.shift],action:"up",playerStatus:[8,6]},10:{keyCode:h.wb.s,with:[h.ZV.ctrl],action:"up",playerStatus:[8,6]},12:{keyCode:h.ay.down,with:[],action:"up"},11:{keyCode:h.ay.up,with:[],action:"up"},13:{keyCode:h.ay.esc,with:[],action:"up"},14:{keyCode:h.wb.f,with:[h.ZV.ctrl],action:"up"},15:{keyCode:h.wb.u,with:[h.ZV.ctrl],action:"up"}};class g{constructor(t){(0,i.A)(this,"onKeyDown_",void 0),(0,i.A)(this,"onKeyUp_",void 0),(0,i.A)(this,"player",void 0),(0,i.A)(this,"seekQueue",void 0),(0,i.A)(this,"lastPlayrate",void 0),(0,i.A)(this,"longDownTimer",void 0),(0,i.A)(this,"longDownRunning",void 0),this.player=t,this.longDownTimer=new(a()),this.longDownRunning=new(a()),this.seekQueue=new p.A,this.onKeyDown_=t=>{this.onKeyDown(t)},this.onKeyUp_=t=>{this.onKeyUp(t)},document.addEventListener("keydown",this.onKeyDown_),document.addEventListener("keyup",this.onKeyUp_)}actionPlayOrPause(){8===this.player.getStatus()?this.player.play():this.player.pause()}actionSeekForward(){this.seekQueue.clearPadding(),this.seekQueue.push((async()=>this.player.seek(f.jk(this.player.currentTime+BigInt(1e4),this.player.getDuration()-BigInt(1e4)))))}actionSeekBack(){this.seekQueue.clearPadding(),this.seekQueue.push((async()=>this.player.seek(f.T9(this.player.currentTime-BigInt(1e4),BigInt(0)))))}actionUpperPlayrate(){this.lastPlayrate=this.player.getPlaybackRate(),this.player.setPlaybackRate(2)}actionStopUpperPlayrate(){this.player.setPlaybackRate(this.lastPlayrate)}actionNextFile(){}actionPrevFile(){}actionNextFrame(){this.player.playNextFrame()}actionSnapshot(){if(!this.player.hasVideo())return;const t=this.player.snapshot("png"),e=atob(t.replace(/^data:image\/(png|jpeg|jpg);base64,/,"")),r=t.split(",")[0].split(":")[1].split(";")[0],i=new ArrayBuffer(e.length),s=new Uint8Array(i);for(let t=0;t<e.length;t++)s[t]=e.charCodeAt(t);const a=new Blob([i],{type:r}),n=document.createElement("a");let c=this.player.getSource(),l="";l=m.Yj(c)?c:c.name;const h=l.split(".");h.pop(),n.download=h.join(".")+".png",n.href=o().createObjectURL(a),n.click()}actionStop(){this.player.stop()}actionVolumeUp(){this.player.setVolume(Math.min(this.player.getVolume()+.1,1))}actionVolumeDown(){this.player.setVolume(Math.max(this.player.getVolume()-.1,0))}actionExitFullscreen(){this.player.exitFullscreen()}actionFoldFolder(){this.player.toggleFolder()}actionUnFoldFolder(){this.player.unfoldFolder()}actionSubtitleDelayAdd(){this.player.setSubtitleDelay(Math.min(5e3,this.player.getSubtitleDelay()+100))}actionSubtitleDelaySub(){this.player.setSubtitleDelay(Math.max(-5e3,this.player.getSubtitleDelay()-100))}runAction(t){switch(t){case 1:this.actionPlayOrPause();break;case 8:this.actionNextFrame();break;case 13:this.actionExitFullscreen();break;case 6:this.actionNextFile();break;case 7:this.actionPrevFile();break;case 2:this.actionSeekBack();break;case 3:this.actionSeekForward();break;case 9:this.actionSnapshot();break;case 10:this.actionStop();break;case 14:this.actionFoldFolder();break;case 15:this.actionUnFoldFolder();break;case 4:this.actionUpperPlayrate();break;case 5:this.actionStopUpperPlayrate();break;case 12:this.actionVolumeDown();break;case 11:this.actionVolumeUp();break;case 16:this.actionSubtitleDelayAdd();break;case 17:this.actionSubtitleDelaySub()}}longDownAction(t,e){this.longDownTimer.has(e.keyCode)||this.longDownTimer.set(e.keyCode,l()((()=>{this.longDownTimer.delete(e.keyCode),this.runAction(t),this.longDownRunning.set(e.keyCode,t)}),1e3))}getActionKeys(t,e,r=!1){let i,s;if(u.__(v,((a,n)=>{const o=a=>{if(a.keyCode===t.keyCode&&e===a.action&&(!a.playerStatus||d.zy(a.playerStatus,this.player.getStatus()))&&(!r||a.longDownBefore)){const e=[];if(t.shiftKey&&e.push(h.ZV.shift),t.ctrlKey&&e.push(h.ZV.ctrl),t.metaKey&&e.push(h.ZV.meta),t.altKey&&e.push(h.ZV.alt),e.length===a.with.length){let t=!0;for(let r=0;r<e.length;r++)if(!d.zy(a.with,e[r])){t=!1;break}if(t)return i=+n,s=a,!0}}};if(!m.YO(a))return!o(a);{let t=!1;if(d.__(a,(e=>{if(o(e))return t=!0,!1})),t)return!1}})),s)return{key:i,action:s}}onKeyDown(t){let e=this.getActionKeys(t,"down");e?this.runAction(e.key):(e=this.getActionKeys(t,"longDown"),e&&!this.longDownRunning.has(e.action.keyCode)&&this.longDownAction(e.key,e.action))}onKeyUp(t){this.longDownTimer.has(t.keyCode)&&(clearTimeout(this.longDownTimer.get(t.keyCode)),this.longDownTimer.delete(t.keyCode));let e=this.getActionKeys(t,"up",this.longDownRunning.has(t.keyCode));e&&(e.action.longDownBefore&&!this.longDownRunning.has(t.keyCode)||this.runAction(e.key)),this.longDownRunning.delete(t.keyCode)}destroy(){document.removeEventListener("keydown",this.onKeyDown_),document.removeEventListener("keyup",this.onKeyUp_)}}},64147:(t,e,r)=>{"use strict";r.d(e,{A:()=>p});var i=r(48079),s=r.n(i),a=r(96319),n=r.n(a),o=r(63939),c=r(28090),l=r(82723),h=r.n(l),u=r(41192),d=r.n(u);const p={name:"AudioTrack",template:h(),propTypes:{player:{type:"object",required:!0},language:{type:"object",required:!0}},data:function(){return{streams:[],audioInfo:null,selectIndex:0,style:d()}},computed:{list:function(){const t=this.get("player"),e=this.get("streams"),r=this.get("audioInfo");return r?r.list.length?s()(i=r.list).call(i,((t,e)=>{let r="";return t.bandwidth&&(r=t.bandwidth>1e3?`${Math.round(t.bandwidth/1e3)} kbps`:`${t.bandwidth} bps`),t.codec&&(r+=r?` (${t.codec})`:t.codec),t.lang&&(r+=r?` ${t.lang}`:t.lang),{value:e,name:r,codec:t.codec}})):[]:s()(e).call(e,((e,r)=>(e.id===t.getSelectedAudioStreamId()&&this.set("selectIndex",r),{value:e.id,name:e.metadata.title||e.metadata.languageString||e.metadata.language||e.metadata.name||"default"})));var i}},methods:{change:function(t){this.get("selectIndex")!==t&&this.get("player").selectAudio(this.get("list")[t].value).then((()=>{this.set("selectIndex",t)}))},init:function(t){var e;t.isDash()||t.isHls()?t.getAudioList().then((t=>{this.set("audioInfo",t),this.set("selectIndex",t.selectedIndex)})):this.set("streams",n()(e=t.getStreams()).call(e,(t=>1===o.f[15](t.codecpar))))}},afterMount(){this.namespace=".component_control_audio_track"+Math.random();const t=this.get("player");t.on(c.S2+this.namespace,(()=>{this.init(t)})),t.on(c.xv+this.namespace,(()=>{this.init(t)})),t.getStatus()>=4&&this.init(t)},beforeDestroy(){const t=this.get("player");this.namespace&&t.off(this.namespace)}}},30019:(t,e,r)=>{"use strict";r.d(e,{A:()=>o});var i=r(22179),s=r.n(i),a=r(56872),n=r.n(a);const o={name:"Fullscreen",template:s(),propTypes:{player:{type:"object",required:!0},language:{type:"object",required:!0},dom:{type:"object"}},data:function(){return{style:n(),fullscreen:!1}},methods:{init(t){},fullscreenClick(){const t=this.get("player");if(this.get("fullscreen"))document.exitFullscreen?document.exitFullscreen():document.mozExitFullScreen?document.mozExitFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen();else{const e=this.get("dom")||t.getOptions().container.parentElement;e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()}}},afterMount(){this.namespace=".component_control_fullscreen"+Math.random();const t=this.get("player");this.onfullscreenchange=()=>{if(null==document.fullscreenElement){const e=t.getOptions().container;t.resize(e.offsetWidth,e.offsetHeight),this.set("fullscreen",!1)}else t.resize(screen.width,screen.height),this.set("fullscreen",!0)},document.addEventListener("fullscreenchange",this.onfullscreenchange)},beforeDestroy(){const t=this.get("player");this.namespace&&t.off(this.namespace),document.removeEventListener("fullscreenchange",this.onfullscreenchange)}}},86213:(t,e,r)=>{"use strict";r.d(e,{A:()=>c});var i=r(11302),s=r(82237),a=r.n(s),n=r(68738),o=r.n(n);const c={name:"Loop",template:a(),propTypes:{player:{type:"object",required:!0},language:{type:"object",required:!0}},data:function(){return{style:o(),loop:!!+i.Jt(i.vd,0)}},watchers:{loop:function(t){this.get("player").setLoop(t),i.hZ(i.vd,t?1:0)}},methods:{init(t){},change(){this.set("loop",!this.get("loop"))}},afterMount(){this.namespace=".component_control_loop"+Math.random(),this.get("player").setLoop(this.get("loop"))},beforeDestroy(){const t=this.get("player");this.namespace&&t.off(this.namespace)}}},91011:(t,e,r)=>{"use strict";r.d(e,{A:()=>u});var i=r(86226),s=r.n(i),a=r(48079),n=r.n(a),o=r(16979),c=r.n(o),l=r(38712),h=r.n(l);const u={name:"Pip",template:c(),propTypes:{player:{type:"object",required:!0},language:{type:"object",required:!0}},data:function(){return{style:h(),pip:!1}},methods:{init(t){},async pipClick(){const t=this.get("player");var e;if(this.get("pip"))if(this.set("pip",!1),t.isMSE())document.exitPictureInPicture();else{const e=this.pipWindow.document.body.children[0];e&&(this.playerContainer.prepend(e),t.resize(e.offsetWidth,e.offsetHeight)),this.pipWindow.close()}else t.isMSE()?t.video.requestPictureInPicture():(this.playerContainer=t.getOptions().container.parentElement,this.pipWindow=await documentPictureInPicture.requestWindow({disallowReturnToOpener:!0,width:320,height:180}),this.pipWindow.addEventListener("pagehide",(e=>{if(this.get("pip")){const r=e.target.body.children[0];r&&(this.playerContainer.prepend(r),t.resize(r.offsetWidth,r.offsetHeight)),this.set("pip",!1)}})),this.pipWindow.addEventListener("resize",(e=>{if(this.pipWindow.document){const e=this.pipWindow.document.children[0];t.resize(e.offsetWidth,e.offsetHeight)}})),s()(e=[...document.styleSheets]).call(e,(t=>{try{var e;const r=n()(e=[...t.cssRules]).call(e,(t=>t.cssText)).join(""),i=document.createElement("style");i.textContent=r,this.pipWindow.document.head.appendChild(i)}catch(e){const r=document.createElement("link");r.rel="stylesheet",r.type=t.type,r.media=t.media,r.href=t.href,this.pipWindow.document.head.appendChild(r)}})),this.pipWindow.document.body.append(t.getOptions().container))}},afterMount(){this.namespace=".component_control_pip"+Math.random(),this.onenter=t=>{this.pipWindow=t.window,this.set("pip",!0)},"object"==typeof documentPictureInPicture&&documentPictureInPicture.addEventListener("enter",this.onenter)},beforeDestroy(){const t=this.get("player");"object"==typeof documentPictureInPicture&&documentPictureInPicture.removeEventListener("enter",this.onenter),this.namespace&&t.off(this.namespace)}}},76793:(t,e,r)=>{"use strict";r.d(e,{A:()=>o});var i=r(1449),s=r.n(i),a=r(90902),n=r.n(a);const o={name:"Play",template:s(),propTypes:{player:{type:"object",required:!0},language:{type:"object",required:!0},played:{type:"boolean",required:!0}},data:function(){return{style:n()}},methods:{playClick(){const t=this.get("player");if(t.getSource()){if(this.get("played")){if(t.isLive())return;t.pause()}else 0===t.getStatus()?t.load(t.getSource(),{externalSubtitles:t.getExternalSubtitle()}).then((()=>{t.play()})):t.play();this.set("played",!this.get("played"))}}}}},7233:(t,e,r)=>{"use strict";r.d(e,{A:()=>l});var i=r(72739),s=r(11302),a=r(8809),n=r.n(a),o=r(33814),c=r.n(o);const l={name:"Playrate",template:n(),propTypes:{player:{type:"object",required:!0},language:{type:"object",required:!0}},data:function(){const t=[2,1.5,1.25,1,.75,.5];let e=i.qh(t,+s.Jt(s.Yt,1));return e<0&&(e=3),{list:t,index:e,style:c()}},watchers:{index:function(t){s.hZ(s.Yt,this.get("list")[t]),this.get("player").setPlaybackRate(this.get("list")[t])}},methods:{change:function(t){this.set("index",t)}},afterMount(){this.namespace=".component_control_play_rate"+Math.random(),this.get("player").setPlaybackRate(this.get("list")[this.get("index")])},beforeDestroy(){const t=this.get("player");this.namespace&&t.off(this.namespace)}}},13203:(t,e,r)=>{"use strict";r.d(e,{A:()=>o});var i=r(78675),s=r.n(i),a=r(97176),n=r.n(a);const o={name:"Setting",template:s(),propTypes:{player:{type:"object",required:!0},language:{type:"object",required:!0}},data:function(){return{style:n()}},methods:{init(t){},click(){this.fire("openSettings")}},afterMount(){this.namespace=".component_control_setting"+Math.random(),this.get("player")},beforeDestroy(){const t=this.get("player");this.namespace&&t.off(this.namespace)}}},59715:(t,e,r)=>{"use strict";r.d(e,{A:()=>f});var i=r(48079),s=r.n(i),a=r(96319),n=r.n(a),o=r(63939),c=r(28090),l=r(95683),h=r.n(l),u=r(66328),d=r.n(u),p=r(9391);const f={name:"SubtitleTrack",template:h(),propTypes:{player:{type:"object",required:!0},language:{type:"object",required:!0}},data:function(){return{streams:[],subtitleInfo:null,selectIndex:0,style:d(),accept:s()(p._Y).call(p._Y,(t=>"."+t)).join(", "),canUseFilePicker:"function"==typeof showOpenFilePicker}},computed:{list:function(){const t=this.get("player"),e=this.get("streams"),r=this.get("subtitleInfo");return r?r.list.length?s()(i=r.list).call(i,((t,e)=>{let r="";return t.lang&&(r=t.lang),t.codec&&(r+=r?` ${t.codec}`:t.codec),{value:e,name:r,codec:t.codec}})):[]:s()(e).call(e,((e,r)=>(e.id===t.getSelectedSubtitleStreamId()&&this.set("selectIndex",r),{value:e.id,name:e.metadata.title||e.metadata.languageString||e.metadata.language||e.metadata.name||"default"})));var i}},methods:{change:function(t){this.get("selectIndex")!==t&&this.get("player").selectSubtitle(this.get("list")[t].value).then((()=>{this.set("selectIndex",t)}))},openFile(){const t={startIn:"videos",types:[{description:"Subtitles",accept:{"application/octet-stream":s()(p._Y).call(p._Y,(t=>"."+t))}}],excludeAcceptAllOption:!0,multiple:!0},e=this.get("player");showOpenFilePicker(t).then((async t=>{for(let r=0;r<t.length;r++){const i=await t[r].getFile(),s=i.name.split(".");s.pop(),e.loadExternalSubtitle({title:s.join("."),source:i})}}))},fileChange(t){const e=t.originalEvent.target.files[0],r=this.get("player"),i=e.name.split(".");i.pop(),r.loadExternalSubtitle({title:i.join("."),source:e})},init:function(t){var e;t.isDash()||t.isHls()?t.getSubtitleList().then((t=>{this.set("subtitleInfo",t),this.set("selectIndex",t.selectedIndex)})):this.set("streams",n()(e=t.getStreams()).call(e,(t=>3===o.f[15](t.codecpar))))}},afterMount(){this.namespace=".component_control_subtitle_track"+Math.random();const t=this.get("player");t.on(c.S2+this.namespace,(()=>{this.init(t)})),t.on(c.xv+this.namespace,(()=>{this.init(t)})),t.getStatus()>=4&&this.init(t)},beforeDestroy(){const t=this.get("player");this.namespace&&t.off(this.namespace)}}},37463:(t,e,r)=>{"use strict";r.d(e,{A:()=>l});var i=r(28090),s=r(20525),a=r(9127),n=r.n(a),o=r(52068),c=r.n(o);const l={name:"Time",template:n(),propTypes:{player:{type:"object",required:!0},language:{type:"object",required:!0}},data:function(){return{totalTime:BigInt(0),currentTime:BigInt(0),style:c()}},filters:{formatTime(t){t<0&&(t=BigInt(0));const e=Number(BigInt.asIntN(32,t/BigInt(1e3)%BigInt(60))),r=Number(BigInt.asIntN(32,t/BigInt(1e3)/BigInt(60)%BigInt(60))),i=Number(BigInt.asIntN(32,t/BigInt(1e3)/BigInt(3600)));return s.GP("%02d:%02d:%02d",i,r,e)}},methods:{init(t){this.set("currentTime",t.currentTime),this.set("totalTime",t.getDuration())}},afterMount(){this.namespace=".component_control_timer"+Math.random();const t=this.get("player");t.on(i.S2+this.namespace,(()=>{this.init(t)})),t.on(i.E9+this.namespace,(t=>{this.set("currentTime",t)})),t.getStatus()>=4&&this.init(t)},beforeDestroy(){const t=this.get("player");this.namespace&&t.off(this.namespace)}}},40777:(t,e,r)=>{"use strict";r.d(e,{A:()=>p});var i=r(96319),s=r.n(i),a=r(48079),n=r.n(a),o=r(63939),c=r(28090),l=r(43145),h=r.n(l),u=r(15478),d=r.n(u);const p={name:"VideoTrack",template:h(),propTypes:{player:{type:"object",required:!0},language:{type:"object",required:!0}},data:function(){return{streams:[],videoInfo:null,selectIndex:0,style:d()}},computed:{list:function(){const t=this.get("player"),e=this.get("streams"),r=this.get("videoInfo");if(!r)return n()(e).call(e,((e,r)=>(e.id===t.getSelectedVideoStreamId()&&this.set("selectIndex",r),{value:e.id,name:e.metadata.title||e.metadata.languageString||e.metadata.language||e.metadata.name||"default"})));if(r.list.length){var i,a;const t=r.list[r.selectedIndex].codec;return s()(i=n()(a=r.list).call(a,((t,e)=>{let r="";t.bandwidth&&(r=t.bandwidth>1e3?`${Math.round(t.bandwidth/1e3)} kbps`:`${t.bandwidth} bps`);let i=`${t.width}x${t.height}`;return t.frameRate&&(i+=`@${t.frameRate}`),r&&(i=` (${i})`),r+=i,t.codec&&(r+=` (${t.codec})`),{value:e,name:r,codec:t.codec}}))).call(i,(e=>e.codec.split(".")[0]===t.split(".")[0]))}return[]}},methods:{change:function(t){this.get("selectIndex")!==t&&this.get("player").selectVideo(this.get("list")[t].value).then((()=>{this.set("selectIndex",t)}))},init:function(t){var e;t.isDash()||t.isHls()?t.getVideoList().then((t=>{this.set("videoInfo",t),this.set("selectIndex",t.selectedIndex)})):this.set("streams",s()(e=t.getStreams()).call(e,(t=>0===o.f[15](t.codecpar))))}},afterMount(){this.namespace=".component_control_video_track"+Math.random();const t=this.get("player");t.on(c.S2+this.namespace,(()=>{this.init(t)})),t.on(c.xv+this.namespace,(()=>{this.init(t)})),t.getStatus()>=4&&this.init(t)},beforeDestroy(){const t=this.get("player");this.namespace&&t.off(this.namespace)}}},92053:(t,e,r)=>{"use strict";r.d(e,{A:()=>h});var i=r(11302),s=r(53924),a=r(28090),n=r(93069),o=r.n(n),c=r(92066),l=r.n(c);const h={name:"Volume",template:o(),propTypes:{player:{type:"object",required:!0},language:{type:"object",required:!0}},data:function(){return{lastVolume:50,volume:+i.Jt(i.xc,50),style:l()}},watchers:{volume:function(t){const e=this.get("player");e.setVolume(t/100),e.isSuspended()&&0===t||i.hZ(i.xc,t)}},methods:{volumeClick(){if(this.get("volume"))this.set("lastVolume",this.get("volume")),this.set("volume",0);else{this.set("volume",this.get("lastVolume"));const t=this.get("player");t.isSuspended()&&t.resume()}}},afterMount(){this.namespace=".component_control_volume"+Math.random();const t=this.get("player");t.on(a.Wu+this.namespace,(t=>{this.set("volume",Math.floor(100*t))})),t.on(a.CN+this.namespace,(()=>{t.isSuspended()&&this.get("volume")&&this.volumeClick()})),t.on(a.dQ+this.namespace,(()=>{this.get("volume")||this.volumeClick()})),t.setVolume(this.get("volume")/100)},beforeDestroy(){const t=this.get("player");this.namespace&&t.off(this.namespace)},components:{Slider:s.A}}},14667:(t,e,r)=>{"use strict";r.d(e,{A:()=>k});var i=r(48079),s=r.n(i),a=r(11393),n=r.n(a),o=r(6707),c=r.n(o),l=r(86226),h=r.n(l),u=r(28090),d=r(94907),p=r.n(d),f=r(74320),m=r.n(f),v=r(9391),g=r(72739),y=r(66521),A=r(8284),b=r(4624),x=r(8507),w=r(67672);const k={name:"Folder",template:p(),propTypes:{player:{type:"object",required:!0},language:{type:"object",required:!0}},data:function(){var t;return{style:m(),canOpenFolder:"function"==typeof showDirectoryPicker,canUseFilePicker:"function"==typeof showOpenFilePicker,tip:"",tipTop:0,tipShow:!1,root:[],accept:s()(t=n()(v.z_).call(v.z_,v.KQ)).call(t,(t=>"."+t)).join(", "),nextPlayNodeId:""}},methods:{init(t){},findRootNodeBySource(t,e){const r=this.get("root");for(let i=0;i<r.length;i++)if(r[i].source===t&&r[i].isLive===e)return r[i];return null},async addDir(t){let e=0;const r=[];async function i(t){const i=await t.getFile(),s=i.name.split(".").pop();if(g.zy(v.KQ,s)||g.zy(v.z_,s)){const s={id:(0,A.A)(),type:"file",name:i.name,depth:e,source:i,handle:t,played:!1,parent:r.length?r[r.length-1]:null};r[r.length-1].children.push(s)}}await async function t(s){const a={id:(0,A.A)(),type:"folder",name:s.name,depth:e,children:[],opened:!1,handle:s,played:!1,parent:r.length?r[r.length-1]:null};r.length&&r[r.length-1].children.push(a),r.push(a),e++;for await(const a of c()(s).call(s))"file"===a.kind?await i(a):"directory"===a.kind&&(await t(a),r.pop(),e--)}(t),this.append("root",r.pop())},async addFile(t,e){this.findRootNodeBySource(t,!1)||this.append("root",{id:(0,A.A)(),type:"file",name:t.name,depth:0,source:t,handle:e})},addUrl(t,e,r){const i=this.findRootNodeBySource(t,e);if(i)return void(r&&(i.ref?i.ref.fire("play",i.ref):this.set("nextPlayNodeId",i.id)));const s=(0,A.A)(),a=x.qg(t);this.append("root",{id:s,type:"file",name:a.file||t,depth:0,source:t,isLive:e}),r&&this.set("nextPlayNodeId",s)},async addFileHandle(t){const e=await t.getFile();await this.addFile(e,t)},openDir(){showDirectoryPicker({mode:"read",startIn:"videos"}).then((async t=>{this.addDir(t),this.root.push(t),y.M_(y.qd,this.root)}))},openFile(){var t;const e={startIn:"videos",types:[{description:"Audios & Videos",accept:{"application/octet-stream":n()(t=s()(v.z_).call(v.z_,(t=>"."+t))).call(t,s()(v.KQ).call(v.KQ,(t=>"."+t)))}}],excludeAcceptAllOption:!0,multiple:!0};showOpenFilePicker(e).then((async t=>{for(let e=0;e<t.length;e++)this.addFileHandle(t[e]),this.root.push(t[e]);y.M_(y.qd,this.root)}))},generateStoreUrl:(t,e)=>`${e?"libmediaLive:":""}${t}`,openUrl(t,e,r){t&&w.Yj(t)||(t=this.$refs.url.value),t&&(null==e&&(e=this.$refs.live.checked),this.addUrl(t,e,r),this.root.push(this.generateStoreUrl(t,e)),y.M_(y.qd,this.root),this.$refs.url.value="",this.$refs.live.checked=!1)},fileChange(t){const e=t.originalEvent.target.files[0];this.addFile(e)},findNodeById(t,e){for(let r=0;r<e.length;r++){if(e[r].id===t)return e[r];if("folder"===e[r].type){let i=this.findNodeById(t,e[r].children);if(i)return i}}},async findSubtitle(t){const e=t.parent,r=t.handle,i=[];if(e){let t=(await r.getFile()).name.split(".");t.pop();let a=t.join(".");for await(const t of c()(s=e.handle).call(s)){var s;if("file"===t.kind){const e=await t.getFile(),r=e.name.split(".").pop();let s=e.name.split(".");s.pop();let n=s.join(".");g.zy(v._Y,r)&&a===n&&i.push({title:n,source:e})}}if(i.length){const t=this.get("player");h()(i).call(i,(e=>{t.loadExternalSubtitle(e)}))}}},preventDefault(t){t.preventDefault()},play(t){const e=this.get("player");if(t.get("node.id")===this.playNodeId)return void(6===e.getStatus()?(e.pause(),t.set("node.paused",!0)):8===e.getStatus()&&(e.play(),t.set("node.paused",!1)));if(this.playNodeId){let t=this.findNodeById(this.playNodeId,this.get("root"));for(;t;)t.ref?t.ref.set("node.played",!1):t.played=!1,t=t.parent;this.playNodeId=null}let r=t;for(;r!==this;)r.set("node.played",!0),r=r.$parent;1!==e.getStatus()&&2!==e.getStatus()&&(0===e.getStatus()?(e.load(t.get("node.source"),{isLive:!!t.get("node.isLive")}).then((()=>{e.play().catch((t=>{this.fire("error",{message:`${t}`})})),t.set("node.paused",!1),this.findSubtitle(t.get("node"))})).catch((t=>{this.fire("error",{message:`${t}`})})),this.playNodeId=t.get("node.id"),this.fire("playNode",t.get("node"))):e.stop().then((()=>{e.load(t.get("node.source"),{isLive:!!t.get("node.isLive")}).then((()=>{e.play().catch((t=>{this.fire("error",{message:`${t}`})})),t.set("node.paused",!1),this.findSubtitle(t.get("node"))})).catch((t=>{this.fire("error",{message:`${t}`})})),this.playNodeId=t.get("node.id"),this.fire("playNode",t.get("node"))})))}},events:{play(t,e){this.play(e)},delete(t,e){let r=-1;const i=this.get("root");for(let t=0;t<i.length;t++)if(i[t].id===e.id){r=t;break}r>-1&&this.removeAt("root",r),g.TF(this.root,e.handle||this.generateStoreUrl(e.source,e.isLive)),y.M_(y.qd,this.root)},tip(t,e){e?(this.set("tipShow",!0),this.set("tip",e.text),this.set("tipTop",e.top-this.$refs.scroll.scrollTop+90)):this.set("tipShow",!1)}},afterMount(){this.namespace=".component_folder"+Math.random(),y.Hh(y.qd).then((async t=>{this.root=t||[];const e=[];for(let t=0;t<this.root.length;t++){const r=this.root[t];try{if(w.Yj(r)){let t=r;const e=/^libmediaLive:/.test(t);e&&(t=t.replace(/^libmediaLive:/,"")),this.addUrl(t,e)}else{let t=await r.queryPermission({mode:"read"});if("granted"!==t&&(t=await r.requestPermission({mode:"read"}),"granted"!==t))throw new Error(`not has permission to access ${r.name}`);"file"===r.kind?await this.addFileHandle(r):"directory"===r.kind&&await this.addDir(r)}e.push(r)}catch(t){b.z3("load file handle error, ignore it","src/ui/avplayer/components/folder/Folder.ts",470)}}e.length!==this.root.length&&y.M_(y.qd,e),this.fire("folderLoaded")}));const t=this.get("player");t.on(u.yd+this.namespace,(()=>{if(this.playNodeId){let t=this.findNodeById(this.playNodeId,this.get("root"));if(t){t.ref?t.ref.set("node.paused",!0):t.paused=!0;let e=t;for(;e;)e.ref?e.ref.set("node.played",!1):e.played=!1,e=e.parent}}})),t.on(u.NN+this.namespace,(()=>{if(this.playNodeId){let t=this.findNodeById(this.playNodeId,this.get("root"));t&&(t.ref?t.ref.set("node.paused",!0):t.paused=!0)}})),t.on(u.CN+this.namespace,(()=>{if(this.playNodeId){let t=this.findNodeById(this.playNodeId,this.get("root"));t&&(t.ref?t.ref.set("node.paused",!1):t.paused=!1)}}))},beforeDestroy(){const t=this.get("player");this.namespace&&t.off(this.namespace)},afterUpdate(){if(this.get("nextPlayNodeId")){const t=this.findNodeById(this.get("nextPlayNodeId"),this.get("root"));t&&(this.set("nextPlayNodeId",""),t.ref.fire("play",t.ref))}},components:{FolderNode:v.Ay}}},9391:(t,e,r)=>{"use strict";r.d(e,{Ay:()=>h,KQ:()=>o,_Y:()=>c,z_:()=>n});var i=r(67672),s=r(72739),a=r(81747);const n=["mp3","aac","flac","ogg","ogg","wav","m4a","mka","opus"],o=["mp4","webm","mkv","flv","ts","mov","m4s","h264","264","avc","h265","265","hevc","h266","266","vvc","ivf","mpeg","avi"],c=["ass","ssa","vvt","srt","xml","ttml"],l={name:"Node",template:r.n(a)(),propTypes:{node:{type:"object"},language:{type:"object",required:!0}},data:function(){return{}},filters:{isFolder:function(t){return"folder"===t.type},paddingStart:function(t){return 24*t.depth},isUrl:function(t){return i.Yj(t.source)},isMusic:function(t){const e=t.source.name.split(".").pop();return s.zy(n,e)}},methods:{toggle(){this.set("node.opened",!this.get("node.opened"))},play(){this.fire("play",this)},delete(){this.fire("delete",this.get("node"))},mouseenter(){this.$refs.name.scrollWidth>this.$refs.name.clientWidth?this.fire("tip",{top:this.$el.offsetTop,text:i.Yj(this.get("node.source"))?this.get("node.source"):this.get("node.name")}):i.Yj(this.get("node.source"))&&i.Yj(this.get("node.source"))!==this.get("node.name")&&this.fire("tip",{top:this.$el.offsetTop,text:this.get("node.source")})},mouseleave(){this.fire("tip","")}},afterMount(){this.get("node").ref=this},beforeDestroy(){this.get("node").ref=null},components:{}};l.components.FolderNode=l;const h=l},53891:(t,e,r)=>{"use strict";r.d(e,{A:()=>A});var i=r(11393),s=r.n(i),a=r(86226),n=r.n(a),o=r(14607),c=r.n(o),l=r(28090),h=r(67672),u=r(15491),d=r.n(u),p=r(51e3),f=r.n(p),m=r(548);const v=["jitter","bandwidth"],g=["audioStutter","audioBitrate","audioEncodeFramerate","audioDecodeFramerate","audioRenderFramerate","audioFrameDecodeIntervalMax","audioFrameRenderIntervalMax"],y=["videoStutter","videoBitrate","videoEncodeFramerate","videoDecodeFramerate","videoRenderFramerate","keyFrameInterval","videoFrameDecodeIntervalMax","videoFrameRenderIntervalMax"],A={name:"Info",template:d(),propTypes:{player:{type:"object",required:!0},language:{type:"object",required:!0}},data:function(){return{style:f(),info:"",list:[]}},methods:{getStats:function(t){const e=t.getStats();this.set("list",[]);let r=v;t.hasVideo()&&(r=s()(r).call(r,y)),t.hasAudio()&&(r=s()(r).call(r,g)),n()(r).call(r,(t=>{let r=e[t];"audioBitrate"!==t&&"videoBitrate"!==t&&"bandwidth"!==t||(r=8*r/1e3+" kbps"),this.append("list",{key:t.replace(/([A-Z])/g," $1").replace(/^[a-z]/,(t=>t.toUpperCase())),value:r})}))},init(t){const e=t.getSource(),r=(0,m.Ay)([t.getFormatContext()],[{from:h.Yj(e)?e:e.name,tag:"Input"}]);this.set("info",r.replace(/\n/g,"<br>").replace(/\s/g,"&nbsp;")),this.set("list",[]),this.getStats(t),this.timer||(this.timer=c()((()=>{this.getStats(t)}),1e3))},close(){return this.fire("closeInfo"),!1},preventDefault(t){t.preventDefault()}},afterMount(){this.namespace=".component_info"+Math.random();const t=this.get("player");t.on(l.S2+this.namespace,(()=>{this.init(t)})),t.getStatus()>=4&&this.init(t)},beforeDestroy(){const t=this.get("player");this.namespace&&t.off(this.namespace),this.timer&&(clearInterval(this.timer),this.timer=null)}}},45553:(t,e,r)=>{"use strict";r.d(e,{A:()=>h});var i=r(56255),s=r.n(i),a=r(28090),n=r(32849),o=r.n(n),c=r(17246),l=r.n(c);const h={name:"Loading",template:o(),propTypes:{player:{type:"object",required:!0},language:{type:"object",required:!0}},data:function(){return{style:l(),loading:!1}},methods:{},afterMount(){this.namespace=".component_loading"+Math.random();const t=this.get("player");t.on(a.CN+this.namespace,(()=>{this.timer&&(clearTimeout(this.timer),this.timer=null),this.set("loading",!1)})),t.on(a.F5+this.namespace,(()=>{this.timer&&clearTimeout(this.timer),this.timer=s()((()=>{this.set("loading",!0),this.timer=null}),500)})),this.set("loading",3===t.getStatus())},beforeDestroy(){const t=this.get("player");this.namespace&&t.off(this.namespace)}}},65893:(t,e,r)=>{"use strict";r.d(e,{A:()=>f});var i=r(56255),s=r.n(i),a=r(63939),n=r(28090),o=r(23077),c=r.n(o),l=r(85466),h=r.n(l),u=r(548),d=r(68391);const p={0:"LOADING_MESSAGE_OPEN_FILE",1:"LOADING_MESSAGE_ANALYZE_FILE",2:"LOADING_MESSAGE_LOAD_AUDIO_DECODER",3:"LOADING_MESSAGE_LOAD_VIDEO_DECODER"},f={name:"LoadingTip",template:c(),propTypes:{player:{type:"object",required:!0},language:{type:"object",required:!0},error:{type:"string"}},data:function(){return{style:h(),messages:[],showMessage:!1}},watchers:{error:function(){this.queue.push((()=>{this.append("message",this.get("language.LOADING_MESSAGE_LOAD_FAILED"))}))}},methods:{},afterMount(){this.namespace=".component_loading"+Math.random();const t=this.get("player");this.queue=new d.A(100),this.queue.onEnd=()=>{this.showTimer&&clearTimeout(this.showTimer),this.showTimer=s()((()=>{this.showTimer=null,t.isSuspended()?this.set("message",[this.get("language.LOADING_MESSAGE_RESUME")]):this.set("showMessage",!1)}),2e3)},t.on(n.CN+this.namespace,(()=>{this.queue.push((()=>{this.append("message",this.get("language.LOADING_MESSAGE_LOAD_END"))})),t.isSuspended()&&this.queue.push((()=>{this.append("message",this.get("language.LOADING_MESSAGE_RESUME"))})),this.queue.end()})),t.on(n.F5+this.namespace,(()=>{this.showTimer&&(clearTimeout(this.showTimer),this.showTimer=null),this.queue.reset(),this.set("message",[]),this.set("showMessage",!0)})),t.on(n.dQ+this.namespace,(()=>{const t=this.get("message");this.showTimer||1!==t.length||t[0]!==this.get("language.LOADING_MESSAGE_RESUME")||this.set("showMessage",!1)})),t.on(n.Gd+this.namespace,((t,e)=>{let r=this.get("language."+p[t]);switch(t){case 1:r=r.replace("${mux}",e);break;case 2:case 3:r=r.replace("${decoder}",(0,u.eG)(a.f[15](e.codecpar),a.f[15](e.codecpar+4)))}this.queue.push((()=>{this.append("message",r)}))})),t.getStatus()>=3&&this.set("showMessage",!0)},beforeDestroy(){const t=this.get("player");this.namespace&&t.off(this.namespace)}}},30499:(t,e,r)=>{"use strict";r.d(e,{A:()=>A});var i=r(49859),s=r(5496),a=r.n(s),n=r(71426),o=r.n(n),c=r(61634),l=r(28090),h=r(65051),u=r.n(h),d=r(5840),p=r.n(d),f=r(78995),m=r(86932);function v(t,e,r){let i,s,a;if(0==e)i=s=a=r;else{const n=function(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<.16666666666666666?t+6*(e-t)*r:r<.3333333333333333?e:r<.5?t+(e-t)*(.6666666666666666-r)*6:t},o=r<.5?r*(1+e):r+e-r*e,c=2*r-o;i=n(c,o,.3333333333333333+(t/=360)),s=n(c,o,t),a=n(c,o,t-.3333333333333333)}return[Math.round(255*i),Math.round(255*s),Math.round(255*a)]}function g(t,e){let r=(t+e)%360;return r<0&&(r+=360),r}class y{constructor(){(0,i.A)(this,"OUTER_MAX_HEIGHT",.4),(0,i.A)(this,"MIDDLE_MAX_HEIGHT",.3),(0,i.A)(this,"INNER_MAX_HEIGHT",.2),(0,i.A)(this,"MAX_LENGTH",100),(0,i.A)(this,"MAX_FRAMERATE",30),(0,i.A)(this,"timeDelta",Math.floor(1e3/this.MAX_FRAMERATE)),(0,i.A)(this,"lastTimestamp",(0,m.A)())}draw(t,e){const r=(0,m.A)();if(r-this.lastTimestamp<this.timeDelta)return;this.lastTimestamp=r;const i=e.canvas.width,s=e.canvas.height,n=Math.min(i,s)/2;let o=Math.floor(this.MAX_LENGTH*(1+Math.min(1,(n-500)/200)));const c=Math.floor(t.length/o*.6);e.clearRect(0,0,i,s);const l=Math.min(i/2,s/2)*(.95-this.OUTER_MAX_HEIGHT),h=[],u=[],d=[],p=[],f=2*Math.PI/o,y=360/o,A=function(){const t=Math.max(1,0,0),e=Math.min(1,0,0);let r,i,s=(t+e)/2;if(t===e)r=i=0;else{const a=t-e;switch(i=s>.5?a/(2-t-e):a/(t+e),t){case 1:r=0/a+0;break;case 0:r=-1/a+2;break;case 0:r=1/a+4}r/=6}return[360*r,i,s]}();for(let e=0;e<o;e++){const r=Math.pow(t[e*c]/255,1.5),a=Math.pow(t[e*c]/255,1),o=Math.pow(t[e*c]/255,2.2);h.push({x:i/2+(l+this.OUTER_MAX_HEIGHT*n*r)*Math.cos(e*f*-1),y:s/2+(l+this.OUTER_MAX_HEIGHT*n*r)*Math.sin(e*f*-1)}),d.push({x:i/2+(l-this.INNER_MAX_HEIGHT*n*a)*Math.cos(e*f*-1),y:s/2+(l-this.INNER_MAX_HEIGHT*n*a)*Math.sin(e*f*-1)}),u.push({start:{x:i/2+l*Math.cos(e*f*-1),y:s/2+l*Math.sin(e*f*-1)},end:{x:i/2+(l+this.MIDDLE_MAX_HEIGHT*n*o)*Math.cos(e*f*-1),y:s/2+(l+this.MIDDLE_MAX_HEIGHT*n*o)*Math.sin(e*f*-1)}});let m=Math.floor(e*y)-60;m<0&&(m+=360);const b=v(g(A[0],m),A[1],A[2]);p.push(`rgb(${b[0]},${b[1]},${b[2]})`)}e.lineCap="round",e.lineWidth=8,e.shadowBlur=20,e.shadowOffsetX=0,e.shadowOffsetY=0;for(let t=0;t<h.length;t++)e.strokeStyle=p[t],e.fillStyle=p[t],e.beginPath(),e.arc(h[t].x,h[t].y,4,0,2*Math.PI,!0),a()(e).call(e),e.beginPath(),e.arc(d[t].x,d[t].y,4,0,2*Math.PI,!0),a()(e).call(e),e.beginPath(),e.moveTo(u[t].start.x,u[t].start.y),e.lineTo(u[t].end.x,u[t].end.y),e.stroke();e.lineWidth=2;for(let t=0;t<d.length;t++){let r=t===d.length-1?0:t+1;const i=e.createLinearGradient(d[t].x,d[t].y,d[r].x,d[r].y);i.addColorStop(0,p[t]),i.addColorStop(1,p[r]),e.strokeStyle=i,e.beginPath(),e.moveTo(d[t].x,d[t].y),e.lineTo(d[r].x,d[r].y),e.stroke()}}}const A={name:"PcmVisualization",template:u(),propTypes:{player:{type:"object",required:!0},language:{type:"object",required:!0}},data:function(){return{style:p()}},methods:{draw(){this.analyser.getByteFrequencyData(this.buffer),this.drawer.draw(this.buffer,this.context),requestAnimationFrame((()=>{this.playing&&this.draw()}))},init(t){var e;!t.hasVideo()||1024&o()(e=t.getStreams()).call(e,(e=>e.id===t.getSelectedVideoStreamId())).disposition?t.hasAudio()&&(this.playing=!0,this.analyser||(this.analyser=c.Ay.audioContext.createAnalyser(),this.buffer=new Uint8Array(this.analyser.frequencyBinCount)),t.getAudioOutputNode().connect(this.analyser),this.draw()):(this.playing=!1,this.context.clearRect(0,0,this.context.canvas.width,this.context.canvas.height))}},afterMount(){this.namespace=".component_pcm_visualization"+Math.random(),this.$refs.canvas.width=this.$el.offsetWidth*devicePixelRatio,this.$refs.canvas.height=this.$el.offsetHeight*devicePixelRatio,this.context=this.$refs.canvas.getContext("2d"),this.drawer=new y;const t=this.get("player");t.on(l.CN+this.namespace,(()=>{this.init(t)})),6===t.getStatus()&&this.init(t),this.onresize=(0,f.A)((()=>{this.$refs.canvas.width=this.$el.offsetWidth*devicePixelRatio,this.$refs.canvas.height=this.$el.offsetHeight*devicePixelRatio}),500),window.addEventListener("resize",this.onresize)},beforeDestroy(){const t=this.get("player");this.namespace&&t.off(this.namespace),this.playing=!1,window.removeEventListener("resize",this.onresize)}}},23601:(t,e,r)=>{"use strict";r.d(e,{A:()=>y});var i=r(48079),s=r.n(i),a=r(11265),n=r.n(a),o=r(36586),c=r.n(o),l=r(90577),h=r.n(l),u=r(99726),d=r.n(u),p=r(28090),f=r(44328),m=r(20525),v=r(67672),g=r(77231);const y={name:"Progress",template:h(),propTypes:{player:{type:"object",required:!0},indicatorUrl:{type:"string"}},data:function(){return{style:d(),startX:0,start:!1,seekTime:0,currentTime:0,totalTime:0,loadedTime:0,hoverX:0,indicatorSize:0,showTip:!1,isFileSource:!1,chapters:[],hoverChapter:""}},computed:{playedWidth:function(){const t=this.get("seekTime"),e=this.get("currentTime"),r=this.get("totalTime");return this.get("start")?t/r*100:e/r*100},loadedWidth:function(){return this.get("isFileSource")?0:(this.get("currentTime")+this.get("loadedTime"))/this.get("totalTime")*100},hoverWidth:function(){const t=this.get("hoverX");if(this.$refs&&this.$refs.slider){let e=t-this.$refs.slider.getBoundingClientRect().left;return e<0&&(e=0),e>this.$refs.slider.offsetWidth&&(e=this.$refs.slider.offsetWidth),e/this.$refs.slider.offsetWidth*100}return 0},hoverTime:function(){const t=this.get("hoverWidth");return Math.round(t/100*this.get("totalTime"))}},filters:{formatTime(t){t<0&&(t=0);const e=t/1e3%60|0,r=t/1e3/60%60|0,i=t/1e3/3600|0;return i?m.GP("%02d:%02d:%02d",i,r,e):m.GP("%02d:%02d",r,e)}},methods:{mousemove:function(t){if(!this.get("start"))return;const e=this.get("startX"),r=this.$refs.slider.offsetWidth;let i=0;i=(t.screenX-e)/r*this.get("totalTime");let s=this.get("seekTime")+i;s<0&&(s=0),s>this.get("totalTime")&&(s=this.get("totalTime")),this.set("seekTime",s),this.set("startX",t.screenX)},mouseup:function(){if(this.get("start")){this.set("start",!1);const t=this.get("player");this.seeking=!0,t.seek(BigInt(Math.floor(this.get("seekTime")))).then((()=>{this.seeking=!1})),this.set("currentTime",this.get("seekTime"))}},hoverEnter:function(t){this.set("hoverX",t.originalEvent.clientX),this.set("showTip",!0)},hoverMove:function(t){this.set("hoverX",t.originalEvent.clientX)},hoverLeave:function(t){this.set("hoverX",this.$refs.slider.offsetLeft),this.set("showTip",!1)},hoverClick:function(t){const e=this.get("player"),r=e.getStatus();6!==r&&8!==r||(this.seeking=!0,e.seek(BigInt(Math.floor(this.get("hoverTime")))).then((()=>{this.seeking=!1})),this.set("currentTime",this.get("hoverTime")))},indicatorDown:function(t){this.set("startX",t.originalEvent.screenX),this.set("start",!0),this.set("seekTime",this.get("currentTime"))},chapterEnter(t){this.set("hoverChapter",t.text),this.set("showTip",!0)},chapterLeave(t){this.set("hoverChapter",""),this.set("showTip",!0)},chapterClick(t){const e=this.get("player");this.seeking=!0,e.seek(t.start).then((()=>{this.seeking=!1})),this.set("currentTime",Number(t.start))},init(t){var e;this.set("currentTime",Number(t.currentTime)),this.set("totalTime",Number(t.getDuration())),this.set("isFileSource",!v.Yj(t.getSource())),this.set("chapters",s()(e=t.getChapters()).call(e,(t=>{const e=(0,f.k)(t.start,t.timeBase,g.i0);return{text:t.metadata.title,start:e,left:Number(e)/this.get("totalTime")*100}})))}},afterMount(){var t;this.onmouseup=t=>{this.mouseup()},this.onmousemove=t=>{this.mousemove(t)},document.addEventListener("mouseup",this.onmouseup),document.addEventListener("mousemove",this.onmousemove),this.namespace=".Progress"+Math.random();const e=this.get("player");e.on(p.S2+this.namespace,(()=>{this.init(e)})),e.on(p.yd+this.namespace,(()=>{this.set("currentTime",0),this.set("loadedTime",0)})),e.on(p.mQ+this.namespace,(()=>{this.set("currentTime",Number(e.currentTime))})),e.on(p.E9+this.namespace,(t=>{if(this.seeking)return;this.set("currentTime",Number(t));const r=e.getStats();r.audioEncodeFramerate?this.set("loadedTime",r.audioPacketQueueLength/r.audioEncodeFramerate*1e3):r.videoEncodeFramerate&&this.set("loadedTime",r.videoPacketQueueLength/r.videoEncodeFramerate*1e3)})),e.getStatus()>=4&&this.init(e);const r=document.querySelector("#avplayer-ui-container"),i=getComputedStyle(r),s=n()(t=i.getPropertyValue("--libmedia-ui-indicator-size")).call(t);this.set("indicatorSize",c()(s))},beforeDestroy(){document.removeEventListener("mouseup",this.onmouseup),document.removeEventListener("mousemove",this.onmousemove),this.get("player").off(this.namespace)}}},44341:(t,e,r)=>{"use strict";r.d(e,{A:()=>c});var i,s=r(42461),a=r.n(s),n=r(47410),o=r.n(n);!function(t){t[t.DECODER=0]="DECODER",t[t.PLAY=1]="PLAY",t[t.SUBTITLE=2]="SUBTITLE",t[t.VIDEO=3]="VIDEO",t[t.AUDIO=4]="AUDIO",t[t.FILTER=5]="FILTER",t[t.KEYBOARD=6]="KEYBOARD",t[t.LANGUAGE=7]="LANGUAGE",t[t.SKIN=8]="SKIN"}(i||(i={}));const c={name:"Settings",template:a(),propTypes:{player:{type:"object",required:!0},language:{type:"object",required:!0}},data:function(){const t=this.get("language"),e=[{id:i.DECODER,name:t.SETTING_TAB_DECODER},{id:i.PLAY,name:t.SETTING_TAB_PLAY},{id:i.SUBTITLE,name:t.SETTING_TAB_SUBTITLE},{id:i.VIDEO,name:t.SETTING_TAB_VIDEO},{id:i.AUDIO,name:t.SETTING_TAB_AUDIO},{id:i.FILTER,name:t.SETTING_TAB_FILTER},{id:i.KEYBOARD,name:t.SETTING_TAB_KEYBOARD},{id:i.LANGUAGE,name:t.SETTING_TAB_LANGUAGE},{id:i.SKIN,name:t.SETTING_TAB_SKIN}];return{style:o(),tab:i.DECODER,list:e}},methods:{close:function(){this.fire("closeSettings")}},afterMount(){this.namespace=".component_settings"+Math.random()},beforeDestroy(){const t=this.get("player");this.namespace&&t.off(this.namespace)}}},72913:(t,e,r)=>{"use strict";r.d(e,{J:()=>i});const i="folderLoaded"},93269:(t,e,r)=>{"use strict";r.r(e),r.d(e,{BUTTON_ADD:()=>w,CHECKBOX_LIVE:()=>k,CONTROL_AUDIO_TRACK:()=>m,CONTROL_PLAYRATE:()=>f,CONTROL_SUBTITLE_TRACK:()=>g,CONTROL_SUBTITLE_TRACK_ADD:()=>y,CONTROL_VIDEO_TRACK:()=>v,FOLDER_OPEN_DIR:()=>A,FOLDER_OPEN_FILE:()=>b,FOLDER_OPEN_URL_PLACEHOLDER:()=>x,INFO_TITLE:()=>R,LOADING_MESSAGE_ANALYZE_FILE:()=>_,LOADING_MESSAGE_LOAD_AUDIO_DECODER:()=>I,LOADING_MESSAGE_LOAD_END:()=>P,LOADING_MESSAGE_LOAD_FAILED:()=>M,LOADING_MESSAGE_LOAD_VIDEO_DECODER:()=>S,LOADING_MESSAGE_OPEN_FILE:()=>T,LOADING_MESSAGE_RESUME:()=>C,MENU_STATS:()=>E,SETTINGS_TITLE:()=>D,SETTING_TAB_AUDIO:()=>$,SETTING_TAB_DECODER:()=>B,SETTING_TAB_FILTER:()=>O,SETTING_TAB_KEYBOARD:()=>N,SETTING_TAB_LANGUAGE:()=>z,SETTING_TAB_PLAY:()=>L,SETTING_TAB_SKIN:()=>V,SETTING_TAB_SUBTITLE:()=>U,SETTING_TAB_VIDEO:()=>F,TIP_DELETE:()=>p,TIP_FOLD:()=>u,TIP_FULLSCREEN:()=>n,TIP_LOOP_START:()=>o,TIP_LOOP_STOP:()=>c,TIP_PAUSE:()=>s,TIP_PIP_START:()=>l,TIP_PIP_STOP:()=>h,TIP_PLAY:()=>i,TIP_SETTING:()=>a,TIP_UNFOLD:()=>d});const i="",s="",a="",n="",o="",c="",l="",h="",u="",d="",p="",f="",m="",v="",g="",y="",A="",b="",x="",w="",k="",T="...",_="(${mux})...",I="(${decoder})...",S="(${decoder})...",P=" (`)",M=" ()",C="",R="",E="",D="",B="",L="",U="",F="",$="",O="",N="",z="",V=""},69094:(t,e,r)=>{"use strict";r.r(e),r.d(e,{BUTTON_ADD:()=>x,CHECKBOX_LIVE:()=>w,CONTROL_AUDIO_TRACK:()=>f,CONTROL_PLAYRATE:()=>p,CONTROL_SUBTITLE_TRACK:()=>v,CONTROL_SUBTITLE_TRACK_ADD:()=>g,CONTROL_VIDEO_TRACK:()=>m,FOLDER_OPEN_DIR:()=>y,FOLDER_OPEN_FILE:()=>A,FOLDER_OPEN_URL_PLACEHOLDER:()=>b,INFO_TITLE:()=>C,LOADING_MESSAGE_ANALYZE_FILE:()=>T,LOADING_MESSAGE_LOAD_AUDIO_DECODER:()=>_,LOADING_MESSAGE_LOAD_END:()=>S,LOADING_MESSAGE_LOAD_FAILED:()=>P,LOADING_MESSAGE_LOAD_VIDEO_DECODER:()=>I,LOADING_MESSAGE_OPEN_FILE:()=>k,LOADING_MESSAGE_RESUME:()=>M,MENU_STATS:()=>R,SETTINGS_TITLE:()=>E,SETTING_TAB_AUDIO:()=>F,SETTING_TAB_DECODER:()=>D,SETTING_TAB_FILTER:()=>$,SETTING_TAB_KEYBOARD:()=>O,SETTING_TAB_LANGUAGE:()=>N,SETTING_TAB_PLAY:()=>B,SETTING_TAB_SKIN:()=>z,SETTING_TAB_SUBTITLE:()=>L,SETTING_TAB_VIDEO:()=>U,TIP_DELETE:()=>d,TIP_FOLD:()=>h,TIP_FULLSCREEN:()=>n,TIP_LOOP_START:()=>o,TIP_LOOP_STOP:()=>c,TIP_PAUSE:()=>s,TIP_PIP:()=>l,TIP_PLAY:()=>i,TIP_SETTING:()=>a,TIP_UNFOLD:()=>u});const i="Play",s="Pause",a="Settings",n="Fullscreen",o="Open Loop",c="Close Loop",l="Picture In Picture",h="Fold",u="Unfold",d="Delete",p="Speed",f="Audio",m="Video",v="Subtitle",g="Add",y="Open Fold",A="Open File",b="Input Url",x="Add",w="Live",k="opening source...",T="analyzing source(${mux})...",_="loading audio decoder(${decoder})...",I="loading video decoder(${decoder})...",S="readied (`)",P="failed ()",M="Click on the screen or volume button in footer to unmute audio",C="Stats Info",R="Source Stats Info",E="Settings",D="Decoder",B="Play",L="Subtitle",U="Picture",F="Sound",$="Filter",O="Shortcut",N="Language",z="Skin"},6204:(t,e,r)=>{"use strict";r.d(e,{A:()=>h});var i=r(64007),s=r.n(i),a=r(93269),n=r(69094),o=r(8507),c=r(11302);const l={chinese:1,chinese_traditional:1,english:1};function h(){let t=o.mA(location.search).language;switch(l[t]||(t=c.Jt(c.f7),t||(t=(navigator.systemLanguage||navigator.browserLanguage||navigator.userLanguage||navigator.language).toLowerCase(),t=s()(t).call(t,"en")>-1?"english":s()(t).call(t,"zh-hk")>-1||s()(t).call(t,"zh-tw")>-1?"chinese_traditional":(s()(t).call(t,"zh"),"chinese")),c.hZ(c.f7,t)),t){case"chinese":default:return a;case"english":return n}}},53924:(t,e,r)=>{"use strict";r.d(e,{A:()=>s});var i=r(82042);const s={name:"slider",model:"value",template:r.n(i)(),propTypes:{value:{type:"number",required:!0},max:{type:"number",value:100},min:{type:"number",value:0},step:{type:"number",value:1},direction:{type:"string",value:"vertical"}},data:function(){return{startX:0,startY:0,start:!1}},computed:{offset:function(){return"vertical"===this.get("direction")?`top: ${100*(1-this.get("value")/this.get("max"))}%`:`right: ${100*(1-this.get("value")/this.get("max"))}%`}},methods:{mousedown:function(t){this.set("startX",t.originalEvent.screenX),this.set("startY",t.originalEvent.screenY),this.set("start",!0)},mousemove:function(t){if(!this.get("start"))return;const e=this.get("startX"),r=this.get("startY");let i=0;const s=this.get("direction"),a=this.get("step");if("vertical"===s){const e=this.$refs.slider.offsetHeight;i=-(t.screenY-r)/e*this.get("max")*a}else if("horizontal"===s){const r=this.$refs.slider.offsetWidth;i=(t.screenX-e)/r*this.get("max")*a}let n=this.get("value")+i;n<this.get("min")&&(n=this.get("min")),n>this.get("max")&&(n=this.get("max")),this.set("value",Math.round(n)),this.set("startX",t.screenX),this.set("startY",t.screenY)},mouseup:function(){this.get("start")&&this.set("start",!1)}},afterMount(){this.onmouseup=t=>{this.mouseup()},this.onmousemove=t=>{this.mousemove(t)},document.addEventListener("mouseup",this.onmouseup),document.addEventListener("mousemove",this.onmousemove)},beforeDestroy(){document.removeEventListener("mouseup",this.onmouseup),document.removeEventListener("mousemove",this.onmousemove)}}},66521:(t,e,r)=>{"use strict";r.d(e,{Hh:()=>u,M_:()=>d,qd:()=>a});var i=r(61240),s=r.n(i);const a="libmedia_folder_root",n="libmedia_db",o="store";let c,l;async function h(){return l=new(s())(((t,e)=>{const r=indexedDB.open(n,1);r.onupgradeneeded=function(t){c=t.target.result,c.objectStoreNames.contains(o)||c.createObjectStore(o,{keyPath:"id",autoIncrement:!0}).createIndex("name","name",{unique:!1})},r.onsuccess=function(e){c=e.target.result,t()},r.onerror=function(t){e(t)}})),l}async function u(t){return c||(l?await l:await h()),new(s())(((e,r)=>{const i=c.transaction([o],"readwrite").objectStore(o).index("name").get(t);i.onsuccess=function(t){var r;e(null===(r=t.target.result)||void 0===r?void 0:r.data)},i.onerror=function(t){r(t)}}))}async function d(t,e){return c||(l?await l:await h()),new(s())(((r,i)=>{const s=c.transaction([o],"readwrite").objectStore(o),a=s.index("name").get(t);a.onsuccess=function(a){if(a.target.result){const n=s.put({id:a.target.result.id,name:t,data:e});n.onsuccess=function(){r()},n.onerror=function(t){i(t)}}else{const a=s.put({name:t,data:e});a.onsuccess=function(){r()},a.onerror=function(t){i(t)}}},a.onerror=function(t){i(t)}}))}},64804:(t,e,r)=>{"use strict";r.d(e,{A:()=>a});var i=r(56255),s=r.n(i);const a={on:function(t,e,r){s()((function(){document.addEventListener("click",e.onOutside=function(r){let i=r.target;i.parentNode&&!t.contains(i)&&e(r)})}),0)},off:function(t,e,r){e.onOutside&&(document.removeEventListener("click",e.onOutside),e.onOutside=null)}}},11302:(t,e,r)=>{"use strict";r.d(e,{Jt:()=>c,Yt:()=>a,f7:()=>s,hZ:()=>o,vd:()=>n,xc:()=>i});const i="libmedia_volume",s="libmedia_system_language",a="libmedia_play_rate",n="libmedia_play_loop";function o(t,e){localStorage.setItem(t,e)}function c(t,e){const r=localStorage.getItem(t);return null==r?e:r}},34268:(t,e,r)=>{"use strict";var i=r(49859),s=r(61240),a=r.n(s),n=r(84149),o=r(87503),c=r(67672),l=r(4624),h=r(44690);let u=h.A.windows||h.A.mac||h.A.linux?10:20;class d extends o.A{constructor(){super(),(0,i.A)(this,"pullIPC",void 0),(0,i.A)(this,"frontBuffer",void 0),(0,i.A)(this,"backBuffer",void 0),(0,i.A)(this,"channels",void 0),(0,i.A)(this,"backBufferOffset",void 0),(0,i.A)(this,"ended",void 0),(0,i.A)(this,"frontBuffered",void 0),(0,i.A)(this,"pause",void 0),(0,i.A)(this,"firstRendered",void 0),(0,i.A)(this,"stopped",void 0),(0,i.A)(this,"afterPullResolve",void 0),(0,i.A)(this,"lastStutterTimestamp",void 0),this.ended=!1,this.pause=!0,this.ipcPort.on(n.S3,(async t=>{switch(t.method){case"init":t.params&&t.params.bufferLength&&(u=t.params.bufferLength),this.ipcPort.reply(t);break;case"start":{const{port:e,channels:r}=t.params;this.channels=r,this.pullIPC=new n.Ay(e),this.backBufferOffset=0,this.ended=!1,this.frontBuffered=!0,this.pause=!1,this.firstRendered=!1,this.stopped=!1,this.lastStutterTimestamp=currentTime;const i=[],s=[];await this.pull(i),i.length?(await this.pull(s),s.length||(this.ended=!0,this.frontBuffered=!1)):(this.ended=!0,this.frontBuffered=!1,this.backBufferOffset=u),this.frontBuffer=s,this.backBuffer=i,this.ipcPort.reply(t);break}case"restart":{if(!this.ended)return void this.ipcPort.reply(t);this.backBufferOffset=0,this.ended=!1,this.frontBuffered=!0,this.pause=!1,this.firstRendered=!1,this.stopped=!1,this.lastStutterTimestamp=currentTime;const e=[],r=[];await this.pull(e),e.length?(await this.pull(r),r.length||(this.ended=!0,this.frontBuffered=!1)):(this.ended=!0,this.frontBuffered=!1,this.backBufferOffset),this.frontBuffer=r,this.backBuffer=e,this.ipcPort.reply(t);break}case"clear":this.backBufferOffset=u,this.ipcPort.reply(t);break;case"stop":this.ended||this.pause||this.frontBuffered||await new(a())((t=>{this.afterPullResolve=t})),this.stopped=!0,this.pullIPC.destroy(),this.ipcPort.reply(t);break;case"pause":this.pause=!0,this.ipcPort.reply(t);break;case"unpause":this.pause=!1,this.ipcPort.reply(t)}}))}async pull(t){const e=await this.pullIPC.request("pullBuffer",{nbSamples:128*u});if(c.ai(e))this.ended=!0;else{const r=new Float32Array(e);for(let e=0;e<this.channels;e++)t[e]=r.subarray(e*u*128,(e+1)*u*128)}this.afterPullResolve&&this.afterPullResolve()}swapBuffer(){return!!this.frontBuffered&&(this.backBuffer=this.frontBuffer,this.backBufferOffset=0,this.frontBuffer=[],this.frontBuffered=!1,this.pull(this.frontBuffer).then((()=>{this.frontBuffered=!0})),!0)}process(t,e,r){if(this.stopped)return!1;if(this.backBuffer&&!this.pause){if(this.backBufferOffset===u){if(this.ended)return this.backBuffer=null,this.frontBuffer=null,l.pq("audio source ended","src/avrender/pcm/AudioSourceWorkletProcessor.ts",230),this.ipcPort.notify("ended"),!0;if(!this.swapBuffer())return currentTime-this.lastStutterTimestamp>1&&(this.ipcPort.notify("stutter"),this.lastStutterTimestamp=currentTime),!0}const t=e[0];for(let e=0;e<this.channels;e++)t[e].set(this.backBuffer[e].subarray(128*this.backBufferOffset,128*(this.backBufferOffset+1)),0);this.backBufferOffset++,this.firstRendered||(this.firstRendered=!0,this.ipcPort.notify("firstRendered"))}return!0}}registerProcessor("audio-source-processor",d)},5676:(t,e,r)=>{"use strict";var i=r(49859),s=r(61240),a=r.n(s),n=r(63939),o=r(50932),c=r(84149),l=r(87503),h=r(11473),u=(r(10278),r(37837)),d=r(4624),p=r(44690);let f=p.A.windows||p.A.mac||p.A.linux?10:20;class m extends l.A{constructor(){super(),(0,i.A)(this,"pullIPC",void 0),(0,i.A)(this,"frontBuffer",void 0),(0,i.A)(this,"backBuffer",void 0),(0,i.A)(this,"channels",void 0),(0,i.A)(this,"backBufferOffset",void 0),(0,i.A)(this,"ended",void 0),(0,i.A)(this,"frontBuffered",void 0),(0,i.A)(this,"firstRendered",void 0),(0,i.A)(this,"pause",void 0),(0,i.A)(this,"stopped",void 0),(0,i.A)(this,"afterPullResolve",void 0),(0,i.A)(this,"lastStutterTimestamp",void 0),this.ended=!1,this.pause=!0,this.ipcPort.on(c.S3,(async t=>{switch(t.method){case"init":{const{memory:e,bufferLength:r}=t.params;t.params.bufferLength&&(f=r),await(0,h.Tg)({memory:e,disableAsm:!0}),this.ipcPort.reply(t);break}case"start":{const{port:e,channels:r}=t.params;this.channels=r,this.pullIPC=new c.Ay(e),this.backBufferOffset=0,this.ended=!1,this.pause=!1,this.frontBuffered=!0,this.firstRendered=!1,this.stopped=!1,this.lastStutterTimestamp=currentTime;const i=this.allocBuffer(),s=this.allocBuffer();let a=await this.pullIPC.request("pull",{buffer:s});a<0?(this.ended=!0,this.frontBuffered=!1,this.backBufferOffset):(a=await this.pullIPC.request("pull",{buffer:i}),a<0&&(this.ended=!0,this.frontBuffered=!1)),this.frontBuffer=i,this.backBuffer=s,this.ipcPort.reply(t);break}case"restart":{if(!this.ended)return void this.ipcPort.reply(t);this.backBufferOffset=0,this.ended=!1,this.pause=!1,this.frontBuffered=!0,this.firstRendered=!1,this.stopped=!1,this.lastStutterTimestamp=currentTime;const e=this.backBuffer?this.backBuffer:this.allocBuffer(),r=this.frontBuffer?this.frontBuffer:this.allocBuffer();let i=await this.pullIPC.request("pull",{buffer:r});i<0?(this.ended=!0,this.frontBuffered=!1,this.backBufferOffset=f):(i=await this.pullIPC.request("pull",{buffer:e}),i<0&&(this.ended=!0,this.frontBuffered=!1)),this.frontBuffer=e,this.backBuffer=r,this.ipcPort.reply(t);break}case"stop":this.ended||this.pause||this.frontBuffered||await new(a())((t=>{this.afterPullResolve=t})),this.freeBuffer(this.backBuffer),this.freeBuffer(this.frontBuffer),this.backBuffer=0,this.frontBuffer=0,this.stopped=!0,this.pullIPC.destroy(),this.ipcPort.reply(t);break;case"clear":this.backBufferOffset=f,this.ipcPort.reply(t);break;case"pause":this.pause=!0,this.ipcPort.reply(t);break;case"unpause":this.pause=!1,this.ipcPort.reply(t)}}))}allocBuffer(){const t=(0,u.Gy)(48);o.M[20](t,(0,u.Gy)(4*this.channels)),o.M[15](t+16,this.channels);const e=(0,u.Gy)(512*f*this.channels);for(let r=0;r<this.channels;r++)o.M[20](n.f[20](t)+4*r,e+128*f*4*r);return o.M[15](t+12,128*f),t}freeBuffer(t){t&&((0,u.aI)(n.f[20](t)),(0,u.aI)(t),(0,u.Eb)(t))}async pull(){await this.pullIPC.request("pull",{buffer:this.frontBuffer})<0&&(this.ended=!0),this.afterPullResolve&&this.afterPullResolve()}swapBuffer(){if(!this.frontBuffered)return!1;{const t=this.backBuffer;this.backBuffer=this.frontBuffer,this.frontBuffer=t,this.backBufferOffset=0}return this.frontBuffered=!1,this.pull().then((()=>{this.frontBuffered=!0})),!0}process(t,e,r){if(this.stopped)return!1;if(this.backBuffer&&!this.pause){if(this.backBufferOffset===f){if(this.ended)return this.freeBuffer(this.backBuffer),this.freeBuffer(this.frontBuffer),this.backBuffer=0,this.frontBuffer=0,d.pq("audio source ended","src/avrender/pcm/AudioSourceWorkletProcessor2.ts",271),this.ipcPort.notify("ended"),!0;if(!this.swapBuffer())return currentTime-this.lastStutterTimestamp>1&&(this.ipcPort.notify("stutter"),this.lastStutterTimestamp=currentTime),!0}const t=e[0];for(let e=0;e<this.channels;e++)t[e].set(new Float32Array((0,h.Lv)(),n.f[20](n.f[20](this.backBuffer)+4*e)+128*this.backBufferOffset*4,128),0);this.backBufferOffset++,this.firstRendered||(this.firstRendered=!0,this.ipcPort.notify("firstRendered"))}return!0}}registerProcessor("audio-source-processor",m)},87503:(t,e,r)=>{"use strict";r.d(e,{A:()=>a});var i=r(49859),s=r(84149);class a extends AudioWorkletProcessor{constructor(){super(),(0,i.A)(this,"ipcPort",void 0),this.ipcPort=new s.Ay(this.port)}async request(t,e,r){return this.ipcPort.request(t,e,r)}notify(t,e,r){this.ipcPort.notify(t,e,r)}}},84209:(t,e,r)=>{"use strict";r.d(e,{A:()=>i});const i="precision highp float;\n\nattribute vec3 point;\nattribute vec4 color;\nvarying vec4 v_color;\n\nuniform mat4 rotateMatrix;\n\nvoid main(void){\n  gl_Position = rotateMatrix * vec4(point, 1.0);\n  v_color = color;\n}\n"},54895:(t,e,r)=>{"use strict";r.d(e,{A:()=>i});const i="struct PositionColorInput {\n    @location(0) in_position_3d: vec3<f32>,\n    @location(1) in_color_rgba: vec4<f32>\n};\n\nstruct PositionColorOutput {\n    @builtin(position) coords_output: vec4<f32>,\n    @location(0) color_output: vec4<f32>\n};\n\nstruct RotateMatrix {\n    matrix: mat4x4<f32>\n};\n\n@group(0) @binding(0) var<uniform> rotateMatrix: RotateMatrix;\n\n@vertex\nfn main(input: PositionColorInput) -> PositionColorOutput {\n    var output: PositionColorOutput;\n    output.color_output = input.in_color_rgba;\n    output.coords_output = rotateMatrix.matrix * vec4<f32>(input.in_position_3d, 1.0);\n    return output;\n}"},47451:function(t){t.exports=function(){"use strict";var t="beforeCreate",e="afterCreate",r="beforeRender",i="afterRender",s="beforeMount",a="beforeUpdate",n="beforeDestroy",o="afterDestroy",c=!0,l=!1,h=null,u=void 0,d="true",p="undefined",f="component",m="function",v="length",g=".",y=typeof window!==p?window:u,A=typeof document!==p?document:u,b="input",x="change",w="model",k=function(){},T=Object.freeze({}),_=Object.freeze([]),I="",S=/yox/.test(k.toString())?2:3,P={leftDelimiter:"{",rightDelimiter:"}",uglifyCompiled:l,minifyCompiled:l,logLevel:S};function M(t){return typeof t===m}function C(t){return Array.isArray(t)}function R(t){return t!==h&&"object"==typeof t}function E(t){return"string"==typeof t}function D(t){return"number"==typeof t&&!isNaN(t)}function B(t){return t===c||t===l}function L(t){return!isNaN(t-parseFloat(t))}var U=Object.freeze({__proto__:null,func:M,array:C,object:R,string:E,number:D,boolean:B,numeric:L});function F(t,e,r){return C(r)?t.apply(e,r):e!==u?t.call(e,r):r!==u?t(r):t()}var $=function(t,e){this.type=t,this.phase=$.PHASE_CURRENT,e&&(this.originalEvent=e)};function O(t,e,r){var i=t.length;if(i)if(r)for(var s=i-1;s>=0&&e(t[s],s)!==l;s--);else for(var a=0;a<i&&e(t[a],a)!==l;a++);}function N(t,e){t[t.length]=e}function z(t,e){t.unshift(e)}function V(t,e,r){C(e)?O(e,(function(e){r(t,e)})):r(t,e)}function G(t,e){V(t,e,N)}function W(t,e){V(t,e,z)}function j(t,e,r){var i=-1;return O(t,(function(t,s){if(r===l?t==e:t===e)return i=s,l})),i}function H(t){var e=t.length;if(e>0)return t[e-1]}function q(t,e,r){var i=0;return O(t,(function(s,a){(r===l?s==e:s===e)&&(t.splice(a,1),i++)}),c),i}function Y(t,e,r){return j(t,e,r)>=0}function K(t){return C(t)?t:F(_.slice,t)}function Q(t,e,r){var i={};return O(t,(function(t){i[e?t[e]:t]=r||t})),i}function X(t,e){return t.join(e)}function J(t){return!C(t)||!t.length}$.is=function(t){return t instanceof $},$.prototype.preventDefault=function(){var t=this;if(!t.isPrevented){var e=t.originalEvent;e&&e.preventDefault(),t.isPrevented=c}return t},$.prototype.stopPropagation=function(){var t=this;if(!t.isStoped){var e=t.originalEvent;e&&e.stopPropagation(),t.isStoped=c}return t},$.prototype.prevent=function(){return this.preventDefault()},$.prototype.stop=function(){return this.stopPropagation()},$.PHASE_CURRENT=0,$.PHASE_UPWARD=1,$.PHASE_DOWNWARD=-1;var Z=Object.freeze({__proto__:null,each:O,push:G,unshift:W,indexOf:j,last:H,pop:function(t){if(t.length>0)return t.pop()},remove:q,has:Y,toArray:K,toObject:Q,join:X,falsy:J});function tt(t,e){return t!=h&&t.toString?t.toString():e!==u?e:I}function et(t){return M(t)&&tt(t).indexOf("[native code]")>=0}var rt=function(){var t=Object.create(h);return{get:function(e){return t[e]},set:function(e,r){t[e]=r},has:function(e){return e in t},keys:function(){return Object.keys(t)}}};function it(t){var e=rt();return function(r){var i=e.get(r);if(i!==u)return i;var s=t(r);return e.set(r,s),s}}function st(t){var e=rt();return function(r,i){var s=e.get(r);if(s){var a=s.get(i);if(a)return a}else s=rt(),e.set(r,s);var n=t(r,i);return s.set(i,n),n}}var at=/-([a-z])/gi,nt=/\B([A-Z])/g,ot=/^[a-z]/,ct=it((function(t){return t.replace(at,(function(t,e){return gt(e)}))})),lt=it((function(t){return t.replace(nt,(function(t,e){return"-"+yt(e)}))})),ht=it((function(t){return t.replace(ot,gt)}));function ut(t){return xt(t)?I:t.trim()}function dt(t,e,r){return D(r)?e===r?I:t.slice(e,r):t.slice(e)}function pt(t,e,r){return t.indexOf(e,r!==u?r:0)}function ft(t,e,r){return t.lastIndexOf(e,r!==u?r:t.length)}function mt(t,e){return 0===pt(t,e)}function vt(t,e){return t.charCodeAt(e||0)}function gt(t){return t.toUpperCase()}function yt(t){return t.toLowerCase()}function At(t,e){return pt(t,e)>=0}function bt(t,e){var r=Object.create(h);return O(t.split(e||","),(function(t){r[t]=c})),r}function xt(t){return!E(t)||!t.length}var wt=Object.freeze({__proto__:null,camelize:ct,hyphenate:lt,capitalize:ht,repeat:function(t,e){return X(new Array(e+1),t)},trim:ut,slice:dt,indexOf:pt,lastIndexOf:ft,startsWith:mt,endsWith:function(t,e){var r=t.length-e.length;return r>=0&&ft(t,e)===r},charAt:function(t,e){return t.charAt(e||0)},codeAt:vt,upper:gt,lower:yt,has:At,toMap:bt,falsy:xt}),kt=/\./g,Tt=/\*/g,_t=/\*\*/g,It=st((function(t,e){return t===e||mt(t,e+=g)?e.length:-1})),St=it((function(t){return pt(t,g)<0?[t]:t.split(g)}));function Pt(t,e){for(var r=E(t)?St(t):t,i=0,s=r.length-1;i<=s&&e(r[i],i,s)!==l;i++);}var Mt=st((function(t,e){return t&&e?t+g+e:t||e})),Ct=it((function(t){return At(t,"*")})),Rt=it((function(t){return new RegExp("^"+t.replace(kt,"\\.").replace(Tt,"(\\w+)").replace(_t,"([.\\w]+?)")+"$")})),Et=st((function(t,e){var r=t.match(Rt(e));return r?r[1]:u})),Dt={value:u};function Bt(t){return Object.keys(t)}function Lt(t,e){for(var r in t)if(e(t[r],r)===l)break}function Ut(t,e){return Lt(e,(function(e,r){t[r]=e})),t}function Ft(t,e){var r=t;return C(t)?e?(r=[],O(t,(function(t,i){r[i]=Ft(t,e)}))):r=t.slice():R(t)&&(r={},Lt(t,(function(t,i){r[i]=e?Ft(t,e):t}))),r}function $t(t){return M(t.get)?t.get():t}function Ot(t,e,r){var i=t;return Pt(e,(function(t,e,s){if(i==h)return i=u,l;var a=i[t],n=a!==u;a&&(a=(r||$t)(a)),e===s?n?(Dt.value=a,i=Dt):i=u:i=a})),i}function Nt(t,e){return t[e]!==u}var zt=Object.freeze({__proto__:null,keys:Bt,each:Lt,extend:Ut,merge:function(t,e){return t&&e?Ut(Ut({},t),e):t||e},copy:Ft,get:Ot,set:function(t,e,r,i){var s=t;Pt(e,(function(t,e,a){if(e===a)s[t]=r;else if(s[t])s=s[t];else{if(!i)return l;s=s[t]={}}}))},has:Nt,falsy:function(t){return!R(t)||C(t)||!Bt(t).length}}),Vt=typeof console!==p?console:h,Gt=y&&/edge|msie|trident/i.test(y.navigator.userAgent)?I:"%c",Wt=Vt?Gt?function(t,e,r){Vt.log(Gt+t,r,e)}:function(t,e){Vt.log(t,e)}:k;function jt(){var t=P.logLevel;return t>=1&&t<=5?t:S}function Ht(t){return"background-color:"+t+";border-radius:12px;color:#fff;font-size:10px;padding:3px 6px;"}var qt=Object.freeze({__proto__:null,DEBUG:1,INFO:2,WARN:3,ERROR:4,FATAL:5,debug:function(t,e){jt()<=1&&Wt(e||"Yox debug",t,Ht("#999"))},info:function(t,e){jt()<=2&&Wt(e||"Yox info",t,Ht("#2db7f5"))},warn:function(t,e){jt()<=3&&Wt(e||"Yox warn",t,Ht("#f90"))},error:function(t,e){jt()<=4&&Wt(e||"Yox error",t,Ht("#ed4014"))},fatal:function(t,e){if(jt()<=5)throw new Error("["+(e||"Yox fatal")+"]: "+t)}}),Yt=function(t){this.ns=t||l,this.listeners={}};function Kt(t,e){return t?t===e.listener:c}function Qt(t,e){var r=e.ns;return r&&t?r===t:c}Yt.prototype.fire=function(t,e,r){var i=this,s=E(t)?i.toEvent(t):t,a=i.listeners[s.type],n=c;if(a){a=a.slice();for(var o=e&&$.is(e[0])?e[0]:u,h=0,d=a.length;h<d;h++){var p=a[h];if(Qt(s.ns,p)&&Y(a,p)&&(!r||r(s,e,p))){var f=F(p.listener,p.ctx,e);if(p.num=p.num?p.num+1:1,p.num===p.max&&i.off(s.type,{ns:s.ns,listener:p.listener}),o&&(f===l?o.prevent().stop():o.isStoped&&(f=l)),f===l){n=l;break}}}}return n},Yt.prototype.on=function(t,e){var r=this.listeners,i=M(e)?{listener:e}:e;if(R(i)&&M(i.listener)){if(!E(i.ns)){var s=this.toEvent(t);i.ns=s.ns,t=s.type}G(r[t]||(r[t]=[]),i)}},Yt.prototype.off=function(t,e){var r=this,i=r.listeners;if(t){var s=r.toFilter(t,e),a=function(t,e){O(t,(function(e,r){Kt(s.listener,e)&&Qt(s.ns,e)&&t.splice(r,1)}),c),t.length||delete i[e]};s.type?i[s.type]&&a(i[s.type],s.type):s.ns&&Lt(i,a)}else r.listeners={}},Yt.prototype.has=function(t,e){var r=this.listeners,i=this.toFilter(t,e),s=c,a=function(t){return O(t,(function(t){if(Kt(i.listener,t)&&Qt(i.ns,t))return s=l})),s};return i.type?r[i.type]&&a(r[i.type]):i.ns&&Lt(r,a),!s},Yt.prototype.toEvent=function(t){var e={type:t,ns:I};if(this.ns){var r=pt(t,g);r>=0&&(e.type=dt(t,0,r),e.ns=dt(t,r+1))}return e},Yt.prototype.toFilter=function(t,e){var r;if(E((r=e?M(e)?{listener:e}:e:{}).ns))r.type=t;else{var i=this.toEvent(t);r.type=i.type,r.ns=i.ns}return r},typeof setImmediate===m&&et(setImmediate)&&setImmediate;var Xt,Jt=typeof MessageChannel===m&&et(MessageChannel)?function(t){var e=new MessageChannel;e.port1.onmessage=t,e.port2.postMessage(1)}:setTimeout,Zt=function(t){this.tasks=[],this.hooks=t||T};function te(t,e,r){var i;return function(){if(!i){var s=K(arguments);r&&F(t,u,s),i=setTimeout((function(){i=u,r||F(t,u,s)}),e)}}}Zt.shared=function(){return Xt||(Xt=new Zt)},Zt.prototype.append=function(t,e){var r=this,i=r.tasks;G(i,{fn:t,ctx:e}),1===i.length&&Jt((function(){r.run()}))},Zt.prototype.prepend=function(t,e){var r=this,i=r.tasks;W(i,{fn:t,ctx:e}),1===i.length&&Jt((function(){r.run()}))},Zt.prototype.clear=function(){this.tasks.length=0},Zt.prototype.run=function(){var t=this,e=t.tasks,r=t.hooks,i=e.length;if(i){t.tasks=[],r.beforeTask&&r.beforeTask();for(var s=0;s<i;s++)F(e[s].fn,e[s].ctx);r.afterTask&&r.afterTask()}};var ee="$vnode",re="$loading",ie="$leaving",se="$model_control",ae="$model_destroy",ne="$event_destroy",oe="$directive_hooks",ce="$directive_updating";function le(t,e,r,i,s,a,n){var o=n.name,l=n.listener;if(a){var h=a[o]||a[""];h===c?o=x:h>0&&(l=te(l,h,"click"===o||"tap"===o))}if(r){if(n.isNative){var u=r.$el;return t.on(u,o,l),function(){t.off(u,o,l)}}r.on(o,n),i[ne+s]=function(){r.off(o,n),delete i[ne+s]}}else t.on(e,o,l),i[ne+s]=function(){t.off(e,s,l),delete i[ne+s]}}var he=Object.freeze({__proto__:null,afterCreate:function(t,e){var r=e.events;if(r){var i=e.node,s=e.component,a=e.lazy,n=e.data;for(var o in r)le(t,i,s,n,o,a,r[o])}},afterUpdate:function(t,e,r){var i=e.events,s=r.events;if(i!==s){var a=e.node,n=e.component,o=e.lazy,c=e.data;if(s){var l=i||T;for(var h in s)if(!l[h]){var u=c[ne+h];u&&u()}}if(i){var d=s||T;for(var p in i){var f=i[p],m=d[p];if(m)if(f.value!==m.value){var v=c[ne+p];v&&v(),le(t,a,n,c,p,o,f)}else m.runtime&&f.runtime&&(m.runtime.execute=f.runtime.execute,f.runtime=m.runtime);else le(t,a,n,c,p,o,f)}}}},beforeDestroy:function(t,e){var r=e.events,i=e.data;if(r)for(var s in r){var a=i[ne+s];a&&a()}}});function ue(t,e){return e&&e!==c?te(t,e):t}var de={set:function(t,e){t.value=tt(e)},sync:function(t,e,r){r.set(e,t.value)}},pe={set:function(t,e){t.checked=t.value===tt(e)},sync:function(t,e,r){t.checked&&r.set(e,t.value)}},fe={set:function(t,e){t.checked=C(e)?Y(e,t.value,l):!!e},sync:function(t,e,r){var i=r.get(e);C(i)?t.checked?r.append(e,t.value):r.removeAt(e,j(i,t.value,l)):r.set(e,t.checked)}},me={set:function(t,e){for(var r=t.multiple,i=t.options,s=0,a=i.length;s<a;s++)if(r)i[s].selected=Y(e,i[s].value,l);else if(i[s].value==e)return void(t.selectedIndex=s);r||(t.selectedIndex=-1)},sync:function(t,e,r){var i=t.multiple,s=t.options;if(i){for(var a=[],n=0,o=s.length;n<o;n++)s[n].selected&&a.push(s[n].value);r.set(e,a)}else r.set(e,s[t.selectedIndex].value)}};function ve(t,e,r,i,s){var a=s.context,n=s.model,o=s.lazy,l=s.nativeAttrs,h=n.keypath,u=n.value,d=o&&(o.model||o[""]);if(r){var p=r.$model,f=ue((function(t){a.set(h,t)}),d);r.watch(p,f),i[ae]=function(){r.unwatch(p,f),delete i[ae]}}else{var m="select"===s.tag?me:de,v=x;if(m===de){var g=l&&l.type;"radio"===g?m=pe:"checkbox"===g?m=fe:d!==c&&(v=w)}var y=ue((function(){m.sync(e,h,a)}),d);t.on(e,v,y),m.set(e,u),i[se]=m,i[ae]=function(){t.off(e,v,y),delete i[ae],delete i[se]}}}var ge=Object.freeze({__proto__:null,afterCreate:function(t,e){e.model&&ve(t,e.node,e.component,e.data,e)},afterUpdate:function(t,e,r){var i=e.data,s=e.model,a=r.model;if(s){var n=e.node,o=e.component;if(a)if(s.keypath!==a.keypath)i[ae](),ve(t,n,o,i,e);else if(o)o.set(o.$model,s.value);else{var c=i[se];c&&c.set(n,s.value)}else ve(t,n,o,i,e)}else a&&i[ae]()},beforeDestroy:function(t,e){var r=e.data[ae];r&&r()}});var ye=Object.freeze({__proto__:null,afterCreate:function(t,e){var r=e.nativeAttrs;if(r){var i=e.node;for(var s in r)t.setAttr(i,s,r[s])}},afterUpdate:function(t,e,r){var i=e.nativeAttrs,s=r.nativeAttrs;if(i!==s){var a=e.node;if(i){var n=s||T;for(var o in i)n[o]!==u&&i[o]===n[o]||t.setAttr(a,o,i[o])}if(s){var c=i||T;for(var l in s)c[l]===u&&t.removeAttr(a,l)}}}});var Ae=Object.freeze({__proto__:null,afterCreate:function(t,e){var r=e.nativeStyles;if(r){var i=e.node.style;for(var s in r)t.setStyle(i,s,r[s])}},afterUpdate:function(t,e,r){var i=e.nativeStyles,s=r.nativeStyles;if(i!==s){var a=e.node.style;if(i){var n=s||T;for(var o in i)n[o]!==u&&i[o]===n[o]||t.setStyle(a,o,i[o])}if(s){var c=i||T;for(var l in s)c[l]===u&&t.removeStyle(a,l)}}}});function be(t,e,r){t[oe+r.name]=r.create(e.component||e.node,r,e)}function xe(t,e,r,i){var s=t[oe+r.name],a=s&&s[i];a&&a(r,e)}function we(t){return function(e,r){var i=r.directives;if(i){var s=r.data;for(var a in i)xe(s,r,i[a],t)}}}var ke=we("afterMount"),Te=we("beforeDestroy"),_e=Object.freeze({__proto__:null,afterCreate:function(t,e){var r=e.directives;if(r){var i=e.data;for(var s in r)be(i,e,r[s])}},beforeUpdate:function(t,e,r){var i=e.directives,s=r.directives,a=e.data;if(s){var n=i||T;for(var o in s)n[o]===u&&xe(a,e,s[o],"beforeDestroy")}if(i){var c=s||T,l=[];for(var h in i){var d=i[h];c[h]===u?be(a,e,d):d.value!==c[h].value&&(xe(a,e,d,"beforeUpdate"),l.push(d))}a[ce]=l}},afterUpdate:function(t,e,r){var i=e.data;if(i){var s=i[ce];if(s){for(var a=0,n=s.length;a<n;a++)xe(i,e,s[a],"afterUpdate");i[ce]=u}}},afterMount:ke,beforeDestroy:Te});function Ie(t,e){if(5===e.type||7===e.type){var r=e.children[0];return r?Ie(t,r):t.createComment(I)}return e.node}function Se(t,e,r,i){i?t.before(e,r,i):t.append(e,r)}function Pe(t,e,r){var i=r.node;e.node=i,e.parentNode=r.parentNode,e.text!==r.text&&t.setNodeText(i,e.text)}function Me(t){t.data&&sr(t,t.node)}function Ce(t,e){t.data&&ar(t,t.node,e)||e()}function Re(t,e,r,i){i?t.before(e,r.node,i.node):t.append(e,r.node)}function Ee(t,e){t.remove(e.parentNode,e.node)}function De(t,e){e()}function Be(t,e){for(var r=e.children,i=0,s=r.length;i<s;i++)Je(t,r[i])}function Le(t,e,r,i){nr(t,e,r.children,i.children)}function Ue(t,e){for(var r=e.children,i=0,s=r.length;i<s;i++)rr(t,r[i])}function Fe(t,e,r,i){for(var s=r.children,a=0,n=s.length;a<n;a++)tr(t,e,s[a],i)}function $e(t,e){for(var r=e.children,i=0,s=r.length;i<s;i++)ir(t,r[i])}var Oe={create:function(t,e){e.node=t.createText(e.text)},update:Pe,destroy:k,insert:Re,remove:Ee,enter:k,leave:De},Ne={create:function(t,e){e.node=t.createComment(e.text)},update:Pe,destroy:k,insert:Re,remove:Ee,enter:k,leave:De},ze=[ye,Ae,Object.freeze({__proto__:null,afterCreate:function(t,e){var r=e.ref;if(r){var i=e.context,s=i.$refs;s||(s=i.$refs={}),s[r]=e.component||e.node}},beforeUpdate:function(t,e,r){var i=e.ref,s=r.ref;if(i||s){var a=e.context,n=e.component||e.node,o=a.$refs;i?s?i!==s&&(o?o[i]===n&&delete o[i]:o=a.$refs={},o[i]=n):(o||(o=a.$refs={}),o[i]=n):o&&s&&o[s]===n&&delete o[s]}},beforeDestroy:function(t,e){var r=e.ref;if(r){var i=e.context.$refs,s=e.component||e.node;i&&i[r]===s&&delete i[r]}}}),he,ge,_e],Ve=ze.length;function Ge(t,e){for(var r=0;r<Ve;r++){var i=ze[r][t];i&&i.apply(u,e)}}var We={create:function(t,e){var r=e.node=t.createElement(e.tag,e.isSvg);e.children?Ze(t,r,e.children):e.text?t.setElementText(r,e.text):e.html&&t.setHtml(r,e.html),e.isPure||(e.data={}),Ge("afterCreate",[t,e])},update:function(t,e,r){var i=r.node;e.node=i,e.parentNode=r.parentNode,e.data=r.data,!e.isPure&&r.isPure&&(e.data={}),Ge("beforeUpdate",[t,e,r]);var s=e.text,a=e.html,n=e.children,o=r.text,c=r.html,l=r.children;E(s)?(l&&er(t,l),s!==o&&t.setElementText(i,s)):E(a)?(l&&er(t,l),a!==c&&t.setHtml(i,a)):n?l?n!==l&&nr(t,i,n,l):((o||c)&&t.setElementText(i,I),Ze(t,i,n)):l?er(t,l):(o||c)&&t.setElementText(i,I),Ge("afterUpdate",[t,e,r])},destroy:function(t,e){if(!e.isPure){Ge("beforeDestroy",[t,e]);var r=e.children;if(r)for(var i=0,s=r.length;i<s;i++)rr(t,r[i])}},insert:Re,remove:Ee,enter:Me,leave:Ce},je={create:function(t,e){var r=e.data={},i=u;e.tag&&e.context.loadComponent(e.tag,(function(s){Nt(r,re)?r[re]&&(r[ee]&&(e=r[ee],delete r[ee]),Xe(t,e,s),e.operator.enter(e)):i=s})),e.node=t.createComment(f),i?Xe(t,e,i):r[re]=c},update:function(t,e,r){var i=r.data;if(e.data=i,e.node=r.node,e.parentNode=r.parentNode,e.component=r.component,i[re])i[ee]=e;else{Ge("beforeUpdate",[t,e,r]);var s=e.component,a=e.slots;if(s){var n=e.props;a&&(n=Ut(n||{},a)),n&&s.forceUpdate(n)}Ge("afterUpdate",[t,e,r])}},destroy:function(t,e){var r=e.component;r?(Ge("beforeDestroy",[t,e]),r.destroy(),e.shadow=r.$vnode,e.component=u):e.data[re]=l},insert:function(t,e,r,i){var s=r.shadow;s?(s.operator.insert(t,e,s,i),s.parentNode=e):Re(t,e,r,i)},remove:function(t,e){var r=e.shadow;r?(r.operator.remove(t,r),r.parentNode=u):Ee(t,e)},enter:function(t){var e=t.shadow;e&&(t.transition?sr(t,e.node):e.operator.enter(e))},leave:function(t,e){var r=t.shadow;if(r){if(!t.transition)return void r.operator.leave(r,e);if(ar(t,r.node,e))return}e()}},He={create:function(t,e){Be(t,e),e.node=Ie(t,e)},update:function(t,e,r){var i=r.parentNode;e.node=r.node,e.parentNode=i,Le(t,i,e,r)},destroy:Ue,insert:Fe,remove:$e,enter:k,leave:De},qe={create:function(t,e){var r=u;e.to&&(r=t.find(e.to)),r||(r=t.getBodyElement()),e.target=r,e.node=t.createComment(I);for(var i=e.children,s=0,a=i.length;s<a;s++)Je(t,i[s]),tr(t,r,i[s])},update:function(t,e,r){var i=r.target;e.node=r.node,e.parentNode=r.parentNode,e.target=i,Le(t,i,e,r)},destroy:function(t,e){for(var r=e.children,i=0,s=r.length;i<s;i++)rr(t,r[i]),ir(t,r[i])},insert:Re,remove:Ee,enter:k,leave:De},Ye={create:function(t,e){Be(t,e),e.data={},e.node=Ie(t,e),Ge("afterCreate",[t,e])},update:function(t,e,r){var i=r.parentNode;e.node=r.node,e.parentNode=i,e.data=r.data,Ge("beforeUpdate",[t,e,r]),Le(t,i,e,r),Ge("afterUpdate",[t,e,r])},destroy:function(t,e){Ge("beforeDestroy",[t,e]),Ue(t,e)},insert:Fe,remove:$e,enter:Me,leave:Ce};function Ke(t,e){return t.type===e.type&&t.tag===e.tag&&t.key===e.key}function Qe(t,e,r){for(var i,s,a;e<=r;)(s=t[e])&&(a=s.key)&&(i||(i={}),i[a]=e),e++;return i||T}function Xe(t,e,r){var i=e.data,s=(e.parent||e.context).createComponent(r,e);return e.component=s,e.shadow=s.$vnode,i[re]=l,Ge("afterCreate",[t,e]),s}function Je(t,e){e.node||e.operator.create(t,e)}function Ze(t,e,r,i,s,a){for(var n,o=i||0,c=s!==u?s:r.length-1;o<=c;)Je(t,n=r[o]),tr(t,e,n,a),o++}function tr(t,e,r,i){var s=r.operator;s.insert(t,e,r,i),r.parentNode=e,Ge("afterMount",[t,r]),s.enter(r)}function er(t,e,r,i){for(var s,a=r||0,n=i!==u?i:e.length-1;a<=n;)(s=e[a])&&(rr(t,s),ir(t,s)),a++}function rr(t,e){e.operator.destroy(t,e)}function ir(t,e){var r=e.operator;r.leave(e,(function(){r.remove(t,e),e.parentNode=u}))}function sr(t,e){var r=t.context,i=t.transition,s=t.data[ie];if(s&&s(),i){var a=i.enter;a&&a.call(r,e)}}function ar(t,e,r){var i=t.context,s=t.transition,a=t.data,n=a[ie];if(n&&n(),s){var o=s.leave;if(o)return o.call(i,e,a[ie]=function(){a[ie]&&(r(),a[ie]=u)}),c}}function nr(t,e,r,i){for(var s,a,n=0,o=r.length-1,c=r[n],l=r[o],h=0,d=i.length-1,p=i[h],f=i[d];h<=d&&n<=o;)c?l?p?f?Ke(c,p)?(or(t,c,p),c=r[++n],p=i[++h]):Ke(l,f)?(or(t,l,f),l=r[--o],f=i[--d]):Ke(l,p)?(or(t,l,p),Se(t,e,p.node,t.next(f.node)),l=r[--o],p=i[++h]):Ke(c,f)?(or(t,c,f),Se(t,e,f.node,p.node),c=r[++n],f=i[--d]):(s||(s=Qe(i,h,d)),(a=c.key?s[c.key]:u)!==u?(cr(t,c,i[a]),i[a]=u):Je(t,c),tr(t,e,c,p),c=r[++n]):f=i[--d]:p=i[++h]:l=r[--o]:c=r[++n];h>d?Ze(t,e,r,n,o,r[o+1]):n>o&&er(t,i,h,d)}function or(t,e,r){e!==r&&e.operator.update(t,e,r)}function cr(t,e,r){if(e!==r){if(!Ke(e,r)){var i=r.parentNode;return Je(t,e),void(i&&(tr(t,i,e,r),rr(t,r),ir(t,r)))}or(t,e,r)}}function lr(t){var e=t.children;return{type:t.type,data:t.data,node:t.node,parentNode:t.parentNode,target:t.target,shadow:t.shadow,parent:t.parent,component:t.component,context:t.context,operator:t.operator,tag:t.tag,isSvg:t.isSvg,isStatic:t.isStatic,isPure:t.isPure,slots:t.slots,props:t.props,nativeAttrs:t.nativeAttrs,nativeStyles:t.nativeStyles,directives:t.directives,events:t.events,lazy:t.lazy,transition:t.transition,model:t.model,to:t.to,ref:t.ref,key:t.key,text:t.text,html:t.html,children:e?e.map(lr):e}}function hr(t,e){return tt(e)}function ur(t,e,r){var i=e===c||e===d||e===t;return i===r?u:i?d:"false"}bt("abstract,goto,native,static,enum,implements,package,super,byte,export,import,private,protected,public,synchronized,char,extends,int,throws,class,final,interface,transient,yield,let,const,float,double,boolean,long,short,volatile,default");function dr(t){var e=t.input,r=t.getter;t.value=e?r.apply(u,e):r()}var pr=function(){this.map={},this.list=[]};pr.prototype.add=function(t,e){var r=this.map[t.id]||(this.map[t.id]={});r[e]||(r[e]=t,this.list.push([t,e]))},pr.prototype.watch=function(t){var e=this.list;if(e)for(var r=0,i=e.length;r<i;r++)e[r][0].watch(e[r][1],t)},pr.prototype.unwatch=function(t){var e=this.list;if(e)for(var r=0,i=e.length;r<i;r++)e[r][0].unwatch(e[r][1],t)};var fr=function(t,e,r,i,s,a,n,o){var c=this;c.status=1,c.keypath=t,c.cache=e,c.input=i,c.output=s,c.setter=n,c.getter=a,c.onChange=o,c.watcherOptions={sync:r,watcher:function(){c.refresh()}}};fr.prototype.get=function(){var t=this,e=t.status,r=t.watcherOptions;if(t.cache){if(2!==e)if(t.staticDeps)dr(t);else{var i=t.dynamicDeps;i&&i.unwatch(r.watcher),t.dynamicDeps=u;var s=fr.current;fr.current=t,dr(t),fr.current=s,(i=t.dynamicDeps)&&i.watch(r)}}else dr(t);return 2!==e&&(t.status=2),function(t){var e=t.value,r=t.output;return r?r(e):e}(t)},fr.prototype.set=function(t){var e=this.setter;e?e(t):M(t)&&(this.getter=t,this.refresh())},fr.prototype.refresh=function(){var t=this.value;this.status=3;var e=this.get();e!==t&&this.onChange(this.keypath,e,t)},fr.prototype.addStaticDeps=function(t,e){for(var r=this.staticDeps||(this.staticDeps=new pr),i=0,s=e.length;i<s;i++)r.add(t,e[i]);r.watch(this.watcherOptions)},fr.prototype.addDynamicDep=function(t,e){(this.dynamicDeps||(this.dynamicDeps=new pr)).add(t,e)};var mr=function(t,e,r){this.keypath=t,this.scopeValue=e,this.scopeKey=r};function vr(t,e,r,i,s,a,n,o,h,d){var p=[new mr("",r)],f=[],m=function(t,e,r,i){if(t[e])t[e][r]=i;else{var s={};s[r]=i,t[e]=s}},v=function(t){var e={};return function(t,e){for(var r=t.split(";"),i=0,s=r.length;i<s;i++){var a=r[i],n=a.indexOf(":");if(n>0){var o=ut(a.substring(0,n)),c=ut(a.substring(n+1));o&&c&&e(ct(o),c)}}}(t,(function(t,r){e[t]=r})),e},y=function(t){if(C(t)){for(var e={},r=0,i=t.length;r<i;r++){var s=y(t[r]);if(s)for(var a in s)e[a]=s[a]}return e}return R(t)?t:E(t)?v(t):void 0},A=function(t,e){return e},b=function(t){return{keypath:t.keypath,value:t.value}},x=function(e,r,i){return function(s,a,n){i&&s.phase===$.PHASE_DOWNWARD||(e===s.type&&r===s.ns||((s=new $(e,n?s.originalEvent:s)).ns=r),t.fire(s,a))}},w=function(t,e,r){return function(i,s){r&&i.phase===$.PHASE_DOWNWARD||I(t,e?e.execute(i,s):s?[i,s]:[i])===l&&i.prevent().stop()}},k=function(t,e,r,i,s,a,n,o){return{key:t,value:e,name:r,ns:i,isNative:o,runtime:a,listener:w(s,a,n)}},T=function(t,e,r,i,s,a,n,o){return{key:t,value:e,name:r,ns:i,isNative:o,listener:x(s,a,n)}},_=function(t,e,r,i,s){return{ns:"o",name:e,value:i,modifier:r,create:s}},I=function(e,r){var i=t[e];return r&&r.length>0?F(i,t,r):t[e]()},S=function(t,e,r){if(R(r))for(var i in r)m(t,e,i,r[i])},P=function(t,e,r){var i=t.keypath,s=t.value,a=0,n=!!i,o=p,c=H(p).keypath;if(C(s)){a=s.length;for(var l=0;l<a;l++)n&&(c=i+g+l,(p=o.slice()).push(new mr(c,s,l))),e(p,s[l],c,a,l)}else if(R(s)){var h=Bt(s);a=h.length;for(var u=0;u<a;u++){var d=h[u];n&&(c=i+g+d,(p=o.slice()).push(new mr(c,s,d))),e(p,s[d],c,a,d)}}p!==o&&(p=o),r&&0===a&&r()},D=function(t,e,r,i,s){var a=0,n=0,o=H(p).keypath;if(t<e)if(n=e-t,r)for(var c=t;c<=e;c++)i(p,c,o,n,a++);else for(var l=t;l<e;l++)i(p,l,o,n,a++);else if(n=t-e,r)for(var h=t;h>=e;h--)i(p,h,o,n,a++);else for(var u=t;u>e;u--)i(p,u,o,n,a++);s&&0===n&&s()},B=function(t,e){d(t);var i=r[t];if(i)return i instanceof fr?e?i.getter(e):i.get():i},L=function(t,e,r,i,s,a){for(var n;e>=0;){var o=t[e],c=o.getKeypath(r),l=Ot(o.getScope(),i),h=N(l?l.value:u,c);if(l)return h;if(n||(n=h),!(s&&e>0))break;e--}return a?N(a):n},U=function(t,e,r,i){return L(t,e,r,[r],c,i)},O=function(t,e){var r=Ot(t,e);return N(r?r.value:u)},N=function(t,e){return t&&M(t.get)&&(t=t.get()),Dt.keypath=e,Dt.value=t,e!==u&&d(e),Dt};return function(e,r,c,l){e(v,y,A,b,k,T,_,S,P,D,B,m,hr,ur,L,U,O,N,tt,Oe,Ne,We,je,He,qe,Ye,t,qt,i,s,a,n,o,h,p,r,c,l)}(e,r,"",f),f[0]}mr.prototype.getScope=function(){var t=this.scopeValue,e=this.scopeKey;return e!==u?t[e]:t},mr.prototype.getKeypath=function(t){var e=this.keypath;return e?e+g+t:t};var gr=0,yr="textContent",Ar=yr,br="innerHTML",xr="cssFloat",wr=function(t,e,r){t.addEventListener(e,r,l)},kr=function(t,e,r){t.removeEventListener(e,r,l)},Tr=function(t,e){t.classList.add(e)},_r=function(t,e){t.classList.remove(e)};if(A){var Ir=A.documentElement;xr in Ir.style||(xr="styleFloat"),Ir.classList||(Tr=function(t,e){var r=t.className.split(Sr);Y(r,e)||(G(r,e),t.className=X(r,Sr))},_r=function(t,e){var r=t.className.split(Sr);q(r,e)&&(t.className=X(r,Sr))}),Ir=u}var Sr=" ",Pr="$event",Mr="compositionstart",Cr="compositionend",Rr="http://www.w3.org/2000/svg",Er={},Dr={},Br={},Lr={};function Ur(t){return A.createComment(t)}function Fr(t,e){t.appendChild(e)}Lr[w]={on:function(t,e){var r=l;Vr(t,Mr,e[Mr]=function(){r=c}),Vr(t,Cr,e[Cr]=function(t){r=l,e(t)}),wr(t,b,e[b]=function(t){r||e(t)})},off:function(t,e){Gr(t,Mr,e[Mr]),Gr(t,Cr,e[Cr]),kr(t,b,e[b]),e[Mr]=e[Cr]=e[b]=u}};var $r=function(t){var e=A.querySelector(t);if(e)return e};function Or(t){return t[br]}var Nr=Tr,zr=_r;function Vr(t,e,r){var i=t[Pr]||(t[Pr]=++gr),s=Dr[i]||(Dr[i]={}),a=Br[i]||(Br[i]={}),n=a[e]||(a[e]=[]);if(!s[e]){var o=Lr[e],l=function(t){var r;$.is(t)?(r=t).type!==e&&(r.type=e):r=new $(e,function(t){return t}(t));for(var i=n.slice(),s=0,a=i.length;s<a;s++)i[s](r,u,c)};s[e]=l,Er[i]?Er[i]++:Er[i]=1,o?o.on(t,l):wr(t,e,l)}n.push(r)}function Gr(t,e,r){var i=t[Pr],s=Dr[i],a=Br[i],n=a&&a[e];if(n&&(q(n,r),n.length||(n=u,delete a[e])),s&&s[e]&&!n){var o=Lr[e],c=s[e];o?o.off(t,c):kr(t,e,c),delete s[e],Er[i]&&Er[i]--}Er[i]||(t[Pr]=u,delete Dr[i],delete Br[i])}var Wr=Object.freeze({__proto__:null,getBodyElement:function(){return A.body},createElement:function(t,e){return e?A.createElementNS(Rr,t):A.createElement(t)},createText:function(t){return A.createTextNode(t)},createComment:Ur,getAttr:function(t,e){var r=t.getAttribute(e);if(r!=h)return r},setAttr:function(t,e,r){r===u?t.removeAttribute(e):t.setAttribute(e,r)},removeAttr:function(t,e){t.removeAttribute(e)},setStyle:function(t,e,r){r!=h?t["float"===e?xr:e]=r:t[e]=I},removeStyle:function(t,e){t[e]=I},before:function(t,e,r){t.insertBefore(e,r)},append:Fr,replace:function(t,e,r){t.replaceChild(e,r)},remove:function(t,e){t.removeChild(e)},parent:function(t){var e=t.parentNode;if(e)return e},next:function(t){var e=t.nextSibling;if(e)return e},find:$r,tag:function(t){if(1===t.nodeType)return yt(t.tagName)},getNodeText:function(t){return t[yr]},setNodeText:function(t,e){t[yr]=e},getElementText:function(t){return t[Ar]},setElementText:function(t,e){t[Ar]=e},getHtml:Or,setHtml:function(t,e){t[br]=e},addClass:Nr,removeClass:zr,on:Vr,off:Gr,addSpecialEvent:function(t,e){Lr[t]=e}});function jr(t,e){return L(t)?+t:e!==u?e:0}function Hr(t,e){if(t==h||e===I)return t;var r=Ot(t,e);return r?r.value:void 0}function qr(t,e,r,i,s,a){var n=function(e,r,n){if(r!==n){for(var o=Mt(t,e),c=0;c<s;c++){var l=i[c];Et(o,l)!==u&&a(l,o,r,n)}qr(o,r,n,i,s,a)}};(function(t,e,r){var i=E(t),s=E(e);if(i||s)return r(v,i?t.length:u,s?e.length:u),c})(e,r,n)||function(t,e,r){var i=C(t),s=C(e);if(i||s){var a=i?t.length:u,n=s?e.length:u;r(v,a,n);for(var o=0,l=Math.max(a||0,n||0);o<l;o++)r(I+o,i?t[o]:u,s?e[o]:u);return c}}(e,r,n)||function(t,e,r){var i=R(t),s=R(e);if(i||s){var a=rt(),n=i?t:T,o=s?e:T;if(i)for(var l in n){var h=n[l];h!==o[l]&&(a.set(l,c),r(l,h,o[l]))}if(s)for(var d in o){var p=o[d];a.get(d)===u&&p!==n[d]&&r(d,n[d],p)}}}(e,r,n)}function Yr(t,e,r,i,s,a){var n;for(var o in i)if(Ct(o))Et(t,o)!==u?a(o,t,e,r):s&&(n?n.push(o):n=[o]);else{var c=It(o,t);if(c>=0){var l=dt(o,c),h=Hr(e,l),d=Hr(r,l);h!==d&&a(o,o,h,d)}}n&&qr(t,e,r,n,n.length,a)}var Kr={watcher:k};function Qr(t,e){return M(t)?(Kr.watcher=t,Kr.immediate=e===c,Kr):t}var Xr=0,Jr=function(t,e,r){var i=this;i.id=Xr++,i.data=t||{},i.context=e||i,i.nextTask=r||new Zt,i.syncEmitter=new Yt,i.asyncEmitter=new Yt,i.asyncOldValues={},i.asyncKeypaths={},i.onComputedChange=function(t,e,r){i.diff(t,e,r)}};Jr.prototype.get=function(t,e,r){var i=this.data,s=fr.current;if(t===I)return i;s&&!r&&s.addDynamicDep(this,t);var a=Ot(i,t);return a?a.value:e},Jr.prototype.set=function(t,e){var r=this,i=r.data,s=function(t,e){var s,a=r.get(t);e!==a&&(Pt(t,(function(t,r,a){if(0!==r)s&&(r===a?s[t]=e:s=s[t]||(s[t]={}));else{var n=i[t];n&&n instanceof fr?0===a?n.set(e):s=n.get():0===a?i[t]=e:s=i[t]||(i[t]={})}})),r.diff(t,e,a))};if(E(t))s(t,e);else if(R(t))for(var a in t)s(a,t[a])},Jr.prototype.diff=function(t,e,r){var i=this,s=i.syncEmitter,a=i.asyncEmitter,n=i.asyncOldValues,o=i.asyncKeypaths,l=36!==vt(t);Yr(t,e,r,s.listeners,l,(function(t,e,r,i){s.fire({type:t,ns:I},[r,i,e])})),Yr(t,e,r,a.listeners,l,(function(t,e,r,s){for(var l=a.listeners[t],h=0,u=l.length;h<u;h++)l[h].count++;o[e]||(n[e]=s,o[e]={}),o[e][t]=c,i.pending||(i.pending=c,i.nextTask.append((function(){i.pending&&i.diffAsync()})))}))},Jr.prototype.diffAsync=function(){var t=this,e=t.asyncEmitter,r=t.asyncOldValues,i=t.asyncKeypaths;t.pending=u,t.asyncOldValues={},t.asyncKeypaths={};var s=function(s){var a=[t.get(s),r[s],s],n=i[s],o=a[0]!==a[1],c=function(t,e,r){if(r.count)return r.count--,o};for(var l in n)e.fire({type:l,ns:I},a,c)};for(var a in r)s(a)},Jr.prototype.addComputed=function(t,e){var r,i,s,a,n,o=this,l=o.context,h=c,u=c;if(M(e))s=e.bind(l);else if(R(e)){var d=e;B(d.cache)&&(h=d.cache),B(d.sync)&&(u=d.sync),C(d.deps)&&(r=d.deps),J(d.input)||(i=d.input),M(d.output)&&(n=d.output),M(d.get)&&(s=d.get.bind(l)),M(d.set)&&(a=d.set.bind(l))}if(s){var p=new fr(t,h,u,i,n,s,a,o.onComputedChange);return h&&r&&p.addStaticDeps(o,r),o.data[t]=p}},Jr.prototype.removeComputed=function(t){delete this.data[t]},Jr.prototype.watch=function(t,e,r){var i=this,s=i.context,a=i.syncEmitter,n=i.asyncEmitter,o=function(t,e){var r=e.sync?a:n,o={ns:I,listener:e.watcher,ctx:s,count:0};e.once&&(o.max=1),r.on(t,o),e.immediate&&e.watcher.call(s,i.get(t),u,t)};if(E(t))o(t,Qr(e,r));else for(var c in t)o(c,Qr(t[c]))},Jr.prototype.unwatch=function(t,e){this.syncEmitter.off(t,e),this.asyncEmitter.off(t,e)},Jr.prototype.toggle=function(t){var e=!this.get(t);return this.set(t,e),e},Jr.prototype.increase=function(t,e,r){var i=jr(this.get(t),0)+(e||1);if(!D(r)||i<=r)return this.set(t,i),i},Jr.prototype.decrease=function(t,e,r){var i=jr(this.get(t),0)-(e||1);if(!D(r)||i>=r)return this.set(t,i),i},Jr.prototype.insert=function(t,e,r){var i=this.get(t),s=(i=C(i)?i.slice():[]).length;if(r===c||r===s)i.push(e);else if(r===l||0===r)i.unshift(e);else{if(!(r>0&&r<s))return;i.splice(r,0,e)}return this.set(t,i),c},Jr.prototype.append=function(t,e){return this.insert(t,e,c)},Jr.prototype.prepend=function(t,e){return this.insert(t,e,l)},Jr.prototype.removeAt=function(t,e){var r=this.get(t);if(C(r)&&e>=0&&e<r.length)return(r=r.slice()).splice(e,1),this.set(t,r),c},Jr.prototype.remove=function(t,e){var r=this.get(t);if(C(r)&&q(r=r.slice(),e))return this.set(t,r),c},Jr.prototype.copy=function(t,e){return Ft(t,e)},Jr.prototype.destroy=function(){var t=this;t.syncEmitter.off(),t.asyncEmitter.off(),t.nextTask.clear(),t.data={}};var Zr=function(){this.$emitter=new Yt};Zr.prototype.fire=function(t,e,r){this.$emitter.fire(e,[t,r])},Zr.prototype.on=function(t,e){return this.$emitter.on(t,e),this},Zr.prototype.off=function(t,e){return this.$emitter.off(t,e),this};var ti={},ei={},ri={},ii={},si=/^[#.][-\w+]+$/,ai=new Zr,ni="$$template",oi={watcher:function(t){this.update(t,this.$vnode)},sync:c},ci=function(t){return t?t.map(lr):t},li=function(r){var i=this,s=r||T;i.$emitter=new Yt(c),s.events&&i.on(s.events),s.parent&&(i.$parent=s.parent);var a=s[t];a&&a.call(i,s),ai.fire(i,t,{options:s});var n=s.data,o=s.props,h=s.vnode,d=s.propTypes,p=s.computed,v=s.methods,g=s.watchers,y=s.extensions;i.$options=s,y&&Ut(i,y);var A=o?Ft(o):{};d&&Lt(d,(function(t,e){var r=A[e];r===u&&(r=t.value)!==u&&(A[e]=t.type===m?r:M(r)?r():r)}));var b=i.$observer=new Jr(A,i,i.$nextTask=new Zt);p&&Lt(p,(function(t,e){b.addComputed(e,t)}));var x=M(n)?n.call(i,r):n;R(x)&&Lt(x,(function(t,e){A[e]=t})),v&&Lt(v,(function(t,e){i[e]=t}));var w=u,k=s.el,_=s.root,S=s.model,P=s.context,C=s.replace,D=s.template,B=s.transitions,L=s.components,U=s.directives,F=s.filters,$=s.slots;if(S&&(i.$model=S),E(D)&&si.test(D)&&(w=$r(D))&&(D=Or(w),w=u),k){if(E(k)){var O=k;si.test(O)&&(w=$r(O))}else w=k;C||Fr(w,w=Ur(I))}if(_&&(i.$root=_),P&&(i.$context=P),mi(i,"transition",B),mi(i,f,L),mi(i,"directive",U),mi(i,"filter",F),D){if(g&&b.watch(g),$)for(var N in $)b.addComputed(N,{get:$[N],input:[i],output:ci});b.addComputed(ni,{get:i.render,sync:l}),b.watch(ni,oi);var z=s[e];return z&&z.call(i),ai.fire(i,e),i.$template=E(D)?li.compile(D):D,h||(h=function(t,e,r){var i={context:r,node:e,parentNode:t.parent(e)};switch(e.nodeType){case 1:i.data={},i.tag=t.tag(e),i.type=3,i.operator=We;break;case 3:i.isPure=c,i.text=e.nodeValue,i.type=1,i.operator=Oe;break;case 8:i.isPure=c,i.text=e.nodeValue,i.type=2,i.operator=Ne}return i}(Wr,w,i)),void i.update(i.get(ni),h)}g&&b.watch(g);var V=s[e];V&&V.call(i),ai.fire(i,e)};li.define=function(t){return t},li.use=function(t){t.install(li)},li.nextTick=function(t,e){Zt.shared().append(t,e)},li.compile=function(t,e){return t},li.directive=function(t,e){if(E(t)&&!e)return di(ti,t);fi(ti,t,e)},li.transition=function(t,e){if(E(t)&&!e)return di(ei,t);fi(ei,t,e)},li.component=function(t,e){if(E(t)&&!e)return di(ri,t);fi(ri,t,e)},li.filter=function(t,e){if(E(t)&&!e)return di(ii,t);fi(ii,t,e)},li.method=function(t,e){if(E(t)&&!e)return hi[t];fi(hi,t,e)},li.prototype.get=function(t,e){return this.$observer.get(t,e)},li.prototype.set=function(t,e){var r=this.$observer;r&&r.set(t,e)},li.prototype.on=function(t,e){return gi(this,t,e),this},li.prototype.once=function(t,e){return gi(this,t,e,c),this},li.prototype.off=function(t,e){return this.$emitter.off(t,e),this},li.prototype.fire=function(t,e,r){var i,s=this,a=s.$emitter,n=s.$parent,o=s.$children;if($.is(t))i=t;else if(E(t))i=new $(t);else{var l=t;(i=new $(l.type)).ns=l.ns}if(i.ns===u){var h=a.toEvent(i.type);i.type=h.type,i.ns=h.ns}i.target||(i.target=s);var d,p=[i];return R(e)?G(p,e):e===c&&(r=c),(d=r&&i.target===s?c:a.fire(i,p))&&(r?o&&(i.phase=$.PHASE_DOWNWARD,O(o,(function(t){return d=t.fire(i,e,c)}))):n&&(i.phase=$.PHASE_UPWARD,d=n.fire(i,e))),d},li.prototype.watch=function(t,e,r){return this.$observer.watch(t,e,r),this},li.prototype.unwatch=function(t,e){return this.$observer.unwatch(t,e),this},li.prototype.loadComponent=function(t,e){ui(this.$components,t,e)||ui(ri,t,e)},li.prototype.createComponent=function(t,e){var r=this;(t=Ft(t)).root=r.$root||r,t.parent=r,t.context=e.context,t.vnode=e,t.replace=c;var i=e.props,s=e.slots,a=e.model;if(a){i||(i={});var n=t.model||"value";i[n]=a.value,t.model=n}i&&(t.props=i),s&&(t.slots=s);var o=new li(t);G(r.$children||(r.$children=[]),o);var l=o.$el;return l&&(e.node=l),o},li.prototype.directive=function(t,e){var r=this.$directives;if(E(t)&&!e)return di(r,t,li.directive);fi(r||(this.$directives={}),t,e)},li.prototype.transition=function(t,e){var r=this.$transitions;if(E(t)&&!e)return di(r,t,li.transition);fi(r||(this.$transitions={}),t,e)},li.prototype.component=function(t,e){var r=this.$components;if(E(t)&&!e)return di(r,t,li.component);fi(r||(this.$components={}),t,e)},li.prototype.filter=function(t,e){var r=this.$filters;if(E(t)&&!e)return di(r,t,li.filter);fi(r||(this.$filters={}),t,e)},li.prototype.forceUpdate=function(t){var e=this,r=e.$options,i=e.$vnode,s=e.$nextTask;if(i){if(t){var a=r.beforePropsUpdate;a&&a.call(e,t),e.set(t)}s.run(),t||i!==e.$vnode||e.update(e.get(ni),i)}},li.prototype.render=function(){var t=this,e=t.$options,s=t.$observer,a=s.data,n=e[r],o=e[i];n&&n.call(t,a),ai.fire(t,r,{props:a});var c=vr(t,t.$template,a,t.$filters,ii,t.$directives,ti,t.$transitions,ei,(function(t){var e=fr.current;e&&e.addDynamicDep(s,t)}));return o&&o.call(t),ai.fire(t,i),c},li.prototype.update=function(t,e){var r,i=this,n=i.$vnode,o=i.$options;if(n){var c=o[a];c&&c.call(i),ai.fire(i,a),cr(Wr,t,e),r="afterUpdate"}else{var l=o[s];l&&l.call(i),ai.fire(i,s),cr(Wr,t,e),i.$el=t.node,r="afterMount"}i.$vnode=t,li.nextTick((function(){if(i.$vnode){var t=o[r];t&&t.call(i),ai.fire(i,r)}}))},li.prototype.checkProp=function(t,e){},li.prototype.destroy=function(){var t=this,e=t.$parent,r=t.$options,i=t.$emitter,s=t.$observer,a=r[n];a&&a.call(t),ai.fire(t,n),e&&e.$children&&q(e.$children,t);var c,l,h,d=t.$vnode;d&&(h=!e,rr(c=Wr,l=d),h&&ir(c,l)),s.destroy();var p=r[o];p&&p.call(t),ai.fire(t,o),i.off(),t.$el=u},li.prototype.nextTick=function(t){this.$nextTask.append(t,this)},li.prototype.toggle=function(t){return this.$observer.toggle(t)},li.prototype.increase=function(t,e,r){return this.$observer.increase(t,e,r)},li.prototype.decrease=function(t,e,r){return this.$observer.decrease(t,e,r)},li.prototype.insert=function(t,e,r){return this.$observer.insert(t,e,r)},li.prototype.append=function(t,e){return this.$observer.append(t,e)},li.prototype.prepend=function(t,e){return this.$observer.prepend(t,e)},li.prototype.removeAt=function(t,e){return this.$observer.removeAt(t,e)},li.prototype.remove=function(t,e){return this.$observer.remove(t,e)},li.prototype.copy=function(t,e){return this.$observer.copy(t,e)},li.version="1.0.0-alpha.408",li.is=U,li.dom=Wr,li.array=Z,li.object=zt,li.string=wt,li.logger=qt,li.Event=$,li.Emitter=Yt,li.lifeCycle=ai,li.config=P;var hi=li.prototype;function ui(t,e,r){if(t&&t[e]){var i=t[e];if(M(i)){t[e]=[r];var s=function(r){var i=t[e],s=r.default||r;t[e]=s,O(i,(function(t){t(s)}))},a=i(s);a&&a.then(s)}else C(i)?G(i,r):r(i);return c}}function di(t,e,r){return t&&t[e]?t[e]:r?r(e):void 0}function pi(t,e,r,i){i&&i.format&&(r=i.format(r)),t[e]=r}function fi(t,e,r,i){E(e)?pi(t,e,r,i):Lt(e,(function(e,r){pi(t,r,e,i)}))}function mi(t,e,r){M(r)?t[e](r.call(t)):R(r)&&t[e](r)}function vi(t,e,r){t.$emitter.on(e.type,{listener:e.listener,ns:e.ns,max:r?1:-1,ctx:t})}function gi(t,e,r,i){var s=t.$emitter;E(e)?vi(t,s.toFilter(e,r),i):C(e)?O(e,(function(e){vi(t,e,i)})):Lt(e,(function(e,r){vi(t,s.toFilter(r,e),i)}))}return Q(Bt(hi)),li}()},49763:(t,e,r)=>{t.exports=r(86450)},66615:(t,e,r)=>{t.exports=r(18402)},29550:(t,e,r)=>{t.exports=r(37867)},94870:(t,e,r)=>{t.exports=r(19709)},11393:(t,e,r)=>{t.exports=r(50530)},50314:(t,e,r)=>{t.exports=r(25619)},2457:(t,e,r)=>{t.exports=r(96796)},5496:(t,e,r)=>{t.exports=r(40587)},96319:(t,e,r)=>{t.exports=r(22616)},26327:(t,e,r)=>{t.exports=r(70228)},71426:(t,e,r)=>{t.exports=r(99617)},52730:(t,e,r)=>{t.exports=r(64055)},86226:(t,e,r)=>{t.exports=r(24525)},8628:(t,e,r)=>{t.exports=r(76343)},64007:(t,e,r)=>{t.exports=r(77852)},15413:(t,e,r)=>{t.exports=r(21618)},56712:(t,e,r)=>{t.exports=r(61785)},48079:(t,e,r)=>{t.exports=r(98894)},73363:(t,e,r)=>{t.exports=r(79528)},78010:(t,e,r)=>{t.exports=r(465)},57855:(t,e,r)=>{t.exports=r(14106)},18979:(t,e,r)=>{t.exports=r(6686)},31721:(t,e,r)=>{t.exports=r(82990)},129:(t,e,r)=>{t.exports=r(81086)},385:(t,e,r)=>{t.exports=r(40026)},11265:(t,e,r)=>{t.exports=r(34598)},6707:(t,e,r)=>{t.exports=r(49124)},85569:(t,e,r)=>{t.exports=r(76660)},74707:(t,e,r)=>{t.exports=r(60075)},54810:(t,e,r)=>{t.exports=r(18801)},53930:(t,e,r)=>{t.exports=r(68251)},94474:(t,e,r)=>{t.exports=r(56609)},7074:(t,e,r)=>{t.exports=r(49261)},50697:(t,e,r)=>{t.exports=r(76490)},12854:(t,e,r)=>{t.exports=r(27777)},43981:(t,e,r)=>{t.exports=r(86462)},36586:(t,e,r)=>{t.exports=r(91921)},61240:(t,e,r)=>{t.exports=r(45204)},7189:(t,e,r)=>{t.exports=r(89270)},14607:(t,e,r)=>{t.exports=r(74674)},56255:(t,e,r)=>{t.exports=r(70568)},16781:(t,e,r)=>{t.exports=r(24139)},23398:(t,e,r)=>{t.exports=r(40071)},96984:(t,e,r)=>{t.exports=r(49792)},72601:(t,e,r)=>{t.exports=r(34444)},17201:(t,e,r)=>{t.exports=r(53042)},23565:(t,e,r)=>{"use strict";var i=r(91960);t.exports=i},41829:(t,e,r)=>{"use strict";var i=r(92222);t.exports=i},26040:(t,e,r)=>{"use strict";var i=r(68251);t.exports=i},57264:(t,e,r)=>{"use strict";var i=r(24139);r(20768),r(8549),r(87152),r(11372),t.exports=i},59692:(t,e,r)=>{"use strict";var i=r(27045);t.exports=i},25663:(t,e,r)=>{"use strict";var i=r(10070);t.exports=i},93607:(t,e,r)=>{"use strict";r(7057),r(57277);var i=r(92046);t.exports=i.Array.from},13531:(t,e,r)=>{"use strict";r(92425);var i=r(92046);t.exports=i.Array.isArray},96275:(t,e,r)=>{"use strict";r(58545);var i=r(61747);t.exports=i("Array","concat")},1280:(t,e,r)=>{"use strict";r(58618);var i=r(61747);t.exports=i("Array","copyWithin")},45771:(t,e,r)=>{"use strict";r(99363),r(86024);var i=r(61747);t.exports=i("Array","entries")},25366:(t,e,r)=>{"use strict";r(36744);var i=r(61747);t.exports=i("Array","fill")},16177:(t,e,r)=>{"use strict";r(49295);var i=r(61747);t.exports=i("Array","filter")},60285:(t,e,r)=>{"use strict";r(79175);var i=r(61747);t.exports=i("Array","findIndex")},94668:(t,e,r)=>{"use strict";r(6290);var i=r(61747);t.exports=i("Array","find")},22092:(t,e,r)=>{"use strict";r(95650);var i=r(61747);t.exports=i("Array","forEach")},11362:(t,e,r)=>{"use strict";r(19748);var i=r(61747);t.exports=i("Array","includes")},83309:(t,e,r)=>{"use strict";r(66391);var i=r(61747);t.exports=i("Array","indexOf")},86535:(t,e,r)=>{"use strict";r(99363),r(86024);var i=r(61747);t.exports=i("Array","keys")},32342:(t,e,r)=>{"use strict";r(30328);var i=r(61747);t.exports=i("Array","lastIndexOf")},28253:(t,e,r)=>{"use strict";r(6687);var i=r(61747);t.exports=i("Array","map")},16693:(t,e,r)=>{"use strict";r(46339);var i=r(61747);t.exports=i("Array","reduce")},66429:(t,e,r)=>{"use strict";r(48559);var i=r(61747);t.exports=i("Array","reverse")},75265:(t,e,r)=>{"use strict";r(62099);var i=r(61747);t.exports=i("Array","slice")},55939:(t,e,r)=>{"use strict";r(10521);var i=r(61747);t.exports=i("Array","some")},11263:(t,e,r)=>{"use strict";r(26737);var i=r(61747);t.exports=i("Array","sort")},84923:(t,e,r)=>{"use strict";r(35953);var i=r(61747);t.exports=i("Array","splice")},27341:(t,e,r)=>{"use strict";r(99363),r(86024);var i=r(61747);t.exports=i("Array","values")},5354:(t,e,r)=>{"use strict";r(95362);var i=r(92046);t.exports=i.Date.now},32567:(t,e,r)=>{"use strict";r(79307);var i=r(61747);t.exports=i("Function","bind")},22671:(t,e,r)=>{"use strict";r(12344),t.exports=r(45951)},23034:(t,e,r)=>{"use strict";var i=r(88280),s=r(32567),a=Function.prototype;t.exports=function(t){var e=t.bind;return t===a||i(a,t)&&e===a.bind?s:e}},45837:(t,e,r)=>{"use strict";var i=r(88280),s=r(96275),a=Array.prototype;t.exports=function(t){var e=t.concat;return t===a||i(a,t)&&e===a.concat?s:e}},44094:(t,e,r)=>{"use strict";var i=r(88280),s=r(1280),a=Array.prototype;t.exports=function(t){var e=t.copyWithin;return t===a||i(a,t)&&e===a.copyWithin?s:e}},22948:(t,e,r)=>{"use strict";var i=r(88280),s=r(25366),a=Array.prototype;t.exports=function(t){var e=t.fill;return t===a||i(a,t)&&e===a.fill?s:e}},33155:(t,e,r)=>{"use strict";var i=r(88280),s=r(16177),a=Array.prototype;t.exports=function(t){var e=t.filter;return t===a||i(a,t)&&e===a.filter?s:e}},9635:(t,e,r)=>{"use strict";var i=r(88280),s=r(60285),a=Array.prototype;t.exports=function(t){var e=t.findIndex;return t===a||i(a,t)&&e===a.findIndex?s:e}},63246:(t,e,r)=>{"use strict";var i=r(88280),s=r(94668),a=Array.prototype;t.exports=function(t){var e=t.find;return t===a||i(a,t)&&e===a.find?s:e}},60974:(t,e,r)=>{"use strict";var i=r(88280),s=r(48804),a=RegExp.prototype;t.exports=function(t){return t===a||i(a,t)?s(t):t.flags}},36880:(t,e,r)=>{"use strict";var i=r(88280),s=r(11362),a=r(44378),n=Array.prototype,o=String.prototype;t.exports=function(t){var e=t.includes;return t===n||i(n,t)&&e===n.includes?s:"string"==typeof t||t===o||i(o,t)&&e===o.includes?a:e}},44507:(t,e,r)=>{"use strict";var i=r(88280),s=r(83309),a=Array.prototype;t.exports=function(t){var e=t.indexOf;return t===a||i(a,t)&&e===a.indexOf?s:e}},12860:(t,e,r)=>{"use strict";var i=r(88280),s=r(32342),a=Array.prototype;t.exports=function(t){var e=t.lastIndexOf;return t===a||i(a,t)&&e===a.lastIndexOf?s:e}},39299:(t,e,r)=>{"use strict";var i=r(88280),s=r(28253),a=Array.prototype;t.exports=function(t){var e=t.map;return t===a||i(a,t)&&e===a.map?s:e}},28823:(t,e,r)=>{"use strict";var i=r(88280),s=r(16693),a=Array.prototype;t.exports=function(t){var e=t.reduce;return t===a||i(a,t)&&e===a.reduce?s:e}},7766:(t,e,r)=>{"use strict";var i=r(88280),s=r(69008),a=String.prototype;t.exports=function(t){var e=t.repeat;return"string"==typeof t||t===a||i(a,t)&&e===a.repeat?s:e}},86823:(t,e,r)=>{"use strict";var i=r(88280),s=r(52017),a=String.prototype;t.exports=function(t){var e=t.replaceAll;return"string"==typeof t||t===a||i(a,t)&&e===a.replaceAll?s:e}},98059:(t,e,r)=>{"use strict";var i=r(88280),s=r(66429),a=Array.prototype;t.exports=function(t){var e=t.reverse;return t===a||i(a,t)&&e===a.reverse?s:e}},40303:(t,e,r)=>{"use strict";var i=r(88280),s=r(75265),a=Array.prototype;t.exports=function(t){var e=t.slice;return t===a||i(a,t)&&e===a.slice?s:e}},69685:(t,e,r)=>{"use strict";var i=r(88280),s=r(55939),a=Array.prototype;t.exports=function(t){var e=t.some;return t===a||i(a,t)&&e===a.some?s:e}},12757:(t,e,r)=>{"use strict";var i=r(88280),s=r(11263),a=Array.prototype;t.exports=function(t){var e=t.sort;return t===a||i(a,t)&&e===a.sort?s:e}},95029:(t,e,r)=>{"use strict";var i=r(88280),s=r(84923),a=Array.prototype;t.exports=function(t){var e=t.splice;return t===a||i(a,t)&&e===a.splice?s:e}},8661:(t,e,r)=>{"use strict";var i=r(88280),s=r(77511),a=String.prototype;t.exports=function(t){var e=t.trim;return"string"==typeof t||t===a||i(a,t)&&e===a.trim?s:e}},10317:(t,e,r)=>{"use strict";r(56648),r(49721);var i=r(92046),s=r(76024);i.JSON||(i.JSON={stringify:JSON.stringify}),t.exports=function(t,e,r){return s(i.JSON.stringify,null,arguments)}},99968:(t,e,r)=>{"use strict";r(99363),r(14676),r(96835),r(86024),r(7057);var i=r(92046);t.exports=i.Map},1206:(t,e,r)=>{"use strict";r(73066);var i=r(92046);t.exports=i.Math.log2},21926:(t,e,r)=>{"use strict";r(46750);var i=r(92046).Object,s=t.exports=function(t,e,r){return i.defineProperty(t,e,r)};i.defineProperty.sham&&(s.sham=!0)},12118:(t,e,r)=>{"use strict";r(26750);var i=r(92046);t.exports=i.Object.freeze},56286:(t,e,r)=>{"use strict";r(38966);var i=r(92046);t.exports=i.Object.getPrototypeOf},19661:(t,e,r)=>{"use strict";r(83589);var i=r(92046);t.exports=i.Object.keys},61418:(t,e,r)=>{"use strict";r(91906);var i=r(92046);t.exports=i.Object.setPrototypeOf},99929:(t,e,r)=>{"use strict";r(9502);var i=r(92046);t.exports=i.parseFloat},84326:(t,e,r)=>{"use strict";r(42193);var i=r(92046);t.exports=i.parseInt},97027:(t,e,r)=>{"use strict";r(64502),r(99363),r(86024),r(65931),r(57450),r(36415),r(37380),r(25823),r(47714),r(7057);var i=r(92046);t.exports=i.Promise},48804:(t,e,r)=>{"use strict";r(9164);var i=r(40663);t.exports=i},44378:(t,e,r)=>{"use strict";r(19770);var i=r(61747);t.exports=i("String","includes")},69008:(t,e,r)=>{"use strict";r(8592);var i=r(61747);t.exports=i("String","repeat")},52017:(t,e,r)=>{"use strict";r(51398),r(21995),r(50929);var i=r(61747);t.exports=i("String","replaceAll")},77511:(t,e,r)=>{"use strict";r(50727);var i=r(61747);t.exports=i("String","trim")},83842:(t,e,r)=>{"use strict";r(58545),r(86024),r(94452),r(65546),r(3997),r(75084),r(32499),r(2596),r(5721),r(44954),r(44123),r(73377),r(72230),r(15344),r(51660),r(4610),r(33669),r(44810),r(93325),r(87024),r(38172),r(85205);var i=r(92046);t.exports=i.Symbol},1730:(t,e,r)=>{"use strict";r(99363),r(86024),r(7057),r(44954);var i=r(80560);t.exports=i.f("iterator")},31661:(t,e,r)=>{"use strict";r(98537),r(33669);var i=r(80560);t.exports=i.f("toPrimitive")},17458:(t,e,r)=>{"use strict";r(87024),r(38172),r(86024),r(85205),r(44810);var i=r(80560);t.exports=i.f("toStringTag")},34444:(t,e,r)=>{"use strict";t.exports=r(50214)},53042:(t,e,r)=>{"use strict";t.exports=r(49604)},50214:(t,e,r)=>{"use strict";r(60397);var i=r(23565);t.exports=i},49604:(t,e,r)=>{"use strict";r(36038);var i=r(41829);t.exports=i},84997:(t,e,r)=>{"use strict";var i=r(26040);t.exports=i},32321:(t,e,r)=>{"use strict";var i=r(57264);r(13939),r(21785),r(81697),r(84664),r(63422),r(70036),r(28703),r(86878),r(59671),r(50359),t.exports=i},22231:(t,e,r)=>{"use strict";var i=r(59692);t.exports=i},19280:(t,e,r)=>{"use strict";var i=r(25663);t.exports=i},82159:(t,e,r)=>{"use strict";var i=r(62250),s=r(4640),a=TypeError;t.exports=function(t){if(i(t))return t;throw new a(s(t)+" is not a function")}},82235:(t,e,r)=>{"use strict";var i=r(25468),s=r(4640),a=TypeError;t.exports=function(t){if(i(t))return t;throw new a(s(t)+" is not a constructor")}},10043:(t,e,r)=>{"use strict";var i=r(54018),s=String,a=TypeError;t.exports=function(t){if(i(t))return t;throw new a("Can't set "+s(t)+" as a prototype")}},42156:t=>{"use strict";t.exports=function(){}},59596:(t,e,r)=>{"use strict";var i=r(88280),s=TypeError;t.exports=function(t,e){if(i(e,t))return t;throw new s("Incorrect invocation")}},36624:(t,e,r)=>{"use strict";var i=r(46285),s=String,a=TypeError;t.exports=function(t){if(i(t))return t;throw new a(s(t)+" is not an object")}},26375:(t,e,r)=>{"use strict";var i=r(98828);t.exports=i((function(){if("function"==typeof ArrayBuffer){var t=new ArrayBuffer(8);Object.isExtensible(t)&&Object.defineProperty(t,"a",{value:8})}}))},4762:(t,e,r)=>{"use strict";var i=r(39298),s=r(34849),a=r(20575),n=r(74535),o=Math.min;t.exports=[].copyWithin||function(t,e){var r=i(this),c=a(r),l=s(t,c),h=s(e,c),u=arguments.length>2?arguments[2]:void 0,d=o((void 0===u?c:s(u,c))-h,c-l),p=1;for(h<l&&l<h+d&&(p=-1,h+=d-1,l+=d-1);d-- >0;)h in r?r[l]=r[h]:n(r,l),l+=p,h+=p;return r}},29832:(t,e,r)=>{"use strict";var i=r(39298),s=r(34849),a=r(20575);t.exports=function(t){for(var e=i(this),r=a(e),n=arguments.length,o=s(n>1?arguments[1]:void 0,r),c=n>2?arguments[2]:void 0,l=void 0===c?r:s(c,r);l>o;)e[o++]=t;return e}},22914:(t,e,r)=>{"use strict";var i=r(70726).forEach,s=r(77623)("forEach");t.exports=s?[].forEach:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}},11229:(t,e,r)=>{"use strict";var i=r(28311),s=r(13930),a=r(39298),n=r(26818),o=r(37812),c=r(25468),l=r(20575),h=r(5543),u=r(10300),d=r(73448),p=Array;t.exports=function(t){var e=a(t),r=c(this),f=arguments.length,m=f>1?arguments[1]:void 0,v=void 0!==m;v&&(m=i(m,f>2?arguments[2]:void 0));var g,y,A,b,x,w,k=d(e),T=0;if(!k||this===p&&o(k))for(g=l(e),y=r?new this(g):p(g);g>T;T++)w=v?m(e[T],T):e[T],h(y,T,w);else for(y=r?new this:[],x=(b=u(e,k)).next;!(A=s(x,b)).done;T++)w=v?n(b,m,[A.value,T],!0):A.value,h(y,T,w);return y.length=T,y}},74436:(t,e,r)=>{"use strict";var i=r(27374),s=r(34849),a=r(20575),n=function(t){return function(e,r,n){var o=i(e),c=a(o);if(0===c)return!t&&-1;var l,h=s(n,c);if(t&&r!=r){for(;c>h;)if((l=o[h++])!=l)return!0}else for(;c>h;h++)if((t||h in o)&&o[h]===r)return t||h||0;return!t&&-1}};t.exports={includes:n(!0),indexOf:n(!1)}},70726:(t,e,r)=>{"use strict";var i=r(28311),s=r(1907),a=r(16946),n=r(39298),o=r(20575),c=r(56968),l=s([].push),h=function(t){var e=1===t,r=2===t,s=3===t,h=4===t,u=6===t,d=7===t,p=5===t||u;return function(f,m,v,g){for(var y,A,b=n(f),x=a(b),w=o(x),k=i(m,v),T=0,_=g||c,I=e?_(f,w):r||d?_(f,0):void 0;w>T;T++)if((p||T in x)&&(A=k(y=x[T],T,b),t))if(e)I[T]=A;else if(A)switch(t){case 3:return!0;case 5:return y;case 6:return T;case 2:l(I,y)}else switch(t){case 4:return!1;case 7:l(I,y)}return u?-1:s||h?h:I}};t.exports={forEach:h(0),map:h(1),filter:h(2),some:h(3),every:h(4),find:h(5),findIndex:h(6),filterReject:h(7)}},17144:(t,e,r)=>{"use strict";var i=r(76024),s=r(27374),a=r(65482),n=r(20575),o=r(77623),c=Math.min,l=[].lastIndexOf,h=!!l&&1/[1].lastIndexOf(1,-0)<0,u=o("lastIndexOf"),d=h||!u;t.exports=d?function(t){if(h)return i(l,this,arguments)||0;var e=s(this),r=n(e);if(0===r)return-1;var o=r-1;for(arguments.length>1&&(o=c(o,a(arguments[1]))),o<0&&(o=r+o);o>=0;o--)if(o in e&&e[o]===t)return o||0;return-1}:l},59552:(t,e,r)=>{"use strict";var i=r(98828),s=r(76264),a=r(20798),n=s("species");t.exports=function(t){return a>=51||!i((function(){var e=[];return(e.constructor={})[n]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},77623:(t,e,r)=>{"use strict";var i=r(98828);t.exports=function(t,e){var r=[][t];return!!r&&i((function(){r.call(null,e||function(){return 1},1)}))}},35043:(t,e,r)=>{"use strict";var i=r(82159),s=r(39298),a=r(16946),n=r(20575),o=TypeError,c="Reduce of empty array with no initial value",l=function(t){return function(e,r,l,h){var u=s(e),d=a(u),p=n(u);if(i(r),0===p&&l<2)throw new o(c);var f=t?p-1:0,m=t?-1:1;if(l<2)for(;;){if(f in d){h=d[f],f+=m;break}if(f+=m,t?f<0:p<=f)throw new o(c)}for(;t?f>=0:p>f;f+=m)f in d&&(h=r(h,d[f],f,u));return h}};t.exports={left:l(!1),right:l(!0)}},3130:(t,e,r)=>{"use strict";var i=r(39447),s=r(11793),a=TypeError,n=Object.getOwnPropertyDescriptor,o=i&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}();t.exports=o?function(t,e){if(s(t)&&!n(t,"length").writable)throw new a("Cannot set read only .length");return t.length=e}:function(t,e){return t.length=e}},93427:(t,e,r)=>{"use strict";var i=r(1907);t.exports=i([].slice)},34321:(t,e,r)=>{"use strict";var i=r(93427),s=Math.floor,a=function(t,e){var r=t.length;if(r<8)for(var n,o,c=1;c<r;){for(o=c,n=t[c];o&&e(t[o-1],n)>0;)t[o]=t[--o];o!==c++&&(t[o]=n)}else for(var l=s(r/2),h=a(i(t,0,l),e),u=a(i(t,l),e),d=h.length,p=u.length,f=0,m=0;f<d||m<p;)t[f+m]=f<d&&m<p?e(h[f],u[m])<=0?h[f++]:u[m++]:f<d?h[f++]:u[m++];return t};t.exports=a},64010:(t,e,r)=>{"use strict";var i=r(11793),s=r(25468),a=r(46285),n=r(76264)("species"),o=Array;t.exports=function(t){var e;return i(t)&&(e=t.constructor,(s(e)&&(e===o||i(e.prototype))||a(e)&&null===(e=e[n]))&&(e=void 0)),void 0===e?o:e}},56968:(t,e,r)=>{"use strict";var i=r(64010);t.exports=function(t,e){return new(i(t))(0===e?0:e)}},26818:(t,e,r)=>{"use strict";var i=r(36624),s=r(40154);t.exports=function(t,e,r,a){try{return a?e(i(r)[0],r[1]):e(r)}catch(e){s(t,"throw",e)}}},62222:t=>{"use strict";t.exports=function(t,e){return 1===e?function(e,r){return e[t](r)}:function(e,r,i){return e[t](r,i)}}},70473:(t,e,r)=>{"use strict";var i=r(76264)("iterator"),s=!1;try{var a=0,n={next:function(){return{done:!!a++}},return:function(){s=!0}};n[i]=function(){return this},Array.from(n,(function(){throw 2}))}catch(t){}t.exports=function(t,e){try{if(!e&&!s)return!1}catch(t){return!1}var r=!1;try{var a={};a[i]=function(){return{next:function(){return{done:r=!0}}}},t(a)}catch(t){}return r}},45807:(t,e,r)=>{"use strict";var i=r(1907),s=i({}.toString),a=i("".slice);t.exports=function(t){return a(s(t),8,-1)}},73948:(t,e,r)=>{"use strict";var i=r(52623),s=r(62250),a=r(45807),n=r(76264)("toStringTag"),o=Object,c="Arguments"===a(function(){return arguments}());t.exports=i?a:function(t){var e,r,i;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,e){try{return t[e]}catch(t){}}(e=o(t),n))?r:c?a(e):"Object"===(i=a(e))&&s(e.callee)?"Arguments":i}},30217:(t,e,r)=>{"use strict";var i=r(58075),s=r(89251),a=r(12802),n=r(28311),o=r(59596),c=r(87136),l=r(24823),h=r(60183),u=r(59550),d=r(47118),p=r(39447),f=r(61548).fastKey,m=r(64932),v=m.set,g=m.getterFor;t.exports={getConstructor:function(t,e,r,h){var u=t((function(t,s){o(t,d),v(t,{type:e,index:i(null),first:null,last:null,size:0}),p||(t.size=0),c(s)||l(s,t[h],{that:t,AS_ENTRIES:r})})),d=u.prototype,m=g(e),y=function(t,e,r){var i,s,a=m(t),n=A(t,e);return n?n.value=r:(a.last=n={index:s=f(e,!0),key:e,value:r,previous:i=a.last,next:null,removed:!1},a.first||(a.first=n),i&&(i.next=n),p?a.size++:t.size++,"F"!==s&&(a.index[s]=n)),t},A=function(t,e){var r,i=m(t),s=f(e);if("F"!==s)return i.index[s];for(r=i.first;r;r=r.next)if(r.key===e)return r};return a(d,{clear:function(){for(var t=m(this),e=t.first;e;)e.removed=!0,e.previous&&(e.previous=e.previous.next=null),e=e.next;t.first=t.last=null,t.index=i(null),p?t.size=0:this.size=0},delete:function(t){var e=this,r=m(e),i=A(e,t);if(i){var s=i.next,a=i.previous;delete r.index[i.index],i.removed=!0,a&&(a.next=s),s&&(s.previous=a),r.first===i&&(r.first=s),r.last===i&&(r.last=a),p?r.size--:e.size--}return!!i},forEach:function(t){for(var e,r=m(this),i=n(t,arguments.length>1?arguments[1]:void 0);e=e?e.next:r.first;)for(i(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!A(this,t)}}),a(d,r?{get:function(t){var e=A(this,t);return e&&e.value},set:function(t,e){return y(this,0===t?0:t,e)}}:{add:function(t){return y(this,t=0===t?0:t,t)}}),p&&s(d,"size",{configurable:!0,get:function(){return m(this).size}}),u},setStrong:function(t,e,r){var i=e+" Iterator",s=g(e),a=g(i);h(t,e,(function(t,e){v(this,{type:i,target:t,state:s(t),kind:e,last:null})}),(function(){for(var t=a(this),e=t.kind,r=t.last;r&&r.removed;)r=r.previous;return t.target&&(t.last=r=r?r.next:t.state.first)?u("keys"===e?r.key:"values"===e?r.value:[r.key,r.value],!1):(t.target=null,u(void 0,!0))}),r?"entries":"values",!r,!0),d(e)}}},17081:(t,e,r)=>{"use strict";var i=r(11091),s=r(45951),a=r(61548),n=r(98828),o=r(61626),c=r(24823),l=r(59596),h=r(62250),u=r(46285),d=r(87136),p=r(14840),f=r(74284).f,m=r(70726).forEach,v=r(39447),g=r(64932),y=g.set,A=g.getterFor;t.exports=function(t,e,r){var g,b=-1!==t.indexOf("Map"),x=-1!==t.indexOf("Weak"),w=b?"set":"add",k=s[t],T=k&&k.prototype,_={};if(v&&h(k)&&(x||T.forEach&&!n((function(){(new k).entries().next()})))){var I=(g=e((function(e,r){y(l(e,I),{type:t,collection:new k}),d(r)||c(r,e[w],{that:e,AS_ENTRIES:b})}))).prototype,S=A(t);m(["add","clear","delete","forEach","get","has","set","keys","values","entries"],(function(t){var e="add"===t||"set"===t;!(t in T)||x&&"clear"===t||o(I,t,(function(r,i){var s=S(this).collection;if(!e&&x&&!u(r))return"get"===t&&void 0;var a=s[t](0===r?0:r,i);return e?this:a}))})),x||f(I,"size",{configurable:!0,get:function(){return S(this).collection.size}})}else g=r.getConstructor(e,t,b,w),a.enable();return p(g,t,!1,!0),_[t]=g,i({global:!0,forced:!0},_),x||r.setStrong(g,t,b),g}},19595:(t,e,r)=>{"use strict";var i=r(49724),s=r(11042),a=r(13846),n=r(74284);t.exports=function(t,e,r){for(var o=s(e),c=n.f,l=a.f,h=0;h<o.length;h++){var u=o[h];i(t,u)||r&&i(r,u)||c(t,u,l(e,u))}}},25735:(t,e,r)=>{"use strict";var i=r(76264)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(r){try{return e[i]=!1,"/./"[t](e)}catch(t){}}return!1}},57382:(t,e,r)=>{"use strict";var i=r(98828);t.exports=!i((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},59550:t=>{"use strict";t.exports=function(t,e){return{value:t,done:e}}},61626:(t,e,r)=>{"use strict";var i=r(39447),s=r(74284),a=r(75817);t.exports=i?function(t,e,r){return s.f(t,e,a(1,r))}:function(t,e,r){return t[e]=r,t}},75817:t=>{"use strict";t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},5543:(t,e,r)=>{"use strict";var i=r(39447),s=r(74284),a=r(75817);t.exports=function(t,e,r){i?s.f(t,e,a(0,r)):t[e]=r}},3701:(t,e,r)=>{"use strict";var i=r(1907),s=r(98828),a=r(81164).start,n=RangeError,o=isFinite,c=Math.abs,l=Date.prototype,h=l.toISOString,u=i(l.getTime),d=i(l.getUTCDate),p=i(l.getUTCFullYear),f=i(l.getUTCHours),m=i(l.getUTCMilliseconds),v=i(l.getUTCMinutes),g=i(l.getUTCMonth),y=i(l.getUTCSeconds);t.exports=s((function(){return"0385-07-25T07:06:39.999Z"!==h.call(new Date(-50000000000001))}))||!s((function(){h.call(new Date(NaN))}))?function(){if(!o(u(this)))throw new n("Invalid time value");var t=this,e=p(t),r=m(t),i=e<0?"-":e>9999?"+":"";return i+a(c(e),i?6:4,0)+"-"+a(g(t)+1,2,0)+"-"+a(d(t),2,0)+"T"+a(f(t),2,0)+":"+a(v(t),2,0)+":"+a(y(t),2,0)+"."+a(r,3,0)+"Z"}:h},89251:(t,e,r)=>{"use strict";var i=r(74284);t.exports=function(t,e,r){return i.f(t,e,r)}},68055:(t,e,r)=>{"use strict";var i=r(61626);t.exports=function(t,e,r,s){return s&&s.enumerable?t[e]=r:i(t,e,r),t}},12802:(t,e,r)=>{"use strict";var i=r(68055);t.exports=function(t,e,r){for(var s in e)r&&r.unsafe&&t[s]?t[s]=e[s]:i(t,s,e[s],r);return t}},2532:(t,e,r)=>{"use strict";var i=r(45951),s=Object.defineProperty;t.exports=function(t,e){try{s(i,t,{value:e,configurable:!0,writable:!0})}catch(r){i[t]=e}return e}},74535:(t,e,r)=>{"use strict";var i=r(4640),s=TypeError;t.exports=function(t,e){if(!delete t[e])throw new s("Cannot delete property "+i(e)+" of "+i(t))}},39447:(t,e,r)=>{"use strict";var i=r(98828);t.exports=!i((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}))},49552:(t,e,r)=>{"use strict";var i=r(45951),s=r(46285),a=i.document,n=s(a)&&s(a.createElement);t.exports=function(t){return n?a.createElement(t):{}}},88024:t=>{"use strict";var e=TypeError;t.exports=function(t){if(t>9007199254740991)throw e("Maximum allowed index exceeded");return t}},19287:t=>{"use strict";t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},80376:t=>{"use strict";t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},93440:(t,e,r)=>{"use strict";var i=r(96794).match(/firefox\/(\d+)/i);t.exports=!!i&&+i[1]},24328:(t,e,r)=>{"use strict";var i=r(96794);t.exports=/MSIE|Trident/.test(i)},58606:(t,e,r)=>{"use strict";var i=r(96794);t.exports=/ipad|iphone|ipod/i.test(i)&&"undefined"!=typeof Pebble},71829:(t,e,r)=>{"use strict";var i=r(96794);t.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(i)},47586:(t,e,r)=>{"use strict";var i=r(42832);t.exports="NODE"===i},59291:(t,e,r)=>{"use strict";var i=r(96794);t.exports=/web0s(?!.*chrome)/i.test(i)},96794:(t,e,r)=>{"use strict";var i=r(45951).navigator,s=i&&i.userAgent;t.exports=s?String(s):""},20798:(t,e,r)=>{"use strict";var i,s,a=r(45951),n=r(96794),o=a.process,c=a.Deno,l=o&&o.versions||c&&c.version,h=l&&l.v8;h&&(s=(i=h.split("."))[0]>0&&i[0]<4?1:+(i[0]+i[1])),!s&&n&&(!(i=n.match(/Edge\/(\d+)/))||i[1]>=74)&&(i=n.match(/Chrome\/(\d+)/))&&(s=+i[1]),t.exports=s},3786:(t,e,r)=>{"use strict";var i=r(96794).match(/AppleWebKit\/(\d+)\./);t.exports=!!i&&+i[1]},42832:(t,e,r)=>{"use strict";var i=r(45951),s=r(96794),a=r(45807),n=function(t){return s.slice(0,t.length)===t};t.exports=n("Bun/")?"BUN":n("Cloudflare-Workers")?"CLOUDFLARE":n("Deno/")?"DENO":n("Node.js/")?"NODE":i.Bun&&"string"==typeof Bun.version?"BUN":i.Deno&&"object"==typeof Deno.version?"DENO":"process"===a(i.process)?"NODE":i.window&&i.document?"BROWSER":"REST"},85762:(t,e,r)=>{"use strict";var i=r(1907),s=Error,a=i("".replace),n=String(new s("zxcasd").stack),o=/\n\s*at [^:]*:[^\n]*/,c=o.test(n);t.exports=function(t,e){if(c&&"string"==typeof t&&!s.prepareStackTrace)for(;e--;)t=a(t,o,"");return t}},85884:(t,e,r)=>{"use strict";var i=r(61626),s=r(85762),a=r(23888),n=Error.captureStackTrace;t.exports=function(t,e,r,o){a&&(n?n(t,e):i(t,"stack",s(r,o)))}},23888:(t,e,r)=>{"use strict";var i=r(98828),s=r(75817);t.exports=!i((function(){var t=new Error("a");return!("stack"in t)||(Object.defineProperty(t,"stack",s(1,7)),7!==t.stack)}))},11091:(t,e,r)=>{"use strict";var i=r(45951),s=r(76024),a=r(92361),n=r(62250),o=r(13846).f,c=r(7463),l=r(92046),h=r(28311),u=r(61626),d=r(49724);r(36128);var p=function(t){var e=function(r,i,a){if(this instanceof e){switch(arguments.length){case 0:return new t;case 1:return new t(r);case 2:return new t(r,i)}return new t(r,i,a)}return s(t,this,arguments)};return e.prototype=t.prototype,e};t.exports=function(t,e){var r,s,f,m,v,g,y,A,b,x=t.target,w=t.global,k=t.stat,T=t.proto,_=w?i:k?i[x]:i[x]&&i[x].prototype,I=w?l:l[x]||u(l,x,{})[x],S=I.prototype;for(m in e)s=!(r=c(w?m:x+(k?".":"#")+m,t.forced))&&_&&d(_,m),g=I[m],s&&(y=t.dontCallGetSet?(b=o(_,m))&&b.value:_[m]),v=s&&y?y:e[m],(r||T||typeof g!=typeof v)&&(A=t.bind&&s?h(v,i):t.wrap&&s?p(v):T&&n(v)?a(v):v,(t.sham||v&&v.sham||g&&g.sham)&&u(A,"sham",!0),u(I,m,A),T&&(d(l,f=x+"Prototype")||u(l,f,{}),u(l[f],m,v),t.real&&S&&(r||!S[m])&&u(S,m,v)))}},98828:t=>{"use strict";t.exports=function(t){try{return!!t()}catch(t){return!0}}},75681:(t,e,r)=>{"use strict";var i=r(98828);t.exports=!i((function(){return Object.isExtensible(Object.preventExtensions({}))}))},76024:(t,e,r)=>{"use strict";var i=r(41505),s=Function.prototype,a=s.apply,n=s.call;t.exports="object"==typeof Reflect&&Reflect.apply||(i?n.bind(a):function(){return n.apply(a,arguments)})},28311:(t,e,r)=>{"use strict";var i=r(92361),s=r(82159),a=r(41505),n=i(i.bind);t.exports=function(t,e){return s(t),void 0===e?t:a?n(t,e):function(){return t.apply(e,arguments)}}},41505:(t,e,r)=>{"use strict";var i=r(98828);t.exports=!i((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))},44673:(t,e,r)=>{"use strict";var i=r(1907),s=r(82159),a=r(46285),n=r(49724),o=r(93427),c=r(41505),l=Function,h=i([].concat),u=i([].join),d={};t.exports=c?l.bind:function(t){var e=s(this),r=e.prototype,i=o(arguments,1),c=function(){var r=h(i,o(arguments));return this instanceof c?function(t,e,r){if(!n(d,e)){for(var i=[],s=0;s<e;s++)i[s]="a["+s+"]";d[e]=l("C,a","return new C("+u(i,",")+")")}return d[e](t,r)}(e,r.length,r):e.apply(t,r)};return a(r)&&(c.prototype=r),c}},13930:(t,e,r)=>{"use strict";var i=r(41505),s=Function.prototype.call;t.exports=i?s.bind(s):function(){return s.apply(s,arguments)}},36833:(t,e,r)=>{"use strict";var i=r(39447),s=r(49724),a=Function.prototype,n=i&&Object.getOwnPropertyDescriptor,o=s(a,"name"),c=o&&"something"===function(){}.name,l=o&&(!i||i&&n(a,"name").configurable);t.exports={EXISTS:o,PROPER:c,CONFIGURABLE:l}},51871:(t,e,r)=>{"use strict";var i=r(1907),s=r(82159);t.exports=function(t,e,r){try{return i(s(Object.getOwnPropertyDescriptor(t,e)[r]))}catch(t){}}},92361:(t,e,r)=>{"use strict";var i=r(45807),s=r(1907);t.exports=function(t){if("Function"===i(t))return s(t)}},1907:(t,e,r)=>{"use strict";var i=r(41505),s=Function.prototype,a=s.call,n=i&&s.bind.bind(a,a);t.exports=i?n:function(t){return function(){return a.apply(t,arguments)}}},61747:(t,e,r)=>{"use strict";var i=r(45951),s=r(92046);t.exports=function(t,e){var r=s[t+"Prototype"],a=r&&r[e];if(a)return a;var n=i[t],o=n&&n.prototype;return o&&o[e]}},85582:(t,e,r)=>{"use strict";var i=r(92046),s=r(45951),a=r(62250),n=function(t){return a(t)?t:void 0};t.exports=function(t,e){return arguments.length<2?n(i[t])||n(s[t]):i[t]&&i[t][e]||s[t]&&s[t][e]}},73448:(t,e,r)=>{"use strict";var i=r(73948),s=r(29367),a=r(87136),n=r(93742),o=r(76264)("iterator");t.exports=function(t){if(!a(t))return s(t,o)||s(t,"@@iterator")||n[i(t)]}},10300:(t,e,r)=>{"use strict";var i=r(13930),s=r(82159),a=r(36624),n=r(4640),o=r(73448),c=TypeError;t.exports=function(t,e){var r=arguments.length<2?o(t):e;if(s(r))return a(i(r,t));throw new c(n(t)+" is not iterable")}},96656:(t,e,r)=>{"use strict";var i=r(1907),s=r(11793),a=r(62250),n=r(45807),o=r(90160),c=i([].push);t.exports=function(t){if(a(t))return t;if(s(t)){for(var e=t.length,r=[],i=0;i<e;i++){var l=t[i];"string"==typeof l?c(r,l):"number"!=typeof l&&"Number"!==n(l)&&"String"!==n(l)||c(r,o(l))}var h=r.length,u=!0;return function(t,e){if(u)return u=!1,e;if(s(this))return e;for(var i=0;i<h;i++)if(r[i]===t)return e}}}},29367:(t,e,r)=>{"use strict";var i=r(82159),s=r(87136);t.exports=function(t,e){var r=t[e];return s(r)?void 0:i(r)}},67703:(t,e,r)=>{"use strict";var i=r(1907),s=r(39298),a=Math.floor,n=i("".charAt),o=i("".replace),c=i("".slice),l=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,h=/\$([$&'`]|\d{1,2})/g;t.exports=function(t,e,r,i,u,d){var p=r+t.length,f=i.length,m=h;return void 0!==u&&(u=s(u),m=l),o(d,m,(function(s,o){var l;switch(n(o,0)){case"$":return"$";case"&":return t;case"`":return c(e,0,r);case"'":return c(e,p);case"<":l=u[c(o,1,-1)];break;default:var h=+o;if(0===h)return s;if(h>f){var d=a(h/10);return 0===d?s:d<=f?void 0===i[d-1]?n(o,1):i[d-1]+n(o,1):s}l=i[h-1]}return void 0===l?"":l}))}},45951:function(t,e,r){"use strict";var i=function(t){return t&&t.Math===Math&&t};t.exports=i("object"==typeof globalThis&&globalThis)||i("object"==typeof window&&window)||i("object"==typeof self&&self)||i("object"==typeof r.g&&r.g)||i("object"==typeof this&&this)||function(){return this}()||Function("return this")()},49724:(t,e,r)=>{"use strict";var i=r(1907),s=r(39298),a=i({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return a(s(t),e)}},38530:t=>{"use strict";t.exports={}},73904:t=>{"use strict";t.exports=function(t,e){try{1===arguments.length?console.error(t):console.error(t,e)}catch(t){}}},62416:(t,e,r)=>{"use strict";var i=r(85582);t.exports=i("document","documentElement")},73648:(t,e,r)=>{"use strict";var i=r(39447),s=r(98828),a=r(49552);t.exports=!i&&!s((function(){return 7!==Object.defineProperty(a("div"),"a",{get:function(){return 7}}).a}))},16946:(t,e,r)=>{"use strict";var i=r(1907),s=r(98828),a=r(45807),n=Object,o=i("".split);t.exports=s((function(){return!n("z").propertyIsEnumerable(0)}))?function(t){return"String"===a(t)?o(t,""):n(t)}:n},12647:(t,e,r)=>{"use strict";var i=r(1907),s=r(62250),a=r(36128),n=i(Function.toString);s(a.inspectSource)||(a.inspectSource=function(t){return n(t)}),t.exports=a.inspectSource},39259:(t,e,r)=>{"use strict";var i=r(46285),s=r(61626);t.exports=function(t,e){i(e)&&"cause"in e&&s(t,"cause",e.cause)}},61548:(t,e,r)=>{"use strict";var i=r(11091),s=r(1907),a=r(38530),n=r(46285),o=r(49724),c=r(74284).f,l=r(24443),h=r(25407),u=r(57005),d=r(6499),p=r(75681),f=!1,m=d("meta"),v=0,g=function(t){c(t,m,{value:{objectID:"O"+v++,weakData:{}}})},y=t.exports={enable:function(){y.enable=function(){},f=!0;var t=l.f,e=s([].splice),r={};r[m]=1,t(r).length&&(l.f=function(r){for(var i=t(r),s=0,a=i.length;s<a;s++)if(i[s]===m){e(i,s,1);break}return i},i({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:h.f}))},fastKey:function(t,e){if(!n(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,m)){if(!u(t))return"F";if(!e)return"E";g(t)}return t[m].objectID},getWeakData:function(t,e){if(!o(t,m)){if(!u(t))return!0;if(!e)return!1;g(t)}return t[m].weakData},onFreeze:function(t){return p&&f&&u(t)&&!o(t,m)&&g(t),t}};a[m]=!0},64932:(t,e,r)=>{"use strict";var i,s,a,n=r(40551),o=r(45951),c=r(46285),l=r(61626),h=r(49724),u=r(36128),d=r(92522),p=r(38530),f="Object already initialized",m=o.TypeError,v=o.WeakMap;if(n||u.state){var g=u.state||(u.state=new v);g.get=g.get,g.has=g.has,g.set=g.set,i=function(t,e){if(g.has(t))throw new m(f);return e.facade=t,g.set(t,e),e},s=function(t){return g.get(t)||{}},a=function(t){return g.has(t)}}else{var y=d("state");p[y]=!0,i=function(t,e){if(h(t,y))throw new m(f);return e.facade=t,l(t,y,e),e},s=function(t){return h(t,y)?t[y]:{}},a=function(t){return h(t,y)}}t.exports={set:i,get:s,has:a,enforce:function(t){return a(t)?s(t):i(t,{})},getterFor:function(t){return function(e){var r;if(!c(e)||(r=s(e)).type!==t)throw new m("Incompatible receiver, "+t+" required");return r}}}},37812:(t,e,r)=>{"use strict";var i=r(76264),s=r(93742),a=i("iterator"),n=Array.prototype;t.exports=function(t){return void 0!==t&&(s.Array===t||n[a]===t)}},11793:(t,e,r)=>{"use strict";var i=r(45807);t.exports=Array.isArray||function(t){return"Array"===i(t)}},62250:t=>{"use strict";var e="object"==typeof document&&document.all;t.exports=void 0===e&&void 0!==e?function(t){return"function"==typeof t||t===e}:function(t){return"function"==typeof t}},25468:(t,e,r)=>{"use strict";var i=r(1907),s=r(98828),a=r(62250),n=r(73948),o=r(85582),c=r(12647),l=function(){},h=o("Reflect","construct"),u=/^\s*(?:class|function)\b/,d=i(u.exec),p=!u.test(l),f=function(t){if(!a(t))return!1;try{return h(l,[],t),!0}catch(t){return!1}},m=function(t){if(!a(t))return!1;switch(n(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return p||!!d(u,c(t))}catch(t){return!0}};m.sham=!0,t.exports=!h||s((function(){var t;return f(f.call)||!f(Object)||!f((function(){t=!0}))||t}))?m:f},7463:(t,e,r)=>{"use strict";var i=r(98828),s=r(62250),a=/#|\.prototype\./,n=function(t,e){var r=c[o(t)];return r===h||r!==l&&(s(e)?i(e):!!e)},o=n.normalize=function(t){return String(t).replace(a,".").toLowerCase()},c=n.data={},l=n.NATIVE="N",h=n.POLYFILL="P";t.exports=n},87136:t=>{"use strict";t.exports=function(t){return null==t}},46285:(t,e,r)=>{"use strict";var i=r(62250);t.exports=function(t){return"object"==typeof t?null!==t:i(t)}},54018:(t,e,r)=>{"use strict";var i=r(46285);t.exports=function(t){return i(t)||null===t}},7376:t=>{"use strict";t.exports=!0},72087:(t,e,r)=>{"use strict";var i=r(46285),s=r(45807),a=r(76264)("match");t.exports=function(t){var e;return i(t)&&(void 0!==(e=t[a])?!!e:"RegExp"===s(t))}},25594:(t,e,r)=>{"use strict";var i=r(85582),s=r(62250),a=r(88280),n=r(51175),o=Object;t.exports=n?function(t){return"symbol"==typeof t}:function(t){var e=i("Symbol");return s(e)&&a(e.prototype,o(t))}},24823:(t,e,r)=>{"use strict";var i=r(28311),s=r(13930),a=r(36624),n=r(4640),o=r(37812),c=r(20575),l=r(88280),h=r(10300),u=r(73448),d=r(40154),p=TypeError,f=function(t,e){this.stopped=t,this.result=e},m=f.prototype;t.exports=function(t,e,r){var v,g,y,A,b,x,w,k=r&&r.that,T=!(!r||!r.AS_ENTRIES),_=!(!r||!r.IS_RECORD),I=!(!r||!r.IS_ITERATOR),S=!(!r||!r.INTERRUPTED),P=i(e,k),M=function(t){return v&&d(v,"normal"),new f(!0,t)},C=function(t){return T?(a(t),S?P(t[0],t[1],M):P(t[0],t[1])):S?P(t,M):P(t)};if(_)v=t.iterator;else if(I)v=t;else{if(!(g=u(t)))throw new p(n(t)+" is not iterable");if(o(g)){for(y=0,A=c(t);A>y;y++)if((b=C(t[y]))&&l(m,b))return b;return new f(!1)}v=h(t,g)}for(x=_?t.next:v.next;!(w=s(x,v)).done;){try{b=C(w.value)}catch(t){d(v,"throw",t)}if("object"==typeof b&&b&&l(m,b))return b}return new f(!1)}},40154:(t,e,r)=>{"use strict";var i=r(13930),s=r(36624),a=r(29367);t.exports=function(t,e,r){var n,o;s(t);try{if(!(n=a(t,"return"))){if("throw"===e)throw r;return r}n=i(n,t)}catch(t){o=!0,n=t}if("throw"===e)throw r;if(o)throw n;return s(n),r}},47181:(t,e,r)=>{"use strict";var i=r(95116).IteratorPrototype,s=r(58075),a=r(75817),n=r(14840),o=r(93742),c=function(){return this};t.exports=function(t,e,r,l){var h=e+" Iterator";return t.prototype=s(i,{next:a(+!l,r)}),n(t,h,!1,!0),o[h]=c,t}},60183:(t,e,r)=>{"use strict";var i=r(11091),s=r(13930),a=r(7376),n=r(36833),o=r(62250),c=r(47181),l=r(15972),h=r(79192),u=r(14840),d=r(61626),p=r(68055),f=r(76264),m=r(93742),v=r(95116),g=n.PROPER,y=n.CONFIGURABLE,A=v.IteratorPrototype,b=v.BUGGY_SAFARI_ITERATORS,x=f("iterator"),w="keys",k="values",T="entries",_=function(){return this};t.exports=function(t,e,r,n,f,v,I){c(r,e,n);var S,P,M,C=function(t){if(t===f&&L)return L;if(!b&&t&&t in D)return D[t];switch(t){case w:case k:case T:return function(){return new r(this,t)}}return function(){return new r(this)}},R=e+" Iterator",E=!1,D=t.prototype,B=D[x]||D["@@iterator"]||f&&D[f],L=!b&&B||C(f),U="Array"===e&&D.entries||B;if(U&&(S=l(U.call(new t)))!==Object.prototype&&S.next&&(a||l(S)===A||(h?h(S,A):o(S[x])||p(S,x,_)),u(S,R,!0,!0),a&&(m[R]=_)),g&&f===k&&B&&B.name!==k&&(!a&&y?d(D,"name",k):(E=!0,L=function(){return s(B,this)})),f)if(P={values:C(k),keys:v?L:C(w),entries:C(T)},I)for(M in P)(b||E||!(M in D))&&p(D,M,P[M]);else i({target:e,proto:!0,forced:b||E},P);return a&&!I||D[x]===L||p(D,x,L,{name:f}),m[e]=L,P}},95116:(t,e,r)=>{"use strict";var i,s,a,n=r(98828),o=r(62250),c=r(46285),l=r(58075),h=r(15972),u=r(68055),d=r(76264),p=r(7376),f=d("iterator"),m=!1;[].keys&&("next"in(a=[].keys())?(s=h(h(a)))!==Object.prototype&&(i=s):m=!0),!c(i)||n((function(){var t={};return i[f].call(t)!==t}))?i={}:p&&(i=l(i)),o(i[f])||u(i,f,(function(){return this})),t.exports={IteratorPrototype:i,BUGGY_SAFARI_ITERATORS:m}},93742:t=>{"use strict";t.exports={}},20575:(t,e,r)=>{"use strict";var i=r(3121);t.exports=function(t){return i(t.length)}},15703:(t,e,r)=>{"use strict";var i=r(85582),s=r(62222),a=i("Map");t.exports={Map:a,set:s("set",2),get:s("get",1),has:s("has",1),remove:s("delete",1),proto:a.prototype}},54744:t=>{"use strict";var e=Math.log,r=Math.LN2;t.exports=Math.log2||function(t){return e(t)/r}},41176:t=>{"use strict";var e=Math.ceil,r=Math.floor;t.exports=Math.trunc||function(t){var i=+t;return(i>0?r:e)(i)}},52292:(t,e,r)=>{"use strict";var i,s,a,n,o,c=r(45951),l=r(52098),h=r(28311),u=r(49472).set,d=r(1626),p=r(71829),f=r(58606),m=r(59291),v=r(47586),g=c.MutationObserver||c.WebKitMutationObserver,y=c.document,A=c.process,b=c.Promise,x=l("queueMicrotask");if(!x){var w=new d,k=function(){var t,e;for(v&&(t=A.domain)&&t.exit();e=w.get();)try{e()}catch(t){throw w.head&&i(),t}t&&t.enter()};p||v||m||!g||!y?!f&&b&&b.resolve?((n=b.resolve(void 0)).constructor=b,o=h(n.then,n),i=function(){o(k)}):v?i=function(){A.nextTick(k)}:(u=h(u,c),i=function(){u(k)}):(s=!0,a=y.createTextNode(""),new g(k).observe(a,{characterData:!0}),i=function(){a.data=s=!s}),x=function(t){w.head||i(),w.add(t)}}t.exports=x},56254:(t,e,r)=>{"use strict";var i=r(82159),s=TypeError,a=function(t){var e,r;this.promise=new t((function(t,i){if(void 0!==e||void 0!==r)throw new s("Bad Promise constructor");e=t,r=i})),this.resolve=i(e),this.reject=i(r)};t.exports.f=function(t){return new a(t)}},32096:(t,e,r)=>{"use strict";var i=r(90160);t.exports=function(t,e){return void 0===t?arguments.length<2?"":e:i(t)}},12074:(t,e,r)=>{"use strict";var i=r(72087),s=TypeError;t.exports=function(t){if(i(t))throw new s("The method doesn't accept regular expressions");return t}},27213:(t,e,r)=>{"use strict";var i=r(45951),s=r(98828),a=r(1907),n=r(90160),o=r(65993).trim,c=r(86395),l=a("".charAt),h=i.parseFloat,u=i.Symbol,d=u&&u.iterator,p=1/h(c+"-0")!=-1/0||d&&!s((function(){h(Object(d))}));t.exports=p?function(t){var e=o(n(t)),r=h(e);return 0===r&&"-"===l(e,0)?-0:r}:h},72778:(t,e,r)=>{"use strict";var i=r(45951),s=r(98828),a=r(1907),n=r(90160),o=r(65993).trim,c=r(86395),l=i.parseInt,h=i.Symbol,u=h&&h.iterator,d=/^[+-]?0x/i,p=a(d.exec),f=8!==l(c+"08")||22!==l(c+"0x16")||u&&!s((function(){l(Object(u))}));t.exports=f?function(t,e){var r=o(n(t));return l(r,e>>>0||(p(d,r)?16:10))}:l},29538:(t,e,r)=>{"use strict";var i=r(39447),s=r(1907),a=r(13930),n=r(98828),o=r(2875),c=r(87170),l=r(22574),h=r(39298),u=r(16946),d=Object.assign,p=Object.defineProperty,f=s([].concat);t.exports=!d||n((function(){if(i&&1!==d({b:1},d(p({},"a",{enumerable:!0,get:function(){p(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},r=Symbol("assign detection"),s="abcdefghijklmnopqrst";return t[r]=7,s.split("").forEach((function(t){e[t]=t})),7!==d({},t)[r]||o(d({},e)).join("")!==s}))?function(t,e){for(var r=h(t),s=arguments.length,n=1,d=c.f,p=l.f;s>n;)for(var m,v=u(arguments[n++]),g=d?f(o(v),d(v)):o(v),y=g.length,A=0;y>A;)m=g[A++],i&&!a(p,v,m)||(r[m]=v[m]);return r}:d},58075:(t,e,r)=>{"use strict";var i,s=r(36624),a=r(42220),n=r(80376),o=r(38530),c=r(62416),l=r(49552),h=r(92522),u="prototype",d="script",p=h("IE_PROTO"),f=function(){},m=function(t){return"<"+d+">"+t+"</"+d+">"},v=function(t){t.write(m("")),t.close();var e=t.parentWindow.Object;return t=null,e},g=function(){try{i=new ActiveXObject("htmlfile")}catch(t){}var t,e,r;g="undefined"!=typeof document?document.domain&&i?v(i):(e=l("iframe"),r="java"+d+":",e.style.display="none",c.appendChild(e),e.src=String(r),(t=e.contentWindow.document).open(),t.write(m("document.F=Object")),t.close(),t.F):v(i);for(var s=n.length;s--;)delete g[u][n[s]];return g()};o[p]=!0,t.exports=Object.create||function(t,e){var r;return null!==t?(f[u]=s(t),r=new f,f[u]=null,r[p]=t):r=g(),void 0===e?r:a.f(r,e)}},42220:(t,e,r)=>{"use strict";var i=r(39447),s=r(58661),a=r(74284),n=r(36624),o=r(27374),c=r(2875);e.f=i&&!s?Object.defineProperties:function(t,e){n(t);for(var r,i=o(e),s=c(e),l=s.length,h=0;l>h;)a.f(t,r=s[h++],i[r]);return t}},74284:(t,e,r)=>{"use strict";var i=r(39447),s=r(73648),a=r(58661),n=r(36624),o=r(70470),c=TypeError,l=Object.defineProperty,h=Object.getOwnPropertyDescriptor,u="enumerable",d="configurable",p="writable";e.f=i?a?function(t,e,r){if(n(t),e=o(e),n(r),"function"==typeof t&&"prototype"===e&&"value"in r&&p in r&&!r[p]){var i=h(t,e);i&&i[p]&&(t[e]=r.value,r={configurable:d in r?r[d]:i[d],enumerable:u in r?r[u]:i[u],writable:!1})}return l(t,e,r)}:l:function(t,e,r){if(n(t),e=o(e),n(r),s)try{return l(t,e,r)}catch(t){}if("get"in r||"set"in r)throw new c("Accessors not supported");return"value"in r&&(t[e]=r.value),t}},13846:(t,e,r)=>{"use strict";var i=r(39447),s=r(13930),a=r(22574),n=r(75817),o=r(27374),c=r(70470),l=r(49724),h=r(73648),u=Object.getOwnPropertyDescriptor;e.f=i?u:function(t,e){if(t=o(t),e=c(e),h)try{return u(t,e)}catch(t){}if(l(t,e))return n(!s(a.f,t,e),t[e])}},25407:(t,e,r)=>{"use strict";var i=r(45807),s=r(27374),a=r(24443).f,n=r(93427),o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return o&&"Window"===i(t)?function(t){try{return a(t)}catch(t){return n(o)}}(t):a(s(t))}},24443:(t,e,r)=>{"use strict";var i=r(23045),s=r(80376).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,s)}},87170:(t,e)=>{"use strict";e.f=Object.getOwnPropertySymbols},15972:(t,e,r)=>{"use strict";var i=r(49724),s=r(62250),a=r(39298),n=r(92522),o=r(57382),c=n("IE_PROTO"),l=Object,h=l.prototype;t.exports=o?l.getPrototypeOf:function(t){var e=a(t);if(i(e,c))return e[c];var r=e.constructor;return s(r)&&e instanceof r?r.prototype:e instanceof l?h:null}},57005:(t,e,r)=>{"use strict";var i=r(98828),s=r(46285),a=r(45807),n=r(26375),o=Object.isExtensible,c=i((function(){o(1)}));t.exports=c||n?function(t){return!!s(t)&&(!n||"ArrayBuffer"!==a(t))&&(!o||o(t))}:o},88280:(t,e,r)=>{"use strict";var i=r(1907);t.exports=i({}.isPrototypeOf)},23045:(t,e,r)=>{"use strict";var i=r(1907),s=r(49724),a=r(27374),n=r(74436).indexOf,o=r(38530),c=i([].push);t.exports=function(t,e){var r,i=a(t),l=0,h=[];for(r in i)!s(o,r)&&s(i,r)&&c(h,r);for(;e.length>l;)s(i,r=e[l++])&&(~n(h,r)||c(h,r));return h}},2875:(t,e,r)=>{"use strict";var i=r(23045),s=r(80376);t.exports=Object.keys||function(t){return i(t,s)}},22574:(t,e)=>{"use strict";var r={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,s=i&&!r.call({1:2},1);e.f=s?function(t){var e=i(this,t);return!!e&&e.enumerable}:r},79192:(t,e,r)=>{"use strict";var i=r(51871),s=r(46285),a=r(74239),n=r(10043);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,r={};try{(t=i(Object.prototype,"__proto__","set"))(r,[]),e=r instanceof Array}catch(t){}return function(r,i){return a(r),n(i),s(r)?(e?t(r,i):r.__proto__=i,r):r}}():void 0)},54878:(t,e,r)=>{"use strict";var i=r(52623),s=r(73948);t.exports=i?{}.toString:function(){return"[object "+s(this)+"]"}},60581:(t,e,r)=>{"use strict";var i=r(13930),s=r(62250),a=r(46285),n=TypeError;t.exports=function(t,e){var r,o;if("string"===e&&s(r=t.toString)&&!a(o=i(r,t)))return o;if(s(r=t.valueOf)&&!a(o=i(r,t)))return o;if("string"!==e&&s(r=t.toString)&&!a(o=i(r,t)))return o;throw new n("Can't convert object to primitive value")}},11042:(t,e,r)=>{"use strict";var i=r(85582),s=r(1907),a=r(24443),n=r(87170),o=r(36624),c=s([].concat);t.exports=i("Reflect","ownKeys")||function(t){var e=a.f(o(t)),r=n.f;return r?c(e,r(t)):e}},92046:t=>{"use strict";t.exports={}},94420:t=>{"use strict";t.exports=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}},1759:(t,e,r)=>{"use strict";var i=r(45951),s=r(55463),a=r(62250),n=r(7463),o=r(12647),c=r(76264),l=r(42832),h=r(7376),u=r(20798),d=s&&s.prototype,p=c("species"),f=!1,m=a(i.PromiseRejectionEvent),v=n("Promise",(function(){var t=o(s),e=t!==String(s);if(!e&&66===u)return!0;if(h&&(!d.catch||!d.finally))return!0;if(!u||u<51||!/native code/.test(t)){var r=new s((function(t){t(1)})),i=function(t){t((function(){}),(function(){}))};if((r.constructor={})[p]=i,!(f=r.then((function(){}))instanceof i))return!0}return!(e||"BROWSER"!==l&&"DENO"!==l||m)}));t.exports={CONSTRUCTOR:v,REJECTION_EVENT:m,SUBCLASSING:f}},55463:(t,e,r)=>{"use strict";var i=r(45951);t.exports=i.Promise},83569:(t,e,r)=>{"use strict";var i=r(36624),s=r(46285),a=r(56254);t.exports=function(t,e){if(i(t),s(e)&&e.constructor===t)return e;var r=a.f(t);return(0,r.resolve)(e),r.promise}},3282:(t,e,r)=>{"use strict";var i=r(55463),s=r(70473),a=r(1759).CONSTRUCTOR;t.exports=a||!s((function(t){i.all(t).then(void 0,(function(){}))}))},1626:t=>{"use strict";var e=function(){this.head=null,this.tail=null};e.prototype={add:function(t){var e={item:t,next:null},r=this.tail;r?r.next=e:this.head=e,this.tail=e},get:function(){var t=this.head;if(t)return null===(this.head=t.next)&&(this.tail=null),t.item}},t.exports=e},1816:(t,e,r)=>{"use strict";var i=r(45951),s=r(98828),a=i.RegExp,n=!s((function(){var t=!0;try{a(".","d")}catch(e){t=!1}var e={},r="",i=t?"dgimsy":"gimsy",s=function(t,i){Object.defineProperty(e,t,{get:function(){return r+=i,!0}})},n={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};for(var o in t&&(n.hasIndices="d"),n)s(o,n[o]);return Object.getOwnPropertyDescriptor(a.prototype,"flags").get.call(e)!==i||r!==i}));t.exports={correct:n}},85606:(t,e,r)=>{"use strict";var i=r(36624);t.exports=function(){var t=i(this),e="";return t.hasIndices&&(e+="d"),t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.unicodeSets&&(e+="v"),t.sticky&&(e+="y"),e}},40663:(t,e,r)=>{"use strict";var i=r(13930),s=r(49724),a=r(88280),n=r(1816),o=r(85606),c=RegExp.prototype;t.exports=n.correct?function(t){return t.flags}:function(t){return n.correct||!a(c,t)||s(t,"flags")?t.flags:i(o,t)}},74239:(t,e,r)=>{"use strict";var i=r(87136),s=TypeError;t.exports=function(t){if(i(t))throw new s("Can't call method on "+t);return t}},52098:(t,e,r)=>{"use strict";var i=r(45951),s=r(39447),a=Object.getOwnPropertyDescriptor;t.exports=function(t){if(!s)return i[t];var e=a(i,t);return e&&e.value}},70485:(t,e,r)=>{"use strict";var i,s=r(45951),a=r(76024),n=r(62250),o=r(42832),c=r(96794),l=r(93427),h=r(24787),u=s.Function,d=/MSIE .\./.test(c)||"BUN"===o&&((i=s.Bun.version.split(".")).length<3||"0"===i[0]&&(i[1]<3||"3"===i[1]&&"0"===i[2]));t.exports=function(t,e){var r=e?2:1;return d?function(i,s){var o=h(arguments.length,1)>r,c=n(i)?i:u(i),d=o?l(arguments,r):[],p=o?function(){a(c,this,d)}:c;return e?t(p,s):t(p)}:t}},47118:(t,e,r)=>{"use strict";var i=r(85582),s=r(89251),a=r(76264),n=r(39447),o=a("species");t.exports=function(t){var e=i(t);n&&e&&!e[o]&&s(e,o,{configurable:!0,get:function(){return this}})}},14840:(t,e,r)=>{"use strict";var i=r(52623),s=r(74284).f,a=r(61626),n=r(49724),o=r(54878),c=r(76264)("toStringTag");t.exports=function(t,e,r,l){var h=r?t:t&&t.prototype;h&&(n(h,c)||s(h,c,{configurable:!0,value:e}),l&&!i&&a(h,"toString",o))}},92522:(t,e,r)=>{"use strict";var i=r(85816),s=r(6499),a=i("keys");t.exports=function(t){return a[t]||(a[t]=s(t))}},36128:(t,e,r)=>{"use strict";var i=r(7376),s=r(45951),a=r(2532),n="__core-js_shared__",o=t.exports=s[n]||a(n,{});(o.versions||(o.versions=[])).push({version:"3.46.0",mode:i?"pure":"global",copyright:" 2014-2025 Denis Pushkarev (zloirock.ru), 2025 CoreJS Company (core-js.io)",license:"https://github.com/zloirock/core-js/blob/v3.46.0/LICENSE",source:"https://github.com/zloirock/core-js"})},85816:(t,e,r)=>{"use strict";var i=r(36128);t.exports=function(t,e){return i[t]||(i[t]=e||{})}},28450:(t,e,r)=>{"use strict";var i=r(36624),s=r(82235),a=r(87136),n=r(76264)("species");t.exports=function(t,e){var r,o=i(t).constructor;return void 0===o||a(r=i(o)[n])?e:s(r)}},11470:(t,e,r)=>{"use strict";var i=r(1907),s=r(65482),a=r(90160),n=r(74239),o=i("".charAt),c=i("".charCodeAt),l=i("".slice),h=function(t){return function(e,r){var i,h,u=a(n(e)),d=s(r),p=u.length;return d<0||d>=p?t?"":void 0:(i=c(u,d))<55296||i>56319||d+1===p||(h=c(u,d+1))<56320||h>57343?t?o(u,d):i:t?l(u,d,d+2):h-56320+(i-55296<<10)+65536}};t.exports={codeAt:h(!1),charAt:h(!0)}},81164:(t,e,r)=>{"use strict";var i=r(1907),s=r(3121),a=r(90160),n=r(69314),o=r(74239),c=i(n),l=i("".slice),h=Math.ceil,u=function(t){return function(e,r,i){var n,u,d=a(o(e)),p=s(r),f=d.length,m=void 0===i?" ":a(i);return p<=f||""===m?d:((u=c(m,h((n=p-f)/m.length))).length>n&&(u=l(u,0,n)),t?d+u:u+d)}};t.exports={start:u(!1),end:u(!0)}},79156:(t,e,r)=>{"use strict";var i=r(1907),s=2147483647,a=/[^\0-\u007E]/,n=/[.\u3002\uFF0E\uFF61]/g,o="Overflow: input needs wider integers to process",c=RangeError,l=i(n.exec),h=Math.floor,u=String.fromCharCode,d=i("".charCodeAt),p=i([].join),f=i([].push),m=i("".replace),v=i("".split),g=i("".toLowerCase),y=function(t){return t+22+75*(t<26)},A=function(t,e,r){var i=0;for(t=r?h(t/700):t>>1,t+=h(t/e);t>455;)t=h(t/35),i+=36;return h(i+36*t/(t+38))},b=function(t){var e=[];t=function(t){for(var e=[],r=0,i=t.length;r<i;){var s=d(t,r++);if(s>=55296&&s<=56319&&r<i){var a=d(t,r++);56320==(64512&a)?f(e,((1023&s)<<10)+(1023&a)+65536):(f(e,s),r--)}else f(e,s)}return e}(t);var r,i,a=t.length,n=128,l=0,m=72;for(r=0;r<t.length;r++)(i=t[r])<128&&f(e,u(i));var v=e.length,g=v;for(v&&f(e,"-");g<a;){var b=s;for(r=0;r<t.length;r++)(i=t[r])>=n&&i<b&&(b=i);var x=g+1;if(b-n>h((s-l)/x))throw new c(o);for(l+=(b-n)*x,n=b,r=0;r<t.length;r++){if((i=t[r])<n&&++l>s)throw new c(o);if(i===n){for(var w=l,k=36;;){var T=k<=m?1:k>=m+26?26:k-m;if(w<T)break;var _=w-T,I=36-T;f(e,u(y(T+_%I))),w=h(_/I),k+=36}f(e,u(y(w))),m=A(l,x,g===v),l=0,g++}}l++,n++}return p(e,"")};t.exports=function(t){var e,r,i=[],s=v(m(g(t),n,"."),".");for(e=0;e<s.length;e++)r=s[e],f(i,l(a,r)?"xn--"+b(r):r);return p(i,".")}},69314:(t,e,r)=>{"use strict";var i=r(65482),s=r(90160),a=r(74239),n=RangeError;t.exports=function(t){var e=s(a(this)),r="",o=i(t);if(o<0||o===1/0)throw new n("Wrong number of repetitions");for(;o>0;(o>>>=1)&&(e+=e))1&o&&(r+=e);return r}},95819:(t,e,r)=>{"use strict";var i=r(36833).PROPER,s=r(98828),a=r(86395);t.exports=function(t){return s((function(){return!!a[t]()||""!==""[t]()||i&&a[t].name!==t}))}},65993:(t,e,r)=>{"use strict";var i=r(1907),s=r(74239),a=r(90160),n=r(86395),o=i("".replace),c=RegExp("^["+n+"]+"),l=RegExp("(^|[^"+n+"])["+n+"]+$"),h=function(t){return function(e){var r=a(s(e));return 1&t&&(r=o(r,c,"")),2&t&&(r=o(r,l,"$1")),r}};t.exports={start:h(1),end:h(2),trim:h(3)}},19846:(t,e,r)=>{"use strict";var i=r(20798),s=r(98828),a=r(45951).String;t.exports=!!Object.getOwnPropertySymbols&&!s((function(){var t=Symbol("symbol detection");return!a(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&i&&i<41}))},83467:(t,e,r)=>{"use strict";var i=r(13930),s=r(85582),a=r(76264),n=r(68055);t.exports=function(){var t=s("Symbol"),e=t&&t.prototype,r=e&&e.valueOf,o=a("toPrimitive");e&&!e[o]&&n(e,o,(function(t){return i(r,this)}),{arity:1})}},12595:(t,e,r)=>{"use strict";var i=r(85582),s=r(1907),a=i("Symbol"),n=a.keyFor,o=s(a.prototype.valueOf);t.exports=a.isRegisteredSymbol||function(t){try{return void 0!==n(o(t))}catch(t){return!1}}},69197:(t,e,r)=>{"use strict";for(var i=r(85816),s=r(85582),a=r(1907),n=r(25594),o=r(76264),c=s("Symbol"),l=c.isWellKnownSymbol,h=s("Object","getOwnPropertyNames"),u=a(c.prototype.valueOf),d=i("wks"),p=0,f=h(c),m=f.length;p<m;p++)try{var v=f[p];n(c[v])&&o(v)}catch(t){}t.exports=function(t){if(l&&l(t))return!0;try{for(var e=u(t),r=0,i=h(d),s=i.length;r<s;r++)if(d[i[r]]==e)return!0}catch(t){}return!1}},84411:(t,e,r)=>{"use strict";var i=r(19846);t.exports=i&&!!Symbol.for&&!!Symbol.keyFor},49472:(t,e,r)=>{"use strict";var i,s,a,n,o=r(45951),c=r(76024),l=r(28311),h=r(62250),u=r(49724),d=r(98828),p=r(62416),f=r(93427),m=r(49552),v=r(24787),g=r(71829),y=r(47586),A=o.setImmediate,b=o.clearImmediate,x=o.process,w=o.Dispatch,k=o.Function,T=o.MessageChannel,_=o.String,I=0,S={},P="onreadystatechange";d((function(){i=o.location}));var M=function(t){if(u(S,t)){var e=S[t];delete S[t],e()}},C=function(t){return function(){M(t)}},R=function(t){M(t.data)},E=function(t){o.postMessage(_(t),i.protocol+"//"+i.host)};A&&b||(A=function(t){v(arguments.length,1);var e=h(t)?t:k(t),r=f(arguments,1);return S[++I]=function(){c(e,void 0,r)},s(I),I},b=function(t){delete S[t]},y?s=function(t){x.nextTick(C(t))}:w&&w.now?s=function(t){w.now(C(t))}:T&&!g?(n=(a=new T).port2,a.port1.onmessage=R,s=l(n.postMessage,n)):o.addEventListener&&h(o.postMessage)&&!o.importScripts&&i&&"file:"!==i.protocol&&!d(E)?(s=E,o.addEventListener("message",R,!1)):s=P in m("script")?function(t){p.appendChild(m("script"))[P]=function(){p.removeChild(this),M(t)}}:function(t){setTimeout(C(t),0)}),t.exports={set:A,clear:b}},34849:(t,e,r)=>{"use strict";var i=r(65482),s=Math.max,a=Math.min;t.exports=function(t,e){var r=i(t);return r<0?s(r+e,0):a(r,e)}},27374:(t,e,r)=>{"use strict";var i=r(16946),s=r(74239);t.exports=function(t){return i(s(t))}},65482:(t,e,r)=>{"use strict";var i=r(41176);t.exports=function(t){var e=+t;return e!=e||0===e?0:i(e)}},3121:(t,e,r)=>{"use strict";var i=r(65482),s=Math.min;t.exports=function(t){var e=i(t);return e>0?s(e,9007199254740991):0}},39298:(t,e,r)=>{"use strict";var i=r(74239),s=Object;t.exports=function(t){return s(i(t))}},46028:(t,e,r)=>{"use strict";var i=r(13930),s=r(46285),a=r(25594),n=r(29367),o=r(60581),c=r(76264),l=TypeError,h=c("toPrimitive");t.exports=function(t,e){if(!s(t)||a(t))return t;var r,c=n(t,h);if(c){if(void 0===e&&(e="default"),r=i(c,t,e),!s(r)||a(r))return r;throw new l("Can't convert object to primitive value")}return void 0===e&&(e="number"),o(t,e)}},70470:(t,e,r)=>{"use strict";var i=r(46028),s=r(25594);t.exports=function(t){var e=i(t,"string");return s(e)?e:e+""}},52623:(t,e,r)=>{"use strict";var i={};i[r(76264)("toStringTag")]="z",t.exports="[object z]"===String(i)},90160:(t,e,r)=>{"use strict";var i=r(73948),s=String;t.exports=function(t){if("Symbol"===i(t))throw new TypeError("Cannot convert a Symbol value to a string");return s(t)}},4640:t=>{"use strict";var e=String;t.exports=function(t){try{return e(t)}catch(t){return"Object"}}},6499:(t,e,r)=>{"use strict";var i=r(1907),s=0,a=Math.random(),n=i(1.1.toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+n(++s+a,36)}},34791:(t,e,r)=>{"use strict";var i=r(98828),s=r(76264),a=r(39447),n=r(7376),o=s("iterator");t.exports=!i((function(){var t=new URL("b?a=1&b=2&c=3","https://a"),e=t.searchParams,r=new URLSearchParams("a=1&a=2&b=3"),i="";return t.pathname="c%20d",e.forEach((function(t,r){e.delete("b"),i+=r+t})),r.delete("a",2),r.delete("b",void 0),n&&(!t.toJSON||!r.has("a",1)||r.has("a",2)||!r.has("a",void 0)||r.has("b"))||!e.size&&(n||!a)||!e.sort||"https://a/c%20d?a=1&c=3"!==t.href||"3"!==e.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!e[o]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("https://").host||"#%D0%B1"!==new URL("https://a#").hash||"a1c3"!==i||"x"!==new URL("https://x",void 0).host}))},51175:(t,e,r)=>{"use strict";var i=r(19846);t.exports=i&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},58661:(t,e,r)=>{"use strict";var i=r(39447),s=r(98828);t.exports=i&&s((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},24787:t=>{"use strict";var e=TypeError;t.exports=function(t,r){if(t<r)throw new e("Not enough arguments");return t}},40551:(t,e,r)=>{"use strict";var i=r(45951),s=r(62250),a=i.WeakMap;t.exports=s(a)&&/native code/.test(String(a))},20366:(t,e,r)=>{"use strict";var i=r(92046),s=r(49724),a=r(80560),n=r(74284).f;t.exports=function(t){var e=i.Symbol||(i.Symbol={});s(e,t)||n(e,t,{value:a.f(t)})}},80560:(t,e,r)=>{"use strict";var i=r(76264);e.f=i},76264:(t,e,r)=>{"use strict";var i=r(45951),s=r(85816),a=r(49724),n=r(6499),o=r(19846),c=r(51175),l=i.Symbol,h=s("wks"),u=c?l.for||l:l&&l.withoutSetter||n;t.exports=function(t){return a(h,t)||(h[t]=o&&a(l,t)?l[t]:u("Symbol."+t)),h[t]}},86395:t=>{"use strict";t.exports="\t\n\v\f\r \u2028\u2029\ufeff"},82048:(t,e,r)=>{"use strict";var i=r(11091),s=r(88280),a=r(15972),n=r(79192),o=r(19595),c=r(58075),l=r(61626),h=r(75817),u=r(39259),d=r(85884),p=r(24823),f=r(32096),m=r(76264)("toStringTag"),v=Error,g=[].push,y=function(t,e){var r,i=s(A,this);n?r=n(new v,i?a(this):A):(r=i?this:c(A),l(r,m,"Error")),void 0!==e&&l(r,"message",f(e)),d(r,y,r.stack,1),arguments.length>2&&u(r,arguments[2]);var o=[];return p(t,g,{that:o}),l(r,"errors",o),r};n?n(y,v):o(y,v,{name:!0});var A=y.prototype=c(v.prototype,{constructor:h(1,y),message:h(1,""),name:h(1,"AggregateError")});i({global:!0,constructor:!0,arity:2},{AggregateError:y})},64502:(t,e,r)=>{"use strict";r(82048)},58545:(t,e,r)=>{"use strict";var i=r(11091),s=r(98828),a=r(11793),n=r(46285),o=r(39298),c=r(20575),l=r(88024),h=r(5543),u=r(56968),d=r(59552),p=r(76264),f=r(20798),m=p("isConcatSpreadable"),v=f>=51||!s((function(){var t=[];return t[m]=!1,t.concat()[0]!==t})),g=function(t){if(!n(t))return!1;var e=t[m];return void 0!==e?!!e:a(t)};i({target:"Array",proto:!0,arity:1,forced:!v||!d("concat")},{concat:function(t){var e,r,i,s,a,n=o(this),d=u(n,0),p=0;for(e=-1,i=arguments.length;e<i;e++)if(g(a=-1===e?n:arguments[e]))for(s=c(a),l(p+s),r=0;r<s;r++,p++)r in a&&h(d,p,a[r]);else l(p+1),h(d,p++,a);return d.length=p,d}})},58618:(t,e,r)=>{"use strict";var i=r(11091),s=r(4762),a=r(42156);i({target:"Array",proto:!0},{copyWithin:s}),a("copyWithin")},36744:(t,e,r)=>{"use strict";var i=r(11091),s=r(29832),a=r(42156);i({target:"Array",proto:!0},{fill:s}),a("fill")},49295:(t,e,r)=>{"use strict";var i=r(11091),s=r(70726).filter;i({target:"Array",proto:!0,forced:!r(59552)("filter")},{filter:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}})},79175:(t,e,r)=>{"use strict";var i=r(11091),s=r(70726).findIndex,a=r(42156),n="findIndex",o=!0;n in[]&&Array(1)[n]((function(){o=!1})),i({target:"Array",proto:!0,forced:o},{findIndex:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}}),a(n)},6290:(t,e,r)=>{"use strict";var i=r(11091),s=r(70726).find,a=r(42156),n="find",o=!0;n in[]&&Array(1)[n]((function(){o=!1})),i({target:"Array",proto:!0,forced:o},{find:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}}),a(n)},95650:(t,e,r)=>{"use strict";var i=r(11091),s=r(22914);i({target:"Array",proto:!0,forced:[].forEach!==s},{forEach:s})},57277:(t,e,r)=>{"use strict";var i=r(11091),s=r(11229);i({target:"Array",stat:!0,forced:!r(70473)((function(t){Array.from(t)}))},{from:s})},19748:(t,e,r)=>{"use strict";var i=r(11091),s=r(74436).includes,a=r(98828),n=r(42156);i({target:"Array",proto:!0,forced:a((function(){return!Array(1).includes()}))},{includes:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}}),n("includes")},66391:(t,e,r)=>{"use strict";var i=r(11091),s=r(92361),a=r(74436).indexOf,n=r(77623),o=s([].indexOf),c=!!o&&1/o([1],1,-0)<0;i({target:"Array",proto:!0,forced:c||!n("indexOf")},{indexOf:function(t){var e=arguments.length>1?arguments[1]:void 0;return c?o(this,t,e)||0:a(this,t,e)}})},92425:(t,e,r)=>{"use strict";r(11091)({target:"Array",stat:!0},{isArray:r(11793)})},99363:(t,e,r)=>{"use strict";var i=r(27374),s=r(42156),a=r(93742),n=r(64932),o=r(74284).f,c=r(60183),l=r(59550),h=r(7376),u=r(39447),d="Array Iterator",p=n.set,f=n.getterFor(d);t.exports=c(Array,"Array",(function(t,e){p(this,{type:d,target:i(t),index:0,kind:e})}),(function(){var t=f(this),e=t.target,r=t.index++;if(!e||r>=e.length)return t.target=null,l(void 0,!0);switch(t.kind){case"keys":return l(r,!1);case"values":return l(e[r],!1)}return l([r,e[r]],!1)}),"values");var m=a.Arguments=a.Array;if(s("keys"),s("values"),s("entries"),!h&&u&&"values"!==m.name)try{o(m,"name",{value:"values"})}catch(t){}},30328:(t,e,r)=>{"use strict";var i=r(11091),s=r(17144);i({target:"Array",proto:!0,forced:s!==[].lastIndexOf},{lastIndexOf:s})},6687:(t,e,r)=>{"use strict";var i=r(11091),s=r(70726).map;i({target:"Array",proto:!0,forced:!r(59552)("map")},{map:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}})},46339:(t,e,r)=>{"use strict";var i=r(11091),s=r(35043).left,a=r(77623),n=r(20798);i({target:"Array",proto:!0,forced:!r(47586)&&n>79&&n<83||!a("reduce")},{reduce:function(t){var e=arguments.length;return s(this,t,e,e>1?arguments[1]:void 0)}})},48559:(t,e,r)=>{"use strict";var i=r(11091),s=r(1907),a=r(11793),n=s([].reverse),o=[1,2];i({target:"Array",proto:!0,forced:String(o)===String(o.reverse())},{reverse:function(){return a(this)&&(this.length=this.length),n(this)}})},62099:(t,e,r)=>{"use strict";var i=r(11091),s=r(11793),a=r(25468),n=r(46285),o=r(34849),c=r(20575),l=r(27374),h=r(5543),u=r(76264),d=r(59552),p=r(93427),f=d("slice"),m=u("species"),v=Array,g=Math.max;i({target:"Array",proto:!0,forced:!f},{slice:function(t,e){var r,i,u,d=l(this),f=c(d),y=o(t,f),A=o(void 0===e?f:e,f);if(s(d)&&(r=d.constructor,(a(r)&&(r===v||s(r.prototype))||n(r)&&null===(r=r[m]))&&(r=void 0),r===v||void 0===r))return p(d,y,A);for(i=new(void 0===r?v:r)(g(A-y,0)),u=0;y<A;y++,u++)y in d&&h(i,u,d[y]);return i.length=u,i}})},10521:(t,e,r)=>{"use strict";var i=r(11091),s=r(70726).some;i({target:"Array",proto:!0,forced:!r(77623)("some")},{some:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}})},26737:(t,e,r)=>{"use strict";var i=r(11091),s=r(1907),a=r(82159),n=r(39298),o=r(20575),c=r(74535),l=r(90160),h=r(98828),u=r(34321),d=r(77623),p=r(93440),f=r(24328),m=r(20798),v=r(3786),g=[],y=s(g.sort),A=s(g.push),b=h((function(){g.sort(void 0)})),x=h((function(){g.sort(null)})),w=d("sort"),k=!h((function(){if(m)return m<70;if(!(p&&p>3)){if(f)return!0;if(v)return v<603;var t,e,r,i,s="";for(t=65;t<76;t++){switch(e=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:r=3;break;case 68:case 71:r=4;break;default:r=2}for(i=0;i<47;i++)g.push({k:e+i,v:r})}for(g.sort((function(t,e){return e.v-t.v})),i=0;i<g.length;i++)e=g[i].k.charAt(0),s.charAt(s.length-1)!==e&&(s+=e);return"DGBEFHACIJK"!==s}}));i({target:"Array",proto:!0,forced:b||!x||!w||!k},{sort:function(t){void 0!==t&&a(t);var e=n(this);if(k)return void 0===t?y(e):y(e,t);var r,i,s=[],h=o(e);for(i=0;i<h;i++)i in e&&A(s,e[i]);for(u(s,function(t){return function(e,r){return void 0===r?-1:void 0===e?1:void 0!==t?+t(e,r)||0:l(e)>l(r)?1:-1}}(t)),r=o(s),i=0;i<r;)e[i]=s[i++];for(;i<h;)c(e,i++);return e}})},35953:(t,e,r)=>{"use strict";var i=r(11091),s=r(39298),a=r(34849),n=r(65482),o=r(20575),c=r(3130),l=r(88024),h=r(56968),u=r(5543),d=r(74535),p=r(59552)("splice"),f=Math.max,m=Math.min;i({target:"Array",proto:!0,forced:!p},{splice:function(t,e){var r,i,p,v,g,y,A=s(this),b=o(A),x=a(t,b),w=arguments.length;for(0===w?r=i=0:1===w?(r=0,i=b-x):(r=w-2,i=m(f(n(e),0),b-x)),l(b+r-i),p=h(A,i),v=0;v<i;v++)(g=x+v)in A&&u(p,v,A[g]);if(p.length=i,r<i){for(v=x;v<b-i;v++)y=v+r,(g=v+i)in A?A[y]=A[g]:d(A,y);for(v=b;v>b-i+r;v--)d(A,v-1)}else if(r>i)for(v=b-i;v>x;v--)y=v+r-1,(g=v+i-1)in A?A[y]=A[g]:d(A,y);for(v=0;v<r;v++)A[v+x]=arguments[v+2];return c(A,b-i+r),p}})},95362:(t,e,r)=>{"use strict";var i=r(11091),s=r(1907),a=Date,n=s(a.prototype.getTime);i({target:"Date",stat:!0},{now:function(){return n(new a)}})},56648:(t,e,r)=>{"use strict";var i=r(11091),s=r(13930),a=r(39298),n=r(46028),o=r(3701),c=r(45807);i({target:"Date",proto:!0,forced:r(98828)((function(){return null!==new Date(NaN).toJSON()||1!==s(Date.prototype.toJSON,{toISOString:function(){return 1}})}))},{toJSON:function(t){var e=a(this),r=n(e,"number");return"number"!=typeof r||isFinite(r)?"toISOString"in e||"Date"!==c(e)?e.toISOString():s(o,e):null}})},98537:()=>{},79307:(t,e,r)=>{"use strict";var i=r(11091),s=r(44673);i({target:"Function",proto:!0,forced:Function.bind!==s},{bind:s})},12344:(t,e,r)=>{"use strict";var i=r(11091),s=r(45951);i({global:!0,forced:s.globalThis!==s},{globalThis:s})},49721:(t,e,r)=>{"use strict";var i=r(11091),s=r(85582),a=r(76024),n=r(13930),o=r(1907),c=r(98828),l=r(62250),h=r(25594),u=r(93427),d=r(96656),p=r(19846),f=String,m=s("JSON","stringify"),v=o(/./.exec),g=o("".charAt),y=o("".charCodeAt),A=o("".replace),b=o(1.1.toString),x=/[\uD800-\uDFFF]/g,w=/^[\uD800-\uDBFF]$/,k=/^[\uDC00-\uDFFF]$/,T=!p||c((function(){var t=s("Symbol")("stringify detection");return"[null]"!==m([t])||"{}"!==m({a:t})||"{}"!==m(Object(t))})),_=c((function(){return'"\\udf06\\ud834"'!==m("\udf06\ud834")||'"\\udead"'!==m("\udead")})),I=function(t,e){var r=u(arguments),i=d(e);if(l(i)||void 0!==t&&!h(t))return r[1]=function(t,e){if(l(i)&&(e=n(i,this,f(t),e)),!h(e))return e},a(m,null,r)},S=function(t,e,r){var i=g(r,e-1),s=g(r,e+1);return v(w,t)&&!v(k,s)||v(k,t)&&!v(w,i)?"\\u"+b(y(t,0),16):t};m&&i({target:"JSON",stat:!0,arity:3,forced:T||_},{stringify:function(t,e,r){var i=u(arguments),s=a(T?I:m,null,i);return _&&"string"==typeof s?A(s,x,S):s}})},87024:(t,e,r)=>{"use strict";var i=r(45951);r(14840)(i.JSON,"JSON",!0)},68154:(t,e,r)=>{"use strict";r(17081)("Map",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),r(30217))},96835:(t,e,r)=>{"use strict";var i=r(11091),s=r(1907),a=r(82159),n=r(74239),o=r(24823),c=r(15703),l=r(7376),h=r(98828),u=c.Map,d=c.has,p=c.get,f=c.set,m=s([].push),v=l||h((function(){return 1!==u.groupBy("ab",(function(t){return t})).get("a").length}));i({target:"Map",stat:!0,forced:l||v},{groupBy:function(t,e){n(t),a(e);var r=new u,i=0;return o(t,(function(t){var s=e(t,i++);d(r,s)?m(p(r,s),t):f(r,s,[t])})),r}})},14676:(t,e,r)=>{"use strict";r(68154)},73066:(t,e,r)=>{"use strict";r(11091)({target:"Math",stat:!0},{log2:r(54744)})},38172:()=>{},46750:(t,e,r)=>{"use strict";var i=r(11091),s=r(39447),a=r(74284).f;i({target:"Object",stat:!0,forced:Object.defineProperty!==a,sham:!s},{defineProperty:a})},26750:(t,e,r)=>{"use strict";var i=r(11091),s=r(75681),a=r(98828),n=r(46285),o=r(61548).onFreeze,c=Object.freeze;i({target:"Object",stat:!0,forced:a((function(){c(1)})),sham:!s},{freeze:function(t){return c&&n(t)?c(o(t)):t}})},55264:(t,e,r)=>{"use strict";var i=r(11091),s=r(19846),a=r(98828),n=r(87170),o=r(39298);i({target:"Object",stat:!0,forced:!s||a((function(){n.f(1)}))},{getOwnPropertySymbols:function(t){var e=n.f;return e?e(o(t)):[]}})},38966:(t,e,r)=>{"use strict";var i=r(11091),s=r(98828),a=r(39298),n=r(15972),o=r(57382);i({target:"Object",stat:!0,forced:s((function(){n(1)})),sham:!o},{getPrototypeOf:function(t){return n(a(t))}})},83589:(t,e,r)=>{"use strict";var i=r(11091),s=r(39298),a=r(2875);i({target:"Object",stat:!0,forced:r(98828)((function(){a(1)}))},{keys:function(t){return a(s(t))}})},91906:(t,e,r)=>{"use strict";r(11091)({target:"Object",stat:!0},{setPrototypeOf:r(79192)})},86024:()=>{},9502:(t,e,r)=>{"use strict";var i=r(11091),s=r(27213);i({global:!0,forced:parseFloat!==s},{parseFloat:s})},42193:(t,e,r)=>{"use strict";var i=r(11091),s=r(72778);i({global:!0,forced:parseInt!==s},{parseInt:s})},57450:(t,e,r)=>{"use strict";var i=r(11091),s=r(13930),a=r(82159),n=r(56254),o=r(94420),c=r(24823);i({target:"Promise",stat:!0,forced:r(3282)},{allSettled:function(t){var e=this,r=n.f(e),i=r.resolve,l=r.reject,h=o((function(){var r=a(e.resolve),n=[],o=0,l=1;c(t,(function(t){var a=o++,c=!1;l++,s(r,e,t).then((function(t){c||(c=!0,n[a]={status:"fulfilled",value:t},--l||i(n))}),(function(t){c||(c=!0,n[a]={status:"rejected",reason:t},--l||i(n))}))})),--l||i(n)}));return h.error&&l(h.value),r.promise}})},6630:(t,e,r)=>{"use strict";var i=r(11091),s=r(13930),a=r(82159),n=r(56254),o=r(94420),c=r(24823);i({target:"Promise",stat:!0,forced:r(3282)},{all:function(t){var e=this,r=n.f(e),i=r.resolve,l=r.reject,h=o((function(){var r=a(e.resolve),n=[],o=0,h=1;c(t,(function(t){var a=o++,c=!1;h++,s(r,e,t).then((function(t){c||(c=!0,n[a]=t,--h||i(n))}),l)})),--h||i(n)}));return h.error&&l(h.value),r.promise}})},36415:(t,e,r)=>{"use strict";var i=r(11091),s=r(13930),a=r(82159),n=r(85582),o=r(56254),c=r(94420),l=r(24823),h=r(3282),u="No one promise resolved";i({target:"Promise",stat:!0,forced:h},{any:function(t){var e=this,r=n("AggregateError"),i=o.f(e),h=i.resolve,d=i.reject,p=c((function(){var i=a(e.resolve),n=[],o=0,c=1,p=!1;l(t,(function(t){var a=o++,l=!1;c++,s(i,e,t).then((function(t){l||p||(p=!0,h(t))}),(function(t){l||p||(l=!0,n[a]=t,--c||d(new r(n,u)))}))})),--c||d(new r(n,u))}));return p.error&&d(p.value),i.promise}})},91866:(t,e,r)=>{"use strict";var i=r(11091),s=r(7376),a=r(1759).CONSTRUCTOR,n=r(55463),o=r(85582),c=r(62250),l=r(68055),h=n&&n.prototype;if(i({target:"Promise",proto:!0,forced:a,real:!0},{catch:function(t){return this.then(void 0,t)}}),!s&&c(n)){var u=o("Promise").prototype.catch;h.catch!==u&&l(h,"catch",u,{unsafe:!0})}},3825:(t,e,r)=>{"use strict";var i,s,a,n,o=r(11091),c=r(7376),l=r(47586),h=r(45951),u=r(92046),d=r(13930),p=r(68055),f=r(79192),m=r(14840),v=r(47118),g=r(82159),y=r(62250),A=r(46285),b=r(59596),x=r(28450),w=r(49472).set,k=r(52292),T=r(73904),_=r(94420),I=r(1626),S=r(64932),P=r(55463),M=r(1759),C=r(56254),R="Promise",E=M.CONSTRUCTOR,D=M.REJECTION_EVENT,B=M.SUBCLASSING,L=S.getterFor(R),U=S.set,F=P&&P.prototype,$=P,O=F,N=h.TypeError,z=h.document,V=h.process,G=C.f,W=G,j=!!(z&&z.createEvent&&h.dispatchEvent),H="unhandledrejection",q=function(t){var e;return!(!A(t)||!y(e=t.then))&&e},Y=function(t,e){var r,i,s,a=e.value,n=1===e.state,o=n?t.ok:t.fail,c=t.resolve,l=t.reject,h=t.domain;try{o?(n||(2===e.rejection&&Z(e),e.rejection=1),!0===o?r=a:(h&&h.enter(),r=o(a),h&&(h.exit(),s=!0)),r===t.promise?l(new N("Promise-chain cycle")):(i=q(r))?d(i,r,c,l):c(r)):l(a)}catch(t){h&&!s&&h.exit(),l(t)}},K=function(t,e){t.notified||(t.notified=!0,k((function(){for(var r,i=t.reactions;r=i.get();)Y(r,t);t.notified=!1,e&&!t.rejection&&X(t)})))},Q=function(t,e,r){var i,s;j?((i=z.createEvent("Event")).promise=e,i.reason=r,i.initEvent(t,!1,!0),h.dispatchEvent(i)):i={promise:e,reason:r},!D&&(s=h["on"+t])?s(i):t===H&&T("Unhandled promise rejection",r)},X=function(t){d(w,h,(function(){var e,r=t.facade,i=t.value;if(J(t)&&(e=_((function(){l?V.emit("unhandledRejection",i,r):Q(H,r,i)})),t.rejection=l||J(t)?2:1,e.error))throw e.value}))},J=function(t){return 1!==t.rejection&&!t.parent},Z=function(t){d(w,h,(function(){var e=t.facade;l?V.emit("rejectionHandled",e):Q("rejectionhandled",e,t.value)}))},tt=function(t,e,r){return function(i){t(e,i,r)}},et=function(t,e,r){t.done||(t.done=!0,r&&(t=r),t.value=e,t.state=2,K(t,!0))},rt=function(t,e,r){if(!t.done){t.done=!0,r&&(t=r);try{if(t.facade===e)throw new N("Promise can't be resolved itself");var i=q(e);i?k((function(){var r={done:!1};try{d(i,e,tt(rt,r,t),tt(et,r,t))}catch(e){et(r,e,t)}})):(t.value=e,t.state=1,K(t,!1))}catch(e){et({done:!1},e,t)}}};if(E&&(O=($=function(t){b(this,O),g(t),d(i,this);var e=L(this);try{t(tt(rt,e),tt(et,e))}catch(t){et(e,t)}}).prototype,(i=function(t){U(this,{type:R,done:!1,notified:!1,parent:!1,reactions:new I,rejection:!1,state:0,value:null})}).prototype=p(O,"then",(function(t,e){var r=L(this),i=G(x(this,$));return r.parent=!0,i.ok=!y(t)||t,i.fail=y(e)&&e,i.domain=l?V.domain:void 0,0===r.state?r.reactions.add(i):k((function(){Y(i,r)})),i.promise})),s=function(){var t=new i,e=L(t);this.promise=t,this.resolve=tt(rt,e),this.reject=tt(et,e)},C.f=G=function(t){return t===$||t===a?new s(t):W(t)},!c&&y(P)&&F!==Object.prototype)){n=F.then,B||p(F,"then",(function(t,e){var r=this;return new $((function(t,e){d(n,r,t,e)})).then(t,e)}),{unsafe:!0});try{delete F.constructor}catch(t){}f&&f(F,O)}o({global:!0,constructor:!0,wrap:!0,forced:E},{Promise:$}),a=u.Promise,m($,R,!1,!0),v(R)},47714:(t,e,r)=>{"use strict";var i=r(11091),s=r(7376),a=r(55463),n=r(98828),o=r(85582),c=r(62250),l=r(28450),h=r(83569),u=r(68055),d=a&&a.prototype;if(i({target:"Promise",proto:!0,real:!0,forced:!!a&&n((function(){d.finally.call({then:function(){}},(function(){}))}))},{finally:function(t){var e=l(this,o("Promise")),r=c(t);return this.then(r?function(r){return h(e,t()).then((function(){return r}))}:t,r?function(r){return h(e,t()).then((function(){throw r}))}:t)}}),!s&&c(a)){var p=o("Promise").prototype.finally;d.finally!==p&&u(d,"finally",p,{unsafe:!0})}},65931:(t,e,r)=>{"use strict";r(3825),r(6630),r(91866),r(72736),r(17286),r(16761)},72736:(t,e,r)=>{"use strict";var i=r(11091),s=r(13930),a=r(82159),n=r(56254),o=r(94420),c=r(24823);i({target:"Promise",stat:!0,forced:r(3282)},{race:function(t){var e=this,r=n.f(e),i=r.reject,l=o((function(){var n=a(e.resolve);c(t,(function(t){s(n,e,t).then(r.resolve,i)}))}));return l.error&&i(l.value),r.promise}})},17286:(t,e,r)=>{"use strict";var i=r(11091),s=r(56254);i({target:"Promise",stat:!0,forced:r(1759).CONSTRUCTOR},{reject:function(t){var e=s.f(this);return(0,e.reject)(t),e.promise}})},16761:(t,e,r)=>{"use strict";var i=r(11091),s=r(85582),a=r(7376),n=r(55463),o=r(1759).CONSTRUCTOR,c=r(83569),l=s("Promise"),h=a&&!o;i({target:"Promise",stat:!0,forced:a||o},{resolve:function(t){return c(h&&this===l?n:this,t)}})},37380:(t,e,r)=>{"use strict";var i=r(11091),s=r(45951),a=r(76024),n=r(93427),o=r(56254),c=r(82159),l=r(94420),h=s.Promise,u=!1;i({target:"Promise",stat:!0,forced:!h||!h.try||l((function(){h.try((function(t){u=8===t}),8)})).error||!u},{try:function(t){var e=arguments.length>1?n(arguments,1):[],r=o.f(this),i=l((function(){return a(c(t),void 0,e)}));return(i.error?r.reject:r.resolve)(i.value),r.promise}})},25823:(t,e,r)=>{"use strict";var i=r(11091),s=r(56254);i({target:"Promise",stat:!0},{withResolvers:function(){var t=s.f(this);return{promise:t.promise,resolve:t.resolve,reject:t.reject}}})},85205:()=>{},51398:()=>{},9164:()=>{},71074:(t,e,r)=>{"use strict";var i=r(11091),s=r(1907),a=r(34849),n=RangeError,o=String.fromCharCode,c=String.fromCodePoint,l=s([].join);i({target:"String",stat:!0,arity:1,forced:!!c&&1!==c.length},{fromCodePoint:function(t){for(var e,r=[],i=arguments.length,s=0;i>s;){if(e=+arguments[s++],a(e,1114111)!==e)throw new n(e+" is not a valid code point");r[s]=e<65536?o(e):o(55296+((e-=65536)>>10),e%1024+56320)}return l(r,"")}})},19770:(t,e,r)=>{"use strict";var i=r(11091),s=r(1907),a=r(12074),n=r(74239),o=r(90160),c=r(25735),l=s("".indexOf);i({target:"String",proto:!0,forced:!c("includes")},{includes:function(t){return!!~l(o(n(this)),o(a(t)),arguments.length>1?arguments[1]:void 0)}})},7057:(t,e,r)=>{"use strict";var i=r(11470).charAt,s=r(90160),a=r(64932),n=r(60183),o=r(59550),c="String Iterator",l=a.set,h=a.getterFor(c);n(String,"String",(function(t){l(this,{type:c,string:s(t),index:0})}),(function(){var t,e=h(this),r=e.string,s=e.index;return s>=r.length?o(void 0,!0):(t=i(r,s),e.index+=t.length,o(t,!1))}))},8592:(t,e,r)=>{"use strict";r(11091)({target:"String",proto:!0},{repeat:r(69314)})},50929:(t,e,r)=>{"use strict";var i=r(11091),s=r(13930),a=r(1907),n=r(74239),o=r(62250),c=r(46285),l=r(72087),h=r(90160),u=r(29367),d=r(40663),p=r(67703),f=r(76264),m=r(7376),v=f("replace"),g=TypeError,y=a("".indexOf),A=a("".replace),b=a("".slice),x=Math.max;i({target:"String",proto:!0},{replaceAll:function(t,e){var r,i,a,f,w,k,T,_,I,S,P=n(this),M=0,C="";if(c(t)){if((r=l(t))&&(i=h(n(d(t))),!~y(i,"g")))throw new g("`.replaceAll` does not allow non-global regexes");if(a=u(t,v))return s(a,t,P,e);if(m&&r)return A(h(P),t,e)}for(f=h(P),w=h(t),(k=o(e))||(e=h(e)),T=w.length,_=x(1,T),I=y(f,w);-1!==I;)S=k?h(e(w,I,f)):p(w,f,I,[],void 0,e),C+=b(f,M,I)+S,M=I+T,I=I+_>f.length?-1:y(f,w,I+_);return M<f.length&&(C+=b(f,M)),C}})},21995:()=>{},50727:(t,e,r)=>{"use strict";var i=r(11091),s=r(65993).trim;i({target:"String",proto:!0,forced:r(95819)("trim")},{trim:function(){return s(this)}})},65546:(t,e,r)=>{"use strict";r(20366)("asyncDispose")},3997:(t,e,r)=>{"use strict";r(20366)("asyncIterator")},23674:(t,e,r)=>{"use strict";var i=r(11091),s=r(45951),a=r(13930),n=r(1907),o=r(7376),c=r(39447),l=r(19846),h=r(98828),u=r(49724),d=r(88280),p=r(36624),f=r(27374),m=r(70470),v=r(90160),g=r(75817),y=r(58075),A=r(2875),b=r(24443),x=r(25407),w=r(87170),k=r(13846),T=r(74284),_=r(42220),I=r(22574),S=r(68055),P=r(89251),M=r(85816),C=r(92522),R=r(38530),E=r(6499),D=r(76264),B=r(80560),L=r(20366),U=r(83467),F=r(14840),$=r(64932),O=r(70726).forEach,N=C("hidden"),z="Symbol",V="prototype",G=$.set,W=$.getterFor(z),j=Object[V],H=s.Symbol,q=H&&H[V],Y=s.RangeError,K=s.TypeError,Q=s.QObject,X=k.f,J=T.f,Z=x.f,tt=I.f,et=n([].push),rt=M("symbols"),it=M("op-symbols"),st=M("wks"),at=!Q||!Q[V]||!Q[V].findChild,nt=function(t,e,r){var i=X(j,e);i&&delete j[e],J(t,e,r),i&&t!==j&&J(j,e,i)},ot=c&&h((function(){return 7!==y(J({},"a",{get:function(){return J(this,"a",{value:7}).a}})).a}))?nt:J,ct=function(t,e){var r=rt[t]=y(q);return G(r,{type:z,tag:t,description:e}),c||(r.description=e),r},lt=function(t,e,r){t===j&&lt(it,e,r),p(t);var i=m(e);return p(r),u(rt,i)?(r.enumerable?(u(t,N)&&t[N][i]&&(t[N][i]=!1),r=y(r,{enumerable:g(0,!1)})):(u(t,N)||J(t,N,g(1,y(null))),t[N][i]=!0),ot(t,i,r)):J(t,i,r)},ht=function(t,e){p(t);var r=f(e),i=A(r).concat(ft(r));return O(i,(function(e){c&&!a(ut,r,e)||lt(t,e,r[e])})),t},ut=function(t){var e=m(t),r=a(tt,this,e);return!(this===j&&u(rt,e)&&!u(it,e))&&(!(r||!u(this,e)||!u(rt,e)||u(this,N)&&this[N][e])||r)},dt=function(t,e){var r=f(t),i=m(e);if(r!==j||!u(rt,i)||u(it,i)){var s=X(r,i);return!s||!u(rt,i)||u(r,N)&&r[N][i]||(s.enumerable=!0),s}},pt=function(t){var e=Z(f(t)),r=[];return O(e,(function(t){u(rt,t)||u(R,t)||et(r,t)})),r},ft=function(t){var e=t===j,r=Z(e?it:f(t)),i=[];return O(r,(function(t){!u(rt,t)||e&&!u(j,t)||et(i,rt[t])})),i};l||(S(q=(H=function(){if(d(q,this))throw new K("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?v(arguments[0]):void 0,e=E(t),r=function(t){var i=void 0===this?s:this;i===j&&a(r,it,t),u(i,N)&&u(i[N],e)&&(i[N][e]=!1);var n=g(1,t);try{ot(i,e,n)}catch(t){if(!(t instanceof Y))throw t;nt(i,e,n)}};return c&&at&&ot(j,e,{configurable:!0,set:r}),ct(e,t)})[V],"toString",(function(){return W(this).tag})),S(H,"withoutSetter",(function(t){return ct(E(t),t)})),I.f=ut,T.f=lt,_.f=ht,k.f=dt,b.f=x.f=pt,w.f=ft,B.f=function(t){return ct(D(t),t)},c&&(P(q,"description",{configurable:!0,get:function(){return W(this).description}}),o||S(j,"propertyIsEnumerable",ut,{unsafe:!0}))),i({global:!0,constructor:!0,wrap:!0,forced:!l,sham:!l},{Symbol:H}),O(A(st),(function(t){L(t)})),i({target:z,stat:!0,forced:!l},{useSetter:function(){at=!0},useSimple:function(){at=!1}}),i({target:"Object",stat:!0,forced:!l,sham:!c},{create:function(t,e){return void 0===e?y(t):ht(y(t),e)},defineProperty:lt,defineProperties:ht,getOwnPropertyDescriptor:dt}),i({target:"Object",stat:!0,forced:!l},{getOwnPropertyNames:pt}),U(),F(H,z),R[N]=!0},75084:()=>{},32499:(t,e,r)=>{"use strict";r(20366)("dispose")},13313:(t,e,r)=>{"use strict";var i=r(11091),s=r(85582),a=r(49724),n=r(90160),o=r(85816),c=r(84411),l=o("string-to-symbol-registry"),h=o("symbol-to-string-registry");i({target:"Symbol",stat:!0,forced:!c},{for:function(t){var e=n(t);if(a(l,e))return l[e];var r=s("Symbol")(e);return l[e]=r,h[r]=e,r}})},2596:(t,e,r)=>{"use strict";r(20366)("hasInstance")},5721:(t,e,r)=>{"use strict";r(20366)("isConcatSpreadable")},44954:(t,e,r)=>{"use strict";r(20366)("iterator")},94452:(t,e,r)=>{"use strict";r(23674),r(13313),r(10751),r(49721),r(55264)},10751:(t,e,r)=>{"use strict";var i=r(11091),s=r(49724),a=r(25594),n=r(4640),o=r(85816),c=r(84411),l=o("symbol-to-string-registry");i({target:"Symbol",stat:!0,forced:!c},{keyFor:function(t){if(!a(t))throw new TypeError(n(t)+" is not a symbol");if(s(l,t))return l[t]}})},73377:(t,e,r)=>{"use strict";r(20366)("matchAll")},44123:(t,e,r)=>{"use strict";r(20366)("match")},72230:(t,e,r)=>{"use strict";r(20366)("replace")},15344:(t,e,r)=>{"use strict";r(20366)("search")},51660:(t,e,r)=>{"use strict";r(20366)("species")},4610:(t,e,r)=>{"use strict";r(20366)("split")},33669:(t,e,r)=>{"use strict";var i=r(20366),s=r(83467);i("toPrimitive"),s()},44810:(t,e,r)=>{"use strict";var i=r(85582),s=r(20366),a=r(14840);s("toStringTag"),a(i("Symbol"),"Symbol")},93325:(t,e,r)=>{"use strict";r(20366)("unscopables")},20768:(t,e,r)=>{"use strict";var i=r(76264),s=r(74284).f,a=i("metadata"),n=Function.prototype;void 0===n[a]&&s(n,a,{value:null})},60397:(t,e,r)=>{"use strict";r(12344)},36038:(t,e,r)=>{"use strict";r(50929)},8549:(t,e,r)=>{"use strict";r(65546)},81697:(t,e,r)=>{"use strict";r(20366)("customMatcher")},87152:(t,e,r)=>{"use strict";r(32499)},13939:(t,e,r)=>{"use strict";r(11091)({target:"Symbol",stat:!0},{isRegisteredSymbol:r(12595)})},63422:(t,e,r)=>{"use strict";r(11091)({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:r(12595)})},21785:(t,e,r)=>{"use strict";r(11091)({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:r(69197)})},70036:(t,e,r)=>{"use strict";r(11091)({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:r(69197)})},28703:(t,e,r)=>{"use strict";r(20366)("matcher")},86878:(t,e,r)=>{"use strict";r(20366)("metadataKey")},11372:(t,e,r)=>{"use strict";r(20366)("metadata")},84664:(t,e,r)=>{"use strict";r(20366)("observable")},59671:(t,e,r)=>{"use strict";r(20366)("patternMatch")},50359:(t,e,r)=>{"use strict";r(20366)("replaceAll")},3871:(t,e,r)=>{"use strict";var i=r(11091),s=r(45951),a=r(49472).clear;i({global:!0,bind:!0,enumerable:!0,forced:s.clearImmediate!==a},{clearImmediate:a})},60237:()=>{},12560:(t,e,r)=>{"use strict";r(99363);var i=r(19287),s=r(45951),a=r(14840),n=r(93742);for(var o in i)a(s[o],o),n[o]=n.Array},34351:(t,e,r)=>{"use strict";r(3871),r(22910)},22910:(t,e,r)=>{"use strict";var i=r(11091),s=r(45951),a=r(49472).set,n=r(70485),o=s.setImmediate?n(a,!1):a;i({global:!0,bind:!0,enumerable:!0,forced:s.setImmediate!==o},{setImmediate:o})},21978:(t,e,r)=>{"use strict";var i=r(11091),s=r(45951),a=r(70485)(s.setInterval,!0);i({global:!0,bind:!0,forced:s.setInterval!==a},{setInterval:a})},66496:(t,e,r)=>{"use strict";var i=r(11091),s=r(45951),a=r(70485)(s.setTimeout,!0);i({global:!0,bind:!0,forced:s.setTimeout!==a},{setTimeout:a})},73342:(t,e,r)=>{"use strict";r(21978),r(66496)},67105:(t,e,r)=>{"use strict";r(99363),r(71074);var i=r(11091),s=r(45951),a=r(52098),n=r(85582),o=r(13930),c=r(1907),l=r(39447),h=r(34791),u=r(68055),d=r(89251),p=r(12802),f=r(14840),m=r(47181),v=r(64932),g=r(59596),y=r(62250),A=r(49724),b=r(28311),x=r(73948),w=r(36624),k=r(46285),T=r(90160),_=r(58075),I=r(75817),S=r(10300),P=r(73448),M=r(59550),C=r(24787),R=r(76264),E=r(34321),D=R("iterator"),B="URLSearchParams",L=B+"Iterator",U=v.set,F=v.getterFor(B),$=v.getterFor(L),O=a("fetch"),N=a("Request"),z=a("Headers"),V=N&&N.prototype,G=z&&z.prototype,W=s.TypeError,j=s.encodeURIComponent,H=String.fromCharCode,q=n("String","fromCodePoint"),Y=parseInt,K=c("".charAt),Q=c([].join),X=c([].push),J=c("".replace),Z=c([].shift),tt=c([].splice),et=c("".split),rt=c("".slice),it=c(/./.exec),st=/\+/g,at=/^[0-9a-f]+$/i,nt=function(t,e){var r=rt(t,e,e+2);return it(at,r)?Y(r,16):NaN},ot=function(t){for(var e=0,r=128;r>0&&t&r;r>>=1)e++;return e},ct=function(t){var e=null;switch(t.length){case 1:e=t[0];break;case 2:e=(31&t[0])<<6|63&t[1];break;case 3:e=(15&t[0])<<12|(63&t[1])<<6|63&t[2];break;case 4:e=(7&t[0])<<18|(63&t[1])<<12|(63&t[2])<<6|63&t[3]}return e>1114111?null:e},lt=function(t){for(var e=(t=J(t,st," ")).length,r="",i=0;i<e;){var s=K(t,i);if("%"===s){if("%"===K(t,i+1)||i+3>e){r+="%",i++;continue}var a=nt(t,i+1);if(a!=a){r+=s,i++;continue}i+=2;var n=ot(a);if(0===n)s=H(a);else{if(1===n||n>4){r+="",i++;continue}for(var o=[a],c=1;c<n&&!(3+ ++i>e||"%"!==K(t,i));){var l=nt(t,i+1);if(l!=l){i+=3;break}if(l>191||l<128)break;X(o,l),i+=2,c++}if(o.length!==n){r+="";continue}var h=ct(o);null===h?r+="":s=q(h)}}r+=s,i++}return r},ht=/[!'()~]|%20/g,ut={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},dt=function(t){return ut[t]},pt=function(t){return J(j(t),ht,dt)},ft=m((function(t,e){U(this,{type:L,target:F(t).entries,index:0,kind:e})}),B,(function(){var t=$(this),e=t.target,r=t.index++;if(!e||r>=e.length)return t.target=null,M(void 0,!0);var i=e[r];switch(t.kind){case"keys":return M(i.key,!1);case"values":return M(i.value,!1)}return M([i.key,i.value],!1)}),!0),mt=function(t){this.entries=[],this.url=null,void 0!==t&&(k(t)?this.parseObject(t):this.parseQuery("string"==typeof t?"?"===K(t,0)?rt(t,1):t:T(t)))};mt.prototype={type:B,bindURL:function(t){this.url=t,this.update()},parseObject:function(t){var e,r,i,s,a,n,c,l=this.entries,h=P(t);if(h)for(r=(e=S(t,h)).next;!(i=o(r,e)).done;){if(a=(s=S(w(i.value))).next,(n=o(a,s)).done||(c=o(a,s)).done||!o(a,s).done)throw new W("Expected sequence with length 2");X(l,{key:T(n.value),value:T(c.value)})}else for(var u in t)A(t,u)&&X(l,{key:u,value:T(t[u])})},parseQuery:function(t){if(t)for(var e,r,i=this.entries,s=et(t,"&"),a=0;a<s.length;)(e=s[a++]).length&&(r=et(e,"="),X(i,{key:lt(Z(r)),value:lt(Q(r,"="))}))},serialize:function(){for(var t,e=this.entries,r=[],i=0;i<e.length;)t=e[i++],X(r,pt(t.key)+"="+pt(t.value));return Q(r,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var vt=function(){g(this,gt);var t=U(this,new mt(arguments.length>0?arguments[0]:void 0));l||(this.size=t.entries.length)},gt=vt.prototype;if(p(gt,{append:function(t,e){var r=F(this);C(arguments.length,2),X(r.entries,{key:T(t),value:T(e)}),l||this.length++,r.updateURL()},delete:function(t){for(var e=F(this),r=C(arguments.length,1),i=e.entries,s=T(t),a=r<2?void 0:arguments[1],n=void 0===a?a:T(a),o=0;o<i.length;){var c=i[o];if(c.key!==s||void 0!==n&&c.value!==n)o++;else if(tt(i,o,1),void 0!==n)break}l||(this.size=i.length),e.updateURL()},get:function(t){var e=F(this).entries;C(arguments.length,1);for(var r=T(t),i=0;i<e.length;i++)if(e[i].key===r)return e[i].value;return null},getAll:function(t){var e=F(this).entries;C(arguments.length,1);for(var r=T(t),i=[],s=0;s<e.length;s++)e[s].key===r&&X(i,e[s].value);return i},has:function(t){for(var e=F(this).entries,r=C(arguments.length,1),i=T(t),s=r<2?void 0:arguments[1],a=void 0===s?s:T(s),n=0;n<e.length;){var o=e[n++];if(o.key===i&&(void 0===a||o.value===a))return!0}return!1},set:function(t,e){var r=F(this);C(arguments.length,1);for(var i,s=r.entries,a=!1,n=T(t),o=T(e),c=0;c<s.length;c++)(i=s[c]).key===n&&(a?tt(s,c--,1):(a=!0,i.value=o));a||X(s,{key:n,value:o}),l||(this.size=s.length),r.updateURL()},sort:function(){var t=F(this);E(t.entries,(function(t,e){return t.key>e.key?1:-1})),t.updateURL()},forEach:function(t){for(var e,r=F(this).entries,i=b(t,arguments.length>1?arguments[1]:void 0),s=0;s<r.length;)i((e=r[s++]).value,e.key,this)},keys:function(){return new ft(this,"keys")},values:function(){return new ft(this,"values")},entries:function(){return new ft(this,"entries")}},{enumerable:!0}),u(gt,D,gt.entries,{name:"entries"}),u(gt,"toString",(function(){return F(this).serialize()}),{enumerable:!0}),l&&d(gt,"size",{get:function(){return F(this).entries.length},configurable:!0,enumerable:!0}),f(vt,B),i({global:!0,constructor:!0,forced:!h},{URLSearchParams:vt}),!h&&y(z)){var yt=c(G.has),At=c(G.set),bt=function(t){if(k(t)){var e,r=t.body;if(x(r)===B)return e=t.headers?new z(t.headers):new z,yt(e,"content-type")||At(e,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),_(t,{body:I(0,T(r)),headers:I(0,e)})}return t};if(y(O)&&i({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(t){return O(t,arguments.length>1?bt(arguments[1]):{})}}),y(N)){var xt=function(t){return g(this,V),new N(t,arguments.length>1?bt(arguments[1]):{})};V.constructor=xt,xt.prototype=V,i({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:xt})}}t.exports={URLSearchParams:vt,getState:F}},75042:()=>{},17649:()=>{},66299:(t,e,r)=>{"use strict";r(67105)},83604:()=>{},28669:(t,e,r)=>{"use strict";var i=r(11091),s=r(85582),a=r(98828),n=r(24787),o=r(90160),c=r(34791),l=s("URL"),h=c&&a((function(){l.canParse()})),u=a((function(){return 1!==l.canParse.length}));i({target:"URL",stat:!0,forced:!h||u},{canParse:function(t){var e=n(arguments.length,1),r=o(t),i=e<2||void 0===arguments[1]?void 0:o(arguments[1]);try{return!!new l(r,i)}catch(t){return!1}}})},56909:(t,e,r)=>{"use strict";r(7057);var i,s=r(11091),a=r(39447),n=r(34791),o=r(45951),c=r(28311),l=r(1907),h=r(68055),u=r(89251),d=r(59596),p=r(49724),f=r(29538),m=r(11229),v=r(93427),g=r(11470).codeAt,y=r(79156),A=r(90160),b=r(14840),x=r(24787),w=r(67105),k=r(64932),T=k.set,_=k.getterFor("URL"),I=w.URLSearchParams,S=w.getState,P=o.URL,M=o.TypeError,C=o.parseInt,R=Math.floor,E=Math.pow,D=l("".charAt),B=l(/./.exec),L=l([].join),U=l(1.1.toString),F=l([].pop),$=l([].push),O=l("".replace),N=l([].shift),z=l("".split),V=l("".slice),G=l("".toLowerCase),W=l([].unshift),j="Invalid scheme",H="Invalid host",q="Invalid port",Y=/[a-z]/i,K=/[\d+-.a-z]/i,Q=/\d/,X=/^0x/i,J=/^[0-7]+$/,Z=/^\d+$/,tt=/^[\da-f]+$/i,et=/[\0\t\n\r #%/:<>?@[\\\]^|]/,rt=/[\0\t\n\r #/:<>?@[\\\]^|]/,it=/^[\u0000-\u0020]+/,st=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,at=/[\t\n\r]/g,nt=function(t){var e,r,i,s;if("number"==typeof t){for(e=[],r=0;r<4;r++)W(e,t%256),t=R(t/256);return L(e,".")}if("object"==typeof t){for(e="",i=function(t){for(var e=null,r=1,i=null,s=0,a=0;a<8;a++)0!==t[a]?(s>r&&(e=i,r=s),i=null,s=0):(null===i&&(i=a),++s);return s>r?i:e}(t),r=0;r<8;r++)s&&0===t[r]||(s&&(s=!1),i===r?(e+=r?":":"::",s=!0):(e+=U(t[r],16),r<7&&(e+=":")));return"["+e+"]"}return t},ot={},ct=f({},ot,{" ":1,'"':1,"<":1,">":1,"`":1}),lt=f({},ct,{"#":1,"?":1,"{":1,"}":1}),ht=f({},lt,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),ut=function(t,e){var r=g(t,0);return r>32&&r<127&&!p(e,t)?t:encodeURIComponent(t)},dt={ftp:21,file:null,http:80,https:443,ws:80,wss:443},pt=function(t,e){var r;return 2===t.length&&B(Y,D(t,0))&&(":"===(r=D(t,1))||!e&&"|"===r)},ft=function(t){var e;return t.length>1&&pt(V(t,0,2))&&(2===t.length||"/"===(e=D(t,2))||"\\"===e||"?"===e||"#"===e)},mt=function(t){return"."===t||"%2e"===G(t)},vt={},gt={},yt={},At={},bt={},xt={},wt={},kt={},Tt={},_t={},It={},St={},Pt={},Mt={},Ct={},Rt={},Et={},Dt={},Bt={},Lt={},Ut={},Ft=function(t,e,r){var i,s,a,n=A(t);if(e){if(s=this.parse(n))throw new M(s);this.searchParams=null}else{if(void 0!==r&&(i=new Ft(r,!0)),s=this.parse(n,null,i))throw new M(s);(a=S(new I)).bindURL(this),this.searchParams=a}};Ft.prototype={type:"URL",parse:function(t,e,r){var s,a,n,o,c,l=this,h=e||vt,u=0,d="",f=!1,g=!1,y=!1;for(t=A(t),e||(l.scheme="",l.username="",l.password="",l.host=null,l.port=null,l.path=[],l.query=null,l.fragment=null,l.cannotBeABaseURL=!1,t=O(t,it,""),t=O(t,st,"$1")),t=O(t,at,""),s=m(t);u<=s.length;){switch(a=s[u],h){case vt:if(!a||!B(Y,a)){if(e)return j;h=yt;continue}d+=G(a),h=gt;break;case gt:if(a&&(B(K,a)||"+"===a||"-"===a||"."===a))d+=G(a);else{if(":"!==a){if(e)return j;d="",h=yt,u=0;continue}if(e&&(l.isSpecial()!==p(dt,d)||"file"===d&&(l.includesCredentials()||null!==l.port)||"file"===l.scheme&&!l.host))return;if(l.scheme=d,e)return void(l.isSpecial()&&dt[l.scheme]===l.port&&(l.port=null));d="","file"===l.scheme?h=Mt:l.isSpecial()&&r&&r.scheme===l.scheme?h=At:l.isSpecial()?h=kt:"/"===s[u+1]?(h=bt,u++):(l.cannotBeABaseURL=!0,$(l.path,""),h=Bt)}break;case yt:if(!r||r.cannotBeABaseURL&&"#"!==a)return j;if(r.cannotBeABaseURL&&"#"===a){l.scheme=r.scheme,l.path=v(r.path),l.query=r.query,l.fragment="",l.cannotBeABaseURL=!0,h=Ut;break}h="file"===r.scheme?Mt:xt;continue;case At:if("/"!==a||"/"!==s[u+1]){h=xt;continue}h=Tt,u++;break;case bt:if("/"===a){h=_t;break}h=Dt;continue;case xt:if(l.scheme=r.scheme,a===i)l.username=r.username,l.password=r.password,l.host=r.host,l.port=r.port,l.path=v(r.path),l.query=r.query;else if("/"===a||"\\"===a&&l.isSpecial())h=wt;else if("?"===a)l.username=r.username,l.password=r.password,l.host=r.host,l.port=r.port,l.path=v(r.path),l.query="",h=Lt;else{if("#"!==a){l.username=r.username,l.password=r.password,l.host=r.host,l.port=r.port,l.path=v(r.path),l.path.length--,h=Dt;continue}l.username=r.username,l.password=r.password,l.host=r.host,l.port=r.port,l.path=v(r.path),l.query=r.query,l.fragment="",h=Ut}break;case wt:if(!l.isSpecial()||"/"!==a&&"\\"!==a){if("/"!==a){l.username=r.username,l.password=r.password,l.host=r.host,l.port=r.port,h=Dt;continue}h=_t}else h=Tt;break;case kt:if(h=Tt,"/"!==a||"/"!==D(d,u+1))continue;u++;break;case Tt:if("/"!==a&&"\\"!==a){h=_t;continue}break;case _t:if("@"===a){f&&(d="%40"+d),f=!0,n=m(d);for(var b=0;b<n.length;b++){var x=n[b];if(":"!==x||y){var w=ut(x,ht);y?l.password+=w:l.username+=w}else y=!0}d=""}else if(a===i||"/"===a||"?"===a||"#"===a||"\\"===a&&l.isSpecial()){if(f&&""===d)return"Invalid authority";u-=m(d).length+1,d="",h=It}else d+=a;break;case It:case St:if(e&&"file"===l.scheme){h=Rt;continue}if(":"!==a||g){if(a===i||"/"===a||"?"===a||"#"===a||"\\"===a&&l.isSpecial()){if(l.isSpecial()&&""===d)return H;if(e&&""===d&&(l.includesCredentials()||null!==l.port))return;if(o=l.parseHost(d))return o;if(d="",h=Et,e)return;continue}"["===a?g=!0:"]"===a&&(g=!1),d+=a}else{if(""===d)return H;if(o=l.parseHost(d))return o;if(d="",h=Pt,e===St)return}break;case Pt:if(!B(Q,a)){if(a===i||"/"===a||"?"===a||"#"===a||"\\"===a&&l.isSpecial()||e){if(""!==d){var k=C(d,10);if(k>65535)return q;l.port=l.isSpecial()&&k===dt[l.scheme]?null:k,d=""}if(e)return;h=Et;continue}return q}d+=a;break;case Mt:if(l.scheme="file","/"===a||"\\"===a)h=Ct;else{if(!r||"file"!==r.scheme){h=Dt;continue}switch(a){case i:l.host=r.host,l.path=v(r.path),l.query=r.query;break;case"?":l.host=r.host,l.path=v(r.path),l.query="",h=Lt;break;case"#":l.host=r.host,l.path=v(r.path),l.query=r.query,l.fragment="",h=Ut;break;default:ft(L(v(s,u),""))||(l.host=r.host,l.path=v(r.path),l.shortenPath()),h=Dt;continue}}break;case Ct:if("/"===a||"\\"===a){h=Rt;break}r&&"file"===r.scheme&&!ft(L(v(s,u),""))&&(pt(r.path[0],!0)?$(l.path,r.path[0]):l.host=r.host),h=Dt;continue;case Rt:if(a===i||"/"===a||"\\"===a||"?"===a||"#"===a){if(!e&&pt(d))h=Dt;else if(""===d){if(l.host="",e)return;h=Et}else{if(o=l.parseHost(d))return o;if("localhost"===l.host&&(l.host=""),e)return;d="",h=Et}continue}d+=a;break;case Et:if(l.isSpecial()){if(h=Dt,"/"!==a&&"\\"!==a)continue}else if(e||"?"!==a)if(e||"#"!==a){if(a!==i&&(h=Dt,"/"!==a))continue}else l.fragment="",h=Ut;else l.query="",h=Lt;break;case Dt:if(a===i||"/"===a||"\\"===a&&l.isSpecial()||!e&&("?"===a||"#"===a)){if(".."===(c=G(c=d))||"%2e."===c||".%2e"===c||"%2e%2e"===c?(l.shortenPath(),"/"===a||"\\"===a&&l.isSpecial()||$(l.path,"")):mt(d)?"/"===a||"\\"===a&&l.isSpecial()||$(l.path,""):("file"===l.scheme&&!l.path.length&&pt(d)&&(l.host&&(l.host=""),d=D(d,0)+":"),$(l.path,d)),d="","file"===l.scheme&&(a===i||"?"===a||"#"===a))for(;l.path.length>1&&""===l.path[0];)N(l.path);"?"===a?(l.query="",h=Lt):"#"===a&&(l.fragment="",h=Ut)}else d+=ut(a,lt);break;case Bt:"?"===a?(l.query="",h=Lt):"#"===a?(l.fragment="",h=Ut):a!==i&&(l.path[0]+=ut(a,ot));break;case Lt:e||"#"!==a?a!==i&&("'"===a&&l.isSpecial()?l.query+="%27":l.query+="#"===a?"%23":ut(a,ot)):(l.fragment="",h=Ut);break;case Ut:a!==i&&(l.fragment+=ut(a,ct))}u++}},parseHost:function(t){var e,r,i;if("["===D(t,0)){if("]"!==D(t,t.length-1))return H;if(e=function(t){var e,r,i,s,a,n,o,c=[0,0,0,0,0,0,0,0],l=0,h=null,u=0,d=function(){return D(t,u)};if(":"===d()){if(":"!==D(t,1))return;u+=2,h=++l}for(;d();){if(8===l)return;if(":"!==d()){for(e=r=0;r<4&&B(tt,d());)e=16*e+C(d(),16),u++,r++;if("."===d()){if(0===r)return;if(u-=r,l>6)return;for(i=0;d();){if(s=null,i>0){if(!("."===d()&&i<4))return;u++}if(!B(Q,d()))return;for(;B(Q,d());){if(a=C(d(),10),null===s)s=a;else{if(0===s)return;s=10*s+a}if(s>255)return;u++}c[l]=256*c[l]+s,2!=++i&&4!==i||l++}if(4!==i)return;break}if(":"===d()){if(u++,!d())return}else if(d())return;c[l++]=e}else{if(null!==h)return;u++,h=++l}}if(null!==h)for(n=l-h,l=7;0!==l&&n>0;)o=c[l],c[l--]=c[h+n-1],c[h+--n]=o;else if(8!==l)return;return c}(V(t,1,-1)),!e)return H;this.host=e}else if(this.isSpecial()){if(t=y(t),B(et,t))return H;if(e=function(t){var e,r,i,s,a,n,o,c=z(t,".");if(c.length&&""===c[c.length-1]&&c.length--,(e=c.length)>4)return t;for(r=[],i=0;i<e;i++){if(""===(s=c[i]))return t;if(a=10,s.length>1&&"0"===D(s,0)&&(a=B(X,s)?16:8,s=V(s,8===a?1:2)),""===s)n=0;else{if(!B(10===a?Z:8===a?J:tt,s))return t;n=C(s,a)}$(r,n)}for(i=0;i<e;i++)if(n=r[i],i===e-1){if(n>=E(256,5-e))return null}else if(n>255)return null;for(o=F(r),i=0;i<r.length;i++)o+=r[i]*E(256,3-i);return o}(t),null===e)return H;this.host=e}else{if(B(rt,t))return H;for(e="",r=m(t),i=0;i<r.length;i++)e+=ut(r[i],ot);this.host=e}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"===this.scheme},includesCredentials:function(){return""!==this.username||""!==this.password},isSpecial:function(){return p(dt,this.scheme)},shortenPath:function(){var t=this.path,e=t.length;!e||"file"===this.scheme&&1===e&&pt(t[0],!0)||t.length--},serialize:function(){var t=this,e=t.scheme,r=t.username,i=t.password,s=t.host,a=t.port,n=t.path,o=t.query,c=t.fragment,l=e+":";return null!==s?(l+="//",t.includesCredentials()&&(l+=r+(i?":"+i:"")+"@"),l+=nt(s),null!==a&&(l+=":"+a)):"file"===e&&(l+="//"),l+=t.cannotBeABaseURL?n[0]:n.length?"/"+L(n,"/"):"",null!==o&&(l+="?"+o),null!==c&&(l+="#"+c),l},setHref:function(t){var e=this.parse(t);if(e)throw new M(e);this.searchParams.update()},getOrigin:function(){var t=this.scheme,e=this.port;if("blob"===t)try{return new $t(t.path[0]).origin}catch(t){return"null"}return"file"!==t&&this.isSpecial()?t+"://"+nt(this.host)+(null!==e?":"+e:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(t){this.parse(A(t)+":",vt)},getUsername:function(){return this.username},setUsername:function(t){var e=m(A(t));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var r=0;r<e.length;r++)this.username+=ut(e[r],ht)}},getPassword:function(){return this.password},setPassword:function(t){var e=m(A(t));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var r=0;r<e.length;r++)this.password+=ut(e[r],ht)}},getHost:function(){var t=this.host,e=this.port;return null===t?"":null===e?nt(t):nt(t)+":"+e},setHost:function(t){this.cannotBeABaseURL||this.parse(t,It)},getHostname:function(){var t=this.host;return null===t?"":nt(t)},setHostname:function(t){this.cannotBeABaseURL||this.parse(t,St)},getPort:function(){var t=this.port;return null===t?"":A(t)},setPort:function(t){this.cannotHaveUsernamePasswordPort()||(""===(t=A(t))?this.port=null:this.parse(t,Pt))},getPathname:function(){var t=this.path;return this.cannotBeABaseURL?t[0]:t.length?"/"+L(t,"/"):""},setPathname:function(t){this.cannotBeABaseURL||(this.path=[],this.parse(t,Et))},getSearch:function(){var t=this.query;return t?"?"+t:""},setSearch:function(t){""===(t=A(t))?this.query=null:("?"===D(t,0)&&(t=V(t,1)),this.query="",this.parse(t,Lt)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var t=this.fragment;return t?"#"+t:""},setHash:function(t){""!==(t=A(t))?("#"===D(t,0)&&(t=V(t,1)),this.fragment="",this.parse(t,Ut)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var $t=function(t){var e=d(this,Ot),r=x(arguments.length,1)>1?arguments[1]:void 0,i=T(e,new Ft(t,!1,r));a||(e.href=i.serialize(),e.origin=i.getOrigin(),e.protocol=i.getProtocol(),e.username=i.getUsername(),e.password=i.getPassword(),e.host=i.getHost(),e.hostname=i.getHostname(),e.port=i.getPort(),e.pathname=i.getPathname(),e.search=i.getSearch(),e.searchParams=i.getSearchParams(),e.hash=i.getHash())},Ot=$t.prototype,Nt=function(t,e){return{get:function(){return _(this)[t]()},set:e&&function(t){return _(this)[e](t)},configurable:!0,enumerable:!0}};if(a&&(u(Ot,"href",Nt("serialize","setHref")),u(Ot,"origin",Nt("getOrigin")),u(Ot,"protocol",Nt("getProtocol","setProtocol")),u(Ot,"username",Nt("getUsername","setUsername")),u(Ot,"password",Nt("getPassword","setPassword")),u(Ot,"host",Nt("getHost","setHost")),u(Ot,"hostname",Nt("getHostname","setHostname")),u(Ot,"port",Nt("getPort","setPort")),u(Ot,"pathname",Nt("getPathname","setPathname")),u(Ot,"search",Nt("getSearch","setSearch")),u(Ot,"searchParams",Nt("getSearchParams")),u(Ot,"hash",Nt("getHash","setHash"))),h(Ot,"toJSON",(function(){return _(this).serialize()}),{enumerable:!0}),h(Ot,"toString",(function(){return _(this).serialize()}),{enumerable:!0}),P){var zt=P.createObjectURL,Vt=P.revokeObjectURL;zt&&h($t,"createObjectURL",c(zt,P)),Vt&&h($t,"revokeObjectURL",c(Vt,P))}b($t,"URL"),s({global:!0,constructor:!0,forced:!n,sham:!a},{URL:$t})},33487:(t,e,r)=>{"use strict";r(56909)},58670:(t,e,r)=>{"use strict";var i=r(11091),s=r(85582),a=r(24787),n=r(90160),o=r(34791),c=s("URL");i({target:"URL",stat:!0,forced:!o},{parse:function(t){var e=a(arguments.length,1),r=n(t),i=e<2||void 0===arguments[1]?void 0:n(arguments[1]);try{return new c(r,i)}catch(t){return null}}})},94783:()=>{},86450:(t,e,r)=>{"use strict";var i=r(93607);t.exports=i},18402:(t,e,r)=>{"use strict";var i=r(13531);t.exports=i},22392:(t,e,r)=>{"use strict";var i=r(45771);t.exports=i},41969:(t,e,r)=>{"use strict";var i=r(22092);t.exports=i},41374:(t,e,r)=>{"use strict";var i=r(86535);t.exports=i},73592:(t,e,r)=>{"use strict";var i=r(27341);t.exports=i},37867:(t,e,r)=>{"use strict";var i=r(5354);t.exports=i},91960:(t,e,r)=>{"use strict";var i=r(22671);t.exports=i},19709:(t,e,r)=>{"use strict";var i=r(23034);t.exports=i},50530:(t,e,r)=>{"use strict";var i=r(45837);t.exports=i},25619:(t,e,r)=>{"use strict";var i=r(44094);t.exports=i},96796:(t,e,r)=>{"use strict";r(12560);var i=r(73948),s=r(49724),a=r(88280),n=r(22392),o=Array.prototype,c={DOMTokenList:!0,NodeList:!0};t.exports=function(t){var e=t.entries;return t===o||a(o,t)&&e===o.entries||s(c,i(t))?n:e}},40587:(t,e,r)=>{"use strict";var i=r(22948);t.exports=i},22616:(t,e,r)=>{"use strict";var i=r(33155);t.exports=i},70228:(t,e,r)=>{"use strict";var i=r(9635);t.exports=i},99617:(t,e,r)=>{"use strict";var i=r(63246);t.exports=i},64055:(t,e,r)=>{"use strict";var i=r(60974);t.exports=i},24525:(t,e,r)=>{"use strict";var i=r(73948),s=r(49724),a=r(88280),n=r(41969);r(60237);var o=Array.prototype,c={DOMTokenList:!0,NodeList:!0};t.exports=function(t){var e=t.forEach;return t===o||a(o,t)&&e===o.forEach||s(c,i(t))?n:e}},76343:(t,e,r)=>{"use strict";var i=r(36880);t.exports=i},77852:(t,e,r)=>{"use strict";var i=r(44507);t.exports=i},21618:(t,e,r)=>{"use strict";r(12560);var i=r(73948),s=r(49724),a=r(88280),n=r(41374),o=Array.prototype,c={DOMTokenList:!0,NodeList:!0};t.exports=function(t){var e=t.keys;return t===o||a(o,t)&&e===o.keys||s(c,i(t))?n:e}},61785:(t,e,r)=>{"use strict";var i=r(12860);t.exports=i},98894:(t,e,r)=>{"use strict";var i=r(39299);t.exports=i},79528:(t,e,r)=>{"use strict";var i=r(28823);t.exports=i},465:(t,e,r)=>{"use strict";var i=r(7766);t.exports=i},92222:(t,e,r)=>{"use strict";var i=r(86823);t.exports=i},14106:(t,e,r)=>{"use strict";var i=r(98059);t.exports=i},6686:(t,e,r)=>{"use strict";var i=r(40303);t.exports=i},82990:(t,e,r)=>{"use strict";var i=r(69685);t.exports=i},81086:(t,e,r)=>{"use strict";var i=r(12757);t.exports=i},40026:(t,e,r)=>{"use strict";var i=r(95029);t.exports=i},34598:(t,e,r)=>{"use strict";var i=r(8661);t.exports=i},49124:(t,e,r)=>{"use strict";r(12560);var i=r(73948),s=r(49724),a=r(88280),n=r(73592),o=Array.prototype,c={DOMTokenList:!0,NodeList:!0};t.exports=function(t){var e=t.values;return t===o||a(o,t)&&e===o.values||s(c,i(t))?n:e}},76660:(t,e,r)=>{"use strict";var i=r(10317);t.exports=i},60075:(t,e,r)=>{"use strict";var i=r(99968);r(12560),t.exports=i},18801:(t,e,r)=>{"use strict";var i=r(1206);t.exports=i},68251:(t,e,r)=>{"use strict";var i=r(21926);t.exports=i},56609:(t,e,r)=>{"use strict";var i=r(12118);t.exports=i},49261:(t,e,r)=>{"use strict";var i=r(56286);t.exports=i},76490:(t,e,r)=>{"use strict";var i=r(19661);t.exports=i},27777:(t,e,r)=>{"use strict";var i=r(61418);t.exports=i},86462:(t,e,r)=>{"use strict";var i=r(99929);t.exports=i},91921:(t,e,r)=>{"use strict";var i=r(84326);t.exports=i},45204:(t,e,r)=>{"use strict";var i=r(97027);r(12560),t.exports=i},89270:(t,e,r)=>{"use strict";r(34351);var i=r(92046);t.exports=i.setImmediate},74674:(t,e,r)=>{"use strict";r(73342);var i=r(92046);t.exports=i.setInterval},70568:(t,e,r)=>{"use strict";r(73342);var i=r(92046);t.exports=i.setTimeout},24139:(t,e,r)=>{"use strict";var i=r(83842);r(12560),t.exports=i},27045:(t,e,r)=>{"use strict";var i=r(1730);r(12560),t.exports=i},10070:(t,e,r)=>{"use strict";var i=r(31661);t.exports=i},40071:(t,e,r)=>{"use strict";var i=r(17458);t.exports=i},49792:(t,e,r)=>{"use strict";var i=r(56908);t.exports=i},59076:(t,e,r)=>{"use strict";r(66299),r(75042),r(17649),r(83604);var i=r(92046);t.exports=i.URLSearchParams},56908:(t,e,r)=>{"use strict";r(59076),r(33487),r(28669),r(58670),r(94783);var i=r(92046);t.exports=i.URL},49859:(t,e,r)=>{"use strict";r.d(e,{A:()=>a});var i=r(84997),s=r(94290);function a(t,e,r){return(e=(0,s.A)(e))in t?i(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}},49399:(t,e,r)=>{"use strict";r.d(e,{A:()=>a});var i=r(22204),s=r(19280);function a(t,e){if("object"!=(0,i.A)(t)||!t)return t;var r=t[s];if(void 0!==r){var a=r.call(t,e||"default");if("object"!=(0,i.A)(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}},94290:(t,e,r)=>{"use strict";r.d(e,{A:()=>a});var i=r(22204),s=r(49399);function a(t){var e=(0,s.A)(t,"string");return"symbol"==(0,i.A)(e)?e:e+""}},22204:(t,e,r)=>{"use strict";r.d(e,{A:()=>a});var i=r(32321),s=r(22231);function a(t){return a="function"==typeof i&&"symbol"==typeof s?function(t){return typeof t}:function(t){return t&&"function"==typeof i&&t.constructor===i&&t!==i.prototype?"symbol":typeof t},a(t)}}},i={};function s(t){var e=i[t];if(void 0!==e)return e.exports;var a=i[t]={exports:{}};return r[t].call(a.exports,a,a.exports,s),a.exports}s.m=r,s.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return s.d(e,{a:e}),e},s.d=(t,e)=>{for(var r in e)s.o(e,r)&&!s.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},s.f={},s.e=t=>Promise.all(Object.keys(s.f).reduce(((e,r)=>(s.f[r](t,e),e)),[])),s.u=t=>t+".avplayer.js",s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),t={},e="AVPlayer:",s.l=(r,i,a,n)=>{if(t[r])t[r].push(i);else{var o,c;if(void 0!==a)for(var l=document.getElementsByTagName("script"),h=0;h<l.length;h++){var u=l[h];if(u.getAttribute("src")==r||u.getAttribute("data-webpack")==e+a){o=u;break}}o||(c=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,s.nc&&o.setAttribute("nonce",s.nc),o.setAttribute("data-webpack",e+a),o.src=r),t[r]=[i];var d=(e,i)=>{o.onerror=o.onload=null,clearTimeout(p);var s=t[r];if(delete t[r],o.parentNode&&o.parentNode.removeChild(o),s&&s.forEach((t=>t(i))),e)return e(i)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=d.bind(null,o.onerror),o.onload=d.bind(null,o.onload),c&&document.head.appendChild(o)}},s.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;s.g.importScripts&&(t=s.g.location+"");var e=s.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var r=e.getElementsByTagName("script");if(r.length)for(var i=r.length-1;i>-1&&(!t||!/^http(s?):/.test(t));)t=r[i--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),s.p=t})(),(()=>{var t={792:0};s.f.j=(e,r)=>{var i=s.o(t,e)?t[e]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise(((r,s)=>i=t[e]=[r,s]));r.push(i[2]=a);var n=s.p+s.u(e),o=new Error;s.l(n,(r=>{if(s.o(t,e)&&(0!==(i=t[e])&&(t[e]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),n=r&&r.target&&r.target.src;o.message="Loading chunk "+e+" failed.\n("+a+": "+n+")",o.name="ChunkLoadError",o.type=a,o.request=n,i[1](o)}}),"chunk-"+e,e)}};var e=(e,r)=>{var i,a,[n,o,c]=r,l=0;if(n.some((e=>0!==t[e]))){for(i in o)s.o(o,i)&&(s.m[i]=o[i]);c&&c(s)}for(e&&e(r);l<n.length;l++)a=n[l],s.o(t,a)&&t[a]&&t[a][0](),t[a]=0},r=self.webpackChunkAVPlayer=self.webpackChunkAVPlayer||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))})();var a=s(72631);return a.default})()));