"use strict";(self.webpackChunkAVTranscoder=self.webpackChunkAVTranscoder||[]).push([[854],{85947:(t,e,n)=>{n.d(e,{A:()=>a});var i=n(49859);class a{constructor(){(0,i.A)(this,"type",-1),(0,i.A)(this,"onStreamAdd",void 0)}async destroy(t){}}},98854:(t,e,n)=>{n.r(e),n.d(e,{default:()=>m});var i=n(49859),a=n(52730),r=n.n(a),s=n(85569),o=n.n(s),l=n(71426),u=n.n(l),c=n(50932),d=n(4624),g=n(9705),h=n(85947),f=n(14686),p=n(37837),b=n(71517),B=n(72739),x=n(50011),I=n(74762);class m extends h.A{constructor(){super(),(0,i.A)(this,"type",21),(0,i.A)(this,"queue",void 0),(0,i.A)(this,"index",void 0)}init(t){this.queue=[]}async readHeader(t){const e=t.createStream();e.codecpar.codecId=94232,e.codecpar.codecType=3,e.timeBase.den=1e3,e.timeBase.num=1;let n="";if(1&r()(t.ioReader)){const e=await t.ioReader.fileSize();n=await t.ioReader.readString(Number(BigInt.asIntN(32,e)))}else try{n+=await t.ioReader.readLine()+"\n"}catch(t){}if(x){const t=I.q(n);if(this.queue=t.queue,t.head){const n=o()(t.head),i=x.encode(n);e.codecpar.extradata=(0,p.sY)(i.length),(0,f.lW)(e.codecpar.extradata,i.length,i),e.codecpar.extradataSize=i.length}}return this.index=0,0}async readAVPacket(t,e){var n;if(!this.queue.length)return g.LR;if(this.index>=this.queue.length)return-1048576;const i=u()(n=t.streams).call(n,(t=>3===t.codecpar.codecType)),a=this.queue[this.index++];c.M[15](e+32,i.index),c.M[15](e+76,i.timeBase.den),c.M[15](e+72,i.timeBase.num),c.M[17](e+16,a.pts),c.M[17](e+8,a.pts),c.M[17](e+48,a.duration);const r=x.encode(a.context),s=(0,p.sY)(r.length);return(0,f.lW)(s,r.length,r),(0,b.NX)(e,s,r.length),0}async seek(t,e,n,i){if(2&i)return BigInt(g.E$);if(n<=BigInt(0))return this.index=0,BigInt(0);const a=B.El(this.queue,(t=>t.pts>n?-1:1));if(a>=0){for(d.Yz(`seek in cues, found index: ${a}, pts: ${this.queue[a].pts}`,"src/avformat/formats/ITtmlFormat.ts",143),this.index=Math.max(a-1,0);this.index>0&&(this.queue[this.index-1].pts===this.queue[this.index].pts||this.queue[this.index-1].pts+this.queue[this.index-1].duration>n);)this.index--;return BigInt(0)}return BigInt(g.LR)}getAnalyzeStreamsCount(){return 1}}},74762:(t,e,n)=>{n.d(e,{q:()=>o});var i=n(79331),a=n(67672),r=n(72739),s=n(54825);function o(t){const e=(0,i.A)(t,{aloneValueName:"context"});if(!e.tt)return{queue:[],head:{}};const n=[];function o(t){let e="";return r.__(t,(t=>{a.Yj(t)?e+=t:t.context?e+=`<${t.tagName}>${t.context}</${t.tagName}>`:e+=`<${t.tagName}/>`})),e}function l(t,e,i){let l=(0,s.j)(e||t.begin),u=t.context||"",c=t.region||"Default",d="";a.YO(u)&&(u=o(u)),a.YO(t.span)?r.__(t.span,(t=>{t.context&&(l===-BigInt(1)&&t.begin&&(l=(0,s.j)(t.begin)),!c&&t.region&&(c=t.region),a.Yj(t.context)?(u+=t.context,t.br&&(u+="<br>")):(u+=o(t.context),t.br&&(u+="<br>"))),t.end&&(d=t.end)})):t.span&&(t.span.context&&(l===-BigInt(1)&&t.span.begin&&(l=(0,s.j)(t.span.begin)),!c&&t.span.region&&(c=t.span.region),a.Yj(t.span.context)?u+=t.span.context:u+=o(t.span.context)),t.span.end&&(d=t.span.end)),n.push({context:u,pts:l,region:c,duration:t.dur?(0,s.j)(t.dur):(0,s.j)(i||t.end||d)-l})}function u(t,e,n){a.YO(t)?r.__(t,(t=>{l(t,e,n)})):l(t,e,n)}return e.tt.body&&e.tt.body.div&&(a.YO(e.tt.body.div)?r.__(e.tt.body.div,(t=>{t.p&&u(t.p,t.begin,t.end)})):e.tt.body.div.p&&u(e.tt.body.div.p,e.tt.body.div.begin,e.tt.body.end)),{queue:n,head:e.tt.head||{}}}},54825:(t,e,n)=>{n.d(e,{j:()=>r,t:()=>s});var i=n(11265),a=n.n(i);function r(t){var e,n,i;if(!t)return-BigInt(1);let r=(t=a()(t).call(t)).split(":"),s=BigInt(0);var o;if(3===r.length&&(s+=BigInt(+a()(o=r.shift()).call(o))*BigInt(36e5)),s+=BigInt(+a()(e=r.shift()).call(e))*BigInt(6e4),r=a()(n=r.shift()).call(n).split("."),s+=BigInt(+a()(i=r.shift()).call(i))*BigInt(1e3),r.length){var l,u;let t=a()(l=r[0]).call(l).length,e=BigInt(+a()(u=r.shift()).call(u));1===t?e*=BigInt(100):2===t&&(e*=BigInt(10)),s+=e}return s}function s(t){var e,n,i;if(!t)return-BigInt(1);let r=(t=a()(t).call(t)).split(":"),s=BigInt(0);var o;if(3===r.length&&(s+=BigInt(+a()(o=r.shift()).call(o))*BigInt(36e5)),s+=BigInt(+a()(e=r.shift()).call(e))*BigInt(6e4),r=a()(n=r.shift()).call(n).split(","),s+=BigInt(+a()(i=r.shift()).call(i))*BigInt(1e3),r.length){var l,u;let t=a()(l=r[0]).call(l).length,e=BigInt(+a()(u=r.shift()).call(u));1===t?e*=BigInt(100):2===t&&(e*=BigInt(10)),s+=e}return s}},79331:(t,e,n)=>{n.d(e,{A:()=>l});var i=n(66615),a=n.n(i),r=n(72739);const s={aloneValueName:"_@attribute"},o=[" ","/",'"',"'","<",">"];function l(t,e=s){t=(t=(t=(t=t.replace(/<!--[\s\S]*?-->/g,"")).replace(/[\n\t\r]/g,"")).replace(/>[ \t]+</g,"><")).replace(/<\?[^>]*\?>/g,"");const n=[];let i=0;function l(t,i){const r=n[n.length-1];r&&(t!==e.aloneValueName||null==r.obj[e.aloneValueName]?null==r.obj[t]?r.obj[t]=i:a()(r.obj[t])?r.obj[t].push(i):r.obj[t]=[r.obj[t],i]:r.obj[e.aloneValueName]=[r.obj[e.aloneValueName],{tagName:t,...i}])}function u(e){for(;i<t.length;){if(t[i]===e)return!0;i++}return!1}function c(){d();let e="";for(;i<t.length&&!r.zy(o,t[i]);)e+=t[i],i++;return e}function d(){for(;i<t.length&&/\s|\r|\n/.test(t[i]);)i++}const g=/\s/,h=/'/,f=/"/;function p(){if(i>=t.length)return!0;d();let e=g;'"'!==t[i]&&"'"!=t[i]||(e='"'===t[i]?f:h,i++);let n="";for(;i<t.length;){if(e.test(t[i])){i++;break}n+=t[i],i++}return n}function b(){d();let e="";for(;i<t.length&&"<"!==t[i];)e+=t[i],i++;return e}function B(){for(;"<"===t[i];){const e=i;if(i++,d(),"/"!==t[i]){i=e;break}if(i++,c()===n[n.length-1].tag){if(n.length>1){const t=n.pop();l(t.tag,t.obj)}u(">"),i++,d()}else n.pop(),u(">"),i++,d()}}return function a(){if(i>=t.length)return;let r=i;if(d(),"<"!==t[i])return i=r,l(e.aloneValueName,b()),B(),a();let s=u("<");if(!s)return;r=i,i++;const o=c();if(n.push({obj:{},tag:o,start:r}),function(){for(;d(),">"!==t[i]&&"/"!==t[i];){let t=c();if(!t)break;"="===t[t.length-1]?t=t.substring(0,t.length-1):(u("="),i++),l(t,p())}}(),d(),"/"===t[i]){if(i++,n.length>1){const t=n.pop();l(t.tag,t.obj)}return u(">"),i++,B(),a()}s=u(">"),s&&(i++,d(),"<"!==t[i]&&(l(e.aloneValueName,b()),d()),B(),a())}(),{[n[0].tag]:n[0].obj}}}}]);