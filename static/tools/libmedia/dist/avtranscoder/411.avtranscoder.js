(self.webpackChunkAVTranscoder=self.webpackChunkAVTranscoder||[]).push([[411],{64436:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var i=r(49859),n=r(63939),a=(r(77162),r(37837)),s=r(71766);class o{constructor(){(0,i.A)(this,"inCodecpar",void 0),(0,i.A)(this,"inTimeBase",void 0),(0,i.A)(this,"outCodecpar",void 0)}init(e,t){return this.inCodecpar=(0,a.Gy)(168),(0,s.Yi)(this.inCodecpar,e),this.inTimeBase={den:n.f[15](t+4),num:n.f[15](t)},0}destroy(){this.inCodecpar&&((0,s.dn)(this.inCodecpar),this.inCodecpar=0)}}},26173:(e,t,r)=>{"use strict";r.d(t,{A:()=>g});var i=r(49859),n=r(63939),a=r(50932),s=r(64436),o=r(71517),c=r(62815),l=r(67659),d=r(59166),h=r(14686),u=r(9705),p=r(37837),f=r(4624);class g extends s.A{constructor(e=!1){super(),(0,i.A)(this,"cache",void 0),(0,i.A)(this,"cached",void 0),(0,i.A)(this,"reverseSps",void 0),this.reverseSps=e}init(e,t){return super.init(e,t),this.cache=(0,o._5)(),this.cached=!1,0}destroy(){super.destroy(),(0,o.Qe)(this.cache),this.cache=0}sendAVPacket(e){if(64&n.f[15](e+36)){let t;(0,o.zu)(this.cache,e);const r=(0,h.JW)(n.f[20](e+24),n.f[15](e+28));if(27===n.f[15](this.inCodecpar+4)?t=c.oT(r,this.reverseSps):173===n.f[15](this.inCodecpar+4)?t=l.oT(r,this.reverseSps):196===n.f[15](this.inCodecpar+4)?t=d.oT(r,this.reverseSps):f.h2(`not support for codecId: ${n.f[15](this.inCodecpar+4)}`,"src/avformat/bsf/h2645/Annexb2AvccFilter.ts",97),a.M[15](this.cache+36,-65&n.f[15](this.cache+36)),(0,o.NX)(this.cache,t.bufferPointer,t.length),t.key&&a.M[15](this.cache+36,1|n.f[15](this.cache+36)),t.extradata){const e=(0,p.sY)(t.extradata.length);(0,h.lW)(e,t.extradata.length,t.extradata),(0,o.Ow)(this.cache,1,e,t.extradata.length)}}else(0,o.rN)(this.cache,e);return this.cached=!0,0}receiveAVPacket(e){return this.cached?((0,o.Up)(e),(0,o.rN)(e,this.cache),this.cached=!1,0):u.LR}reset(){return 0}}},51597:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var i=r(49859);class n{constructor(){(0,i.A)(this,"type",-1)}async destroy(e){}}(0,i.A)(n,"Capabilities",[])},68675:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>$});var i=r(49859),n=r(18979),a=r.n(n),s=r(86226),o=r.n(s),c=r(11265),l=r.n(c),d=r(48079),h=r.n(d),u=r(64007),p=r.n(u),f=r(129),g=r.n(f),m=r(385),x=r.n(m),I=r(71426),U=r.n(I),y=r(61499),A=r(63939),v=(r(9599),r(51597)),P=r(4624),_=r(44328),S=r(71517),w=r(95335),b=r(35336),C=r(69081),T=r(31866),B=r(90519),V=r(14686),W=r(38156),M=r(77231),E=r(20525),k=r(92647),L=r(26173),D=r(60264),R=r(62815),N=r(67659),F=r(59166),z=r(39381),O=r(9705),H=r(67672),G=r(86932),Y=r(50011),X=r(62100);const K="src/avformat/formats/OMatroskaFormat.ts",Q={isLive:!1,docType:"matroska"};function j(e){const t=e/BigInt(36e5),r=e%BigInt(36e5),i=r/BigInt(6e4),n=r%BigInt(6e4),a=n/BigInt(1e3),s=n%BigInt(1e3);return E.GP("%02d:%02d:%02d.%03d000000\0\0",Number(BigInt.asIntN(32,t)),Number(BigInt.asIntN(32,i)),Number(BigInt.asIntN(32,a)),Number(BigInt.asIntN(32,s)))}class $ extends v.A{constructor(e={}){super(),(0,i.A)(this,"type",8),(0,i.A)(this,"options",void 0),(0,i.A)(this,"context",void 0),(0,i.A)(this,"random",void 0),(0,i.A)(this,"randomView",void 0),(0,i.A)(this,"avpacket",void 0),(0,i.A)(this,"annexb2AvccFilter",void 0),this.options=w.X$({},Q,e),this.random=new Uint8Array(8),this.randomView=new DataView(this.random.buffer)}init(e){var t,r,i,n;e.ioWriter.setEndian(!1),this.avpacket=(0,S._5)();const s={isLive:this.options.isLive,segmentStart:-BigInt(1),seekHeadEnd:-BigInt(1),header:{version:1,readVersion:1,maxIdLength:4,maxSizeLength:8,docType:this.options.docType,docTypeVersion:4,docTypeReadVersion:2},seekHead:{entry:[]},info:{muxingApp:"libmedia-v0.6.1-355-g72ba4aa7",writingApp:null!==(t=e.metadata.encoder)&&void 0!==t?t:"libmedia-v0.6.1-355-g72ba4aa7",timestampScale:1e6,duration:0,segmentUUID:-BigInt(1)},tracks:{entry:[]},attachments:{entry:[]},chapters:{entry:[]},cues:{entry:[]},tags:{entry:[]},elePositionInfos:[],eleCaches:[],eleWriter:new b.A,currentCluster:{timeCode:-BigInt(1),pos:-BigInt(1)},hasVideo:!1};e.metadata.title&&(s.info.title=e.metadata.title);let c=(0,G.A)();e.metadata.creationTime&&(c=new Date(e.metadata.creationTime).getTime()),this.randomView.setBigUint64(0,BigInt(c-9783072e5)*BigInt(1e6)),s.info.dateUTC={data:a()(r=this.random).call(r),size:BigInt(8),pos:M.Dh},"webm"===s.header.docType&&(s.header.docTypeVersion=2,s.header.docTypeReadVersion=2),s.eleWriter.onFlush=e=>(s.eleCaches.push(a()(e).call(e)),0),B.y(this.random),s.info.segmentUUID=this.randomView.getBigUint64(0),e.privateData=this.context=s;const d="webm"===this.context.header.docType?T.Nk:T.eP;let u=!1;o()(i=e.streams).call(i,(e=>{if(4===e.codecpar.codecType||1024&e.disposition){var t;B.y(this.random);const r={uid:this.randomView.getBigUint64(0),name:e.metadata.title,mime:null!==(t=w.BE(T.xz)[e.codecpar.codecId])&&void 0!==t?t:e.metadata.mime,data:{data:e.attachedPic?(0,S.iI)(e.attachedPic):(0,V.s3)(e.codecpar.extradata,e.codecpar.extradataSize),size:BigInt(0|e.codecpar.extradataSize),pos:-BigInt(1)},description:e.metadata.description};s.attachments.entry.push(r);const i={tag:[],target:{attachUid:r.uid}};w.__(e.metadata,((e,t)=>{"title"!==t&&"mime"!==t&&"description"!==t&&"duration"!==t.toLocaleLowerCase()&&H.Yj(e)&&i.tag.push({name:t,string:e})})),i.tag.length&&s.tags.entry.push(i)}else{const t={};if(B.y(this.random),t.uid=this.randomView.getBigUint64(0),t.codecId=function(e){let t="";return w.__(d,((r,i)=>{r===e.codecId&&(t=i)})),65559!==e.codecId&&65557!==e.codecId||(t="A_PCM/FLOAT/IEEE"),65537!==e.codecId&&65549!==e.codecId&&65545!==e.codecId||(t="A_PCM/INT/BIG"),65541!==e.codecId&&65536!==e.codecId&&65548!==e.codecId&&65544!==e.codecId||(t="A_PCM/INT/LIT"),t}(e.codecpar),!t.codecId)return u=!0,void P.z3(`codecId ${e.codecpar.codecId} not support in ${this.options.docType}`,K,283);var r;t.number=e.index+1,e.codecpar.extradata&&(t.codecPrivate={data:a()(r=(0,V.s3)(e.codecpar.extradata,e.codecpar.extradataSize)).call(r),pos:-BigInt(1),size:BigInt(0|e.codecpar.extradataSize)}),e.metadata.language&&(t.language=e.metadata.language),e.metadata.title&&(t.name=e.metadata.title);const c={tag:[],target:{trackUid:t.uid}};switch(w.__(e.metadata,((e,t)=>{"title"!==t&&"language"!==t&&H.Yj(e)&&c.tag.push({name:t,string:e})})),c.tag.length&&s.tags.entry.push(c),e.codecpar.codecType){case 1:t.type=2,t.audio={channels:e.codecpar.chLayout.nbChannels,sampleRate:e.codecpar.sampleRate,bitDepth:e.codecpar.bitsPerRawSample};break;case 0:{s.hasVideo=!0,t.type=1,t.video={pixelWidth:e.codecpar.width,pixelHeight:e.codecpar.height,color:{matrixCoefficients:e.codecpar.colorSpace,primaries:e.codecpar.colorPrimaries,transferCharacteristics:e.codecpar.colorTrc,range:e.codecpar.colorRange}};const r=(0,W.uC)(e.codecpar.chromaLocation);r&&(t.video.color.chromaSitingVert=1+(r.x>>>7),t.video.color.chromaSitingHorz=1+(r.y>>>7)),27!==e.codecpar.codecId&&173!==e.codecpar.codecId&&196!==e.codecpar.codecId||(t.codecPrivate&&D.Bs(t.codecPrivate.data)&&(27===e.codecpar.codecId?t.codecPrivate.data=R.S1(t.codecPrivate.data):173===e.codecpar.codecId?t.codecPrivate.data=N.S1(t.codecPrivate.data):196===e.codecpar.codecId&&(t.codecPrivate.data=F.S1(t.codecPrivate.data)),t.codecPrivate.size=BigInt(Math.floor(t.codecPrivate.data.length))),this.annexb2AvccFilter=new L.A,this.annexb2AvccFilter.init(e.codecpar[y.o9],e.timeBase[y.o9]));break}case 3:t.type=17}if(t.lastPts=BigInt(0),e.privData=t,94212===e.codecpar.codecId||94230===e.codecpar.codecId){t.codecPrivate||P.h2("ass need extradata",K,383),t.ass={order:1,popIndex:[]};let e,r=Y.decode(t.codecPrivate.data).split(/\r?\n/);for(let t=0;t<r.length;t++){var i;if("[Events]"===l()(i=r[t]).call(i)){r[t+1]&&/^Format:/.test(r[t+1])&&(e=r[t+1]),r=a()(r).call(r,0,t);break}}if(e){var n,o;e=e.replace(/^Format:/,"");const r=h()(n=e.split(",")).call(n,(e=>l()(e).call(e)));p()(r).call(r,"Start")>-1&&t.ass.popIndex.push(p()(r).call(r,"Start")),p()(r).call(r,"End")>-1&&t.ass.popIndex.push(p()(r).call(r,"End")),g()(o=t.ass.popIndex).call(o,((e,t)=>t-e))}}s.tracks.entry.push(t)}})),o()(n=e.chapters).call(n,(e=>{const t={uid:e.id,start:e.start,end:e.end};if(e.metadata){t.display={};const r={tag:[],target:{chapterUid:e.id}};w.__(e.metadata,((i,n)=>{"title"===n?t.display.title=e.metadata.title:"language"===n?t.display.language=e.metadata.language:H.Yj(i)&&r.tag.push({name:n,string:i})})),r.tag.length&&s.tags.entry.push(r),w.HP(t.display).length||delete t.display}s.chapters.entry.push({atom:[t]})}));const f={tag:[]};return w.__(e.metadata,((e,t)=>{H.Yj(e)&&"encoder"!==t.toLocaleLowerCase()&&"creationTime"!==t.toLocaleLowerCase()&&f.tag.push({name:t,string:e})})),f.tag.length&&s.tags.entry.push(f),u?O.r8:0}async destroy(e){this.annexb2AvccFilter&&(this.annexb2AvccFilter.destroy(),this.annexb2AvccFilter=null),this.avpacket&&((0,S.Qe)(this.avpacket),this.avpacket=0)}writeHeader(e){C.bx(e.ioWriter,this.context,this.context.header),C.h1(e.ioWriter,408125543);const t=e.ioWriter.getPos();return C.SW(e.ioWriter,8),this.context.elePositionInfos.push({pos:t,length:0,bytes:8}),this.context.segmentStart=e.ioWriter.getPos(),e.ioWriter.skip(96),this.context.seekHeadEnd=e.ioWriter.getPos(),0}processAss(e,t){var r,i;const n=t.privData;let a=Y.decode(e);/^Dialogue:/.test(a)&&(a=a.replace(/^Dialogue:/,""));const s=h()(r=a.split(",")).call(r,(e=>l()(e).call(e)));var c;return null!==(i=n.ass.popIndex)&&void 0!==i&&i.length&&o()(c=n.ass.popIndex).call(c,(e=>{x()(s).call(s,e,1)})),s.unshift((0,X.A)(n.ass.order++)),Y.encode(s.join(","))}writeBlock(e,t,r=163){const i=e.privData;C.h1(this.context.eleWriter,r),(27===e.codecpar.codecId||173===e.codecpar.codecId||196===e.codecpar.codecId)&&64&A.f[15](t+36)&&(this.annexb2AvccFilter.sendAVPacket(t),this.annexb2AvccFilter.receiveAVPacket(this.avpacket),t=this.avpacket);let n=(0,S.iI)(t);94230!==e.codecpar.codecId&&94212!==e.codecpar.codecId||(n=this.processAss(n,e)),C.cK(this.context.eleWriter,C.qh(i.number)+2+1+n.length),C.qz(this.context.eleWriter,i.number,C.qh(i.number));const s=(0,_.Mr)(A.f[17](t+8),t+72,M.i0);if(this.context.eleWriter.writeInt16(Number(BigInt.asIntN(32,s-this.context.currentCluster.timeCode))),1&A.f[15](t+36)||0!==e.codecpar.codecType?this.context.eleWriter.writeUint8(128):this.context.eleWriter.writeUint8(0),!i.codecPrivate){let e=(0,S.rU)(t,1);var o;e&&(i.codecPrivate={data:a()(o=(0,V.s3)(A.f[20](e),A.f[25](e+4))).call(o),pos:-BigInt(1),size:BigInt(A.f[25](e+4))})}this.context.eleWriter.writeBuffer(n)}writeBlockGroup(e,t){C.mI(this.context.eleWriter,this.context,160,(r=>{A.f[17](t+48)>0&&C.Wd(r,155,(0,_.Mr)(A.f[17](t+48),t+72,M.i0));const i=[];let n=[];for(let e=0;e<A.f[15](t+44);e++)15===A.f[15](A.f[20](t+40)+12*e+8)?i.push({additionalId:Number(BigInt.asIntN(32,z.v4(A.f[20](A.f[20](t+40)+12*e)))),buffer:(0,V.s3)(A.f[20](A.f[20](t+40)+12*e)+8,A.f[25](A.f[20](t+40)+12*e+4)-8)}):(16===A.f[15](A.f[20](t+40)+12*e+8)||17===A.f[15](A.f[20](t+40)+12*e+8))&&n.push((0,V.s3)(A.f[20](A.f[20](t+40)+12*e),A.f[25](A.f[20](t+40)+12*e+4)),[10]);if(94226===e.codecpar.codecId&&n.length&&i.push({additionalId:1,buffer:(0,k.A)(Uint8Array,n)}),i.length&&C.mI(this.context.eleWriter,this.context,30113,(e=>{C.mI(e,this.context,166,(e=>{o()(i).call(i,(t=>{C.Wd(e,238,t.additionalId),C.on(e,30113,t.buffer)}))}))})),0===e.codecpar.codecType&&!(1&A.f[15](t+36))){const i=e.privData;C.kt(r,251,i.lastPts-A.f[17](t+8))}this.writeBlock(e,t,161)}))}writeCluster(e){if(this.context.currentCluster.pos===-BigInt(1))return;e.ioWriter.flush(),this.context.eleWriter.flush();let t=(0,k.A)(Uint8Array,this.context.eleCaches);t.length&&(this.context.eleCaches.length=0,C.Wd(this.context.eleWriter,231,this.context.currentCluster.timeCode),this.context.eleWriter.flush(),t=(0,k.A)(Uint8Array,[...this.context.eleCaches,t]),C.h1(e.ioWriter,524531317),C.cK(e.ioWriter,t.length),e.ioWriter.writeBuffer(t),e.ioWriter.flush(),this.context.eleCaches.length=0)}writeAVPacket(e,t){if(!A.f[15](t+28))return P.R8(`packet's size is 0: ${A.f[15](t+32)}, ignore it`,K,655),0;const r=e.getStreamByIndex(A.f[15](t+32));if(!r||1024&r.disposition)return void P.R8(`can not found the stream width the avpacket's streamIndex: ${A.f[15](t+32)}, ignore it`,K,662);const i=r.privData,n=(0,_.Mr)(A.f[17](t+8)!==M.Dh?A.f[17](t+8):A.f[17](t+16),t+72,M.i0);return(!i.maxPts||i.maxPts<n)&&(i.maxPts=n,i.duration=n,A.f[17](t+48)!==M.Dh&&(i.duration+=(0,_.Mr)(A.f[17](t+48),t+72,M.i0))),(this.options.isLive||1&A.f[15](t+36)&&(0===r.codecpar.codecType||!this.context.hasVideo&&n-this.context.currentCluster.timeCode>BigInt(5e3)))&&(this.writeCluster(e),this.context.currentCluster.timeCode=n,this.context.currentCluster.pos=e.ioWriter.getPos()-this.context.segmentStart,this.context.cues.entry.push({time:this.context.currentCluster.timeCode,pos:[{pos:this.context.currentCluster.pos,track:i.number}]})),A.f[17](t+48)>0||(0,S.fQ)(t,15)||(0,S.fQ)(t,16)||(0,S.fQ)(t,17)?this.writeBlockGroup(r,t):this.writeBlock(r,t),i.lastPts=A.f[17](t+8),0}writeTrailer(e){var t,r;this.writeCluster(e),o()(t=e.streams).call(t,(e=>{const t=e.privData;if(!this.options.isLive&&null!=t&&t.duration){var r;const e=t.duration;this.context.info.duration=Math.max(Number(BigInt.asIntN(32,e)),this.context.info.duration);let i=U()(r=this.context.tags.entry).call(r,(e=>{var r;return(null===(r=e.target)||void 0===r?void 0:r.trackUid)===t.uid}));i||(i={tag:[],target:{trackUid:t.uid}},this.context.tags.entry.push(i)),i.tag.push({name:"DURATION",string:j(e)})}})),e.ioWriter.flush(),this.context.eleWriter.flush(),this.context.eleCaches.length=0,this.context.eleWriter.reset();const i=e.ioWriter.getPos();let n=i-this.context.segmentStart;this.context.seekHead.entry.push({id:357149030,pos:this.context.eleWriter.getPos()+this.context.seekHeadEnd-this.context.segmentStart}),C.ec(this.context.eleWriter,this.context,this.context.info),this.context.seekHead.entry.push({id:374648427,pos:this.context.eleWriter.getPos()+this.context.seekHeadEnd-this.context.segmentStart}),C.mM(this.context.eleWriter,this.context,this.context.tracks),this.context.seekHead.entry.push({id:307544935,pos:this.context.eleWriter.getPos()+this.context.seekHeadEnd-this.context.segmentStart}),C.p(this.context.eleWriter,this.context,this.context.tags),this.context.eleWriter.flush();const a=(0,k.A)(Uint8Array,this.context.eleCaches);e.ioWriter.onFlush(a,this.context.seekHeadEnd),n+=BigInt(Math.floor(a.length)),o()(r=this.context.cues.entry).call(r,(e=>{var t;o()(t=e.pos).call(t,(e=>{e.pos+=BigInt(Math.floor(a.length))}))})),this.context.cues.entry.length&&(this.context.seekHead.entry.push({id:475249515,pos:e.ioWriter.getPos()-this.context.segmentStart+BigInt(Math.floor(a.length))}),C.Uz(e.ioWriter,this.context,this.context.cues)),this.context.attachments.entry.length&&(this.context.seekHead.entry.push({id:423732329,pos:e.ioWriter.getPos()-this.context.segmentStart+BigInt(Math.floor(a.length))}),C.s0(e.ioWriter,this.context,this.context.attachments)),e.ioWriter.flush(),n+=e.ioWriter.getPos()-i,e.ioWriter.seek(this.context.segmentStart),C.jp(e.ioWriter,this.context,this.context.seekHead);const s=e.ioWriter.getPos()-this.context.segmentStart;return C.h1(e.ioWriter,236),C.cK(e.ioWriter,this.context.seekHeadEnd-this.context.segmentStart-s-BigInt(2),1),e.ioWriter.flush(),this.context.elePositionInfos[0].length=n,C.ST(e.ioWriter,this.context),this.context.eleCaches.length=0,0}flush(e){return e.ioWriter.flush(),this.context.currentCluster.timeCode=-BigInt(1),this.context.currentCluster.pos=-BigInt(1),0}getCapabilities(){return"webm"===this.options.docType?$.CapabilitiesWebm:$.Capabilities}}(0,i.A)($,"Capabilities",[86021,86076,86018,86017,86028,86032,86020,86056,86019,65557,65537,65536,139,167,225,27,173,196,12,30,94226,94212,94230,94210,94225]),(0,i.A)($,"CapabilitiesWebm",[86021,86076,139,167,225,94226])},31866:(e,t,r)=>{"use strict";r.d(t,{Nk:()=>n,eP:()=>i,xz:()=>a});const i={A_AAC:86018,A_AC3:86019,A_ALAC:86032,A_DTS:86020,A_EAC3:86056,A_FLAC:86028,A_MLP:86045,"A_MPEG/L2":86016,"A_MPEG/L1":86058,"A_MPEG/L3":86017,A_OPUS:86076,"A_OPUS/EXPERIMENTAL":86076,"A_PCM/FLOAT/IEEE":65557,"A_PCM/INT/BIG":65537,"A_PCM/INT/LIT":65536,"A_QUICKTIME/QDMC":86066,"A_QUICKTIME/QDM2":86035,"A_REAL/14_4":77824,"A_REAL/28_8":77825,"A_REAL/ATRC":86047,"A_REAL/COOK":86036,"A_REAL/SIPR":86057,A_TRUEHD:86060,A_TTA1:86038,A_VORBIS:86021,A_WAVPACK4:86041,"D_WEBVTT/SUBTITLES":94226,"D_WEBVTT/CAPTIONS":94226,"D_WEBVTT/DESCRIPTIONS":94226,"D_WEBVTT/METADATA":94226,"S_TEXT/UTF8":94225,"S_TEXT/ASCII":94210,"S_TEXT/ASS":94230,"S_TEXT/SSA":94230,"S_TEXT/WEBVTT":94226,S_ASS:94230,S_SSA:94230,S_VOBSUB:94208,S_DVBSUB:94209,"S_HDMV/PGS":94214,"S_HDMV/TEXTST":94231,V_AV1:225,V_DIRAC:116,V_FFV1:33,V_MJPEG:7,V_MPEG1:1,V_MPEG2:2,"V_MPEG4/ISO/ASP":12,"V_MPEG4/ISO/AP":12,"V_MPEG4/ISO/SP":12,"V_MPEG4/ISO/AVC":27,"V_MPEGH/ISO/HEVC":173,"V_MPEGH/ISO/VVC":196,"V_MPEG4/MS/V3":16,V_PRORES:147,"V_REAL/RV10":5,"V_REAL/RV20":6,"V_REAL/RV30":68,"V_REAL/RV40":69,V_SNOW:208,V_THEORA:30,V_UNCOMPRESSED:13,V_VP8:139,V_VP9:167},n={V_VP8:139,V_VP9:167,V_AV1:225,A_VORBIS:86021,A_OPUS:86076,"D_WEBVTT/SUBTITLES":94226,"D_WEBVTT/CAPTIONS":94226,"D_WEBVTT/DESCRIPTIONS":94226,"D_WEBVTT/METADATA":94226},a={"image/gif":97,"image/jpeg":7,"image/png":61,"image/tiff":96}},69081:(e,t,r)=>{"use strict";r.d(t,{ST:()=>_,SW:()=>x,Uz:()=>E,Wd:()=>U,bx:()=>w,cK:()=>m,ec:()=>C,h1:()=>g,jp:()=>b,kt:()=>y,mI:()=>S,mM:()=>B,on:()=>v,p:()=>M,qh:()=>p,qz:()=>f,s0:()=>k});var i=r(54810),n=r.n(i),a=(r(5496),r(86226)),s=r.n(a),o=r(67672),c=r(50011),l=r(92647),d=r(72739),h=r(95335);function u(e){let t=0;do{t++}while(e>>=o.o(e)?BigInt(7):7);return t}function p(e){return o.o(e)?u(e+BigInt(1)):u(e+1)}function f(e,t,r){if(o.o(t)){t|=BigInt(1)<<BigInt(7*r);for(let i=r-1;i>=0;i--)e.writeUint8(Number(t>>BigInt(8*i)&BigInt(255)))}else{t|=1<<7*r;for(let i=r-1;i>=0;i--)e.writeUint8(t>>8*i&255)}}function g(e,t){let r=function(e){return Math.floor((n()(e)+7)/8)}(t);for(;r--;)e.writeUint8(t>>8*r)}function m(e,t,r=0){let i=p(t);0===r&&(r=i),f(e,t,r)}function x(e,t){e.writeUint8(511>>t);for(let r=0;r<t-1;r++)e.writeUint8(255)}function I(e,t,r){g(e,t),m(e,8),e.writeUint64(r)}function U(e,t,r){let i=1,n=r;if(o.o(n))for(;n>>=BigInt(8);)i++;else for(;n>>=8;)i++;g(e,t),m(e,i);for(let t=i-1;t>=0;t--)e.writeUint8(o.o(r)?Number(r>>BigInt(8*t)):r>>8*t)}function y(e,t,r){let i=0;if(r){let e=r<0?(~r).toString(2).length:r.toString(2).length;i=Math.ceil((e+1)/8)}switch(g(e,t),m(e,i),i){case 0:return;case 1:return void e.writeInt8(Number(r));case 2:return void e.writeInt16(Number(r));case 3:return void e.writeInt24(Number(r));case 4:return void e.writeInt32(Number(r))}r=BigInt.asUintN(8*i,BigInt(r));for(let t=i-1;t>=0;t--)e.writeUint8(Number(r>>BigInt(8*t)))}function A(e,t,r){g(e,t),m(e,8),e.writeDouble(r)}function v(e,t,r){g(e,t),m(e,r.length),e.writeBuffer(r)}function P(e,t,r){v(e,t,c.encode(r))}function _(e,t){const r=e.getPos(),i=e.getPointer(),n=r-BigInt(Math.floor(i)),a=[];d.__(t.elePositionInfos,(t=>{t.pos<r&&t.pos>=n?(e.seekInline(i+Number(t.pos-r)),m(e,t.length,t.bytes)):a.push(t)})),d.__(a,(t=>{e.seek(t.pos),m(e,t.length,t.bytes)})),a.length?e.seek(r):e.seekInline(i),e.flush(),t.elePositionInfos=[]}function S(e,t,r,i){t.eleWriter.flush();const n=t.eleCaches;t.eleCaches=[],i(t.eleWriter),t.eleWriter.flush();const a=(0,l.A)(Uint8Array,t.eleCaches);t.eleCaches=n,v(e,r,a)}function w(e,t,r){S(e,t,440786851,(e=>{U(e,17030,r.version),U(e,17143,r.readVersion),U(e,17138,r.maxIdLength),U(e,17139,r.maxSizeLength),P(e,17026,r.docType),U(e,17031,r.docTypeVersion),U(e,17029,r.docTypeReadVersion)}))}function b(e,t,r){S(e,t,290298740,(e=>{var i;s()(i=r.entry).call(i,(r=>{!function(e,t,r){S(e,t,19899,(e=>{U(e,21419,r.id),U(e,21420,r.pos)}))}(e,t,r)}))}))}function C(e,t,r){S(e,t,357149030,(e=>{I(e,29604,r.segmentUUID),U(e,2807729,r.timestampScale),A(e,17545,r.duration),P(e,19840,r.muxingApp),P(e,22337,r.writingApp),v(e,17505,r.dateUTC.data)}))}function T(e,t,r){S(e,t,174,(e=>{U(e,215,r.number),I(e,29637,r.uid),U(e,131,r.type),r.language&&P(e,21358,r.language),r.name&&P(e,21358,r.name),P(e,134,r.codecId),r.codecPrivate&&v(e,25506,r.codecPrivate.data),r.audio?function(e,t,r){S(e,t,225,(e=>{A(e,181,r.sampleRate),r.outSampleRate&&A(e,181,r.outSampleRate),U(e,25188,r.bitDepth),U(e,159,r.channels)}))}(e,t,r.audio):r.video&&function(e,t,r){S(e,t,224,(e=>{U(e,176,r.pixelWidth),U(e,186,r.pixelHeight),r.color&&function(e,t,r){S(e,t,21936,(e=>{h.zy(r,"matrixCoefficients")&&U(e,21937,r.matrixCoefficients),h.zy(r,"primaries")&&U(e,21947,r.primaries),h.zy(r,"transferCharacteristics")&&U(e,21946,r.transferCharacteristics),h.zy(r,"range")&&U(e,21945,r.range),h.zy(r,"chromaSitingVert")&&U(e,21944,r.chromaSitingVert),h.zy(r,"chromaSitingHorz")&&U(e,21943,r.chromaSitingHorz)}))}(e,t,r.color)}))}(e,t,r.video)}))}function B(e,t,r){S(e,t,374648427,(e=>{var i;s()(i=r.entry).call(i,(r=>{T(e,t,r)}))}))}function V(e,t,r){S(e,t,26568,(e=>{r.name&&P(e,17827,r.name),r.string&&P(e,17543,r.string),r.language&&P(e,17530,r.language),h.zy(r,"default")&&U(e,17540,r.default),r.sub&&V(e,t,r.sub)}))}function W(e,t,r){S(e,t,29555,(e=>{var i;r.tag&&s()(i=r.tag).call(i,(r=>{V(e,t,r)})),r.target&&function(e,t,r){S(e,t,25536,(e=>{r.type&&P(e,25546,r.type),h.zy(r,"typeValue")&&U(e,26826,r.typeValue),h.zy(r,"trackUid")&&I(e,25541,r.trackUid),h.zy(r,"chapterUid")&&I(e,25540,r.chapterUid),h.zy(r,"attachUid")&&I(e,25540,r.attachUid)}))}(e,t,r.target)}))}function M(e,t,r){S(e,t,307544935,(e=>{var i;s()(i=r.entry).call(i,(r=>{W(e,t,r)}))}))}function E(e,t,r){S(e,t,475249515,(e=>{var i;s()(i=r.entry).call(i,(r=>{!function(e,t,r){S(e,t,187,(e=>{var i;U(e,179,r.time),s()(i=r.pos).call(i,(r=>{!function(e,t,r){S(e,t,183,(e=>{U(e,247,r.track),U(e,241,r.pos)}))}(e,t,r)}))}))}(e,t,r)}))}))}function k(e,t,r){var i;const n=t.elePositionInfos;t.elePositionInfos=[],g(e,423732329);const a={pos:e.getPos(),length:0,bytes:8};m(e,0,8);const o=e.getPos();s()(i=r.entry).call(i,(r=>{!function(e,t,r){g(e,24999);const i={pos:e.getPos(),length:0,bytes:8};m(e,0,8);const n=e.getPos();I(e,18094,r.uid),r.name&&P(e,18030,r.name),r.mime&&P(e,18016,r.mime),r.description&&P(e,18046,r.description),r.data&&v(e,18012,r.data.data),i.length=e.getPos()-n,t.elePositionInfos.push(i)}(e,t,r)})),a.length=e.getPos()-o,t.elePositionInfos.push(a),_(e,t),t.elePositionInfos=n}},59166:(e,t,r)=>{"use strict";r.d(t,{HL:()=>V,KD:()=>F,OD:()=>R,S1:()=>M,Ui:()=>O,XC:()=>N,kM:()=>D,oT:()=>k,sL:()=>E,wA:()=>L,wf:()=>z});var i=r(5496),n=r.n(i),a=r(73363),s=r.n(a),o=r(86226),c=r.n(o),l=r(96319),d=r.n(l),h=r(11393),u=r.n(h),p=r(31721),f=r.n(p),g=r(54810),m=r.n(g),x=r(63939),I=r(72739),U=r(729),y=r(31865),A=r(37246),v=r(14686),P=r(60264),_=r(37837),S=r(23991),w=r(83314),b=r(39381),C=r(82774);const T=3;function B(e){const t=e.readU(9),r=e.readU(3),i=e.readU(2),n=e.readU(2),a=e.readU(3);e.readU(5),e.readU(2);const s=e.readU(6),o=e.readU(7),c=e.readU(1),l=e.readU(8),d=e.readU(1),h=e.readU(1),u=[],p=[];if(s){for(let t=0;t<s-1;t++)u[t]=e.readU(8);u[s-1]=e.readU(6)}else e.readU(6);if(r>1){let t=0;for(let i=r-2;i>=0;--i)t|=e.readU(1)<<i;for(let t=r;t<=8&&r>1;++t)e.readU(1);for(let i=r-2;i>=0;--i)t&1<<i&&(p[i]=e.readU(8))}const f=e.readU(8),g=[];if(f)for(let t=0;t<f;t++)g.push(e.readU(8));return{olsIdx:t,numSublayers:r,bitDepthMinus8:a,chromaFormatIdc:n,constantFrameRate:i,generalProfileIdc:o,generalTierFlag:c,generalLevelIdc:l,ptlFrameOnlyConstraintFlag:d,ptlMultilayerEnabledFlag:h,generalConstraintInfo:u,sublayerLevelIdc:p,generalSubProfileIdc:g,maxPictureWidth:e.readU(16),maxPictureHeight:e.readU(16),avgFramerate:e.readU(16)}}function V(e){const t=new y.A(e,!0);if(1&t.readUint8()){const r=new A.A;r.appendBuffer(e.subarray(1)),B(r),t.skip(r.getPointer())}let r=[],i=[],n=[];const a=t.readUint8();for(let e=0;e<a;e++){const e=31&t.readUint8();let a=1;13!==e&&12!==e&&(a=t.readUint16());const s=[];for(let e=0;e<a;e++){const e=t.readUint16();s.push(t.readBuffer(e))}14===e?r=s:15===e?i=s:16===e&&(n=s)}return{vpss:r,spss:i,ppss:n}}function W(e,t,r){const i=t[0];let a;if(i){const e=z(i);let t=e.generalConstraintInfo;var o;t.length||(t=n()(o=new Array(12)).call(o,0));const r=new w.A;if(r.writeU(9,0),r.writeU(3,e.spsMaxSublayersMinus1+1),r.writeU(2,1),r.writeU(2,e.chromaFormatIdc),r.writeU(3,e.bitDepthMinus8),r.writeU(5,31),r.writeU(2,0),r.writeU(6,t.length),r.writeU(7,e.profile),r.writeU1(e.tierFlag),r.writeU(8,e.level),r.writeU1(e.ptlFrameOnlyConstraintFlag),r.writeU1(e.ptlMultilayerEnabledFlag),t.length){for(let e=0;e<t.length-1;e++)r.writeU(8,t[e]);r.writeU(6,t[t.length-1])}else r.writeU(6,63);if(e.spsMaxSublayersMinus1+1>1){let t=0;for(let r=e.spsMaxSublayersMinus1-1;r>=0;r--)t=t<<1|e.ptlSublayerLevelPresentFlag[r];r.writeU(e.spsMaxSublayersMinus1,t);for(let t=e.spsMaxSublayersMinus1+1;t<=8&&e.spsMaxSublayersMinus1>0;++t)r.writeU1(0);for(let t=e.spsMaxSublayersMinus1-1;t>=0;t--)e.ptlSublayerLevelPresentFlag[t]&&r.writeU(8,e.sublayerLevelIdc[t])}r.writeU(8,e.generalSubProfileIdc.length);for(let t=0;t<e.generalSubProfileIdc.length;t++)r.writeU(8,e.sublayerLevelIdc[t]);r.writeU(16,e.width),r.writeU(16,e.height),r.writeU(16,0),r.padding(),a=r.getBuffer().subarray(0,r.getPointer())}let c=2+(a?a.length:0);e.length&&(c+=3,c=s()(e).call(e,((e,t)=>e+2+t.length),c)),t.length&&(c+=3,c=s()(t).call(t,((e,t)=>e+2+t.length),c)),r.length&&(c+=3,c=s()(r).call(r,((e,t)=>e+2+t.length),c));const l=new Uint8Array(c),d=new U.A(l,!0);d.writeUint8(T<<1|(a?1:0)|248),a&&d.writeBuffer(a);let h=0;return e.length&&h++,t.length&&h++,r.length&&h++,d.writeUint8(h),e.length&&(d.writeUint8(142),d.writeUint16(e.length),I.__(e,(e=>{d.writeUint16(e.length),d.writeBuffer(e)}))),t.length&&(d.writeUint8(143),d.writeUint16(t.length),I.__(t,(e=>{d.writeUint16(e.length),d.writeBuffer(e)}))),r.length&&(d.writeUint8(144),d.writeUint16(r.length),I.__(r,(e=>{d.writeUint16(e.length),d.writeBuffer(e)}))),l}function M(e){let t=P.py(e);if(t.length>=2){const e=[],r=[],i=[];if(c()(t).call(t,(t=>{const n=t[1]>>>3&31;14===n?e.push(t):15===n?r.push(t):16===n&&i.push(t)})),r.length&&i.length)return W(e,r,i)}}function E(e){let t=P.py(e);if(t.length>=2){const e=[],r=[],i=[];if(c()(t).call(t,(t=>{const n=t[1]>>>3&31;14===n?e.push(t):15===n?r.push(t):16===n&&i.push(t)})),r.length&&i.length){const t=[r[0],i[0]];return e.length&&t.unshift(e[0]),P.nW(t,0)}}}function k(e,t=!1){let r,i=!1,n=P.py(e);if(n.length){const e=[],a=[],s=[];c()(n).call(n,(t=>{const r=t[1]>>>3&31;14===r?e.push(t):15===r?a.push(t):16===r&&s.push(t),8!==r&&7!==r&&9!==r&&10!==r||(i=!0)})),a.length&&s.length?(r=W(e,a,s),n=d()(n).call(n,(e=>{const r=e[1]>>>3&31;return(t||14!==r&&15!==r&&16!==r)&&20!==r}))):n=d()(n).call(n,(e=>20!=(e[1]>>>3&31)))}const a=s()(n).call(n,((e,t)=>e+T+1+t.length),0),o=(0,_.sY)(a),l=(0,v.s3)(o,a);return P.S9(n,T,l),{bufferPointer:o,length:a,extradata:r,key:i}}function L(e,t,r,i,n){const a=[P.Le(e,0),P.Le(t,0),P.Le(r,0),P.Le(i,2)];let o=s()(a).call(a,((e,t)=>e+t),0);const c=(0,_.sY)(o+7);let l=c;return C.w8((l+=1,l-1),0),C.w8((l+=1,l-1),0),C.w8((l+=1,l-1),0),C.w8((l+=1,l-1),1),C.w8((l+=1,l-1),0),C.w8((l+=1,l-1),161),C.w8((l+=1,l-1),(n?1:0)<<7|40),e.length&&(P.nW(e,0,(0,v.s3)(l,a[0])),l+=a[0]),t.length&&(P.nW(t,0,(0,v.s3)(l,a[1])),l+=a[1]),r.length&&(P.nW(r,0,(0,v.s3)(l,a[2])),l+=a[2]),i.length&&P.nW(i,2,(0,v.s3)(l,a[3])),{bufferPointer:c,length:o+7}}function D(e,t){var r;let i=u()(r=P.py(e)).call(r,P.py(t));if(i.length){let e=[],t=[],r=[],n=[];return c()(i).call(i,(i=>{const a=i[1]>>>3&31;14===a?e.push(i):15===a?t.push(i):16===a?r.push(i):20!==a&&n.push(i)})),L(e,t,r,n,!0)}}function R(e,t,r=T){var i;t&&(r=t[0]>>>1&3);let n=[],a=[],s=[],o=!1;if(t){const e=V(t);n=e.vpss,a=e.spss,s=e.ppss,o=!0}const l=d()(i=P.wN(e,r)).call(i,(e=>20!=(e[1]>>>3&31))),h=[];return c()(l).call(l,(e=>{const t=e[1]>>>3&31;15!==t||a.length?16!==t||s.length?20!==t&&h.push(e):s.push(e):a.push(e),8!==t&&7!==t||(o=!0)})),{...L(n,a,s,h,o),key:o}}function N(e,t){let r;if(!t&&e.sideData[1]&&(t=e.sideData[1]),t&&P.Bs(t))I.__(P.py(t),(e=>{if(15==(e[1]>>>3&31))return r=e,!1}));else if(t&&t.length>=6){const{spss:e}=V(t);e.length&&(r=e[0])}r&&function(e,t){const{profile:r,level:i,width:n,height:a,videoDelay:s,chromaFormatIdc:o,bitDepthMinus8:c}=z(t);switch(e.codecpar.profile=r,e.codecpar.level=i,e.codecpar.width=n,e.codecpar.height=a,e.codecpar.videoDelay=s,c){case 0:e.codecpar.format=3===o?5:2===o?4:0;break;case 2:e.codecpar.format=3===o?68:2===o?64:62}}(e,r)}function F(e,t=4){if(64&x.f[15](e+36)){let t=P.py((0,v.s3)(x.f[20](e+24),x.f[15](e+28)));return f()(t).call(t,(e=>{const t=e[1]>>>3&31;return 8===t||7===t}))}{const r=x.f[15](e+28);let i=0;for(;i<r-t;){const r=b.r8(x.f[20](e+24)+(i+t+1))>>>3&31;if(8===r||7===r)return!0;i+=4===t?b.Sg(x.f[20](e+24)+i):3===t?b.ht(x.f[20](e+24)+i):2===t?b.yd(x.f[20](e+24)+i):b.r8(x.f[20](e+24)+i),i+=t}return!1}}function z(e){if(!e||e.length<3)return;let t=0;0===e[0]&&0===e[1]&&0===e[2]&&1===e[3]&&(t=4);let r=0,i=0,n=0,a=0,s=0,o=1,c=0,l=0,d=0;const h=[],u=[],p=[],f=[],g=P.BN(e.subarray(t)),x=new A.A(g.length);x.appendBuffer(g),x.readU1(),x.readU1(),x.readU(6),x.readU(5),x.readU(3),x.readU(8);const I=x.readU(3);o=x.readU(2);const U=x.readU(2);if(x.readU(1)){if(r=x.readU(7),c=x.readU(1),i=x.readU(8),l=x.readU(1),d=x.readU(1),x.readU(1)){for(let e=0;e<8;e++)h[e]=x.readU(8);h[8]=x.readU(7);const e=x.readU(8);x.readU(e)}x.skipPadding();for(let e=I-1;e>=0;e--)u[e]=x.readU(1);x.skipPadding();for(let e=I-1;e>=0;e--)u[e]&&(p[e]=x.readU(8));const e=x.readU(8);if(e)for(let t=0;t<e;t++)f[t]=x.readU(32)}x.readU1(),x.readU1()&&x.readU1();const y=n=S.xb(x),v=a=S.xb(x);if(x.readU1()&&(S.xb(x),S.xb(x),S.xb(x),S.xb(x)),x.readU1()){const e=S.xb(x),t=U+5,r=1<<t,i=y/(1<<t),n=v/(1<<t),a=Math.ceil(m()(i)),s=Math.ceil(m()(n));let o=0,c=0,l=0;e>0&&(l=x.readU1(),c=x.readU1());for(let t=0;e>0&&t<=e;t++)c&&0!=t||(t>0&&y>r&&x.readU(a),t>0&&v>r&&x.readU(s),t<e&&y>r&&x.readU(a),t<e&&v>r&&x.readU(s)),l||x.readU(2);if(o=S.xb(x)+1,x.readU(1)&&x.readU(1))for(let t=0;t<=e;t++)x.readU(o)}s=S.xb(x),x.readU(1),x.readU(1);const _=x.readU(4),w=x.readU(1);let b=0;w&&(b=S.xb(x));const C=[],T=x.readU(2);for(let e=0;e<8*T;e++)C[e]=x.readU(1);return{profile:r,level:i,width:n,height:a,videoDelay:I+1>2?2:I,chromaFormatIdc:o,bitDepthMinus8:s,generalProfileSpace:0,tierFlag:c,generalConstraintInfo:h,generalSubProfileIdc:f,ptlFrameOnlyConstraintFlag:l,ptlMultilayerEnabledFlag:d,spsMaxSublayersMinus1:I,ptlSublayerLevelPresentFlag:u,sublayerLevelIdc:p,sps_log2_max_pic_order_cnt_lsb_minus4:_,sps_poc_msb_cycle_flag:w,sps_poc_msb_cycle_len_minus1:b,sps_num_extra_ph_bytes:T,sps_extra_ph_bit_present_flag:C}}function O(e){P.Bs(e)&&(e=M(e));const t=new A.A;return t.appendBuffer(e),1&t.readU(8)?B(t):{}}},90519:(e,t,r)=>{"use strict";function i(e){crypto.getRandomValues(e)}r.d(t,{y:()=>i})},38156:(e,t,r)=>{"use strict";r.d(t,{O5:()=>f,S5:()=>g,Xo:()=>m,uC:()=>u});var i=r(52730),n=r.n(i),a=r(63939),s=r(50932),o=r(97317),c=r(9705),l=r(77231),d=r(14686),h=r(52699);function u(e){if(!(e<=0||e>=7))return{x:128*(1&e),y:128*(e>>>1^(e<4?1:0))}}function p(e,t,r,i,a){if(!a)return c.UY;if(e<0)return c.UY;const s=1===i||2===i?a.log2ChromaW:0,o=e+(1<<s)-1>>>s;if(o&&r>l.go/o)return c.UY;let d=r*o;return 4&n()(a)&&(d=d+7>>>3),d}function f(e,t,r){const i=(0,o.I)(t);if(!i)return c.UY;const{maxPixSteps:n,maxPixStepsComps:a}=function(e){const t=[0,0,0,0],r=[0,0,0,0];for(let i=0;i<4;i++)e.comp[i]&&e.comp[i].step>t[e.comp[i].plane]&&(t[e.comp[i].plane]=e.comp[i].step,r[e.comp[i].plane]=i);return{maxPixSteps:t,maxPixStepsComps:r}}(i);(0,d.sO)(e,0,16);let l=0;for(let t=0;t<4;t++){if((l=p(r,0,n[t],a[t],i))<0)return l;s.M[15](e+4*t,l)}}function g(e,t,r,i){const h=[0,0,0,0],u=(0,o.I)(t);if(!u)return c.UY;if((0,d.sO)(e,0,16),a.f[15](i)>l.go/r)return c.UY;if(s.M[25](e,a.f[15](i)*r),2&n()(u))return s.M[25](e+4,1024),0;for(let e=0;e<4;e++)u.comp[e]&&(h[u.comp[e].plane]=1);for(let t=0;t<4&&h[t];t++){let n=1===t||2===t?u.log2ChromaH:0,o=r+(1<<n)-1>>n;if(a.f[15](i+4*t)>l.go/o)return c.UY;s.M[25](e+4*t,o*a.f[15](i+4*t))}return 0}function m(e,t,r,i,n){const o=h.z(16),u=h.z(16);(0,d.sO)(e,0,16);for(let e=0;e<4;e++)s.M[15](o+4*e,a.f[15](n+4*e));let p=g(u,t,r,o);if(p<0)return f(),p;p=0;for(let e=0;e<4;e++){if(a.f[25](u+4*e)>l.go-p)return f(),c.UY;p+=a.f[25](u+4*e)}if(!i)return f(),p;s.M[20](e,i);for(let t=1;t<4&&a.f[25](u+4*t);t++)s.M[20](e+4*t,a.f[20](e+4*(t-1))+a.f[25](u+4*(t-1)));return f(),p;function f(){h.t(16),h.t(16)}}r(37837)},95073:(e,t,r)=>{"use strict";function i(e,t){return e+(t-1)&~(t-1)}r.d(t,{A:()=>i})},52730:(e,t,r)=>{e.exports=r(64055)},60974:(e,t,r)=>{"use strict";var i=r(88280),n=r(48804),a=RegExp.prototype;e.exports=function(e){return e===a||i(a,e)?n(e):e.flags}},48804:(e,t,r)=>{"use strict";r(9164);var i=r(40663);e.exports=i},9164:()=>{},64055:(e,t,r)=>{"use strict";var i=r(60974);e.exports=i}}]);