(self.webpackChunkAVTranscoder=self.webpackChunkAVTranscoder||[]).push([[903],{46903:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>W});var r=i(49859),a=i(71426),s=i.n(a),n=i(86226),o=i.n(n),c=i(64007),d=i.n(c),h=i(18979),l=i.n(h),m=i(63939),g=(i(9599),i(51597)),u=i(4624),p=i(95335),f=i(9705),w=i(14769),b=i(14686),U=i(87400),v=i(50011),P=i(19028),S=i(97317),k=i(71517),T=i(44328),A=i(77231),I=i(37246),B=i(91375);const C="src/avformat/formats/OFlacFormat.ts",y={};class W extends g.A{constructor(e={}){super(),(0,r.A)(this,"type",17),(0,r.A)(this,"options",void 0),(0,r.A)(this,"muxStream",void 0),(0,r.A)(this,"seekPoint",void 0),(0,r.A)(this,"firstFramePos",void 0),(0,r.A)(this,"streamInfo",void 0),(0,r.A)(this,"bitReader",void 0),(0,r.A)(this,"frameInfo",void 0),(0,r.A)(this,"paddingPos",void 0),(0,r.A)(this,"paddingLen",void 0),this.options=p.X$({},y,e)}init(e){return e.ioWriter.setEndian(!0),this.seekPoint=[],this.streamInfo=null,this.bitReader=new I.A(16),this.frameInfo={sampleRate:0,channels:0,bps:0,blocksize:0,chMode:0,frameOrSampleNum:BigInt(0),isVarSize:0},this.paddingLen=e.metadataHeaderPadding,this.paddingLen<=0&&(this.paddingLen=8192),0}writeHeader(e){var t,i;const r=s()(t=e.streams).call(t,(e=>1===e.codecpar.codecType&&86028===e.codecpar.codecId));if(!r)return u.z3("can not found stream with mp3 codec",C,112),f.UY;this.muxStream=r,e.ioWriter.writeString("fLaC"),e.ioWriter.writeUint8(0),e.ioWriter.writeUint24(w.ob),r.codecpar.extradata&&r.codecpar.extradataSize>=w.ob?e.ioWriter.writeBuffer((0,b.s3)(r.codecpar.extradata,r.codecpar.extradataSize).subarray(0,w.ob)):e.ioWriter.skip(w.ob);const a=(0,U.MZ)(e.metadata);e.ioWriter.writeUint8(4);const n=e.ioWriter.getPos();e.ioWriter.writeUint24(0),e.ioWriter.setEndian(!1);const c=v.encode("libmedia-v0.6.1-355-g72ba4aa7");e.ioWriter.writeUint32(c.length),e.ioWriter.writeBuffer(c),e.ioWriter.writeUint32(a.length),o()(a).call(a,(t=>{const i=v.encode(t);e.ioWriter.writeUint32(i.length),e.ioWriter.writeBuffer(i)})),e.ioWriter.setEndian(!0);let h=e.ioWriter.getPos();return e.ioWriter.seek(n),e.ioWriter.writeUint24(Number(h-n)-3),e.ioWriter.seek(h),o()(i=e.streams).call(i,(t=>{if(1024&t.disposition&&t.attachedPic){const i=p.BE(P.In)[t.codecpar.codecId];if(i){let r=0;t.metadata.description&&(r=v.encode(t.metadata.description).length),e.ioWriter.writeUint8(6),e.ioWriter.writeUint24(8+i.length+4+r+4+4+4+4+4+m.f[15](t.attachedPic+28));let a=0;t.metadata.comment&&d()(P.fz).call(P.fz,t.metadata.comment)>-1&&(a=d()(P.fz).call(P.fz,t.metadata.comment)),e.ioWriter.writeUint32(a),e.ioWriter.writeUint32(i.length),e.ioWriter.writeBuffer(v.encode(i)),e.ioWriter.writeUint32(r),t.metadata.description&&e.ioWriter.writeBuffer(v.encode(t.metadata.description)),e.ioWriter.writeUint32(t.codecpar.width),e.ioWriter.writeUint32(t.codecpar.height);const s=(0,S.U)(t.codecpar.format);s?e.ioWriter.writeUint32(s):e.ioWriter.writeUint32(0),e.ioWriter.writeUint32(0),e.ioWriter.writeUint32(m.f[15](t.attachedPic+28)),e.ioWriter.writeBuffer((0,k.iI)(t.attachedPic))}}})),this.paddingPos=e.ioWriter.getPos(),e.ioWriter.writeUint8(129),e.ioWriter.writeUint24(this.paddingLen),e.ioWriter.skip(this.paddingLen),this.firstFramePos=e.ioWriter.getPos(),0}writeAVPacket(e,t){const i=e.getStreamByIndex(m.f[15](t+32));if(!i||1024&i.disposition)return void u.R8(`can not found the stream width the packet's streamIndex: ${m.f[15](t+32)}, ignore it`,C,204);if(i!==this.muxStream)return void u.R8(`packet's type is not audio: ${m.f[15](t+32)}, ignore it`,C,209);const r=(0,k.rU)(t,1);var a;if(r&&(this.streamInfo=l()(a=(0,b.s3)(m.f[20](r),m.f[25](r+4))).call(a)),m.f[15](t+28)>=16){const r=(0,T.Mr)(m.f[17](t+8),t+72,{den:i.codecpar.sampleRate,num:1});(!this.seekPoint.length||(0,T.k)(r-this.seekPoint[this.seekPoint.length-1].pts,{den:i.codecpar.sampleRate,num:1},A.i0)>=5e3)&&(this.bitReader.reset(),this.bitReader.appendBuffer((0,b.s3)(m.f[20](t+24),16)),(0,B.x)(this.bitReader,this.frameInfo)>=0&&this.seekPoint.push({pos:e.ioWriter.getPos()-this.firstFramePos,pts:r,samples:this.frameInfo.blocksize})),e.ioWriter.writeBuffer((0,k.iI)(t))}return 0}writeTrailer(e){const t=e.ioWriter.getPos();if(this.streamInfo&&(e.ioWriter.seek(BigInt(8)),e.ioWriter.writeBuffer(this.streamInfo.subarray(0,w.ob))),this.seekPoint.length){e.ioWriter.seek(this.paddingPos);const t=this.paddingLen,i=Math.min(this.seekPoint.length,Math.floor((t-4)/18));e.ioWriter.writeUint8(3),e.ioWriter.writeUint24(18*i);let r=1;i<this.seekPoint.length&&(r=(this.seekPoint.length-1)/(i-1));for(let t=0;t<i;t++){const i=this.seekPoint[Math.floor(t*r)];e.ioWriter.writeUint64(i.pts),e.ioWriter.writeUint64(i.pos),e.ioWriter.writeUint16(i.samples)}e.ioWriter.writeUint8(129),e.ioWriter.writeUint24(t-4-18*i)}return e.ioWriter.seek(t),e.ioWriter.flush(),0}flush(e){return e.ioWriter.flush(),0}getCapabilities(){return W.Capabilities}}(0,r.A)(W,"Capabilities",[86028])},51597:(e,t,i)=>{"use strict";i.d(t,{A:()=>a});var r=i(49859);class a{constructor(){(0,r.A)(this,"type",-1)}async destroy(e){}}(0,r.A)(a,"Capabilities",[])},91375:(e,t,i)=>{"use strict";i.d(t,{x:()=>c});var r=i(9705),a=i(4624),s=i(14769),n=i(13188);const o="src/avformat/formats/flac/iflac.ts";function c(e,t,i=!1){const c=e.getPointer();if(32764!=(32767&e.readU(15)))return!i&&a.z3("invalid sync code",o,57),r.LR;t.isVarSize=e.readU1();const d=e.readU(4),h=e.readU(4);if(t.chMode=e.readU(4),t.chMode<s.jA)t.channels=t.chMode+1,t.chMode=0;else{if(!(t.chMode<s.jA+3))return!i&&a.z3(`invalid channel mode: ${t.chMode}`,o,76),r.LR;t.channels=2,t.chMode-=s.jA-1}const l=e.readU(3);if(3===l)return!i&&a.z3(`invalid sample size code: ${l}`,o,82),r.LR;if(t.bps=s.oe[l],e.readU1())return!i&&a.z3("broken stream, invalid padding",o,88),r.LR;if(t.frameOrSampleNum=function(e){let t=BigInt(Math.floor(e.readU(8))),i=(t&BigInt(128))>>BigInt(1);if((t&BigInt(192))===BigInt(128)||t>=BigInt(254))return-BigInt(1);for(;t&i;){const r=BigInt(Math.floor(e.readU(8)))-BigInt(128);if(r>>BigInt(6))return-BigInt(1);t=(t<<BigInt(6))+r,i<<=BigInt(5)}return t&=(i<<BigInt(1))-BigInt(1),t}(e),t.frameOrSampleNum<0)return!i&&a.z3("sample/frame number invalid",o,95),r.LR;if(0===d)return!i&&a.z3("reserved blocksize code: 0",o,100),r.LR;if(t.blocksize=6===d?e.readU(8)+1:7===d?e.readU(16)+1:s.Xr[d],h<12)t.sampleRate=s.DK[h];else if(12===h)t.sampleRate=1e3*e.readU(8);else if(13===h)t.sampleRate=e.readU(16);else{if(14!==h)return!i&&a.z3(`illegal sample rate code ${h}`,o,126),r.LR;t.sampleRate=10*e.readU(16)}return(0,n.A)(e.getBuffer().subarray(c,e.getPointer()))!==e.readU(8)?(!i&&a.z3("header crc mismatch",o,133),r.LR):0}},19028:(e,t,i)=>{"use strict";i.d(t,{In:()=>I,M9:()=>N,VO:()=>z,fz:()=>B,hm:()=>R,qg:()=>M});var r=i(52730),a=i.n(r),s=i(86226),n=i.n(s),o=i(18979),c=i.n(o),d=i(5496),h=i.n(d),l=i(64007),m=i.n(l),g=i(63939),u=i(50932),p=i(4624),f=i(50011),w=i(35336),b=i(31865),U=i(71517),v=i(37837),P=i(14686),S=i(72739),k=i(95335),T=i(92647);const A="src/avformat/formats/mp3/id3v2.ts",I={JPG:7,PNG:61,"image/gif":97,"image/jpeg":7,"image/jpg":7,"image/png":61,"image/tiff":96,"image/bmp":78,"image/webp":171},B=["Other","32x32 pixels 'file icon'","Other file icon","Cover (front)","Cover (back)","Leaflet page","Media (e.g. label side of CD)","Lead artist/lead performer/soloist","Artist/performer","Conductor","Band/Orchestra","Composer","Lyricist/text writer","Recording Location","During recording","During performance","Movie/video screen capture","A bright coloured fish","Illustration","Band/artist logotype","Publisher/Studio logotype"];function C(e,t){e.writeUint8(t>>21&127),e.writeUint8(t>>14&127),e.writeUint8(t>>7&127),e.writeUint8(127&t)}function y(e,t){let i="utf-8";return 0===e?i="iso-8859-1":1===e?i="utf-16":2===e&&(i="utf-16be"),new TextDecoder(i).decode(t)}function W(e){return(127&e)+((32512&e)>>1)+((8323072&e)>>2)+((2130706432&e)>>3)}async function L(e,t){await e.seek(t);const i=await e.readString(4);return/^[A-Z0-9]+$/.test(i)}async function M(e,t,i,r){const s=2!==i.version,n=s?10:6;let o=e.getPos()+BigInt(0|t);async function c(){await e.skip(Number(BigInt.asIntN(32,o-e.getPos())))}if(s&&64&a()(i)){let r=await async function(e,t){let i=0;for(;t--;)i=(i<<7)+(127&await e.readUint8());return i}(e,4);if(4===i.version&&(r-=4),r<0)return p.z3("invalid extended header length",A,149),await c();if(await e.skip(r),(t-=r+4)<0)return p.z3("extended header too long",A,155),await c()}for(;t>n;){let o,c;if(s){if(o=await e.readString(4),c=await e.readUint32(),!c){p.z3("invalid frame size",A,168);break}if(4===i.version&&c>127)if(c<t){await e.flush();const t=e.getPos();if(!(1&a()(e)||6+c<e.remainingLength()))break;if(await L(e,t+BigInt(2)+BigInt(W(c))))c=W(c);else if(!await L(e,t+BigInt(2)+BigInt(c)))break;await e.seek(t)}else c=W(c);await e.readUint16()}else o=await e.readString(3),c=await e.readUint24();if("APIC"===o)r.apic||(r.apic=[]),r.apic.push(await e.readBuffer(c));else if("USLT"===o){const t=await e.readUint8(),i=await e.readString(3),a=await e.readBuffer(c-4);r.lyrics=`${i} ${y(t,a)}`}else if("COMM"===o||"COM"===o){const t=await e.readUint8(),i=await e.readString(3),a=await e.readBuffer(c-4);r.comment=`${i} ${y(t,a)}`}else if("PRIV"===o){const t=e.getPos(),i=[];for(;;){const t=await e.readUint8();if(0===t)break;i.push(t)}const a=f.decode(new Uint8Array(i));let s;s="com.apple.streaming.transportStreamTimestamp"===a?await e.readUint64():await e.readBuffer(c-Number(e.getPos()-t)),r[a]=s}else{let t;switch(t="T"===o[0]?y(await e.readUint8(),await e.readBuffer(c-1)):await e.readBuffer(c),o){case"TIT2":case"TT2":r.title=t;break;case"TPE1":case"TP1":r.artist=t;break;case"TPE2":case"TP2":r.albumArtist=t;break;case"TPOS":r.disc=t;break;case"TCOP":r.copyright=t;break;case"TALB":case"TAL":r.album=t;break;case"TRCK":case"TRK":r.track=t;break;case"TYER":case"TDRL":case"TDRC":r.date=t;break;case"COMM":case"COM":r.comment=t;break;case"TCON":case"TCO":r.genre=t;break;case"TSSE":case"TEN":r.encoder=t;break;case"TCOM":r.composer=t;break;case"TENC":r.vendor=t;break;case"TLAN":r.language=t;break;case"TPE3":case"TP3":r.performer=t;break;case"TPUB":r.publisher=t;break;case"TCMP":case"TCP":r.compilation=t;break;case"TDEN":r.creationTime=t;break;case"TSOA":r.albumSort=t;break;case"TSOP":r.artistSort=t;break;case"TSOT":r.titleSort=t;break;case"TIT1":r.grouping=t;break;default:r[o]=t}}t-=c+n}4==i.version&&16&a()(i)&&(o+=BigInt(10)),await e.skip(Number(BigInt.asIntN(32,o-e.getPos())))}function R(e,t,i){const r=2!==i.version;n()(t).call(t,(t=>{const i=new b.A(t),a=i.readUint8();let s;function n(){let e=Number(i.getPos());for(;e<t.length&&t[e];)e++;return e}if(r?(s=i.readString(n()-Number(i.getPos())),i.skip(1)):s=i.readString(3),!I[s])return;const o=i.readUint8();let c;const d=n()-Number(i.getPos());d&&(c=y(a,i.readBuffer(d))),i.skip(1);const h=e.createStream();h.codecpar.codecId=I[s],h.codecpar.codecType=0,h.disposition|=1024,h.attachedPic=(0,U._5)(),u.M[15](h.attachedPic+32,h.index);const l=i.remainingSize(),m=(0,v.sY)(l),p=i.readBuffer(l);(0,P.lW)(m,l,p),p.length>=8&&S.FB(p.subarray(0,8),new Uint8Array([137,80,78,71,13,10,26,10]))&&(h.codecpar.codecId=61),(0,U.NX)(h.attachedPic,m,l),u.M[15](h.attachedPic+36,1|g.f[15](h.attachedPic+36)),h.metadata.comment=B[o],c&&(h.metadata.title=c)}))}function N(e,t,i,r){var a;let s=e.getPos();e.writeString("ID3"),e.writeUint8(t),e.writeUint16(0);const o=e.getPos();function d(i,r){const a=f.encode(r);e.writeString(i),4===t?C(e,a.length+1):e.writeUint32(a.length+1),e.writeUint16(0),e.writeUint8(3),e.writeBuffer(a)}function l(i,r){e.writeString(i),4===t?C(e,r.length):e.writeUint32(r.length),e.writeUint16(0),e.writeBuffer(r)}var m;if(e.writeUint32(0),r.poster&&l("APIC",r.poster),r.apic&&n()(m=r.apic).call(m,(e=>{l("APIC",e)})),r.title&&d("TIT2",r.title),r.artist&&d("TPE1",r.artist),r.albumArtist&&d("TPE2","albumArtist"),r.disc&&d("TPOS",r.disc),r.copyright&&d("TCOP",r.copyright),r.album&&d("TALB",r.album),r.track&&d("TRCK",r.track),r.date&&d("TDRC",r.date),r.comment){let e=r.comment;" "===e[3]&&(e=c()(e).call(e,0,3)+c()(e).call(e,4)),d("COMM",e)}if(r.lyrics){let e=r.lyrics;" "===e[3]&&(e=c()(e).call(e,0,3)+c()(e).call(e,4)),d("USLT",e)}r.genre&&d("TCON",r.genre+""),r.encoder&&d("TSSE",r.encoder),r.composer&&d("TCOM",r.composer),r.vendor&&d("TENC",r.vendor),r.language&&d("TLAN",r.language),r.performer&&d("TPE3",r.performer),r.publisher&&d("TPUB",r.publisher),r.compilation&&d("TCMP",r.compilation),r.creationTime&&d("TDEN",r.creationTime),r.albumSort&&d("TSOA",r.albumSort),r.artistSort&&d("TSOP",r.artistSort),r.titleSort&&d("TSOT",r.titleSort),r.grouping&&d("TIT1",r.grouping),i<10&&(i=10);const g=Number(BigInt.asIntN(32,e.getPos()-s));i>268435455-g&&(i=268435455-g),e.writeBuffer(h()(a=new Uint8Array(i)).call(a,0)),s=e.getPos(),e.seek(o),C(e,g),e.seek(s)}function z(e,t){var i;const r=[],a=new w.A,s=[];a.onFlush=e=>(s.push(c()(e).call(e)),0);const o=2!==t;return n()(i=e.streams).call(i,(e=>{if(1024&e.disposition&&(o&&(7===e.codecpar.codecId||61===e.codecpar.codecId||96===e.codecpar.codecId||97===e.codecpar.codecId||171===e.codecpar.codecId||78===e.codecpar.codecId)||!o&&(61===e.codecpar.codecId||7===e.codecpar.codecId))&&e.attachedPic){s.length=0,a.writeUint8(3),o?(a.writeString(k.BE(I)[e.codecpar.codecId]),a.writeUint8(0)):61===e.codecpar.codecId?a.writeString("PNG"):a.writeString("JPG");let t=0;e.metadata.comment&&m()(B).call(B,e.metadata.comment)>-1&&(t=m()(B).call(B,e.metadata.comment)),a.writeUint8(t),e.metadata.description&&a.writeString(e.metadata.description),a.writeUint8(0),a.writeBuffer((0,U.iI)(e.attachedPic)),a.flush(),r.push((0,T.A)(Uint8Array,s))}})),r}},38743:(e,t,i)=>{"use strict";i.d(t,{B:()=>d,h:()=>h});var r=i(49859),a=i(73363),s=i.n(a),n=i(77231),o=i(50011);class c{constructor(){(0,r.A)(this,"list",void 0),this.list=[]}read(e,t){for(let i=0;i<t;i++){const t=e.readUint32();this.list.push(e.readString(t))}}write(e){for(let t=0;t<this.list.length;t++){const i=o.encode(this.list[t]);e.writeUint32(i.length),e.writeBuffer(i)}}addComment(e){this.list.push(e)}}class d{constructor(){(0,r.A)(this,"capturePattern",void 0),(0,r.A)(this,"streamStructureVersion",void 0),(0,r.A)(this,"headerTypeFlag",void 0),(0,r.A)(this,"granulePosition",void 0),(0,r.A)(this,"serialNumber",void 0),(0,r.A)(this,"pageSequenceNumber",void 0),(0,r.A)(this,"crcCheckSum",void 0),(0,r.A)(this,"numberPageSegments",void 0),(0,r.A)(this,"segmentTable",void 0),(0,r.A)(this,"payload",void 0),(0,r.A)(this,"pos",void 0),this.reset()}reset(){this.capturePattern="OggS",this.streamStructureVersion=0,this.headerTypeFlag=0,this.granulePosition=n.Dh,this.serialNumber=0,this.pageSequenceNumber=0,this.crcCheckSum=0,this.numberPageSegments=0,this.segmentTable=[],this.pos=BigInt(0)}async read(e){var t;this.pos=e.getPos(),await this.readPageHeader(e);const i=s()(t=this.segmentTable).call(t,((e,t)=>e+t),0);i&&(this.payload=await e.readBuffer(i))}async readPageHeader(e){if(this.capturePattern=await e.readString(4),this.streamStructureVersion=await e.readUint8(),this.headerTypeFlag=await e.readUint8(),this.granulePosition=await e.readUint64(),this.serialNumber=await e.readUint32(),this.pageSequenceNumber=await e.readUint32(),this.crcCheckSum=await e.readUint32(),this.numberPageSegments=await e.readUint8(),this.numberPageSegments)for(let t=0;t<this.numberPageSegments;t++){const t=await e.readUint8();this.segmentTable.push(t)}}write(e){if(this.pos=e.getPos(),e.writeString(this.capturePattern),e.writeUint8(this.streamStructureVersion),e.writeUint8(this.headerTypeFlag),e.writeUint64(this.granulePosition),e.writeUint32(this.serialNumber),e.writeUint32(this.pageSequenceNumber),e.writeUint32(this.crcCheckSum),this.payload){this.numberPageSegments=Math.floor(this.payload.length/255)+1;const t=this.payload.length%255;e.writeUint8(this.numberPageSegments);for(let t=0;t<this.numberPageSegments-1;t++)e.writeUint8(255);e.writeUint8(t),e.writeBuffer(this.payload)}else e.writeUint8(0)}}class h{constructor(){(0,r.A)(this,"streamIndex",void 0),(0,r.A)(this,"signature",void 0),(0,r.A)(this,"vendorStringLength",void 0),(0,r.A)(this,"vendorString",void 0),(0,r.A)(this,"userCommentListLength",void 0),(0,r.A)(this,"comments",void 0),this.vendorString="libmedia-v0.6.1-355-g72ba4aa7",this.vendorStringLength=this.vendorString.length,this.userCommentListLength=0,this.comments=new c}read(e){this.vendorStringLength=e.readUint32(),this.vendorString=e.readString(this.vendorStringLength),this.userCommentListLength=e.readUint32(),this.userCommentListLength&&this.comments.read(e,this.userCommentListLength)}write(e){const t=o.encode(this.vendorString);e.writeUint32(t.length),e.writeBuffer(t),e.writeUint32(this.comments.list.length),this.comments.write(e)}addComment(e){this.comments.addComment(e)}setCodec(e){}}},87400:(e,t,i)=>{"use strict";i.d(t,{GM:()=>w,MZ:()=>p,mS:()=>f,ol:()=>u});var r=i(49859),a=i(86226),s=i.n(a),n=i(11265),o=i.n(n),c=i(54810),d=i.n(c),h=i(38743),l=i(95335),m=i(34677);const g={album:"album",artist:"artist",description:"description",encoder:"encoder",title:"title",tracknumber:"track",date:"date",genre:"genre",comment:"comment",albumartist:"albumArtist",composer:"composer",performer:"performer",discnumber:"disc",organization:"vendor",copyright:"copyright",license:"license",isrc:"isrc",lyrics:"lyrics",language:"language",label:"vendor",script:"lyrics",encoded_by:"vendor"};function u(e,t){e&&s()(e).call(e,(e=>{const i=e.split("=");if(2===i.length){var r,a;const e=o()(r=i[0]).call(r).toLowerCase(),s=o()(a=i[1]).call(a);g[e]?t[g[e]]=s:t[e.toLowerCase()]=s}}))}function p(e){const t=[];return l.__(g,((i,r)=>{(0,m.A)(e[i])&&t.push(`${r.toUpperCase()}=${e[i]}`)})),t}class f{constructor(e="vorbis"){(0,r.A)(this,"streamIndex",void 0),(0,r.A)(this,"packetType",void 0),(0,r.A)(this,"signature",void 0),(0,r.A)(this,"version",void 0),(0,r.A)(this,"channels",void 0),(0,r.A)(this,"sampleRate",void 0),(0,r.A)(this,"bitrateMaximum",void 0),(0,r.A)(this,"bitrateNominal",void 0),(0,r.A)(this,"bitrateMinimum",void 0),(0,r.A)(this,"blocksize0",void 0),(0,r.A)(this,"blocksize1",void 0),(0,r.A)(this,"framingFlag",void 0),this.signature=e,this.version=0,this.channels=1,this.sampleRate=48e3,this.bitrateMaximum=0,this.bitrateNominal=0,this.bitrateMinimum=0,this.blocksize0=2048,this.blocksize1=256}read(e){this.packetType=e.readUint8(),this.signature=e.readString(6),this.version=e.readUint32(),this.channels=e.readUint8(),this.sampleRate=e.readInt32(),this.bitrateMaximum=e.readInt32(),this.bitrateNominal=e.readInt32(),this.bitrateMinimum=e.readInt32();const t=255&e.readUint8();this.blocksize0=Math.pow(2,t>>>4),this.blocksize1=Math.pow(2,15&t),this.framingFlag=e.readUint8()}write(e){e.writeUint8(1),e.writeString(this.signature),e.writeUint32(this.version),e.writeUint8(this.channels),e.writeInt32(this.sampleRate),e.writeInt32(this.bitrateMaximum),e.writeInt32(this.bitrateNominal),e.writeInt32(this.bitrateMinimum),e.writeUint8(d()(this.blocksize0)<<4|d()(this.blocksize1)),e.writeUint8(1)}setCodec(e){this.sampleRate=e.sampleRate,this.channels=e.chLayout.nbChannels}}class w extends h.h{constructor(e="vorbis"){super(),(0,r.A)(this,"packetType",void 0),(0,r.A)(this,"framingFlag",void 0),this.signature=e,this.packetType=1,this.framingFlag=1}read(e){this.packetType=e.readUint8(),this.signature=e.readString(6),super.read(e),"vorbis"===this.signature&&(this.framingFlag=e.readUint8())}write(e){e.writeUint8(this.packetType),e.writeString(this.signature),super.write(e),"vorbis"===this.signature&&e.writeUint8(this.framingFlag)}addComment(e){this.comments.addComment(e)}setCodec(e){}}},14769:(e,t,i)=>{"use strict";i.d(t,{DK:()=>o,XC:()=>d,Xr:()=>c,jA:()=>s,ob:()=>a,oe:()=>n});var r=i(31865);const a=34,s=8,n=[0,8,12,0,16,20,24,32],o=[0,88200,176400,192e3,8e3,16e3,22050,24e3,32e3,44100,48e3,96e3,0,0,0,0],c=[0,192,576,1152,2304,4608,0,0,256,512,1024,2048,4096,8192,16384,32768];function d(e,t){if(!t&&e.sideData[1]&&(t=e.sideData[1]),t&&t.length===a){const{bitsPerRawSample:i,sampleRate:a,channels:s}=function(e){const t=new r.A(e);t.skip(10);const i=t.readUint24();return{sampleRate:i>>4,channels:1+((15&i)>>>1),bitsPerRawSample:1+((1&i)<<4|(240&t.readUint8())>>>4)}}(t);e.codecpar.bitsPerRawSample=i,e.codecpar.sampleRate=a,e.codecpar.chLayout.nbChannels=s}}},13188:(e,t,i)=>{"use strict";function r(e,t=0){for(let i=0;i<e.length;i++){t^=e[i];for(let e=0;e<8;e++)128&t?t=t<<1^7:t<<=1}return 255&t}i.d(t,{A:()=>r})},52730:(e,t,i)=>{e.exports=i(64055)},60974:(e,t,i)=>{"use strict";var r=i(88280),a=i(48804),s=RegExp.prototype;e.exports=function(e){return e===s||r(s,e)?a(e):e.flags}},48804:(e,t,i)=>{"use strict";i(9164);var r=i(40663);e.exports=r},9164:()=>{},64055:(e,t,i)=>{"use strict";var r=i(60974);e.exports=r}}]);