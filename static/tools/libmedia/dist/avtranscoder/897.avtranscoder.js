"use strict";(self.webpackChunkAVTranscoder=self.webpackChunkAVTranscoder||[]).push([[897],{85947:(a,e,t)=>{t.d(e,{A:()=>c});var A=t(49859);class c{constructor(){(0,A.A)(this,"type",-1),(0,A.A)(this,"onStreamAdd",void 0)}async destroy(a){}}},35531:(a,e,t)=>{t.d(e,{LV:()=>u,ML:()=>I,nF:()=>P,yr:()=>w});var A=t(18979),c=t.n(A),r=t(61499),d=t(63939),i=t(50932),o=t(4624),n=t(9705),s=t(53260),p=t(95644),M=t(37837),f=t(14686),l=t(39381),V=t(99991);const D="src/avformat/formats/riff/iriff.ts";function C(a,e){let t=s.gi[a];return t?(65541===t?t=(0,p.uU)(e,!1,!1,-2):65557===t&&(t=(0,p.uU)(e,!0,!1,0)),69633===t&&8===e&&(t=69676),t):0}async function w(a,e,t){if(t<14)return o.z3("wav format size < 14",D,49),n.LR;i.M[15](e,1);const A=await a.readUint16();let c=await a.readUint16();const r=await a.readUint32();let s=8*await a.readUint32();const p=await a.readUint16();if(i.M[15](e+136,r),i.M[15](e+140,p),14===t?i.M[15](e+40,8):i.M[15](e+40,await a.readUint16()),65534===A?i.M[8](e+8,0):(i.M[8](e+8,A),i.M[15](e+4,C(A,d.f[15](e+40)))),t>=18&&357!==A){let c=await a.readUint16();t-=18,c=Math.min(t,c),c>=22&&65534===A&&(await a.skip(22),c-=22,t-=22),c>0&&(i.M[20](e+12,(0,M.sY)(c)),i.M[15](e+16,c),await a.readBuffer(c,(0,f.JW)(d.f[20](e+12),c)),t-=c),t>0&&await a.skip(t)}else if(357===A&&t>=32){t-=4,i.M[20](e+12,(0,M.sY)(t)),i.M[15](e+16,t),await a.readBuffer(t,(0,f.JW)(d.f[20](e+12),t));const A=l.E3(d.f[20](e+12)+4);if(i.M[15](e+136,l.Y0(d.f[20](e+12)+12)),c=0,s=0,t<8+20*A)return n.LR;for(let a=0;a<A;a++)c+=d.f[2](d.f[20](e+12)+(8+20*a+17))}return i.M[17](e+32,BigInt(s)),d.f[15](e+136)<0?(o.z3(`Invalid sample rate: ${d.f[15](e+136)}`,D,129),n.LR):(86065===d.f[15](e+4)&&(c=0,i.M[15](e+136,0)),69643==d.f[15](e+4)&&d.f[15](e+136)&&i.M[15](e+40,Number(BigInt.asIntN(32,d.f[17](e+32)))/d.f[15](e+136)),c!=d.f[15](e+116)&&(i.M[15](e+112,0),i.M[15](e+116,c)),0)}async function u(a,e,t){const A=a.getPos()+e;for(;a.getPos()<A;){const e=await a.readString(4),A=await a.readUint32(),c=await a.readString(A);t[e]=c,A%2&&await a.skip(1)}}async function P(a,e){const t=await a.readUint32();return e.codecpar.width=await a.readUint32(),e.codecpar.height=await a.readUint32(),await a.skip(2),e.codecpar.bitsPerCodedSample=await a.readUint16(),e.codecpar.codecTag=await a.readUint32(),await a.skip(20),t}async function I(a,e,t){if(t<14)return o.z3("wav header size < 14",D,197),n.LR;let A,i,p;if((0,V.bl)(e.codecpar[r.o9]+112),A=await a.readUint16(),(357!==A||a.isBigEndian())&&(i=await a.readUint16(),e.codecpar.sampleRate=await a.readUint32(),p=8*await a.readUint32(),e.codecpar.blockAlign=await a.readUint16()),e.codecpar.bitsPerCodedSample=14===t?8:await a.readUint16(),65534===A?e.codecpar.codecTag=0:(e.codecpar.codecTag=A,e.codecpar.codecId=C(A,e.codecpar.bitsPerCodedSample)),t>=18&&357!=A){let d=await a.readUint16();if(a.isBigEndian())return o.z3("WAVEFORMATEX support for RIFX files",D,229),n.LR;t-=18,d=Math.min(d,t),d>=22&&65534==A&&(await async function(a,e){const t=await a.readUint16();t&&(e.codecpar.bitsPerCodedSample=t);const A=await a.readUint32();(0,V.ML)(e.codecpar[r.o9]+112,BigInt(A));const d=(await a.readHex(16)).toLocaleUpperCase();var i;c()(d).call(d,4)===s.IC||c()(d).call(d,4)===s.mO||c()(d).call(d,4)===s.dd?(e.codecpar.codecTag=await a.readUint32(),e.codecpar.codecId=C(e.codecpar.codecTag,e.codecpar.bitsPerCodedSample)):(e.codecpar.codecId=(i=d,s.t6[i.toLocaleUpperCase()]||0),e.codecpar.codecId||o.R8(`unknown subformat: ${d}`,D,190))}(a,e),d-=22,t-=22),d>0&&(e.codecpar.extradata&&(0,M.Eb)(e.codecpar.extradata),e.codecpar.extradataSize=d,e.codecpar.extradata=(0,M.sY)(d),await a.readBuffer(d,(0,f.JW)(e.codecpar.extradata,d)),t-=d),t>0&&await a.skip(t)}else if(357==A&&t>=32){t-=4,e.codecpar.extradata&&(0,M.Eb)(e.codecpar.extradata),e.codecpar.extradataSize=t,e.codecpar.extradata=(0,M.sY)(t),await a.readBuffer(t,(0,f.JW)(e.codecpar.extradata,t));const A=l.E3(e.codecpar.extradata+4);if(e.codecpar.sampleRate=l.Y0(e.codecpar.extradata+12),t<8+20*A)return n.LR;for(let a=0;a<A;a++)i+=d.f[2](e.codecpar.extradata+(8+20*a+17))}return e.codecpar.bitrate=BigInt(0|p),e.codecpar.sampleRate<0?(o.z3(`Invalid sample rate ${e.codecpar.sampleRate}`,D,272),n.LR):(86065===e.codecpar.codecId&&(i=0,e.codecpar.sampleRate=0),69643===e.codecpar.codecId&&e.codecpar.sampleRate&&(e.codecpar.bitsPerCodedSample=Number(e.codecpar.bitrate)/e.codecpar.sampleRate),i!==e.codecpar.chLayout.nbChannels&&((0,V.bl)(e.codecpar[r.o9]+112),e.codecpar.chLayout.order=0,e.codecpar.chLayout.nbChannels=i),0)}},53260:(a,e,t)=>{t.d(e,{IC:()=>i,dd:()=>d,gi:()=>c,mO:()=>o,nz:()=>r,t6:()=>n});var A=t(79682);const c={1:65541,2:69638,3:65557,6:65543,7:65542,10:86052,16:69664,17:69633,23:69664,32:69646,34:86037,49:86046,50:86046,56:73728,66:86068,69:69643,20:69643,64:69643,80:86016,85:86017,87:73728,88:73729,97:69635,98:69634,100:69643,105:69633,117:86079,131:86069,255:86018,273:86068,304:86057,309:86106,352:86023,353:86024,354:86053,355:86054,357:86095,358:86096,384:86116,512:69644,533:86022,534:86022,624:86047,654:86111,655:69660,848:86114,1025:86043,1026:86074,1280:86081,1281:86081,5376:86046,5377:86037,5632:86018,5634:86065,8192:86019,8193:86020,8264:86085,8738:86069,27765:65542,28781:86018,16707:86018,16768:86116,22858:81922,29338:86069,33152:86116,41216:86068,41222:86018,41225:86051,61868:86028,65534:86112,21318:69645,22127:86021},r={[(0,A.A)("H261")]:3,[(0,A.A)("H263")]:4,[(0,A.A)("X263")]:4,[(0,A.A)("T263")]:4,[(0,A.A)("L263")]:4,[(0,A.A)("VX1K")]:4,[(0,A.A)("ZyGo")]:4,[(0,A.A)("M263")]:4,[(0,A.A)("lsvm")]:4,[(0,A.A)("I263")]:20,[(0,A.A)("U263")]:4,[(0,A.A)("VSM4")]:4,[(0,A.A)("H264")]:27,[(0,A.A)("h264")]:27,[(0,A.A)("X264")]:27,[(0,A.A)("x264")]:27,[(0,A.A)("avc1")]:27,[(0,A.A)("DAVC")]:27,[(0,A.A)("SMV2")]:27,[(0,A.A)("VSSH")]:27,[(0,A.A)("Q264")]:27,[(0,A.A)("V264")]:27,[(0,A.A)("GAVC")]:27,[(0,A.A)("UMSV")]:27,[(0,A.A)("tshd")]:27,[(0,A.A)("INMC")]:27,[(0,A.A)("FMP4")]:12,[(0,A.A)("DIVX")]:12,[(0,A.A)("DX50")]:12,[(0,A.A)("XVID")]:12,[(0,A.A)("MP4S")]:12,[(0,A.A)("M4S2")]:12,[(0,A.A)("DIVX")]:12,4:12,[(0,A.A)("ZMP4")]:12,[(0,A.A)("DIV1")]:12,[(0,A.A)("BLZ0")]:12,[(0,A.A)("mp4v")]:12,[(0,A.A)("UMP4")]:12,[(0,A.A)("WV1F")]:12,[(0,A.A)("SEDG")]:12,[(0,A.A)("RMP4")]:12,[(0,A.A)("3IV2")]:12,[(0,A.A)("WAWV")]:12,[(0,A.A)("FFDS")]:12,[(0,A.A)("FVFW")]:12,[(0,A.A)("DCOD")]:12,[(0,A.A)("MVXM")]:12,[(0,A.A)("PM4V")]:12,[(0,A.A)("SMP4")]:12,[(0,A.A)("DXGM")]:12,[(0,A.A)("VIDM")]:12,[(0,A.A)("M4T3")]:12,[(0,A.A)("GEOX")]:12,[(0,A.A)("G264")]:12,[(0,A.A)("HDX4")]:12,[(0,A.A)("DM4V")]:12,[(0,A.A)("DMK2")]:12,[(0,A.A)("DYM4")]:12,[(0,A.A)("DIGI")]:12,[(0,A.A)("EPHV")]:12,[(0,A.A)("EM4A")]:12,[(0,A.A)("M4CC")]:12,[(0,A.A)("SN40")]:12,[(0,A.A)("VSPX")]:12,[(0,A.A)("ULDX")]:12,[(0,A.A)("GEOV")]:12,[(0,A.A)("SIPP")]:12,[(0,A.A)("SM4V")]:12,[(0,A.A)("XVIX")]:12,[(0,A.A)("DreX")]:12,[(0,A.A)("QMP4")]:12,[(0,A.A)("PLV1")]:12,[(0,A.A)("GLV4")]:12,[(0,A.A)("GMP4")]:12,[(0,A.A)("MNM4")]:12,[(0,A.A)("GTM4")]:12,[(0,A.A)("MPG4")]:14,[(0,A.A)("MP41")]:14,[(0,A.A)("MP42")]:15,[(0,A.A)("DIV2")]:15,[(0,A.A)("MP43")]:16,[(0,A.A)("DIV3")]:16,[(0,A.A)("MPG3")]:16,[(0,A.A)("DIV5")]:16,[(0,A.A)("DIV6")]:16,[(0,A.A)("DIV4")]:16,[(0,A.A)("DVX3")]:16,[(0,A.A)("AP41")]:16,[(0,A.A)("COL1")]:16,[(0,A.A)("COL0")]:16,[(0,A.A)("WMV1")]:17,[(0,A.A)("WMV2")]:18,[(0,A.A)("GXVE")]:18,[(0,A.A)("dvsd")]:24,[(0,A.A)("dvhd")]:24,[(0,A.A)("dvh1")]:24,[(0,A.A)("dvsl")]:24,[(0,A.A)("dv25")]:24,[(0,A.A)("dv50")]:24,[(0,A.A)("cdvc")]:24,[(0,A.A)("CDVH")]:24,[(0,A.A)("CDV5")]:24,[(0,A.A)("dvc ")]:24,[(0,A.A)("dvcs")]:24,[(0,A.A)("dvh1")]:24,[(0,A.A)("dvis")]:24,[(0,A.A)("pdvc")]:24,[(0,A.A)("SL25")]:24,[(0,A.A)("SLDV")]:24,[(0,A.A)("AVd1")]:24,[(0,A.A)("mpg1")]:2,[(0,A.A)("mpg2")]:2,[(0,A.A)("MPEG")]:2,[(0,A.A)("PIM1")]:2,[(0,A.A)("PIM2")]:2,[(0,A.A)("VCR2")]:2,268435457:2,268435458:2,268435460:2,[(0,A.A)("DVR ")]:2,[(0,A.A)("MMES")]:2,[(0,A.A)("LMP2")]:2,[(0,A.A)("slif")]:2,[(0,A.A)("EM2V")]:2,[(0,A.A)("M701")]:2,[(0,A.A)("M702")]:2,[(0,A.A)("M703")]:2,[(0,A.A)("M704")]:2,[(0,A.A)("M705")]:2,[(0,A.A)("mpgv")]:2,[(0,A.A)("BW10")]:2,[(0,A.A)("XMPG")]:2,[(0,A.A)("MJPG")]:7,[(0,A.A)("RV40")]:69,[(0,A.A)("AV01")]:225,[(0,A.A)("VP80")]:139,[(0,A.A)("VP90")]:167,[(0,A.A)("HEVC")]:173,[(0,A.A)("H265")]:173},d="00001000800000AA00389B71",i="2107D3118644C8C1CA000000",o="0000000000001000800000AA",n={"2C806DE046DBCF11B4D100805F6CBBEA":86019,BFAA23E958CB7144A119FFFA01E4CE62:86055,D242E147BA368D4D88FC61654F8C836C:86104,AF87FBA7022DFB42A4D405CD93843BDD:86056,"2B806DE046DBCF11B4D100805F6CBBEA":86016,"82EC1F6ACADB1945BDE756D3B3EF981D":69673,"3AC1FA38811D4361A40DCE53CA607CD1":86112}},79682:(a,e,t)=>{t.d(e,{A:()=>r});var A=t(4624);const c="src/avformat/function/mktagle.ts";function r(a){4!==a.length&&A.R8(`tag length is not 4, tag: ${a}`,c,30);let e=0;for(let t=3;t>=0;t--)e=e<<8|a.charCodeAt(t);return e}}}]);