!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.AVTranscoder=t():e.AVTranscoder=t()}(self,(()=>(()=>{var e,t,r={92246:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var s=r(134),i=r(16030),n=r(4624),o=r(9705);class a{constructor(e){(0,s.A)(this,"resampler",void 0),(0,s.A)(this,"options",void 0),(0,s.A)(this,"inputParameters",void 0),(0,s.A)(this,"outputParameters",void 0),this.options=e,this.resampler=new i.A(this.options.resource)}async open(e,t){this.inputParameters=e,this.outputParameters=t,await this.resampler.run(),this.resampler.invoke("resample_set_input_parameters",e.sampleRate,e.channels,e.format,e.layout||0),this.resampler.invoke("resample_set_output_parameters",t.sampleRate,t.channels,t.format,t.layout||0);let r=this.resampler.invoke("resample_init");return r<0?(n.z3(`open resampler failed, ret: ${r}`,"src/audioresample/Resampler.ts",85),o.nr):0}resample(e,t,r){return this.resampler.invoke("resample_process",e,t,r)}getOutputSampleCount(e){return this.resampler.invoke("resample_nb_sample",e)}close(){this.resampler.invoke("resample_destroy"),this.resampler.destroy(),this.resampler=null}getInputPCMParameters(){return this.inputParameters}getOutputPCMParameters(){return this.outputParameters}}},75742:(e,t,r)=>{"use strict";r.d(t,{A:()=>g});var s=r(134),i=r(63939),n=r(50932),o=r(11473),a=r(16030),c=r(56024),h=r(4624),d=r(95797),u=(r(56490),r(95335)),l=r(73749),f=r(67672),p=r(37837),m=r(9705);class g{constructor(e){(0,s.A)(this,"options",void 0),(0,s.A)(this,"decoder",void 0),(0,s.A)(this,"frame",void 0),(0,s.A)(this,"decoderOptions",0),(0,s.A)(this,"timeBase",void 0),this.options=e,this.decoder=new a.A(e.resource)}getAVFrame(){return this.frame?this.frame:this.frame=this.options.avframePool?this.options.avframePool.alloc():(0,c.FP)()}outputAVFrame(){this.frame&&(this.options.onReceiveAVFrame?(n.M[15](this.frame+124,this.timeBase.den),n.M[15](this.frame+120,this.timeBase.num),this.options.onReceiveAVFrame(this.frame)):this.options.avframePool?this.options.avframePool.release(this.frame):(0,c.xj)(this.frame),this.frame=0)}receiveAVFrame(){return this.decoder.invoke("decoder_receive",this.getAVFrame())}async open(e,t={}){await this.decoder.run();const r=o.s_.malloc(4);n.M[20](r,0),u.HP(t).length&&(this.decoderOptions&&(l.AO(this.decoderOptions),o.s_.free(this.decoderOptions),this.decoderOptions=0),this.decoderOptions=(0,p.Gy)(8),u.__(t,((e,t)=>{(f.Yj(e)||f.Yj(t))&&l.a5(this.decoderOptions,t,e)})),n.M[20](r,this.decoderOptions));let s=0;return d.A.jspi?s=await this.decoder.invokeAsync("decoder_open",e,0,1,r):(s=this.decoder.invoke("decoder_open",e,0,1,r),await this.decoder.childThreadsReady()),this.decoderOptions=i.f[20](r),o.s_.free(r),s<0?(h.z3(`open audio decoder failed, ret: ${s}`,"src/avcodec/wasmcodec/AudioDecoder.ts",128),m.r8):(this.timeBase=null,0)}decode(e){this.timeBase||(this.timeBase={den:i.f[15](e+76),num:i.f[15](e+72)});let t=this.decoder.invoke("decoder_decode",e);if(t)return t;for(;;){if(t=this.receiveAVFrame(),1!==t){if(t<0)return t;break}this.outputAVFrame()}return 0}async flush(){for(this.decoder.invoke("decoder_flush");;){const e=this.receiveAVFrame();if(e<1)return e;this.outputAVFrame()}return 0}close(){this.decoder.invoke("decoder_close"),this.decoder.destroy(),this.decoder=null,this.frame&&(this.options.avframePool?this.options.avframePool.release(this.frame):(0,c.xj)(this.frame),this.frame=0),this.decoderOptions&&(l.AO(this.decoderOptions),o.s_.free(this.decoderOptions),this.decoderOptions=0)}}},21910:(e,t,r)=>{"use strict";r.d(t,{A:()=>k});var s=r(134),i=r(63939),n=r(50932),o=r(11473),a=(r(9599),r(16030)),c=r(71517),h=r(4624),d=r(36204),u=r(56024),l=r(14686),f=r(66788),p=r(44328),m=r(95797),g=r(72703),A=(r(56490),r(95335)),v=r(73749),w=r(67672),y=r(37837),b=r(9705);class _{constructor(e,t){(0,s.A)(this,"parameters",void 0),(0,s.A)(this,"data",void 0),(0,s.A)(this,"planes",void 0),(0,s.A)(this,"pos",void 0),(0,s.A)(this,"posEnd",void 0),(0,s.A)(this,"bufferLength",void 0),(0,s.A)(this,"bytesPerSample",void 0),(0,s.A)(this,"planar",void 0),(0,s.A)(this,"channels",void 0),(0,s.A)(this,"frameSize",void 0),(0,s.A)(this,"pts",void 0),this.parameters=e,this.frameSize=t,this.planar=(0,f.K0)(i.f[15](e+28)),this.planes=this.planar?i.f[15](e+116):1,this.channels=i.f[15](e+116),this.bufferLength=512e3,this.data=[];for(let e=0;e<this.planes;e++)this.data[e]=new Uint8Array(this.bufferLength);this.pos=0,this.posEnd=0,this.bytesPerSample=(0,f.Dw)(i.f[15](e+28)),this.pts=BigInt(0)}sendAVFrame(e){const t=i.f[15](e+76)*this.bytesPerSample*(this.planar?1:this.channels);if(this.posEnd+t>=this.bufferLength){const e=this.posEnd-this.pos;for(let e=0;e<this.planes;e++)this.data[e].set(this.data[e].subarray(this.pos,this.posEnd),0);this.pos=0,this.posEnd=e}for(let r=0;r<this.planes;r++)this.data[r].set((0,l.s3)(i.f[20](e+4*r),t),this.posEnd);this.posEnd+=t}remainFrameSize(){const e=this.bytesPerSample*(this.planar?1:this.channels);return(this.posEnd-this.pos)/e}handleData(e,t){(0,u.to)(e),n.M[15](e+152,i.f[15](this.parameters+136)),n.M[15](e+76,this.frameSize),n.M[15](e+292,i.f[15](this.parameters+116)),n.M[15](e+80,i.f[15](this.parameters+28)),n.M[17](e+104,this.pts),n.M[15](e+124,i.f[15](this.parameters+136)),n.M[15](e+120,1),(0,u.rh)(e);for(let r=0;r<this.planes;r++)(0,l.lW)(i.f[20](e+4*r),i.f[15](e+32),this.data[r].subarray(this.pos,this.pos+t));this.pos+=t,this.pts+=BigInt(0|this.frameSize)}receiveAVFrame(e){const t=this.frameSize*this.bytesPerSample*(this.planar?1:this.channels);return this.posEnd-this.pos<t?-1:(this.handleData(e,t),0)}flush(e){const t=this.posEnd-this.pos,r=t/(this.bytesPerSample*(this.planar?1:this.channels));return this.handleData(e,t),(0,f.wj)(e,r,i.f[15](this.parameters+28),this.frameSize-r,i.f[15](this.parameters+116)),0}}class k{constructor(e){(0,s.A)(this,"options",void 0),(0,s.A)(this,"encoder",void 0),(0,s.A)(this,"parameters",void 0),(0,s.A)(this,"timeBase",void 0),(0,s.A)(this,"avpacket",void 0),(0,s.A)(this,"avframe",void 0),(0,s.A)(this,"pts",void 0),(0,s.A)(this,"frameSize",void 0),(0,s.A)(this,"audioFrameResizer",void 0),(0,s.A)(this,"encoderOptions",0),this.options=e,this.encoder=new a.A(this.options.resource)}getAVPacket(){return this.avpacket?this.avpacket:this.avpacket=this.options.avpacketPool?this.options.avpacketPool.alloc():(0,c._5)()}outputAVPacket(){this.avpacket&&(n.M[17](this.avpacket+8,this.pts),n.M[17](this.avpacket+16,this.pts),this.pts+=i.f[17](this.avpacket+48),n.M[15](this.avpacket+76,this.timeBase.den),n.M[15](this.avpacket+72,this.timeBase.num),this.options.onReceiveAVPacket(this.avpacket),this.avpacket=0)}receiveAVPacket(){return this.encoder.invoke("encoder_receive",this.getAVPacket())}async open(e,t,r={}){await this.encoder.run();const s=o.s_.malloc(8),a=o.s_.malloc(4);n.M[15](s,t.num),n.M[15](s+4,t.den),n.M[20](a,0),this.encoder.invoke("encoder_set_flags",4194304),A.HP(r).length&&(this.encoderOptions&&(v.AO(this.encoderOptions),o.s_.free(this.encoderOptions),this.encoderOptions=0),this.encoderOptions=(0,y.Gy)(8),A.__(r,((e,t)=>{(w.Yj(e)||w.Yj(t))&&v.a5(this.encoderOptions,t,e)})),n.M[20](a,this.encoderOptions));let c=0;return m.A.jspi?c=await this.encoder.invokeAsync("encoder_open",e,s,1,a):(c=this.encoder.invoke("encoder_open",e,s,1,a),await this.encoder.childThreadsReady()),this.frameSize=this.encoder.invoke("encoder_get_framesize_size"),this.encoderOptions=i.f[20](a),o.s_.free(a),o.s_.free(s),c<0?(h.z3(`open audio encoder failed, ret: ${c}`,"src/avcodec/wasmcodec/AudioEncoder.ts",254),b.r8):(this.parameters=e,this.timeBase=t,this.pts=BigInt(0),0)}encode_(e){let t=this.encoder.invoke("encoder_encode",e);if(t)return t;for(;;){if(t=this.receiveAVPacket(),1!==t){if(t<0)return t;break}this.outputAVPacket()}return 0}encode(e){if(this.avframe?(0,u.to)(this.avframe):this.avframe=(0,u.FP)(),(0,g.A)(e)?((0,u.gg)(this.avframe,e),e=this.avframe):e=(0,d.t)(e,this.avframe),!(this.frameSize>0&&i.f[15](e+76)!==this.frameSize||this.audioFrameResizer))return this.encode_(e);for(this.audioFrameResizer||(this.audioFrameResizer=new _(this.parameters,this.frameSize)),this.audioFrameResizer.sendAVFrame(e);;){let t=this.audioFrameResizer.receiveAVFrame(e);if(t<0)return 0;if(t=this.encode_(e),t)return t}}async flush(){if(this.audioFrameResizer&&this.audioFrameResizer.remainFrameSize()>0){const e=(0,u.FP)();this.audioFrameResizer.flush(e),n.M[17](e+104,(0,p.Mr)(i.f[17](e+104),e+120,this.timeBase)),this.encode_(e),(0,u.xj)(e)}for(this.encoder.invoke("encoder_flush",0);;){const e=this.receiveAVPacket();if(e<1)return e;this.outputAVPacket()}return 0}getExtraData(){const e=this.encoder.invoke("encoder_get_extradata"),t=this.encoder.invoke("encoder_get_extradata_size");return e&&t?(0,l.s3)(e,t).slice():null}close(){this.encoder.invoke("encoder_close"),this.encoder.destroy(),this.encoder=null,this.avpacket&&(this.options.avpacketPool?this.options.avpacketPool.release(this.avpacket):(0,c.Qe)(this.avpacket),this.avpacket=0),this.avframe&&((0,u.xj)(this.avframe),this.avframe=0),this.encoderOptions&&(v.AO(this.encoderOptions),o.s_.free(this.encoderOptions),this.encoderOptions=0)}}},40417:(e,t,r)=>{"use strict";r.d(t,{A:()=>g});var s=r(134),i=r(63939),n=r(50932),o=r(11473),a=r(16030),c=r(56024),h=r(4624),d=r(95797),u=(r(56490),r(95335)),l=r(73749),f=r(67672),p=r(37837),m=r(9705);class g{constructor(e){(0,s.A)(this,"options",void 0),(0,s.A)(this,"decoder",void 0),(0,s.A)(this,"frame",void 0),(0,s.A)(this,"parameters",void 0),(0,s.A)(this,"decoderOptions",0),(0,s.A)(this,"timeBase",void 0),this.options=e,this.decoder=new a.A(this.options.resource)}getAVFrame(){return this.frame?this.frame:this.frame=this.options.avframePool?this.options.avframePool.alloc():(0,c.FP)()}outputAVFrame(){this.frame&&(this.options.onReceiveAVFrame?(n.M[15](this.frame+124,this.timeBase.den),n.M[15](this.frame+120,this.timeBase.num),this.options.onReceiveAVFrame(this.frame)):this.options.avframePool?this.options.avframePool.release(this.frame):(0,c.xj)(this.frame),this.frame=0)}receiveAVFrame(){return this.decoder.invoke("decoder_receive",this.getAVFrame())}async open(e,t=1,r={}){await this.decoder.run(null,t);let s=0;const a=o.s_.malloc(4);return n.M[20](a,0),u.HP(r).length&&(this.decoderOptions&&(l.AO(this.decoderOptions),o.s_.free(this.decoderOptions),this.decoderOptions=0),this.decoderOptions=(0,p.Gy)(8),u.__(r,((e,t)=>{(f.Yj(e)||f.Yj(t))&&l.a5(this.decoderOptions,t,e)})),n.M[20](a,this.decoderOptions)),d.A.jspi?s=await this.decoder.invokeAsync("decoder_open",e,0,t,a):(s=this.decoder.invoke("decoder_open",e,0,t,a),await this.decoder.childThreadsReady()),this.decoderOptions=i.f[20](a),o.s_.free(a),s<0?(h.z3(`open video decoder failed, ret: ${s}`,"src/avcodec/wasmcodec/VideoDecoder.ts",164),m.r8):(this.parameters=e,this.timeBase=null,0)}decode(e){this.timeBase||(this.timeBase={den:i.f[15](e+76),num:i.f[15](e+72)});let t=this.decoder.invoke("decoder_decode",e);if(t)return t;for(;;){if(t=this.receiveAVFrame(),1!==t){if(t<0)return t;break}this.outputAVFrame()}return 0}async flush(){for(this.decoder.invoke("decoder_flush");;){const e=this.receiveAVFrame();if(e<1)return e;this.outputAVFrame()}return 0}close(){this.decoder.invoke("decoder_close"),this.decoder.destroy(),this.decoder=null,this.frame&&(this.options.avframePool?this.options.avframePool.release(this.frame):(0,c.xj)(this.frame),this.frame=0),this.parameters=0,this.decoderOptions&&(l.AO(this.decoderOptions),o.s_.free(this.decoderOptions),this.decoderOptions=0)}setSkipFrameDiscard(e){this.decoder.invoke("decoder_discard",e)}getChildThreadCount(){return this.decoder?this.decoder.getChildThreadCount():0}}},80105:(e,t,r)=>{"use strict";r.d(t,{A:()=>M});var s=r(134),i=r(63939),n=r(50932),o=r(11473),a=(r(9599),r(16030)),c=r(71517),h=r(4624),d=r(52699),u=r(37180),l=r(56024),f=r(14686),p=r(26173),m=r(95797),g=r(72703),A=r(21477),v=r(82014),w=(r(56490),r(95335)),y=r(73749),b=r(67672),_=r(37837),k=r(44328),x=r(77231),I=r(9705);class M{constructor(e){(0,s.A)(this,"options",void 0),(0,s.A)(this,"encoder",void 0),(0,s.A)(this,"parameters",void 0),(0,s.A)(this,"timeBase",void 0),(0,s.A)(this,"framerateTimebase",void 0),(0,s.A)(this,"inputCounter",void 0),(0,s.A)(this,"avpacket",void 0),(0,s.A)(this,"avframe",void 0),(0,s.A)(this,"encodeQueueSize",void 0),(0,s.A)(this,"bitrateFilter",void 0),(0,s.A)(this,"extradata",void 0),(0,s.A)(this,"encoderOptions",0),this.options=e,this.encoder=new a.A(this.options.resource)}getAVPacket(){return this.avpacket?this.avpacket:this.avpacket=this.options.avpacketPool?this.options.avpacketPool.alloc():(0,c._5)()}outputAVPacket(){if(this.avpacket){if(27===i.f[15](this.parameters+4)||173===i.f[15](this.parameters+4)||196===i.f[15](this.parameters+4)){if(1===i.f[15](this.parameters+160)){if(!this.bitrateFilter){this.bitrateFilter=new p.A;const e=d.z(8);n.M[15](e,this.timeBase.num),n.M[15](e+4,this.timeBase.den),this.bitrateFilter.init(this.parameters,e),d.t(8)}this.bitrateFilter.sendAVPacket(this.avpacket),this.bitrateFilter.receiveAVPacket(this.avpacket)}if(!this.extradata){const e=(0,c.rU)(this.avpacket,1);e&&(this.extradata=(0,f.s3)(i.f[20](e),i.f[25](e+4)).slice())}n.M[15](this.avpacket+80,i.f[15](this.parameters+160))}else 225===i.f[15](this.parameters+4)?this.extradata||(this.extradata=A.Yj(this.parameters,(0,c.iI)(this.avpacket))):167===i.f[15](this.parameters+4)&&(this.extradata||(this.extradata=v.Yj(this.parameters)));n.M[15](this.avpacket+76,this.timeBase.den),n.M[15](this.avpacket+72,this.timeBase.num),n.M[17](this.avpacket+48,(0,k.k)(BigInt(1),this.framerateTimebase,this.timeBase)),this.options.onReceiveAVPacket(this.avpacket),this.avpacket=0,this.encodeQueueSize--}}receiveAVPacket(){return this.encoder.invoke("encoder_receive",this.getAVPacket())}async open(e,t,r=1,s={}){await this.encoder.run(null,r);const a=o.s_.malloc(8),c=o.s_.malloc(4);n.M[15](a,t.num),n.M[15](a+4,t.den),n.M[20](c,0),12===i.f[15](e+4)&&1===i.f[15](e+160)&&this.encoder.invoke("encoder_set_flags",4194304),this.encoder.invoke("encoder_set_max_b_frame",i.f[15](e+104)),w.HP(s).length&&(this.encoderOptions&&(y.AO(this.encoderOptions),o.s_.free(this.encoderOptions),this.encoderOptions=0),this.encoderOptions=(0,_.Gy)(8),w.__(s,((e,t)=>{(b.Yj(e)||b.Yj(t))&&y.a5(this.encoderOptions,t,e)})),n.M[20](c,this.encoderOptions));let d=0;return m.A.jspi?d=await this.encoder.invokeAsync("encoder_open",e,a,r,c):(d=this.encoder.invoke("encoder_open",e,a,r,c),await this.encoder.childThreadsReady()),this.encoderOptions=i.f[20](c),o.s_.free(c),o.s_.free(a),d<0?(h.z3(`open video encoder failed, ret: ${d}`,"src/avcodec/wasmcodec/VideoEncoder.ts",195),I.r8):(this.parameters=e,this.timeBase=t,this.inputCounter=BigInt(0),this.framerateTimebase={den:i.f[15](e+72),num:i.f[15](e+76)},this.encodeQueueSize=0,0)}preEncode(e,t){return this.avframe?(0,l.to)(this.avframe):this.avframe=(0,l.FP)(),(0,g.A)(e)?((0,l.gg)(this.avframe,e),e=this.avframe):e=(0,u.lL)(e,this.avframe),t&&n.M[15](e+88,1),i.f[17](e+104)!==x.Dh?n.M[17](e+104,(0,k.Mr)(i.f[17](e+104),e+120,this.timeBase)):n.M[17](e+104,(0,k.k)(this.inputCounter,this.framerateTimebase,this.timeBase)),this.inputCounter++,n.M[15](e+124,this.timeBase.den),n.M[15](e+120,this.timeBase.num),e}postEncode(){for(this.encodeQueueSize++;;){let e=this.receiveAVPacket();if(1!==e){if(e<0)return e;break}this.outputAVPacket()}return 0}async encodeAsync(e,t){return e=this.preEncode(e,t),await this.encoder.invokeAsync("encoder_encode",e)||this.postEncode()}encode(e,t){return e=this.preEncode(e,t),this.encoder.invoke("encoder_encode",e)||this.postEncode()}async flush(){for(this.encoder.invoke("encoder_flush");;){const e=this.receiveAVPacket();if(e<1)return e;this.outputAVPacket()}return 0}getExtraData(){if(this.extradata)return this.extradata;const e=this.encoder.invoke("encoder_get_extradata"),t=this.encoder.invoke("encoder_get_extradata_size");return e&&t?(0,f.s3)(e,t).slice():null}getColorSpace(){return{colorSpace:this.encoder.invoke("encoder_get_color_space"),colorPrimaries:this.encoder.invoke("encoder_get_color_primaries"),colorTrc:this.encoder.invoke("encoder_get_color_trc")}}close(){this.encoder.invoke("encoder_close"),this.encoder.destroy(),this.encoder=null,this.avpacket&&(this.options.avpacketPool?this.options.avpacketPool.release(this.avpacket):(0,c.Qe)(this.avpacket),this.avpacket=0),this.avframe&&((0,l.xj)(this.avframe),this.avframe=0),this.bitrateFilter&&(this.bitrateFilter.destroy(),this.bitrateFilter=null),this.encoderOptions&&(y.AO(this.encoderOptions),o.s_.free(this.encoderOptions),this.encoderOptions=0)}getQueueLength(){return this.encodeQueueSize}getChildThreadCount(){return this.encoder?this.encoder.getChildThreadCount():0}}},77104:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var s=r(134),i=r(63939),n=r(79756),o=r(14686),a=r(71517),c=r(22898),h=r(4624),d=r(9705);const u="src/avcodec/webcodec/AudioDecoder.ts";class l{constructor(e){(0,s.A)(this,"options",void 0),(0,s.A)(this,"decoder",void 0),(0,s.A)(this,"parameters",void 0),(0,s.A)(this,"extradata",void 0),(0,s.A)(this,"currentError",void 0),this.options=e}output(e){this.options.onReceiveAudioData?this.options.onReceiveAudioData(e):e.close()}error(e){this.currentError=e,this.options.onError(e)}async open(e){this.currentError=null,this.parameters=e,this.extradata=null,0!==i.f[20](e+12)&&(this.extradata=(0,o.s3)(i.f[20](e+12),i.f[15](e+16)).slice());const t={codec:(0,n.A)(this.parameters),sampleRate:i.f[15](e+136),numberOfChannels:i.f[15](e+116),description:this.extradata};t.description||delete t.description;try{if(!(await AudioDecoder.isConfigSupported(t)).supported)return h.z3("not support",u,93),d.nr}catch(e){return h.z3(`${e}`,u,98),d.r8}return this.decoder&&"closed"!==this.decoder.state&&this.decoder.close(),this.decoder=new AudioDecoder({output:this.output.bind(this),error:this.error.bind(this)}),this.decoder.reset(),this.decoder.configure(t),this.currentError?(h.z3(`open audio decoder error, ${this.currentError}`,u,115),d.r8):0}changeExtraData(e){if(e.length===this.extradata.length){let t=!0;for(let r=0;r<e.length;r++)if(e[r]!==this.extradata[r]){t=!1;break}if(t)return 0}return this.currentError=null,this.extradata=e.slice(),this.decoder.reset(),this.decoder.configure({codec:(0,n.A)(this.parameters),sampleRate:i.f[15](this.parameters+136),numberOfChannels:i.f[15](this.parameters+116),description:this.extradata}),this.currentError?(h.z3(`change extra data error, ${this.currentError}`,u,148),d.r8):0}decode(e){if(this.currentError)return h.z3(`decode error, ${this.currentError}`,u,157),d.LR;const t=(0,a.rU)(e,1);if(0!==t){let e=this.changeExtraData((0,o.s3)(i.f[20](t),i.f[25](t+4)));if(e)return e}const r=(0,c.A)(e);try{this.decoder.decode(r)}catch(e){return h.z3(`decode error, ${e}`,u,176),d.LR}return 0}async flush(){if(this.currentError)return h.z3(`flush error, ${this.currentError}`,u,185),d.LR;try{return await this.decoder.flush(),0}catch(e){return h.z3(`flush error, ${e}`,u,193),d.LR}}close(){"closed"!==this.decoder.state&&this.decoder.close(),this.decoder=null}getQueueLength(){var e,t;return null!==(e=null===(t=this.decoder)||void 0===t?void 0:t.decodeQueueSize)&&void 0!==e?e:0}static async isSupported(e){let t=null;0!==i.f[20](e+12)&&(t=(0,o.s3)(i.f[20](e+12),i.f[15](e+16)).slice());const r={codec:(0,n.A)(e),sampleRate:i.f[15](e+136),numberOfChannels:i.f[15](e+116),description:t};r.description||delete r.description;try{return(await AudioDecoder.isConfigSupported(r)).supported}catch(e){return!1}}}},72308:(e,t,r)=>{"use strict";r.d(t,{A:()=>A});var s=r(134),i=r(63939),n=r(50932),o=r(79756),a=r(84716),c=r(71517),h=r(56024),d=r(59944),u=r(44328),l=r(77231),f=r(72703),p=r(4624),m=r(9705);const g="src/avcodec/webcodec/AudioEncoder.ts";class A{constructor(e){(0,s.A)(this,"encoder",void 0),(0,s.A)(this,"options",void 0),(0,s.A)(this,"parameters",void 0),(0,s.A)(this,"timeBase",void 0),(0,s.A)(this,"currentError",void 0),(0,s.A)(this,"pts",void 0),(0,s.A)(this,"avframeCache",void 0),(0,s.A)(this,"extradata",void 0),this.options=e,this.avframeCache=[]}async output(e,t){const r=this.options.avpacketPool?this.options.avpacketPool.alloc():(0,c._5)();if(this.extradata)(0,d.A)(e,r,t);else{var s;if(null!=t&&null!==(s=t.decoderConfig)&&void 0!==s&&s.description){let e;e=t.decoderConfig.description instanceof ArrayBuffer?new Uint8Array(t.decoderConfig.description):new Uint8Array(t.decoderConfig.description.buffer),this.extradata=e}(0,d.A)(e,r)}n.M[17](r+8,(0,u.k)(this.pts,l.KR,this.timeBase)),n.M[17](r+16,i.f[17](r+8)),n.M[15](r+76,this.timeBase.den),n.M[15](r+72,this.timeBase.num),this.pts+=i.f[17](r+48),n.M[17](r+48,(0,u.k)(i.f[17](r+48),l.KR,this.timeBase)),this.options.onReceiveAVPacket(r);const o=this.avframeCache.shift();o&&(this.options.avframePool?this.options.avframePool.release(o):(0,h.xj)(o))}error(e){this.options.onError(e)}async open(e,t){this.currentError=null;const r={codec:(0,o.A)(e),sampleRate:i.f[15](e+136),numberOfChannels:i.f[15](e+116),bitrate:Number(i.f[17](e+32)),bitrateMode:"constant"};try{if(!(await AudioEncoder.isConfigSupported(r)).supported)return p.z3("not support",g,128),m.nr}catch(e){return p.z3(`${e}`,g,133),m.r8}return this.encoder&&"closed"!==this.encoder.state&&this.encoder.close(),this.encoder=new AudioEncoder({output:this.output.bind(this),error:this.error.bind(this)}),this.encoder.reset(),this.encoder.configure(r),this.currentError?(p.z3(`open audio encoder error, ${this.currentError}`,g,150),m.r8):(this.pts=BigInt(0),this.parameters=e,this.timeBase=t,0)}encode(e){if(this.currentError)return p.z3(`encode error, ${this.currentError}`,g,163),m.r8;if((0,f.A)(e)){const t=this.options.avframePool?this.options.avframePool.alloc():(0,h.FP)();(0,h.gg)(t,e),this.avframeCache.push(t),n.M[17](t+104,BigInt(0)),e=(0,a.T)(t)}try{return this.encoder.encode(e),0}catch(e){return p.z3(`encode error, ${e}`,g,178),m.LR}}async flush(){if(this.currentError)return p.z3(`flush error, ${this.currentError}`,g,185),m.LR;try{return await this.encoder.flush(),0}catch(e){return p.z3(`flush error, ${e}`,g,193),m.LR}}close(){this.encoder&&"closed"!==this.encoder.state&&this.encoder.close(),this.avframeCache.length&&this.avframeCache.forEach((e=>{this.options.avframePool?this.options.avframePool.release(e):(0,h.xj)(e)})),this.encoder=null}getExtraData(){return this.extradata}getQueueLength(){var e,t;return null!==(e=null===(t=this.encoder)||void 0===t?void 0:t.encodeQueueSize)&&void 0!==e?e:0}static async isSupported(e){const t={codec:(0,o.A)(e),sampleRate:i.f[15](e+136),numberOfChannels:i.f[15](e+116),bitrate:Number(i.f[17](e+32)),bitrateMode:"constant"};try{return(await AudioEncoder.isConfigSupported(t)).supported}catch(e){return!1}}}},71039:(e,t,r)=>{"use strict";r.d(t,{A:()=>v});var s=r(134),i=r(63939),n=r(86834),o=r(28875),a=r(14686),c=r(71517),h=r(39365),d=r(28917),u=r(4624),l=r(44690),f=r(62815),p=r(67659),m=r(59166),g=r(9705);const A="src/avcodec/webcodec/VideoDecoder.ts";class v{constructor(e){(0,s.A)(this,"decoder",void 0),(0,s.A)(this,"options",void 0),(0,s.A)(this,"parameters",void 0),(0,s.A)(this,"extradata",void 0),(0,s.A)(this,"currentError",void 0),(0,s.A)(this,"inputQueue",void 0),(0,s.A)(this,"outputQueue",void 0),(0,s.A)(this,"sort",void 0),(0,s.A)(this,"keyframeRequire",void 0),(0,s.A)(this,"extradataRequire",void 0),this.options=e,this.inputQueue=[],this.outputQueue=[],this.sort=n.A.safari||l.A.ios}async output(e){if(this.sort){let t=0;for(;t<this.outputQueue.length;t++)if(this.outputQueue[t].timestamp>e.timestamp){this.outputQueue.splice(t,0,e);break}for(t===this.outputQueue.length&&this.outputQueue.push(e);this.outputQueue.length>2&&this.outputQueue[0].timestamp===this.inputQueue[0];){const e=this.outputQueue.shift();this.options.onReceiveVideoFrame?this.options.onReceiveVideoFrame(e):e.close(),this.inputQueue.shift()}}else this.options.onReceiveVideoFrame?this.options.onReceiveVideoFrame(e):e.close()}error(e){this.currentError=e,this.options.onError(e)}changeExtraData(e){var t;if(e.length===this.extradata.length){let t=!0;for(let r=0;r<e.length;r++)if(e[r]!==this.extradata[r]){t=!1;break}if(t)return 0}return this.currentError=null,this.extradata=e.slice(),this.decoder.reset(),this.decoder.configure({codec:(0,o.A)(this.parameters,e),description:this.extradata,hardwareAcceleration:(0,h.C)(null===(t=this.options.enableHardwareAcceleration)||void 0===t||t)}),this.currentError?(u.z3(`change extra data error, ${this.currentError}`,A,146),g.r8):(this.keyframeRequire=!0,0)}async open(e){var t;this.currentError=null,this.extradata=null,0!==i.f[20](e+12)&&(this.extradata=(0,a.s3)(i.f[20](e+12),i.f[15](e+16)).slice()),this.parameters=e;const r={codec:(0,o.A)(e),codedWidth:i.f[15](e+56),codedHeight:i.f[15](e+60),description:2!==i.f[15](e+160)?this.extradata:void 0,hardwareAcceleration:(0,h.C)(null===(t=this.options.enableHardwareAcceleration)||void 0===t||t)};r.description||delete r.description;try{if(!(await VideoDecoder.isConfigSupported(r)).supported)return u.z3("not support",A,179),g.nr}catch(e){return u.z3(`${e}`,A,184),g.r8}return this.decoder&&"closed"!==this.decoder.state&&this.decoder.close(),this.decoder=new VideoDecoder({output:this.output.bind(this),error:this.error.bind(this)}),this.decoder.reset(),this.decoder.configure(r),this.currentError?(u.z3(`open video decoder error, ${this.currentError}`,A,201),g.r8):(this.keyframeRequire=!0,2===i.f[15](this.parameters+160)&&(this.extradataRequire=!0),this.inputQueue.length=0,this.outputQueue.length=0,0)}decode(e){if(this.currentError)return u.z3(`decode error, ${this.currentError}`,A,219),g.LR;const t=(0,c.rU)(e,1);if(0!==t){let e=this.changeExtraData((0,a.s3)(i.f[20](t),i.f[25](t+4)));if(e)return e}const r=1&i.f[15](e+36);if(this.keyframeRequire){if(!r)return 0;if(2===i.f[15](this.parameters+160)&&this.extradata&&this.extradataRequire){if(27===i.f[15](this.parameters+4)){if(!f.sL((0,c.iI)(e))){const t=f.kM((0,c.iI)(e),this.extradata);t&&(0,c.NX)(e,t.bufferPointer,t.length)}}else if(173===i.f[15](this.parameters+4)){if(!p.sL((0,c.iI)(e))){const t=p.kM((0,c.iI)(e),this.extradata);t&&(0,c.NX)(e,t.bufferPointer,t.length)}}else if(196===i.f[15](this.parameters+4)&&!m.sL((0,c.iI)(e))){const t=m.kM((0,c.iI)(e),this.extradata);t&&(0,c.NX)(e,t.bufferPointer,t.length)}this.extradataRequire=!1}}const s=(0,d.A)(e),n=s.timestamp;if(this.sort){let e=0;for(;e<this.inputQueue.length;e++)if(this.inputQueue[e]>n){this.inputQueue.splice(e,0,n);break}e===this.inputQueue.length&&this.inputQueue.push(n)}try{this.decoder.decode(s)}catch(e){return u.z3(`decode error, ${e}`,A,288),g.LR}return r&&(this.keyframeRequire=!1),0}async flush(){if(this.currentError)return u.z3(`flush error, ${this.currentError}`,A,301),g.LR;try{await this.decoder.flush()}catch(e){return u.z3(`flush error, ${e}`,A,308),g.LR}if(this.sort)for(;this.outputQueue.length;){const e=this.outputQueue.shift();this.options.onReceiveVideoFrame?this.options.onReceiveVideoFrame(e):e.close()}return this.keyframeRequire=!0,0}close(){var e;this.decoder&&"closed"!==this.decoder.state&&this.decoder.close(),this.decoder=null,this.currentError=null,null!==(e=this.outputQueue)&&void 0!==e&&e.length&&this.outputQueue.forEach((e=>{e.close()})),this.inputQueue=null,this.outputQueue=null}getQueueLength(){var e,t;return null!==(e=null===(t=this.decoder)||void 0===t?void 0:t.decodeQueueSize)&&void 0!==e?e:0}setSkipFrameDiscard(e){}static async isSupported(e,t){let r=null;0!==i.f[20](e+12)&&(r=(0,a.s3)(i.f[20](e+12),i.f[15](e+16)).slice());const s={codec:(0,o.A)(e),codedWidth:i.f[15](e+56),codedHeight:i.f[15](e+60),description:2!==i.f[15](e+160)?r:void 0,hardwareAcceleration:(0,h.C)(null==t||t)};s.description||delete s.description;try{return(await VideoDecoder.isConfigSupported(s)).supported}catch(e){return!1}}}},47243:(e,t,r)=>{"use strict";r.d(t,{A:()=>E});var s=r(134),i=r(29967),n=r.n(i),o=r(80662),a=r.n(o),c=r(63939),h=r(50932),d=r(9599),u=r(29170),l=r(28875),f=r(39365),p=r(44328),m=r(89188),g=r(71517),A=r(97317),v=r(56024),w=r(26777),y=r(37180),b=r(86834),_=r(4624),k=r(9705),x=r(21477),I=r(82014),M=r(72703),P=r(77231);const C="src/avcodec/webcodec/VideoEncoder.ts";class E{constructor(e){(0,s.A)(this,"encoder",void 0),(0,s.A)(this,"options",void 0),(0,s.A)(this,"parameters",void 0),(0,s.A)(this,"timeBase",void 0),(0,s.A)(this,"currentError",void 0),(0,s.A)(this,"avframeMap",void 0),(0,s.A)(this,"framerateTimebase",void 0),(0,s.A)(this,"inputCounter",void 0),(0,s.A)(this,"outputCounter",void 0),(0,s.A)(this,"extradata",void 0),this.options=e,this.avframeMap=new(a())}async output(e,t){const r=BigInt(e.timestamp),s=(0,p.k)(this.outputCounter++,this.framerateTimebase,this.timeBase),i=this.options.avpacketPool?this.options.avpacketPool.alloc():(0,g._5)();if(this.extradata)(0,w.A)(e,i,t);else{var o,a;if(null!=t&&null!==(o=t.decoderConfig)&&void 0!==o&&o.description){let e;e=t.decoderConfig.description instanceof ArrayBuffer?new Uint8Array(t.decoderConfig.description):new Uint8Array(t.decoderConfig.description.buffer),b.A.chrome&&!b.A.checkVersion(b.A.version,"130",!0)&&function(e){const t=e[2];if(!(t>>7||1&~t)){let r=t.toString(2).padStart(8,"0").split("").reverse().join("");e[2]=n()(r,2)}}(e),this.extradata=e}if(null!=t&&null!==(a=t.decoderConfig)&&void 0!==a&&a.colorSpace&&(h.M[15](this.parameters+96,(0,y.mt)(t.decoderConfig.colorSpace.matrix)),h.M[15](this.parameters+88,(0,y.ab)(t.decoderConfig.colorSpace.primaries)),h.M[15](this.parameters+92,(0,y.nG)(t.decoderConfig.colorSpace.transfer))),(0,w.A)(e,i),!this.extradata){let e;225===c.f[15](this.parameters+4)?e=x.Yj(this.parameters,(0,g.iI)(i)):167===c.f[15](this.parameters+4)&&(e=I.Yj(this.parameters)),e&&(this.extradata=e)}}h.M[17](i+8,r),h.M[17](i+16,s),h.M[15](i+76,this.timeBase.den),h.M[15](i+72,this.timeBase.num),h.M[17](i+48,(0,p.k)(BigInt(1),this.framerateTimebase,this.timeBase)),27!==c.f[15](this.parameters+4)&&173!==c.f[15](this.parameters+4)&&196!==c.f[15](this.parameters+4)||h.M[15](i+80,c.f[15](this.parameters+160)),this.options.onReceiveAVPacket(i);const d=this.avframeMap.get(r);d&&(this.options.avframePool?this.options.avframePool.release(d):(0,v.xj)(d)),this.avframeMap.delete(r)}error(e){this.currentError=e,this.options.onError(e)}async open(e,t){var r;this.currentError=null;const s=A.g[c.f[15](e+28)];if(!s||s.comp[0].depth>8)return _.z3(`format ${c.f[15](e+28)} not support`,C,188),k.r8;const i={codec:(0,l.A)(e),width:c.f[15](e+56),height:c.f[15](e+60),bitrate:Number(c.f[17](e+32)),framerate:(0,p.lb)((0,u.A)(e+72,d.P)),hardwareAcceleration:(0,f.C)(null===(r=this.options.enableHardwareAcceleration)||void 0===r||r),latencyMode:c.f[15](e+104)?"quality":"realtime",alpha:s&&128&s.flags?"keep":"discard"};27!==c.f[15](e+4)&&173!==c.f[15](e+4)&&196!==c.f[15](e+4)||(i.avc={format:1===c.f[15](e+160)?"avc":"annexb"});try{if(!(await VideoEncoder.isConfigSupported(i)).supported)return _.z3("not support",C,215),k.nr}catch(e){return _.z3(`${e}`,C,220),k.r8}return this.encoder&&"closed"!==this.encoder.state&&this.encoder.close(),this.encoder=new VideoEncoder({output:this.output.bind(this),error:this.error.bind(this)}),this.encoder.reset(),this.encoder.configure(i),this.currentError?(_.z3(`open video encoder error, ${this.currentError}`,C,237),k.r8):(this.parameters=e,this.timeBase=t,this.inputCounter=BigInt(0),this.outputCounter=BigInt(0),this.framerateTimebase={den:c.f[15](e+72),num:c.f[15](e+76)},0)}encode(e,t){if(this.currentError)return _.z3(`encode error, ${this.currentError}`,C,256),k.LR;let r=(0,p.k)(this.inputCounter,this.framerateTimebase,this.timeBase);if(((0,M.A)(e)&&c.f[17](e+104)!==P.Dh||!(0,M.A)(e)&&e.timestamp>=0)&&(r=(0,M.A)(e)?(0,p.Mr)(c.f[17](e+104),e+120,this.timeBase):(0,p.k)(BigInt(e.timestamp),P.KR,this.timeBase)),(0,M.A)(e)){const t=this.options.avframePool?this.options.avframePool.alloc():(0,v.FP)();(0,v.gg)(t,e),h.M[17](t+104,r),this.avframeMap.set(c.f[17](t+104),t),h.M[17](t+312,(0,p.k)(BigInt(1),this.framerateTimebase,(0,u.A)(t+120,d.P))),e=(0,m.pt)(t,r)}else e=new VideoFrame(e,{timestamp:Number(r),duration:Number((0,p.k)(BigInt(1),this.framerateTimebase,this.timeBase))});try{return this.encoder.encode(e,{keyFrame:t}),e.close(),this.inputCounter++,0}catch(t){return _.z3(`encode error, ${t}`,C,301),e.close(),k.LR}}async flush(){if(this.currentError)return _.z3(`flush error, ${this.currentError}`,C,309),k.LR;try{return await this.encoder.flush(),0}catch(e){return _.z3(`flush error, ${e}`,C,317),k.LR}}close(){this.encoder&&"closed"!==this.encoder.state&&this.encoder.close(),this.avframeMap.size&&this.avframeMap.forEach((e=>{this.options.avframePool?this.options.avframePool.release(e):(0,v.xj)(e)})),this.encoder=null}getExtraData(){return this.extradata}getColorSpace(){return{colorSpace:c.f[15](this.parameters+96),colorPrimaries:c.f[15](this.parameters+88),colorTrc:c.f[15](this.parameters+92)}}getQueueLength(){var e,t;return null!==(e=null===(t=this.encoder)||void 0===t?void 0:t.encodeQueueSize)&&void 0!==e?e:0}static async isSupported(e,t){const r=A.g[c.f[15](e+28)];if(!r||r.comp[0].depth>8)return!1;const s={codec:(0,l.A)(e),width:c.f[15](e+56),height:c.f[15](e+60),bitrate:Number(c.f[17](e+32)),framerate:(0,p.lb)((0,u.A)(e+72,d.P)),hardwareAcceleration:(0,f.C)(null==t||t),latencyMode:c.f[15](e+104)?"quality":"realtime",alpha:r&&128&r.flags?"keep":"discard"};27!==c.f[15](e+4)&&173!==c.f[15](e+4)&&196!==c.f[15](e+4)||(s.avc={format:1===c.f[15](e+160)?"avc":"annexb"});try{return(await VideoEncoder.isConfigSupported(s)).supported}catch(e){return!1}}}},18812:(e,t,r)=>{"use strict";r.d(t,{A:()=>p,t:()=>f});var s=r(134),i=r(80662),n=r.n(i),o=r(54001),a=r.n(o),c=r(56024),h=r(84149),d=r(72739),u=r(72703),l=r(67672);class f extends h.Ay{constructor(e){super(e instanceof MessageChannel?e.port1:e),(0,s.A)(this,"channel",void 0),(0,s.A)(this,"next",void 0),this.channel=e}connect(e){this.off(),e.off(),this.on(h.S3,(async t=>{try{const r=await e.request(t.method,t.params);this.reply(t,r,null,(0,u.A)(r)||l.ai(r)||"pull"!==t.method?null:[r])}catch(e){this.reply(t,null,e)}})),this.on(h.Wo,(t=>{e.notify(t.method,t.params)})),e.on(h.S3,(async t=>{try{const r=await this.request(t.method,t.params);e.reply(t,r,null,(0,u.A)(r)||l.ai(r)||"pull"!==t.method?null:[r])}catch(r){e.reply(t,null,r)}})),e.on(h.Wo,(e=>{this.notify(e.method,e.params)})),this.next=e}disconnect(){this.off(),this.next&&this.next.off(),this.next=null}getInnerPort(){if(this.channel instanceof MessageChannel)return this.channel.port2}}class p{constructor(e,t,r){(0,s.A)(this,"options",void 0),(0,s.A)(this,"inputAVFilterNodePort",void 0),(0,s.A)(this,"outputAVFilterNodePort",void 0),(0,s.A)(this,"inputInnerNodePort",void 0),(0,s.A)(this,"outputInnerNodePort",void 0),(0,s.A)(this,"currentOutput",void 0),(0,s.A)(this,"consumedCount",void 0),(0,s.A)(this,"pending",void 0),(0,s.A)(this,"inputCount",void 0),(0,s.A)(this,"outputCount",void 0),(0,s.A)(this,"inputConnectedMap",void 0),(0,s.A)(this,"outputConnectedMap",void 0),this.options=e,this.inputCount=t,this.outputCount=r,this.inputAVFilterNodePort=[],this.outputAVFilterNodePort=[],this.inputInnerNodePort=[],this.outputInnerNodePort=[];for(let e=0;e<this.inputCount;e++){const e=new f(new MessageChannel);this.inputAVFilterNodePort.push(e),this.inputInnerNodePort.push(new h.Ay(e.getInnerPort()))}for(let e=0;e<this.outputCount;e++){const e=new f(new MessageChannel);this.outputAVFilterNodePort.push(e),this.outputInnerNodePort.push(new h.Ay(e.getInnerPort()))}this.consumedCount=0,this.pending=[],this.currentOutput=[];for(let e=0;e<this.outputCount;e++)this.handlePull(this.outputInnerNodePort[e],e);this.inputConnectedMap=new(n()),this.outputConnectedMap=new(n())}handlePull(e,t){e.on(h.S3,(async r=>{if("pull"===r.method)if(0===this.consumedCount){const s=[];this.currentOutput.length=0;for(let e=0;e<this.inputCount;e++)s.push(await this.inputInnerNodePort[e].request("pull",r.params));await this.process(s,this.currentOutput,r.params),s.forEach((e=>{l.ai(e)&&e<0||((0,u.A)(e)?e>0&&(this.options.avframePool?this.options.avframePool.release(e):(0,c.xj)(e)):e.close())})),e.reply(r,this.currentOutput[t],null,(0,u.A)(this.currentOutput[t])||l.ai(this.currentOutput[t])?null:[this.currentOutput[t]]),this.consumedCount++,this.pending.length&&(this.pending.forEach((e=>{e.resolve()})),this.pending.length=0),this.consumedCount===this.outputCount&&(this.consumedCount=0,this.currentOutput.length=0)}else this.consumedCount===this.outputCount-1?(e.reply(r,this.currentOutput[t],null,(0,u.A)(this.currentOutput[t])||l.ai(this.currentOutput[t])?null:[this.currentOutput[t]]),this.consumedCount=0,this.currentOutput.length=0):(await new(a())(((e,t)=>{this.pending.push({resolve:e,reject:t})})),e.reply(r,this.currentOutput[t],null,(0,u.A)(this.currentOutput[t])||l.ai(this.currentOutput[t])?null:[this.currentOutput[t]]),this.consumedCount++)}))}getInputNodePort(e){return this.inputAVFilterNodePort[e]}getOutputNodePort(e){return this.outputAVFilterNodePort[e]}getInputCount(){return this.inputCount}getOutputCount(){return this.outputCount}getFreeInputNodePort(){const e=[];this.inputConnectedMap.forEach(((t,r)=>{e.push(t)}));for(let t=0;t<this.inputCount;t++)if(!d.zy(e,t))return{index:t,port:this.getInputNodePort(t)}}getFreeOutputNodePort(){const e=[];this.outputConnectedMap.forEach(((t,r)=>{e.push(t)}));for(let t=0;t<this.outputCount;t++)if(!d.zy(e,t))return{index:t,port:this.getOutputNodePort(t)}}addInputPeer(e,t){this.inputConnectedMap.set(e,t)}removeInputPeer(e){this.inputConnectedMap.delete(e)}addOutputPeer(e,t){this.outputConnectedMap.set(e,t)}removeOutputPeer(e){this.outputConnectedMap.delete(e)}connect(e){if(this.outputConnectedMap.size===this.outputCount)throw new Error("all output has connected");const t=this.getFreeOutputNodePort(),r=e.getFreeInputNodePort();if(!r)throw new Error("next node all input has connected");t.port.connect(r.port),this.outputConnectedMap.set(e,t.index),e.addInputPeer(this,r.index)}disconnectNode(e){this.outputConnectedMap.has(e)&&(this.outputAVFilterNodePort[this.outputConnectedMap.get(e)].disconnect(),this.outputConnectedMap.delete(e),e instanceof p&&e.removeInputPeer(this))}disconnect(e){if(e)return this.disconnectNode(e);this.outputConnectedMap.forEach(((e,t)=>{this.disconnectNode(t)}))}}},88496:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r(134),i=r(18812);class n{constructor(e){(0,s.A)(this,"nodePort",void 0),(0,s.A)(this,"outputNode",void 0),this.nodePort=new i.t(e)}connect(e){const{port:t,index:r}=e.getFreeInputNodePort();this.nodePort.connect(t),e.addInputPeer(this,r),this.outputNode=e}}},2579:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r(134),i=r(18812);class n{constructor(e){(0,s.A)(this,"nodePort",void 0),(0,s.A)(this,"inputNode",void 0),this.nodePort=new i.t(e)}getFreeInputNodePort(){return{index:0,port:this.nodePort}}addInputPeer(e){this.inputNode=e}}},53402:(e,t,r)=>{"use strict";r.d(t,{A:()=>d});var s=r(63939),i=(r(9599),r(77231)),n=r(18812),o=r(56024),a=r(44328),c=r(72703),h=r(67672);class d extends n.A{constructor(e){super(e,1,1)}async ready(){}async destroy(){}async process(e,t){let r=e[0];if(h.ai(r)&&r<0)return void(t[0]=r);let n=(0,c.A)(r)?(0,a.Mr)(s.f[17](r+104),r+120,i.KR):BigInt(r.timestamp);if(n<this.options.start)for(;;){const e=await this.inputInnerNodePort[0].request("pull");if(h.ai(e)&&e<0)return void(t[0]=e);if(n=(0,c.A)(e)?(0,a.Mr)(s.f[17](e+104),e+120,i.KR):BigInt(e.timestamp),n>=this.options.start)return void(t[0]=e);(0,c.A)(e)?this.options.avframePool?this.options.avframePool.release(e):(0,o.xj)(e):e.close()}else{if(n>this.options.end&&this.options.end>=this.options.start)return void(t[0]=-1048576);if((0,c.A)(r)){const e=this.options.avframePool?this.options.avframePool.alloc():(0,o.FP)();(0,o.gg)(e,r),t[0]=e}else t[0]=r.clone()}}}},54903:(e,t,r)=>{"use strict";r.d(t,{A:()=>w});var s=r(134),i=r(14686),n=r(63939),o=r(50932),a=(r(9599),r(92246)),c=r(18812),h=r(55833),d=(r(10278),r(56024)),u=r(37837),l=r(66788),f=r(9705),p=r(37815),m=r(77231),g=r(4624),A=r(67672),v=r(94561);class w extends c.A{constructor(e){super(e,1,1),(0,s.A)(this,"resampler",void 0),(0,s.A)(this,"pcm",void 0)}async ready(){this.pcm=(0,u.Gy)(48)}async destroy(){this.pcm&&(n.f[20](this.pcm)&&((0,u.aI)(n.f[20](this.pcm)),(0,u.aI)(this.pcm)),(0,u.Eb)(this.pcm)),this.resampler&&(this.resampler.close(),this.resampler=null)}async process(e,t){const r=e[0];if(r<0)return void(t[0]=r);const s=this.options.avframePool?this.options.avframePool.alloc():(0,d.FP)();if(n.f[15](r+152)!==this.options.output.sampleRate||n.f[15](r+292)!==this.options.output.channels||n.f[15](r+80)!==this.options.output.format&&this.options.output.format!==m.N_){if(this.resampler){const e=this.resampler.getInputPCMParameters();e.channels===n.f[15](r+292)&&e.sampleRate===n.f[15](r+152)&&e.format===n.f[15](r+80)||(this.resampler.close(),this.resampler=null)}if(!this.resampler){let e=this.options.resource;A.sv(e)&&(e=await(0,v.A)(e)),this.resampler=new a.A({resource:e});const s=await this.resampler.open({channels:n.f[15](r+292),sampleRate:n.f[15](r+152),format:n.f[15](r+80)},{channels:this.options.output.channels,sampleRate:this.options.output.sampleRate,format:this.options.output.format===m.N_?n.f[15](r+80):this.options.output.format});if(s)return g.z3(`open resampler failed, error ${s}`,"src/avfilter/audio/ResampleFilterNode.ts",95),void(t[0]=f.E$)}this.resampler.resample(n.f[20](r+64),this.pcm,n.f[15](r+76)),o.M[15](s+80,this.options.output.format===m.N_?n.f[15](r+80):this.options.output.format),o.M[15](s+76,n.f[15](this.pcm+8)),o.M[15](s+152,n.f[15](this.pcm+20)),o.M[15](s+292,n.f[15](this.pcm+16)),o.M[15](s+32,n.f[15](this.pcm+4)),o.M[17](s+104,n.f[17](r+104)),o.M[17](s+312,n.f[17](r+312)),o.M[17](s+112,n.f[17](r+112)),(0,i.Mr)(s+120,r+120,8);const e=(0,l.K0)(n.f[15](s+80)),c=e?n.f[15](s+292):1;if(c>h.pu){if(o.M[20](s+64,(0,u.sY)(4*c)),!n.f[20](s+64))return(0,u.aI)(s+64),void(t[0]=f.gR)}else o.M[20](s+64,s);for(let r=0;r<Math.min(c,h.pu);r++){if(0===r&&(o.M[20](s+156+4*r,(0,p.aw)(n.f[20](n.f[20](this.pcm)+4*r),n.f[15](this.pcm+4)*(e?n.f[15](this.pcm+16):1))),!n.f[20](s+156+4*r)))return(0,d.to)(s),void(t[0]=f.gR);o.M[20](n.f[20](s+64)+4*r,n.f[20](n.f[20](this.pcm)+4*r)),o.M[20](s+4*r,n.f[20](n.f[20](this.pcm)+4*r)),o.M[20](n.f[20](this.pcm)+4*r,0)}for(let e=0;e<c-h.pu;e++)o.M[20](n.f[20](s+64)+4*(e+h.pu),n.f[20](n.f[20](this.pcm)+4*e)),o.M[20](n.f[20](this.pcm)+4*e,0);o.M[15](this.pcm+12,0),t[0]=s}else(0,d.gg)(s,r),t[0]=s}}},2849:(e,t,r)=>{"use strict";r.d(t,{Fn:()=>f,T$:()=>p,iT:()=>m});var s=r(80662),i=r.n(s),n=r(53402),o=r(54903),a=r(84624),c=r(57473),h=r(4624);const d="src/avfilter/graph.ts";function u(e,t){const r=e.options;switch(t&&(r.avframePool=t),e.type){case"resampler":return new o.A(r);case"scaler":return new c.A(r);case"range":return new n.A(r);case"framerate":return new a.A(r);default:throw new Error(`invalid GraphNodeType, ${e.type}`)}}let l=0;function f(e,t){return{id:l++,type:e,options:t}}function p(e,t){const r=[],s=[],n=[],o=new(i()),a=new(i()),c=new(i());return e.vertices.forEach((e=>{const s={id:e.id,filter:u(e,t),children:[],parents:[]};o.set(s.id,s),r.push(s)})),e.edges.forEach(((e,t)=>{const r=o.get(e.parent),s=o.get(e.child);r||h.h2(`${t} edge parent(${e.parent}) not found`,d,125),s||h.h2(`${t} edge child(${e.child}) not found`,d,128),r.children.push(s),s.parents.push(r),a.set(r.id,!0),c.set(s.id,!0),r.filter.connect(s.filter)})),e.vertices.forEach((e=>{c.has(e.id)||s.push(o.get(e.id)),a.has(e.id)||n.push(o.get(e.id))})),{vertices:r,edges:e.edges,inputs:s,outputs:n}}function m(e,t,r){const s=new(i()),n=new(i());for(let e=0;e<t.length;e++)s.has(t[e].id)?s.set(t[e].id,s.get(t[e].id)+1):s.set(t[e].id,1);for(let e=0;e<r.length;e++)n.has(r[e].id)?n.set(r[e].id,n.get(r[e].id)+1):n.set(r[e].id,1);for(let t=0;t<e.inputs.length;t++){var o;if(e.inputs[t].filter.getInputCount()>(null!==(o=s.get(e.inputs[t].id))&&void 0!==o?o:0))return h.z3(`input filter(${e.inputs[t].id}) only has ${s.get(e.inputs[t].id)} input channel port`,d,178),!1}for(let t=0;t<e.outputs.length;t++){var a;if(e.outputs[t].filter.getOutputCount()>(null!==(a=n.get(e.outputs[t].id))&&void 0!==a?a:0))return h.z3(`output filter(${e.outputs[t].id}) only has ${n.get(e.outputs[t].id)} output channel port`,d,185),!1}for(let t=0;t<e.vertices.length;t++)if(e.vertices[t].children.length&&e.vertices[t].parents.length){if(e.vertices[t].filter.getOutputCount()!==e.vertices[t].children.length)return h.z3(`filter(${e.vertices[t].id}) only has ${e.vertices[t].children.length} output channel port`,d,193),!1;if(e.vertices[t].filter.getInputCount()!==e.vertices[t].parents.length)return h.z3(`filter(${e.vertices[t].id}) only has ${e.vertices[t].parents.length} input channel port`,d,197),!1}return!0}},84624:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var s=r(134),i=r(63939),n=(r(9599),r(18812)),o=r(67672),a=r(56024),c=r(44328),h=r(77231),d=r(72703);class u extends n.A{constructor(e){super(e,1,1),(0,s.A)(this,"lastPts",void 0),(0,s.A)(this,"delta",void 0),(0,s.A)(this,"timeBase",void 0),(0,s.A)(this,"step",void 0)}async ready(){this.lastPts=-BigInt(1),this.delta=BigInt(0),this.timeBase=h.KR,this.step=(0,c.k)(BigInt(1),{den:this.options.framerate.num,num:this.options.framerate.den},this.timeBase)}async destroy(){}async process(e,t){let r=e[0];if(o.ai(r)&&r<0)return void(t[0]=r);let s=(0,d.A)(r)?(0,c.Mr)(i.f[17](r+104),r+120,this.timeBase):BigInt(Math.floor(r.timestamp)),n=s-this.lastPts+this.delta;if(n<this.step&&this.lastPts>-BigInt(1))for(;;){const e=await this.inputInnerNodePort[0].request("pull");if(o.ai(e)&&e<0)return void(t[0]=e);if(s=(0,d.A)(e)?(0,c.Mr)(i.f[17](e+104),e+120,this.timeBase):BigInt(Math.floor(e.timestamp)),n=s-this.lastPts,n>=this.step)return this.delta+=n-this.step,this.lastPts=s,void(t[0]=e);(0,d.A)(e)?this.options.avframePool?this.options.avframePool.release(e):(0,a.xj)(e):e.close()}else if(this.lastPts>-BigInt(1)&&(this.delta=n-this.step),this.lastPts=s,(0,d.A)(r)){const e=this.options.avframePool?this.options.avframePool.alloc():(0,a.FP)();(0,a.gg)(e,r),t[0]=e}else t[0]=r.clone()}}},57473:(e,t,r)=>{"use strict";r.d(t,{A:()=>A});var s=r(134),i=r(63939),n=r(50932),o=r(18812),a=r(56024),c=r(49804),h=r(67672),d=r(37180),u=r(77231),l=r(9705),f=r(4624),p=r(72703),m=r(94561);const g="src/avfilter/video/ScaleFilterNode.ts";class A extends o.A{constructor(e){super(e,1,1),(0,s.A)(this,"scaler",void 0)}async ready(){}async destroy(){this.scaler&&(this.scaler.close(),this.scaler=null)}async process(e,t,r){let s=e[0];if(h.ai(s)&&s<0)return void(t[0]=s);const o=(0,p.A)(s)?i.f[15](s+68):s.displayWidth,A=(0,p.A)(s)?i.f[15](s+72):s.displayHeight,v=(0,p.A)(s)?i.f[15](s+80):(0,d.OB)(s.format);if(o===this.options.output.width&&A===this.options.output.height&&(v===this.options.output.format||this.options.output.format===u.N_||-1===v||r&&r.preferVideoFrame&&!(0,p.A)(s)))if((0,p.A)(s)){const e=this.options.avframePool?this.options.avframePool.alloc():(0,a.FP)();(0,a.gg)(e,s),t[0]=e}else t[0]=s.clone();else{if(-1===v)return f.z3("src avframe format not support",g,62),void(t[0]=l.E$);const r=this.options.avframePool?this.options.avframePool.alloc():(0,a.FP)();if(this.scaler){const e=this.scaler.getInputScaleParameters();e.width===o&&e.height===A&&e.format===v||(this.scaler.close(),this.scaler=null)}if(!this.scaler){let e=this.options.resource;h.sv(e)&&(e=await(0,m.A)(e)),this.scaler=new c.A({resource:e});const r=await this.scaler.open({width:o,height:A,format:v},{width:this.options.output.width,height:this.options.output.height,format:this.options.output.format!==u.N_?this.options.output.format:23!==v||(0,p.A)(s)?v:0});if(r)return f.z3(`open scaler failed, error ${r}`,g,105),void(t[0]=l.E$)}(0,p.A)(s)||(s=(0,d.lL)(e[0],this.options.avframePool?this.options.avframePool.alloc():(0,a.FP)())),this.scaler.scale(s,r),(0,a.Cj)(r,s),n.M[15](r+68,this.options.output.width),n.M[15](r+72,this.options.output.height),n.M[15](r+80,this.options.output.format),t[0]=r,(0,p.A)(e[0])||(this.options.avframePool?this.options.avframePool.release(s):(0,a.xj)(s))}}}},44315:(e,t,r)=>{"use strict";r.d(t,{Xv:()=>p,fG:()=>m,oD:()=>f});var s=r(134),i=r(63939),n=r(50932),o=r(68960),a=r(71517),c=r(7417),h=r(73783);const d=c.z1(4,4),u=c.z1(4,4);class l{constructor(){(0,s.A)(this,"packetBuffer",void 0),this.packetBuffer=[]}}class f{constructor(){(0,s.A)(this,"metadataHeaderPadding",-1),(0,s.A)(this,"metadata",void 0),(0,s.A)(this,"streams",void 0),(0,s.A)(this,"options",void 0),(0,s.A)(this,"chapters",void 0),(0,s.A)(this,"privateData",void 0),(0,s.A)(this,"privateData2",void 0),(0,s.A)(this,"iformat",void 0),(0,s.A)(this,"oformat",void 0),(0,s.A)(this,"ioReader",void 0),(0,s.A)(this,"ioWriter",void 0),(0,s.A)(this,"errorFlag",void 0),(0,s.A)(this,"interval",void 0),(0,s.A)(this,"streamIndex",void 0),(0,s.A)(this,"getDecoderResource",null),this.streams=[],this.errorFlag=0,this.streamIndex=0,this.interval=new l,this.options={},this.privateData={},this.metadata={},this.chapters=[]}get format(){return this.iformat?this.iformat.type:this.oformat?this.oformat.type:-1}getStreamById(e){return this.streams.find((t=>t.id===e))}getStreamByIndex(e){return this.streams.find((t=>t.index===e))}getStreamByMediaType(e){return this.streams.find((t=>{var r;return(null===(r=t.codecpar)||void 0===r?void 0:r.codecType)===e}))}createStream(){const e=new o.A;return e.index=this.streamIndex++,(0,h.s2)(u),e.id=i.f[15](d),n.M[15](d,e.id+1),(0,h.Tl)(u),this.removeStreamByIndex(e.index),this.streams.push(e),e}addStream(e){this.removeStreamByIndex(e.index),this.streams.push(e)}removeStream(e){this.removeStreamByIndex(e.index)}removeStreamById(e){const t=this.streams.findIndex((t=>t.id===e));if(t>-1){const e=this.streams.splice(t,1);e[0]&&e[0].destroy()}}removeStreamByIndex(e){const t=this.streams.findIndex((t=>t.index===e));if(t>-1){const e=this.streams.splice(t,1);e[0]&&e[0].destroy()}}async destroy(){this.oformat&&this.oformat.destroy(this),this.iformat&&await this.iformat.destroy(this),this.interval.packetBuffer.length&&this.interval.packetBuffer.forEach((e=>{(0,a.Qe)(e)})),this.streams.forEach((e=>{e.destroy()})),this.streams=[],this.interval=null,this.ioReader=this.ioWriter=null,this.oformat=this.iformat=null}}function p(){return new f}function m(){return new f}},64436:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var s=r(134),i=r(63939),n=(r(77162),r(37837)),o=r(71766);class a{constructor(){(0,s.A)(this,"inCodecpar",void 0),(0,s.A)(this,"inTimeBase",void 0),(0,s.A)(this,"outCodecpar",void 0)}init(e,t){return this.inCodecpar=(0,n.Gy)(168),(0,o.Yi)(this.inCodecpar,e),this.inTimeBase={den:i.f[15](t+4),num:i.f[15](t)},0}destroy(){this.inCodecpar&&((0,o.dn)(this.inCodecpar),this.inCodecpar=0)}}},26173:(e,t,r)=>{"use strict";r.d(t,{A:()=>m});var s=r(134),i=r(63939),n=r(50932),o=r(64436),a=r(71517),c=r(62815),h=r(67659),d=r(59166),u=r(14686),l=r(9705),f=r(37837),p=r(4624);class m extends o.A{constructor(...e){super(...e),(0,s.A)(this,"cache",void 0),(0,s.A)(this,"cached",void 0)}init(e,t){return super.init(e,t),this.cache=(0,a._5)(),this.cached=!1,0}destroy(){super.destroy(),(0,a.Qe)(this.cache),this.cache=0}sendAVPacket(e){const t=(0,u.JW)(i.f[20](e+24),i.f[15](e+28));if(1===i.f[15](e+80))(0,a.rN)(this.cache,e);else{let r;if((0,a.zu)(this.cache,e),27===i.f[15](this.inCodecpar+4)?r=c.oT(t):173===i.f[15](this.inCodecpar+4)?r=h.oT(t):196===i.f[15](this.inCodecpar+4)?r=d.oT(t):p.h2(`not support for codecId: ${i.f[15](this.inCodecpar+4)}`,"src/avformat/bsf/h2645/Annexb2AvccFilter.ts",91),n.M[15](this.cache+80,1),(0,a.NX)(this.cache,r.bufferPointer,r.length),r.key&&n.M[15](this.cache+36,1|i.f[15](this.cache+36)),r.extradata){const e=(0,f.sY)(r.extradata.length);(0,u.lW)(e,r.extradata.length,r.extradata),(0,a.Ow)(this.cache,1,e,r.extradata.length)}}return this.cached=!0,0}receiveAVPacket(e){return this.cached?((0,a.Up)(e),(0,a.rN)(e,this.cache),this.cached=!1,0):l.LR}reset(){return 0}}},16160:(e,t,r)=>{"use strict";r.d(t,{V:()=>i,v:()=>s});const s=256e3,i=BigInt(5e3)},75:(e,t,r)=>{"use strict";r.d(t,{Cj:()=>S,Ib:()=>E,ho:()=>C,jF:()=>U});var s=r(61499),i=r(63939),n=r(50932),o=r(36981),a=r(29170),c=r(9599),h=r(95335),d=r(72739),u=r(77231),l=r(31425),f=r(44328),p=r(71517),m=r(16160),g=r(9705),A=r(4624),v=r(40417),w=r(75742),y=r(56024),b=r(14686),_=r(31633),k=r(55680),x=r(89478);const I="src/avformat/demux.ts",M=16,P={fastOpen:!1,maxAnalyzeDuration:15e3};async function C(e,t={}){const r=h.X$({},P,t);return e.ioReader||A.h2("need IOReader",I,85),e.iformat||A.h2("need iformat",I,88),2===e.iformat.type&&(r.maxAnalyzeDuration=Math.max(r.maxAnalyzeDuration,2e3)),e.iformat.init(e),e.options=r,e.iformat.readHeader(e)}async function E(e){const t={},r={},g={},A={},b={},I={},P={},C=e.iformat.getAnalyzeStreamsCount();let E=0;const T=[];let B=0;function U(){if(!e.getDecoderResource)return!0;for(let t=0;t<e.streams.length;t++)if(I[e.streams[t].index]&&!P[e.streams[t].index])return!1;return!0}function D(e,t){let s=r[e.index];const o=g[e.index];let a=e.codecpar.videoDelay;if(null!=o&&o.length&&(a=Math.min(Math.max((0,k.A)(o),e.codecpar.videoDelay),16),t&&(e.codecpar.videoDelay=a)),!s&&null!=o&&o.length){s=a?(0,x.A)(a,o):o.slice();const t={delay:a,dtsQueue:s};s=[],b[e.index]=t;for(let r=0;r<T.length;r++)if(e.index===i.f[15](T[r]+32)){const o=t.dtsQueue.shift();n.M[17](T[r]+16,o),s.push(o);const a=e.sampleIndexes.find((e=>e.pts===i.f[17](T[r]+8)));a&&(a.dts=i.f[17](T[r]+16))}}if(s&&s.length>1){let t=BigInt(0);for(let e=1;e<s.length;e++)t+=s[e]-s[e-1];if(1===e.codecpar.codecType&&e.codecpar.sampleRate>0&&!e.codecpar.frameSize){let r=Number(t)/(s.length-1);e.codecpar.frameSize=Math.round(r/e.timeBase.den*e.timeBase.num*e.codecpar.sampleRate)}else 0===e.codecpar.codecType&&(e.codecpar.framerate.num=e.timeBase.den*e.timeBase.num*(s.length-1),e.codecpar.framerate.den=Number(BigInt.asIntN(32,t)),(0,_.A)(e.codecpar.framerate));const r=Number(s[s.length-1]-e.startTime)*e.timeBase.num/e.timeBase.den;r&&(e.codecpar.bitrate=BigInt(Math.floor(8*A[e.index]/r)))}}function L(){e.streams.forEach((e=>{D(e,!0)}))}for(;;){if(e.streams.length>=C&&e.options.fastOpen&&(0,l.$)(e)){L();break}E||(E=(0,p._5)());let n=!1;if(B=await S(e,E),0!==B){L();break}const h=e.getStreamByIndex(i.f[15](E+32));if(i.f[15](E+28)&&(n=!0,T.push(E),t[h.index]?i.f[17](E+8)<h.startTime&&(h.startTime=i.f[17](E+8)):(h.firstDTS=i.f[17](E+16),h.startTime=i.f[17](E+8),t[h.index]=!0),i.f[17](E+16)!==u.Dh&&(r[h.index]?r[h.index].push(i.f[17](E+16)):r[h.index]=[i.f[17](E+16)]),g[h.index]?g[h.index].push(i.f[17](E+8)):g[h.index]=[i.f[17](E+8)],A[h.index]?A[h.index]+=i.f[15](E+28):A[h.index]=i.f[15](E+28),!P[h.index]&&e.getDecoderResource&&!e.options.fastOpen)){let t=I[h.index];if(!t){const r=await e.getDecoderResource(h.codecpar.codecType,h.codecpar.codecId);r&&(1===h.codecpar.codecType?t=new w.A({resource:r,onReceiveAVFrame:e=>{h.codecpar.format=i.f[15](e+80),h.codecpar.frameSize=i.f[15](e+76),h.codecpar.sampleRate=i.f[15](e+152),h.codecpar.chLayout=(0,a.A)(e+288,o.r),(0,y.xj)(e),P[h.index]=!0}}):0===h.codecpar.codecType&&(r.threadModule&&delete r.threadModule,t=new v.A({resource:r,onReceiveAVFrame:e=>{h.codecpar.format=i.f[15](e+80),h.codecpar.colorRange=i.f[15](e+208),h.codecpar.colorSpace=i.f[15](e+220),h.codecpar.colorPrimaries=i.f[15](e+212),h.codecpar.colorTrc=i.f[15](e+216),h.codecpar.chromaLocation=i.f[15](e+224),h.codecpar.sampleAspectRatio=(0,a.A)(e+92,c.P),h.codecpar.width=i.f[15](e+68),h.codecpar.height=i.f[15](e+72),(0,y.xj)(e),P[h.index]=!0}})),await t.open(h.codecpar[s.o9])?(t.close(),P[h.index]=!0):I[h.index]=t)}t&&t.decode(E)&&(P[h.index]=!0)}if(g[h.index]&&g[h.index].length===M&&D(h,!1),h.startTime!==u.Dh&&i.f[17](E+8)-h.startTime>(0,f.k)(BigInt(Math.floor(e.options.maxAnalyzeDuration)),u.i0,h.timeBase)&&(e.streams.length>=C||i.f[17](E+8)-h.startTime>(0,f.k)(BigInt(15e3),u.i0,h.timeBase))&&U()){L(),n&&(E=0);break}n&&(E=0)}return E&&(0,p.Qe)(E),T.length&&(e.interval.packetBuffer=T.concat(e.interval.packetBuffer)),h.__(I,(e=>{e&&e.close()})),h.__(b,((t,r)=>{const s=e.getStreamByIndex(+r);s.privateData2?h.X$(s.privateData2,t):s.privateData2=t})),-1048576===B?0:0!==B?B:(2===e.iformat.type&&1&e.ioReader.flags&&await async function(e){const t=await e.ioReader.fileSize();if(t<=BigInt(0))return;const r=e.interval.packetBuffer;e.interval.packetBuffer=[];let s=e.ioReader.getPos(),n=0;for(;n<4;){const r=t-BigInt(Math.floor(m.v<<n)),o=await e.iformat.seek(e,null,r,2);o>BigInt(0)&&(s=o);const a={},c=(0,p._5)();for(;!(await S(e,c)<0);){let t=i.f[17](c+8);const r=e.getStreamByIndex(i.f[15](c+32));r.startTime!==u.Dh?t-=r.startTime:t-=r.firstDTS,t>BigInt(0)&&((r.duration===u.Dh||!a[i.f[15](c+32)]||r.duration<t&&Math.abs(Number(t-r.duration))<60*r.timeBase.den/r.timeBase.num)&&(r.duration=t),a[c.streamIndex]=t)}(0,p.Qe)(c);let h=!0;if(d.__(e.streams,(e=>{if(e.duration===u.Dh)return h=!1,!1})),h)break;n++}d.__(e.interval.packetBuffer,(e=>{(0,p.Qe)(e)})),e.interval.packetBuffer=r,await e.iformat.seek(e,null,s,2)}(e),0)}function T(e,t){const r=d.El(e.sampleIndexes,(e=>e.pts<i.f[17](t+8)?1:-1)),s={dts:i.f[17](t+16),pts:i.f[17](t+8),pos:i.f[17](t+56),size:i.f[15](t+28),duration:i.f[17](t+48),flags:i.f[15](t+36)};r>-1?(e.sampleIndexesPosMap.set(i.f[17](t+56),r),e.sampleIndexes.splice(r,0,s)):(e.sampleIndexesPosMap.set(i.f[17](t+56),e.sampleIndexes.length),e.sampleIndexes.push(s))}async function B(e,t){const r=e.getStreamByIndex(i.f[15](t+32));if(i.f[17](t+16)===u.Dh){const e=r.privateData2;e&&(e.delay?(d._(e.dtsQueue,i.f[17](t+8),(e=>e<i.f[17](t+8)?1:-1)),e.dtsQueue.length>e.delay&&n.M[17](t+16,e.dtsQueue.shift())):n.M[17](t+16,i.f[17](t+8)))}let s=0;if(r&&(27===r.codecpar.codecId||173===r.codecpar.codecId||196===r.codecpar.codecId||86018===r.codecpar.codecId))if(!i.f[15](t+28)&&(0,p.fQ)(t,1))for(;;){const r=(0,p._5)();if(s=await e.iformat.readAVPacket(e,r),0!==s){if(e.interval.packetBuffer.length){let r=e.interval.packetBuffer.shift();return(0,p.Up)(t),(0,p.rN)(t,r),(0,p.Qe)(r),B(e,t)}return s}if(i.f[15](r+32)!==i.f[15](t+32)){let t=e.interval.packetBuffer.length-1,s=!0;for(;t>=0;t--)if(i.f[15](e.interval.packetBuffer[t]+32)===i.f[15](r+32)){i.f[15](e.interval.packetBuffer[t]+28)||i.f[15](r+28)?!i.f[15](e.interval.packetBuffer[t]+28)&&i.f[15](r+28)&&((0,p.Zx)(e.interval.packetBuffer[t],r),(0,p.Qe)(r),s=!1):((0,p.Qe)(e.interval.packetBuffer[t]),e.interval.packetBuffer.splice(t,1,r),s=!1);break}s&&e.interval.packetBuffer.push(r)}else{if(i.f[15](r+28))return(0,p.Zx)(t,r),n.M[17](t+16,i.f[17](r+16)),n.M[17](t+8,i.f[17](r+8)),(0,p.Qe)(r),0;(0,p.Up)(t),(0,p.rN)(t,r),(0,p.Qe)(r)}}else if(32&i.f[15](t+36))return S(e,t);if(1&e.ioReader.flags&&!r.sampleIndexesPosMap.has(i.f[17](t+56)))if(0===r.codecpar.codecType)1&i.f[15](t+36)&&T(r,t);else if(1===r.codecpar.codecType){const e=d.El(r.sampleIndexes,(e=>e.pts<i.f[17](t+8)?1:-1));(!r.sampleIndexes.length||e<0&&(0,f.Mr)(i.f[17](t+8)-r.sampleIndexes[r.sampleIndexes.length-1].pts,t+72,u.i0)>=m.V||e>0&&e<r.sampleIndexes.length-1&&(0,f.Mr)(i.f[17](t+8)-r.sampleIndexes[e-1].pts,t+72,u.i0)>=m.V||0===e&&(0,f.Mr)(r.sampleIndexes[0].pts-i.f[17](t+8),t+72,u.i0)>=m.V)&&T(r,t)}return 0}async function S(e,t){let r=0;if((0,p.Up)(t),e.interval.packetBuffer.length){const r=e.interval.packetBuffer.shift();return(0,p.rN)(t,r),(0,p.Qe)(r),B(e,t)}return r=await e.iformat.readAVPacket(e,t),0!==r?((0,p.Up)(t),r):B(e,t)}async function U(e,t,r,s){let o=t>-1?e.streams.find((e=>e.index===t)):null;if(o||(o=e.getStreamByMediaType(0),o||(o=e.getStreamByMediaType(1)),o||(o=e.getStreamByMediaType(3))),!o)return A.z3(`not found any stream to seek, streamIndex: ${o.index}`,I,693),BigInt(g.LR);A.Yz(`seek in ${0===o.codecpar.codecType?"video":"audio"} stream, streamIndex: ${o.index}, timestamp: ${r}, flags: ${s}`,I,697),r=(0,f.k)(r,u.i0,o.timeBase);const a=await e.iformat.seek(e,o,r,s);if(a>=BigInt(0)){d.__(e.interval.packetBuffer,(t=>{if(2&e.ioReader.flags){const r=(0,p.rU)(t,1),s=e.streams[i.f[15](t+32)];!s.sideData[1]&&r&&(s.sideData[1]=(0,b.s3)(i.f[20](r),i.f[25](r+4)).slice())}(0,p.Qe)(t)})),e.interval.packetBuffer.length=0;const t={};e.streams.forEach((e=>{const r=e.privateData2;null!=r&&r.dtsQueue&&(r.dtsQueue.length=0,r.delay&&(t[e.index]=r.delay,r.delay=M))}));const r=[];for(;e.streams.some((e=>{const t=e.privateData2;return t&&t.dtsQueue&&t.dtsQueue.length<t.delay}));){const t=(0,p._5)();if(await S(e,t)){(0,p.Qe)(t);break}r.push(t)}return e.streams.forEach((e=>{const s=e.privateData2;if(null!=s&&s.delay){s.delay=t[e.index],s.dtsQueue=(0,x.A)(s.delay,s.dtsQueue);for(let t=0;t<r.length;t++)if(e.index===i.f[15](r[t]+32)){n.M[17](r[t]+16,s.dtsQueue.shift());const o=e.sampleIndexes.find((e=>e.pts===i.f[17](r[t]+8)));o&&(o.dts=i.f[17](r[t]+16))}}})),e.interval.packetBuffer=r.concat(e.interval.packetBuffer),BigInt(0)}return a}},548:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>T,L_:()=>C,eG:()=>P,iV:()=>x});var s=r(69736),i=r.n(s),n=r(61499),o=r(63939),a=r(9599),c=r(29170),h=r(44315),d=r(95335),u=r(62751),l=r(67672),f=r(44328),p=r(77231),m=r(20525),g=r(62100),A=r(95832),v=r(62815),w=r(67659),y=r(21477),b=r(82014),_=r(64093),k=r(24310);function x(e){e<0&&(e=BigInt(0));const t=Number(BigInt.asIntN(32,e%BigInt(1e3))),r=Number(BigInt.asIntN(32,e/BigInt(1e3)%BigInt(60))),s=Number(BigInt.asIntN(32,e/BigInt(1e3)/BigInt(60)%BigInt(60))),i=Number(BigInt.asIntN(32,e/BigInt(1e3)/BigInt(3600)));return m.GP("%02d:%02d:%02d.%03d",i,s,r,t)}function I(e){return e<BigInt(1e4)?(0,g.A)(Number(BigInt.asIntN(32,e)))+" bps/s":Number(BigInt.asIntN(32,e/BigInt(1e3)))+" kbps/s"}function M(e,t,r="unknown"){let s=r;return d.__(e,((e,r)=>{if(t===e)return s=r,!1})),s}function P(e,t){return 1===e?M(u.n1,t):0===e?M(u._R,t):3===e?M(u.Xp,t):"unknown"}function C(e){return M(u.iW,e)}function E(e,t){switch(e){case 86018:return A.uF[t]||"LC";case 86017:return _.He[t]||"Layer3";case 27:return v.tZ[t]||"High";case 173:return w.dT[t]||"Main";case 225:return y.zk[t]||"Main";case 167:return b.wN[t]||"Profile0"}}function T(e,t){let r="";return e.forEach(((e,s)=>{if(e instanceof h.oD){const t=[];for(let r=0;r<e.streams.length;r++){const s=e.streams[r];t.push({index:s.index,id:s.id,codecpar:s.codecpar[n.o9],nbFrames:s.nbFrames,metadata:s.metadata,duration:s.duration,startTime:s.startTime,disposition:s.disposition,timeBase:s.timeBase})}e={metadata:e.metadata,format:e.format,chapters:e.chapters,streams:t}}r+=function(e,t,r){let s=`${r.tag} #${t}, ${r.isLive?"live":"vod"}, ${M(u.iW,e.format)}, from '${r.from}':\n`;i()(e.metadata).length&&(s+="  Metadata:\n",d.__(e.metadata,((e,t)=>{l.Ik(e)&&l.YO(e)||(s+=`    ${t}: ${e}\n`)})));let n=BigInt(0),h=BigInt(0),m=-BigInt(1);return e.streams.forEach((e=>{const t=(0,f.k)(e.duration,e.timeBase,p.i0),r=(0,f.k)(e.startTime,e.timeBase,p.i0);t>n&&(n=t),(r<m||m===-BigInt(1))&&(m=r),h+=o.f[17](e.codecpar+32)})),s+=`  Duration: ${x(n)}, start: ${x(m)}, bitrate: ${I(h)}\n`,e.streams.forEach(((e,r)=>{s+=function(e,t,r){const s=M(u.Mb,o.f[15](e.codecpar)),n=[];if(1===o.f[15](e.codecpar)){const t=E(o.f[15](e.codecpar+4),o.f[15](e.codecpar+48)),r=M(u.n1,o.f[15](e.codecpar+4));n.push(`${r}${t?` (${t})`:""}`),n.push(`${o.f[15](e.codecpar+136)} Hz`);let s=`${o.f[15](e.codecpar+116)} channels`;1===o.f[15](e.codecpar+116)?s="mono":2===o.f[15](e.codecpar+116)&&(s="stereo"),n.push(s),n.push(M(u.Sz,o.f[15](e.codecpar+28))),o.f[17](e.codecpar+32)>BigInt(0)&&n.push(`${I(o.f[17](e.codecpar+32))}`)}else if(0===o.f[15](e.codecpar)){const t=E(o.f[15](e.codecpar+4),o.f[15](e.codecpar+48)),r=M(u._R,o.f[15](e.codecpar+4));if(n.push(`${r}${t?` (${t})`:""}`),o.f[15](e.codecpar+28)!==p.N_){const t=M(u.qO,o.f[15](e.codecpar+28)),r=M(u.mX,o.f[15](e.codecpar+84),"tv"),s=M(u._m,o.f[15](e.codecpar+96),"bt709"),i=M(u.Eh,o.f[15](e.codecpar+88),"bt709"),a=M(u.d8,o.f[15](e.codecpar+92),"bt709"),c=(0,k.A)(e.codecpar);s===i&&i===a?n.push(`${t}(${r}, ${s}, ${c?"HDR":"SDR"})`):n.push(`${t}(${r}, ${s}/${i}/${a}, ${c?"HDR":"SDR"})`)}const s={num:o.f[15](e.codecpar+56)*o.f[15](e.codecpar+64),den:o.f[15](e.codecpar+60)*o.f[15](e.codecpar+68)};(0,f.iU)(s),n.push(`${o.f[15](e.codecpar+56)}x${o.f[15](e.codecpar+60)} [SAR: ${o.f[15](e.codecpar+64)}:${o.f[15](e.codecpar+68)} DAR ${s.num}:${s.den}]`),o.f[17](e.codecpar+32)>BigInt(0)&&n.push(`${I(o.f[17](e.codecpar+32))}`),(0,f.lb)((0,c.A)(e.codecpar+72,a.P))>0&&(n.push(`${(0,f.lb)((0,c.A)(e.codecpar+72,a.P)).toFixed(2)} fps`),n.push(`${(0,f.lb)((0,c.A)(e.codecpar+72,a.P)).toFixed(2)} tbr`)),n.push(`${h=BigInt(Math.floor((0,f.lb)({num:e.timeBase.den,den:e.timeBase.num}))),h<BigInt(1e4)?(0,g.A)(Number(BigInt.asIntN(32,h))):Number(BigInt.asIntN(32,h/BigInt(1e3)))+"k"} tbn`)}else if(3===o.f[15](e.codecpar)){const t=M(u.Xp,o.f[15](e.codecpar+4));n.push(t),o.f[17](e.codecpar+32)>BigInt(0)&&n.push(`${I(o.f[17](e.codecpar+32))}`)}else o.f[17](e.codecpar+32)>BigInt(0)&&n.push(`${I(o.f[17](e.codecpar+32))}`);var h;let m="";e.disposition&&(m=" ",1&e.disposition&&(m+=`(${M(u.Ki,1)}) `),2&e.disposition&&(m+=`(${M(u.Ki,2)}) `),4&e.disposition&&(m+=`(${M(u.Ki,4)}) `),8&e.disposition&&(m+=`(${M(u.Ki,8)}) `),16&e.disposition&&(m+=`(${M(u.Ki,16)}) `),32&e.disposition&&(m+=`(${M(u.Ki,32)}) `),64&e.disposition&&(m+=`(${M(u.Ki,64)}) `),128&e.disposition&&(m+=`(${M(u.Ki,128)}) `),256&e.disposition&&(m+=`(${M(u.Ki,256)}) `),512&e.disposition&&(m+=`(${M(u.Ki,512)}) `),1024&e.disposition&&(m+=`(${M(u.Ki,1024)}) `),2048&e.disposition&&(m+=`(${M(u.Ki,2048)}) `),65536&e.disposition&&(m+=`(${M(u.Ki,65536)}) `),131072&e.disposition&&(m+=`(${M(u.Ki,131072)}) `),262144&e.disposition&&(m+=`(${M(u.Ki,262144)}) `),524288&e.disposition&&(m+=`(${M(u.Ki,524288)}) `),1048576&e.disposition&&(m+=`(${M(u.Ki,1048576)}) `));let A=`${r}Stream #${t}:${e.index} ${s}: ${n.join(", ")}${m}\n`;return i()(e.metadata).length&&(A+=`${r}  Metadata:\n`,d.__(e.metadata,((t,s)=>{l.Ik(t)||l.YO(t)?"matrix"===s&&0===o.f[15](e.codecpar)&&(A+=`${r}    ${s}: [${t.toString()}]\n`):A+=`${r}    ${s}: ${t}\n`}))),A}(e,t,"  ")})),s}(e,s,t[s])})),r}},51597:(e,t,r)=>{"use strict";r.d(t,{A:()=>i,E:()=>n});var s=r(134);class i{constructor(){(0,s.A)(this,"type",-1)}async destroy(e){}}const n={15:[86018],10:[86017,86019,86018,12,27],17:[86028],0:[86017,86018,86051,69645,86049,65543,65542,12,27,173,225,167,196],5:[139,167],8:[86021,86076,86018,86017,86028,86032,86020,86056,86019,65557,65537,65536,139,167,225,27,173,196,12,30,94226,94212,94230,94210,94225],9:[86021,86076,139,167,225,94226],1:[86021,86076,86018,86017,86028,86051,86019,86056,167,225,27,173,196,12,94226,94213],14:[86017],2:[86076,86018,86017,86019,,86020,86065,86056,12,225,27,173,196],3:[86058,86016,86017,86019,,86020,2,12,27,173,196],4:[86021,86076,86028,86051],16:[],18:[94226],20:[94230,94212],19:[94225],21:[94232],11:[27],12:[173],13:[196],6:[86076,86018,86017,65543,65542,2,12,27,173,139,167,225],7:[86017,86018,86051,69645,86049,65543,65542,12,27,173,225,167,196]}},31425:(e,t,r)=>{"use strict";r.d(t,{$:()=>o});var s=r(77231),i=r(72739),n=r(44328);function o(e){let t=!0;return i.__(e.streams,(e=>{switch(e.codecpar.codecType){case 1:e.codecpar.chLayout.nbChannels!==s.N_&&e.codecpar.sampleRate!==s.N_&&e.codecpar.frameSize!==s.N_&&e.codecpar.bitrate!==BigInt(0)||(t=!1);break;case 0:0!==(0,n.lb)(e.codecpar.framerate)&&e.codecpar.width!==s.N_&&e.codecpar.height!==s.N_&&e.codecpar.bitrate!==BigInt(0)||(t=!1),27!==e.codecpar.codecId&&173!==e.codecpar.codecId&&196!==e.codecpar.codecId&&12!==e.codecpar.codecId||e.codecpar.profile!==s.N_&&e.codecpar.level!==s.N_||(t=!1)}})),t}},55680:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var s=r(72739);function i(e){if(e.length<2)return 0;const t=e.slice().sort(((e,t)=>e>t?1:-1));let r=0,i=0,n=[];for(let o=0;o<e.length;o++){for(s._(n,e[o],(t=>t<e[o]?1:-1));n.length&&n[0]===t[i];)n.shift(),i++;r=Math.max(r,n.length)}return r}},89478:(e,t,r)=>{"use strict";function s(e,t){if(t.length<e)return t.slice().sort(((e,t)=>e>t?1:-1));const r=[],s=t.slice().sort(((e,t)=>e>t?1:-1));if(e){const t=s[s.length-1]-s[s.length-2];for(let i=e;i>0;i--)r.push((r.length?r[r.length-1]:BigInt(0))+(i>=s.length?t:s[i]-s[i-1]));r.reverse()}const i=[];for(let t=0;t<e;t++)i.push(s[0]-r[t]);return i.concat(s)}r.d(t,{A:()=>s})},31633:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var s=r(44328);const i=399;function n(e){return e<360?1001*(e+1):(e-=360)<30?1001*(e+31)*12:(e-=30)<3?1001*[80,120,240][e]*12:1e3*[24,30,60,12,15,48][e-=3]*12}function o(e){let t=0,r=.01;for(let o=0;o<i;o++){const i=Math.abs((0,s.lb)(e)/(0,s.lb)({num:n(o),den:12012})-1);i<r&&(r=i,t=n(o))}if(t){const r={num:t,den:12012};(0,s.iU)(r),e.num=r.num,e.den=r.den}}},92174:(e,t,r)=>{"use strict";r.d(t,{XA:()=>v,bX:()=>y,bx:()=>A,dJ:()=>w,ho:()=>g});var s=r(80662),i=r.n(s),n=r(63939),o=r(50932),a=r(95335),c=r(4624),h=r(51597),d=r(72739),u=r(9705),l=r(548),f=r(77231);const p="src/avformat/mux.ts",m={zeroStart:!1,nonnegative:!1};function g(e,t={}){const r=a.X$({},m,t);e.ioWriter||c.h2("need ioWriter",p,56),e.oformat||c.h2("need oformat",p,59),e.options=r,e.privateData2={firstPts:new(i()),firstDts:new(i())};let s=h.E[e.oformat.type];if(s)for(let t=0;t<e.streams.length;t++){const r=e.streams[t].codecpar.codecId,i=e.streams[t].codecpar.codecType;if(16===e.oformat.type){if(r<65536||r>69683)return c.z3(`format ${(0,l.L_)(e.oformat.type)} not support codecId ${(0,l.eG)(e.streams[t].codecpar.codecType,r)}`,p,77),u.r8}else if(2!==i&&4!==i&&!d.zy(s,r))return c.z3(`format ${(0,l.L_)(e.oformat.type)} not support codecId ${(0,l.eG)(e.streams[t].codecpar.codecType,r)}`,p,85),u.r8}return e.oformat.init(e)}function A(e){return e.oformat.writeHeader(e),0}function v(e,t){const r=e.privateData2;return r.firstDts.has(n.f[15](t+32))||r.firstDts.set(n.f[15](t+32),n.f[17](t+16)===f.Dh?BigInt(0):n.f[17](t+16)),r.firstPts.has(n.f[15](t+32))||r.firstPts.set(n.f[15](t+32),n.f[17](t+8)===f.Dh?BigInt(0):n.f[17](t+8)),e.options.zeroStart?(o.M[17](t+16,n.f[17](t+16)-r.firstDts.get(n.f[15](t+32))),o.M[17](t+8,n.f[17](t+8)-r.firstPts.get(n.f[15](t+32)))):e.options.nonnegative&&(r.firstDts.get(n.f[15](t+32))<0&&o.M[17](t+16,n.f[17](t+16)-r.firstDts.get(n.f[15](t+32))),r.firstPts.get(n.f[15](t+32))<0&&o.M[17](t+8,n.f[17](t+8)-r.firstPts.get(n.f[15](t+32)))),e.oformat.writeAVPacket(e,t)}function w(e){return e.oformat.writeTrailer(e),0}function y(e){e.oformat.flush(e)}},49847:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});class s{constructor(){}get ext(){throw new Error("need implemented ext getter")}get flags(){return 0}get name(){return"CustomIOLoader."+Math.random()}get minBuffer(){return 4}write(e){throw new Error("need implemented write function")}}},77580:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var s=r(134),i=r(29967),n=r.n(i),o=r(13724),a=r(82800),c=r(95335),h=r(4624),d=r(9705);const u="src/avnetwork/ioLoader/FetchIOLoader.ts";class l extends a.A{constructor(e={}){super(e),(0,s.A)(this,"contentLength",void 0),(0,s.A)(this,"receivedLength",void 0),(0,s.A)(this,"info",void 0),(0,s.A)(this,"range",void 0),(0,s.A)(this,"startBytes",void 0),(0,s.A)(this,"endBytes",void 0),(0,s.A)(this,"eofIndex",void 0),(0,s.A)(this,"abortController",void 0),(0,s.A)(this,"reader",void 0),(0,s.A)(this,"buffers",void 0),(0,s.A)(this,"supportRange",void 0)}async getTotalSize(e,t={}){var r,s,i;const o={method:e,headers:{},mode:"cors",cache:"default",referrerPolicy:"no-referrer-when-downgrade"};null!==(r=this.info.httpOptions)&&void 0!==r&&r.headers&&c.__(this.info.httpOptions.headers,((e,t)=>{o.headers[t]=e})),c.__(t,((e,t)=>{o.headers[t]=e})),null!==(s=this.info.httpOptions)&&void 0!==s&&s.credentials&&(o.credentials=this.info.httpOptions.credentials),null!==(i=this.info.httpOptions)&&void 0!==i&&i.referrerPolicy&&(o.referrerPolicy=this.info.httpOptions.referrerPolicy),"function"==typeof AbortController&&(this.abortController=new AbortController,o.signal=this.abortController.signal);try{const e=await fetch(this.info.url,o);if(e.ok&&e.status>=200&&e.status<=299){this.abortController&&(this.abortController.abort(),this.abortController=null);const t=e.headers.get("Accept-Ranges");t&&-1===t.indexOf("bytes")&&(this.supportRange=!1);const r=e.headers.get("Content-Range");if(r){const e=r.split("/")[1];if(e)return n()(e)}const s=e.headers.get("X-Content-Length")||e.headers.get("Content-Length");if(null!=s)return n()(s)}}catch(e){}return 0}async open(e,t){var r;if(this.info=e,this.range=t,this.range.to||(this.range.to=-1),this.range.from=Math.max(this.range.from,0),this.eofIndex<0&&(this.eofIndex=t.to),this.startBytes=0,this.endBytes=-1,this.receivedLength=0,this.buffers=[],this.supportRange=!0,this.range&&!this.options.isLive&&(this.startBytes=null!==(r=this.range.from)&&void 0!==r?r:0),this.status=1,!this.options.isLive&&!this.options.disableSegment){let e=await this.getTotalSize("HEAD");e||(e=await this.getTotalSize("Get",{range:"bytes=0-1"})),e<=2&&(e=0),e?(this.contentLength=e,this.range.to<0&&(this.eofIndex=this.contentLength+this.range.to),this.supportRange&&(this.endBytes=Math.min(this.startBytes+this.options.preload-1,this.eofIndex))):this.endBytes=-1}return this.status=2,0}async openReader(){var e,t,r;const s={method:"GET",headers:{},mode:"cors",cache:"default",referrerPolicy:"no-referrer-when-downgrade"};null!==(e=this.info.httpOptions)&&void 0!==e&&e.headers&&c.__(this.info.httpOptions.headers,((e,t)=>{s.headers[t]=e})),this.options.isLive||this.options.disableSegment||(s.headers.range=`bytes=${this.startBytes}-${this.endBytes>0?this.endBytes:""}`),null!==(t=this.info.httpOptions)&&void 0!==t&&t.credentials&&(s.credentials=this.info.httpOptions.credentials),null!==(r=this.info.httpOptions)&&void 0!==r&&r.referrerPolicy&&(s.referrerPolicy=this.info.httpOptions.referrerPolicy),this.abortController&&this.abortController.abort(),"function"==typeof AbortController&&(this.abortController=new AbortController,s.signal=this.abortController.signal);try{const e=await fetch(this.info.url,s);e.ok&&e.status>=200&&e.status<=299?this.reader=e.body.getReader():(this.status=3,h.h2(`FetchStreamLoader: Http code invalid, ${e.status} ${e.statusText}`,u,233))}catch(e){if(this.retryCount<this.options.retryCount&&(!this.options.isLive||!this.receivedLength))return this.retryCount++,this.status=1,await new o.A(this.options.retryInterval),this.openReader();h.h2(`FetchStreamLoader: exception ${e.message}`,u,246)}}async readInterval(e,t=0){let r=0;for(;this.buffers.length&&r<e.length;){const t=this.buffers.shift();t.length>e.length-r?(e.set(t.subarray(0,e.length-r),r),this.buffers.unshift(t.subarray(e.length-r)),r=e.length):(e.set(t,r),r+=t.length)}if(r>=e.length)return e.length+t;if(4===this.status)return r>0?r+t:t>0?t:-1048576;this.reader||await this.openReader();const{value:s,done:i}=await this.reader.read();return i?null!==this.contentLength&&this.receivedLength+this.range.from<this.endBytes+1?(this.status=3,void h.h2("Fetch stream meet Early-EOF",u,285)):this.options.isLive||this.options.disableSegment||this.receivedLength+this.range.from>=this.eofIndex?(this.status=4,this.startBytes=0,r>0?r+t:t>0?t:-1048576):(await this.reader.cancel(),this.abortController&&(this.abortController.abort(),this.abortController=null),this.reader=null,this.startBytes=this.endBytes+1,this.endBytes=Math.min(this.startBytes+this.options.preload-1,this.eofIndex),this.readInterval(e.subarray(r),r)):(this.receivedLength+=s.length,s.length>e.length-r?(e.set(s.subarray(0,e.length-r),r),this.buffers.push(s.subarray(e.length-r)),e.length+t):(e.set(s,r),r+=s.length,r+t))}async read(e){return this.readInterval(e)}async seek(e){return this.supportRange?(await this.abort(),this.receivedLength=Number(e)-this.range.from,this.startBytes=Number(e),this.options.disableSegment||(this.endBytes=Math.min(this.startBytes+this.options.preload,this.eofIndex)),this.buffers.length=0,4===this.status&&(this.status=2),0):d.NU}async size(){return this.options.isLive?BigInt(0):BigInt(Math.floor(this.contentLength||0))}async abort(){this.reader&&(await this.reader.cancel(),this.abortController&&(this.abortController.abort(),this.abortController=null),this.reader=null)}async stop(){await this.abort(),this.status=0}getUrl(){var e;return null===(e=this.info)||void 0===e?void 0:e.url}}},79686:(e,t,r)=>{"use strict";r.d(t,{A:()=>h});var s=r(134),i=r(54001),n=r.n(i),o=r(82800);const a=r(67672).Pc(Blob.prototype.arrayBuffer),c="function"==typeof FileReaderSync;class h extends o.A{constructor(...e){super(...e),(0,s.A)(this,"info",void 0),(0,s.A)(this,"range",void 0),(0,s.A)(this,"readPos",void 0),(0,s.A)(this,"endPos",void 0),(0,s.A)(this,"reader",void 0),(0,s.A)(this,"readerResolve",void 0)}async open(e,t){return this.info=e,this.range=t,this.readPos=0,this.endPos=this.info.file.size,t.from>0&&(this.readPos=t.from),t.to>0&&(this.endPos=t.to),this.status=2,0}readBufferByReaderSync(e){return this.reader||(this.reader=new FileReaderSync),this.reader.readAsArrayBuffer(this.info.file.slice(this.readPos,this.readPos+e))}async readBufferByReader(e){return this.reader||(this.reader=new FileReader,this.reader.onloadend=e=>{this.readerResolve&&this.readerResolve(e.target.result)}),new(n())((t=>{this.readerResolve=t,this.reader.readAsArrayBuffer(this.info.file.slice(this.readPos,this.readPos+e))}))}async read(e){if(this.readPos>=this.endPos)return this.status=4,-1048576;const t=Math.min(e.length,this.endPos-this.readPos);return c?e.set(new Uint8Array(this.readBufferByReaderSync(t)),0):a?e.set(new Uint8Array(await this.info.file.slice(this.readPos,this.readPos+t).arrayBuffer()),0):e.set(new Uint8Array(await this.readBufferByReader(t)),0),this.readPos+=t,this.readPos>=this.endPos&&(this.status=4),t}async seek(e){return this.readPos=Number(e),4===this.status&&(this.status=2),0}async size(){return BigInt(Math.floor(this.info.file.size))}async stop(){this.status=0}}},82800:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var s=r(134),i=r(95335);const n={isLive:!1,preload:5242880,retryCount:20,retryInterval:1};class o{constructor(e={}){(0,s.A)(this,"options",void 0),(0,s.A)(this,"status",void 0),(0,s.A)(this,"retryCount",void 0),(0,s.A)(this,"retryTimeout",void 0),this.options=e,this.status=0,this.retryCount=0,this.options=i.X$({},n),i.X$(this.options,e)}write(e){throw new Error("need implemented write function")}}},36773:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var s=r(134),i=r(54001),n=r.n(i),o=r(82800);class a extends o.A{constructor(e={}){super(e),(0,s.A)(this,"readQueue",void 0),(0,s.A)(this,"consume",void 0),this.readQueue=[]}async readInterval(e,t=0){let r=0;for(;this.readQueue.length&&r<e.length;){const t=this.readQueue.shift();t.length>e.length-r?(e.set(t.subarray(0,e.length-r),r),this.readQueue.unshift(t.subarray(e.length-r)),r=e.length):(e.set(t,r),r+=t.length)}return r>0||t?r+t:4===this.status||0===this.status?r>0?r+t:t>0?t:-1048576:3===this.status?r>0?r+t:t>0?t:-1048573:(await new(n())((e=>{this.consume=e})),this.consume=null,this.readInterval(e,t))}async read(e){return this.readInterval(e)}async write(e){return this.send(e)}}},14619:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var s=r(134),i=r(54001),n=r.n(i),o=r(36773);class a extends o.A{constructor(...e){super(...e),(0,s.A)(this,"info",void 0),(0,s.A)(this,"socket",void 0)}async send(e){return this.socket?(this.socket.send(e.slice()),0):-1048574}open(e){return this.info=e,this.status=1,new(n())((t=>{this.socket=new WebSocket(e.url),this.socket.binaryType="arraybuffer",this.socket.onopen=()=>{this.status=2,t(0)},this.socket.onerror=()=>{this.status=3,t(-1048573),this.consume&&this.consume()},this.socket.onmessage=e=>{let t=e.data;this.readQueue.push(new Uint8Array(t)),this.consume&&this.consume()}}))}seek(e,t){throw new Error("Method not implemented.")}size(){throw new Error("Method not implemented.")}async stop(){this.socket&&(this.socket.close(),this.socket=null),this.status=4,this.consume&&this.consume()}}},42383:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var s=r(134),i=r(54001),n=r.n(i),o=r(36773);class a extends o.A{constructor(...e){super(...e),(0,s.A)(this,"info",void 0),(0,s.A)(this,"transport",void 0),(0,s.A)(this,"datagramReader",void 0),(0,s.A)(this,"reader",void 0),(0,s.A)(this,"datagramWriter",void 0),(0,s.A)(this,"writer",void 0),(0,s.A)(this,"stream",void 0),(0,s.A)(this,"readPacketQueue",void 0),(0,s.A)(this,"consumePacket",void 0)}async send(e){return this.writer?(this.writer.write(e.slice()),0):-1048574}async handleRead(){let e=!1;for(;;)try{const{value:t,done:r}=await this.reader.read();if(r){e=r;break}this.readQueue.push(t)}catch(t){e||(this.status=3,this.consume&&this.consume());break}}async readDatagram(){let e=!1;for(;;)try{const{value:t,done:r}=await this.datagramReader.read();if(r){e=!0;break}this.readPacketQueue.push(t)}catch(t){e||(this.status=3,this.consumePacket&&this.consumePacket());break}}async open(e){return this.info=e,this.transport=new WebTransport(e.url,e.webtransportOptions),this.readPacketQueue=[],this.status=1,await this.transport.ready,this.transport.closed.then((()=>{this.transport?this.status=3:this.status=4})),this.status=2,this.stream=await this.transport.createBidirectionalStream(),this.reader=this.stream.readable.getReader(),this.writer=this.stream.writable.getWriter(),this.datagramReader=this.transport.datagrams.readable.getReader(),this.datagramWriter=this.transport.datagrams.writable.getWriter(),this.handleRead(),this.readDatagram(),0}async readPacket(e){for(;;){if(this.readPacketQueue.length){const t=this.readPacketQueue.shift();return e.set(t,0),t.length}if(4===this.status||0===this.status)return-1048576;if(3===this.status)return-1048573;await new(n())((e=>{this.consumePacket=e})),this.consumePacket=null}}async writePacket(e){return this.datagramWriter?(this.datagramWriter.write(e.slice()),0):-1048574}seek(e,t){throw new Error("Method not implemented.")}size(){throw new Error("Method not implemented.")}async stop(){this.transport&&(this.transport.close(),this.transport=null),this.status=4,this.consume&&this.consume()}}},18667:(e,t,r)=>{"use strict";r.d(t,{A:()=>P});var s=r(54001),i=r.n(s),n=r(63939),o=r(50932),a=r(12264),c=r(29170),h=r(44527),d=r(9705),u=r(84149),l=r(75742),f=r(4624),p=r(16041),m=(r(77162),r(77104)),g=r(84290),A=r(72739),v=r(86932),w=r(36204),y=r(94561),b=r(72703),_=r(71762),k=r(37837),x=r(71766),I=r(67672);const M="src/avpipeline/AudioDecodePipeline.ts";class P extends h.A{constructor(){super()}createWebcodecDecoder(e){return new m.A({onError:t=>{f.z3(`audio decode error, taskId: ${e.taskId}, error: ${t}`,M,88)},onReceiveAudioData(t){const r=(0,w.t)(t,e.avframePool.alloc());e.frameCaches.push(r),o.M[17](e.stats+56,n.f[17](e.stats+56)+BigInt(1)),o.M[15](e.stats+248,Math.max((0,v.A)()-e.lastDecodeTimestamp,n.f[15](e.stats+248))),t.close()}})}createWasmcodecDecoder(e,t){return new l.A({resource:t,onReceiveAVFrame(t){e.frameCaches.push(t),o.M[17](e.stats+56,n.f[17](e.stats+56)+BigInt(1)),o.M[15](e.stats+248,Math.max((0,v.A)()-e.lastDecodeTimestamp,n.f[15](e.stats+248)))},avframePool:e.avframePool})}async pullAVPacketInternal(e,t){const r=await t.request("pull");if(I.ai(r)||(0,b.A)(r))return r;{const t=e.avpacketPool.alloc();return(0,_.r0)(r,t),t}}async createTask(e){const t=new u.Ay(e.leftPort),r=new u.Ay(e.rightPort),s=[],i=new p.A((0,c.A)(e.avframeList,a.A),e.avframeListMutex),h={...e,resource:await(0,y.A)(e.resource),frameCaches:s,inputEnd:!1,decoder:null,parameters:0,lastDecodeTimestamp:0,avframePool:i,avpacketPool:new g.A((0,c.A)(e.avpacketList,a.A),e.avpacketListMutex)};return h.resource?h.decoder=this.createWasmcodecDecoder(h,h.resource):h.decoder=this.createWebcodecDecoder(h),this.tasks.set(e.taskId,h),r.on(u.S3,(async i=>{switch(i.method){case"pull":if(s.length){const e=s.shift();r.reply(i,e);break}if(!h.inputEnd){for(;;){if(s.length){const e=s.shift();r.reply(i,e);break}h.lastDecodeTimestamp=(0,v.A)();const a=await this.pullAVPacketInternal(h,t);if(-1048576===a){if(await h.decoder.flush(),h.inputEnd=!0,s.length){const e=s.shift();r.reply(i,e);break}f.pq(`audio decoder ended, taskId: ${h.taskId}`,M,191),r.reply(i,-1048576);break}if(!(a>0)){f.z3(`audio decode pull avpacket error, taskId: ${e.taskId}, ret: ${a}`,M,209),r.reply(i,a);break}{const t=h.decoder.decode(a);h.avpacketPool.release(a),t<0&&(o.M[15](h.stats+48,n.f[15](h.stats+48)+1),f.z3(`audio decode error, taskId: ${e.taskId}, ret: ${t}`,M,204))}}break}r.reply(i,-1048576)}})),0}async open(e,t,r={}){const s=this.tasks.get(e);if(s){s.wasmDecoderOptions=r;const e=(0,k.Gy)(168);return(0,b.A)(t)?(0,x.Yi)(e,t):(0,_.T8)(t,e),s.parameters&&(0,x.dn)(s.parameters),s.parameters=e,new(i())((async(t,r)=>{const i=await s.decoder.open(e,s.wasmDecoderOptions);if(i)return f.z3(`open audio decoder failed, error: ${i}`,M,243),void t(d.r8);t(0)}))}f.h2("task not found",M,250)}async reopenDecoder(e,t,r,s){const n=this.tasks.get(e);if(n){s&&(n.wasmDecoderOptions=s);const e=(0,k.Gy)(168);let o;return(0,b.A)(t)?(0,x.Yi)(e,t):(0,_.T8)(t,e),n.parameters&&(0,x.dn)(n.parameters),n.parameters=e,r?(r=await(0,y.A)(r),o=this.createWasmcodecDecoder(n,r)):o=this.createWebcodecDecoder(n),new(i())((async(t,s)=>{const i=await o.open(e);if(i)return f.z3(`reopen audio decoder failed, error: ${i}`,M,286),void t(d.r8);r&&(n.resource=r),n.decoder.close(),n.decoder=o,f.Yz(`reopen audio decoder, taskId: ${n.taskId}`,M,296),t(0)}))}f.h2("task not found",M,300)}async resetTask(e){const t=this.tasks.get(e);t&&(t.decoder&&await t.decoder.flush(),A.__(t.frameCaches,(e=>{t.avframePool.release(e)})),t.frameCaches.length=0,t.inputEnd=!1,t.lastDecodeTimestamp=(0,v.A)(),f.pq(`reset audio decoder, taskId: ${t.taskId}`,M,316))}async registerTask(e){return this.tasks.has(e.taskId)?d.lh:this.createTask(e)}async unregisterTask(e){const t=this.tasks.get(e);t&&(t.rightPort.close(),t.leftPort.close(),t.decoder.close(),t.frameCaches.forEach((e=>{t.avframePool.release(e)})),t.parameters&&(0,x.dn)(t.parameters),this.tasks.delete(e))}}},68175:(e,t,r)=>{"use strict";r.d(t,{A:()=>_});var s=r(54001),i=r.n(s),n=r(63939),o=r(50932),a=r(12264),c=r(29170),h=r(44527),d=r(21910),u=r(72308),l=r(16041),f=r(84149),p=r(84290),m=r(4624),g=r(72739),A=r(9705),v=r(13724),w=r(72703),y=r(94561);const b="src/avpipeline/AudioEncodePipeline.ts";class _ extends h.A{constructor(){super()}createWebcodecEncoder(e){return new u.A({onError:t=>{m.z3(`audio encode error, taskId: ${e.taskId}, error: ${t}`,b,79)},onReceiveAVPacket(t){e.avpacketCaches.push(t),o.M[17](e.stats+64,n.f[17](e.stats+64)+BigInt(1))},avpacketPool:e.avpacketPool,avframePool:e.avframePool})}async createTask(e){const t=new f.Ay(e.leftPort),r=new f.Ay(e.rightPort),s=[],i=new p.A((0,c.A)(e.avpacketList,a.A),e.avpacketListMutex),h={...e,resource:await(0,y.A)(e.resource),avpacketCaches:s,encoder:null,inputEnd:!1,parameters:0,avframePool:new l.A((0,c.A)(e.avframeList,a.A),e.avframeListMutex),avpacketPool:i};return h.resource?h.encoder=new d.A({resource:h.resource,onReceiveAVPacket(e){h.avpacketCaches.push(e),o.M[17](h.stats+64,n.f[17](h.stats+64)+BigInt(1))},avpacketPool:i}):h.encoder=this.createWebcodecEncoder(h),this.tasks.set(e.taskId,h),r.on(f.S3,(async i=>{switch(i.method){case"pull":if(s.length){const e=s.shift();r.reply(i,e);break}if(!h.inputEnd){for(;;){if(s.length){const e=s.shift();r.reply(i,e);break}const a=await t.request("pull");if(!((0,w.A)(a)||a instanceof AudioData)){if(-1048576===a){if(await h.encoder.flush(),h.inputEnd=!0,s.length){const e=s.shift();r.reply(i,e);break}m.pq(`audio encoder ended, taskId: ${h.taskId}`,b,179),r.reply(i,-1048576);break}m.z3(`audio encoder pull avpacket error, taskId: ${e.taskId}, ret: ${a}`,b,185),r.reply(i,a);break}{const t=h.encoder.encode(a);if((0,w.A)(a)?h.avframePool.release(a):a.close(),t<0){o.M[15](h.stats+52,n.f[15](h.stats+52)+1),m.z3(`audio encode error, taskId: ${e.taskId}, ret: ${t}`,b,157),r.reply(i,t);break}for(;h.encoder instanceof u.A&&h.encoder.getQueueLength()>4;)await new v.A(0)}}break}m.pq(`audio encoder ended, taskId: ${h.taskId}`,b,193),r.reply(i,-1048576)}})),0}async open(e,t,r,s={}){const n=this.tasks.get(e);if(n)return n.wasmEncoderOptions=s,new(i())((async(e,s)=>{const i=await n.encoder.open(t,r,n.wasmEncoderOptions);if(i)return m.z3(`open audio encoder failed, error: ${i}`,b,210),void e(A.r8);n.parameters=t,e(0)}));m.h2("task not found",b,218)}async getExtraData(e){const t=this.tasks.get(e);if(t)return t.encoder.getExtraData();m.h2("task not found",b,226)}async resetTask(e){const t=this.tasks.get(e);t&&(t.encoder&&await t.encoder.flush(),g.__(t.avpacketCaches,(e=>{t.avpacketPool.release(e)})),t.avpacketCaches.length=0,t.inputEnd=!1,m.pq(`reset audio encoder, taskId: ${t.taskId}`,b,241))}async registerTask(e){return this.tasks.has(e.taskId)?A.lh:this.createTask(e)}async unregisterTask(e){const t=this.tasks.get(e);t&&(t.rightPort.close(),t.leftPort.close(),t.encoder.close(),t.avpacketCaches.forEach((e=>{t.avpacketPool.release(e)})),this.tasks.delete(e))}}},72480:(e,t,r)=>{"use strict";r.d(t,{A:()=>W});var s=r(80662),i=r.n(s),n=r(61499),o=r(12264),a=r(29170),c=r(63939),h=r(50932),d=(r(9599),r(44527)),u=r(9705),l=r(84149),f=r(44315),p=r(24175),m=r(34531),g=r(75),A=r(37837),v=r(79630),w=r(4624),y=r(84290),b=r(39148),_=r(72739),k=r(44328),x=r(77231),I=r(43607),M=r(71517),P=r(14686),C=r(49032),E=r(94561),T=r(39638),B=r(26429),S=r(71762),U=r(72703),D=r(67672),L=r(62815),R=r(67659),$=r(59166),F=r(95797);const z="src/avpipeline/DemuxPipeline.ts",O=-1;class W extends d.A{constructor(){super()}createTask(e){let t,r;if(e.mainTaskId){const s=this.tasks.get(e.mainTaskId);t=s.leftIPCPort,r=s.controlIPCPort}else t=new l.Ay(e.leftPort),e.controlPort&&(r=new l.Ay(e.controlPort));const s=e.bufferLength||1048576,n=(0,A.sY)(s);if(!n)return u.gR;const c=(0,A.sY)(s);if(!c)return u.gR;const h=new v.A(n,s),d=new p.A(s,!0,h),g=new v.A(c,s),w=new m.A(s,!0,g);e.isLive||(d.flags|=1),e.flags&&(d.flags|=e.flags),d.onFlush=async r=>{const s={pointer:r.byteOffset,length:r.length};e.ioloaderOptions&&(s.ioloaderOptions=e.ioloaderOptions);try{const e=await t.request("read",s);return D.ai(e)?e:((0,P.lW)(s.pointer,e.length,e),e.length)}catch(e){return-1048574}},d.onSeek=async r=>{try{const s={pos:r};return e.ioloaderOptions&&(s.ioloaderOptions=e.ioloaderOptions),t.request("seek",s)}catch(e){return-1048574}},d.onSize=async()=>{try{return t.request("size")}catch(e){return BigInt(-1048574)}},w.onFlush=async e=>{const r={pointer:e.byteOffset,length:e.length};try{return await t.request("write",r)}catch(e){return-1048574}};const b=(0,f.Xv)();return b.ioReader=d,b.ioWriter=w,F.A.wasmBaseSupported&&(b.getDecoderResource=async(e,t)=>{if(!r)return;const s=await r.request("getDecoderResource",{codecId:t,mediaType:e});return(0,E.A)(s,0===e)}),this.tasks.set(e.taskId,{...e,leftIPCPort:t,rightIPCPorts:new(i()),controlIPCPort:r,formatContext:b,ioReader:d,iBuffer:n,oBuffer:c,cacheAVPackets:new(i()),cacheRequests:new(i()),streamIndexFlush:new(i()),realFormat:-1,demuxEnded:!1,loop:null,gopCounter:0,lastKeyFramePts:BigInt(0),lastAudioDts:BigInt(0),lastVideoDts:BigInt(0),avpacketPool:new y.A((0,a.A)(e.avpacketList,o.A),e.avpacketListMutex)}),0}async openStream(e,t=3e3){const s=this.tasks.get(e);if(s){let e,i,n=await s.leftIPCPort.request("open");if(n<0)return w.z3(`open ioloader failed, ret: ${n}`,z,295),n;try{6!==s.format?(e=await(0,C.A)(s.ioReader,s.format),s.format=e):e=s.format}catch(e){return u.LR}switch(e){case 0:i=new((await r.e(773).then(r.bind(r,28773))).default)(s.formatOptions);break;case 1:i=new((await Promise.all([r.e(490),r.e(47)]).then(r.bind(r,92047))).default)(s.formatOptions);break;case 2:i=new((await Promise.all([r.e(685),r.e(331)]).then(r.bind(r,59331))).default);break;case 3:i=new((await Promise.all([r.e(685),r.e(855)]).then(r.bind(r,83855))).default);break;case 5:i=new((await r.e(634).then(r.bind(r,16634))).default);break;case 4:i=new((await Promise.all([r.e(888),r.e(118)]).then(r.bind(r,29118))).default);break;case 14:i=new((await r.e(839).then(r.bind(r,6839))).default);break;case 8:case 9:i=new((await r.e(577).then(r.bind(r,34577))).default);break;case 15:i=new((await r.e(94).then(r.bind(r,47094))).default);break;case 17:i=new((await r.e(453).then(r.bind(r,18453))).default);break;case 16:i=new((await r.e(791).then(r.bind(r,3791))).default);break;case 18:i=new((await r.e(611).then(r.bind(r,85611))).default);break;case 19:i=new((await r.e(70).then(r.bind(r,78070))).default);break;case 20:i=new((await r.e(378).then(r.bind(r,47344))).default);break;case 21:i=new((await r.e(854).then(r.bind(r,98854))).default);break;case 11:i=new((await r.e(299).then(r.bind(r,5299))).default)(s.formatOptions);break;case 12:i=new((await r.e(487).then(r.bind(r,85487))).default)(s.formatOptions);break;case 13:i=new((await r.e(808).then(r.bind(r,95808))).default)(s.formatOptions);break;case 6:i=new((await r.e(522).then(r.bind(r,50522))).default)(s.formatOptions);break;default:return w.z3("format not support",z,489),u.E$}return s.realFormat=e,s.formatContext.iformat=i,g.ho(s.formatContext,{maxAnalyzeDuration:t,fastOpen:s.isLive})}w.h2("task not found",z,504)}async getFormat(e){const t=this.tasks.get(e);if(t)return t.realFormat;w.h2("task not found",z,514)}async analyzeStreams(e){const t=this.tasks.get(e);if(t){let e=await g.Ib(t.formatContext);if(e)return e;const r=[];for(let e=0;e<t.formatContext.streams.length;e++){const s=t.formatContext.streams[e];r.push({index:s.index,id:s.id,codecpar:s.codecpar[n.o9],nbFrames:s.nbFrames,metadata:s.metadata,duration:s.duration,startTime:s.startTime,disposition:s.disposition,timeBase:{den:s.timeBase.den,num:s.timeBase.num}})}return{metadata:t.formatContext.metadata,format:t.realFormat,chapters:t.formatContext.chapters,streams:r}}w.h2("task not found",z,554)}replyAVPacket(e,t,r,s){if((0,T.A)()&&!B.USE_THREADS&&(0,U.A)(s)){const i=(0,S.wm)(s),n=[i.data.buffer];return i.sideData.length&&i.sideData.forEach((e=>{n.push(e.data.buffer)})),t.reply(r,i,null,n),void e.avpacketPool.release(s)}t.reply(r,s)}async connectStreamTask(e,t,r){const s=this.tasks.get(e);if(s){const e=new l.Ay(r);s.cacheAVPackets.set(t,[]),e.streamIndex=t,e.on(l.S3,(async t=>{switch(t.method){case"pull":{const r=s.cacheAVPackets.get(e.streamIndex);if(r.length){const i=r.shift();0!==s.stats&&(1===s.formatContext.streams[c.f[15](i+32)].codecpar.codecType?h.M[15](s.stats+32,c.f[15](s.stats+32)-1):0===s.formatContext.streams[c.f[15](i+32)].codecpar.codecType&&h.M[15](s.stats+120,c.f[15](s.stats+120)-1)),this.replyAVPacket(s,e,t,i)}else s.demuxEnded?e.reply(t,-1048576):(s.cacheRequests.set(e.streamIndex,t),s.loop&&s.loop.isStarted()&&s.loop.resetInterval());break}}})),s.rightIPCPorts.set(t,e),w.Yz(`connect stream ${t}, taskId: ${s.taskId}`,z,615)}else w.h2("task not found",z,618)}async changeConnectStream(e,t,r,s=!0){const i=this.tasks.get(e);if(i){if(t===r)return;const e=i.cacheAVPackets.get(r),n=i.rightIPCPorts.get(r),o=i.cacheRequests.get(r);e||w.R8(`oldStreamIndex ${r} not found`,z,635),await i.loop.stopBeforeNextTick(),s?(_.__(e,(e=>{i.avpacketPool.release(e)})),e.length=0):i.streamIndexFlush.set(t,!0),n.streamIndex=t,i.cacheAVPackets.set(t,e),i.rightIPCPorts.set(t,n),i.cacheAVPackets.delete(r),i.rightIPCPorts.delete(r),o&&(i.cacheRequests.set(t,o),i.cacheRequests.delete(r)),s||i.loop.start(),w.Yz(`changed connect stream, new ${t}, old: ${r}, force: ${s}, taskId: ${i.taskId}`,z,667)}else w.h2("task not found",z,670)}async doDemux(e,t){const r=e.avpacketPool.alloc();let s=await g.Cj(e.formatContext,r);if(s){e.avpacketPool.release(r),-1048576!==s&&w.z3(`demux error, ret: ${s}, taskId: ${e.taskId}`,z,800);for(let t of e.cacheRequests.keys())e.cacheAVPackets.get(t).length||(e.rightIPCPorts.get(t).reply(e.cacheRequests.get(t),-1048576),e.cacheRequests.delete(t))}else{const s=c.f[15](r+32);if(0!==e.stats)if(1===e.formatContext.streams[s].codecpar.codecType&&e.cacheAVPackets.has(s)){if(h.M[17](e.stats+24,c.f[17](e.stats+24)+BigInt(1)),h.M[17](e.stats+16,c.f[17](e.stats+16)+BigInt(0|c.f[15](r+28))),c.f[17](e.stats+24)>1&&c.f[17](r+16)>e.lastAudioDts){const t=e.cacheAVPackets.get(s);t&&t.length?h.M[15](e.stats+244,Math.round(c.f[15](r+76)/c.f[15](r+72)/(Number(BigInt.asIntN(32,c.f[17](r+16)-c.f[17](t[0]+16)))/t.length))):h.M[15](e.stats+244,Math.round(c.f[15](r+76)/c.f[15](r+72)/Number(BigInt.asIntN(32,c.f[17](r+16)-e.lastAudioDts))))}e.lastAudioDts=c.f[17](r+16)}else if(0===e.formatContext.streams[s].codecpar.codecType&&e.cacheAVPackets.has(s)){if(h.M[17](e.stats+112,c.f[17](e.stats+112)+BigInt(1)),h.M[17](e.stats+104,c.f[17](e.stats+104)+BigInt(0|c.f[15](r+28))),1&c.f[15](r+36)?(h.M[17](e.stats+176,c.f[17](e.stats+176)+BigInt(1)),c.f[17](e.stats+176)>1&&c.f[17](r+8)>e.lastKeyFramePts&&(h.M[15](e.stats+96,e.gopCounter),e.gopCounter=1,h.M[15](e.stats+92,Number(BigInt.asIntN(32,(0,k.Mr)(c.f[17](r+8)-e.lastKeyFramePts,r+72,x.i0))))),e.lastKeyFramePts=c.f[17](r+8)):e.gopCounter++,c.f[17](e.stats+112)>1&&c.f[17](r+16)>e.lastVideoDts){const t=e.cacheAVPackets.get(s);t&&t.length?h.M[15](e.stats+232,Math.round(c.f[15](r+76)/c.f[15](r+72)/(Number(BigInt.asIntN(32,c.f[17](r+16)-c.f[17](t[0]+16)))/t.length))):h.M[15](e.stats+232,Math.round(c.f[15](r+76)/c.f[15](r+72)/Number(BigInt.asIntN(32,c.f[17](r+16)-e.lastVideoDts))))}e.lastVideoDts=c.f[17](r+16)}if(e.streamIndexFlush.get(s)){const t=e.formatContext.streams.find((e=>e.index===s));if(!(0,M.rU)(r,1)&&t&&t.codecpar.extradataSize){const e=(0,A.sY)(t.codecpar.extradataSize);(0,P.Mr)(e,t.codecpar.extradata,t.codecpar.extradataSize),(0,M.Ow)(r,1,e,t.codecpar.extradataSize)}e.streamIndexFlush.set(s,!1)}e.cacheRequests.has(s)?(this.replyAVPacket(e,e.rightIPCPorts.get(s),e.cacheRequests.get(s),r),e.cacheRequests.delete(s)):e.cacheAVPackets.has(s)?(e.cacheAVPackets.get(s).push(r),0!==e.stats&&(1===e.formatContext.streams[s].codecpar.codecType?h.M[15](e.stats+32,c.f[15](e.stats+32)+1):0===e.formatContext.streams[s].codecpar.codecType&&h.M[15](e.stats+120,c.f[15](e.stats+120)+1)),3===e.formatContext.streams[s].codecpar.codecType&&e.cacheAVPackets.get(s).length>t&&e.avpacketPool.release(e.cacheAVPackets.get(s).shift())):e.rightIPCPorts.has(O)?e.cacheRequests.has(O)?(this.replyAVPacket(e,e.rightIPCPorts.get(O),e.cacheRequests.get(O),r),e.cacheRequests.delete(O)):e.cacheAVPackets.get(O).push(r):e.avpacketPool.release(r)}return s}async startDemux(e,t,r){const s=this.tasks.get(e);if(s){if(r=Math.max(r,2===s.format?20:10),s.loop&&s.loop.destroy(),s.loop=new b.A((async()=>{if(!t){let e=!1;if(s.cacheAVPackets.forEach(((t,i)=>{const n=s.formatContext.streams.find((e=>e.index===i));t.length<r&&(3!==n.codecpar.codecType||1===s.cacheAVPackets.size)&&(e=!0)})),!e)return void s.loop.emptyTask()}await this.doDemux(s,r)&&(s.demuxEnded=!0,w.pq(`demuxer ended, taskId: ${s.taskId}`,z,847),s.loop.stop())}),0,0,!0,!1),t)for(;;){let e=!1;if(s.cacheAVPackets.forEach(((t,s)=>{t.length>r&&(e=!0)})),e)break;if(await this.doDemux(s,r))return void(s.demuxEnded=!0)}s.loop.start(),w.Yz(`start demux loop, taskId: ${s.taskId}`,z,875)}else w.h2("task not found",z,878)}async seek(e,t,r,s=-1){const i=this.tasks.get(e);if(i){if(i.loop){await i.loop.stopBeforeNextTick();let e=await g.jF(i.formatContext,s,t,r);if(e>=BigInt(0)){i.cacheAVPackets.forEach((e=>{_.__(e,(e=>{if(2&i.formatContext.ioReader.flags){const t=(0,M.rU)(e,1),r=i.formatContext.streams[c.f[15](e+32)];!r.sideData[1]&&t&&(r.sideData[1]=(0,P.s3)(c.f[20](t),c.f[25](t+4)).slice())}i.avpacketPool.release(e)})),e.length=0})),0!==i.stats&&i.cacheAVPackets.forEach(((e,t)=>{const r=i.formatContext.streams.find((e=>e.index===t));1===r.codecpar.codecType?h.M[15](i.stats+32,0):0===r.codecpar.codecType&&h.M[15](i.stats+120,0)}));const r=i.avpacketPool.alloc();for(;e=await g.Cj(i.formatContext,r),!(e<0||i.cacheAVPackets.has(c.f[15](r+32))););if(e>=0){i.demuxEnded=!1;const e=c.f[15](r+32);return i.cacheAVPackets.get(e).push(r),0!==i.stats&&(1===i.formatContext.streams[c.f[15](r+32)].codecpar.codecType?h.M[15](i.stats+32,c.f[15](i.stats+32)+1):0===i.formatContext.streams[c.f[15](r+32)].codecpar.codecType&&h.M[15](i.stats+120,c.f[15](i.stats+120)+1)),i.loop.start(),(0,k.Mr)(I.T9(c.f[17](r+8),BigInt(0)),r+72,x.i0)}return w.R8(`got first packet failed after seek, taskId: ${i.taskId}`,z,945),i.avpacketPool.release(r),i.demuxEnded=!0,t}return e}{w.pq("seek before demux loop start",z,956);let e=await g.jF(i.formatContext,-1,t,r);return e<0?e:t}}}async croppingAVPacketQueue(e,t){const r=this.tasks.get(e);if(r){let s=t;const n=new(i());function o(e,t){if(!(1&c.f[15](e+36)))return!1;let r=0!==(0,M.rU)(e,1);return r||2!==c.f[15](e+80)||(27===t?r=!!L.sL((0,M.iI)(e)):173===t?r=!!R.sL((0,M.iI)(e)):196===t&&(r=!!$.sL((0,M.iI)(e)))),r}r.cacheAVPackets.forEach(((e,i)=>{const a=r.formatContext.streams[i].codecpar.codecType,h=r.formatContext.streams[i].codecpar.codecId;if(0===a){const r=c.f[17](e[e.length-1]+16);let a=e.length-2;for(a=e.length-2;a>=0;a--)if(1&c.f[15](e[a]+36)&&(0,k.Mr)(r-c.f[17](e[a]+16),e[a]+72,x.i0)>=t){s=I.T9(s,(0,k.Mr)(r-c.f[17](e[a]+16),e[a]+72,x.i0));break}if((27===h||173===h||196===h)&&a>0&&!o(e[a],h))for(let t=a-1;t>0;t--)if(1&c.f[15](e[t]+36)&&o(e[t],h)){s=I.T9(s,(0,k.Mr)(r-c.f[17](e[t]+16),e[t]+72,x.i0)),a=t;break}a>0&&n.set(i,a)}})),r.cacheAVPackets.forEach(((e,t)=>{if(0!==r.formatContext.streams[t].codecpar.codecType){const r=c.f[17](e[e.length-1]+16);let i=e.length-2;for(i=e.length-2;i>=0&&!((0,k.Mr)(r-c.f[17](e[i]+16),e[i]+72,x.i0)>=s);i--);i>=0&&n.set(t,i)}})),n.size===r.cacheAVPackets.size&&n.forEach(((e,t)=>{const s=r.cacheAVPackets.get(t);s.splice(0,e).forEach((e=>{r.avpacketPool.release(e)}));const i=r.formatContext.streams[t].codecpar.codecType;0!==r.stats&&(1===i?h.M[15](r.stats+32,s.length):0===i&&h.M[15](r.stats+120,s.length))}))}}async stop(e){const t=this.tasks.get(e);t&&(t.formatContext.ioReader.flags|=8)}async registerTask(e){return this.tasks.has(e.taskId)?u.lh:this.createTask(e)}async unregisterTask(e){const t=this.tasks.get(e);t&&(t.loop&&(await t.loop.stopBeforeNextTick(),t.loop.destroy()),t.cacheAVPackets.forEach((e=>{e.forEach((e=>{t.avpacketPool.release(e)}))})),t.cacheRequests.forEach(((e,r)=>{t.rightIPCPorts.get(r).reply(e,-1048576)})),t.cacheRequests.clear(),await t.formatContext.destroy(),t.leftIPCPort.destroy(),t.rightIPCPorts.forEach((e=>{e.destroy()})),t.rightIPCPorts.clear(),t.iBuffer&&((0,A.Eb)(t.iBuffer),t.iBuffer=0),t.oBuffer&&((0,A.Eb)(t.oBuffer),t.oBuffer=0),this.tasks.delete(e))}}},87243:(e,t,r)=>{"use strict";r.d(t,{A:()=>m});var s=r(63939),i=r(50932),n=r(44527),o=r(77580),a=r(9705),c=r(84149),h=r(14686),d=r(79686),u=r(4624),l=r(14619),f=r(42383);const p="src/avpipeline/IOPipeline.ts";class m extends n.A{constructor(){super()}async createTask(e){let t;switch(e.type){case 0:t=new o.A(e.options);break;case 1:t=new d.A(e.options);break;case 2:t=new l.A(e.options);break;case 3:t=new f.A(e.options);break;case 4:t=new((await r.e(433).then(r.bind(r,15433))).default)(e.options);break;case 5:t=new((await r.e(576).then(r.bind(r,41576))).default)(e.options);break;case 6:t=new((await r.e(543).then(r.bind(r,67543))).default)(e.options)}if(!t)return a.UY;const n=new c.Ay(e.rightPort),m={...e,ioLoader:t,ipcPort:n};return n.on(c.S3,(async r=>{switch(r.method){case"open":try{const s=await t.open(e.info,e.range);if(s<0){u.z3(`loader open error, ${s}, taskId: ${e.taskId}`,p,127),n.reply(r,null,s);break}n.reply(r,s)}catch(t){u.z3(`loader open error, ${t}, taskId: ${e.taskId}`,p,134),n.reply(r,null,t)}break;case"read":{const o=r.params.pointer,c=r.params.length,d=r.params.ioloaderOptions,l=(0,h.JW)(o,c);try{const e=await t.read(l,d);i.M[17](m.stats+192,s.f[17](m.stats+192)+BigInt(0|e)),n.reply(r,e)}catch(t){u.z3(`loader read error, ${t}, taskId: ${e.taskId}`,p,155),n.reply(r,a.LR)}break}case"write":{const o=r.params.pointer,c=r.params.length,d=(0,h.JW)(o,c);try{const e=await t.write(d);i.M[17](m.stats+200,s.f[17](m.stats+200)+BigInt(0|c)),n.reply(r,e)}catch(t){u.z3(`loader write error, ${t}, taskId: ${e.taskId}`,p,177),n.reply(r,a.LR)}break}case"seek":{const s=r.params.pos,i=r.params.ioloaderOptions;try{const o=await t.seek(s,i);if(o<0){u.z3(`loader seek error, ${o}, taskId: ${e.taskId}`,p,193),n.reply(r,null,o);break}n.reply(r,o)}catch(t){u.z3(`loader seek error, ${t}, taskId: ${e.taskId}`,p,200),n.reply(r,null,t)}break}case"size":n.reply(r,await t.size())}})),this.tasks.set(e.taskId,m),0}async open(e){const t=this.tasks.get(e);if(t)return await t.ioLoader.open(t.info,t.range),0}async getDuration(e){const t=this.tasks.get(e);if(t)return 4===t.type||5===t.type?t.ioLoader.getDuration():0}async hasAudio(e){const t=this.tasks.get(e);return!(!t||5!==t.type)&&t.ioLoader.hasAudio()}async hasVideo(e){const t=this.tasks.get(e);return!(!t||5!==t.type)&&t.ioLoader.hasVideo()}async hasSubtitle(e){const t=this.tasks.get(e);return!(!t||5!==t.type)&&t.ioLoader.hasSubtitle()}async getVideoList(e){const t=this.tasks.get(e);if(t){if(5===t.type)return t.ioLoader.getVideoList();if(4===t.type)return t.ioLoader.getVideoList()}return{list:[],selectedIndex:0}}async getAudioList(e){const t=this.tasks.get(e);return t&&5===t.type?t.ioLoader.getAudioList():{list:[],selectedIndex:0}}async getSubtitleList(e){const t=this.tasks.get(e);return t&&5===t.type?t.ioLoader.getSubtitleList():{list:[],selectedIndex:0}}async selectVideo(e,t){const r=this.tasks.get(e);if(r)if(5===r.type)r.ioLoader.selectVideo(t);else if(4===r.type)return r.ioLoader.selectVideo(t)}async selectAudio(e,t){const r=this.tasks.get(e);r&&5===r.type&&r.ioLoader.selectAudio(t)}async selectSubtitle(e,t){const r=this.tasks.get(e);r&&5===r.type&&r.ioLoader.selectSubtitle(t)}async getMinBuffer(e){const t=this.tasks.get(e);if(t){if(5===t.type)return t.ioLoader.getMinBuffer();if(4===t.type)return t.ioLoader.getMinBuffer()}return 0}async registerTask(e){return this.tasks.has(e.taskId)?a.lh:this.createTask(e)}async unregisterTask(e){const t=this.tasks.get(e);t&&(await t.ioLoader.stop(),t.ipcPort.destroy(),this.tasks.delete(e))}}},45597:(e,t,r)=>{"use strict";r.d(t,{A:()=>k});var s=r(61499),i=r(12264),n=r(29170),o=r(63939),a=r(50932),c=(r(9599),r(44527)),h=r(9705),d=r(84149),u=r(44315),l=r(92174),f=r(4624),p=r(84290),m=r(39148),g=r(72739),A=r(44328),v=r(77231),w=r(35336),y=r(71766),b=r(95335);const _="src/avpipeline/MuxPipeline.ts";class k extends c.A{constructor(){super()}createTask(e){const t=new d.Ay(e.rightPort),r=(0,u.fG)(),s=new w.A(5242880);return s.onFlush=(e,r)=>{const s=e.slice();return t.notify("write",{data:s,pos:r},[s.buffer]),0},s.onSeek=e=>(t.notify("seek",{pos:e}),0),r.ioWriter=s,this.tasks.set(e.taskId,{...e,rightIPCPort:t,formatContext:r,loop:null,ended:!1,streams:[],avpacketPool:new p.A((0,n.A)(e.avpacketList,i.A),e.avpacketListMutex)}),0}async open(e){const t=this.tasks.get(e);if(t){let e;switch(t.format){case 0:e=new((await r.e(3).then(r.bind(r,4003))).default)(t.formatOptions);break;case 1:e=new((await Promise.all([r.e(490),r.e(765)]).then(r.bind(r,69765))).default)(t.formatOptions);break;case 2:e=new((await r.e(597).then(r.bind(r,15597))).default)(t.formatOptions);break;case 5:e=new((await r.e(632).then(r.bind(r,5632))).default);break;case 4:e=new((await Promise.all([r.e(888),r.e(952)]).then(r.bind(r,29952))).default);break;case 14:e=new((await r.e(257).then(r.bind(r,52257))).default)(t.formatOptions);break;case 8:case 9:{const s={isLive:t.isLive,docType:9===t.format?"webm":"matroska"};e=new((await r.e(411).then(r.bind(r,68675))).default)(b.X$(t.formatOptions,s))}break;default:return f.z3("format not support",_,198),h.E$}t.formatContext.oformat=e;for(let e=0;e<t.streams.length;e++){if(t.streams[e].ended||1!==o.f[15](t.streams[e].stream.codecpar)&&0!==o.f[15](t.streams[e].stream.codecpar))continue;const r=await t.streams[e].pullIPC.request("pull");if(-1048576===r)t.streams[e].ended=!0;else{if(r<0)return f.z3(`pull stream ${e} avpacket error, ret: ${r}`,_,219),t.streams[e].ended=!0,h.LR;{a.M[15](r+32,t.streams[e].stream.index),t.streams[e].avpacketQueue.push(r);const s=(0,A.Mr)(o.f[17](r+16),r+72,v.i0);1===o.f[15](t.streams[e].stream.codecpar)?a.M[17](t.stats+296,s):0===o.f[15](t.streams[e].stream.codecpar)&&a.M[17](t.stats+312,s)}}}return 0}f.h2("task not found",_,238)}async addStream(e,t,r){const i=this.tasks.get(e);if(i){i.streams.push({stream:t,pullIPC:new d.Ay(r),avpacketQueue:[],ended:4===o.f[15](t.codecpar)||2===o.f[15](t.codecpar),pulling:null});const e=i.formatContext.createStream();e.id=t.id,e.index=t.index,(0,y.Yi)(e.codecpar[s.o9],t.codecpar),e.timeBase.num=t.timeBase.num,e.timeBase.den=t.timeBase.den,e.metadata=t.metadata}else f.h2("task not found",_,262)}async updateAVCodecParameters(e,t,r){const i=this.tasks.get(e);if(i){const e=i.formatContext.getStreamByIndex(t);e&&(0,y.Yi)(e.codecpar[s.o9],r)}else f.h2("task not found",_,275)}async start(e){const t=this.tasks.get(e);if(t){if(t.loop)return f.z3("task has started",_,284),h.lh;if(l.ho(t.formatContext,{nonnegative:1!==t.format&&8!==t.format})<0)return f.z3("mux task open error",_,294),h.E$;if(l.bx(t.formatContext),!t.streams.length)return f.z3("task streams not found",_,301),h.lh;function r(e,r){-1048576===r?t.streams[e].ended=!0:r<0?(f.z3(`pull stream ${e} avpacket error, ret: ${r}`,_,310),t.streams[e].ended=!0,t.loop.stop(),t.ended=!0,t.rightIPCPort.notify("error")):(a.M[15](r+32,t.streams[e].stream.index),t.streams[e].avpacketQueue.push(r))}function s(e){t.streams[e].pulling||(t.streams[e].pulling=t.streams[e].pullIPC.request("pull").then((s=>{r(e,s),t.streams[e].pulling=null})))}return t.loop=new m.A((async()=>{for(let e=0;e<t.streams.length;e++)if(!t.streams[e].ended&&t.streams[e].avpacketQueue.length<30){const i=o.f[15](t.streams[e].stream.codecpar);1!==i&&0!==i||t.streams[e].avpacketQueue.length?s(e):t.streams[e].pulling?await t.streams[e].pulling:r(e,await t.streams[e].pullIPC.request("pull"))}let e=0,i=v.Dh,n=0,c=-1;for(let r=0;r<t.streams.length;r++)if(t.streams[r].avpacketQueue.length){const s=(0,A.Mr)(o.f[17](t.streams[r].avpacketQueue[0]+16),t.streams[r].avpacketQueue[0]+72,v.i0);(i===v.Dh||s<i)&&(e=t.streams[r].avpacketQueue[0],i=s,n=r,c=o.f[15](t.streams[r].stream.codecpar))}if(e){const r=t.formatContext.ioWriter.getPos();l.XA(t.formatContext,e),a.M[17](t.stats+208,o.f[17](t.stats+208)+(t.formatContext.ioWriter.getPos()-r)),t.avpacketPool.release(e),t.streams[n].avpacketQueue.shift(),1===c?a.M[17](t.stats+304,i):0===c&&a.M[17](t.stats+320,i)}else t.streams.some((e=>!e.ended))||(l.dJ(t.formatContext),l.bX(t.formatContext),t.rightIPCPort.notify("end"),t.loop.stop(),t.ended=!0)}),0,0,!1,!1),t.loop.start(),0}return f.z3("task not found",_,395),h.lh}async pause(e){const t=this.tasks.get(e);t?t.loop&&await t.loop.stopBeforeNextTick():f.h2("task not found",_,408)}async unpause(e){const t=this.tasks.get(e);t?!t.loop||t.loop.isStarted()||t.ended||t.loop.start():f.h2("task not found",_,420)}async registerTask(e){return this.tasks.has(e.taskId)?h.lh:this.createTask(e)}async unregisterTask(e){const t=this.tasks.get(e);t&&(t.loop&&(await t.loop.stopBeforeNextTick(),t.loop.destroy()),g.__(t.streams,(e=>{e.avpacketQueue.length&&(e.avpacketQueue.forEach((e=>{t.avpacketPool.release(e)})),e.avpacketQueue.length=0),e.pullIPC.destroy()})),await t.formatContext.destroy(),this.tasks.delete(e))}}},44527:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var s=r(134),i=r(80662),n=r.n(i),o=r(4624);class a{constructor(){(0,s.A)(this,"tasks",void 0),this.tasks=new(n())}async clear(){if(this.tasks.size)for(const e of this.tasks.keys())await this.unregisterTask(e)}async setLogLevel(e){o.V$(e)}async getTaskCount(){return this.tasks.size}}},31138:(e,t,r)=>{"use strict";r.d(t,{A:()=>F});var s=r(54001),i=r.n(s),n=r(63939),o=r(50932),a=r(12264),c=r(29170),h=r(9599),d=r(44527),u=r(9705),l=r(84149),f=r(40417),p=r(71039),m=r(4624),g=r(16041),A=r(67672),v=r(72739),w=r(13724),y=(r(77162),r(84290)),b=r(39638),_=r(44328),k=r(86932),x=r(77231),I=r(95797),M=r(72703),P=r(94561),C=r(71762),E=r(37837),T=r(71766),B=r(71517),S=r(14686),U=r(62815),D=r(67659),L=r(59166),R=r(39381);const $="src/avpipeline/VideoDecodePipeline.ts";class F extends d.A{constructor(){super()}createWebCodecDecoder(e,t=!0){return new p.A({onError:t=>{e.hardwareRetryCount>3||!e.firstDecoded?e.targetDecoder===e.hardwareDecoder&&(e.targetDecoder=e.softwareDecoder,e.hardwareDecoder.close(),e.hardwareDecoder=null,e.decoderFallbackReady=this.openSoftwareDecoder(e),m.R8(`video decode error width hardware(${e.hardwareRetryCount}), taskId: ${e.taskId}, error: ${t}, try to fallback to software decoder`,$,132)):(e.hardwareRetryCount++,m.pq(`retry open hardware decoder(${e.hardwareRetryCount}), taskId: ${e.taskId}`,$,137),e.decoderFallbackReady=e.hardwareDecoder.open(e.parameters)),e.needKeyFrame=!0,e.leftIPCPort.request("requestKeyframe")},onReceiveVideoFrame(t){e.firstDecoded=!0,e.frameCaches.push(t),o.M[17](e.stats+144,n.f[17](e.stats+144)+BigInt(1)),e.lastDecodeTimestamp!==x.N_&&(o.M[15](e.stats+256,Math.max((0,k.A)()-e.lastDecodeTimestamp,n.f[15](e.stats+256))),e.lastDecodeTimestamp=x.N_)},enableHardwareAcceleration:t})}createWasmcodecDecoder(e,t){return new f.A({resource:t,onReceiveAVFrame(t){e.firstDecoded=!0,e.frameCaches.push(t),o.M[17](e.stats+144,n.f[17](e.stats+144)+BigInt(1)),e.lastDecodeTimestamp!==x.N_&&(o.M[15](e.stats+256,Math.max((0,k.A)()-e.lastDecodeTimestamp,n.f[15](e.stats+256))),e.lastDecodeTimestamp=x.N_)},avframePool:e.avframePool})}async pullAVPacketInternal(e,t){const r=await t.request("pull");if(A.ai(r)||(0,M.A)(r))return r;{const t=e.avpacketPool.alloc();return(0,C.r0)(r,t),t}}async createTask(e){const t=new l.Ay(e.leftPort),r=new l.Ay(e.rightPort),s=[],h=new g.A((0,c.A)(e.avframeList,a.A),e.avframeListMutex),d={...e,resource:await(0,P.A)(e.resource,!0),leftIPCPort:t,rightIPCPort:r,softwareDecoder:null,hardwareDecoder:null,frameCaches:s,inputEnd:!1,targetDecoder:null,needKeyFrame:!0,parameters:0,hardwareRetryCount:0,lastDecodeTimestamp:0,firstDecoded:!1,decoderFallbackReady:null,softwareDecoderOpened:!1,discard:0,playRate:1,avframePool:h,avpacketPool:new y.A((0,c.A)(e.avpacketList,a.A),e.avpacketListMutex)};return d.softwareDecoder=d.resource?this.createWasmcodecDecoder(d,d.resource):I.A.videoDecoder?this.createWebCodecDecoder(d,!1):null,d.softwareDecoder?(I.A.videoDecoder&&e.enableHardware&&(d.hardwareDecoder=this.createWebCodecDecoder(d)),d.targetDecoder=d.hardwareDecoder||d.softwareDecoder,this.tasks.set(e.taskId,d),r.on(l.S3,(async a=>{switch(a.method){case"pull":if(s.length){const e=s.shift();r.reply(a,e,null,(0,M.A)(e)||A.ai(e)?null:[e]);break}if(!d.inputEnd){for(;;){if(s.length){const e=s.shift();r.reply(a,e,null,(0,M.A)(e)||A.ai(e)?null:[e]);break}if(d.decoderFallbackReady){let e=await d.decoderFallbackReady;if(e&&(d.targetDecoder===d.hardwareDecoder&&(d.targetDecoder=d.softwareDecoder,d.hardwareDecoder.close(),d.hardwareDecoder=null,m.R8(`video decode error width hardware(${d.hardwareRetryCount}), taskId: ${d.taskId}, error: ${e}, try to fallback to software decoder`,$,265),e=await this.openSoftwareDecoder(d)),e)){m.pq(`video decoder open error, taskId: ${d.taskId}`,$,269),r.reply(a,u.r8);break}d.decoderFallbackReady=null}d.lastDecodeTimestamp===x.N_&&(d.lastDecodeTimestamp=(0,k.A)());const c=await this.pullAVPacketInternal(d,t);if(-1048576===c){if(d.targetDecoder===d.hardwareDecoder?await i().race([new w.A(2),d.targetDecoder.flush()])&&m.R8(`video hardware decoder flush failed, ignore it, taskId: ${d.taskId}`,$,289):await d.targetDecoder.flush(),d.inputEnd=!0,d.targetDecoder===d.hardwareDecoder&&await new w.A(0),s.length){const e=s.shift();r.reply(a,e,null,d.targetDecoder===d.hardwareDecoder?[e]:null);break}m.pq(`video decoder ended, taskId: ${d.taskId}`,$,306),r.reply(a,-1048576);break}if(!(c>0)){m.z3(`video decode pull avpacket error, taskId: ${e.taskId}, ret: ${c}`,$,449),r.reply(a,c);break}{if(d.needKeyFrame){if(!(1&n.f[15](c+36)||27===n.f[15](d.parameters+4)&&U.KD(c,n.f[20](d.parameters+12)?1+(3&R.r8(n.f[20](d.parameters+12)+4)):4)||173===n.f[15](d.parameters+4)&&D.KD(c,n.f[20](d.parameters+12)?1+(3&R.r8(n.f[20](d.parameters+12)+21)):4)||196===n.f[15](d.parameters+4)&&L.KD(c,n.f[20](d.parameters+12)?1+(R.r8(n.f[20](d.parameters+12))>>>1&3):4))){d.avpacketPool.release(c);continue}d.needKeyFrame=!1,o.M[15](c+36,1|n.f[15](c+36))}let t=d.targetDecoder.decode(c);if(1&n.f[15](c+36)){const e=(0,B.rU)(c,1);0!==e&&(n.f[20](d.parameters+12)&&(0,E.Eb)(n.f[20](d.parameters+12)),o.M[15](d.parameters+16,0|n.f[25](e+4)),o.M[20](d.parameters+12,(0,E.sY)(n.f[25](e+4))),(0,S.Mr)(n.f[20](d.parameters+12),n.f[20](e),n.f[25](e+4)))}if(t<0){if(o.M[15](d.stats+136,n.f[15](d.stats+136)+1),d.targetDecoder instanceof p.A&&d.softwareDecoder){if(m.R8(`video decode error from hardware, taskId: ${d.taskId}, error: ${t}, try to fallback to software decoder`,$,370),d.targetDecoder===d.hardwareDecoder)d.hardwareDecoder.close(),d.hardwareDecoder=null;else{if(!d.resource){m.z3(`cannot fallback to wasm video decoder because of resource not found , taskId: ${e.taskId}`,$,382),r.reply(a,u.r8);break}d.softwareDecoder.close(),d.softwareDecoder=this.createWasmcodecDecoder(d,d.resource),d.softwareDecoderOpened=!1}try{await this.openSoftwareDecoder(d),d.targetDecoder=d.softwareDecoder}catch(t){m.z3(`video software decoder open error, taskId: ${e.taskId}`,$,392),r.reply(a,u.r8);break}if(!(1&n.f[15](c+36))){d.avpacketPool.release(c),d.needKeyFrame=!0,d.leftIPCPort.request("requestKeyframe");continue}if(t=d.targetDecoder.decode(c),t>=0){d.avpacketPool.release(c);continue}if(d.targetDecoder instanceof p.A&&d.resource){m.R8(`video decode error width webcodecs soft decoder, taskId: ${d.taskId}, error: ${t}, try to fallback to wasm software decoder`,$,406),d.softwareDecoder.close(),d.softwareDecoder=this.createWasmcodecDecoder(d,d.resource),d.softwareDecoderOpened=!1;try{await this.openSoftwareDecoder(d),d.targetDecoder=d.softwareDecoder}catch(t){m.z3(`video wasm software decoder open error, taskId: ${e.taskId}`,$,416),r.reply(a,u.r8);break}if(t=d.targetDecoder.decode(c),t>=0){d.avpacketPool.release(c);continue}}}d.avpacketPool.release(c),m.z3(`video decode error, taskId: ${e.taskId}, ret: ${t}`,$,435),r.reply(a,t);break}for(d.avpacketPool.release(c);d.targetDecoder instanceof p.A&&d.targetDecoder.getQueueLength()>20;)await new w.A(0)}}break}m.pq(`video decoder ended, taskId: ${d.taskId}`,$,456),r.reply(a,-1048576)}})),0):(m.z3("software decoder not support",$,230),u.lh)}async openSoftwareDecoder(e){if(e.softwareDecoder&&!e.softwareDecoderOpened){const t=e.parameters;let r=1;if((0,b.A)()){let e=n.f[15](t+56)*n.f[15](t+60),s=(0,_.lb)((0,c.A)(t+72,h.P));e>=2073600&&e<=2211840?(173!==n.f[15](t+4)&&196!==n.f[15](t+4)&&225!==n.f[15](t+4)||(r=2),s>30?(r=2,173!==n.f[15](t+4)&&196!==n.f[15](t+4)&&225!==n.f[15](t+4)||(r=4)):s>60&&(r=4,173!==n.f[15](t+4)&&196!==n.f[15](t+4)&&225!==n.f[15](t+4)||(r=6))):e>2211840&&e<=8294400?(r=4,173!==n.f[15](t+4)&&196!==n.f[15](t+4)&&225!==n.f[15](t+4)||(r=6)):e>8294400&&(r=6,173!==n.f[15](t+4)&&196!==n.f[15](t+4)&&225!==n.f[15](t+4)||(r=8)),r=Math.min(r,navigator.hardwareConcurrency)}let s=await e.softwareDecoder.open(t,r,e.wasmDecoderOptions);if(s){if(!(e.softwareDecoder instanceof p.A&&e.resource))return s;if(m.R8(`webcodecs software decoder open failed, ${s}, try to fallback to wasm software decoder`,$,525),e.softwareDecoder.close(),e.softwareDecoder=this.createWasmcodecDecoder(e,e.resource),s=await e.softwareDecoder.open(t,r),s)return s;e.targetDecoder=e.softwareDecoder}e.softwareDecoderOpened=!0}return 0}async reopenDecoder(e,t,r,s){const n=this.tasks.get(e);if(n){const e=(0,E.Gy)(168);let o;(0,M.A)(t)?(0,T.Yi)(e,t):(0,C.T8)(t,e),n.parameters&&(0,T.dn)(n.parameters),n.parameters=e,s&&(n.wasmDecoderOptions=s),r&&(r=await(0,P.A)(r,!0)),o=n.preferWebCodecs&&I.A.videoDecoder&&p.A.isSupported(e,!1)?this.createWebCodecDecoder(n,!1):r?this.createWasmcodecDecoder(n,r):I.A.videoDecoder?this.createWebCodecDecoder(n,!1):null;let a=I.A.videoDecoder&&n.enableHardware?this.createWebCodecDecoder(n,!0):null;return new(i())((async(t,s)=>{if(n.softwareDecoder&&n.softwareDecoder.close(),n.hardwareDecoder&&n.hardwareDecoder.close(),n.softwareDecoder=o,n.hardwareDecoder=a,n.targetDecoder=n.hardwareDecoder||n.softwareDecoder,n.hardwareRetryCount=0,n.hardwareDecoder){const t=await n.hardwareDecoder.open(e);t?(m.z3(`cannot reopen hardware decoder, ${t}, taskId: ${n.taskId}`,$,601),n.hardwareDecoder.close(),n.hardwareDecoder=null,n.targetDecoder=n.softwareDecoder):m.Yz(`reopen video hardware decoder, taskId: ${n.taskId}`,$,607)}if(r&&(n.resource=r),n.targetDecoder===n.softwareDecoder){const e=await this.openSoftwareDecoder(n);if(e){if(m.z3(`reopen video software decoder failed, error: ${e}`,$,618),!n.hardwareDecoder)return void t(u.r8)}else m.Yz(`reopen video soft decoder, taskId: ${n.taskId}`,$,625)}t(0)}))}m.h2("task not found",$,631)}async open(e,t,r={}){const s=this.tasks.get(e);if(s){s.wasmDecoderOptions=r;const e=(0,E.Gy)(168);if((0,M.A)(t)?(0,T.Yi)(e,t):(0,C.T8)(t,e),s.parameters&&(0,T.dn)(s.parameters),s.parameters=e,s.preferWebCodecs&&I.A.videoDecoder&&p.A.isSupported(e,!1)&&s.softwareDecoder instanceof f.A){s.softwareDecoder.close();const e=this.createWebCodecDecoder(s,!1);s.softwareDecoder===s.targetDecoder&&(s.targetDecoder=e),s.softwareDecoder=e}return new(i())((async(t,r)=>{if(s.hardwareDecoder){const t=await s.hardwareDecoder.open(e);t&&(m.z3(`cannot open hardware decoder, ${t}`,$,668),s.hardwareDecoder.close(),s.hardwareDecoder=null,s.targetDecoder=s.softwareDecoder)}if(s.targetDecoder===s.softwareDecoder){const e=await this.openSoftwareDecoder(s);if(e&&(m.z3(`open video software decoder failed, error: ${e}`,$,678),!s.hardwareDecoder))return void t(u.r8)}t(0)}))}m.h2("task not found",$,688)}async setPlayRate(e,t){const r=this.tasks.get(e);if(r&&r.softwareDecoder){let e=0,s=(0,_.lb)((0,c.A)(r.parameters+72,h.P));e=s>=120?t<=1?0:t<1.5||t<3?8:32:s>=60?t<1.5?0:t<3?8:t<8?24:32:t>=8?32:t>=4?24:0,r.softwareDecoder.setSkipFrameDiscard(e),r.playRate<t?r.discard=e:r.discard=Math.max(r.discard,e),r.playRate=t}}async setNextDiscard(e){const t=this.tasks.get(e);t&&t.softwareDecoder&&t.discard<32&&(t.discard+=8,t.softwareDecoder.setSkipFrameDiscard(t.discard),m.pq(`set next discard, taskId: ${t.taskId}, discard: ${t.discard}`,$,755))}async setPrevDiscard(e){const t=this.tasks.get(e);t&&t.softwareDecoder&&t.discard>0&&(t.discard-=8,t.softwareDecoder.setSkipFrameDiscard(t.discard),m.pq(`set prev discard, taskId: ${t.taskId}, discard: ${t.discard}`,$,767))}async resetTask(e){const t=this.tasks.get(e);t&&(t.targetDecoder===t.softwareDecoder?await t.targetDecoder.flush():t.targetDecoder===t.hardwareDecoder&&(t.hardwareDecoder.close(),t.hardwareDecoder=this.createWebCodecDecoder(t),await t.hardwareDecoder.open(t.parameters)&&m.h2("reopen hardware decoder failed",$,784),t.targetDecoder=t.hardwareDecoder),v.__(t.frameCaches,(e=>{(0,M.A)(e)?t.avframePool.release(e):e.close()})),t.frameCaches.length=0,t.needKeyFrame=!0,t.inputEnd=!1,t.lastDecodeTimestamp=(0,k.A)(),m.pq(`reset video decoder, taskId: ${t.taskId}`,$,801))}async registerTask(e){return this.tasks.has(e.taskId)?u.lh:this.createTask(e)}async unregisterTask(e){const t=this.tasks.get(e);t&&(t.rightPort.close(),t.leftPort.close(),t.softwareDecoder&&t.softwareDecoder.close(),t.hardwareDecoder&&t.hardwareDecoder.close(),t.frameCaches.forEach((e=>{(0,M.A)(e)?t.avframePool.release(e):e.close()})),t.parameters&&(0,T.dn)(t.parameters),this.tasks.delete(e))}async getTasksInfo(){const e=[];return this.tasks.forEach((t=>{e.push({codecId:n.f[15](t.parameters+4),width:n.f[15](t.parameters+56),height:n.f[15](t.parameters+60),framerate:(0,_.lb)((0,c.A)(t.parameters+72,h.P)),hardware:t.targetDecoder===t.hardwareDecoder})})),e}}},41678:(e,t,r)=>{"use strict";r.d(t,{A:()=>E});var s=r(54001),i=r.n(s),n=r(63939),o=r(50932),a=r(12264),c=r(29170),h=r(9599),d=r(44527),u=r(9705),l=r(84149),f=r(4624),p=r(16041),m=r(67672),g=r(72739),A=r(95335),v=r(13724),w=r(84290),y=r(39638),b=r(44328),_=r(95797),k=r(80105),x=r(47243),I=r(72703),M=r(94561),P=r(37180);const C="src/avpipeline/VideoEncodePipeline.ts";class E extends d.A{constructor(){super()}createWebcodecEncoder(e,t=!0){return new x.A({onError:t=>{e.targetEncoder===e.hardwareEncoder?(e.targetEncoder=e.softwareEncoder,e.hardwareEncoder.close(),e.hardwareEncoder=null,e.encoderFallbackReady=this.openSoftwareEncoder(e),f.R8(`video encode error width hardware, taskId: ${e.taskId}, error: ${t}, try to fallback to software encoder`,C,121)):f.z3(`video encode error width hardware, taskId: ${e.taskId}, error: ${t}`,C,124)},onReceiveAVPacket(t){e.avpacketCaches.push(t),o.M[17](e.stats+152,n.f[17](e.stats+152)+BigInt(1))},enableHardwareAcceleration:t,avpacketPool:e.avpacketPool,avframePool:e.avframePool})}createWasmcodecEncoder(e,t){return new k.A({resource:e.resource,onReceiveAVPacket(t){e.avpacketCaches.push(t),o.M[17](e.stats+152,n.f[17](e.stats+152)+BigInt(1))},avpacketPool:e.avpacketPool})}async createTask(e){const t=new l.Ay(e.leftPort),r=new l.Ay(e.rightPort),s=[],h=new p.A((0,c.A)(e.avframeList,a.A),e.avframeListMutex),d=new w.A((0,c.A)(e.avpacketList,a.A),e.avpacketListMutex),g=await(0,M.A)(e.resource,!0);e.resourceExtraData&&A.X$(g,e.resourceExtraData);const y={...e,resource:g,leftIPCPort:t,rightIPCPort:r,softwareEncoder:null,hardwareEncoder:null,avpacketCaches:s,inputEnd:!1,encodeEnd:!1,targetEncoder:null,parameters:0,timeBase:null,encoderFallbackReady:null,softwareEncoderOpened:!1,gopCounter:0,firstEncoded:!1,avframePool:h,avpacketPool:d};if(y.softwareEncoder=y.resource?this.createWasmcodecEncoder(y,y.resource):_.A.videoEncoder?this.createWebcodecEncoder(y,!1):null,!y.softwareEncoder)return f.z3("software encoder not support",C,193),u.lh;_.A.videoEncoder&&e.enableHardware&&(y.hardwareEncoder=this.createWebcodecEncoder(y)),y.targetEncoder=y.hardwareEncoder||y.softwareEncoder,this.tasks.set(e.taskId,y);const b=[];let E;async function T(){if(!y.inputEnd){if(!b.length){E&&await E;const e=await t.request("pull",{preferVideoFrame:y.targetEncoder instanceof x.A&&y.firstEncoded});m.ai(e)&&e<0&&(y.inputEnd=!0),b.push(e)}b.length<4&&!E&&y.firstEncoded&&(E=t.request("pull",{preferVideoFrame:y.targetEncoder instanceof x.A&&y.firstEncoded}).then((e=>{m.ai(e)&&e<0&&(y.inputEnd=!0),b.push(e),E=null})))}return b.length?b.shift():-1048576}return r.on(l.S3,(async t=>{switch(t.method){case"pull":if(s.length){const e=s.shift();r.reply(t,e);break}if(!y.encodeEnd){for(;;){if(s.length){const e=s.shift();r.reply(t,e);break}if(y.encoderFallbackReady){let e=await y.encoderFallbackReady;if(e&&(y.targetEncoder===y.hardwareEncoder&&(y.targetEncoder=y.softwareEncoder,y.hardwareEncoder.close(),y.hardwareEncoder=null,e=await this.openSoftwareEncoder(y),f.R8(`video encode error width hardware, taskId: ${y.taskId}, error: ${e}, try to fallback to software encoder`,C,263)),e)){f.pq(`video encoder open error, taskId: ${y.taskId}`,C,266),r.reply(t,u.r8);break}y.encoderFallbackReady=null}const a=await T();if(!((0,I.A)(a)||a instanceof VideoFrame)){if(y.encodeEnd=!0,-1048576===a){if(y.targetEncoder===y.hardwareEncoder?await i().race([new v.A(2),y.targetEncoder.flush()])&&f.R8(`video hardware encoder flush failed, ignore it, taskId: ${y.taskId}`,C,397):await y.targetEncoder.flush(),y.targetEncoder===y.hardwareEncoder&&await new v.A(0),s.length){const e=s.shift();r.reply(t,e);break}f.pq(`video encoder ended, taskId: ${y.taskId}`,C,413),r.reply(t,-1048576);break}f.z3(`video encoder pull avframe error, taskId: ${e.taskId}, ret: ${a}`,C,419),r.reply(t,a);break}{let s=!y.firstEncoded&&y.targetEncoder instanceof k.A?await y.targetEncoder.encodeAsync(a,0===y.gopCounter):y.targetEncoder.encode(a,0===y.gopCounter);if(s<0){if(o.M[15](y.stats+140,n.f[15](y.stats+140)+1),y.targetEncoder instanceof x.A&&y.softwareEncoder){if(f.R8(`video encode error from hardware, taskId: ${y.taskId}, error: ${s}, try to fallback to software decoder`,C,284),y.targetEncoder===y.hardwareEncoder)y.hardwareEncoder.close(),y.hardwareEncoder=null;else{if(!y.resource){f.z3(`cannot fallback to wasm video encoder because of resource not found , taskId: ${e.taskId}`,C,307),r.reply(t,u.r8);break}for(y.softwareEncoder.close(),y.softwareEncoder=this.createWasmcodecEncoder(y,y.resource),y.softwareEncoderOpened=!1,y.firstEncoded=!1;b.length&&b[0]instanceof VideoFrame&&(0,P.OB)(b[0].format)!==n.f[15](y.parameters+28);)b.shift().close()}try{await this.openSoftwareEncoder(y),y.targetEncoder=y.softwareEncoder}catch(s){f.z3(`video software encoder open error, taskId: ${e.taskId}`,C,316),r.reply(t,u.r8);break}if(y.gopCounter=0,s=y.targetEncoder instanceof k.A?await y.targetEncoder.encodeAsync(a,!0):y.targetEncoder.encode(a,!0),s<0&&y.targetEncoder instanceof x.A&&y.resource){f.R8(`video encode error from webcodecs soft encoder, taskId: ${y.taskId}, error: ${s}, try to fallback to wasm software encoder`,C,328),y.softwareEncoder.close(),y.softwareEncoder=this.createWasmcodecEncoder(y,y.resource),y.softwareEncoderOpened=!1,y.firstEncoded=!1,y.gopCounter=0;try{await this.openSoftwareEncoder(y),y.targetEncoder=y.softwareEncoder}catch(s){f.z3(`video software encoder open error, taskId: ${e.taskId}`,C,339),r.reply(t,u.r8);break}s=await y.targetEncoder.encodeAsync(a,!0)}}if(s<0){(0,I.A)(a)?y.avframePool.release(a):a.close(),f.z3(`video encode error, taskId: ${e.taskId}, ret: ${s}`,C,353),r.reply(t,s);break}}for(y.firstEncoded||!(y.targetEncoder instanceof x.A)&&y.resourceExtraData.enableThreadPool&&_.A.jspi&&!y.targetEncoder.getChildThreadCount()||(y.firstEncoded=!0),y.gopCounter++,y.gopCounter===y.gop&&(y.gopCounter=0),(0,I.A)(a)?y.avframePool.release(a):a.close();y.targetEncoder instanceof x.A&&y.targetEncoder.getQueueLength()>10;)await new v.A(0)}}break}f.pq(`video encoder ended, taskId: ${y.taskId}`,C,427),r.reply(t,-1048576)}})),0}async openSoftwareEncoder(e){if(e.softwareEncoder&&!e.softwareEncoderOpened){const t=e.parameters;let r=1;(0,y.A)()&&(r=Math.max(r,navigator.hardwareConcurrency));let s=await e.softwareEncoder.open(t,e.timeBase,r,e.wasmEncoderOptions);if(s){if(!(e.softwareEncoder instanceof x.A&&e.resource))return s;if(f.R8(`webcodecs software encoder open failed, error: ${s}, try to fallback to wasm software encoder`,C,448),e.softwareEncoder.close(),e.softwareEncoder=this.createWasmcodecEncoder(e,e.resource),s=await e.softwareEncoder.open(t,e.timeBase,r,e.wasmEncoderOptions),s)return s;e.targetEncoder=e.softwareEncoder}e.softwareEncoderOpened=!0,e.softwareEncoder instanceof k.A&&(e.firstEncoded=!1)}return 0}async open(e,t,r,s={}){const n=this.tasks.get(e);if(n){if(n.wasmEncoderOptions=s,n.preferWebCodecs&&_.A.videoEncoder&&x.A.isSupported(t,!1)&&n.softwareEncoder instanceof k.A){n.softwareEncoder.close();const e=this.createWebcodecEncoder(n,!1);n.softwareEncoder===n.targetEncoder&&(n.targetEncoder=e),n.softwareEncoder=e}return new(i())((async(e,s)=>{if(n.hardwareEncoder){let e=await n.hardwareEncoder.open(t,r);e&&(f.z3(`cannot open hardware encoder, error: ${e}`,C,493),n.hardwareEncoder.close(),n.hardwareEncoder=null,n.targetEncoder=n.softwareEncoder)}if(n.parameters=t,n.timeBase=r,n.targetEncoder===n.softwareEncoder){let t=await this.openSoftwareEncoder(n);if(t&&(f.z3(`open video software encoder failed, error: ${t}`,C,506),!n.hardwareEncoder))return void e(u.r8)}e(0)}))}f.h2("task not found",C,516)}async resetTask(e){const t=this.tasks.get(e);t&&(t.targetEncoder===t.softwareEncoder?await t.targetEncoder.flush():t.targetEncoder===t.hardwareEncoder&&(t.hardwareEncoder.close(),t.hardwareEncoder=this.createWebcodecEncoder(t),await t.hardwareEncoder.open(t.parameters,t.timeBase),t.targetEncoder=t.hardwareEncoder),g.__(t.avpacketCaches,(e=>{t.avpacketPool.release(e)})),t.avpacketCaches.length=0,t.inputEnd=!1,t.encodeEnd=!1,f.pq(`reset video encode, taskId: ${t.taskId}`,C,539))}async getExtraData(e){const t=this.tasks.get(e);if(t)return t.targetEncoder.getExtraData();f.h2("task not found",C,548)}async getColorSpace(e){const t=this.tasks.get(e);if(t)return t.targetEncoder.getColorSpace();f.h2("task not found",C,556)}async registerTask(e){return this.tasks.has(e.taskId)?u.lh:this.createTask(e)}async unregisterTask(e){const t=this.tasks.get(e);t&&(t.rightPort.close(),t.leftPort.close(),t.softwareEncoder&&t.softwareEncoder.close(),t.hardwareEncoder&&t.hardwareEncoder.close(),g.__(t.avpacketCaches,(e=>{t.avpacketPool.release(e)})),this.tasks.delete(e))}async getTasksInfo(){const e=[];return this.tasks.forEach((t=>{e.push({codecId:n.f[15](t.parameters+4),width:n.f[15](t.parameters+56),height:n.f[15](t.parameters+60),framerate:(0,b.lb)((0,c.A)(t.parameters+72,h.P)),hardware:t.targetEncoder===t.hardwareEncoder})})),e}}},30128:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var s,i,n=r(134),o=r(80662),a=r.n(o),c=r(61499),h=r(12085);class d{constructor(){(0,n.A)(this,"min",void 0),(0,n.A)(this,"max",void 0)}}s=d.prototype,(i=new(a())).set("min",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),i.set("max",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:4,8:0}),(0,h.A)(s,c.Og,!0),(0,h.A)(s,c.dc,4),(0,h.A)(s,c.g7,8),(0,h.A)(s,c.JY,i);class u{constructor(){(0,n.A)(this,"channels",void 0),(0,n.A)(this,"sampleRate",void 0),(0,n.A)(this,"audioFrameSize",void 0),(0,n.A)(this,"audioPacketBytes",void 0),(0,n.A)(this,"audioPacketCount",void 0),(0,n.A)(this,"audioPacketQueueLength",void 0),(0,n.A)(this,"audioDropPacketCount",void 0),(0,n.A)(this,"audioDecodeErrorPacketCount",void 0),(0,n.A)(this,"audioEncodeErrorFrameCount",void 0),(0,n.A)(this,"audioFrameDecodeCount",void 0),(0,n.A)(this,"audioPacketEncodeCount",void 0),(0,n.A)(this,"audioFrameRenderCount",void 0),(0,n.A)(this,"audioFrameDropCount",void 0),(0,n.A)(this,"width",void 0),(0,n.A)(this,"height",void 0),(0,n.A)(this,"keyFrameInterval",void 0),(0,n.A)(this,"gop",void 0),(0,n.A)(this,"videoPacketBytes",void 0),(0,n.A)(this,"videoPacketCount",void 0),(0,n.A)(this,"videoPacketQueueLength",void 0),(0,n.A)(this,"videoDropPacketCount",void 0),(0,n.A)(this,"videoDecodeErrorPacketCount",void 0),(0,n.A)(this,"videoEncodeErrorFrameCount",void 0),(0,n.A)(this,"videoFrameDecodeCount",void 0),(0,n.A)(this,"videoPacketEncodeCount",void 0),(0,n.A)(this,"videoFrameRenderCount",void 0),(0,n.A)(this,"videoFrameDropCount",void 0),(0,n.A)(this,"keyFrameCount",void 0),(0,n.A)(this,"bufferDropBytes",void 0),(0,n.A)(this,"bufferReceiveBytes",void 0),(0,n.A)(this,"bufferSendBytes",void 0),(0,n.A)(this,"bufferOutputBytes",void 0),(0,n.A)(this,"audioBitrate",void 0),(0,n.A)(this,"videoBitrate",void 0),(0,n.A)(this,"videoDecodeFramerate",void 0),(0,n.A)(this,"videoRenderFramerate",void 0),(0,n.A)(this,"videoEncodeFramerate",void 0),(0,n.A)(this,"audioDecodeFramerate",void 0),(0,n.A)(this,"audioRenderFramerate",void 0),(0,n.A)(this,"audioEncodeFramerate",void 0),(0,n.A)(this,"audioFrameDecodeIntervalMax",void 0),(0,n.A)(this,"audioFrameRenderIntervalMax",void 0),(0,n.A)(this,"videoFrameDecodeIntervalMax",void 0),(0,n.A)(this,"videoFrameRenderIntervalMax",void 0),(0,n.A)(this,"bandwidth",void 0),(0,n.A)(this,"jitter",void 0),(0,n.A)(this,"jitterBuffer",void 0),(0,n.A)(this,"audioStutter",void 0),(0,n.A)(this,"videoStutter",void 0),(0,n.A)(this,"audiocodec",void 0),(0,n.A)(this,"videocodec",void 0),(0,n.A)(this,"firstAudioMuxDts",void 0),(0,n.A)(this,"lastAudioMuxDts",void 0),(0,n.A)(this,"firstVideoMuxDts",void 0),(0,n.A)(this,"lastVideoMuxDts",void 0),(0,n.A)(this,"audioCurrentTime",void 0),(0,n.A)(this,"videoCurrentTime",void 0),(0,n.A)(this,"audioNextTime",void 0),(0,n.A)(this,"videoNextTime",void 0)}}!function(e){var t=new(a());t.set("channels",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),t.set("sampleRate",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:4,8:0}),t.set("audioFrameSize",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:8,8:0}),t.set("audioPacketBytes",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:16,8:0}),t.set("audioPacketCount",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:24,8:0}),t.set("audioPacketQueueLength",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:32,8:0}),t.set("audioDropPacketCount",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:40,8:0}),t.set("audioDecodeErrorPacketCount",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:48,8:0}),t.set("audioEncodeErrorFrameCount",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:52,8:0}),t.set("audioFrameDecodeCount",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:56,8:0}),t.set("audioPacketEncodeCount",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:64,8:0}),t.set("audioFrameRenderCount",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:72,8:0}),t.set("audioFrameDropCount",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:80,8:0}),t.set("width",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:84,8:0}),t.set("height",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:88,8:0}),t.set("keyFrameInterval",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:92,8:0}),t.set("gop",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:96,8:0}),t.set("videoPacketBytes",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:104,8:0}),t.set("videoPacketCount",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:112,8:0}),t.set("videoPacketQueueLength",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:120,8:0}),t.set("videoDropPacketCount",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:128,8:0}),t.set("videoDecodeErrorPacketCount",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:136,8:0}),t.set("videoEncodeErrorFrameCount",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:140,8:0}),t.set("videoFrameDecodeCount",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:144,8:0}),t.set("videoPacketEncodeCount",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:152,8:0}),t.set("videoFrameRenderCount",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:160,8:0}),t.set("videoFrameDropCount",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:168,8:0}),t.set("keyFrameCount",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:176,8:0}),t.set("bufferDropBytes",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:184,8:0}),t.set("bufferReceiveBytes",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:192,8:0}),t.set("bufferSendBytes",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:200,8:0}),t.set("bufferOutputBytes",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:208,8:0}),t.set("audioBitrate",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:216,8:0}),t.set("videoBitrate",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:220,8:0}),t.set("videoDecodeFramerate",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:224,8:0}),t.set("videoRenderFramerate",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:228,8:0}),t.set("videoEncodeFramerate",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:232,8:0}),t.set("audioDecodeFramerate",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:236,8:0}),t.set("audioRenderFramerate",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:240,8:0}),t.set("audioEncodeFramerate",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:244,8:0}),t.set("audioFrameDecodeIntervalMax",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:248,8:0}),t.set("audioFrameRenderIntervalMax",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:252,8:0}),t.set("videoFrameDecodeIntervalMax",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:256,8:0}),t.set("videoFrameRenderIntervalMax",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:260,8:0}),t.set("bandwidth",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:264,8:0}),t.set("jitter",{0:19,1:0,2:0,3:0,4:0,5:0,6:0,7:272,8:0}),t.set("jitterBuffer",{0:d,1:0,2:0,3:0,4:0,5:0,6:0,7:280,8:0}),t.set("audioStutter",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:288,8:0}),t.set("videoStutter",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:292,8:0}),t.set("firstAudioMuxDts",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:296,8:0}),t.set("lastAudioMuxDts",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:304,8:0}),t.set("firstVideoMuxDts",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:312,8:0}),t.set("lastVideoMuxDts",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:320,8:0}),t.set("audioCurrentTime",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:328,8:0}),t.set("videoCurrentTime",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:336,8:0}),t.set("audioNextTime",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:344,8:0}),t.set("videoNextTime",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:352,8:0}),(0,h.A)(e,c.Og,!0),(0,h.A)(e,c.dc,8),(0,h.A)(e,c.g7,360),(0,h.A)(e,c.JY,t)}(u.prototype)},51170:(e,t,r)=>{"use strict";r.d(t,{default:()=>Pe});var s=r(134),i=r(80662),n=r.n(i),o=r(54001),a=r.n(o),c=r(61499),h=r(12085),d=r(12264),u=r(73783),l=r(74503),f=r(63939),p=r(50932),m=r(9599),g=r(29170),A=r(94300),v=r(30128),w=r(77162),y=r(87243),b=r(72480),_=r(31138),k=r(18667),x=r(88506),I=r(8284),M=r(67672),P=r(95335),C=r(76045),E=r(4624),T=r(95797),B=r(86834),S=r(44328),U=r(77231),D=r(14686),L=r(28875),R=r(68175),$=r(41678),F=r(62751),z=r(45597),O=r(84149),W=r(9705),N=r(79756),V=r(37837),H=r(71766),j=r(59475),G=r(96172),Q=r(62636),q=r(56024),Y=r(71517),K=r(95832),X=r(22576),J=r(62815),Z=r(67659),ee=r(21477),te=r(82014),re=r(13724),se=r(38656),ie=r(2849),ne=r(86932),oe=r(54058),ae=r(79283),ce=r(10922),he=r(548),de=r(44690),ue=r(94561),le=r(49847),fe=r(77580),pe=r(79686),me=r(364),ge=r(67603),Ae=r(43607),ve=r(95073),we=r(97317),ye=r(24310),be=r(93147);const _e="src/avtranscoder/AVTranscoder.ts";class ke{constructor(){(0,s.A)(this,"avpacketList",void 0),(0,s.A)(this,"avframeList",void 0),(0,s.A)(this,"avpacketListMutex",void 0),(0,s.A)(this,"avframeListMutex",void 0)}}var xe,Ie;xe=ke.prototype,(Ie=new(n())).set("avpacketList",{0:d.A,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),Ie.set("avframeList",{0:d.A,1:0,2:0,3:0,4:0,5:0,6:0,7:12,8:0}),Ie.set("avpacketListMutex",{0:u.eu,1:0,2:0,3:0,4:0,5:0,6:0,7:24,8:0}),Ie.set("avframeListMutex",{0:u.eu,1:0,2:0,3:0,4:0,5:0,6:0,7:28,8:0}),(0,h.A)(xe,c.Og,!0),(0,h.A)(xe,c.dc,4),(0,h.A)(xe,c.g7,32),(0,h.A)(xe,c.JY,Ie);const Me={};class Pe extends G.A{constructor(e){super(!0),(0,s.A)(this,"level",E.rD),(0,s.A)(this,"DemuxThreadReady",void 0),(0,s.A)(this,"AudioThreadReady",void 0),(0,s.A)(this,"VideoThreadReady",void 0),(0,s.A)(this,"MuxThreadReady",void 0),(0,s.A)(this,"IOThread",void 0),(0,s.A)(this,"DemuxerThread",void 0),(0,s.A)(this,"MuxThread",void 0),(0,s.A)(this,"AudioDecoderThread",void 0),(0,s.A)(this,"AudioFilterThread",void 0),(0,s.A)(this,"AudioEncoderThread",void 0),(0,s.A)(this,"VideoDecoderThread",void 0),(0,s.A)(this,"VideoFilterThread",void 0),(0,s.A)(this,"VideoEncoderThread",void 0),(0,s.A)(this,"GlobalData",void 0),(0,s.A)(this,"tasks",void 0),(0,s.A)(this,"options",void 0),(0,s.A)(this,"reportTimer",void 0),this.options=P.X$({},Me,e),this.GlobalData=(0,l.A)(ke),u.Ts(this.GlobalData[c.o9]+24),u.Ts(this.GlobalData[c.o9]+28),this.tasks=new(n()),this.reportTimer=new oe.A((()=>{this.report()}),0,1e3),E.pq("create transcoder",_e,369)}async getResource(e,t,r){var s;const i=null!=t?`${e}-${t}`:e;if(Pe.Resource.has(i))return Pe.Resource.get(i);const n=this.options.getWasm?this.options.getWasm(e,t,r):(0,ge.A)(null!==(s=this.options.wasmBaseUrl)&&void 0!==s?s:`https://cdn.jsdelivr.net/gh/zhaohappy/libmedia@${"v0.6.1-1-g923bfea".split("-")[0].replace(/^[v|n]/,"")}/dist`,e,t);if(n){let e;if((B.A.safari&&!B.A.checkVersion(B.A.version,"16.1",!0)||de.A.ios&&!B.A.checkVersion(de.A.version,"16.1",!0))&&(M.Yj(n)||M.sv(n)))if(M.Yj(n)){const t={method:"GET",headers:{},mode:"cors",cache:"default",referrerPolicy:"no-referrer-when-downgrade"},r=await fetch(n,t);e=await r.arrayBuffer()}else e=n;else e=await(0,ue.A)(n,0===r);return Pe.Resource.set(i,e),e}}report(){this.tasks.forEach((e=>{if(e.startTime){const t=e.stats.videoPacketEncodeCount||e.stats.audioPacketEncodeCount,r=(0,ne.A)()-e.startTime;let s=BigInt(0),i=BigInt(0);if(e.stats.lastVideoMuxDts){const t=e.streams.find((e=>0===f.f[15](e.input.codecpar)));s=e.stats.lastVideoMuxDts-e.stats.firstVideoMuxDts,i=t.output?(0,S.k)(t.output.duration,t.output.timeBase,U.i0):(0,S.k)(t.input.duration,t.input.timeBase,U.i0)}if(e.stats.lastAudioMuxDts&&!s){const t=e.streams.find((e=>1===f.f[15](e.input.codecpar)));s=e.stats.lastAudioMuxDts-e.stats.firstAudioMuxDts,i=t.output?(0,S.k)(t.output.duration,t.output.timeBase,U.i0):(0,S.k)(t.input.duration,t.input.timeBase,U.i0)}const n=r?Number(t)/(r/1e3):Number(t),o=Number(e.stats.bufferOutputBytes)/1e3,a=s?8*o/(Number(s)/1e3):0,c=Number(s)/1e3/(r/1e3);let h=i?Number(s)/Number(i)*100:0;h>100&&(h=100),E.pq(`[${e.taskId}] frame=${t} fps=${n.toFixed(2)} size=${o}kB time=${(0,he.iV)(s)} bitrate=${a.toFixed(2)}kbps speed=${c.toFixed(2)}x progress=${h.toFixed(2)}%`,_e,457),this.options.onprogress&&this.options.onprogress(e.taskId,h)}}))}async startDemuxPipeline(){return this.DemuxThreadReady?this.DemuxThreadReady:this.DemuxThreadReady=new(a())((async e=>{this.IOThread=await(0,x.pt)(y.A,{name:"IOThread"},87243).run(),this.IOThread.setLogLevel(this.level),this.DemuxerThread=await(0,x.pt)(b.A,{name:"DemuxerThread"},72480).run(),this.DemuxerThread.setLogLevel(this.level),e()}))}async startVideoPipeline(){return this.VideoThreadReady?this.VideoThreadReady:this.VideoThreadReady=new(a())((async e=>{this.VideoDecoderThread=await(0,x.pt)(_.A,{name:"VideoDecoderThread",disableWorker:B.A.safari&&!B.A.checkVersion(B.A.version,"16.1",!0)||de.A.ios&&!B.A.checkVersion(de.A.version,"16.1",!0)},31138).run(),this.VideoDecoderThread.setLogLevel(this.level),this.VideoFilterThread=await(0,x.pt)(se.A,{name:"VideoFilterThread",disableWorker:B.A.safari&&!B.A.checkVersion(B.A.version,"16.1",!0)||de.A.ios&&!B.A.checkVersion(de.A.version,"16.1",!0)},38656).run(),this.VideoFilterThread.setLogLevel(this.level),this.VideoEncoderThread=await(0,x.pt)($.A,{name:"VideoEncoderThread",disableWorker:B.A.safari&&!B.A.checkVersion(B.A.version,"16.1",!0)||de.A.ios&&!B.A.checkVersion(de.A.version,"16.1",!0)},41678).run(),this.VideoEncoderThread.setLogLevel(this.level),e()}))}async startAudioPipeline(){return this.AudioThreadReady?this.AudioThreadReady:this.AudioThreadReady=new(a())((async e=>{this.AudioDecoderThread=await(0,x.pt)(k.A,{name:"AudioDecoderThread",disableWorker:B.A.safari&&!B.A.checkVersion(B.A.version,"16.1",!0)||de.A.ios&&!B.A.checkVersion(de.A.version,"16.1",!0)},18667).run(),this.AudioDecoderThread.setLogLevel(this.level),this.AudioFilterThread=await(0,x.pt)(se.A,{name:"AudioFilterThread",disableWorker:B.A.safari&&!B.A.checkVersion(B.A.version,"16.1",!0)||de.A.ios&&!B.A.checkVersion(de.A.version,"16.1",!0)},38656).run(),this.AudioFilterThread.setLogLevel(this.level),this.AudioEncoderThread=await(0,x.pt)(R.A,{name:"AudioEncoderThread",disableWorker:B.A.safari&&!B.A.checkVersion(B.A.version,"16.1",!0)||de.A.ios&&!B.A.checkVersion(de.A.version,"16.1",!0)},68175).run(),this.AudioEncoderThread.setLogLevel(this.level),e()}))}async startMuxPipeline(){return this.MuxThreadReady?this.MuxThreadReady:this.MuxThreadReady=new(a())((async e=>{this.MuxThread=await(0,x.pt)(z.A,{name:"MuxThread",disableWorker:!T.A.workerMSE},45597).run(),this.MuxThread.setLogLevel(this.level),e()}))}isHls(e){return e.ext?"m3u8"===e.ext||"m3u"===e.ext:e.options.input.file instanceof le.A?"m3u8"===e.options.input.file.ext:"m3u8"===e.options.input.ext}isDash(e){return e.ext?"mpd"===e.ext:e.options.input.file instanceof le.A?"mpd"===e.options.input.file.ext:"mpd"===e.options.input.ext}async ready(){await this.startDemuxPipeline(),await this.startAudioPipeline(),await this.startVideoPipeline(),await this.startMuxPipeline(),E.pq("AVTranscoder pipelines started",_e,581)}changeAVStreamTimebase(e,t){let r=e.startTime,s=e.duration;r!==U.Dh&&(r=(0,S.k)(r,e.timeBase,t)),s!==U.Dh&&(s=(0,S.k)(s,e.timeBase,t)),e.duration=s,e.startTime=r,e.timeBase.den=t.den,e.timeBase.num=t.num}copyAVStreamInterface(e,t){const r=P.X$({},t);return r.codecpar=(0,V.Gy)(168),(0,H.Yi)(r.codecpar,t.codecpar),r.timeBase={den:1,num:1},r.timeBase.den=t.timeBase.den,r.timeBase.num=t.timeBase.num,f.f[20](r.codecpar+12)&&((0,V.Eb)(f.f[20](r.codecpar+12)),p.M[20](r.codecpar+12,0),p.M[15](r.codecpar+16,0)),e.options.duration&&(r.duration=(0,S.k)(BigInt(Math.floor(e.options.duration)),U.i0,r.timeBase)),r.metadata.encoder="libmedia-v0.6.1-1-g923bfea",r}async setTaskInput(e){const t=e.taskId,r=e.options,s=e.ioloader2DemuxerChannel=(0,ae.A)(),i=e.stats;let n,o=0;if(M.Yj(r.input.file)){let{info:e,type:a,ext:h}=await(0,me.A)(r.input.file,r.input.ext,r.input.http);n=h,o=await this.IOThread.registerTask.transfer(s.port1).invoke({type:a,info:{...e},range:{from:-1,to:-1},taskId:t,options:{isLive:!1},rightPort:s.port1,stats:i[c.o9]})}else if(r.input.file instanceof File)n=r.input.file.name.split(".").pop(),o=await this.IOThread.registerTask.transfer(s.port1).invoke({type:1,info:{file:r.input.file},range:{from:-1,to:-1},taskId:t,options:{isLive:!1},rightPort:s.port1,stats:i[c.o9]});else if(r.input.file instanceof le.A){const t=e.inputIPCPort=new O.Ay(s.port1);t.on(O.S3,(async r=>{switch(r.method){case"open":{const s=await e.options.input.file.open();if(s<0){E.z3(`custom loader open error, ${s}, taskId: ${e.taskId}`,_e,693),t.reply(r,null,s);break}t.reply(r,s);break}case"read":{const s=r.params.pointer,i=r.params.length,n=(0,D.JW)(s,i);try{const s=await e.options.input.file.read(i,n);e.stats.bufferReceiveBytes+=BigInt(0|s),t.reply(r,s)}catch(s){E.z3(`loader read error, ${s}, taskId: ${e.taskId}`,_e,715),t.reply(r,W.LR)}break}case"write":{const s=r.params.pointer,i=r.params.length,n=(0,D.JW)(s,i);try{const s=await e.options.input.file.write(n);e.stats.bufferSendBytes+=i,t.reply(r,s)}catch(s){E.z3(`loader write error, ${s}, taskId: ${e.taskId}`,_e,737),t.reply(r,W.LR)}break}case"seek":{const s=r.params.pos;try{const i=await e.options.input.file.seek(s);if(i<0){E.z3(`custom loader seek error, ${i}, taskId: ${e.taskId}`,_e,752),t.reply(r,null,i);break}t.reply(r,i)}catch(s){E.z3(`loader seek error, ${s}, taskId: ${e.taskId}`,_e,759),t.reply(r,null,s)}break}case"size":t.reply(r,await e.options.input.file.size())}}))}else E.h2("invalid source",_e,773);n&&(e.ext=n),o<0&&E.h2(`register io task failed, ret: ${o}, taskId: ${t}`,_e,782)}async setTaskOutput(e){const t=e.muxer2OutputChannel=(0,ae.A)(),r=e.outputIPCPort=new O.Ay(t.port2);let s;if(e.options.output.format)s=F.iW[e.options.output.format];else if(e.options.output.file instanceof FileSystemFileHandle){let t=e.options.output.file.name.split(".").pop();s=F.HR[t]}M.ai(s)||E.h2("invalid output format",_e,801),e.format=s;let i,n=await this.MuxThread.registerTask.transfer(t.port1).invoke({taskId:e.taskId,format:s,avpacketList:this.GlobalData[c.o9],avpacketListMutex:this.GlobalData[c.o9]+24,stats:e.stats[c.o9],rightPort:t.port1,formatOptions:e.options.output.formatOptions});n<0&&E.h2(`register mux task failed, ret: ${n}, taskId: ${e.taskId}`,_e,818),e.options.output.file instanceof FileSystemFileHandle?(i=e.safeFileIO=new j.A(e.options.output.file),await e.safeFileIO.ready()):i={write:t=>{e.options.output.file.writeBuffer(t)},appendBufferByPosition:(t,r)=>{e.options.output.file.flush(),e.options.output.file.writeBuffer(t),e.options.output.file.flushToPos(BigInt(Math.floor(r)))},seek:t=>{e.options.output.file.seek(BigInt(Math.floor(t)))},close:()=>{e.options.output.file.flush()}},r.on(O.Wo,(async t=>{switch(t.method){case"write":try{if(null!=t.params.pos?i.appendBufferByPosition(t.params.data,Number(t.params.pos)):i.write(t.params.data),e.options.output.file instanceof FileSystemFileHandle&&e.safeFileIO.writeQueueSize>5)try{for(await this.MuxThread.pause(e.taskId);e.safeFileIO.writeQueueSize>5;)await new re.A(0);await this.MuxThread.unpause(e.taskId)}catch(e){}}catch(t){E.z3(`ioWriter write error, ${t}, taskId: ${e.taskId}`,_e,875)}break;case"seek":{const r=t.params.pos;try{i.seek(Number(r))}catch(t){E.z3(`ioWriter seek error, ${t}, taskId: ${e.taskId}`,_e,888)}break}case"end":await i.close(),await this.clearTask(e),this.fire(Q.X,[e.taskId]),E.pq(`transcode ended, taskId: ${e.taskId}, cost: ${(0,he.iV)(BigInt(Math.floor((0,ne.A)()-e.startTime)))}`,_e,896);break;case"error":await i.close(),await this.clearTask(e),this.fire(Q.L,[e.taskId]),E.pq(`transcode error, taskId: ${e.taskId}`,_e,904)}}))}async analyzeInputStreams(e){const t=e.taskId,r=e.ioloader2DemuxerChannel,s=e.ext,i=e.stats;let n,o=0;if(this.isDash(e)){await this.IOThread.open(t);const o=await this.IOThread.hasAudio(t),a=await this.IOThread.hasVideo(t);o&&a?(n=(0,I.A)(),await this.DemuxerThread.registerTask.transfer(r.port2,e.controller.getDemuxerRenderControlPort()).invoke({taskId:t,leftPort:r.port2,controlPort:e.controller.getDemuxerRenderControlPort(),format:F.HR[s],stats:i[c.o9],isLive:!1,flags:2,ioloaderOptions:{mediaType:"audio"},avpacketList:this.GlobalData[c.o9],avpacketListMutex:this.GlobalData[c.o9]+24,formatOptions:e.options.input.formatOptions}),await this.DemuxerThread.registerTask({taskId:n,mainTaskId:t,flags:2,format:F.HR[s],stats:i[c.o9],isLive:!1,ioloaderOptions:{mediaType:"video"},avpacketList:this.GlobalData[c.o9],avpacketListMutex:this.GlobalData[c.o9]+24,formatOptions:e.options.input.formatOptions})):await this.DemuxerThread.registerTask.transfer(r.port2,e.controller.getDemuxerRenderControlPort()).invoke({taskId:t,leftPort:r.port2,controlPort:e.controller.getDemuxerRenderControlPort(),format:F.HR[s],stats:i[c.o9],isLive:!1,flags:2,ioloaderOptions:{mediaType:o?"audio":"video"},avpacketList:this.GlobalData[c.o9],avpacketListMutex:this.GlobalData[c.o9]+24,formatOptions:e.options.input.formatOptions})}else await this.DemuxerThread.registerTask.transfer(r.port2,e.controller.getDemuxerRenderControlPort()).invoke({taskId:t,leftPort:r.port2,controlPort:e.controller.getDemuxerRenderControlPort(),format:F.HR[s],stats:i[c.o9],isLive:!1,flags:this.isHls(e)?2:0,avpacketList:this.GlobalData[c.o9],avpacketListMutex:this.GlobalData[c.o9]+24,formatOptions:e.options.input.formatOptions});o=await this.DemuxerThread.openStream(t,15e3),o<0&&E.h2(`open stream failed, ret: ${o}, taskId: ${t}`,_e,998);let a=await this.DemuxerThread.analyzeStreams(t);if(!M.ai(a)){if(a.streams.length||E.h2("not found any stream",_e,1006),n){o=await this.DemuxerThread.openStream(n,15e3),o<0&&E.h2(`open stream failed, ret: ${o}, taskId: ${t}`,_e,1012);const e=await this.DemuxerThread.analyzeStreams(n);if(M.ai(e))return void E.h2(`analyze stream failed, ret: ${e}`,_e,1016);e.streams.length||E.h2("not found any stream",_e,1020),a.streams=a.streams.concat(e.streams)}if(n&&(e.subTaskId=n),this.isHls(e)||this.isDash(e)){const e=1e3*await this.IOThread.getDuration(t);if(e>0)for(let t=0;t<a.streams.length;t++)a.streams[t].duration=(0,S.k)(BigInt(Math.floor(e)),U.i0,a.streams[t].timeBase)}return a}E.h2(`analyze stream failed, ret: ${a}`,_e,1002)}async handleAudioStream(e,t){const r=t.options.output.audio;if(null!=r&&r.disable)return 0;if("copy"!==(null==r?void 0:r.codec)||t.options.start||t.options.duration){const s=(0,ae.A)(),i=(0,ae.A)(),n=(0,ae.A)(),o=(0,ae.A)(),a=this.copyAVStreamInterface(t,e),h=(0,I.A)();let d=0;if(r){if(r.codec&&"copy"!==r.codec){const t=F.n1[r.codec];M.ai(t)||E.h2(`invalid codec name(${r.codec})`,_e,1085),p.M[15](a.codecpar+4,t),f.f[15](a.codecpar+4)!==f.f[15](e.codecpar+4)&&(p.M[15](a.codecpar+48,U.N_),p.M[15](a.codecpar+52,U.N_))}if(r.bitrate&&p.M[17](a.codecpar+32,BigInt(Math.floor(r.bitrate))),r.channels&&p.M[15](a.codecpar+116,r.channels),r.sampleRate&&p.M[15](a.codecpar+136,r.sampleRate),r.sampleFmt){const e=F.Sz[r.sampleFmt];M.ai(e)||E.h2(`invalid sampleFmt name(${r.sampleFmt})`,_e,1106),p.M[15](a.codecpar+28,e)}r.profile&&p.M[15](a.codecpar+48,r.profile)}if(86018===f.f[15](a.codecpar+4))p.M[15](a.codecpar+28,8),f.f[15](a.codecpar+136)>48e3&&p.M[15](a.codecpar+136,48e3);else if(86017===f.f[15](a.codecpar+4))p.M[15](a.codecpar+28,8),f.f[15](a.codecpar+136)>48e3&&p.M[15](a.codecpar+136,48e3);else if(86076===f.f[15](a.codecpar+4))p.M[15](a.codecpar+136,48e3);else if(86028===f.f[15](a.codecpar+4))1!==f.f[15](a.codecpar+28)&&2!==f.f[15](a.codecpar+28)&&p.M[15](a.codecpar+28,1);else if(65543===f.f[15](a.codecpar+4)||65542===f.f[15](a.codecpar+4))p.M[15](a.codecpar+136,8e3),p.M[17](a.codecpar+32,BigInt(64e3)),p.M[15](a.codecpar+28,1);else if(86051===f.f[15](a.codecpar+4))p.M[15](a.codecpar+28,1),f.f[15](a.codecpar+136)>32e3&&p.M[15](a.codecpar+136,32e3);else if(86020===f.f[15](a.codecpar+4)){p.M[15](a.codecpar+28,2);let e=f.f[15](a.codecpar+116);const t=6===e||3===e?1:0;t&&e--;const r=((0,ve.A)(132+1389*e+72*t,32)*f.f[15](a.codecpar+136)-f.f[15](a.codecpar+136)+1)/512;p.M[17](a.codecpar+32,Ae.T9(BigInt(0|r),f.f[17](a.codecpar+32)))}f.f[15](a.codecpar+48)===U.N_&&(86018===f.f[15](a.codecpar+4)?p.M[15](a.codecpar+48,2):86017===f.f[15](a.codecpar+4)&&p.M[15](a.codecpar+48,34)),1===t.format&&this.changeAVStreamTimebase(a,{num:1,den:f.f[15](a.codecpar+136)}),await this.DemuxerThread.connectStreamTask.transfer(s.port1).invoke(t.taskId,e.index,s.port1);let u=await this.getResource("decoder",f.f[15](e.codecpar+4),f.f[15](e.codecpar));if(!u){if(!T.A.audioDecoder)return E.z3(`audio decoder codecId ${f.f[15](e.codecpar+4)} not support`,_e,1194),(0,H.dn)(a.codecpar),W.NU;if(!(await AudioDecoder.isConfigSupported({codec:(0,L.A)(e.codecpar),sampleRate:f.f[15](e.codecpar+136),numberOfChannels:f.f[15](e.codecpar+116)})).supported)return E.z3(`AudioDecoder codecId ${f.f[15](e.codecpar+4)} not support`,_e,1188),(0,H.dn)(a.codecpar),W.NU}if(await this.AudioDecoderThread.registerTask.transfer(s.port2,n.port1).invoke({taskId:h,resource:u,leftPort:s.port2,rightPort:n.port1,stats:t.stats[c.o9],avpacketList:this.GlobalData[c.o9],avpacketListMutex:this.GlobalData[c.o9]+24,avframeList:this.GlobalData[c.o9]+12,avframeListMutex:this.GlobalData[c.o9]+28}),d=await this.AudioDecoderThread.open(h,e.codecpar),d<0)return E.z3(`cannot open audio ${(0,he.eG)(f.f[15](e.codecpar),f.f[15](e.codecpar+4))} decoder`,_e,1218),(0,H.dn)(a.codecpar),d;let l=await this.getResource("resampler");if(!l)return E.z3("resampler not found",_e,1225),(0,H.dn)(a.codecpar),W.NU;const m=[],g=[];let A,v;const w=(0,ie.Fn)("resampler",{resource:l,output:{channels:f.f[15](a.codecpar+116),sampleRate:f.f[15](a.codecpar+136),format:f.f[15](a.codecpar+28)}});if(m.push(w),A={id:w.id,port:n.port2},v={id:w.id,port:o.port1},t.options.start||t.options.duration){const r=(0,S.k)(BigInt(Math.floor(t.options.start||0)),U.i0,e.timeBase),s=(0,ie.Fn)("range",{start:r,end:t.options.duration?(0,S.k)(BigInt(Math.floor(t.options.duration)),U.i0,U.KR)+r:-BigInt(1)});m.push(s),A={id:s.id,port:n.port2},g.push({parent:s.id,child:w.id})}await this.AudioFilterThread.registerTask.transfer(n.port2,o.port1).invoke({taskId:h,graph:{vertices:m,edges:g},inputPorts:[A],outputPorts:[v],stats:t.stats[c.o9],avframeList:this.GlobalData[c.o9]+12,avframeListMutex:this.GlobalData[c.o9]+28});let y=await this.getResource("encoder",f.f[15](a.codecpar+4),f.f[15](a.codecpar));if(!y){if(!T.A.audioEncoder)return E.z3(`${(0,he.eG)(f.f[15](a.codecpar),f.f[15](a.codecpar+4))} encoder codecId ${f.f[15](a.codecpar+4)} not support`,_e,1304),(0,H.dn)(a.codecpar),W.NU;if(!(await AudioEncoder.isConfigSupported({codec:(0,N.A)(a.codecpar),sampleRate:f.f[15](a.codecpar+136),numberOfChannels:f.f[15](a.codecpar+116),bitrate:Number(BigInt.asIntN(32,f.f[17](a.codecpar+32))),bitrateMode:"constant"})).supported)return E.z3(`AudioEncoder ${(0,he.eG)(f.f[15](a.codecpar),f.f[15](a.codecpar+4))} codecId ${f.f[15](a.codecpar+4)} not support`,_e,1298),(0,H.dn)(a.codecpar),W.NU}return await this.AudioEncoderThread.registerTask.transfer(o.port2,i.port1).invoke({taskId:h,resource:y,leftPort:o.port2,rightPort:i.port1,stats:t.stats[c.o9],avpacketList:this.GlobalData[c.o9],avpacketListMutex:this.GlobalData[c.o9]+24,avframeList:this.GlobalData[c.o9]+12,avframeListMutex:this.GlobalData[c.o9]+28}),d=await this.AudioEncoderThread.open(h,a.codecpar,{num:a.timeBase.num,den:a.timeBase.den}),d<0?(E.z3(`cannot open audio ${(0,he.eG)(f.f[15](a.codecpar),f.f[15](a.codecpar+4))} encoder`,_e,1328),(0,H.dn)(a.codecpar),d):(await this.MuxThread.addStream.transfer(i.port2).invoke(t.taskId,a,i.port2),t.streams.push({taskId:h,input:e,output:a,demuxer2DecoderChannel:s,decoder2FilterChannel:n,filter2EncoderChannel:o,encoder2MuxerChannel:i}),0)}{const r=(0,ae.A)();return await this.DemuxerThread.connectStreamTask.transfer(r.port1).invoke(t.taskId,e.index,r.port1),await this.MuxThread.addStream.transfer(r.port2).invoke(t.taskId,e,r.port2),t.streams.push({input:e,demuxer2MuxerChannel:r}),0}}async handleVideoStream(e,t){const r=t.options.output.video;if(null!=r&&r.disable)return 0;if("copy"!==(null==r?void 0:r.codec)||t.options.start||t.options.duration){var s,i,n;const h=(0,ae.A)(),d=(0,ae.A)(),u=(0,ae.A)(),l=(0,ae.A)(),A=this.copyAVStreamInterface(t,e),v=(0,I.A)();let w=0;if(r){if(r.codec&&"copy"!==r.codec){const t=F._R[r.codec];M.ai(t)||E.h2(`invalid codec name(${r.codec})`,_e,1390),p.M[15](A.codecpar+4,t),f.f[15](A.codecpar+4)!==f.f[15](e.codecpar+4)&&(p.M[15](A.codecpar+48,U.N_),p.M[15](A.codecpar+52,U.N_))}if(r.width&&p.M[15](A.codecpar+56,r.width),r.height&&p.M[15](A.codecpar+60,r.height),r.bitrate&&p.M[17](A.codecpar+32,BigInt(Math.floor(r.bitrate))),r.pixfmt){const e=F.qO[r.pixfmt];M.ai(e)||E.h2(`invalid pixfmt name(${r.pixfmt})`,_e,1411),p.M[15](A.codecpar+28,e)}r.framerate&&(p.M[15](A.codecpar+72,r.framerate>>>0),p.M[15](A.codecpar+76,1)),r.aspect&&(p.M[15](A.codecpar+68,r.aspect.den),p.M[15](A.codecpar+64,r.aspect.num)),r.profile&&p.M[15](A.codecpar+48,r.profile),r.level&&p.M[15](A.codecpar+52,r.level),r.delay&&p.M[15](A.codecpar+104,r.delay)}if(f.f[15](A.codecpar+48)===U.N_)if(27===f.f[15](A.codecpar+4)){var o;const e=we.g[f.f[15](A.codecpar+28)];p.M[15](A.codecpar+48,10===(null==e||null===(o=e.comp[0])||void 0===o?void 0:o.depth)?110:100)}else if(173===f.f[15](A.codecpar+4)){var a;const e=we.g[f.f[15](A.codecpar+28)];p.M[15](A.codecpar+48,10===(null==e||null===(a=e.comp[0])||void 0===a?void 0:a.depth)?2:1)}else 196===f.f[15](A.codecpar+4)||(225===f.f[15](A.codecpar+4)||167===f.f[15](A.codecpar+4)||139===f.f[15](A.codecpar+4))&&p.M[15](A.codecpar+48,0);if(f.f[15](A.codecpar+52)===U.N_&&(27===f.f[15](A.codecpar+4)?p.M[15](A.codecpar+52,J.k9(f.f[15](A.codecpar+56),f.f[15](A.codecpar+60),(0,S.lb)((0,g.A)(A.codecpar+72,m.P)))):173===f.f[15](A.codecpar+4)?p.M[15](A.codecpar+52,Z.k9(f.f[15](A.codecpar+48),f.f[15](A.codecpar+56),f.f[15](A.codecpar+60),(0,S.lb)((0,g.A)(A.codecpar+72,m.P)),Number(f.f[17](A.codecpar+32)))):196===f.f[15](A.codecpar+4)||(225===f.f[15](A.codecpar+4)?p.M[15](A.codecpar+52,ee.k9(f.f[15](A.codecpar+56),f.f[15](A.codecpar+60),(0,S.lb)((0,g.A)(A.codecpar+72,m.P)))):167===f.f[15](A.codecpar+4)&&p.M[15](A.codecpar+52,te.k9(f.f[15](A.codecpar+56),f.f[15](A.codecpar+60),(0,S.lb)((0,g.A)(A.codecpar+72,m.P)))))),r&&null!=r.delay||p.M[15](A.codecpar+104,4),27!==f.f[15](A.codecpar+4)&&12!==f.f[15](A.codecpar+4)&&173!==f.f[15](A.codecpar+4)&&196!==f.f[15](A.codecpar+4)||(2===t.format?p.M[15](A.codecpar+160,2):p.M[15](A.codecpar+160,1)),12===f.f[15](A.codecpar+4)&&A.timeBase.den>65535)this.changeAVStreamTimebase(A,{num:1,den:65535});else if(1===t.format){const e=(0,S.lb)((0,g.A)(A.codecpar+72,m.P));e===Math.floor(e)&&this.changeAVStreamTimebase(A,{num:1,den:256*e})}await this.DemuxerThread.connectStreamTask.transfer(h.port1).invoke(t.subTaskId||t.taskId,e.index,h.port1);let y=await this.getResource("decoder",f.f[15](e.codecpar+4),f.f[15](e.codecpar));if(!y){if(!T.A.videoDecoder)return E.z3(`video decoder codecId ${f.f[15](e.codecpar+4)} not support`,_e,1526),(0,H.dn)(A.codecpar),W.NU;if(!(await VideoDecoder.isConfigSupported({codec:(0,L.A)(e.codecpar)})).supported)return E.z3(`VideoDecoder codecId ${f.f[15](e.codecpar+4)} not support`,_e,1520),(0,H.dn)(A.codecpar),W.NU}const b=we.g[f.f[15](e.codecpar+28)];let _=!0;if((null==b||null===(s=b.comp[0])||void 0===s?void 0:s.depth)>8&&(_=!1),await this.VideoDecoderThread.registerTask.transfer(h.port2,u.port1).invoke({taskId:v,resource:y,leftPort:h.port2,rightPort:u.port1,stats:t.stats[c.o9],enableHardware:!!t.options.input.enableHardware&&!!t.options.input.enableWebCodecs&&_,avpacketList:this.GlobalData[c.o9],avpacketListMutex:this.GlobalData[c.o9]+24,avframeList:this.GlobalData[c.o9]+12,avframeListMutex:this.GlobalData[c.o9]+28,preferWebCodecs:!(0,ye.A)(e.codecpar)&&!(0,be.A)(e.codecpar)&&!!t.options.input.enableWebCodecs}),w=await this.VideoDecoderThread.open(v,e.codecpar),w<0)return E.z3(`cannot open video ${(0,he.eG)(f.f[15](e.codecpar),f.f[15](e.codecpar+4))} decoder`,_e,1559),(0,H.dn)(A.codecpar),w;let k=await this.getResource("scaler");k||E.h2("scaler not found",_e,1566);const x=[],C=[];let B,D,R;const $=(0,ie.Fn)("scaler",{resource:k,output:{width:f.f[15](A.codecpar+56),height:f.f[15](A.codecpar+60),format:f.f[15](A.codecpar+28)}});if(x.push($),B={id:$.id,port:u.port2},D={id:$.id,port:l.port1},t.options.start||t.options.duration){const e=(0,S.k)(BigInt(Math.floor(t.options.start||0)),U.i0,U.KR),r=(0,ie.Fn)("range",{start:e,end:t.options.duration?(0,S.k)(BigInt(Math.floor(t.options.duration)),U.i0,U.KR)+e:-BigInt(1)});x.push(r),B={id:r.id,port:u.port2},C.push({parent:r.id,child:$.id}),R=r.id}if((0,S.lb)((0,g.A)(e.codecpar+72,m.P))>(0,S.lb)((0,g.A)(A.codecpar+72,m.P))){const e=(0,ie.Fn)("framerate",{framerate:{num:f.f[15](A.codecpar+72),den:f.f[15](A.codecpar+76)}});x.push(e),C.length=0,R?(C.push({parent:R,child:e.id}),C.push({parent:e.id,child:$.id})):(B={id:e.id,port:u.port2},C.push({parent:e.id,child:$.id}))}await this.VideoFilterThread.registerTask.transfer(u.port2,l.port1).invoke({taskId:v,graph:{vertices:x,edges:C},inputPorts:[B],outputPorts:[D],stats:t.stats[c.o9],avframeList:this.GlobalData[c.o9]+12,avframeListMutex:this.GlobalData[c.o9]+28});let z=await this.getResource("encoder",f.f[15](A.codecpar+4),f.f[15](A.codecpar));if(!z){if(!T.A.videoEncoder)return E.z3(`${(0,he.eG)(f.f[15](A.codecpar),f.f[15](A.codecpar+4))} encoder codecId ${f.f[15](A.codecpar+4)} not support`,_e,1677),(0,H.dn)(A.codecpar),W.NU;if(!(await VideoEncoder.isConfigSupported({codec:(0,L.A)(A.codecpar),width:f.f[15](A.codecpar+56),height:f.f[15](A.codecpar+60)})).supported)return E.z3(`VideoEncoder ${(0,he.eG)(f.f[15](A.codecpar),f.f[15](A.codecpar+4))} codecId ${f.f[15](A.codecpar+4)} not support`,_e,1671),(0,H.dn)(A.codecpar),W.NU}const O={},N={};return 173===f.f[15](A.codecpar+4)?(N.enableThreadPool=!0,N.enableThreadCountRate=2):167===f.f[15](A.codecpar+4)&&(N.enableThreadPool=!0),null!==(i=t.options)&&void 0!==i&&null!==(i=i.output)&&void 0!==i&&null!==(i=i.video)&&void 0!==i&&i.encoderOptions&&P.__(t.options.output.video.encoderOptions,((e,t)=>{O[t]=e})),await this.VideoEncoderThread.registerTask.transfer(l.port2,d.port1).invoke({taskId:v,resource:z,resourceExtraData:N,leftPort:l.port2,rightPort:d.port1,stats:t.stats[c.o9],enableHardware:!!r.enableHardware&&!!r.enableWebCodecs,avpacketList:this.GlobalData[c.o9],avpacketListMutex:this.GlobalData[c.o9]+24,avframeList:this.GlobalData[c.o9]+12,avframeListMutex:this.GlobalData[c.o9]+28,gop:(0,S.lb)((0,g.A)(A.codecpar+72,m.P))*(null!==(n=r.keyFrameInterval)&&void 0!==n?n:5e3)/1e3|0,preferWebCodecs:!(0,ye.A)(A.codecpar)&&!(0,be.A)(A.codecpar)&&!!r.enableWebCodecs}),w=await this.VideoEncoderThread.open(v,A.codecpar,{num:A.timeBase.num,den:A.timeBase.den},O),w<0?(E.z3(`cannot open video ${(0,he.eG)(f.f[15](A.codecpar),f.f[15](A.codecpar+4))} encoder`,_e,1724),(0,H.dn)(A.codecpar),w):(await this.MuxThread.addStream.transfer(d.port2).invoke(t.taskId,A,d.port2),t.streams.push({taskId:v,input:e,output:A,demuxer2DecoderChannel:h,decoder2FilterChannel:u,filter2EncoderChannel:l,encoder2MuxerChannel:d}),0)}{const r=(0,ae.A)();return await this.DemuxerThread.connectStreamTask.transfer(r.port1).invoke(t.subTaskId||t.taskId,e.index,r.port1),await this.MuxThread.addStream.transfer(r.port2).invoke(t.taskId,e,r.port2),t.streams.push({input:e,demuxer2MuxerChannel:r}),0}}async handleCopyStream(e,t){const r=(0,ae.A)();return await this.DemuxerThread.connectStreamTask.transfer(r.port1).invoke(t.subTaskId||t.taskId,e.index,r.port1),await this.MuxThread.addStream.transfer(r.port2).invoke(t.taskId,e,r.port2),t.streams.push({input:e,demuxer2MuxerChannel:r}),0}async clearTask(e){this.MuxThread.unregisterTask(e.taskId);for(let t=0;t<e.streams.length;t++)e.streams[t].taskId&&(1===f.f[15](e.streams[t].input.codecpar)?(await this.AudioEncoderThread.unregisterTask(e.streams[t].taskId),await this.AudioFilterThread.unregisterTask(e.streams[t].taskId),await this.AudioDecoderThread.unregisterTask(e.streams[t].taskId)):0===f.f[15](e.streams[t].input.codecpar)&&(await this.VideoEncoderThread.unregisterTask(e.streams[t].taskId),await this.VideoFilterThread.unregisterTask(e.streams[t].taskId),await this.VideoDecoderThread.unregisterTask(e.streams[t].taskId))),e.streams[t].output&&(0,H.dn)(e.streams[t].output.codecpar);this.DemuxerThread.unregisterTask(e.taskId),e.subTaskId&&this.DemuxerThread.unregisterTask(e.subTaskId),this.IOThread.unregisterTask(e.taskId),e.inputIPCPort&&e.inputIPCPort.destroy(),e.outputIPCPort&&e.outputIPCPort.destroy(),e.safeFileIO&&e.safeFileIO.destroy(),e.stats&&(0,A.A)(e.stats),this.tasks.delete(e.taskId),this.tasks.size||this.reportTimer.stop()}async addTask(e){var t,r;null!==(t=e.output.audio)&&void 0!==t&&t.disable&&null!==(r=e.output.video)&&void 0!==r&&r.disable&&E.h2("audio and video are all disable",_e,1812);const s=(0,I.A)(),i={taskId:s,startTime:0,options:e,ioloader2DemuxerChannel:null,muxer2OutputChannel:null,stats:(0,l.A)(v.A),format:-1,streams:[],formatContext:null,controller:new ce.A(this)};try{let e=0;await this.setTaskInput(i),await this.setTaskOutput(i);const t=i.formatContext=await this.analyzeInputStreams(i);for(let r=0;r<t.streams.length;r++){const s=f.f[15](t.streams[r].codecpar);e=1===s?await this.handleAudioStream(t.streams[r],i):0===s?await this.handleVideoStream(t.streams[r],i):await this.handleCopyStream(t.streams[r],i),e<0&&E.h2(`config transcode error, ret: ${e}`,_e,1851)}const r={streams:[],format:i.format,metadata:{},chapters:[]};let n="";return i.streams.forEach((e=>{e.output?(r.streams.push(e.output),n+=`  Stream #0:${e.input.index} -> #0:${e.output.index} (${(0,he.eG)(f.f[15](e.input.codecpar),f.f[15](e.input.codecpar+4))} -> ${(0,he.eG)(f.f[15](e.output.codecpar),f.f[15](e.output.codecpar+4))})\n`):(r.streams.push(e.input),n+=`  Stream #0:${e.input.index} -> #0:${e.input.index} (${(0,he.eG)(f.f[15](e.input.codecpar),f.f[15](e.input.codecpar+4))} -> copy)\n`)})),E.pq("\nAVTranscoder version v0.6.1-1-g923bfea Copyright (c) 2024-present the libmedia developers\n"+(0,he.Ay)([t],[{from:M.Yj(i.options.input.file)?i.options.input.file:i.options.input.file instanceof File?i.options.input.file.name:"ioReader",tag:"Input"}])+n+"\n"+(0,he.Ay)([r],[{from:i.options.output.file instanceof FileSystemFileHandle?i.options.output.file.name:"IOWriter",tag:"Output"}]),_e,1876),this.tasks.set(s,i),s}catch(e){throw await this.clearTask(i),e}}async startTask(e){const t=this.tasks.get(e);if(t){t.options.start&&await this.DemuxerThread.seek(t.taskId,BigInt(Math.floor(t.options.start)),16);let r=0;await this.DemuxerThread.startDemux(e,!1,10),r=await this.MuxThread.open(e),r<0&&(await this.clearTask(t),E.h2(`start transcode error, ret ${r}`,_e,1909));const s=t.streams;for(let e=0;e<s.length;e++){if(!s[e].output)continue;let r,i=!1;if(1===f.f[15](s[e].output.codecpar))r=await this.AudioEncoderThread.getExtraData(s[e].taskId);else if(0===f.f[15](s[e].output.codecpar)){r=await this.VideoEncoderThread.getExtraData(s[e].taskId);const t=await this.VideoEncoderThread.getColorSpace(s[e].taskId);t&&(p.M[15](s[e].output.codecpar+96,t.colorSpace),p.M[15](s[e].output.codecpar+88,t.colorPrimaries),p.M[15](s[e].output.codecpar+92,t.colorTrc),i=!0)}if(!r){const t=f.f[15](s[e].output.codecpar+4);86018===t?r=K.Ij((0,g.A)(s[e].output.codecpar,w.A)):86076===t&&(r=X.Ij((0,g.A)(s[e].output.codecpar,w.A)))}if(r){const t=(0,V.sY)(r.length);(0,D.lW)(t,r.length,r),p.M[20](s[e].output.codecpar+12,t),p.M[15](s[e].output.codecpar+16,r.length),i=!0}i&&await this.MuxThread.updateAVCodecParameters(t.taskId,s[e].output.index,s[e].output.codecpar)}r=await this.MuxThread.start(e),r<0&&(await this.clearTask(t),E.h2(`start transcode error, ret ${r}`,_e,1959)),t.startTime=(0,ne.A)(),this.reportTimer.isStarted()||this.reportTimer.start()}else E.h2(`task ${e} not found`,_e,1968)}async pauseTask(e){this.tasks.get(e)?await this.MuxThread.pause(e):E.h2(`task ${e} not found`,_e,1978)}async unpauseTask(e){this.tasks.get(e)?await this.MuxThread.unpause(e):E.h2(`task ${e} not found`,_e,1988)}async cancelTask(e){const t=this.tasks.get(e);t?(await this.MuxThread.unpause(e),await this.clearTask(t)):E.h2(`task ${e} not found`,_e,1999)}async destroy(){this.MuxThread&&(await this.MuxThread.clear(),(0,x.nE)(this.MuxThread)),this.AudioEncoderThread&&(await this.AudioEncoderThread.clear(),(0,x.nE)(this.AudioEncoderThread)),this.AudioFilterThread&&(await this.AudioFilterThread.clear(),(0,x.nE)(this.AudioFilterThread)),this.AudioDecoderThread&&(await this.AudioDecoderThread.clear(),(0,x.nE)(this.AudioDecoderThread)),this.VideoEncoderThread&&(await this.VideoEncoderThread.clear(),(0,x.nE)(this.VideoEncoderThread)),this.VideoFilterThread&&(await this.VideoFilterThread.clear(),(0,x.nE)(this.VideoFilterThread)),this.VideoDecoderThread&&(await this.VideoDecoderThread.clear(),(0,x.nE)(this.VideoDecoderThread)),this.DemuxerThread&&(await this.DemuxerThread.clear(),(0,x.nE)(this.DemuxerThread)),this.IOThread&&(await this.IOThread.clear(),(0,x.nE)(this.IOThread)),this.VideoEncoderThread=null,this.VideoFilterThread=null,this.VideoDecoderThread=null,this.AudioEncoderThread=null,this.AudioFilterThread=null,this.AudioDecoderThread=null,this.DemuxerThread=null,this.IOThread=null,this.MuxThread=null,this.GlobalData&&(this.GlobalData.avframeList.clear((e=>{(0,q.to)(e)}),20),this.GlobalData.avpacketList.clear((e=>{(0,Y.Up)(e)}),20),u.zr(this.GlobalData[c.o9]+24),u.zr(this.GlobalData[c.o9]+28),(0,A.A)(this.GlobalData),this.GlobalData=null),E.pq("AVTranscoder pipelines stopped",_e,2066)}setLogLevel(e){this.level=e,E.V$(e),this.IOThread&&this.IOThread.setLogLevel(e),this.DemuxerThread&&this.DemuxerThread.setLogLevel(e),this.AudioDecoderThread&&this.AudioDecoderThread.setLogLevel(e),this.AudioFilterThread&&this.AudioFilterThread.setLogLevel(e),this.AudioEncoderThread&&this.AudioEncoderThread.setLogLevel(e),this.VideoDecoderThread&&this.VideoDecoderThread.setLogLevel(e),this.VideoFilterThread&&this.VideoFilterThread.setLogLevel(e),this.VideoEncoderThread&&this.VideoEncoderThread.setLogLevel(e),this.MuxThread&&this.MuxThread.setLogLevel(e),E.pq(`set log level: ${e}`,_e,2102)}async onGetDecoderResource(e,t){return this.getResource("decoder",t,e)}}(0,s.A)(Pe,"Util",{compile:C.A,browser:B.A,os:de.A}),(0,s.A)(Pe,"IOLoader",{CustomIOLoader:le.A,FetchIOLoader:fe.A,FileIOLoader:pe.A}),(0,s.A)(Pe,"Resource",new(n()))},10922:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var s=r(134),i=r(84149),n=r(79283);class o{constructor(e){(0,s.A)(this,"demuxerControlChannel",void 0),(0,s.A)(this,"demuxerControlIPCPort",void 0),(0,s.A)(this,"observer",void 0),this.observer=e,this.demuxerControlChannel=(0,n.A)(),this.demuxerControlIPCPort=new i.Ay(this.demuxerControlChannel.port2),this.demuxerControlIPCPort.on(i.S3,(async e=>{"getDecoderResource"===e.method&&this.demuxerControlIPCPort.reply(e,await this.observer.onGetDecoderResource(e.params.mediaType,e.params.codecId))}))}getDemuxerRenderControlPort(){return this.demuxerControlChannel.port1}destroy(){this.demuxerControlIPCPort&&this.demuxerControlIPCPort.destroy(),this.demuxerControlChannel=null}}},62636:(e,t,r)=>{"use strict";r.d(t,{L:()=>i,X:()=>s});const s="task-ended",i="task-error"},38656:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var s=r(12264),i=r(29170),n=r(16041),o=r(9705),a=r(44527),c=r(2849),h=r(88496),d=r(2579);class u extends a.A{constructor(){super()}async createTask(e){const t=new n.A((0,i.A)(e.avframeList,s.A),e.avframeListMutex),r=(0,c.T$)(e.graph,t);if(!(0,c.iT)(r,e.inputPorts,e.outputPorts))return o.lh;const a=[],u=[];for(let t=0;t<e.inputPorts.length;t++){const s=new h.A(e.inputPorts[t].port);a.push(s);const i=r.inputs.find((r=>r.id===e.inputPorts[t].id));s.connect(i.filter)}for(let t=0;t<e.outputPorts.length;t++){const s=new d.A(e.outputPorts[t].port);u.push(s),r.outputs.find((r=>r.id===e.outputPorts[t].id)).filter.connect(s)}for(let e=0;e<r.vertices.length;e++)await r.vertices[e].filter.ready();return this.tasks.set(e.taskId,{...e,filterGraph:r,inputNodes:a,outputNodes:u,avframePool:t}),0}async registerTask(e){return this.tasks.has(e.taskId)?o.lh:this.createTask(e)}async unregisterTask(e){const t=this.tasks.get(e);if(t){for(let e=0;e<t.filterGraph.vertices.length;e++)t.filterGraph.vertices[e].filter.disconnect(),await t.filterGraph.vertices[e].filter.destroy();this.tasks.delete(e)}}}},79283:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r(26429),i=r(42577);function n(){return s.USE_THREADS?new MessageChannel:new i.A}},68960:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var s=r(134),i=r(80662),n=r.n(i),o=r(77162),a=r(74503),c=r(9599),h=r(94300),d=r(77231);class u{constructor(){(0,s.A)(this,"index",d.N_),(0,s.A)(this,"id",d.N_),(0,s.A)(this,"privData",null),(0,s.A)(this,"privateData2",null),(0,s.A)(this,"codecpar",(0,a.A)(new o.A,o.A)),(0,s.A)(this,"sideData",{}),(0,s.A)(this,"nbFrames",BigInt(0)),(0,s.A)(this,"metadata",{}),(0,s.A)(this,"duration",d.Dh),(0,s.A)(this,"startTime",d.Dh),(0,s.A)(this,"firstDTS",d.Dh),(0,s.A)(this,"disposition",0),(0,s.A)(this,"timeBase",(0,a.A)(c.P)),(0,s.A)(this,"sampleIndexes",[]),(0,s.A)(this,"sampleIndexesPosMap",new(n()))}destroy(){this.codecpar&&(this.codecpar.destroy(),(0,h.A)(this.codecpar),this.codecpar=null),this.timeBase&&((0,h.A)(this.timeBase),this.timeBase=null),this.sampleIndexes.length=0,this.sampleIndexesPosMap.clear()}}},95832:(e,t,r)=>{"use strict";r.d(t,{Bq:()=>l,Hm:()=>o,Ij:()=>u,XC:()=>d,_5:()=>h,f7:()=>f,uF:()=>n});var s=r(77231),i=r(37246);const n={1:"Main",2:"LC",3:"LC",4:"LC",5:"HE",6:"HE"},o={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12},a=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350,s.N_,s.N_,s.N_],c=[s.N_,1,2,3,4,5,6,7];function h(e){let t=s.N_,r=s.N_,i=s.N_;return e.length>=2&&(t=e[0]>>3&31,r=a[(7&e[0])<<1|e[1]>>7],i=c[e[1]>>3&15]),{profile:t,sampleRate:r,channels:i}}function d(e,t){if(!t&&e.sideData[1]&&(t=e.sideData[1]),t){const{profile:r,sampleRate:s,channels:i}=h(t);e.codecpar.profile=r,e.codecpar.sampleRate=s,e.codecpar.chLayout.nbChannels=i,e.codecpar.frameSize=5===r?2048:1024,e.codecpar.format=8}}function u(e){const t=o[e.sampleRate],r=e.chLayout.nbChannels,i=e.profile===s.N_?2:e.profile,n=new Uint8Array(2);return n[0]=(31&i)<<3|(14&t)>>1,n[1]=(1&t)<<7|(15&r)<<3,n}function l(e){if(e.length<7)return-1;const t=e[0]<<4|e[1]>>4;if(4095!==t)return-1;const r=1&e[1],s=(192&e[2])>>>6,i=(60&e[2])>>>2,n=(1&e[2])<<2|(192&e[3])>>>6,o=(3&e[3])<<11|e[4]<<3|(224&e[5])>>>5,h=3&e[6];let d=1===r?7:9,u=o-d;return{syncWord:t,profile:s+1,sampleRate:a[i],channels:c[n],aacFrameLength:o,numberOfRawDataBlocksInFrame:h,headerLength:d,framePayloadLength:u}}function f(e,t){function r(){const e=t.readU(2);let r=0;for(let s=0;s<=e;s++)r<<=8,r|=t.readU(8);return r}t||(t=new i.A).appendBuffer(e);const s=t.getPointer(),n={syncWord:0,profile:0,sampleRate:0,channels:0,useSameStreamMux:!1,headerLength:0,framePayloadLength:0,muxLengthBytes:0},o=t.readU(11);if(695!==o)return-1;n.syncWord=o,n.muxLengthBytes=t.readU(13);const h=1===t.readU1();if(n.useSameStreamMux=h,!h){const e=1===t.readU1();if(e&&1===t.readU1())return-1;if(e&&r(),1!==t.readU1())return-1;if(0!==t.readU(6))return-1;if(0!==t.readU(4))return-1;if(0!==t.readU(3))return-1;let s=e?r():0;const i=t.readU(5);s-=5;const o=t.readU(4);s-=4;const h=t.readU(4);if(s-=4,t.readU(3),s-=3,s>0&&t.readU(s),0!==t.readU(3))return-1;if(t.readU(8),1===t.readU1())if(e)r();else{let e=0;for(;;){e<<=8;const r=1===t.readU1();if(e+=t.readU(8),!r)break}}1===t.readU1()&&t.readU(8),n.profile=i+1,n.sampleRate=a[o],n.channels=c[h]}let d=0;for(;;){const e=t.readU(8);if(d+=e,255!==e)break}return n.framePayloadLength=d,n.headerLength=t.getPointer()-s+(8===t.getBitLeft()?0:1),n}},21477:(e,t,r)=>{"use strict";r.d(t,{Ui:()=>f,XC:()=>l,Yj:()=>p,k9:()=>u,zk:()=>c});var s=r(63939),i=r(37246),n=r(11573),o=r(83314),a=r(97317);const c={0:"Main",1:"High",2:"Professional"},h=[{level:20,maxResolution:2359296},{level:21,maxResolution:4460544},{level:30,maxResolution:10653696},{level:31,maxResolution:17040384},{level:40,maxResolution:21233664},{level:41,maxResolution:21233664},{level:50,maxResolution:35651584},{level:51,maxResolution:35651584},{level:52,maxResolution:35651584},{level:53,maxResolution:35651584},{level:60,maxResolution:142606336},{level:61,maxResolution:142606336},{level:62,maxResolution:142606336},{level:63,maxResolution:142606336}],d=[20,21,22,23,30,31,32,33,40,41,42,43,50,51,52,53,60,61,62,63,70,71,72,73];function u(e,t,r){const s=e*t;for(const e of h)if(s<=e.maxResolution)return e.level}function l(e,t){if(!t&&e.sideData[1]&&(t=e.sideData[1]),t&&t.length>=4){const r=f(t);e.codecpar.profile=r.profile,e.codecpar.level=r.level}}function f(e){const t=new i.A(e.length);t.appendBuffer(e),t.readU1(),t.readU(7);const r=t.readU(3),s=t.readU(5),n=t.readU1();let o=t.readU1()?10:8;return t.readU1()&&(o=12),{profile:r,level:s,tier:n,bitDepth:o,monochrome:t.readU1(),chromaSubsamplingX:t.readU1(),chromaSubsamplingY:t.readU1(),chromaSamplePosition:t.readU(2)}}function p(e,t){const r=new o.A(4);r.writeU1(1),r.writeU(7,1);const c=function(e){const t=new i.A;t.appendBuffer(e);const r=[];for(;t.remainingLength();){const s=t.getPointer();t.readU1(),t.readU(4);const i=t.readU1(),o=t.readU1();t.readU1(),i&&t.readU(8);const a=o?n.v(t):e.length-1-i,c=t.getPointer()-s;r.push(e.subarray(s,s+c+a)),t.skip(8*a)}return r}(t).find((e=>1==(e[0]>>>3&15)));if(c){const e=function(e){const t=new i.A(e.length);t.appendBuffer(e),t.readU1(),t.readU(4);const r=t.readU1(),s=t.readU1();t.readU1(),r&&t.readU(8),s&&n.v(t);const o=n.f(t,3),a=(n.f(t,1),n.f(t,1));let c=0,h=0,u=[0],l=[0],f=[0],p=[0],m=[0],g=[0],A=0,v=[0],w=[0],y=[0];if(a)l[0]=n.f(t,5);else{c=n.f(t,1),c?(n.f(t,32),n.f(t,32),n.f(t,1)&&n.d(t),n.f(t,1)&&(A=n.f(t,5),n.f(t,32),n.f(t,5),n.f(t,5))):h=0;let e=n.f(t,1),r=n.f(t,5);for(let s=0;s<=r;s++){if(u[s]=n.f(t,12),l[s]=n.f(t,5),l[s]>7?f[s]=n.f(t,1):f[s]=0,h){if(p[s]=n.f(t,1),p[s]){let e=A+1;v[s]=n.f(t,e),w[s]=n.f(t,e),y[s]=n.f(t,1)}}else p[s]=0;e&&(m[s]=n.f(t,1),m[s]&&(g[s]=n.f(t,4)))}}let b=n.f(t,4),_=n.f(t,4),k=b+1,x=n.f(t,k);k=_+1;let I=n.f(t,k),M=0,P=0,C=0;M=a?0:n.f(t,1),M&&(n.f(t,4),n.f(t,3)),n.f(t,1),n.f(t,1),n.f(t,1);let E=0,T=0,B=0,S=0,U=0,D=0,L=2,R=2,$=0;a||(n.f(t,1),n.f(t,1),n.f(t,1),n.f(t,1),S=n.f(t,1),S?(U=n.f(t,1),D=n.f(t,1)):(U=0,D=0),L=n.f(t,1)?2:n.f(t,1),L>0?n.f(t,1)?2:n.f(t,1):2,S&&n.f(t,3)),n.f(t,1),n.f(t,1),n.f(t,1);let F=n.f(t,1),z=0,O=0,W=0;2==o&&F?(z=n.f(t,1),O=z?12:10):o<=2&&(O=F?10:8),W=1==o?0:n.f(t,1);let N=0,V=0,H=0;n.f(t,1)?(N=n.f(t,8),V=n.f(t,8),H=n.f(t,8)):(N=2,V=2,H=2);let j=0,G=0,Q=0,q=0,Y=0;return W?(j=n.f(t,1),G=1,Q=1,q=0,Y=0):1==N&&13==V&&0==H?(j=1,G=0,Q=0,Y=n.f(t,1)):(j=n.f(t,1),0==o?(G=1,Q=1):1==o?(G=0,Q=0):12==O?(G=n.f(t,1),Q=G?n.f(t,1):0):(G=1,Q=0),G&&Q&&(q=n.f(t,2)),Y=n.f(t,1)),n.f(t,1),{width:x+1,height:I+1,profile:o,level:d[l[0]],tier:f[0],bitDepth:O,monoChrome:W,colorRange:j,colorPrimaries:N,transferCharacteristics:V,matrixCoefficients:H,subsamplingX:G,subsamplingY:Q,chromaSamplePosition:q}}(c);r.writeU(3,e.profile),r.writeU(5,e.level),r.writeU(1,e.tier),r.writeU(1,e.bitDepth>8?1:0),r.writeU(1,12===e.bitDepth?1:0),r.writeU(1,e.monoChrome),r.writeU(1,e.subsamplingX),r.writeU(1,e.subsamplingY),r.writeU(1,e.chromaSamplePosition)}else{const t=a.g[s.f[15](e+28)];r.writeU(3,s.f[15](e+48)),r.writeU(5,s.f[15](e+52)),r.writeU(1,0),r.writeU(1,t.comp[0].depth>8?1:0),r.writeU(1,12===t.comp[0].depth?1:0),r.writeU(1,0),r.writeU(1,1),r.writeU(1,1),r.writeU(1,0)}return r.writeU(8,0),r.padding(),r.getBuffer()}},62815:(e,t,r)=>{"use strict";r.d(t,{KD:()=>T,MB:()=>b,OD:()=>C,S1:()=>k,XC:()=>E,k9:()=>y,kM:()=>P,oT:()=>I,sL:()=>x,tZ:()=>v,wA:()=>M,wf:()=>B});var s=r(63939),i=r(72739),n=r(729),o=r(31865),a=r(37246),c=r(4624),h=r(14686),d=r(60264),u=r(37837),l=r(23991),f=r(39381),p=r(82774);const m="src/avutil/codecs/h264.ts",g=16,A=3,v={66:"Constrained Baseline",77:"Main",100:"High",110:"High10",122:"High422",244:"High444"},w=[{level:10,maxResolution:25344,maxFrameRate:15},{level:11,maxResolution:25344,maxFrameRate:30},{level:12,maxResolution:101376,maxFrameRate:30},{level:13,maxResolution:101376,maxFrameRate:30},{level:20,maxResolution:101376,maxFrameRate:30},{level:21,maxResolution:202752,maxFrameRate:30},{level:22,maxResolution:414720,maxFrameRate:30},{level:30,maxResolution:414720,maxFrameRate:30},{level:31,maxResolution:921600,maxFrameRate:30},{level:32,maxResolution:1310720,maxFrameRate:60},{level:40,maxResolution:2097152,maxFrameRate:30},{level:41,maxResolution:2097152,maxFrameRate:60},{level:42,maxResolution:2228224,maxFrameRate:60},{level:50,maxResolution:8912896,maxFrameRate:30},{level:51,maxResolution:8912896,maxFrameRate:60},{level:52,maxResolution:8912896,maxFrameRate:120},{level:60,maxResolution:35651584,maxFrameRate:30},{level:61,maxResolution:35651584,maxFrameRate:60},{level:62,maxResolution:35651584,maxFrameRate:120}];function y(e,t,r){const s=e*t;for(const e of w)if(s<=e.maxResolution&&r<=e.maxFrameRate)return e.level}function b(e){const t=new o.A(e);t.skip(5);const r=[],s=[],i=[],n=31&t.readUint8();for(let e=0;e<n;e++){const e=t.readUint16();r.push(t.readBuffer(e))}const a=t.readUint8();for(let e=0;e<a;e++){const e=t.readUint16();s.push(t.readBuffer(e))}if(t.remainingSize()>4){t.skip(3);const e=t.readUint8();if(e>0)for(let r=0;r<e;r++){const e=t.readUint16();i.push(t.readBuffer(e))}}return{spss:r,ppss:s,spsExts:i}}function _(e,t,r=[]){e.length>32&&(c.R8(`h264 metadata's sps max length is 32, but get ${e.length}`,m,221),e=e.slice(0,32)),e.length>256&&(c.R8(`h264 metadata's pps max length is 256, but get ${e.length}`,m,225),e=e.slice(0,256));let s=7;s=e.reduce(((e,t)=>e+2+t.length),s),s=t.reduce(((e,t)=>e+2+t.length),s);const o=e[0],a=B(o);66!==a.profile&&77!==a.profile&&88!==a.profile&&(s+=4,r.length&&(s=r.reduce(((e,t)=>e+2+t.length),s)));const h=new Uint8Array(s),d=new n.A(h);return d.writeUint8(1),d.writeUint8(o[1]),d.writeUint8(o[2]),d.writeUint8(o[3]),d.writeUint8(252|A),d.writeUint8(224|31&e.length),i.__(e,(e=>{d.writeUint16(e.length),d.writeBuffer(e)})),d.writeUint8(t.length),i.__(t,(e=>{d.writeUint16(e.length),d.writeBuffer(e)})),66!==a.profile&&77!==a.profile&&88!==a.profile&&(d.writeUint8(252|a.chromaFormatIdc),d.writeUint8(248|a.bitDepthLumaMinus8),d.writeUint8(248|a.bitDepthChromaMinus8),r.length&&i.__(r,(e=>{d.writeUint16(e.length),d.writeBuffer(e)}))),h}function k(e){let t=d.py(e);if(t.length>1){const e=[],r=[],s=[];if(t.forEach((t=>{const i=31&t[0];7===i?e.push(t):8===i?r.push(t):13===i&&s.push(t)})),e.length&&r.length)return _(e,r,s)}}function x(e){let t=d.py(e);if(t.length>1){const e=[],r=[],s=[];if(t.forEach((t=>{const i=31&t[0];7===i?e.push(t):8===i?r.push(t):13===i&&s.push(t)})),e.length&&r.length){const t=[e[0],r[0]];return s.length&&t.push(s[0]),d.nW(t,0)}}}function I(e){let t,r=d.py(e),s=!1;if(r.length){const e=[],i=[],n=[];r.forEach((t=>{const r=31&t[0];7===r?e.push(t):8===r?i.push(t):13===r?n.push(t):5===r&&(s=!0)})),e.length&&i.length?(t=_(e,i,n),r=r.filter((e=>{const t=31&e[0];return 9!==t&&8!==t&&7!==t&&13!==t}))):r=r.filter((e=>9!=(31&e[0])))}const i=r.reduce(((e,t)=>e+A+1+t.length),0),n=(0,u.sY)(i),o=(0,h.s3)(n,i);return d.S9(r,A,o),{bufferPointer:n,length:i,key:s,extradata:t}}function M(e,t,r,s,i){const n=[d.Le(s,0),d.Le(e,0),d.Le(t,0),d.Le(r,0),d.Le(i,2)];let o=n.reduce(((e,t)=>e+t),0);const a=(0,u.sY)(o+6);let c=a;return p.w8((c+=1,c-1),0),p.w8((c+=1,c-1),0),p.w8((c+=1,c-1),0),p.w8((c+=1,c-1),1),p.w8((c+=1,c-1),9),p.w8((c+=1,c-1),240),s.length&&(d.nW(s,0,(0,h.s3)(c,n[0])),c+=n[0]),e.length&&(d.nW(e,0,(0,h.s3)(c,n[1])),c+=n[1]),t.length&&(d.nW(t,0,(0,h.s3)(c,n[2])),c+=n[2]),r.length&&(d.nW(r,0,(0,h.s3)(c,n[3])),c+=n[3]),i.length&&d.nW(i,2,(0,h.s3)(c,n[4])),{bufferPointer:a,length:o+6}}function P(e,t){let r=d.py(e).concat(d.py(t));if(r.length){const e=[],t=[],s=[],i=[],n=[];return r.forEach((r=>{const o=31&r[0];7===o?e.push(r):8===o?t.push(r):13===o?s.push(r):6===o?i.push(r):9!==o&&n.push(r)})),M(e,t,s,i,n)}}function C(e,t){const r=t?3&t[4]:A;let s=[],i=[],n=[],o=!1;if(t){const e=b(t);s=e.spss,i=e.ppss,n=e.spsExts,o=!0}const a=[],c=[];return d.wN(e,r).forEach((e=>{const t=31&e[0];6===t?c.push(e):9!==t&&a.push(e),5===t&&(o=!0)})),{...M(s,i,n,c,a),key:o}}function E(e,t){let r;if(!t&&e.sideData[1]&&(t=e.sideData[1]),t&&d.Bs(t))i.__(d.py(t),(e=>{if(7==(31&e[0]))return r=e,!1}));else if(t&&t.length>=6){e.metadata.naluLengthSizeMinusOne=3&t[4];const{spss:s}=b(t);s.length&&(r=s[0])}if(r){const{profile:t,level:s,width:i,height:n,videoDelay:o,chromaFormatIdc:a,bitDepthLumaMinus8:c}=B(r);switch(e.codecpar.profile=t,e.codecpar.level=s,e.codecpar.width=i,e.codecpar.height=n,e.codecpar.videoDelay=o,c){case 0:e.codecpar.format=3===a?5:2===a?4:0;break;case 1:e.codecpar.format=3===a?66:2===a?70:60;break;case 2:e.codecpar.format=3===a?68:2===a?64:62}}}function T(e,t=4){if(2===s.f[15](e+80))return d.py((0,h.s3)(s.f[20](e+24),s.f[15](e+28))).some((e=>5==(31&e[0])));{const r=s.f[15](e+28);let i=0;for(;i<r-t;){if(5==(31&f.r8(s.f[20](e+24)+(i+t))))return!0;i+=4===t?f.Sg(s.f[20](e+24)+i):3===t?f.ht(s.f[20](e+24)+i):2===t?f.yd(s.f[20](e+24)+i):f.r8(s.f[20](e+24)+i),i+=t}return!1}}function B(e){if(!e||e.length<3)return;let t=0;0===e[0]&&0===e[1]&&0===e[2]&&1===e[3]&&(t=4);const r=d.BN(e.subarray(t)),s=new a.A(r.length);s.appendBuffer(r),s.readU1(),s.readU(2),s.readU(5);const i=s.readU(8);s.readU1(),s.readU1(),s.readU1(),s.readU1(),s.readU1(),s.readU1(),s.readU(2);const n=s.readU(8);l.xb(s);let o=1,c=0,h=0;if((100==i||110==i||122==i||244==i||44==i||83==i||86==i||118==i||128==i||138==i||139==i||134==i||135==i)&&(o=l.xb(s),3===o&&s.readU1(),c=l.xb(s),h=l.xb(s),s.readU1(),s.readU1())){const x=new Array(8);for(let I=0;I<(3!=o?8:12);I++)x[I]=s.readU1()}const u=l.xb(s),f=l.xb(s);let p=0,m=0;if(0===f)p=l.xb(s);else if(1===f){m=s.readU1(),l.$x(s),l.$x(s);const M=l.xb(s);for(let P=0;P<M;P++)l.$x(s)}l.xb(s),s.readU1();const A=l.xb(s),v=l.xb(s),w=s.readU1();let y=16*(A+1),b=(2-w)*(v+1)*16;w||s.readU1(),s.readU1();const _=s.readU1();if(_){let C=1,E=2-_;1===o?(C=2,E=2*(2-_)):2===_&&(C=2,E=2-_),y-=C*(l.xb(s)+l.xb(s)),b-=E*(l.xb(s)+l.xb(s))}let k=0;if(s.readU1()){let T=s.readU1();function B(){const e=l.xb(s)+1;s.readU(4),s.readU(4);for(let t=0;t<e;t++)l.xb(s),l.xb(s),s.readU1();s.readU(5),s.readU(5),s.readU(5),s.readU(5)}T&&s.readU(8)>=17&&(s.readU(16),s.readU(16)),T=s.readU1(),T&&s.readU1(),T=s.readU1(),T&&(s.readU(3),s.readU1(),T=s.readU1(),T&&(s.readU(8),s.readU(8),s.readU(8))),T=s.readU1(),T&&(l.xb(s),l.xb(s)),T=s.readU1(),T&&(s.readU(32),s.readU(32),s.readU1());let S=s.readU1();S&&B();let U=s.readU1();U&&B(),(S||U)&&s.readU1(),s.readU1(),T=s.readU1(),T&&(s.readU1(),l.xb(s),l.xb(s),l.xb(s),l.xb(s),k=Math.min(l.xb(s),g))}return{profile:i,level:n,width:y,height:b,chromaFormatIdc:o,bitDepthLumaMinus8:c,bitDepthChromaMinus8:h,frameMbsOnlyFlag:w,picOrderCntType:f,log2MaxPicOrderCntLsbMinus4:p,deltaPicOrderAlwaysZeroFlag:m,log2MaxFrameNumMinus4:u,videoDelay:k}}},67659:(e,t,r)=>{"use strict";r.d(t,{HL:()=>w,KD:()=>C,OD:()=>M,S1:()=>b,XC:()=>P,ZU:()=>T,dT:()=>m,k9:()=>A,kM:()=>I,oT:()=>k,sL:()=>_,wA:()=>x,wf:()=>E});var s=r(63939),i=r(72739),n=r(729),o=r(31865),a=r(37246),c=r(14686),h=r(60264),d=r(37837),u=r(23991),l=r(39381),f=r(82774);const p=16,m={1:"Main",2:"Main10",3:"MainStillPicture",4:"Main444"},g=[{level:10,maxLumaSamplesPerSecond:552960,maxLumaPictureSize:36864,maxBitRate:{main:128,main10:150}},{level:20,maxLumaSamplesPerSecond:3686400,maxLumaPictureSize:122880,maxBitRate:{main:1500,main10:1875}},{level:21,maxLumaSamplesPerSecond:7372800,maxLumaPictureSize:245760,maxBitRate:{main:3e3,main10:3750}},{level:30,maxLumaSamplesPerSecond:16588800,maxLumaPictureSize:552960,maxBitRate:{main:6e3,main10:7500}},{level:31,maxLumaSamplesPerSecond:33177600,maxLumaPictureSize:983040,maxBitRate:{main:1e4,main10:12500}},{level:40,maxLumaSamplesPerSecond:66846720,maxLumaPictureSize:2228224,maxBitRate:{main:12e3,main10:15e3}},{level:41,maxLumaSamplesPerSecond:133693440,maxLumaPictureSize:2228224,maxBitRate:{main:2e4,main10:25e3}},{level:50,maxLumaSamplesPerSecond:267386880,maxLumaPictureSize:8912896,maxBitRate:{main:25e3,main10:4e4}},{level:51,maxLumaSamplesPerSecond:534773760,maxLumaPictureSize:8912896,maxBitRate:{main:4e4,main10:6e4}},{level:52,maxLumaSamplesPerSecond:1069547520,maxLumaPictureSize:35651584,maxBitRate:{main:6e4,main10:1e5}},{level:60,maxLumaSamplesPerSecond:1069547520,maxLumaPictureSize:35651584,maxBitRate:{main:6e4,main10:1e5}},{level:61,maxLumaSamplesPerSecond:2139095040,maxLumaPictureSize:89128960,maxBitRate:{main:12e4,main10:24e4}},{level:62,maxLumaSamplesPerSecond:4278190080,maxLumaPictureSize:356515840,maxBitRate:{main:24e4,main10:48e4}}];function A(e,t,r,s,i){i/=1e3;const n=1===e?"main":"main10",o=t*r*s;for(const e of g)if(o<=e.maxLumaSamplesPerSecond&&t*r<=e.maxLumaPictureSize&&i<=e.maxBitRate[n])return e.level}const v=3;function w(e){const t=new o.A(e,!0);t.skip(22);let r=[],s=[],i=[];const n=t.readUint8();for(let e=0;e<n;e++){const e=63&t.readUint8(),n=t.readUint16(),o=[];for(let e=0;e<n;e++){const e=t.readUint16();o.push(t.readBuffer(e))}32===e?r=o:33===e?s=o:34===e&&(i=o)}return{vpss:r,spss:s,ppss:i}}function y(e,t,r){const s=t[0];let o=23;e.length&&(o+=3,o=e.reduce(((e,t)=>e+2+t.length),o)),t.length&&(o+=3,o=t.reduce(((e,t)=>e+2+t.length),o)),r.length&&(o+=3,o=r.reduce(((e,t)=>e+2+t.length),o));const a=new Uint8Array(o),c=new n.A(a,!0),h=E(s);c.writeUint8(1),c.writeUint8(s[1]),c.writeUint8(s[2]),c.writeUint8(s[3]),c.writeUint8(s[4]),c.writeUint8(s[5]),c.writeUint8(s[6]),c.writeUint8(s[7]),c.writeUint8(s[8]),c.writeUint8(s[9]),c.writeUint8(s[10]),c.writeUint8(s[11]),c.writeUint8(h.level),c.writeUint8(1020),c.writeUint8(0),c.writeUint8(16320),c.writeUint8(16320|h.chroma_format_idc),c.writeUint8(8160|h.bit_depth_luma_minus8),c.writeUint8(8160|h.bit_depth_chroma_minus8),c.writeUint16(0),c.writeUint8(8|(1&s[0])<<2|v);let d=0;return e.length&&d++,t.length&&d++,r.length&&d++,c.writeUint8(d),e.length&&(c.writeUint8(160),c.writeUint16(e.length),i.__(e,(e=>{c.writeUint16(e.length),c.writeBuffer(e)}))),t.length&&(c.writeUint8(161),c.writeUint16(t.length),i.__(t,(e=>{c.writeUint16(e.length),c.writeBuffer(e)}))),r.length&&(c.writeUint8(162),c.writeUint16(r.length),i.__(r,(e=>{c.writeUint16(e.length),c.writeBuffer(e)}))),a}function b(e){let t=h.py(e);if(t.length>=2){const e=[],r=[],s=[];if(t.forEach((t=>{const i=t[0]>>>1&63;32===i?e.push(t):33===i?r.push(t):34===i&&s.push(t)})),r.length&&s.length)return y(e,r,s)}}function _(e){let t=h.py(e);if(t.length>=2){const e=[],r=[],s=[];if(t.forEach((t=>{const i=t[0]>>>1&63;32===i?e.push(t):33===i?r.push(t):34===i&&s.push(t)})),r.length&&s.length){const t=[r[0],s[0]];return e.length&&t.unshift(e[0]),h.nW(t,0)}}}function k(e){let t,r=!1,s=h.py(e);if(s.length){const e=[],i=[],n=[];s.forEach((t=>{const s=t[0]>>>1&63;32===s?e.push(t):33===s?i.push(t):34===s&&n.push(t),19!==s&&20!==s&&21!==s||(r=!0)})),i.length&&n.length?(t=y(e,i,n),s=s.filter((e=>{const t=e[0]>>>1&63;return 32!==t&&33!==t&&34!==t&&35!==t}))):s=s.filter((e=>35!=(e[0]>>>1&63)))}const i=s.reduce(((e,t)=>e+v+1+t.length),0),n=(0,d.sY)(i),o=(0,c.s3)(n,i);return h.S9(s,v,o),{bufferPointer:n,length:i,extradata:t,key:r}}function x(e,t,r,s){const i=[h.Le(e,0),h.Le(t,0),h.Le(r,0),h.Le(s,2)];let n=i.reduce(((e,t)=>e+t),0);const o=(0,d.sY)(n+7);let a=o;return f.w8((a+=1,a-1),0),f.w8((a+=1,a-1),0),f.w8((a+=1,a-1),0),f.w8((a+=1,a-1),1),f.w8((a+=1,a-1),70),f.w8((a+=1,a-1),1),f.w8((a+=1,a-1),80),e.length&&(h.nW(e,0,(0,c.s3)(a,i[0])),a+=i[0]),t.length&&(h.nW(t,0,(0,c.s3)(a,i[1])),a+=i[1]),r.length&&(h.nW(r,0,(0,c.s3)(a,i[2])),a+=i[2]),s.length&&h.nW(s,2,(0,c.s3)(a,i[3])),{bufferPointer:o,length:n+7}}function I(e,t){let r=h.py(e).concat(h.py(t));if(r.length){let e=[],t=[],s=[],i=[];return r.forEach((r=>{const n=r[0]>>>1&63;32===n?e.push(r):33===n?t.push(r):34===n?s.push(r):35!==n&&i.push(r)})),x(e,t,s,i)}}function M(e,t){const r=t?3&t[21]:v;let s=[],i=[],n=[],o=!1;if(t){const e=w(t);s=e.vpss,i=e.spss,n=e.ppss,o=!0}return{...x(s,i,n,h.wN(e,r).filter((e=>35!=(e[0]>>>1&63)))),key:o}}function P(e,t){let r;if(!t&&e.sideData[1]&&(t=e.sideData[1]),t&&h.Bs(t))i.__(h.py(t),(e=>{if(33==(e[0]>>>1&63))return r=e,!1}));else if(t&&t.length>=6){e.metadata.naluLengthSizeMinusOne=3&t[21];const{spss:s}=w(t);s.length&&(r=s[0])}if(r){const{profile:t,level:s,width:i,height:n,video_delay:o,chroma_format_idc:a,bit_depth_luma_minus8:c}=E(r);switch(e.codecpar.profile=t,e.codecpar.level=s,e.codecpar.width=i,e.codecpar.height=n,e.codecpar.videoDelay=o,c){case 0:e.codecpar.format=3===a?5:2===a?4:0;break;case 2:e.codecpar.format=3===a?68:2===a?64:62}}}function C(e,t=4){if(2===s.f[15](e+80))return h.py((0,c.s3)(s.f[20](e+24),s.f[15](e+28))).some((e=>{const t=e[0]>>>1&63;return 20===t||19===t}));{const r=s.f[15](e+28);let i=0;for(;i<r-t;){const r=l.r8(s.f[20](e+24)+(i+t))>>>1&63;if(20===r||19===r)return!0;i+=4===t?l.Sg(s.f[20](e+24)+i):3===t?l.ht(s.f[20](e+24)+i):2===t?l.yd(s.f[20](e+24)+i):l.r8(s.f[20](e+24)+i),i+=t}return!1}}function E(e){if(!e||e.length<3)return;let t=0;0===e[0]&&0===e[1]&&0===e[2]&&1===e[3]&&(t=4);let r=0,s=0,i=0,n=0,o=0,c=0,d=1,l=0,f=0,m=0,g=0;const A=h.BN(e.subarray(t)),v=new a.A(A.length);v.appendBuffer(A),v.readU1(),v.readU(6),v.readU(6),v.readU(3),v.readU(4);const w=v.readU(3);v.readU1();let y=0;if(w<=6){l=v.readU(2),f=v.readU1(),r=v.readU(5),m=v.readU(32),g=v.readU(48),s=v.readU(8);const e=new Array(6),t=new Array(6);for(let r=0;r<w;r++)e[r]=v.readU1(),t[r]=v.readU1();if(w>0)for(let e=w;e<8;e++)v.readU(2);for(let r=0;r<w;r++)e[r]&&(v.readU(2),v.readU(1),v.readU(5),v.readU(32),v.readU(1),v.readU(1),v.readU(1),v.readU(1),v.readU(44)),t[r]&&v.readU(8);u.xb(v),d=u.xb(v),3===d&&(y=v.readU(1)),i=u.xb(v),n=u.xb(v);let a=0,h=0,p=0,A=0;v.readU1()&&(a=u.xb(v),h=u.xb(v),p=u.xb(v),A=u.xb(v)),o=u.xb(v),c=u.xb(v);let b=2,_=2;0===d?b=_=0:2===d?(b=2,_=1):3===d&&(b=_=1),i-=b*(1<<o+1)*(a+h),n-=_*(1<<o+1)*(p+A)}const b=u.xb(v)+4;let _=0;for(let e=v.readU1()?0:w;e<w+1;e++)u.xb(v),_=Math.max(_,Math.min(u.xb(v),p)),u.xb(v);const k=u.xb(v)+3,x=u.xb(v),I=u.xb(v)+2,M=u.xb(v),P=k+x,C=k-1,E=i+(1<<P)-1>>P,T=n+(1<<P)-1>>P;return{profile:r,level:s,width:i,height:n,chroma_format_idc:d,bit_depth_luma_minus8:o,bit_depth_chroma_minus8:c,general_profile_space:l,general_tier_flag:f,general_profile_compatibility_flags:m,constraint_flags:g,separate_colour_plane_flag:y,log2_min_cb_size:k,log2_diff_max_min_coding_block_size:x,log2_min_tb_size:I,log2_diff_max_min_transform_block_size:M,log2_max_trafo_size:M+I,log2_ctb_size:P,log2_min_pu_size:C,ctb_width:E,ctb_height:T,ctb_size:E*T,min_cb_width:i>>k,min_cb_height:n>>k,min_tb_width:i>>I,min_tb_height:n>>I,min_pu_width:i>>C,min_pu_height:n>>C,log2_max_poc_lsb:b,video_delay:_}}function T(e){if(!e||e.length<3)return;let t=0;0===e[0]&&0===e[1]&&0===e[2]&&1===e[3]&&(t=4);const r=h.BN(e.subarray(t)),s=new a.A(r.length);return s.appendBuffer(r),{pps_pic_parameter_set_id:u.xb(s),pps_seq_parameter_set_id:u.xb(s),dependent_slice_segment_flag:s.readU1(),output_flag_present_flag:s.readU1(),num_extra_slice_header_bits:s.readU(3)}}},64093:(e,t,r)=>{"use strict";r.d(t,{Au:()=>v,He:()=>w,XC:()=>y,Y2:()=>m,hG:()=>g,oz:()=>A});var s=r(77231);const i=[44100,48e3,32e3,0],n=[22050,24e3,16e3,0],o=[11025,12e3,8e3,0],a=[0,1152,1152,384],c=[0,576,1152,384],h=[0,576,1152,384],d=[0,32,64,96,128,160,192,224,256,288,320,352,384,416,448,-1],u=[0,32,48,56,64,80,96,112,128,160,192,224,256,320,384,-1],l=[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],f=[0,32,48,56,64,80,96,112,128,144,160,176,192,224,256,-1],p=[0,8,16,24,32,40,48,56,64,80,96,112,128,144,160,-1];function m(e,t){switch(e){case 0:return o[t];case 2:return n[t];case 3:return i[t]}return s.N_}function g(e,t){switch(e){case 0:return h[t];case 2:return c[t];case 3:return a[t]}return s.N_}function A(e,t,r){switch(t){case 1:switch(e){case 0:case 2:return p[r];case 3:return l[r]}break;case 2:switch(e){case 0:case 2:return p[r];case 3:return u[r]}case 3:switch(e){case 0:case 2:return f[r];case 3:return d[r]}}return s.N_}function v(e){switch(e){case 1:return 34;case 2:return 33;case 3:return 32}return s.N_}const w={32:"Layer1",33:"Layer2",34:"Layer3"};function y(e,t){if(t&&t.length>=4){const r=t[1]>>>3&3,s=(6&t[1])>>1,i=(12&t[2])>>>2,n=3&~(t[3]>>>6)?2:1,o=v(s),a=m(r,i);e.codecpar.profile=o,e.codecpar.sampleRate=a,e.codecpar.chLayout.nbChannels=n}}},22576:(e,t,r)=>{"use strict";r.d(t,{Ij:()=>h,XC:()=>c,kt:()=>a});var s=r(31865),i=r(729),n=r(44328);const o=[480,960,1920,2880,480,960,1920,2880,480,960,1920,2880,480,960,480,960,120,240,480,960,120,240,480,960,120,240,480,960,120,240,480,960];function a(e){let t=0,r=0,s=0;if(e.length<1)return 0;switch(t=e[0],r=o[t>>3],3&t){case 0:s=1;break;case 1:case 2:s=2;break;case 3:if(e.length<2)return 0;s=63&e[1]}return s*r}function c(e,t){if(!t&&e.sideData[1]&&(t=e.sideData[1]),t&&t.length>=19){const r=new s.A(t,!1);r.skip(9),e.codecpar.chLayout.nbChannels=r.readUint8(),e.codecpar.initialPadding=r.readUint16(),e.codecpar.sampleRate=r.readUint32(),e.codecpar.seekPreroll=Number((0,n.k)(BigInt(80),{den:1e3,num:1},{den:48e3,num:1}))}}function h(e){const t=new Uint8Array(19),r=new i.A(t,!1);return r.writeString("OpusHead"),r.writeUint8(1),r.writeUint8(e.chLayout.nbChannels),r.writeUint16(e.initialPadding),r.writeUint32(e.sampleRate),t}},97077:(e,t,r)=>{"use strict";r.d(t,{Ui:()=>n,XC:()=>i});var s=r(37246);function i(e,t){if(!t&&e.sideData[1]&&(t=e.sideData[1]),t&&t.length>=6){const r=n(t);e.codecpar.profile=r.profile,e.codecpar.level=r.level}}function n(e){const t=new s.A(e.length);return t.appendBuffer(e.subarray(4)),{profile:t.readU(8),level:t.readU(8),bitDepth:t.readU(4),chromaSubsampling:t.readU(3),fullRangeFlag:t.readU1(),colorPrimaries:t.readU(8),colorTrc:t.readU(8),colorSpace:t.readU(8)}}},82014:(e,t,r)=>{"use strict";r.d(t,{Ui:()=>m,XC:()=>p,Yj:()=>g,k9:()=>f,wN:()=>u});var s=r(63939),i=r(9599),n=r(29170),o=r(37246),a=r(77231),c=r(97317),h=r(44328),d=r(729);const u={0:"Profile0",1:"Profile1",2:"Profile2",3:"Profile3"},l=[{level:10,maxResolution:196608,maxFrameRate:30},{level:11,maxResolution:196608,maxFrameRate:60},{level:20,maxResolution:518400,maxFrameRate:30},{level:21,maxResolution:518400,maxFrameRate:60},{level:30,maxResolution:2073600,maxFrameRate:30},{level:31,maxResolution:2073600,maxFrameRate:60},{level:40,maxResolution:3686400,maxFrameRate:30},{level:41,maxResolution:3686400,maxFrameRate:60},{level:50,maxResolution:8294400,maxFrameRate:30},{level:51,maxResolution:8294400,maxFrameRate:60},{level:60,maxResolution:8847360,maxFrameRate:30},{level:61,maxResolution:8847360,maxFrameRate:60},{level:70,maxResolution:35389440,maxFrameRate:30},{level:71,maxResolution:35389440,maxFrameRate:60}];function f(e,t,r){const s=e*t;for(const e of l)if(s<=e.maxResolution&&r<=e.maxFrameRate)return e.level}function p(e,t){if(!t&&e.sideData[1]&&(t=e.sideData[1]),t&&t.length>=6){const r=m(t);e.codecpar.profile=r.profile,e.codecpar.level=r.level}}function m(e){const t=new o.A(e.length);return t.appendBuffer(e),{profile:t.readU(8),level:t.readU(8),bitDepth:t.readU(4),chromaSubsampling:t.readU(3),fullRangeFlag:t.readU1(),colorPrimaries:t.readU(8),colorTrc:t.readU(8),colorSpace:t.readU(8)}}function g(e){const t=new d.A(new Uint8Array(8)),r=function(e){let t=s.f[15](e+48),r=s.f[15](e+52);r===a.N_&&(r=f(s.f[15](e+56),s.f[15](e+60),(0,h.lb)((0,n.A)(e+72,i.P))));const o=c.g[s.f[15](e+28)];let d=s.f[15](e+40),u=1;o&&(d=o.comp[0].depth,1===o.log2ChromaW&&1===o.log2ChromaH?1===s.f[15](e+100)&&(u=0):1===o.log2ChromaW&&0===o.log2ChromaH?u=2:0===o.log2ChromaW&&0===o.log2ChromaH&&(u=3));const l=2===s.f[15](e+84)?1:0;return t===a.N_&&d&&(t=0==u||1==u?8==d?0:2:8==d?1:3),{profile:t,level:r,bitDepth:d,chromaSubsampling:u,fullRange:l}}(e);return t.writeUint8(r.profile),t.writeUint8(r.level),t.writeUint8(r.bitDepth<<4|r.chromaSubsampling<<1|r.fullRange),t.writeUint8(s.f[15](e+88)),t.writeUint8(s.f[15](e+92)),t.writeUint8(s.f[15](e+96)),t.writeUint16(0),t.getWroteBuffer()}},59166:(e,t,r)=>{"use strict";r.d(t,{HL:()=>A,KD:()=>M,OD:()=>x,S1:()=>w,Ui:()=>C,XC:()=>I,kM:()=>k,oT:()=>b,sL:()=>y,wA:()=>_,wf:()=>P});var s=r(63939),i=r(72739),n=r(729),o=r(31865),a=r(37246),c=r(14686),h=r(60264),d=r(37837),u=r(23991),l=r(83314),f=r(39381),p=r(82774);const m=3;function g(e){const t=e.readU(9),r=e.readU(3),s=e.readU(2),i=e.readU(2),n=e.readU(3);e.readU(5),e.readU(2);const o=e.readU(6),a=e.readU(7),c=e.readU(1),h=e.readU(8),d=e.readU(1),u=e.readU(1),l=[],f=[];if(o){for(let t=0;t<o-1;t++)l[t]=e.readU(8);l[o-1]=e.readU(6)}else e.readU(6);if(r>1){let t=0;for(let s=r-2;s>=0;--s)t|=e.readU(1)<<s;for(let t=r;t<=8&&r>1;++t)e.readU(1);for(let s=r-2;s>=0;--s)t&1<<s&&(f[s]=e.readU(8))}const p=e.readU(8),m=[];if(p)for(let t=0;t<p;t++)m.push(e.readU(8));return{olsIdx:t,numSublayers:r,bitDepthMinus8:n,chromaFormatIdc:i,constantFrameRate:s,generalProfileIdc:a,generalTierFlag:c,generalLevelIdc:h,ptlFrameOnlyConstraintFlag:d,ptlMultilayerEnabledFlag:u,generalConstraintInfo:l,sublayerLevelIdc:f,generalSubProfileIdc:m,maxPictureWidth:e.readU(16),maxPictureHeight:e.readU(16),avgFramerate:e.readU(16)}}function A(e){const t=new o.A(e,!0);if(1&t.readUint8()){const r=new a.A;r.appendBuffer(e.subarray(1)),g(r),t.skip(r.getPointer())}let r=[],s=[],i=[];const n=t.readUint8();for(let e=0;e<n;e++){const e=31&t.readUint8();let n=1;13!==e&&12!==e&&(n=t.readUint16());const o=[];for(let e=0;e<n;e++){const e=t.readUint16();o.push(t.readBuffer(e))}14===e?r=o:15===e?s=o:16===e&&(i=o)}return{vpss:r,spss:s,ppss:i}}function v(e,t,r){const s=t[0];let o;if(s){const e=P(s);let t=e.generalConstraintInfo;t.length||(t=new Array(12).fill(0));const r=new l.A;if(r.writeU(9,0),r.writeU(3,e.spsMaxSublayersMinus1+1),r.writeU(2,1),r.writeU(2,e.chromaFormatIdc),r.writeU(3,e.bitDepthMinus8),r.writeU(5,31),r.writeU(2,0),r.writeU(6,t.length),r.writeU(7,e.profile),r.writeU1(e.tierFlag),r.writeU(8,e.level),r.writeU1(e.ptlFrameOnlyConstraintFlag),r.writeU1(e.ptlMultilayerEnabledFlag),t.length){for(let e=0;e<t.length-1;e++)r.writeU(8,t[e]);r.writeU(6,t[t.length-1])}else r.writeU(6,63);if(e.spsMaxSublayersMinus1+1>1){let t=0;for(let r=e.spsMaxSublayersMinus1-1;r>=0;r--)t=t<<1|e.ptlSublayerLevelPresentFlag[r];r.writeU(e.spsMaxSublayersMinus1,t);for(let t=e.spsMaxSublayersMinus1+1;t<=8&&e.spsMaxSublayersMinus1>0;++t)r.writeU1(0);for(let t=e.spsMaxSublayersMinus1-1;t>=0;t--)e.ptlSublayerLevelPresentFlag[t]&&r.writeU(8,e.sublayerLevelIdc[t])}r.writeU(8,e.generalSubProfileIdc.length);for(let t=0;t<e.generalSubProfileIdc.length;t++)r.writeU(8,e.sublayerLevelIdc[t]);r.writeU(16,e.width),r.writeU(16,e.height),r.writeU(16,0),r.padding(),o=r.getBuffer().subarray(0,r.getPointer())}let a=2+(o?o.length:0);e.length&&(a+=3,a=e.reduce(((e,t)=>e+2+t.length),a)),t.length&&(a+=3,a=t.reduce(((e,t)=>e+2+t.length),a)),r.length&&(a+=3,a=r.reduce(((e,t)=>e+2+t.length),a));const c=new Uint8Array(a),h=new n.A(c,!0);h.writeUint8(m<<1|(o?1:0)|248),o&&h.writeBuffer(o);let d=0;return e.length&&d++,t.length&&d++,r.length&&d++,h.writeUint8(d),e.length&&(h.writeUint8(142),h.writeUint16(e.length),i.__(e,(e=>{h.writeUint16(e.length),h.writeBuffer(e)}))),t.length&&(h.writeUint8(143),h.writeUint16(t.length),i.__(t,(e=>{h.writeUint16(e.length),h.writeBuffer(e)}))),r.length&&(h.writeUint8(144),h.writeUint16(r.length),i.__(r,(e=>{h.writeUint16(e.length),h.writeBuffer(e)}))),c}function w(e){let t=h.py(e);if(t.length>=2){const e=[],r=[],s=[];if(t.forEach((t=>{const i=t[1]>>>3&31;14===i?e.push(t):15===i?r.push(t):16===i&&s.push(t)})),r.length&&s.length)return v(e,r,s)}}function y(e){let t=h.py(e);if(t.length>=2){const e=[],r=[],s=[];if(t.forEach((t=>{const i=t[1]>>>3&31;14===i?e.push(t):15===i?r.push(t):16===i&&s.push(t)})),r.length&&s.length){const t=[r[0],s[0]];return e.length&&t.unshift(e[0]),h.nW(t,0)}}}function b(e){let t,r=!1,s=h.py(e);if(s.length){const e=[],i=[],n=[];s.forEach((t=>{const s=t[1]>>>3&31;14===s?e.push(t):15===s?i.push(t):16===s&&n.push(t),8!==s&&7!==s&&9!==s&&10!==s||(r=!0)})),i.length&&n.length?(t=v(e,i,n),s=s.filter((e=>{const t=e[1]>>>3&31;return 14!==t&&15!==t&&16!==t&&20!==t}))):s=s.filter((e=>20!=(e[1]>>>3&31)))}const i=s.reduce(((e,t)=>e+m+1+t.length),0),n=(0,d.sY)(i),o=(0,c.s3)(n,i);return h.S9(s,m,o),{bufferPointer:n,length:i,extradata:t,key:r}}function _(e,t,r,s,i){const n=[h.Le(e,0),h.Le(t,0),h.Le(r,0),h.Le(s,2)];let o=n.reduce(((e,t)=>e+t),0);const a=(0,d.sY)(o+7);let u=a;return p.w8((u+=1,u-1),0),p.w8((u+=1,u-1),0),p.w8((u+=1,u-1),0),p.w8((u+=1,u-1),1),p.w8((u+=1,u-1),0),p.w8((u+=1,u-1),161),p.w8((u+=1,u-1),(i?1:0)<<7|40),e.length&&(h.nW(e,0,(0,c.s3)(u,n[0])),u+=n[0]),t.length&&(h.nW(t,0,(0,c.s3)(u,n[1])),u+=n[1]),r.length&&(h.nW(r,0,(0,c.s3)(u,n[2])),u+=n[2]),s.length&&h.nW(s,2,(0,c.s3)(u,n[3])),{bufferPointer:a,length:o+7}}function k(e,t){let r=h.py(e).concat(h.py(t));if(r.length){let e=[],t=[],s=[],i=[];return r.forEach((r=>{const n=r[1]>>>3&31;14===n?e.push(r):15===n?t.push(r):16===n?s.push(r):20!==n&&i.push(r)})),_(e,t,s,i,!0)}}function x(e,t){const r=t?t[0]>>>1&3:m;let s=[],i=[],n=[],o=!1;if(t){const e=A(t);s=e.vpss,i=e.spss,n=e.ppss,o=!0}return{..._(s,i,n,h.wN(e,r).filter((e=>20!=(e[1]>>>3&31))),o),key:o}}function I(e,t){let r;if(!t&&e.sideData[1]&&(t=e.sideData[1]),t&&h.Bs(t))i.__(h.py(t),(e=>{if(15==(e[1]>>>3&31))return r=e,!1}));else if(t&&t.length>=6){e.metadata.naluLengthSizeMinusOne=t[0]>>>1&3;const{spss:s}=A(t);s.length&&(r=s[0])}r&&function(e,t){const{profile:r,level:s,width:i,height:n,videoDelay:o,chromaFormatIdc:a,bitDepthMinus8:c}=P(t);switch(e.codecpar.profile=r,e.codecpar.level=s,e.codecpar.width=i,e.codecpar.height=n,e.codecpar.videoDelay=o,c){case 0:e.codecpar.format=3===a?5:2===a?4:0;break;case 2:e.codecpar.format=3===a?68:2===a?64:62}}(e,r)}function M(e,t=4){if(2===s.f[15](e+80))return h.py((0,c.s3)(s.f[20](e+24),s.f[15](e+28))).some((e=>{const t=e[1]>>>3&31;return 8===t||7===t}));{const r=s.f[15](e+28);let i=0;for(;i<r-t;){const r=f.r8(s.f[20](e+24)+(i+t+1))>>>3&31;if(8===r||7===r)return!0;i+=4===t?f.Sg(s.f[20](e+24)+i):3===t?f.ht(s.f[20](e+24)+i):2===t?f.yd(s.f[20](e+24)+i):f.r8(s.f[20](e+24)+i),i+=t}return!1}}function P(e){if(!e||e.length<3)return;let t=0;0===e[0]&&0===e[1]&&0===e[2]&&1===e[3]&&(t=4);let r=0,s=0,i=0,n=0,o=0,c=1,d=0,l=0,f=0;const p=[],m=[],g=[],A=[],v=h.BN(e.subarray(t)),w=new a.A(v.length);w.appendBuffer(v),w.readU1(),w.readU1(),w.readU(6),w.readU(5),w.readU(3),w.readU(8);const y=w.readU(3);c=w.readU(2);const b=w.readU(2);if(w.readU(1)){if(r=w.readU(7),d=w.readU(1),s=w.readU(8),l=w.readU(1),f=w.readU(1),w.readU(1)){for(let e=0;e<8;e++)p[e]=w.readU(8);p[8]=w.readU(7);const e=w.readU(8);w.readU(e)}w.skipPadding();for(let e=y-1;e>=0;e--)m[e]=w.readU(1);w.skipPadding();for(let e=y-1;e>=0;e--)m[e]&&(g[e]=w.readU(8));const e=w.readU(8);if(e)for(let t=0;t<e;t++)A[t]=w.readU(32)}w.readU1(),w.readU1()&&w.readU1();const _=i=u.xb(w),k=n=u.xb(w);if(w.readU1()&&(u.xb(w),u.xb(w),u.xb(w),u.xb(w)),w.readU1()){const e=u.xb(w),t=b+5,r=1<<t,s=_/(1<<t),i=k/(1<<t),n=Math.ceil(Math.log2(s)),o=Math.ceil(Math.log2(i));let a=0,c=0,h=0;e>0&&(h=w.readU1(),c=w.readU1());for(let t=0;e>0&&t<=e;t++)c&&0!=t||(t>0&&_>r&&w.readU(n),t>0&&k>r&&w.readU(o),t<e&&_>r&&w.readU(n),t<e&&k>r&&w.readU(o)),h||w.readU(2);if(a=u.xb(w)+1,w.readU(1)&&w.readU(1))for(let t=0;t<=e;t++)w.readU(a)}o=u.xb(w),w.readU(1),w.readU(1);const x=w.readU(4),I=w.readU(1);let M=0;I&&(M=u.xb(w));const P=[],C=w.readU(2);for(let e=0;e<8*C;e++)P[e]=w.readU(1);return{profile:r,level:s,width:i,height:n,videoDelay:y+1>2?2:y,chromaFormatIdc:c,bitDepthMinus8:o,generalProfileSpace:0,tierFlag:d,generalConstraintInfo:p,generalSubProfileIdc:A,ptlFrameOnlyConstraintFlag:l,ptlMultilayerEnabledFlag:f,spsMaxSublayersMinus1:y,ptlSublayerLevelPresentFlag:m,sublayerLevelIdc:g,sps_log2_max_pic_order_cnt_lsb_minus4:x,sps_poc_msb_cycle_flag:I,sps_poc_msb_cycle_len_minus1:M,sps_num_extra_ph_bytes:C,sps_extra_ph_bit_present_flag:P}}function C(e){h.Bs(e)&&(e=w(e));const t=new a.A;return t.appendBuffer(e),1&t.readU(8)?g(t):{}}},77231:(e,t,r)=>{"use strict";r.d(t,{Dh:()=>i,KR:()=>c,N_:()=>n,SF:()=>o,WT:()=>a,f7:()=>l,go:()=>d,i0:()=>h,zg:()=>u});var s=r(9599);const i=-BigInt(1),n=-1,o=1e6,a=BigInt(2208988800)*BigInt(1e6),c=new s.P({den:o,num:1}),h=new s.P({den:1e3,num:1}),d=(new s.P({den:1,num:1}),2147483647),u=65535,l=4294967295},9705:(e,t,r)=>{"use strict";r.d(t,{E$:()=>s,LR:()=>i,LT:()=>h,NU:()=>u,OY:()=>c,UY:()=>n,gR:()=>o,lh:()=>a,nr:()=>l,r8:()=>d});const s=-1,i=-2,n=-3,o=-4,a=-5,c=-6,h=-7,d=-8,u=-9,l=-10},49032:(e,t,r)=>{"use strict";async function s(e,t=-1){let r=await e.peekString(8);if(/^FLV/.test(r))return 0;if(/^DKIF/.test(r))return 5;if(/^ftyp/.test(r.slice(4,8)))return 1;if(/^OggS/.test(r))return 4;if(/^ID3/.test(r))return 14;if(/^fLaC/.test(r))return 17;if(/^RIFF/.test(r)){const t=(await e.peekString(12)).slice(8);if(/^WAVE/.test(t))return 16}else{if(/^ADIF/.test(r))return 15;if(440786851===await e.peekUint32())return 8;{const t=await e.peekBuffer(2);switch(t[0]){case 86:if(!(224&~t[1]))return 15;break;case 255:if(240==(246&t[1]))return 15;if([242,244,246,250,252].includes(254&t[1]))return 14}}}return t}r.d(t,{A:()=>s})},364:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var s=r(62751),i=r(92647),n=r(95335),o=r(50011),a=r(8507);async function c(e,t="",r={}){let c,h="",d={url:e};if(/^rtsp/.test(e)||/^rtmp/.test(e)){/^rtsp/.test(e)?h="rtsp":/^rtmp/.test(e)&&(h="rtmp"),c=2;const t=a.qg(e).protocol.split("+")[1]||"wss";"wss"===t||"ws"===t?c=2:"webtransport"===t&&(c=3),d.url=d.url.replace(/^\S+:\/\//,t+"://"),"rtmp"===h&&(d.subProtocol=c,c=6)}else{var u;const d=a.qg(e).protocol;h=t||a.qg(e).file.split(".").pop(),!h&&/^https?/.test(d)&&(h=await async function(e,t={}){const r={method:"GET",headers:{},mode:"cors",cache:"default",referrerPolicy:"no-referrer-when-downgrade"};let s;t.headers&&n.__(t.headers,((e,t)=>{r.headers[t]=e})),t.credentials&&(r.credentials=t.credentials),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),"function"==typeof AbortController&&(s=new AbortController,r.signal=s.signal);const a=await fetch(e,r);if(a.ok&&a.status>=200&&a.status<=299){const e=a.body.getReader(),t=[];let r=0;for(;;){let s=await e.read();if(s.done)break;if(r+=s.value.length,t.push(s.value),r>=100)break}if(s&&s.abort(),t.length){const e=t.length>1?(0,i.A)(Uint8Array,t):t[0];if(e.length){const t=o.decode(e.subarray(0,100));if(/<\?xml/.test(t)){if(t.indexOf("<MPD")>-1)return"mpd"}else if(/#EXTM3U/.test(t))return"m3u8"}}}return""}(e,r));let l=0;"wss"===d||"ws"===d?l=2:"webtransport"===d&&(l=3),c=null!==(u=s.$$[h])&&void 0!==u?u:l}return{type:c,ext:h,info:d}}},36204:(e,t,r)=>{"use strict";r.d(t,{t:()=>h});var s=r(63939),i=r(50932),n=r(56024),o=r(66788),a=r(14686),c=r(77231);function h(e,t=0){0===t&&(t=(0,n.FP)()),i.M[15](t+152,e.sampleRate),i.M[15](t+76,e.numberOfFrames),i.M[15](t+292,e.numberOfChannels),i.M[15](t+80,function(e){switch(e){case"u8":return 0;case"s16":return 1;case"s32":return 2;case"f32":return 3;case"u8-planar":return 5;case"s16-planar":return 6;case"s32-planar":return 7;case"f32-planar":return 8;default:throw new Error("not support")}}(e.format)),i.M[17](t+104,BigInt(Math.floor(e.timestamp))),i.M[17](t+312,BigInt(Math.floor(e.duration))),i.M[15](t+124,c.SF),i.M[15](t+120,1),(0,n.rh)(t);const r=(0,o.K0)(s.f[15](t+80))?s.f[15](t+292):1;for(let i=0;i<r;i++)e.copyTo((0,a.s3)(s.f[20](s.f[20](t+64)+4*i),s.f[15](t+32)),{planeIndex:i});return t}},84716:(e,t,r)=>{"use strict";r.d(t,{T:()=>h});var s=r(63939),i=(r(9599),r(14686)),n=r(66788),o=r(44328),a=r(77231);function c(e){switch(s.f[15](e+80)){case 0:return"u8";case 1:return"s16";case 2:return"s32";case 3:return"f32";case 5:return"u8-planar";case 6:return"s16-planar";case 7:return"s32-planar";case 8:return"f32-planar";default:throw new Error("not support")}}function h(e,t){const r=(0,n.K0)(s.f[15](e+80)),h=r?s.f[15](e+292):1;let d;const u=(0,n.Dw)(s.f[15](e+80));if(r){const t=s.f[15](e+76)*u,r=new Uint8Array(h*t);let n=0;for(let o=0;o<h;o++)r.set((0,i.s3)(s.f[20](e+4*o),t),n),n+=t;d=function(e,t){switch(e){case 0:case 5:return t;case 1:case 6:return new Int16Array(t.buffer);case 2:case 7:return new Int32Array(t.buffer);case 3:case 8:return new Float32Array(t.buffer);default:throw new Error("not support")}}(s.f[15](e+80),r)}else d=function(e,t,r){switch(e){case 0:case 5:return(0,i.s3)(t,r);case 1:case 6:return(0,i.cC)(t,r>>>1);case 2:case 7:return(0,i.gd)(t,r>>>2);case 3:case 8:return(0,i.TL)(t,r>>>2);default:throw new Error("not support")}}(s.f[15](e+80),s.f[20](e),u*s.f[15](e+76)*s.f[15](e+292));return new AudioData({data:d,format:c(e),sampleRate:s.f[15](e+152),numberOfFrames:s.f[15](e+76),numberOfChannels:s.f[15](e+292),timestamp:Number(t||(0,o.Mr)(s.f[17](e+104),e+120,a.KR))})}},89188:(e,t,r)=>{"use strict";r.d(t,{pt:()=>d});var s=r(63939),i=(r(9599),r(97317)),n=r(44328),o=r(77231),a=r(11473);function c(e){switch(e){case 0:return"I420";case 33:return"I420A";case 4:return"I422";case 5:return"I444";case 28:return"BGRA";case 26:return"RGBA";case 23:return"NV12";default:return null}}function h(e){const t={fullRange:!1,matrix:null,primaries:null,transfer:null};switch(s.f[15](e+220)){case 1:default:t.matrix="bt709";break;case 6:t.matrix="smpte170m";break;case 5:t.matrix="bt470bg";break;case 0:t.matrix="rgb"}switch(s.f[15](e+212)){case 1:default:t.primaries="bt709";break;case 5:t.primaries="bt470bg";break;case 6:t.primaries="smpte170m"}switch(s.f[15](e+216)){case 1:default:t.transfer="bt709";break;case 13:t.transfer="iec61966-2-1";break;case 6:t.transfer="smpte170m"}return 2===s.f[15](e+208)&&(t.fullRange=!0),t}function d(e,t){let r=s.f[15](e+72);const d=i.g[s.f[15](e+80)],u=[];for(let t=0;t<d.nbComponents;t++)u.push({offset:s.f[20](e+4*t),stride:s.f[15](e+32+4*t)});const l={codedWidth:s.f[15](e+68),codedHeight:r,timestamp:Number(t||(0,n.Mr)(s.f[17](e+104),e+120,o.KR)),format:c(s.f[15](e+80)),duration:Number((0,n.Mr)(s.f[17](e+312),e+120,o.KR)),layout:u,colorSpace:h(e),visibleRect:{x:s.f[25](e+276),y:s.f[25](e+268),width:s.f[15](e+68)-(s.f[25](e+276)+s.f[25](e+280)),height:s.f[15](e+72)-(s.f[25](e+268)+s.f[25](e+272))}};return new VideoFrame((0,a.Lv)(),l)}},22898:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var s=r(63939),i=(r(9599),r(44328)),n=r(14686),o=r(77231);function a(e){const t=1&s.f[15](e+36);return new EncodedAudioChunk({type:t?"key":"delta",timestamp:Number((0,i.Mr)(s.f[17](e+8),e+72,o.KR)),data:(0,n.s3)(s.f[20](e+24),s.f[15](e+28))})}},28917:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var s=r(63939),i=(r(9599),r(44328)),n=r(14686),o=r(77231);function a(e){const t=1&s.f[15](e+36);return new EncodedVideoChunk({type:t?"key":"delta",timestamp:Number((0,i.Mr)(s.f[17](e+8),e+72,o.KR)),data:(0,n.s3)(s.f[20](e+24),s.f[15](e+28))})}},94561:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var s=r(26429),i=r(76045),n=r(67672);async function o(e,t=!1){let r;return n.Yj(e)||n.sv(e)?(r=await(0,i.A)({source:e}),s.USE_THREADS&&t&&(r.threadModule=await(0,i.A)({source:r.buffer},{child:!0})),delete r.buffer):r=e,r}},59944:(e,t,r)=>{"use strict";r.d(t,{A:()=>h});var s=r(63939),i=r(50932),n=r(71517),o=r(37837),a=r(14686),c=r(77231);function h(e,t=0,r){0===t&&(t=(0,n._5)()),i.M[17](t+8,BigInt(Math.floor(e.timestamp))),i.M[17](t+16,BigInt(Math.floor(e.timestamp))),i.M[17](t+48,BigInt(Math.floor(e.duration))),i.M[15](t+76,c.SF),i.M[15](t+72,1),i.M[15](t+36,1|s.f[15](t+36));const h=(0,o.sY)(e.byteLength);var d;if(e.copyTo((0,a.s3)(h,e.byteLength)),(0,n.NX)(t,h,e.byteLength),r&&null!==(d=r.decoderConfig)&&void 0!==d&&d.description){let e;e=r.decoderConfig.description instanceof ArrayBuffer?new Uint8Array(r.decoderConfig.description):new Uint8Array(r.decoderConfig.description.buffer);const s=(0,o.sY)(e.length);(0,a.lW)(s,e.length,e),(0,n.Ow)(t,1,s,e.length)}}},26777:(e,t,r)=>{"use strict";r.d(t,{A:()=>h});var s=r(63939),i=r(50932),n=r(71517),o=r(37837),a=r(14686),c=r(77231);function h(e,t=0,r){0===t&&(t=(0,n._5)()),i.M[17](t+8,BigInt(Math.floor(e.timestamp))),i.M[15](t+76,c.SF),i.M[15](t+72,1),i.M[17](t+48,BigInt(Math.floor(e.duration)));const h=(0,o.sY)(e.byteLength);if(e.copyTo((0,a.s3)(h,e.byteLength)),(0,n.NX)(t,h,e.byteLength),r){var d;if(null!==(d=r.decoderConfig)&&void 0!==d&&d.description){let e;e=r.decoderConfig.description instanceof ArrayBuffer?new Uint8Array(r.decoderConfig.description):new Uint8Array(r.decoderConfig.description.buffer);const s=(0,o.sY)(e.length);(0,a.lW)(s,e.length,e),(0,n.Ow)(t,1,s,e.length)}if(r.alphaSideData){const e=(0,o.sY)(r.alphaSideData.byteLength);let s;s=r.alphaSideData instanceof ArrayBuffer?new Uint8Array(r.alphaSideData):new Uint8Array(r.alphaSideData.buffer),(0,a.lW)(e,s.length,s),(0,n.Ow)(t,15,e,s.length)}}"key"===e.type&&i.M[15](t+36,1|s.f[15](t+36))}},79756:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r(63939),i=r(62751);function n(e){const t=s.f[15](e+4);let r=s.f[15](e+48),n=i.os[t];return 86018===t&&(n=`${n}.${r}`),n||"unknown"}},39365:(e,t,r)=>{"use strict";r.d(t,{C:()=>i});var s=r(86834);function i(e){return e?!s.A.chrome||s.A.checkVersion(s.A.majorVersion,"94",!0)?"prefer-hardware":"allow":!s.A.chrome||s.A.checkVersion(s.A.majorVersion,"94",!0)?"prefer-software":"deny"}},28875:(e,t,r)=>{"use strict";r.d(t,{A:()=>m});var s=r(63939),i=r(62751),n=r(21477),o=r(97077),a=r(82014),c=r(59166),h=r(67659),d=r(20525),u=r(77231),l=r(14686),f=r(90932),p=r(60264);function m(e,t){const r=s.f[15](e+4);let m=s.f[15](e+48),g=s.f[15](e+52);!t&&0!==s.f[20](e+12)&&s.f[15](e+16)&&(t=(0,l.s3)(s.f[20](e+12),s.f[15](e+16)));let A=i.os[r],v="";if(27===r)110===m&&(m=100),v=d.GP("%s.%02x00%02x",A,255&m,255&g);else if(173===r){let e=0,r=0,s=0,i=0;t&&(p.Bs(t)&&(t=h.S1(t)),t.length>13&&(e=t[1]>>>6&3,s=t[1]>>>5&1,r=t[2]|t[3]<<8|t[4]<<16|t[5]<<24,i=240&t[6]));const n={0:"",1:"A",2:"B",3:"C"};v=d.GP("%s.%s%d.%x.%s%d.%x",A,n[e],m,r,0===s?"L":"H",g,i)}else if(196===r){var w;let e=0;if((null===(w=t)||void 0===w?void 0:w.length)>13&&(e=1&t[5]),v=d.GP("%s.%d.%s%d",A,m,0===e?"L":"H",g),t){p.Bs(t)&&(t=c.S1(t));const e=c.Ui(t);if(e.generalConstraintInfo.length){let t=e.generalConstraintInfo.length-1;for(;t>0&&0===e.generalConstraintInfo[t];)t--;const r=e.generalConstraintInfo.slice(0,t+1);r.length&&(v+=`.C${f.l(new Uint8Array(r),!1)}`)}e.generalSubProfileIdc.length&&(v+=`.S${e.generalSubProfileIdc.map((e=>e.toString(16))).join("+")}`),v+=`.O${e.olsIdx}+${e.numSublayers}`}}else if(225===r)if(t){const e=n.Ui(t);v=d.GP("%s.%d.%02d%s.%02d.%d.%d%d%d",A,e.profile,e.level,e.tier?"H":"M",e.bitDepth,e.monochrome,e.chromaSubsamplingX,e.chromaSubsamplingY,e.chromaSamplePosition)}else v=d.GP("%s.%d.%02dM.08",A,m,g);else if(139===r)if(t){const e=o.Ui(t);v=d.GP("%s.%02d.%02d.%02d",A,e.profile,e.level,e.bitDepth)}else v=m!==u.N_&&g!==u.N_?d.GP("%s.%02d.%02d.08",A,m,g):A;else if(167===r)if(t){const e=a.Ui(t);v=d.GP("%s.%02d.%02d.%02d.%02d.%02d.%02d.%02d.%02d",A,e.profile,e.level,e.bitDepth,e.chromaSubsampling,e.colorPrimaries,e.colorTrc,e.colorSpace,e.fullRangeFlag)}else v=m!==u.N_&&g!==u.N_?d.GP("%s.%02d.%02d.08.00",A,m,g):d.GP("%s.%02d.%02d.08.00",A,0,40);else v=A||"unknown";return v}},67603:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var s=r(4919);let i=WebAssembly.validate((0,s.E_)("AGFzbQEAAAABBgFgAX8BfwISAQNlbnYGbWVtb3J5AgMBgIACAwIBAAcJAQVsb2FkOAAACgoBCAAgAP4SAAAL")),n=WebAssembly.validate((0,s.E_)("AGFzbQEAAAABBQFgAAF7AhIBA2VudgZtZW1vcnkCAwGAgAIDAgEACgoBCABBAP0ABAAL"));function o(e,t,r){switch(t){case"decoder":if(r>65536&&r<=65572)return`${e}/decode/pcm${n?"-simd":i?"-atomic":""}.wasm`;switch(r){case 2:return`${e}/decode/mpeg2video${n?"-simd":i?"-atomic":""}.wasm`;case 27:return`${e}/decode/h264${n?"-simd":i?"-atomic":""}.wasm`;case 30:return`${e}/decode/theora${n?"-simd":i?"-atomic":""}.wasm`;case 86018:return`${e}/decode/aac${n?"-simd":i?"-atomic":""}.wasm`;case 86019:return`${e}/decode/ac3${n?"-simd":i?"-atomic":""}.wasm`;case 86056:return`${e}/decode/eac3${n?"-simd":i?"-atomic":""}.wasm`;case 86020:return`${e}/decode/dca${n?"-simd":i?"-atomic":""}.wasm`;case 86017:return`${e}/decode/mp3${n?"-simd":i?"-atomic":""}.wasm`;case 173:return`${e}/decode/hevc${n?"-simd":i?"-atomic":""}.wasm`;case 196:return`${e}/decode/vvc${n?"-simd":i?"-atomic":""}.wasm`;case 12:return`${e}/decode/mpeg4${n?"-simd":i?"-atomic":""}.wasm`;case 225:return`${e}/decode/av1${n?"-simd":i?"-atomic":""}.wasm`;case 86051:return`${e}/decode/speex${n?"-simd":i?"-atomic":""}.wasm`;case 86076:return`${e}/decode/opus${n?"-simd":i?"-atomic":""}.wasm`;case 86028:return`${e}/decode/flac${n?"-simd":i?"-atomic":""}.wasm`;case 86021:return`${e}/decode/vorbis${n?"-simd":i?"-atomic":""}.wasm`;case 139:return`${e}/decode/vp8${n?"-simd":i?"-atomic":""}.wasm`;case 167:return`${e}/decode/vp9${n?"-simd":i?"-atomic":""}.wasm`;default:return null}case"encoder":if(r>65536&&r<=65572)return`${e}/encode/pcm${n?"-simd":i?"-atomic":""}.wasm`;switch(r){case 27:return`${e}/encode/x264${n?"-simd":i?"-atomic":""}.wasm`;case 30:return`${e}/encode/theora${n?"-simd":i?"-atomic":""}.wasm`;case 86018:return`${e}/encode/aac${n?"-simd":i?"-atomic":""}.wasm`;case 86019:return`${e}/encode/ac3${n?"-simd":i?"-atomic":""}.wasm`;case 86056:return`${e}/encode/eac3${n?"-simd":i?"-atomic":""}.wasm`;case 86020:return`${e}/encode/dca${n?"-simd":i?"-atomic":""}.wasm`;case 86017:return`${e}/encode/mp3lame${n?"-simd":i?"-atomic":""}.wasm`;case 173:return`${e}/encode/x265${n?"-simd":i?"-atomic":""}.wasm`;case 12:return`${e}/encode/mpeg4${n?"-simd":i?"-atomic":""}.wasm`;case 225:return`${e}/encode/av1${n?"-simd":i?"-atomic":""}.wasm`;case 86051:return`${e}/encode/speex${n?"-simd":i?"-atomic":""}.wasm`;case 86076:return`${e}/encode/opus${n?"-simd":i?"-atomic":""}.wasm`;case 86028:return`${e}/encode/flac${n?"-simd":i?"-atomic":""}.wasm`;case 86021:return`${e}/encode/vorbis${n?"-simd":i?"-atomic":""}.wasm`;case 139:return`${e}/encode/vp8${n?"-simd":i?"-atomic":""}.wasm`;case 167:return`${e}/encode/vp9${n?"-simd":i?"-atomic":""}.wasm`;default:return null}case"resampler":return`${e}/resample/resample${n?"-simd":i?"-atomic":""}.wasm`;case"scaler":return`${e}/scale/scale${n?"-simd":i?"-atomic":""}.wasm`;case"stretchpitcher":return`${e}/stretchpitch/stretchpitch${n?"-simd":i?"-atomic":""}.wasm`}}},93147:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r(63939),i=r(97317);function n(e){if(0!==s.f[15](e))return!1;const t=i.g[s.f[15](e+28)];return t&&128&t.flags}},24310:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r(63939),i=r(97317);function n(e){if(0!==s.f[15](e))return!1;const t=i.g[s.f[15](e+28)];return!(!t||t.comp[0].depth<=8||18!==s.f[15](e+92)&&16!==s.f[15](e+92))}},37180:(e,t,r)=>{"use strict";r.d(t,{OB:()=>h,ab:()=>u,lL:()=>f,mt:()=>d,nG:()=>l});var s=r(63939),i=r(50932),n=r(56024),o=r(97317),a=r(11473),c=r(77231);function h(e){switch(e){case"BGRA":return 28;case"BGRX":return 121;case"I420":return 0;case"I420A":return 33;case"I422":return 4;case"I444":return 5;case"NV12":return 23;case"RGBA":return 26;case"RGBX":return 119;default:return-1}}function d(e){switch(e){case"bt709":default:return 1;case"smpte170m":return 6;case"bt470bg":return 5;case"rgb":return 0}}function u(e){switch(e){case"bt709":default:return 1;case"bt470bg":return 5;case"smpte170m":return 6}}function l(e){switch(e){case"bt709":default:return 1;case"iec61966-2-1":return 13;case"smpte170m":return 6}}function f(e,t=0){0===t?t=(0,n.FP)():(0,n.to)(t),i.M[15](t+80,h(e.format)),i.M[17](t+104,BigInt(Math.floor(e.timestamp))),i.M[17](t+232,s.f[17](t+104)),i.M[15](t+68,e.codedWidth),i.M[15](t+72,e.codedHeight),i.M[17](t+312,BigInt(Math.floor(e.duration))),i.M[15](t+124,c.SF),i.M[15](t+120,1),i.M[15](t+220,d(e.colorSpace.matrix)),i.M[15](t+212,u(e.colorSpace.primaries)),i.M[15](t+216,l(e.colorSpace.transfer)),i.M[15](t+208,e.colorSpace.fullRange?2:1),e.visibleRect&&(i.M[25](t+276,e.visibleRect.left),i.M[25](t+280,e.codedWidth-e.visibleRect.right),i.M[25](t+268,e.visibleRect.top),i.M[25](t+272,e.codedHeight-e.visibleRect.bottom)),(0,n.UD)(t);const r=o.g[s.f[15](t+80)],f=[];for(let e=0;e<r.nbComponents;e++)r.comp[e].plane>=e&&f.push({offset:s.f[20](t+4*e),stride:s.f[15](t+32+4*e)});return e.copyTo((0,a.Lv)(),{layout:f}),t}},16041:(e,t,r)=>{"use strict";r.d(t,{A:()=>h});var s=r(134),i=r(50932),n=(r(55833),r(40046)),o=r(73783),a=r(37837),c=r(56024);class h{constructor(e,t){(0,s.A)(this,"list",void 0),(0,s.A)(this,"mutex",void 0),this.list=e,this.mutex=t}alloc(){let e=this.list.find((e=>-1===n.p_(e+320,-1,1,16,2)),20);return e||(e=(0,a.Gy)(328),(0,c._h)(e),i.M[16](e+320,1),o.s2(this.mutex),this.list.push(e,20),o.Tl(this.mutex)),e}release(e){n.Hh(e+320,16,2)<=0||1===n.jb(e+320,1,16,2)&&((0,c.to)(e),n.M_(e+320,-1,16,2))}}},84290:(e,t,r)=>{"use strict";r.d(t,{A:()=>h});var s=r(134),i=r(50932),n=r(40046),o=r(73783),a=r(37837),c=(r(47958),r(71517));class h{constructor(e,t){(0,s.A)(this,"list",void 0),(0,s.A)(this,"mutex",void 0),this.list=e,this.mutex=t}alloc(){let e=this.list.find((e=>-1===n.p_(e+88,-1,1,16,2)),20);return e||(e=(0,a.Gy)(96),(0,c.Pd)(e),i.M[16](e+88,1),o.s2(this.mutex),this.list.push(e,20),o.Tl(this.mutex)),e}release(e){n.Hh(e+88,16,2)<=0||1===n.jb(e+88,1,16,2)&&((0,c.Up)(e),n.M_(e+88,-1,16,2))}}},97317:(e,t,r)=>{"use strict";r.d(t,{g:()=>s});const s={0:{nbComponents:3,log2ChromaW:1,log2ChromaH:1,flags:16,comp:[{plane:0,step:1,offset:0,shift:0,depth:8},{plane:1,step:1,offset:0,shift:0,depth:8},{plane:2,step:1,offset:0,shift:0,depth:8}]},12:{nbComponents:3,log2ChromaW:1,log2ChromaH:1,flags:16,comp:[{plane:0,step:1,offset:0,shift:0,depth:8},{plane:1,step:1,offset:0,shift:0,depth:8},{plane:2,step:1,offset:0,shift:0,depth:8}]},4:{nbComponents:3,log2ChromaW:1,log2ChromaH:0,flags:16,comp:[{plane:0,step:1,offset:0,shift:0,depth:8},{plane:1,step:1,offset:0,shift:0,depth:8},{plane:2,step:1,offset:0,shift:0,depth:8}]},13:{nbComponents:3,log2ChromaW:1,log2ChromaH:0,flags:16,comp:[{plane:0,step:1,offset:0,shift:0,depth:8},{plane:1,step:1,offset:0,shift:0,depth:8},{plane:2,step:1,offset:0,shift:0,depth:8}]},5:{nbComponents:3,log2ChromaW:0,log2ChromaH:0,flags:16,comp:[{plane:0,step:1,offset:0,shift:0,depth:8},{plane:1,step:1,offset:0,shift:0,depth:8},{plane:2,step:1,offset:0,shift:0,depth:8}]},14:{nbComponents:3,log2ChromaW:0,log2ChromaH:0,flags:16,comp:[{plane:0,step:1,offset:0,shift:0,depth:8},{plane:1,step:1,offset:0,shift:0,depth:8},{plane:2,step:1,offset:0,shift:0,depth:8}]},23:{nbComponents:3,log2ChromaW:1,log2ChromaH:1,flags:16,comp:[{plane:0,step:1,offset:0,shift:0,depth:8},{plane:1,step:2,offset:0,shift:0,depth:8},{plane:1,step:2,offset:1,shift:0,depth:8}]},59:{nbComponents:3,log2ChromaW:1,log2ChromaH:1,flags:17,comp:[{plane:0,step:1,offset:0,shift:0,depth:9},{plane:1,step:1,offset:0,shift:0,depth:9},{plane:2,step:1,offset:0,shift:0,depth:9}]},60:{nbComponents:3,log2ChromaW:1,log2ChromaH:1,flags:16,comp:[{plane:0,step:1,offset:0,shift:0,depth:9},{plane:1,step:1,offset:0,shift:0,depth:9},{plane:2,step:1,offset:0,shift:0,depth:9}]},61:{nbComponents:3,log2ChromaW:1,log2ChromaH:1,flags:17,comp:[{plane:0,step:1,offset:0,shift:0,depth:10},{plane:1,step:1,offset:0,shift:0,depth:10},{plane:2,step:1,offset:0,shift:0,depth:10}]},62:{nbComponents:3,log2ChromaW:1,log2ChromaH:1,flags:16,comp:[{plane:0,step:1,offset:0,shift:0,depth:10},{plane:1,step:1,offset:0,shift:0,depth:10},{plane:2,step:1,offset:0,shift:0,depth:10}]},122:{nbComponents:3,log2ChromaW:1,log2ChromaH:1,flags:17,comp:[{plane:0,step:1,offset:0,shift:0,depth:12},{plane:1,step:1,offset:0,shift:0,depth:12},{plane:2,step:1,offset:0,shift:0,depth:12}]},123:{nbComponents:3,log2ChromaW:1,log2ChromaH:1,flags:16,comp:[{plane:0,step:1,offset:0,shift:0,depth:12},{plane:1,step:1,offset:0,shift:0,depth:12},{plane:2,step:1,offset:0,shift:0,depth:12}]},124:{nbComponents:3,log2ChromaW:1,log2ChromaH:1,flags:17,comp:[{plane:0,step:1,offset:0,shift:0,depth:14},{plane:1,step:1,offset:0,shift:0,depth:14},{plane:2,step:1,offset:0,shift:0,depth:14}]},125:{nbComponents:3,log2ChromaW:1,log2ChromaH:1,flags:16,comp:[{plane:0,step:1,offset:0,shift:0,depth:14},{plane:1,step:1,offset:0,shift:0,depth:14},{plane:2,step:1,offset:0,shift:0,depth:14}]},46:{nbComponents:3,log2ChromaW:1,log2ChromaH:1,flags:17,comp:[{plane:0,step:1,offset:0,shift:0,depth:16},{plane:1,step:1,offset:0,shift:0,depth:16},{plane:2,step:1,offset:0,shift:0,depth:16}]},45:{nbComponents:3,log2ChromaW:1,log2ChromaH:1,flags:16,comp:[{plane:0,step:1,offset:0,shift:0,depth:16},{plane:1,step:1,offset:0,shift:0,depth:16},{plane:2,step:1,offset:0,shift:0,depth:16}]},69:{nbComponents:3,log2ChromaW:1,log2ChromaH:0,flags:17,comp:[{plane:0,step:1,offset:0,shift:0,depth:9},{plane:1,step:1,offset:0,shift:0,depth:9},{plane:2,step:1,offset:0,shift:0,depth:9}]},70:{nbComponents:3,log2ChromaW:1,log2ChromaH:0,flags:16,comp:[{plane:0,step:1,offset:0,shift:0,depth:9},{plane:1,step:1,offset:0,shift:0,depth:9},{plane:2,step:1,offset:0,shift:0,depth:9}]},63:{nbComponents:3,log2ChromaW:1,log2ChromaH:0,flags:17,comp:[{plane:0,step:1,offset:0,shift:0,depth:10},{plane:1,step:1,offset:0,shift:0,depth:10},{plane:2,step:1,offset:0,shift:0,depth:10}]},64:{nbComponents:3,log2ChromaW:1,log2ChromaH:0,flags:16,comp:[{plane:0,step:1,offset:0,shift:0,depth:10},{plane:1,step:1,offset:0,shift:0,depth:10},{plane:2,step:1,offset:0,shift:0,depth:10}]},126:{nbComponents:3,log2ChromaW:1,log2ChromaH:0,flags:17,comp:[{plane:0,step:1,offset:0,shift:0,depth:12},{plane:1,step:1,offset:0,shift:0,depth:12},{plane:2,step:1,offset:0,shift:0,depth:12}]},127:{nbComponents:3,log2ChromaW:1,log2ChromaH:0,flags:16,comp:[{plane:0,step:1,offset:0,shift:0,depth:12},{plane:1,step:1,offset:0,shift:0,depth:12},{plane:2,step:1,offset:0,shift:0,depth:12}]},128:{nbComponents:3,log2ChromaW:1,log2ChromaH:0,flags:17,comp:[{plane:0,step:1,offset:0,shift:0,depth:14},{plane:1,step:1,offset:0,shift:0,depth:14},{plane:2,step:1,offset:0,shift:0,depth:14}]},129:{nbComponents:3,log2ChromaW:1,log2ChromaH:0,flags:16,comp:[{plane:0,step:1,offset:0,shift:0,depth:14},{plane:1,step:1,offset:0,shift:0,depth:14},{plane:2,step:1,offset:0,shift:0,depth:14}]},48:{nbComponents:3,log2ChromaW:1,log2ChromaH:0,flags:17,comp:[{plane:0,step:1,offset:0,shift:0,depth:16},{plane:1,step:1,offset:0,shift:0,depth:16},{plane:2,step:1,offset:0,shift:0,depth:16}]},47:{nbComponents:3,log2ChromaW:1,log2ChromaH:0,flags:16,comp:[{plane:0,step:1,offset:0,shift:0,depth:16},{plane:1,step:1,offset:0,shift:0,depth:16},{plane:2,step:1,offset:0,shift:0,depth:16}]},65:{nbComponents:3,log2ChromaW:0,log2ChromaH:0,flags:17,comp:[{plane:0,step:1,offset:0,shift:0,depth:9},{plane:1,step:1,offset:0,shift:0,depth:9},{plane:2,step:1,offset:0,shift:0,depth:9}]},66:{nbComponents:3,log2ChromaW:0,log2ChromaH:0,flags:16,comp:[{plane:0,step:1,offset:0,shift:0,depth:9},{plane:1,step:1,offset:0,shift:0,depth:9},{plane:2,step:1,offset:0,shift:0,depth:9}]},67:{nbComponents:3,log2ChromaW:0,log2ChromaH:0,flags:17,comp:[{plane:0,step:1,offset:0,shift:0,depth:10},{plane:1,step:1,offset:0,shift:0,depth:10},{plane:2,step:1,offset:0,shift:0,depth:10}]},68:{nbComponents:3,log2ChromaW:0,log2ChromaH:0,flags:16,comp:[{plane:0,step:1,offset:0,shift:0,depth:10},{plane:1,step:1,offset:0,shift:0,depth:10},{plane:2,step:1,offset:0,shift:0,depth:10}]},130:{nbComponents:3,log2ChromaW:0,log2ChromaH:0,flags:17,comp:[{plane:0,step:1,offset:0,shift:0,depth:12},{plane:1,step:1,offset:0,shift:0,depth:12},{plane:2,step:1,offset:0,shift:0,depth:12}]},131:{nbComponents:3,log2ChromaW:0,log2ChromaH:0,flags:16,comp:[{plane:0,step:1,offset:0,shift:0,depth:12},{plane:1,step:1,offset:0,shift:0,depth:12},{plane:2,step:1,offset:0,shift:0,depth:12}]},132:{nbComponents:3,log2ChromaW:0,log2ChromaH:0,flags:17,comp:[{plane:0,step:1,offset:0,shift:0,depth:14},{plane:1,step:1,offset:0,shift:0,depth:14},{plane:2,step:1,offset:0,shift:0,depth:14}]},133:{nbComponents:3,log2ChromaW:0,log2ChromaH:0,flags:16,comp:[{plane:0,step:1,offset:0,shift:0,depth:14},{plane:1,step:1,offset:0,shift:0,depth:14},{plane:2,step:1,offset:0,shift:0,depth:14}]},50:{nbComponents:3,log2ChromaW:0,log2ChromaH:0,flags:17,comp:[{plane:0,step:1,offset:0,shift:0,depth:16},{plane:1,step:1,offset:0,shift:0,depth:16},{plane:2,step:1,offset:0,shift:0,depth:16}]},49:{nbComponents:3,log2ChromaW:0,log2ChromaH:0,flags:16,comp:[{plane:0,step:1,offset:0,shift:0,depth:16},{plane:1,step:1,offset:0,shift:0,depth:16},{plane:2,step:1,offset:0,shift:0,depth:16}]},26:{nbComponents:4,log2ChromaW:0,log2ChromaH:0,flags:160,comp:[{plane:0,step:4,offset:0,shift:0,depth:8},{plane:0,step:4,offset:1,shift:0,depth:8},{plane:0,step:4,offset:2,shift:0,depth:8},{plane:0,step:4,offset:3,shift:0,depth:8}]},119:{nbComponents:3,log2ChromaW:0,log2ChromaH:0,flags:32,comp:[{plane:0,step:4,offset:0,shift:0,depth:8},{plane:0,step:4,offset:1,shift:0,depth:8},{plane:0,step:4,offset:2,shift:0,depth:8}]},28:{nbComponents:4,log2ChromaW:0,log2ChromaH:0,flags:160,comp:[{plane:0,step:4,offset:2,shift:0,depth:8},{plane:0,step:4,offset:1,shift:0,depth:8},{plane:0,step:4,offset:0,shift:0,depth:8},{plane:0,step:4,offset:3,shift:0,depth:8}]},121:{nbComponents:3,log2ChromaW:0,log2ChromaH:0,flags:32,comp:[{plane:0,step:4,offset:2,shift:0,depth:8},{plane:0,step:4,offset:1,shift:0,depth:8},{plane:0,step:4,offset:0,shift:0,depth:8}]},33:{nbComponents:4,log2ChromaW:1,log2ChromaH:1,flags:144,comp:[{plane:0,step:1,offset:0,shift:0,depth:8},{plane:1,step:1,offset:0,shift:0,depth:8},{plane:2,step:1,offset:0,shift:0,depth:8},{plane:3,step:1,offset:0,shift:0,depth:8}]}}},58055:(e,t,r)=>{"use strict";r.d(t,{J:()=>s});const s={0:{bits:8,planar:!1},1:{bits:16,planar:!1},2:{bits:32,planar:!1},10:{bits:64,planar:!1},3:{bits:32,planar:!1},4:{bits:64,planar:!1},5:{bits:8,planar:!0},6:{bits:16,planar:!0},7:{bits:32,planar:!0},11:{bits:64,planar:!0},8:{bits:32,planar:!0},9:{bits:64,planar:!0}}},62751:(e,t,r)=>{"use strict";r.d(t,{$$:()=>n,Eh:()=>p,HR:()=>i,Ki:()=>A,Mb:()=>g,Sz:()=>d,Xp:()=>c,_R:()=>o,_m:()=>f,d8:()=>m,iW:()=>u,mX:()=>l,n1:()=>a,os:()=>s,qO:()=>h});const s={86017:"mp3",86018:"mp4a.40",86021:"vorbis",86028:"flac",86076:"opus",65542:"ulaw",65543:"alaw",225:"av01",27:"avc1",173:"hev1",196:"vvc1",139:"vp8",167:"vp09",12:"mp4v"},i={flv:0,mp4:1,mov:1,ts:2,mts:2,m2ts:2,ivf:5,opus:4,oggs:4,ogg:4,m3u8:2,m3u:2,mpd:1,mp3:14,mkv:8,mka:8,webm:9,aac:15,flac:17,wav:16,srt:19,vtt:18,ssa:20,ass:20,xml:21,ttml:21,h264:11,264:11,avc:11,h265:12,265:12,hevc:12,h266:13,266:13,vvc:13,mpeg:3,mpg:3,rtsp:6,rtmp:7},n={m3u8:4,m3u:4,mpd:5},o={copy:0,h264:27,avc:27,hevc:173,h265:173,vvc:196,h266:196,av1:225,vp9:167,vp8:139,mpeg4:12,theora:30,mpeg2video:2},a={copy:0,aac:86018,ac3:86019,eac3:86056,dca:86020,mp3:86017,opus:86076,flac:86028,speex:86051,vorbis:86021,pcm_alaw:65543,pcm_mulaw:65542},c={webvtt:94226,subrip:94225,ass:94230,ttml:94232,mov_text:94213,hdmv_pgs:94214,hdmv_text:94231,dvd:94208,dvb:94209,eia_608:94218},h={yuv420p:0,yuv422p:4,yuv444p:5,yuva420p:33,yuva422p:78,yuva444p:79,yuvj420p:12,yuvj422p:13,yuvj444p:14,yuv420p10le:62,yuv422p10le:64,yuv444p10le:68,yuva420p10le:87,yuva422p10le:89,yuva444p10le:91,yuv420p10be:61,yuv422p10be:63,yuv444p10be:67,yuva420p10be:86,yuva422p10be:88,yuva444p10be:90},d={u8:0,"u8-planar":5,s16:1,"s16-planar":6,s32:2,"s32-planar":7,s64:10,"s64-planar":11,float:3,"float-planar":8,double:4,"double-planar":9},u={flv:0,mp4:1,mov:1,ts:2,mpegts:2,mpeg:3,ivf:5,ogg:4,opus:4,m3u8:2,m3u:2,mpd:1,mp3:14,mkv:8,matroska:8,mka:8,webm:9,aac:15,flac:17,wav:16,raw_h264:11,raw_h265:12,raw_vvc:13,rtsp:6,rtmp:7},l={tv:1,pc:2},f={bt709:1,fcc:4,bt470bg:5,smpte170m:6,smpte240m:7,ycgco:8,gbr:0,bt2020nc:9},p={bt709:1,bt470m:4,bt470bg:5,smpte170m:6,smpte240m:7,smpte428:10,film:8,smpte431:11,smpte432:12,bt2020:9,"jedec-p22":22,ebu3213:22},m={bt709:1,gamma22:4,gamma28:5,smpte170m:6,smpte240m:7,srgb:13,xvycc:11,"bt2020-10":14,"bt2020-12":15,smpte2084:16,"arib-std-b67":18},g={Audio:1,Video:0,Subtitle:3,Attachment:4,Data:2},A={default:1,dub:2,original:4,comment:8,lyrics:16,karaoke:32,forced:64,"hearing impaired":128,"visual impaired":256,"clean effects":512,"attached pic":1024,"timed thumbnails":2048,captions:65536,descriptions:131072,metadata:262144,dependent:524288,"still image":1048576}},36981:(e,t,r)=>{"use strict";r.d(t,{r:()=>u});var s,i,n=r(134),o=r(80662),a=r.n(o),c=r(61499),h=r(12085);class d{constructor(){(0,n.A)(this,"id",void 0),(0,n.A)(this,"name",void 0),(0,n.A)(this,"opaque",void 0)}}s=d.prototype,(i=new(a())).set("id",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),i.set("name",{0:4,1:0,2:0,3:1,4:16,5:0,6:0,7:4,8:0}),i.set("opaque",{0:1,1:1,2:1,3:0,4:0,5:0,6:0,7:20,8:0}),(0,h.A)(s,c.Og,!0),(0,h.A)(s,c.dc,4),(0,h.A)(s,c.g7,24),(0,h.A)(s,c.JY,i);class u{constructor(){(0,n.A)(this,"order",void 0),(0,n.A)(this,"nbChannels",void 0),(0,n.A)(this,"u",void 0),(0,n.A)(this,"opaque",void 0)}}!function(e){var t=new(a());t.set("order",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),t.set("nbChannels",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:4,8:0}),t.set("u",{0:function(e){var t=new(a());return t.set("mask",{0:10,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),t.set("map",{0:d,1:1,2:1,3:0,4:0,5:0,6:0,7:0,8:0}),(0,h.A)(e,c.Og,!0),(0,h.A)(e,c.dc,8),(0,h.A)(e,c.g7,8),(0,h.A)(e,c.JY,t),e}({}),1:0,2:0,3:0,4:0,5:0,6:0,7:8,8:0}),t.set("opaque",{0:1,1:1,2:1,3:0,4:0,5:0,6:0,7:16,8:0}),(0,h.A)(e,c.Og,!0),(0,h.A)(e,c.dc,8),(0,h.A)(e,c.g7,24),(0,h.A)(e,c.JY,t)}(u.prototype)},50288:(e,t,r)=>{"use strict";r.d(t,{BU:()=>l});var s,i,n=r(134),o=r(80662),a=r.n(o),c=r(61499),h=r(12085),d=r(73783);r(37837);class u{constructor(){(0,n.A)(this,"data",0),(0,n.A)(this,"size",0),(0,n.A)(this,"refcount",0),(0,n.A)(this,"free",0),(0,n.A)(this,"opaque",0),(0,n.A)(this,"flags",0),(0,n.A)(this,"flagsInternal",0)}}s=u.prototype,(i=new(a())).set("data",{0:2,1:1,2:1,3:0,4:0,5:0,6:0,7:0,8:0}),i.set("size",{0:25,1:0,2:0,3:0,4:0,5:0,6:0,7:4,8:0}),i.set("refcount",{0:9,1:0,2:0,3:0,4:0,5:0,6:0,7:8,8:0}),i.set("free",{0:1,1:1,2:1,3:0,4:0,5:0,6:0,7:12,8:0}),i.set("opaque",{0:1,1:1,2:1,3:0,4:0,5:0,6:0,7:16,8:0}),i.set("flags",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:20,8:0}),i.set("flagsInternal",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:24,8:0}),(0,h.A)(s,c.Og,!0),(0,h.A)(s,c.dc,4),(0,h.A)(s,c.g7,28),(0,h.A)(s,c.JY,i);class l{constructor(){(0,n.A)(this,"buffer",0),(0,n.A)(this,"data",0),(0,n.A)(this,"size",0)}}!function(e){var t=new(a());t.set("buffer",{0:u,1:1,2:1,3:0,4:0,5:0,6:0,7:0,8:0}),t.set("data",{0:2,1:1,2:1,3:0,4:0,5:0,6:0,7:4,8:0}),t.set("size",{0:25,1:0,2:0,3:0,4:0,5:0,6:0,7:8,8:0}),(0,h.A)(e,c.Og,!0),(0,h.A)(e,c.dc,4),(0,h.A)(e,c.g7,12),(0,h.A)(e,c.JY,t)}(l.prototype);class f{constructor(){(0,n.A)(this,"mutex",void 0),(0,n.A)(this,"pool",0),(0,n.A)(this,"refcount",0),(0,n.A)(this,"size",0),(0,n.A)(this,"opaque",0),(0,n.A)(this,"alloc",0),(0,n.A)(this,"alloc2",0),(0,n.A)(this,"poolFree",0)}}!function(e){var t=new(a());t.set("mutex",{0:d.eu,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),t.set("pool",{get 0(){return p},1:1,2:1,3:0,4:0,5:0,6:0,7:4,8:0}),t.set("refcount",{0:9,1:0,2:0,3:0,4:0,5:0,6:0,7:8,8:0}),t.set("size",{0:25,1:0,2:0,3:0,4:0,5:0,6:0,7:12,8:0}),t.set("opaque",{0:1,1:1,2:1,3:0,4:0,5:0,6:0,7:16,8:0}),t.set("alloc",{0:1,1:1,2:1,3:0,4:0,5:0,6:0,7:20,8:0}),t.set("alloc2",{0:1,1:1,2:1,3:0,4:0,5:0,6:0,7:24,8:0}),t.set("poolFree",{0:1,1:1,2:1,3:0,4:0,5:0,6:0,7:28,8:0}),(0,h.A)(e,c.Og,!0),(0,h.A)(e,c.dc,4),(0,h.A)(e,c.g7,32),(0,h.A)(e,c.JY,t)}(f.prototype);class p{constructor(){(0,n.A)(this,"data",0),(0,n.A)(this,"opaque",0),(0,n.A)(this,"free",0),(0,n.A)(this,"pool",0),(0,n.A)(this,"next",0),(0,n.A)(this,"buffer",void 0)}}!function(e){var t=new(a());t.set("data",{0:2,1:1,2:1,3:0,4:0,5:0,6:0,7:0,8:0}),t.set("opaque",{0:1,1:1,2:1,3:0,4:0,5:0,6:0,7:4,8:0}),t.set("free",{0:1,1:1,2:1,3:0,4:0,5:0,6:0,7:8,8:0}),t.set("pool",{0:f,1:1,2:1,3:0,4:0,5:0,6:0,7:12,8:0}),t.set("next",{0:p,1:1,2:1,3:0,4:0,5:0,6:0,7:16,8:0}),t.set("buffer",{0:u,1:0,2:0,3:0,4:0,5:0,6:0,7:20,8:0}),(0,h.A)(e,c.Og,!0),(0,h.A)(e,c.dc,4),(0,h.A)(e,c.g7,48),(0,h.A)(e,c.JY,t)}(p.prototype)},77162:(e,t,r)=>{"use strict";r.d(t,{A:()=>m});var s,i,n=r(134),o=r(80662),a=r.n(o),c=r(61499),h=r(12085),d=r(47958),u=r(9599),l=r(36981),f=r(77231),p=r(71766);class m{constructor(){(0,n.A)(this,"codecType",-1),(0,n.A)(this,"codecId",0),(0,n.A)(this,"codecTag",0),(0,n.A)(this,"extradata",0),(0,n.A)(this,"extradataSize",0),(0,n.A)(this,"codedSideData",0),(0,n.A)(this,"nbCodedSideData",0),(0,n.A)(this,"format",f.N_),(0,n.A)(this,"bitrate",BigInt(0)),(0,n.A)(this,"bitsPerCodedSample",0),(0,n.A)(this,"bitsPerRawSample",0),(0,n.A)(this,"profile",f.N_),(0,n.A)(this,"level",f.N_),(0,n.A)(this,"width",0),(0,n.A)(this,"height",0),(0,n.A)(this,"sampleAspectRatio",new u.P({den:1,num:1})),(0,n.A)(this,"framerate",new u.P({den:1,num:0})),(0,n.A)(this,"fieldOrder",0),(0,n.A)(this,"colorRange",0),(0,n.A)(this,"colorPrimaries",2),(0,n.A)(this,"colorTrc",2),(0,n.A)(this,"colorSpace",2),(0,n.A)(this,"chromaLocation",0),(0,n.A)(this,"videoDelay",0),(0,n.A)(this,"chLayout",void 0),(0,n.A)(this,"sampleRate",f.N_),(0,n.A)(this,"blockAlign",0),(0,n.A)(this,"frameSize",0),(0,n.A)(this,"initialPadding",0),(0,n.A)(this,"trailingPadding",0),(0,n.A)(this,"seekPreroll",0),(0,n.A)(this,"bitFormat",0)}destroy(){(0,p.dn)(this[c.o9]),this[c.o9]=0}}s=m.prototype,(i=new(a())).set("codecType",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),i.set("codecId",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:4,8:0}),i.set("codecTag",{0:8,1:0,2:0,3:0,4:0,5:0,6:0,7:8,8:0}),i.set("extradata",{0:2,1:1,2:1,3:0,4:0,5:0,6:0,7:12,8:0}),i.set("extradataSize",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:16,8:0}),i.set("codedSideData",{0:d.lg,1:1,2:1,3:0,4:0,5:0,6:0,7:20,8:0}),i.set("nbCodedSideData",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:24,8:0}),i.set("format",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:28,8:0}),i.set("bitrate",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:32,8:0}),i.set("bitsPerCodedSample",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:40,8:0}),i.set("bitsPerRawSample",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:44,8:0}),i.set("profile",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:48,8:0}),i.set("level",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:52,8:0}),i.set("width",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:56,8:0}),i.set("height",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:60,8:0}),i.set("sampleAspectRatio",{0:u.P,1:0,2:0,3:0,4:0,5:0,6:0,7:64,8:0}),i.set("framerate",{0:u.P,1:0,2:0,3:0,4:0,5:0,6:0,7:72,8:0}),i.set("fieldOrder",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:80,8:0}),i.set("colorRange",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:84,8:0}),i.set("colorPrimaries",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:88,8:0}),i.set("colorTrc",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:92,8:0}),i.set("colorSpace",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:96,8:0}),i.set("chromaLocation",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:100,8:0}),i.set("videoDelay",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:104,8:0}),i.set("chLayout",{0:l.r,1:0,2:0,3:0,4:0,5:0,6:0,7:112,8:0}),i.set("sampleRate",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:136,8:0}),i.set("blockAlign",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:140,8:0}),i.set("frameSize",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:144,8:0}),i.set("initialPadding",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:148,8:0}),i.set("trailingPadding",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:152,8:0}),i.set("seekPreroll",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:156,8:0}),i.set("bitFormat",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:160,8:0}),(0,h.A)(s,c.Og,!0),(0,h.A)(s,c.dc,8),(0,h.A)(s,c.g7,168),(0,h.A)(s,c.JY,i)},56490:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var s,i,n=r(134),o=r(80662),a=r.n(o),c=r(61499),h=r(12085);class d{constructor(){(0,n.A)(this,"key",0),(0,n.A)(this,"value",0)}}s=d.prototype,(i=new(a())).set("key",{0:1,1:1,2:1,3:0,4:0,5:0,6:0,7:0,8:0}),i.set("value",{0:1,1:1,2:1,3:0,4:0,5:0,6:0,7:4,8:0}),(0,h.A)(s,c.Og,!0),(0,h.A)(s,c.dc,4),(0,h.A)(s,c.g7,8),(0,h.A)(s,c.JY,i);class u{constructor(){(0,n.A)(this,"count",0),(0,n.A)(this,"elems",0)}}!function(e){var t=new(a());t.set("count",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),t.set("elems",{0:d,1:1,2:1,3:0,4:0,5:0,6:0,7:4,8:0}),(0,h.A)(e,c.Og,!0),(0,h.A)(e,c.dc,4),(0,h.A)(e,c.g7,8),(0,h.A)(e,c.JY,t)}(u.prototype)},55833:(e,t,r)=>{"use strict";r.d(t,{pu:()=>m});var s=r(134),i=r(80662),n=r.n(i),o=r(61499),a=r(12085),c=r(56490),h=r(50288),d=r(9599),u=r(94300),l=r(36981),f=r(77231),p=r(56024);const m=8;class g{constructor(){(0,s.A)(this,"type",0),(0,s.A)(this,"data",0),(0,s.A)(this,"size",0),(0,s.A)(this,"metadata",0),(0,s.A)(this,"buf",0)}}var A,v;A=g.prototype,(v=new(n())).set("type",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),v.set("data",{0:2,1:1,2:1,3:0,4:0,5:0,6:0,7:4,8:0}),v.set("size",{0:25,1:0,2:0,3:0,4:0,5:0,6:0,7:8,8:0}),v.set("metadata",{0:c.A,1:1,2:1,3:0,4:0,5:0,6:0,7:12,8:0}),v.set("buf",{0:h.BU,1:1,2:1,3:0,4:0,5:0,6:0,7:16,8:0}),(0,a.A)(A,o.Og,!0),(0,a.A)(A,o.dc,4),(0,a.A)(A,o.g7,20),(0,a.A)(A,o.JY,v),function(e){var t=new(n());t.set("displayPrimaries",{0:d.P,1:0,2:0,3:1,4:6,5:0,6:0,7:0,8:0}),t.set("whitePoint",{0:d.P,1:0,2:0,3:1,4:2,5:0,6:0,7:48,8:0}),t.set("minLuminance",{0:d.P,1:0,2:0,3:0,4:0,5:0,6:0,7:64,8:0}),t.set("maxLuminance",{0:d.P,1:0,2:0,3:0,4:0,5:0,6:0,7:72,8:0}),t.set("hasPrimaries",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:80,8:0}),t.set("hasLuminance",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:84,8:0}),(0,a.A)(e,o.Og,!0),(0,a.A)(e,o.dc,4),(0,a.A)(e,o.g7,88),(0,a.A)(e,o.JY,t)}(class{constructor(){(0,s.A)(this,"displayPrimaries",void 0),(0,s.A)(this,"whitePoint",void 0),(0,s.A)(this,"minLuminance",void 0),(0,s.A)(this,"maxLuminance",void 0),(0,s.A)(this,"hasPrimaries",void 0),(0,s.A)(this,"hasLuminance",void 0)}}.prototype),function(e){var t=new(n());t.set("maxCLL",{0:8,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),t.set("maxFALL",{0:8,1:0,2:0,3:0,4:0,5:0,6:0,7:4,8:0}),(0,a.A)(e,o.Og,!0),(0,a.A)(e,o.dc,4),(0,a.A)(e,o.g7,8),(0,a.A)(e,o.JY,t)}(class{constructor(){(0,s.A)(this,"maxCLL",void 0),(0,s.A)(this,"maxFALL",void 0)}}.prototype);class w{constructor(){(0,s.A)(this,"data",new Array(m).fill(0,0,m)),(0,s.A)(this,"linesize",new Array(m).fill(0,0,m)),(0,s.A)(this,"extendedData",0),(0,s.A)(this,"width",f.N_),(0,s.A)(this,"height",f.N_),(0,s.A)(this,"nbSamples",f.N_),(0,s.A)(this,"format",f.N_),(0,s.A)(this,"keyFrame",0),(0,s.A)(this,"pictType",0),(0,s.A)(this,"sampleAspectRatio",new d.P({den:1,num:0})),(0,s.A)(this,"pts",f.Dh),(0,s.A)(this,"pktDts",f.Dh),(0,s.A)(this,"timeBase",void 0),(0,s.A)(this,"quality",f.N_),(0,s.A)(this,"opaque",0),(0,s.A)(this,"repeatPict",f.N_),(0,s.A)(this,"interlacedFrame",f.N_),(0,s.A)(this,"topFieldFirst",f.N_),(0,s.A)(this,"paletteHasChanged",f.N_),(0,s.A)(this,"sampleRate",f.N_),(0,s.A)(this,"buf",new Array(m).fill(0,0,m)),(0,s.A)(this,"extendedBuf",0),(0,s.A)(this,"nbExtendedBuf",0),(0,s.A)(this,"sideData",0),(0,s.A)(this,"nbSideData",0),(0,s.A)(this,"flags",0),(0,s.A)(this,"colorRange",0),(0,s.A)(this,"colorPrimaries",2),(0,s.A)(this,"colorTrc",2),(0,s.A)(this,"colorSpace",2),(0,s.A)(this,"chromaLocation",0),(0,s.A)(this,"bestEffortTimestamp",f.Dh),(0,s.A)(this,"pktPos",f.Dh),(0,s.A)(this,"metadata",0),(0,s.A)(this,"decodeErrorFlags",0),(0,s.A)(this,"pktSize",f.N_),(0,s.A)(this,"hwFramesCtx",0),(0,s.A)(this,"opaqueRef",0),(0,s.A)(this,"cropTop",0),(0,s.A)(this,"cropBottom",0),(0,s.A)(this,"cropLeft",0),(0,s.A)(this,"cropRight",0),(0,s.A)(this,"privateRef",0),(0,s.A)(this,"chLayout",void 0),(0,s.A)(this,"duration",BigInt(0))}close(){(0,p.to)(this[o.o9]),(0,u.A)(this)}}!function(e){var t=new(n());t.set("data",{0:2,1:1,2:1,3:1,4:8,5:0,6:0,7:0,8:0}),t.set("linesize",{0:15,1:0,2:0,3:1,4:8,5:0,6:0,7:32,8:0}),t.set("extendedData",{0:2,1:1,2:2,3:0,4:0,5:0,6:0,7:64,8:0}),t.set("width",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:68,8:0}),t.set("height",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:72,8:0}),t.set("nbSamples",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:76,8:0}),t.set("format",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:80,8:0}),t.set("keyFrame",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:84,8:0}),t.set("pictType",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:88,8:0}),t.set("sampleAspectRatio",{0:d.P,1:0,2:0,3:0,4:0,5:0,6:0,7:92,8:0}),t.set("pts",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:104,8:0}),t.set("pktDts",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:112,8:0}),t.set("timeBase",{0:d.P,1:0,2:0,3:0,4:0,5:0,6:0,7:120,8:0}),t.set("quality",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:128,8:0}),t.set("opaque",{0:1,1:1,2:1,3:0,4:0,5:0,6:0,7:132,8:0}),t.set("repeatPict",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:136,8:0}),t.set("interlacedFrame",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:140,8:0}),t.set("topFieldFirst",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:144,8:0}),t.set("paletteHasChanged",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:148,8:0}),t.set("sampleRate",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:152,8:0}),t.set("buf",{0:h.BU,1:1,2:1,3:1,4:8,5:0,6:0,7:156,8:0}),t.set("extendedBuf",{0:h.BU,1:1,2:2,3:0,4:0,5:0,6:0,7:188,8:0}),t.set("nbExtendedBuf",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:192,8:0}),t.set("sideData",{0:g,1:1,2:2,3:0,4:0,5:0,6:0,7:196,8:0}),t.set("nbSideData",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:200,8:0}),t.set("flags",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:204,8:0}),t.set("colorRange",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:208,8:0}),t.set("colorPrimaries",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:212,8:0}),t.set("colorTrc",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:216,8:0}),t.set("colorSpace",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:220,8:0}),t.set("chromaLocation",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:224,8:0}),t.set("bestEffortTimestamp",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:232,8:0}),t.set("pktPos",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:240,8:0}),t.set("metadata",{0:c.A,1:1,2:1,3:0,4:0,5:0,6:0,7:248,8:0}),t.set("decodeErrorFlags",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:252,8:0}),t.set("pktSize",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:256,8:0}),t.set("hwFramesCtx",{0:h.BU,1:1,2:1,3:0,4:0,5:0,6:0,7:260,8:0}),t.set("opaqueRef",{0:h.BU,1:1,2:1,3:0,4:0,5:0,6:0,7:264,8:0}),t.set("cropTop",{0:25,1:0,2:0,3:0,4:0,5:0,6:0,7:268,8:0}),t.set("cropBottom",{0:25,1:0,2:0,3:0,4:0,5:0,6:0,7:272,8:0}),t.set("cropLeft",{0:25,1:0,2:0,3:0,4:0,5:0,6:0,7:276,8:0}),t.set("cropRight",{0:25,1:0,2:0,3:0,4:0,5:0,6:0,7:280,8:0}),t.set("privateRef",{0:h.BU,1:1,2:1,3:0,4:0,5:0,6:0,7:284,8:0}),t.set("chLayout",{0:l.r,1:0,2:0,3:0,4:0,5:0,6:0,7:288,8:0}),t.set("duration",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:312,8:0}),(0,a.A)(e,o.Og,!0),(0,a.A)(e,o.dc,8),(0,a.A)(e,o.g7,320),(0,a.A)(e,o.JY,t)}(w.prototype),function(e){var t=new(n());t.set("refCount",{0:16,1:0,2:0,3:0,4:0,5:0,6:0,7:320,8:0}),(0,a.A)(e,o.Og,!0),(0,a.A)(e,o.dc,8),(0,a.A)(e,o.g7,328),(0,a.A)(e,o.JY,t)}(class extends w{constructor(...e){super(...e),(0,s.A)(this,"refCount",void 0)}}.prototype)},47958:(e,t,r)=>{"use strict";r.d(t,{lg:()=>f});var s,i,n=r(134),o=r(80662),a=r.n(o),c=r(61499),h=r(12085),d=r(50288),u=r(9599),l=r(77231);class f{constructor(){(0,n.A)(this,"data",0),(0,n.A)(this,"size",0),(0,n.A)(this,"type",-1)}}s=f.prototype,(i=new(a())).set("data",{0:2,1:1,2:1,3:0,4:0,5:0,6:0,7:0,8:0}),i.set("size",{0:25,1:0,2:0,3:0,4:0,5:0,6:0,7:4,8:0}),i.set("type",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:8,8:0}),(0,h.A)(s,c.Og,!0),(0,h.A)(s,c.dc,4),(0,h.A)(s,c.g7,12),(0,h.A)(s,c.JY,i),function(e){var t=new(a());t.set("wallclock",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),t.set("flags",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:8,8:0}),(0,h.A)(e,c.Og,!0),(0,h.A)(e,c.dc,8),(0,h.A)(e,c.g7,16),(0,h.A)(e,c.JY,t)}(class{constructor(){(0,n.A)(this,"wallclock",void 0),(0,n.A)(this,"flags",void 0)}}.prototype);class p{constructor(){(0,n.A)(this,"buf",0),(0,n.A)(this,"pts",l.Dh),(0,n.A)(this,"dts",l.Dh),(0,n.A)(this,"data",0),(0,n.A)(this,"size",0),(0,n.A)(this,"streamIndex",l.N_),(0,n.A)(this,"flags",0),(0,n.A)(this,"sideData",0),(0,n.A)(this,"sideDataElems",0),(0,n.A)(this,"duration",l.Dh),(0,n.A)(this,"pos",l.Dh),(0,n.A)(this,"opaque",0),(0,n.A)(this,"opaqueRef",0),(0,n.A)(this,"timeBase",new u.P({den:l.SF,num:1})),(0,n.A)(this,"bitFormat",0)}}!function(e){var t=new(a());t.set("buf",{0:d.BU,1:1,2:1,3:0,4:0,5:0,6:0,7:0,8:0}),t.set("pts",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:8,8:0}),t.set("dts",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:16,8:0}),t.set("data",{0:2,1:1,2:1,3:0,4:0,5:0,6:0,7:24,8:0}),t.set("size",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:28,8:0}),t.set("streamIndex",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:32,8:0}),t.set("flags",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:36,8:0}),t.set("sideData",{0:f,1:1,2:1,3:0,4:0,5:0,6:0,7:40,8:0}),t.set("sideDataElems",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:44,8:0}),t.set("duration",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:48,8:0}),t.set("pos",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:56,8:0}),t.set("opaque",{0:1,1:1,2:1,3:0,4:0,5:0,6:0,7:64,8:0}),t.set("opaqueRef",{0:d.BU,1:1,2:1,3:0,4:0,5:0,6:0,7:68,8:0}),t.set("timeBase",{0:u.P,1:0,2:0,3:0,4:0,5:0,6:0,7:72,8:0}),t.set("bitFormat",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:80,8:0}),(0,h.A)(e,c.Og,!0),(0,h.A)(e,c.dc,8),(0,h.A)(e,c.g7,88),(0,h.A)(e,c.JY,t)}(p.prototype),function(e){var t=new(a());t.set("refCount",{0:16,1:0,2:0,3:0,4:0,5:0,6:0,7:88,8:0}),(0,h.A)(e,c.Og,!0),(0,h.A)(e,c.dc,8),(0,h.A)(e,c.g7,96),(0,h.A)(e,c.JY,t)}(class extends p{constructor(...e){super(...e),(0,n.A)(this,"refCount",void 0)}}.prototype)},10278:(e,t,r)=>{"use strict";var s,i,n=r(134),o=r(80662),a=r.n(o),c=r(61499),h=r(12085);class d{constructor(){(0,n.A)(this,"data",void 0),(0,n.A)(this,"linesize",void 0),(0,n.A)(this,"nbSamples",void 0),(0,n.A)(this,"maxnbSamples",void 0),(0,n.A)(this,"channels",void 0),(0,n.A)(this,"sampleRate",void 0),(0,n.A)(this,"format",void 0),(0,n.A)(this,"timestamp",void 0),(0,n.A)(this,"duration",void 0)}}s=d.prototype,(i=new(a())).set("data",{0:2,1:1,2:2,3:0,4:0,5:0,6:0,7:0,8:0}),i.set("linesize",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:4,8:0}),i.set("nbSamples",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:8,8:0}),i.set("maxnbSamples",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:12,8:0}),i.set("channels",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:16,8:0}),i.set("sampleRate",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:20,8:0}),i.set("format",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:24,8:0}),i.set("timestamp",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:32,8:0}),i.set("duration",{0:19,1:0,2:0,3:0,4:0,5:0,6:0,7:40,8:0}),(0,h.A)(s,c.Og,!0),(0,h.A)(s,c.dc,8),(0,h.A)(s,c.g7,48),(0,h.A)(s,c.JY,i),function(e){var t=new(a());t.set("refCount",{0:16,1:0,2:0,3:0,4:0,5:0,6:0,7:48,8:0}),(0,h.A)(e,c.Og,!0),(0,h.A)(e,c.dc,8),(0,h.A)(e,c.g7,56),(0,h.A)(e,c.JY,t)}(class extends d{constructor(...e){super(...e),(0,n.A)(this,"refCount",void 0)}}.prototype)},9599:(e,t,r)=>{"use strict";r.d(t,{P:()=>d});var s,i,n=r(134),o=r(80662),a=r.n(o),c=r(61499),h=r(12085);class d{constructor(e){(0,n.A)(this,"num",1),(0,n.A)(this,"den",1),e&&(this.den=e.den,this.num=e.num)}}s=d.prototype,(i=new(a())).set("num",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),i.set("den",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:4,8:0}),(0,h.A)(s,c.Og,!0),(0,h.A)(s,c.dc,4),(0,h.A)(s,c.g7,8),(0,h.A)(s,c.JY,i)},11573:(e,t,r)=>{"use strict";function s(e,t){let r=0;for(let s=0;s<t;s++)r=2*r+e.readU1();return r}function i(e){let t=0;for(;!s(e,1);)t++;return t>=32?0:s(e,t)+(1<<t)-1}function n(e){let t=0;for(let r=0;r<8;r++){let i=s(e,8);if(t|=(127&i)<<7*r,!(128&i))break}return t}r.d(t,{d:()=>i,f:()=>s,v:()=>n})},37815:(e,t,r)=>{"use strict";r.d(t,{A6:()=>A,D$:()=>l,Q7:()=>m,VG:()=>f,aw:()=>u,us:()=>g});var s=r(14686),i=r(63939),n=r(50932),o=r(37837),a=r(40046),c=(r(50288),r(73783)),h=r(52699);const d=1;function u(e,t,r=0,s=0,i=0){const c=(0,o.Gy)(28);if(!c)return 0;const h=function(e,t,r,s=0,i=0,c=0){n.M[20](e,t),n.M[25](e+4,r),n.M[20](e+12,s),n.M[20](e+16,i),a.M_(e+8,1,9,2),n.M[15](e+20,c);const h=(0,o.Gy)(12);return h?(n.M[20](h,e),n.M[20](h+4,t),n.M[25](h+8,r),h):0}(c,e,t,r,s,i);return h||((0,o.Eb)(c),0)}function l(e){return u((0,o.sY)(e),e)}function f(e){const t=(0,o.Gy)(12);return(0,s.Mr)(t,e,12),a.WQ(i.f[20](e)+8,1,9,2),t}function p(e,t){const r=i.f[20](i.f[20](e));if(t?((0,s.Mr)(i.f[20](e),i.f[20](t),12),(0,o.aI)(t)):(0,o.aI)(e),1===a.jb(r+8,1,9,2)){const e=!(2&i.f[15](r+24));i.f[20](r+16)?v(i.f[20](r+16),i.f[20](r)):(0,o.Eb)(i.f[20](r)),e&&(0,o.Eb)(r)}}function m(e){e&&i.f[20](e)&&p(e,0)}function g(e,t){const r=i.f[20](e);if(!t)return m(e),0;if(r&&i.f[20](r+4)===i.f[20](t+4))return n.M[20](r+4,i.f[20](t+4)),n.M[25](r+8,i.f[25](t+8)),0;const s=f(t);return m(e),n.M[20](e,s),0}function A(e,t){if(!i.f[20](e)){const r=u((0,o.cz)(0,t),t);return n.M[20](e,r),n.M[15](i.f[20](r)+24,i.f[15](i.f[20](r)+24)|d),0}const r=i.f[20](e),c=i.f[20](r);if(i.f[25](r+8)===t)return 0;if(!(i.f[15](c+24)&d&&function(e){return 1&i.f[15](i.f[20](e)+20)?0:1===a.Hh(i.f[20](e)+8,9,2)?1:0}(r)&&i.f[20](r+4)===i.f[20](c))){let r=h.z(4);n.M[20](r,0);const o=A(r,t);return o<0?(h.t(4),o):((0,s.Mr)(i.f[20](i.f[20](r)+4),i.f[20](c),Math.min(t,i.f[25](c+4))),p(e,r),h.t(4),0)}const l=(0,o.cz)(i.f[20](c),t);return n.M[20](r+4,l),n.M[20](c,l),n.M[25](r+8,t),n.M[25](c+4,t),0}function v(e,t){const r=e,s=i.f[20](r+12);c.s2(s),n.M[20](r+16,i.f[20](s+4)),n.M[20](s+4,r),c.Tl(s),1===a.jb(s+8,1,9,2)&&function(e){!function(e){for(;i.f[20](e+4);){const t=i.f[20](e+4);n.M[20](e+4,i.f[20](t+16)),i.f[20](t+4)?v(i.f[20](t+4),i.f[20](t)):(0,o.Eb)(i.f[20](t)),(0,o.Eb)(t)}}(e),c.zr(e),(0,o.Eb)(e)}(s)}},73749:(e,t,r)=>{"use strict";r.d(t,{AO:()=>u,IH:()=>d,Zx:()=>m,a5:()=>f});var s=r(63939),i=r(50932),n=(r(56490),r(11473)),o=r(14686),a=r(37837),c=r(67672),h=r(62100);function d(e){u(s.f[20](e)),(0,a.aI)(e)}function u(e){if(e){for(;i.M[15](e,s.f[15](e)-1),s.f[15](e)+1;)(0,a.aI)(s.f[20](e+4)+8*s.f[15](e)),(0,a.aI)(s.f[20](e+4)+8*s.f[15](e)+4);(0,a.aI)(e+4)}}function l(e,t){let r=0;return e?(t&&(r=1+(t-s.f[20](e+4)>>3)),r>=s.f[15](e)?0:s.f[20](e+4)+8*r):0}function f(e,t,r,a=0){if(!e)throw new Error("m is nullptr");let d=0;if(64&a&&(d=function(e,t,r=0,i=0){if(!e)return 0;let n=r;if(!t)return 0;for(;n=l(e,n);){let e=(0,o.lH)(s.f[20](n));if(1&i&&(e.toLocaleLowerCase(),t.toLocaleLowerCase()),e===t||2&i&&0===e.indexOf(t))return n}}(e,t,0,a)),d){if(16&a)return 0;32&a&&(r=`${(0,o.lH)(s.f[20](d+4))},${r}`),n.s_.free(s.f[20](d+4)),i.M[20](d+4,n.s_.malloc(r.length+1)),(0,o.qW)(s.f[20](d+4),r,r.length)}else{c.Yj(r)||(r=(0,h.A)(r));let a=n.s_.realloc(s.f[20](e+4),8*(s.f[15](e)+1));i.M[20](e+4,a),i.M[20](s.f[20](e+4)+8*s.f[15](e),n.s_.malloc(t.length+1)),i.M[20](s.f[20](e+4)+8*s.f[15](e)+4,n.s_.malloc(r.length+1)),(0,o.qW)(s.f[20](s.f[20](e+4)+8*s.f[15](e)),t,t.length),(0,o.qW)(s.f[20](s.f[20](e+4)+8*s.f[15](e)+4),r,r.length),i.M[15](e,s.f[15](e)+1)}return 0}function p(e,t,r,n=0){let o=s.f[20](e);return o||(o=(0,a.Gy)(8),i.M[20](e,o)),f(o,t,r,n)}function m(e,t,r){if(!t)return-1;let i=0;for(;i=l(t,i);){let t=p(e,(0,o.lH)(s.f[20](i)),(0,o.lH)(s.f[20](i+4)),r);if(t<0)return t}return 0}},56024:(e,t,r)=>{"use strict";r.d(t,{Cj:()=>M,FP:()=>v,UD:()=>_,_h:()=>b,gg:()=>x,rh:()=>k,to:()=>I,xj:()=>w});var s,i=r(14686),n=r(63939),o=r(50932),a=(r(36981),r(9599),r(55833)),c=r(37837),h=r(77231),d=r(37815),u=r(73749),l=r(9705),f=(r(99991),r(66788)),p=r(97317),m=r(52699),g=r(38156),A=r(95073);function v(){const e=(0,c.Gy)(320);return b(e),e}function w(e){I(e),(0,c.Eb)(e)}function y(e){const t=n.f[20](e);(0,d.Q7)(t+16),(0,u.IH)(t+12),(0,c.aI)(e)}function b(e){n.f[20](e+64)!==e&&(0,c.aI)(e+64),(0,i.sO)(e,0,320),o.M[17](e+104,h.Dh),o.M[17](e+112,h.Dh),o.M[17](e+232,h.Dh),o.M[17](e+240,h.Dh),o.M[15](e+256,-1),o.M[15](e+84,1),o.M[15](e+92,0),o.M[15](e+96,1),o.M[15](e+80,-1),o.M[20](e+64,e),o.M[15](e+212,2),o.M[15](e+216,2),o.M[15](e+220,2),o.M[15](e+208,0),o.M[15](e+224,0),o.M[15](e+204,0)}function _(e,t=0){if(!p.g[n.f[15](e+80)])return l.UY;const r=m.z(16),s=m.z(16),i=Math.max(32,t);let a=0;if(!n.f[15](e+32)){t<=0&&(t=32);for(let r=1;r<t;r+=r){if(a=(0,g.O5)(e+32,n.f[15](e+80),(0,A.A)(n.f[15](e+68),r)),a<0)return f(),a;if(!(n.f[15](e+32)&t-1))break}for(let r=0;r<4&&n.f[15](e+32+4*r);r++)o.M[15](e+32+4*r,(0,A.A)(n.f[15](e+32+4*r),t))}for(let t=0;t<4;t++)o.M[15](r+4*t,n.f[15](e+32+4*t));const c=(0,A.A)(n.f[15](e+72),32);if((a=(0,g.S5)(s,n.f[15](e+80),c,r))<0)return f(),a;let u=4*i;for(let e=0;e<4;e++)n.f[25](s+4*e)>h.go-u&&l.UY,u+=n.f[25](s+4*e);if(o.M[20](e+156,(0,d.D$)(u)),!n.f[20](e+156))return I(e),f(),l.gR;if((a=(0,g.Xo)(e,n.f[15](e+80),c,n.f[20](n.f[20](e+156)+4),r))<0)return I(e),f(),a;for(let t=1;t<4;t++)n.f[20](e+4*t)&&o.M[20](e+4*t,n.f[20](e+4*t)+t*i);return o.M[20](e+64,e),f(),0;function f(){m.t(16),m.t(16)}}function k(e,t){const r=(0,f.K0)(n.f[15](e+80)),s=n.f[15](e+292),i=r?s:1;let h=0;if(!n.f[15](e+32)){if(h=(0,f.f8)(n.f[15](e+80),s,n.f[15](e+76),t),h<0)return h;o.M[15](e+32,h)}if(i>a.pu){if(o.M[20](e+64,(0,c.sY)(4*i)),o.M[20](e+188,(0,c.sY)(4*i)),!n.f[20](e+188)||!n.f[20](e+64))return(0,c.aI)(e+64),(0,c.aI)(e+188),l.gR;o.M[15](e+192,i-a.pu)}else o.M[20](e+64,e);for(let t=0;t<Math.min(i,a.pu);t++){if(o.M[20](e+156+4*t,(0,d.D$)(n.f[15](e+32))),!n.f[20](e+156+4*t))return I(e),l.gR;o.M[20](n.f[20](e+64)+4*t,n.f[20](n.f[20](e+156+4*t)+4)),o.M[20](e+4*t,n.f[20](n.f[20](e+156+4*t)+4))}for(let t=0;t<i-a.pu;t++){if(o.M[20](n.f[20](e+188)+4*t,(0,d.D$)(n.f[15](e+32))),!n.f[20](n.f[20](e+188)+4*t))return I(e),l.gR;o.M[20](n.f[20](e+64)+4*(t+a.pu),n.f[20](n.f[20](n.f[20](e+188)+4*t)+4))}}function x(e,t){o.M[15](e+80,n.f[15](t+80)),o.M[15](e+68,n.f[15](t+68)),o.M[15](e+72,n.f[15](t+72)),(0,i.Mr)(e+288,t+288,24),o.M[15](e+76,n.f[15](t+76));let r=M(e,t);if(r<0)return r;if(!n.f[20](t+156)){for(let r=0;r<8;r++){if(!n.f[20](t+4*r)||!n.f[15](t+32+4*r))continue;let s=n.f[15](t+32+4*r);if(o.M[20](e+4*r,(0,c.sY)(s)),!n.f[20](e+4*r))return I(e),l.gR;(0,i.Mr)(n.f[20](e+4*r),n.f[20](t+4*r),s)}return 0}for(let r=0;r<8;r++)if(n.f[20](t+156+4*r)&&(o.M[20](e+156+4*r,(0,d.VG)(n.f[20](t+156+4*r))),!n.f[20](e+156+4*r)))return I(e),l.gR;if(n.f[20](t+188)){if(o.M[20](e+188,(0,c.Gy)(4*n.f[15](t+192))),!n.f[20](e+188))return I(e),l.gR;o.M[15](e+192,n.f[15](t+192));for(let r=0;r<n.f[15](t+192);r++)if(o.M[20](n.f[20](e+188)+4*r,(0,d.VG)(n.f[20](n.f[20](t+188)+4*r))),!n.f[20](n.f[20](e+188)+4*r))return I(e),l.gR}if(n.f[20](t+64)!==t){let r=n.f[15](t+292);if(!r)return I(e),l.UY;if(o.M[20](e+64,(0,c.Gy)(4*r)),!n.f[20](e+64))return I(e),l.gR;(0,i.Mr)(n.f[20](e+64),n.f[20](t+64),4*r)}else o.M[20](e+64,e);return(0,i.Mr)(e,t,32),(0,i.Mr)(e+32,t+32,32),0}function I(e){if(e){!function(e){!function(e,t){const r=n.f[15](t),s=n.f[20](e);for(let e=0;e<r;e++)y(s+4*e);o.M[15](t,0),(0,c.aI)(e)}(e+196,e+200)}(e);for(let t=0;t<8;t++)(0,d.Q7)(e+156+4*t);for(let t=0;t<n.f[15](e+192);t++)(0,d.Q7)(n.f[20](e+188)+4*t);(0,c.aI)(e+188),(0,u.IH)(e+248),(0,d.Q7)(e+260),(0,d.Q7)(e+264),(0,d.Q7)(e+284),b(e)}}function M(e,t){o.M[15](e+84,n.f[15](t+84)),o.M[15](e+88,n.f[15](t+88)),(0,i.Mr)(e+92,t+92,8),o.M[25](e+268,n.f[25](t+268)),o.M[25](e+272,n.f[25](t+272)),o.M[25](e+276,n.f[25](t+276)),o.M[25](e+280,n.f[25](t+280)),o.M[17](e+104,n.f[17](t+104)),o.M[17](e+312,n.f[17](t+312)),o.M[15](e+136,n.f[15](t+136)),o.M[15](e+140,n.f[15](t+140)),o.M[15](e+144,n.f[15](t+144)),o.M[15](e+148,n.f[15](t+148)),o.M[15](e+152,n.f[15](t+152)),o.M[20](e+132,n.f[20](t+132)),o.M[17](e+112,n.f[17](t+112)),o.M[17](e+240,n.f[17](t+240)),o.M[15](e+256,n.f[15](t+256)),(0,i.Mr)(e+120,t+120,8),o.M[15](e+128,n.f[15](t+128)),o.M[17](e+232,n.f[17](t+232)),o.M[15](e+204,n.f[15](t+204)),o.M[15](e+252,n.f[15](t+252)),o.M[15](e+212,n.f[15](t+212)),o.M[15](e+216,n.f[15](t+216)),o.M[15](e+220,n.f[15](t+220)),o.M[15](e+208,n.f[15](t+208)),o.M[15](e+224,n.f[15](t+224)),(0,u.Zx)(e+248,n.f[20](t+248),0);for(let i=0;i<n.f[15](t+200);i++){const l=n.f[20](n.f[20](t+196)+4*i),f=(0,d.VG)(n.f[20](l+16)),p=(r=e+196,s=e+200,a=n.f[15](l),(h=f)?function(e,t,r,s,i,a){const h=(0,c.cz)(n.f[20](e),4*(n.f[15](t)+1));o.M[20](e,h);const d=(0,c.Gy)(20);return o.M[20](d+16,s),o.M[20](d+4,i),o.M[25](d+8,a),o.M[15](d,r),o.M[20](h+4*n.f[15](t),d),o.M[15](t,n.f[15](t)+1),d}(r,s,a,h,n.f[20](h+4),n.f[25](h+8)):0);(0,u.Zx)(p+12,n.f[20](l+12),0)}var r,s,a,h;let l=(0,d.us)(e+264,n.f[20](t+264));return l|=(0,d.us)(e+284,n.f[20](t+284)),l}!function(e){e[e.UNIQUE=1]="UNIQUE"}(s||(s={}))},71517:(e,t,r)=>{"use strict";r.d(t,{$W:()=>f,E4:()=>p,Is:()=>g,NX:()=>M,NZ:()=>w,Ow:()=>m,Pd:()=>y,Qe:()=>v,Up:()=>x,Zx:()=>I,_5:()=>A,fQ:()=>l,iI:()=>d,rN:()=>k,rU:()=>u,zu:()=>b});var s=r(14686),i=r(63939),n=r(50932),o=(r(47958),r(37837)),a=r(77231),c=r(37815);const h=64;function d(e,t){return t?(0,s.JW)(i.f[20](e+24),i.f[15](e+28)):(0,s.s3)(i.f[20](e+24),i.f[15](e+28))}function u(e,t){for(let r=0;r<i.f[15](e+44);r++)if(i.f[15](i.f[20](e+40)+12*r+8)===t)return i.f[20](e+40)+12*r;return 0}function l(e,t){for(let r=0;r<i.f[15](e+44);r++)if(i.f[15](i.f[20](e+40)+12*r+8)===t)return!0;return!1}function f(e,t,r,a,c){const h=i.f[15](t),d=i.f[20](e);for(let e=0;e<h;e++)if(i.f[15](d+12*e+8)===r)return(0,o.Eb)(i.f[20](d+12*e)),n.M[20](d+12*e,a),void n.M[25](d+12*e+4,c);const u=12*(h+1),l=(0,o.Gy)(u);if(h)for(let e=0;e<h;e++)(0,s.Mr)(l+12*e,d+12*e,12);const f=l+12*h;return n.M[20](f,a),n.M[15](f+8,r),n.M[25](f+4,c),d&&(0,o.Eb)(d),n.M[20](e,l),n.M[15](t,h+1),f}function p(e,t,r,i){const n=(0,o.sY)(i+h);return(0,s.sO)(n+i,0,h),f(e,t,r,n,i)}function m(e,t,r,s){f(e+40,e+44,t,r,s)}function g(e,t){let r=-1;for(let s=0;s<i.f[15](e+44);s++)if(i.f[15](i.f[20](e+40)+12*s+8)===t){r=s;break}if(r>-1)if(1===i.f[15](e+44))(0,o.Eb)(i.f[20](i.f[20](e+40))),(0,o.Eb)(i.f[20](e+40)),n.M[20](e+40,0),n.M[15](e+44,0);else{const t=12*(i.f[15](e+44)-1),a=(0,o.Gy)(t);for(let t=0;t<i.f[15](e+44);t++)t!==r?(0,s.Mr)(a+12*t,i.f[20](e+40)+12*t,12):(0,o.Eb)(i.f[20](i.f[20](e+40)+12*t));(0,o.Eb)(i.f[20](e+40)),n.M[20](e+40,a),n.M[15](e+44,i.f[15](e+44)-1)}}function A(){const e=(0,o.Gy)(88);return y(e),e}function v(e){x(e),(0,o.Eb)(e)}function w(e,t){const r=i.f[20](e),s=i.f[15](t);if(r){for(let e=0;e<s;e++)(0,o.Eb)(i.f[20](r+12*e));(0,o.aI)(e),n.M[15](t,0)}}function y(e){n.M[20](e+24,0),n.M[15](e+28,0),n.M[20](e+40,0),n.M[15](e+44,0),n.M[15](e+32,a.N_),n.M[17](e+56,a.Dh),n.M[17](e+48,a.Dh),n.M[15](e+36,0),n.M[17](e+16,a.Dh),n.M[17](e+8,a.Dh),n.M[15](e+76,a.SF),n.M[15](e+72,1),n.M[15](e+80,0),n.M[20](e,0)}function b(e,t){return n.M[15](e+32,i.f[15](t+32)),n.M[17](e+56,i.f[17](t+56)),n.M[17](e+48,i.f[17](t+48)),n.M[15](e+36,i.f[15](t+36)),n.M[17](e+16,i.f[17](t+16)),n.M[17](e+8,i.f[17](t+8)),n.M[20](e+64,i.f[20](t+64)),n.M[15](e+76,i.f[15](t+76)),n.M[15](e+72,i.f[15](t+72)),n.M[15](e+80,i.f[15](t+80)),n.M[20](e+68,0),(0,c.us)(e+68,i.f[20](t+68)),function(e,t){if(w(e+40,e+44),i.f[15](t+44)){let r=12;n.M[20](e+40,(0,o.Gy)(r*i.f[15](t+44)));for(let r=0;r<i.f[15](t+44);r++)n.M[25](i.f[20](e+40)+12*r+4,i.f[25](i.f[20](t+40)+12*r+4)),n.M[15](i.f[20](e+40)+12*r+8,i.f[15](i.f[20](t+40)+12*r+8)),n.M[20](i.f[20](e+40)+12*r,(0,o.sY)(i.f[25](i.f[20](t+40)+12*r+4))),(0,s.Mr)(i.f[20](i.f[20](e+40)+12*r),i.f[20](i.f[20](t+40)+12*r),i.f[25](i.f[20](t+40)+12*r+4));n.M[15](e+44,i.f[15](t+44))}}(e,t),0}function _(e,t){return(0,c.A6)(e,t+h),(0,s.sO)(i.f[20](i.f[20](e)+4)+t,0,h),0}function k(e,t){return i.f[20](e)&&(0,c.Q7)(e),n.M[20](e,0),b(e,t),!i.f[20](t)&&i.f[15](t+28)?(_(e,i.f[15](t+28)),i.f[15](t+28)&&(0,s.Mr)(i.f[20](i.f[20](e)+4),i.f[20](t+24),i.f[15](t+28)),n.M[20](e+24,i.f[20](i.f[20](e)+4))):i.f[20](t)&&(n.M[20](e,(0,c.VG)(i.f[20](t))),n.M[20](e+24,i.f[20](t+24))),n.M[15](e+28,i.f[15](t+28)),0}function x(e){w(e+40,e+44),(0,c.Q7)(e+68),i.f[20](e)?(0,c.Q7)(e):i.f[20](e+24)&&(0,o.Eb)(i.f[20](e+24)),y(e)}function I(e,t){i.f[20](e)&&(0,c.Q7)(e),n.M[20](e,0),!i.f[20](t)&&i.f[15](t+28)?(_(e,i.f[15](t+28)),i.f[15](t+28)&&(0,s.Mr)(i.f[20](i.f[20](e)+4),i.f[20](t+24),i.f[15](t+28)),n.M[20](e+24,i.f[20](i.f[20](e)+4))):i.f[20](t)&&(n.M[20](e,(0,c.VG)(i.f[20](t))),n.M[20](e+24,i.f[20](t+24))),n.M[15](e+28,i.f[15](t+28))}function M(e,t,r){i.f[20](e)?(0,c.Q7)(e):i.f[20](e+24)&&(0,o.Eb)(i.f[20](e+24)),n.M[20](e,(0,c.aw)(t,r+h)),n.M[20](e+24,t),n.M[15](e+28,r)}},99991:(e,t,r)=>{"use strict";r.d(t,{ML:()=>d,bl:()=>h});var s=r(63939),i=r(50932),n=r(85103),o=r(37837),a=r(14686),c=r(9705);function h(e){2==s.f[15](e)&&(0,o.aI)(e+8),(0,a.sO)(e,0,24)}function d(e,t){return t?(i.M[15](e,1),i.M[15](e+4,(0,n.Xb)(BigInt(t>>>0))),i.M[10](e+8,BigInt(t>>>0)),0):c.UY}},71766:(e,t,r)=>{"use strict";r.d(t,{Yi:()=>d,dn:()=>u});var s=r(14686),i=r(63939),n=r(50932),o=(r(36981),r(9599),r(37837)),a=r(99991),c=r(71517),h=r(77231);function d(e,t){n.M[15](e,i.f[15](t)),n.M[15](e+4,i.f[15](t+4)),n.M[8](e+8,i.f[8](t+8)),n.M[15](e+28,i.f[15](t+28)),n.M[17](e+32,i.f[17](t+32)),n.M[15](e+40,i.f[15](t+40)),n.M[15](e+44,i.f[15](t+44)),n.M[15](e+48,i.f[15](t+48)),n.M[15](e+52,i.f[15](t+52)),n.M[15](e+56,i.f[15](t+56)),n.M[15](e+60,i.f[15](t+60)),n.M[15](e+68,i.f[15](t+68)),n.M[15](e+64,i.f[15](t+64)),n.M[15](e+80,i.f[15](t+80)),n.M[15](e+84,i.f[15](t+84)),n.M[15](e+88,i.f[15](t+88)),n.M[15](e+92,i.f[15](t+92)),n.M[15](e+96,i.f[15](t+96)),n.M[15](e+100,i.f[15](t+100)),n.M[15](e+104,i.f[15](t+104)),(0,s.Mr)(e+112,t+112,24),n.M[15](e+136,i.f[15](t+136)),n.M[15](e+140,i.f[15](t+140)),n.M[15](e+144,i.f[15](t+144)),n.M[15](e+148,i.f[15](t+148)),n.M[15](e+152,i.f[15](t+152)),n.M[15](e+156,i.f[15](t+156)),(0,s.Mr)(e+72,t+72,8),i.f[20](t+12)&&(i.f[20](e+12)&&(0,o.Eb)(i.f[20](e+12)),n.M[20](e+12,(0,o.sY)(i.f[15](t+16))),n.M[15](e+16,i.f[15](t+16)),(0,s.Mr)(i.f[20](e+12),i.f[20](t+12),i.f[15](t+16))),i.f[20](t+20)&&function(e,t,r,a){if(!r)return;const c=(0,o.Gy)(12*a);for(let e=0;e<a;e++)n.M[15](c+12*e+8,i.f[15](r+12*e+8)),n.M[25](c+12*e+4,i.f[25](r+12*e+4)),n.M[20](c+12*e,(0,o.sY)(i.f[25](r+12*e+4))),(0,s.Mr)(c+12*e,r+12*e,i.f[25](r+12*e+4));n.M[15](t,a),n.M[20](e,c)}(e+20,e+24,i.f[20](t+20),i.f[15](t+24))}function u(e){e&&(function(e){i.f[20](e+12)&&(0,o.aI)(e+12),(0,a.bl)(e+112),(0,c.NZ)(e+20,e+24),(0,s.sO)(e,0,168),n.M[15](e,-1),n.M[15](e+4,0),n.M[15](e+28,-1),n.M[15](e+112,0),n.M[15](e+80,0),n.M[15](e+84,0),n.M[15](e+88,2),n.M[15](e+92,2),n.M[15](e+96,2),n.M[15](e+100,0),n.M[15](e+64,0),n.M[15](e+68,1),n.M[15](e+72,0),n.M[15](e+72,1),n.M[15](e+48,h.N_),n.M[15](e+52,h.N_)}(e),(0,o.Eb)(e))}r(47958)},85103:(e,t,r)=>{"use strict";function s(e){return e=(e=(858993459&(e-=e>>1&1431655765))+(e>>2&858993459))+(e>>4)&252645135,(e+=e>>8)+(e>>16)&63}function i(e){return s(Number(BigInt.asUintN(32,e)))+s(Number(BigInt.asUintN(32,e>>BigInt(32))))}r.d(t,{Xb:()=>i})},23991:(e,t,r)=>{"use strict";function s(e){let t=0,r=0;for(;r<32&&0===e.readU1();)r++;return t=e.readU(r),t+=(1<<r)-1,t}function i(e){let t=s(e);return t=1&t?(t+1)/2:-t/2,t}r.d(t,{$x:()=>i,xb:()=>s})},39381:(e,t,r)=>{"use strict";r.d(t,{E3:()=>n,Sg:()=>h,Y0:()=>c,ht:()=>a,r8:()=>i,v4:()=>d,yd:()=>o});var s=r(63939);function i(e){return s.f[2](e)}function n(e){return i(e+1)<<8|i(e)}function o(e){return i(e)<<8|i(e+1)}function a(e){return i(e)<<16|i(e+1)<<8|i(e+2)}function c(e){return n(e+2)<<16|n(e)}function h(e){return o(e)<<16|o(e+2)}function d(e){return BigInt(h(e))<<BigInt(32)|BigInt(h(e+4))}},82774:(e,t,r)=>{"use strict";r.d(t,{Cv:()=>a,w8:()=>i});var s=r(50932);function i(e,t){s.M[2](e,255&t)}function n(e,t){i(e,t>>>8),i(e+1,t)}function o(e,t){n(e,t>>>16),n(e+2,65535&t)}function a(e,t){o(e,Number(BigInt.asUintN(32,t>>BigInt(32)))),o(e+4,Number(BigInt.asUintN(32,t)))}},37837:(e,t,r)=>{"use strict";r.d(t,{Eb:()=>u,Gy:()=>d,aI:()=>l,cz:()=>f,sY:()=>h});var s=r(11473),i=r(63939),n=r(50932),o=r(14686),a=r(4624);const c="src/avutil/util/mem.ts";function h(e){const t=s.s_.malloc(e);return t||a.h2("can not alloc buffer",c,32),t}function d(e){const t=s.s_.malloc(e);return t||a.h2("can not alloc buffer",c,40),(0,o.sO)(t,0,e),t}function u(e){s.s_.free(e)}function l(e){s.s_.free(i.f[20](e)),n.M[20](e,0)}function f(e,t){return s.s_.realloc(e,t)}},60264:(e,t,r)=>{"use strict";r.d(t,{BN:()=>f,Bs:()=>o,Ky:()=>a,Le:()=>d,S9:()=>l,nW:()=>u,py:()=>c,wN:()=>h});var s=r(31865),i=r(729),n=r(72739);function o(e){return e.length>4&&0===e[0]&&0===e[1]&&(1===e[2]||0===e[2]&&1===e[3])}function a(e,t){let r=0;for(let s=t;s<e.length;s++)switch(e[s]){case 0:r++;break;case 1:if(r>=2)return{offset:s-Math.min(r,3),startCode:Math.min(r+1,4)};r=0;break;default:r=0}return{offset:-1,startCode:0}}function c(e){const t=[];let r=a(e,0),s={offset:-1,startCode:0};for(;s=a(e,r.offset+r.startCode),s.offset>-1;)t.push(e.subarray(r.offset+r.startCode,s.offset,!0)),r=s;return t.push(e.subarray(r.offset+r.startCode,void 0,!0)),t}function h(e,t){const r=[],i=new s.A(e);for(;i.remainingSize()>0;){let s=0;s=3===t?i.readUint32():2===t?i.readUint24():1===t?i.readUint16():i.readUint8();const n=e.subarray(Number(BigInt.asIntN(32,i.getPos())),Number(BigInt.asIntN(32,i.getPos()))+s,!0);i.skip(s),r.push(n)}return r}function d(e,t){return e.reduce(((e,r,s)=>0===t?e+4+r.length:1===t?e+3+r.length:e+(s?3:4)+r.length),0)}function u(e,t,r){if(!r){let s=e.reduce(((e,r,s)=>0===t?e+4+r.length:1===t?e+3+r.length:e+(s?3:4)+r.length),0);r=new Uint8Array(s)}const s=new i.A(r);return n.__(e,((e,r)=>{s.writeUint8(0),s.writeUint8(0),(0===t||2===t&&!r)&&s.writeUint8(0),s.writeUint8(1),s.writeBuffer(e)})),r}function l(e,t,r){if(!r){const s=e.reduce(((e,r)=>e+t+1+r.length),0);r=new Uint8Array(s)}const s=new i.A(r);return n.__(e,(e=>{3===t?s.writeUint32(e.length):2===t?s.writeUint24(e.length):1===t?s.writeUint16(e.length):s.writeUint8(e.length),s.writeBuffer(e)})),r}function f(e,t=0,r){r||(r=e.length);const s=new Uint8Array(e.length);let i=0,n=0;for(let o=0;o<e.length;o++){if(o>=t&&o<r)if(0===e[o])i++;else if(3===e[o]&&2===i&&o+1<e.length&&e[o+1]<=3){if(o++,o===e.length)break;i=0===e[o]?1:0}else i=0;s[n++]=e[o]}return s.slice(0,n)}},38156:(e,t,r)=>{"use strict";r.d(t,{O5:()=>l,S5:()=>f,Xo:()=>p,uC:()=>d});var s=r(63939),i=r(50932),n=r(97317),o=r(9705),a=r(77231),c=r(14686),h=r(52699);function d(e){if(!(e<=0||e>=7))return{x:128*(1&e),y:128*(e>>>1^(e<4?1:0))}}function u(e,t,r,s,i){if(!i)return o.UY;if(e<0)return o.UY;const n=1===s||2===s?i.log2ChromaW:0,c=e+(1<<n)-1>>>n;if(c&&r>a.go/c)return o.UY;let h=r*c;return 4&i.flags&&(h=h+7>>>3),h}function l(e,t,r){const s=n.g[t];if(!s)return o.UY;const{maxPixSteps:a,maxPixStepsComps:h}=function(e){const t=[0,0,0,0],r=[0,0,0,0];for(let s=0;s<4;s++)e.comp[s]&&e.comp[s].step>t[e.comp[s].plane]&&(t[e.comp[s].plane]=e.comp[s].step,r[e.comp[s].plane]=s);return{maxPixSteps:t,maxPixStepsComps:r}}(s);(0,c.sO)(e,0,16);let d=0;for(let t=0;t<4;t++){if((d=u(r,0,a[t],h[t],s))<0)return d;i.M[15](e+4*t,d)}}function f(e,t,r,h){const d=[0,0,0,0],u=n.g[t];if(!u)return o.UY;if((0,c.sO)(e,0,16),s.f[15](h)>a.go/r)return o.UY;if(i.M[25](e,s.f[15](h)*r),2&u.flags)return i.M[25](e+4,1024),0;for(let e=0;e<4;e++)u.comp[e]&&(d[u.comp[e].plane]=1);for(let t=0;t<4&&d[t];t++){let n=1===t||2===t?u.log2ChromaH:0,c=r+(1<<n)-1>>n;if(s.f[15](h+4*t)>a.go/c)return o.UY;i.M[25](e+4*t,c*s.f[15](h+4*t))}return 0}function p(e,t,r,n,d){const u=h.z(16),l=h.z(16);(0,c.sO)(e,0,16);for(let e=0;e<4;e++)i.M[15](u+4*e,s.f[15](d+4*e));let p=f(l,t,r,u);if(p<0)return m(),p;p=0;for(let e=0;e<4;e++){if(s.f[25](l+4*e)>a.go-p)return m(),o.UY;p+=s.f[25](l+4*e)}if(!n)return m(),p;i.M[20](e,n);for(let t=1;t<4&&s.f[25](l+4*t);t++)i.M[20](e+4*t,s.f[20](e+4*(t-1))+s.f[25](l+4*(t-1)));return m(),p;function m(){h.t(16),h.t(16)}}r(37837)},44328:(e,t,r)=>{"use strict";r.d(t,{Mr:()=>o,iU:()=>c,k:()=>n,lb:()=>a});var s=r(63939),i=r(31658);function n(e,t,r){return e*BigInt(t.num)*BigInt(r.den)/(BigInt(t.den)*BigInt(r.num))}function o(e,t,r){return e*BigInt(s.f[15](t))*BigInt(r.den)/(BigInt(s.f[15](t+4))*BigInt(r.num))}function a(e){return e.num/e.den}function c(e){const t=(0,i.A)(e.num,e.den);t<=1||(e.den/=t,e.num/=t)}},66788:(e,t,r)=>{"use strict";r.d(t,{Dw:()=>c,K0:()=>h,f8:()=>d,wj:()=>u});var s=r(63939),i=r(14686),n=r(77231),o=r(95073),a=(r(37837),r(58055));function c(e){return e<0||e>=12?0:a.J[e].bits>>3}function h(e){return!(e<0||e>=12)&&a.J[e].planar}function d(e,t,r,s){const i=c(e),a=h(e);return!i||r<=0||t<=0?-1:(s||(s=1,r=(0,o.A)(r,32)),t>n.go/s||t*r>(n.go-s*t)/i?-1:a?(0,o.A)(r*i,s):(0,o.A)(r*i*t,s))}function u(e,t,r,n,o){const a=h(r),d=a?o:1,u=c(r)*(a?1:o),l=n*u,f=0===r||5===r?128:0;t*=u;for(let r=0;r<d;r++)(0,i.sO)(s.f[20](e+4*r)+t,f,l)}},71762:(e,t,r)=>{"use strict";r.d(t,{T8:()=>d,r0:()=>h,wm:()=>c});var s=r(63939),i=r(50932),n=r(14686),o=r(71517),a=r(37837);function c(e){const t={pts:s.f[17](e+8),dts:s.f[17](e+16),data:(0,o.iI)(e).slice(),streamIndex:s.f[15](e+32),flags:s.f[15](e+36),sideData:[],duration:s.f[17](e+48),pos:s.f[17](e+56),timeBase:{den:s.f[15](e+76),num:s.f[15](e+72)},bitFormat:s.f[15](e+80)};for(let r=0;r<s.f[15](e+44);r++){const i={type:s.f[15](s.f[20](e+40)+12*r+8),data:(0,n.s3)(s.f[20](s.f[20](e+40)+12*r),s.f[25](s.f[20](e+40)+12*r+4)).slice()};t.sideData.push(i)}return t}function h(e,t=0){t||(t=(0,o._5)()),i.M[17](t+8,e.pts),i.M[17](t+16,e.dts);const r=(0,a.sY)(e.data.length);if((0,n.lW)(r,e.data.length,e.data),(0,o.NX)(t,r,e.data.length),i.M[15](t+32,e.streamIndex),i.M[15](t+36,e.flags),i.M[17](t+48,e.duration),i.M[17](t+56,e.pos),i.M[15](t+76,e.timeBase.den),i.M[15](t+72,e.timeBase.num),i.M[15](t+80,e.bitFormat),e.sideData.length)for(let r=0;r<e.sideData.length;r++){const s=(0,a.sY)(e.sideData[r].data.length);(0,n.lW)(s,e.sideData[r].data.length,e.sideData[r].data),(0,o.Ow)(t,e.sideData[r].type,s,e.sideData[r].data.length)}else(0,o.NZ)(t+40,t+44);return t}function d(e,t=0){if(t||(t=(0,a.sY)(168),(0,n.sO)(t,0,168)),i.M[15](t,e.codecType),i.M[15](t+4,e.codecId),i.M[8](t+8,e.codecTag),e.extradata&&(s.f[20](t+12)&&(0,a.Eb)(s.f[20](t+12)),i.M[20](t+12,(0,a.sY)(e.extradata.length)),(0,n.lW)(s.f[20](t+12),e.extradata.length,e.extradata),i.M[15](t+16,e.extradata.length)),e.codedSideData.length)for(let r=0;r<e.codedSideData.length;r++){const s=(0,a.sY)(e.codedSideData[r].data.length);(0,n.lW)(s,e.codedSideData[r].data.length,e.codedSideData[r].data),(0,o.$W)(t+20,t+24,e.codedSideData[r].type,s,e.codedSideData[r].data.length)}else(0,o.NZ)(t+20,t+24);return i.M[15](t+28,e.format),i.M[17](t+32,e.bitrate),i.M[15](t+40,e.bitsPerCodedSample),i.M[15](t+44,e.bitsPerRawSample),i.M[15](t+48,e.profile),i.M[15](t+52,e.level),i.M[15](t+56,e.width),i.M[15](t+60,e.height),i.M[15](t+68,e.sampleAspectRatio.den),i.M[15](t+64,e.sampleAspectRatio.num),i.M[15](t+76,e.framerate.den),i.M[15](t+72,e.framerate.num),i.M[15](t+80,e.fieldOrder),i.M[15](t+84,e.colorRange),i.M[15](t+88,e.colorPrimaries),i.M[15](t+92,e.colorTrc),i.M[15](t+96,e.colorSpace),i.M[15](t+100,e.chromaLocation),i.M[15](t+104,e.videoDelay),i.M[15](t+112,e.chLayout.order),i.M[15](t+116,e.chLayout.nbChannels),i.M[10](t+120,e.chLayout.u),i.M[15](t+136,e.sampleRate),i.M[15](t+140,e.blockAlign),i.M[15](t+144,e.frameSize),i.M[15](t+148,e.initialPadding),i.M[15](t+152,e.trailingPadding),i.M[15](t+156,e.seekPreroll),i.M[15](t+160,e.bitFormat),t}r(77162)},95007:(e,t,r)=>{"use strict";r.d(t,{A:()=>f});var s=r(134),i=r(95335),n=r(72739),o=r(73783),a=r(7417),c=r(4624);const h="src/cheap/allocator/AllocatorJS.ts",d=A(16),u=32,l=68;class f{constructor(e,t=!0){var r,n,o,a;(0,s.A)(this,"buffer",void 0),(0,s.A)(this,"byteOffset",void 0),(0,s.A)(this,"heapOffset",void 0),(0,s.A)(this,"heapLength",void 0),(0,s.A)(this,"int32Array",void 0),(0,s.A)(this,"updates",void 0),(0,s.A)(this,"options",void 0),(0,s.A)(this,"shared",void 0),(0,s.A)(this,"handles",void 0),this.options=i.X$({growSize:1048576,maxHeapSize:2097152e3},e),this.handles=[],this.buffer=e.buffer,this.shared=!1,this.options.memory||this.buffer instanceof ArrayBuffer||this.buffer instanceof SharedArrayBuffer?(this.byteOffset=null!==(r=e.byteOffset)&&void 0!==r?r:0,this.heapOffset=w(this.byteOffset+g(u),null!==(n=e.byteLength)&&void 0!==n?n:this.buffer.byteLength),this.heapLength=y((null!==(o=e.byteLength)&&void 0!==o?o:this.buffer.byteLength)-this.heapOffset),this.int32Array=new Int32Array(this.buffer,this.heapOffset,A(this.heapLength)),this.updates=new Int32Array(this.buffer,this.byteOffset,u),"function"==typeof SharedArrayBuffer&&this.buffer instanceof SharedArrayBuffer&&(this.shared=!0)):c.h2("Expected buffer to be an instance of Buffer or ArrayBuffer",h,109),t&&(this.updates.fill(1),function(e){return 65===e[0]&&65===e[66]}(a=this.int32Array)||function(e){const t=e.length-69;k(e,65,1),e[1]=1,e[3]=68;for(let t=1;t<u;t++)e[3+t]=1;k(e,t,68),e[68]=1,e[70]=1}(a),function(e){let t=l;for(;t<e.length-1;){const r=_(e,t);r<2||r>=e.length-l?c.h2(`Got invalid sized chunk at ${g(t)} (${g(r)} bytes).`,h,569):M(e,t)?p(e,t,r):m(e,t,r),t+=r+2}}(this.int32Array))}addUpdateHandle(e){n.zy(this.handles,e)||this.handles.push(e)}removeUpdateHandle(e){n.TF(this.handles,e)}malloc_(e){(e=v(e,7))<16&&(e=16);const t=A(e),r=this.findFreeBlock(this.int32Array,t);if(r<=1)return 0;const s=_(this.int32Array,r);return s-(t+2)>=d?function(e,t,r,s,i){const n=t+r+2,o=s-(n-t);I(e,t,s,i),e[t-1]=-r,e[t+r]=-r,e[n-1]=-o,e[n+o]=-o,E(e,n,o,i)}(this.int32Array,r,t,s,this.updates):I(this.int32Array,r,s,this.updates),g(r)+this.heapOffset}malloc(e){this.shared&&((0,o.s2)(a.II,!0),this.checkBuffer());const t=this.malloc_(e);return this.shared&&(0,o.Tl)(a.II),t}calloc_(e,t){let r=e*t;r=r<16?16:v(r,7);const s=this.malloc_(r);if(0===s)return 0;const i=A(s-this.heapOffset);return this.int32Array.subarray(i,i+A(r)).fill(0),s}calloc(e,t){this.shared&&((0,o.s2)(a.II,!0),this.checkBuffer());const r=this.calloc_(e,t);return this.shared&&(0,o.Tl)(a.II),r}realloc_(e,t){if(0===e)return this.malloc_(t);const r=e;if(0===t)return this.free_(r),0;let s=A(e-=this.heapOffset),i=s,n=0;P(this.int32Array,s)&&(i=this.int32Array[s-1],n=s-i);const o=_(this.int32Array,i)-n;if(o>=A(v(t,7)))return r;{const e=this.malloc_(t);return 0===e?(this.free_(r),0):(this.int32Array.set(this.int32Array.subarray(s,s+o),A(e-this.heapOffset)),this.free_(r),e)}}realloc(e,t){return this.shared&&((0,o.s2)(a.II,!0),this.checkBuffer()),e=this.realloc_(e,t),this.shared&&(0,o.Tl)(a.II),e}alignedAlloc_(e,t){if(e<=8)return this.malloc_(t);const r=this.malloc_(t+e-1+4);if(0===r)return 0;const s=r+e-1+4&~(e-1);return this.int32Array[A(s-this.heapOffset)-1]=A(r-this.heapOffset),s}alignedAlloc(e,t){this.shared&&((0,o.s2)(a.II,!0),this.checkBuffer());const r=this.alignedAlloc_(e,t);return this.shared&&(0,o.Tl)(a.II),r}free_(e){if(0===e)return;let t=A(e-=this.heapOffset);if(P(this.int32Array,t)&&(t=this.int32Array[t-1]),M(this.int32Array,t))return;const r=_(this.int32Array,t),s=C(this.int32Array,t),i=function(e,t){const r=_(e,t);if(t+r+2>=e.length-2)return 0;const s=t+r+2;return e[s-1]<2?0:s}(this.int32Array,t);0!==s?0!==i?function(e,t,r,s,i,n){const o=_(e,t),a=_(e,i),c=i-t+a;I(e,t,o,n),I(e,i,a,n),e[t-1]=-c,e[i+a]=-c,E(e,t,c,n)}(this.int32Array,s,0,0,i,this.updates):T(this.int32Array,s,t,r,this.updates):0!==i?function(e,t,r,s,i){const n=_(e,t);I(e,t,n,i);const o=s+n+2;e[r-1]=-o,e[t+n]=-o,E(e,r,o,i)}(this.int32Array,i,t,r,this.updates):E(this.int32Array,t,r,this.updates)}free(e){this.shared&&((0,o.s2)(a.II,!0),this.checkBuffer()),this.free_(e),this.shared&&(0,o.Tl)(a.II)}sizeof(e){if(0===e)return 0;let t=A(e-=this.heapOffset);return P(this.int32Array,t)&&(t=this.int32Array[t-1]),g(_(this.int32Array,t))}inspect(){return this.checkBuffer(),function(e,t){const r=[],s=b(e,1,t);let i=l,n=0;for(;i<e.length-1;){const s=_(e,i);(s<2||s>=e.length)&&c.h2(`Got invalid sized chunk at ${g(i)} (${g(s)})`,h,625),M(e,i)?r.push(b(e,i,t)):(n+=g(s),r.push({type:"used",block:i,offset:g(i)+t,size:g(s)})),i+=s+2}return{header:s,blocks:r,total:g(e.length),used:n}}(this.int32Array,this.heapOffset)}findFreeBlock(e,t){let r=function(e,t){let r=1;for(let s=e[1];s>0;s--){let i=e[r+2+(s-1)];for(;1!==i&&e[i-1]<t;)r=i,i=e[r+2+(s-1)]}return r=e[r+2],r}(e,t);if(1===r){if(this.options.growAllowed&&this.heapLength<this.options.maxHeapSize){const e=this.int32Array.length+1;let r,a,c=0,h=0,d=0;if(this.options.onResize){var s,i,o;const e=this.options.onResize(this.int32Array,this.int32Array.byteLength+v(Math.max(this.options.growSize,g(t)),7));c=null!==(s=e.byteOffset)&&void 0!==s?s:0,d=w(c+g(u),null!==(i=e.byteLength)&&void 0!==i?i:e.buffer.byteLength),h=y((null!==(o=e.byteLength)&&void 0!==o?o:e.buffer.byteLength)-d),r=new Int32Array(e.buffer,d,A(h)),a=new Int32Array(e.buffer,c,u)}else{const e=new ArrayBuffer(this.int32Array.length+A(this.options.growSize));d=w(c+g(u),e.byteLength),h=y(e.byteLength-d),r=new Int32Array(e,d,A(h)),r.set(this.int32Array,0),a=new Int32Array(e,c,u)}this.byteOffset=c,this.heapOffset=d,this.buffer=r.buffer,this.heapLength=h,this.int32Array=r,this.updates=a;const l=r.length-(e-1)-2;k(r,l,e);const f=C(r,e);return 0!==f?T(r,f,e,l,this.updates):E(r,e,l,this.updates),this.handles.length&&n.__(this.handles,(e=>{e(this.buffer)})),this.findFreeBlock(this.int32Array,t)}return r}return r}getBuffer(){return this.buffer}isAlloc(e){this.shared&&((0,o.s2)(a.II,!0),this.checkBuffer());const t=A(e-this.heapOffset);let r=this.int32Array[3];for(;r&&1!==r;){if(t>=r&&t<r+this.int32Array[r-1])return this.shared&&(0,o.Tl)(a.II),!1;r=this.int32Array[r+2]}return this.shared&&(0,o.Tl)(a.II),!0}checkBuffer(){this.options.memory&&this.options.memory.buffer!==this.buffer&&(this.buffer=this.options.memory.buffer,this.heapLength=y(this.buffer.byteLength-this.heapOffset),this.int32Array=new Int32Array(this.buffer,this.heapOffset,A(this.heapLength)))}}function p(e,t,r){e[t-1]!==e[t+r]&&c.h2(`Block length header does not match footer (${g(e[t-1])} vs ${g(e[t+r])}).`,h,585);const s=e[t+0];(s<1||s>u)&&c.h2(`Block ${g(t)} height must be between 1 and 32, got ${s}.`,h,590);for(let r=0;r<s;r++){const s=e[t+2+r];s>=l&&!M(e,s)&&c.h2(`Block ${g(t)} has a pointer to a non-free block (${g(s)}).`,h,596)}return!0}function m(e,t,r){if(e[t-1]===e[t+r])return!0;c.h2(`Block length header does not match footer (${g(e[t-1])} vs ${g(e[t+r])}).`,h,605)}function g(e){return e<<2>>>0}function A(e){return e>>>2}function v(e,t){return(e+t&~t)>>>0}function w(e,t){const r=t-e;return e+(v(r,7)===r?0:r-v(r,7)+8)}function y(e){return e-4}function b(e,t,r){const s=e[t+0],i=[];for(let r=0;r<s;r++)i.push(e[t+2+r]);return{type:"free",block:t,offset:g(t)+r,height:s,pointers:i,size:g(e[t-1])}}function _(e,t){const r=e[t-1],s=r>>31;return r+s^s}function k(e,t,r){e[r-1]=t,e[r+t]=t}function x(e,t,r){let s=1;for(let i=e[1];i>0;i--){let n=s+2+(i-1);for(;e[n]>=l&&e[e[n]-1]<t;)s=e[n],n=s+2+(i-1);r[i-1]=s}}function I(e,t,r,s){x(e,r,s);let i=e[s[0]+2];for(;i!==t&&1!==i&&e[i-1]<=r;){for(let r=e[i+0]-1;r>=0;r--)e[i+2+r]===t&&(s[r]=i);i=e[i+2]}let n=e[1];for(let r=0;r<n&&e[s[r]+2+r]===t;r++)e[s[r]+2+r]=e[t+2+r];for(;n>0&&1===e[n-1+3];)n--,e[1]=n;e[t-1]=-r,e[t+r]=-r}function M(e,t){return!(t<65)&&!(e[t-1]<0)}function P(e,t){return!(t<65)&&!(e[t-1]<0)}function C(e,t){if(t<=l)return 0;const r=e[t-2];return r<2?0:t-(2+r)}function E(e,t,r,s){x(e,r,s);const i=function(e,t,r,s){const i=e[1];let n=function(){let e=1;for(;Math.random()<.5&&e<u;)e+=1;return e}();if(r-1<n+1&&(n=r-2),n>i){const r=i+1;return e[1]=r,e[r-1+3]=1,s[r]=1,e[t+0]=r,r}return e[t+0]=n,n}(e,t,r,s);for(let r=1;r<=i;r++){const i=s[r-1]+2+(r-1);e[t+2+(r-1)]=e[i],e[i]=t,s[r-1]=1}return e[t-1]=r,e[t+r]=r,r}function T(e,t,r,s,i){const n=r-t+s;return I(e,t,r-t-2,i),e[t-1]=-n,e[r+s]=-n,E(e,t,n,i),s}},94321:(e,t,r)=>{"use strict";r.d(t,{z:()=>i});var s=r(134);class i{constructor(){(0,s.A)(this,"table",void 0),(0,s.A)(this,"pointer",void 0),(0,s.A)(this,"nodes",void 0),this.table=new WebAssembly.Table({initial:16,element:"anyfunc",address:"i32",index:"i32"}),this.pointer=6,this.nodes=[{pointer:this.pointer,length:10,free:!0}]}getPointer(){return this.pointer}alloc(e){let t=this.findFree(e);if(t<0){const r=this.nodes[this.nodes.length-1],s=e-(r.free?r.length:0);this.table.grow(s),r.free?r.length=r.length+s:this.nodes.push({pointer:r.pointer+r.length,length:s,free:!0}),t=this.findFree(e)}const r=this.nodes[t];return r.length>e&&(this.nodes.splice(t+1,0,{pointer:r.pointer+e,length:r.length-e,free:!0}),r.length=e),r.free=!1,r.pointer}free(e){let t=this.findNode(e);const r=this.nodes[t];if(r&&!r.free){const e=this.nodes[t-1],s=this.nodes[t+1];e&&e.free?s&&s.free?(e.length+=r.length+s.length,this.nodes.splice(t,2)):(e.length+=r.length,this.nodes.splice(t,1)):s&&s.free?(r.length+=s.length,this.nodes.splice(t+1,1),r.free=!0):r.free=!0}if(1===this.nodes.length&&this.nodes[0].free){const e=new WebAssembly.Table({initial:16,element:"anyfunc",address:"i32",index:"i32"});this.pointer=6,this.nodes=[{pointer:this.pointer,length:10,free:!0}];for(let t=1;t<this.pointer;t++)e.set(t,this.table.get(t));this.table=e}}get(e){return this.table.get(e)}set(e,t){if(e<0||e>=this.pointer)throw new RangeError("index out of bound");this.table.set(e,t)}inspect(){return this.nodes}findFree(e){let t=-1;for(let r=0;r<this.nodes.length;r++)if(this.nodes[r].length>=e&&this.nodes[r].free){t=r;break}return t}findNode(e){let t=-1;for(let r=0;r<this.nodes.length;r++)if(this.nodes[r].pointer===e){t=r;break}return t}}},15541:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});const s="AGFzbQEAAAABLwlgAn9/AGACf34AYAJ/fQBgAn98AGABfwF/YAF/AX5gAX8BfWABfwF8YAN/f38AAhIBA2VudgZtZW1vcnkCAwGAgAQDERAAAAABAgMEBAQEBAUGBwgIB5YBEAZ3cml0ZTgAAAd3cml0ZTE2AAEHd3JpdGUzMgACB3dyaXRlNjQAAwh3cml0ZWYzMgAECHdyaXRlZjY0AAUFcmVhZDgABgZyZWFkVTgABwZyZWFkMTYACAdyZWFkVTE2AAkGcmVhZDMyAAoGcmVhZDY0AAsHcmVhZGYzMgAMB3JlYWRmNjQADQRmaWxsAA4EY29weQAPCpYBEAkAIAAgAToAAAsJACAAIAE7AQALCQAgACABNgIACwkAIAAgATcDAAsJACAAIAE4AgALCQAgACABOQMACwcAIAAsAAALBwAgAC0AAAsHACAALgEACwcAIAAvAQALBwAgACgCAAsHACAAKQMACwcAIAAqAgALBwAgACsDAAsLACAAIAEgAvwLAAsMACAAIAEgAvwKAAAL"},98564:(e,t,r)=>{"use strict";r.d(t,{Ts:()=>u});var s=r(4919),i=r(4624),n=r(63939),o=r(50932),a=r(88096),c=r(15541);const h="src/cheap/asm/memory.ts";let d;function u(e,t,r){try{const i=a.bx((0,s.E_)(c.A),{shared:"function"==typeof SharedArrayBuffer&&e.buffer instanceof SharedArrayBuffer,initial:t,maximum:r});d=new WebAssembly.Instance(new WebAssembly.Module(i),{env:{memory:e}}),(0,n.$)({4:d.exports.readU8,5:d.exports.readU8,2:d.exports.readU8,3:d.exports.readU8,6:d.exports.readU16,7:d.exports.readU16,8:e=>d.exports.read32(e)>>>0,9:e=>d.exports.read32(e)>>>0,10:e=>BigInt.asUintN(64,d.exports.read64(e)),22:e=>BigInt.asUintN(64,d.exports.read64(e)),11:d.exports.read8,12:d.exports.read8,13:d.exports.read16,14:d.exports.read16,15:d.exports.read32,16:d.exports.read32,17:d.exports.read64,21:d.exports.read64,18:d.exports.readf32,19:d.exports.readf64,20:e=>d.exports.read32(e)>>>0,25:e=>d.exports.read32(e)>>>0}),(0,o.$)({4:d.exports.write8,5:d.exports.write8,2:d.exports.write8,3:d.exports.write8,6:d.exports.write16,7:d.exports.write16,8:d.exports.write32,9:d.exports.write32,10:d.exports.write64,22:d.exports.write64,11:d.exports.write8,12:d.exports.write8,13:d.exports.write16,14:d.exports.write16,15:d.exports.write32,16:d.exports.write32,17:d.exports.write64,21:d.exports.write64,18:d.exports.writef32,19:d.exports.writef64,20:d.exports.write32,25:d.exports.write32,copy:d.exports.copy,fill:d.exports.fill})}catch(e){i.R8("memory asm not support, cannot use asm memory function",h,119)}}},26429:(e,t,r)=>{"use strict";r.r(t),r.d(t,{HEAP_INITIAL:()=>p,HEAP_MAXIMUM:()=>m,HEAP_OFFSET:()=>f,STACK_ALIGNMENT:()=>u,STACK_SIZE:()=>l,USE_THREADS:()=>d});var s,i,n=r(95797),o=r(10576),a=r(86834),c=r(44690);const h=o.TK,d=!!n.A.thread&&!h.CHEAP_DISABLE_THREAD;let u=16,l=1048576;const f=1024,p=null!==(s=h.CHEAP_HEAP_INITIAL)&&void 0!==s?s:265,m=null!==(i=h.CHEAP_HEAP_MAXIMUM)&&void 0!==i?i:d&&c.A.ios&&!a.A.checkVersion(c.A.version,"17",!0)?8192:65536},73281:(e,t,r)=>{"use strict";r.d(t,{A:()=>S});var s=r(59135),i=r(63939),n=r(50932);let o,a;const c=(0,s.A)();function h(e,t){a().setUint8(e,t)}function d(e){return a().getUint8(e)}function u(e,t){a().setUint16(e,t,c)}function l(e){return a().getUint16(e,c)}function f(e,t){a().setUint32(e,t,c)}function p(e){return a().getUint32(e,c)}function m(e,t){a().setBigUint64(e,t,c)}function g(e){return a().getBigUint64(e,c)}function A(e,t){a().setInt8(e,t)}function v(e){return a().getInt8(e)}function w(e,t){a().setInt16(e,t,c)}function y(e){return a().getInt16(e,c)}function b(e,t){a().setInt32(e,t,c)}function _(e){return a().getInt32(e,c)}function k(e,t){a().setBigInt64(e,t,c)}function x(e){return a().getBigInt64(e,c)}function I(e,t){a().setFloat32(e,t,c)}function M(e){return a().getFloat32(e,c)}function P(e,t){a().setFloat64(e,t,c)}function C(e){return a().getFloat64(e,c)}function E(e){return a().getUint32(e,c)}function T(e,t){return a().setUint32(e,t,c)}function B(e,t){a().setUint32(e,t,c)}function S(e,t){o=e,a=t,(0,i.$)({4:d,5:d,2:d,3:d,6:l,7:l,8:p,9:p,10:g,11:v,12:v,13:y,14:y,15:_,16:_,17:x,18:M,19:C,20:E,23:e=>!!v(e),24:e=>!!v(e),25:e=>function(e){return a().getUint32(e,c)}(e)}),(0,n.$)({4:h,5:h,2:h,3:h,6:u,7:u,8:f,9:f,10:m,11:A,12:A,13:w,14:w,15:b,16:b,17:k,18:I,19:P,20:T,23:(e,t)=>{A(e,t?1:0)},24:(e,t)=>{A(e,t?1:0)},25:B})}},63939:(e,t,r)=>{"use strict";r.d(t,{$:()=>n,f:()=>i});var s=r(95335);const i={4:function(e){throw new Error("unimplemented")},5:function(e){throw new Error("unimplemented")},2:function(e){throw new Error("unimplemented")},3:function(e){throw new Error("unimplemented")},6:function(e){throw new Error("unimplemented")},7:function(e){throw new Error("unimplemented")},8:function(e){throw new Error("unimplemented")},9:function(e){throw new Error("unimplemented")},10:function(e){throw new Error("unimplemented")},11:function(e){throw new Error("unimplemented")},12:function(e){throw new Error("unimplemented")},13:function(e){throw new Error("unimplemented")},14:function(e){throw new Error("unimplemented")},15:function(e){throw new Error("unimplemented")},16:function(e){throw new Error("unimplemented")},17:function(e){throw new Error("unimplemented")},18:function(e){throw new Error("unimplemented")},19:function(e){throw new Error("unimplemented")},20:function(e){throw new Error("unimplemented")},0:function(e){throw new Error("invalid operate")},1:function(e){throw new Error("invalid operate")},22:function(e){throw new Error("invalid operate")},21:function(e){throw new Error("invalid operate")},23:function(e){throw new Error("invalid operate")},24:function(e){throw new Error("invalid operate")},25:function(e){throw new Error("unimplemented")}};function n(e){s.X$(i,e)}},50932:(e,t,r)=>{"use strict";r.d(t,{$:()=>n,M:()=>i});var s=r(95335);const i={4:function(e,t){throw new Error("unimplemented")},5:function(e,t){throw new Error("unimplemented")},2:function(e,t){throw new Error("unimplemented")},3:function(e,t){throw new Error("unimplemented")},6:function(e,t){throw new Error("unimplemented")},7:function(e,t){throw new Error("unimplemented")},8:function(e,t){throw new Error("unimplemented")},9:function(e,t){throw new Error("unimplemented")},10:function(e,t){throw new Error("unimplemented")},11:function(e,t){throw new Error("unimplemented")},12:function(e,t){throw new Error("unimplemented")},13:function(e,t){throw new Error("unimplemented")},14:function(e,t){throw new Error("unimplemented")},15:function(e,t){throw new Error("unimplemented")},16:function(e,t){throw new Error("unimplemented")},17:function(e,t){throw new Error("unimplemented")},18:function(e,t){throw new Error("unimplemented")},19:function(e,t){throw new Error("unimplemented")},20:function(e,t){throw new Error("unimplemented")},0:function(e,t){throw new Error("invalid operate")},1:function(e,t){throw new Error("invalid operate")},22:function(e,t){throw new Error("invalid operate")},21:function(e,t){throw new Error("invalid operate")},23:function(e,t){throw new Error("invalid operate")},24:function(e,t){throw new Error("invalid operate")},25:function(e,t){throw new Error("unimplemented")},copy:function(e,t,r){throw new Error("invalid operate")},fill:function(e,t,r){throw new Error("invalid operate")}};function n(e){s.X$(i,e)}},25323:(e,t,r)=>{"use strict";r.d(t,{X:()=>B,l:()=>T});var s=r(66681),i=r.n(s),n=r(11919),o=r.n(n),a=r(75019),c=r.n(a),h=r(99921),d=r(63939),u=r(50932),l=r(61499),f=r(6704),p=r(67672),m=r(95335),g=r(62100),A=r(72739);function v(e,t,r,s){i()(e,t,{get:r,set:s,configurable:!0,enumerable:!0})}function w(e){return function(){return d.f[20](e())}}function y(e,t,r,s){return function(){return e[`__$__${t}`]||(e[`__$__${t}`]=T(r(),s))}}function b(e,t){return function(){return d.f[t](e())}}function _(e,t,r,s){const i=8*f.i[t]-s-r,n=Math.pow(2,r)-1;return function(){return d.f[t](e())>>>i&n}}function k(e){return function(t){u.M[20](e(),t)}}function x(e,t,r,s){const i=`__$__${t}`;return function(t){const n=e[i]||(e[i]=T(r(),s));m.__(t,((e,t)=>{n[t]=e})),e[i]=n}}function I(e,t){return function(r){u.M[t](e(),r)}}function M(e,t,r,s){let i=0,n=8*f.i[t];for(let e=0;e<r;e++)i|=1<<n-1-(e+s);const o=Math.pow(2,r)-1,a=n-s-r;return function(r){const s=e(),n=d.f[t](s);u.M[t](s,n&~i|(r&o)<<a)}}function P(e,t,r){return function(){const s=t[`__$__${r}`];return s[l.o9]=e(),s}}function C(e,t,r,s,i){const n=`__$__${t}`;return function(t){let o=e[n]||function(e,t,r){const s={};let i=(0,h.A)(r);for(let n=0;n<t;n++){const t=(0,g.A)(n);v(s,t,y(s,t,(()=>e()+i*n),r),x(s,t,(()=>e()+i*n),r))}return s}(r,s,i);o[l.o9]=r(),A.__(t,((e,t)=>{o[t]=e})),e[n]=o}}function E(e,t,r,s,i){const n=`__$__${t}`;return function(t){let o=e[n]||function(e,t,r){const s={};let i=(0,h.A)(r);for(let n=0;n<t;n++)v(s,(0,g.A)(n),b((()=>e()+i*n),r),I((()=>e()+i*n),r));return s}(r,s,i);o[l.o9]=r(),A.__(t,((e,t)=>{o[t]=e})),e[n]=o}}function T(e,t){let r=p.Pc(t)?t.prototype:t;const s={};for(s[l.o9]=e,o()(s,r);;){let e=r[l.JY];if(e&&e.forEach(((e,t)=>{e[3]?e[1]?v(s,t,P((()=>s[l.o9]+e[7]),s,t),E(s,t,(()=>s[l.o9]+e[7]),e[4],20)):p.Pc(e[0])||p.Ik(e[0])?v(s,t,P((()=>s[l.o9]+e[7]),s,t),C(s,t,(()=>s[l.o9]+e[7]),e[4],e[0])):v(s,t,P((()=>s[l.o9]+e[7]),s,t),E(s,t,(()=>s[l.o9]+e[7]),e[4],e[0])):e[1]?v(s,t,w((()=>s[l.o9]+e[7])),k((()=>s[l.o9]+e[7]))):p.Pc(e[0])||p.Ik(e[0])?v(s,t,y(s,t,(()=>s[l.o9]+e[7]),e[0]),x(s,t,(()=>s[l.o9]+e[7]),e[0])):e[5]?v(s,t,_((()=>s[l.o9]+e[7]),e[0],e[6],e[8]),M((()=>s[l.o9]+e[7]),e[0],e[6],e[8])):v(s,t,b((()=>s[l.o9]+e[7]),e[0]),I((()=>s[l.o9]+e[7]),e[0]))})),r=c()(r),!r)break}return s}function B(e){let t=c()(e);for(;;){let r=t[l.JY];if(r&&r.forEach(((t,r)=>{delete e[r]})),t=c()(t),!t)break}}},12085:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r(66681),i=r.n(s);function n(e,t,r){i()(e,t,{value:r,writable:!1,enumerable:!1,configurable:!1})}},11473:(e,t,r)=>{"use strict";r.d(t,{GE:()=>_,Lv:()=>z,XI:()=>I,ce:()=>P,eq:()=>g,pv:()=>j,s_:()=>M,wE:()=>k});var s=r(39638),i=r(95007),n=r(94321),o=r(10576),a=r(26429),c=r(7417),h=r(33856),d=r(98564),u=r(82854),l=r(73281),f=r(54568),p=r(86834),m=r(44690);let g,A,v,w=-1,y=!0,b="",_=null,k=null,x=0,I=null,M=null,P=null,C=null,E=null,T=null,B=null,S=null,U=null,D=null,L=null,R=null,$={5:S,3:S,7:U,9:D,22:L,12:C,14:E,16:T,21:B};function F(){return!(!P||P.buffer===S.buffer)}function z(){return P.buffer}function O(){return F()&&H(P.buffer),S}function W(){return F()&&H(P.buffer),R}function N(e){return F()&&H(P.buffer),$[e]}function V(){a.USE_THREADS?(g=O,A=W,v=N):(g=()=>S,A=()=>R,v=e=>$[e])}function H(e){C=new Int8Array(e),E=new Int16Array(e),T=new Int32Array(e),B=new BigInt64Array(e),S=new Uint8Array(e),U=new Uint16Array(e),D=new Uint32Array(e),L=new BigUint64Array(e),R=new DataView(e),$={5:S,3:S,7:U,9:D,22:L,12:C,14:E,16:T,21:B}}function j(){return Atomics.add(D,c.hb>>>2,1)}!(0,s.A)()&&!(0,f.A)()||(0,s.A)()&&!a.USE_THREADS?function(){var e,t,r,s,f,g,C,E;if(V(),(0,l.A)((()=>M),A),(0,h.A)(v),P=null!==(e=o.TK.CHeap)&&void 0!==e&&e.Memory?o.TK.CHeap.Memory:new WebAssembly.Memory({initial:a.HEAP_INITIAL,maximum:a.HEAP_MAXIMUM,shared:a.USE_THREADS,address:"i32",index:"i32"}),"function"==typeof BigInt&&BigInt!==Number&&(p.A.chrome&&p.A.checkVersion(p.A.majorVersion,"85",!0)||p.A.firefox&&p.A.checkVersion(p.A.majorVersion,"78",!0)||p.A.safari&&p.A.checkVersion(p.A.majorVersion,"15",!0)||m.A.ios&&p.A.checkVersion(m.A.version,"15",!0)||p.A.newEdge)&&a.USE_THREADS&&d.Ts(P,a.HEAP_INITIAL,a.HEAP_MAXIMUM),a.USE_THREADS&&(p.A.chrome&&p.A.checkVersion(p.A.majorVersion,"85",!0)||p.A.firefox&&p.A.checkVersion(p.A.majorVersion,"78",!0)||p.A.safari&&p.A.checkVersion(p.A.majorVersion,"15",!0)||m.A.ios&&p.A.checkVersion(m.A.version,"15",!0)||p.A.newEdge)&&u.Ts(P,a.HEAP_INITIAL,a.HEAP_MAXIMUM),M=null!==(t=o.TK.CHeap)&&void 0!==t&&t.Allocator?o.TK.CHeap.Allocator:new i.A({buffer:P.buffer,memory:P,byteOffset:a.HEAP_OFFSET,maxHeapSize:64*a.HEAP_MAXIMUM*1024,growAllowed:!0,onResize:(e,t)=>(P.grow(t-e.byteLength>>>16),{buffer:P.buffer,byteOffset:a.HEAP_OFFSET})}),M.addUpdateHandle(H),H(M.getBuffer()),x=null!==(r=o.TK.CHeap)&&void 0!==r&&r.StackSize?o.TK.CHeap.StackSize:a.STACK_SIZE,k=null!==(s=o.TK.CHeap)&&void 0!==s&&s.StackTop?o.TK.CHeap.StackTop:M.malloc(x),_=null!==(f=o.TK.CHeap)&&void 0!==f&&f.StackPointer?o.TK.CHeap.StackPointer:new WebAssembly.Global({value:"i32",mutable:!0},k+x),I=null!==(g=o.TK.CHeap)&&void 0!==g&&g.Table?o.TK.CHeap.Table:new n.z,w=null!==(C=o.TK.CHeap)&&void 0!==C&&C.ThreadId?o.TK.CHeap.ThreadId:0,b=null!==(E=o.TK.CHeap)&&void 0!==E&&E.ThreadName?o.TK.CHeap.ThreadName:"main",!o.TK.CHeap)if(a.USE_THREADS)Atomics.store(D,c.hb>>>2,w+1),Atomics.store(T,c.II>>>2,0);else{D[c.hb>>>2]=w+1;let e=c.II>>>2;T[e]=0}o.TK.CHeap||(o.TK.CHeap={Allocator:M,Table:I,ThreadId:w,ThreadName:b,Memory:P,Config:a,StackSize:x,StackTop:k,StackPointer:_,isMainThread:!0,threadCounter:c.hb,heapMutex:c.II}),y=!0}():(o.TK.CHeap={initThread:async function e(t){var r;V(),(0,l.A)((()=>M),A),(0,h.A)(v),P=t.memory,t.disableAsm||("function"==typeof BigInt&&BigInt!==Number&&(p.A.chrome&&p.A.checkVersion(p.A.majorVersion,"85",!0)||p.A.firefox&&p.A.checkVersion(p.A.majorVersion,"78",!0)||p.A.safari&&p.A.checkVersion(p.A.majorVersion,"15",!0)||m.A.ios&&p.A.checkVersion(m.A.version,"15",!0)||p.A.newEdge)&&d.Ts(P,a.HEAP_INITIAL,a.HEAP_MAXIMUM),(p.A.chrome&&p.A.checkVersion(p.A.majorVersion,"85",!0)||p.A.firefox&&p.A.checkVersion(p.A.majorVersion,"78",!0)||p.A.safari&&p.A.checkVersion(p.A.majorVersion,"15",!0)||m.A.ios&&p.A.checkVersion(m.A.version,"15",!0)||p.A.newEdge)&&u.Ts(P,a.HEAP_INITIAL,a.HEAP_MAXIMUM));var s;s=new i.A({buffer:P.buffer,memory:P,byteOffset:a.HEAP_OFFSET,maxHeapSize:64*a.HEAP_MAXIMUM*1024,growAllowed:!0,onResize:(e,t)=>(P.grow(t-e.byteLength>>>16),{buffer:P.buffer,byteOffset:a.HEAP_OFFSET})},!1),M&&M.removeUpdateHandle(H),M=s,o.TK.CHeap&&(o.TK.CHeap.Allocator=M),M.addUpdateHandle(H),H(M.getBuffer()),t.stackPointer&&(x=t.stackSize,k=t.stackPointer,_=new WebAssembly.Global({value:"i32",mutable:!0},k+x),I=new n.z),w="number"==typeof t.id?t.id:Atomics.add(D,c.hb>>>2,1),b=null!==(r=t.name)&&void 0!==r?r:"anonymous",o.TK.CHeap={initThread:e,Allocator:M,Table:I,ThreadId:w,ThreadName:b,Memory:P,Config:a,StackSize:x,StackTop:k,StackPointer:_,isMainThread:!1},y=!1},isMainThread:!1,Config:a},y=!1)},80098:(e,t,r)=>{"use strict";r.d(t,{I_:()=>v,SQ:()=>w});var s=r(75019),i=r.n(s),n=r(11919),o=r.n(n),a=r(99921),c=r(63939),h=r(50932),d=r(61499),u=r(6704),l=r(67672),f=r(95335),p=r(72739),m=r(2148);const g=i()({});function A(e,t){for(;;){let r=e[d.JY];if(r){const e=r.get(t);if(e)return e}if(!(e=i()(e))||e===g)return null}}function v(e,t){const r=l.Pc(t)?t.prototype:t,s={};s[d.o9]=e,o()(s,r);const{proxy:i,revoke:n}=Proxy.revocable(s,{get(e,t,s){if(l.Yj(t)){const s=A(r,t.replace(/^\$+/,""));if(s){const r=e[d.o9]+s[7];if(s[3]){const s=e[t];return s[d.o9]=r,s}if(s[1])return c.f[20](r);if(l.Pc(s[0])||l.Ik(s[0]))return e[t]||(e[t]=v(r,s[0]));{let e=c.f[s[0]](r);return s[5]&&(e=e>>>8*u.i[s[0]]-s[8]-s[6]&Math.pow(2,s[6])-1),e}}return e[t]}return e[t]},set(e,t,s,i){if(l.Yj(t)){const i=A(r,t.replace(/^\$+/,""));if(i){const r=e[d.o9]+i[7];if(i[3]){const n=e[t]||function(e,t,r,s){const i={};i[d.o9]=e;let n=(0,a.A)(s?20:r);return new Proxy(i,{get(e,t,i){if(t===d.o9)return e[d.o9];const o=(0,m.A)(t);return s?c.f[20](e[d.o9]+o*n):l.Pc(r)?e[t]:c.f[r](e[d.o9]+o*n)},set(e,t,i,o){if(t===d.o9)return e[d.o9]=i,!0;const a=(0,m.A)(t);if(s)h.M[20](e[d.o9]+a*n,i),e[t]=i;else if(l.Pc(r)){const s=e[t]||(e[t]=v(e[d.o9]+a*n,r));f.__(i,((e,t)=>{s[t]=e})),e[t]=s}else h.M[r](e[d.o9]+a*n,i),e[t]=i;return!0}})}(r,i[4],i[0],i[1]);p.__(s,((e,t)=>{n[t]=e})),e[t]=n}else if(i[1])h.M[20](r,s),e[t]=s;else if(l.Pc(i[0])||l.Ik(i[0])){const n=e[t]||(e[t]=v(r,i[0]));f.__(s,((e,t)=>{n[t]=e})),e[t]=n}else{if(i[5]){let e=0,t=8*u.i[i[0]];for(let r=0;r<i[6];r++)e|=1<<t-1-(r+i[8]);const n=c.f[i[0]](r);h.M[i[0]](r,n&~e|(s&Math.pow(2,i[6])-1)<<t-i[8]-i[6])}else h.M[i[0]](r,s);e[t]=s}}else e[t]=s}else e[t]=s;return!0}});return s[d.kE]=n,i}function w(e){const t=e[d.kE];t&&t()}},52699:(e,t,r)=>{"use strict";r.d(t,{t:()=>n,z:()=>i});var s=r(11473);function i(e){return s.GE.value=s.GE.value-e,s.GE.value}function n(e){s.GE.value=s.GE.value+e}},7417:(e,t,r)=>{"use strict";r.d(t,{II:()=>h,hb:()=>c,z1:()=>a});var s,i,n=r(10576);let o=4;function a(e,t=1){let r=o;for(;r%t;)r+=1;return o=r+e,r}const c=null!==(s=n.TK.CHeap)&&void 0!==s&&s.threadCounter?n.TK.CHeap.threadCounter:a(4,4),h=null!==(i=n.TK.CHeap)&&void 0!==i&&i.heapMutex?n.TK.CHeap.heapMutex:a(4,4)},79630:(e,t,r)=>{"use strict";r.d(t,{A:()=>h});var s=r(134),i=r(63939),n=r(50932),o=r(11473),a=r(61403);class c{constructor(e,t){(0,s.A)(this,"pointer",void 0),(0,s.A)(this,"len",void 0),(0,s.A)(this,"view",void 0),this.pointer=e,this.len=t}get byteLength(){return this.len}get buffer(){return o.Lv}get byteOffset(){return this.pointer}getView(){return this.view&&this.view.buffer===o.ce.buffer||(this.view=new DataView((0,o.Lv)(),this.pointer,this.len)),this.view}getFloat32(e,t){return this.getView().getFloat32(e,t)}getFloat64(e,t){return this.getView().getFloat64(e,t)}getInt8(e){return this.getView().getInt8(e)}getInt16(e,t){return this.getView().getInt16(e,t)}getInt32(e,t){return this.getView().getInt32(e,t)}getUint8(e){return this.getView().getUint8(e)}getUint16(e,t){return this.getView().getUint16(e,t)}getUint32(e,t){return this.getView().getUint32(e,t)}setFloat32(e,t,r){this.getView().setFloat32(e,t,r)}setFloat64(e,t,r){this.getView().setFloat64(e,t,r)}setInt8(e,t){this.getView().setInt8(e,t)}setInt16(e,t,r){this.getView().setInt16(e,t,r)}setInt32(e,t,r){this.getView().setInt32(e,t,r)}setUint8(e,t){this.getView().setUint8(e,t)}setUint16(e,t,r){this.getView().setUint16(e,t,r)}setUint32(e,t,r){this.getView().setUint32(e,t,r)}getBigInt64(e,t){return this.getView().getBigInt64(e,t)}getBigUint64(e,t){return this.getView().getBigUint64(e,t)}setBigInt64(e,t,r){this.getView().setBigInt64(e,t,r)}setBigUint64(e,t,r){this.getView().setBigUint64(e,t,r)}}class h extends a.A{constructor(e,t){return super(),(0,s.A)(this,"pointer",void 0),(0,s.A)(this,"len",void 0),this.pointer=e,this.len=t,this.proxy}getIndexValue(e){return i.f[2](this.pointer+e)}setIndexValue(e,t){n.M[2](this.pointer+e,t)}set(e,t=0){new Uint8Array((0,o.Lv)(),this.pointer,this.len).set(e,t)}subarray(e=0,t,r){return r?new h(this.pointer+e,(t||this.len)-e):new Uint8Array((0,o.Lv)(),this.pointer+e,(null!=t?t:this.len)-e)}slice(e=0,t){return new Uint8Array((0,o.Lv)(),this.pointer+e,(null!=t?t:this.len)-e).slice()}get length(){return this.len}get byteLength(){return this.len}get buffer(){return(0,o.Lv)()}get byteOffset(){return this.pointer}get view(){return new c(this.pointer,this.len)}}},12264:(e,t,r)=>{"use strict";r.d(t,{A:()=>v});var s,i,n=r(134),o=r(80662),a=r.n(o),c=r(61499),h=r(12085),d=r(11473),u=r(63939),l=r(50932),f=r(99921),p=r(14686),m=r(67672),g=r(29170);class A{constructor(){(0,n.A)(this,"prev",void 0),(0,n.A)(this,"next",void 0),(0,n.A)(this,"data",void 0)}}s=A.prototype,(i=new(a())).set("prev",{0:A,1:1,2:1,3:0,4:0,5:0,6:0,7:0,8:0}),i.set("next",{0:A,1:1,2:1,3:0,4:0,5:0,6:0,7:4,8:0}),i.set("data",{0:1,1:1,2:1,3:0,4:0,5:0,6:0,7:8,8:0}),(0,h.A)(s,c.Og,!0),(0,h.A)(s,c.dc,4),(0,h.A)(s,c.g7,12),(0,h.A)(s,c.JY,i);class v{constructor(){(0,n.A)(this,"length",0),(0,n.A)(this,"head",0),(0,n.A)(this,"tail",0)}createNode(e,t,r=!1){const s=d.s_.malloc(12);if(l.M[20](s+4,0),l.M[20](s,0),m.ai(t))if(20===t)l.M[20](s+8,e);else{const r=d.s_.malloc((0,f.A)(t));l.M[t](r,e),l.M[20](s+8,r)}else if(r)l.M[20](s+8,e);else{const r=d.s_.malloc((0,f.A)(t));(0,p.Mr)(r,e[c.o9],(0,f.A)(t)),l.M[20](s+8,r)}return s}getItem(e,t){let r;return r=m.ai(t)?20===t?e:u.f[t](e):(0,g.A)(e,t),r}push(e,t,r=!1){const s=this.createNode(e,t,r);this.tail?(l.M[20](this.tail+4,s),l.M[20](s,this.tail),this.tail=s):(this.head=s,this.tail=s),this.length++}pop(e){const t=this.tail;let r=this.getItem(u.f[20](t+8),e);return this.length>1?(l.M[20](u.f[20](t)+4,0),this.tail=u.f[20](t)):(this.head=0,this.tail=0),this.length--,d.s_.free(u.f[20](t+8)),d.s_.free(t),r}shift(e){const t=this.head;let r=this.getItem(u.f[20](t+8),e);return this.length>1?(l.M[20](u.f[20](t+4),0),this.head=u.f[20](t+4)):(this.head=0,this.tail=0),this.length--,d.s_.free(u.f[20](t+8)),d.s_.free(t),r}unshift(e,t,r=!1){const s=this.createNode(e,t,r);this.head?(l.M[20](this.head,s),l.M[20](s+4,this.head),this.head=s):(this.head=s,this.tail=s),this.length++}forEach(e,t){if(!this.length)return;let r=this.head,s=0;for(;0!==r&&!1!==e(this.getItem(u.f[20](r+8),t),s);)r=u.f[20](r+4),s++}find(e,t){if(!this.length)return 0;let r=this.head,s=0;for(;0!==r;){const i=this.getItem(u.f[20](r+8),t);if(!0===e(i,s))return i;r=u.f[20](r+4),s++}return 0}indexOf(e,t){if(!this.length)return 0;let r=this.head,s=0;for(;0!==r;){if(s===e)return this.getItem(u.f[20](r+8),t);r=u.f[20](r+4),s++}return 0}clear(e,t){if(this.length){let r=this.head;for(;0!==r;){e&&e(this.getItem(u.f[20](r+8),t)),d.s_.free(u.f[20](r+8));const s=u.f[20](r+4);d.s_.free(r),r=s}}this.head=0,this.tail=0,this.length=0}}!function(e){var t=new(a());t.set("length",{0:8,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),t.set("head",{0:A,1:1,2:1,3:0,4:0,5:0,6:0,7:4,8:0}),t.set("tail",{0:A,1:1,2:1,3:0,4:0,5:0,6:0,7:8,8:0}),(0,h.A)(e,c.Og,!0),(0,h.A)(e,c.dc,4),(0,h.A)(e,c.g7,12),(0,h.A)(e,c.JY,t)}(v.prototype)},72703:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var s=r(67672);function i(e){return s.ai(e)&&e>=0}},74503:(e,t,r)=>{"use strict";r.d(t,{A:()=>h});var s=r(99921),i=r(11473),n=r(14686),o=r(95335),a=r(34677),c=r(29170);function h(e,t){(0,a.A)(t)||(t=e,e=null);const r=(0,s.A)(t),h=i.s_.malloc(r);if(!h)throw new TypeError("cannot alloc memory for struct");(0,n.sO)(h,0,r);const d=(0,c.A)(h,t),u=new t;return e&&o.X$(u,e),o.__(u,((e,t)=>{(0,a.A)(e)&&(d[t]=e)})),d}},14686:(e,t,r)=>{"use strict";r.d(t,{JW:()=>l,Mr:()=>h,TL:()=>g,cC:()=>p,gd:()=>m,lH:()=>A,lW:()=>d,qW:()=>v,s3:()=>f,sO:()=>u});var s=r(11473),i=r(50011),n=r(50932),o=r(79630),a=r(26429),c=r(63939);function h(e,t,r){(0,s.eq)().set((0,s.eq)().subarray(t,t+r),e)}function d(e,t,r){(0,s.eq)().set(r.subarray(0,t),e)}function u(e,t,r){(0,s.eq)().subarray(e,e+r).fill(t)}function l(e,t){return a.USE_THREADS?f(e,t):new o.A(e,t)}function f(e,t){return new Uint8Array((0,s.Lv)(),e,t)}function p(e,t){return new Int16Array((0,s.Lv)(),e,t)}function m(e,t){return new Int32Array((0,s.Lv)(),e,t)}function g(e,t){return new Float32Array((0,s.Lv)(),e,t)}function A(e,t){let r=0;for(;c.f[4]((e+=1)-1);)r++;const s=Math.min(r,null!=t?t:r);return i.decode(f(e,s))}function v(e,t,r,s=!0){const o=i.encode(t);let a=o.length,c=s?1:0;r&&a-c>r&&(a=r-c),d(e,a,o),s&&n.M[11](e+a,0)}},99921:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var s=r(61499),i=r(67672),n=r(6704);function o(e){return i.ai(e)?n.i[e]||0:i.Pc(e)&&e.prototype[s.Og]?e.prototype[s.g7]:0}},29170:(e,t,r)=>{"use strict";r.d(t,{A:()=>h});var s=r(61499),i=r(80098),n=r(25323),o=r(95797),a=r(67672),c=r(10534);function h(e,t){return arguments[2]&&a.Yj(arguments[2])&&(t=t.prototype,c.__(arguments[2],(e=>{const r=t[s.JY];t=r.get(e)[0]}))),o.A.proxy?(0,i.I_)(e,t):(0,n.l)(e,t)}},94300:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var s=r(11473),i=r(61499),n=r(80098),o=r(25323),a=r(95797);function c(e){const t=e[i.o9];t&&(s.s_.free(t),e[i.o9]=0,a.A.proxy?(0,n.SQ)(e):(0,o.X)(e))}},61499:(e,t,r)=>{"use strict";r.d(t,{JY:()=>h,Og:()=>n,dc:()=>a,g7:()=>o,kE:()=>d,o9:()=>c});var s=r(75062),i=r.n(s);const n=i()("Struct"),o=i()("StructLength"),a=i()("StructMaxBaseTypeByteLength"),c=i()("StructAddress"),h=(i()("StructKeysQueue"),i()("StructKeysMeta")),d=(i()("StructKeysInstance"),i()("StructProxyRevoke"))},10047:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});const s="AGFzbQEAAAABLAdgAX8Bf2ABfwF+YAJ/fwF/YAJ/fgF+YAN/f38Bf2ADf35+AX5gA39/fgF/AhIBA2VudgZtZW1vcnkCAwGAgAQDKCcAAAABAgICAwICAgMCAgIDAgICAwICAgMCAgIDAgICAwQEBAUCAgYHhgMnBWxvYWQ4AAAGbG9hZDE2AAEGbG9hZDMyAAIGbG9hZDY0AAMGc3RvcmU4AAQHc3RvcmUxNgAFB3N0b3JlMzIABgdzdG9yZTY0AAcEYWRkOAAIBWFkZDE2AAkFYWRkMzIACgVhZGQ2NAALBHN1YjgADAVzdWIxNgANBXN1YjMyAA4Fc3ViNjQADwRhbmQ4ABAFYW5kMTYAEQVhbmQzMgASBWFuZDY0ABMDb3I4ABQEb3IxNgAVBG9yMzIAFgRvcjY0ABcEeG9yOAAYBXhvcjE2ABkFeG9yMzIAGgV4b3I2NAAbCWV4Y2hhbmdlOAAcCmV4Y2hhbmdlMTYAHQpleGNoYW5nZTMyAB4KZXhjaGFuZ2U2NAAfEWNvbXBhcmVfZXhjaGFuZ2U4ACASY29tcGFyZV9leGNoYW5nZTE2ACESY29tcGFyZV9leGNoYW5nZTMyACISY29tcGFyZV9leGNoYW5nZTY0ACMGbm90aWZ5ACQEd2FpdAAlC3dhaXRUaW1lb3V0ACYKugMnCAAgAP4SAAALCAAgAP4TAQALCAAgAP4QAgALCAAgAP4RAwALDAAgACAB/hkAACABCwwAIAAgAf4aAQAgAQsMACAAIAH+FwIAIAELDAAgACAB/hgDACABCwoAIAAgAf4gAAALCgAgACAB/iEBAAsKACAAIAH+HgIACwoAIAAgAf4fAwALCgAgACAB/icAAAsKACAAIAH+KAEACwoAIAAgAf4lAgALCgAgACAB/iYDAAsKACAAIAH+LgAACwoAIAAgAf4vAQALCgAgACAB/iwCAAsKACAAIAH+LQMACwoAIAAgAf41AAALCgAgACAB/jYBAAsKACAAIAH+MwIACwoAIAAgAf40AwALCgAgACAB/jwAAAsKACAAIAH+PQEACwoAIAAgAf46AgALCgAgACAB/jsDAAsKACAAIAH+QwAACwoAIAAgAf5EAQALCgAgACAB/kECAAsKACAAIAH+QgMACwwAIAAgASAC/koAAAsMACAAIAEgAv5LAQALDAAgACABIAL+SAIACwwAIAAgASAC/kkDAAsKACAAIAH+AAIACwwAIAAgAUJ//gECAAsMACAAIAEgAv4BAgAL"},82854:(e,t,r)=>{"use strict";r.d(t,{KJ:()=>h,Ko:()=>d,Ts:()=>u});var s=r(4919),i=r(4624),n=r(88096),o=r(10047),a=r(40046);const c="src/cheap/thread/asm/atomics.ts";let h;function d(){return!!h}function u(e,t,r){try{if(!("function"==typeof SharedArrayBuffer&&e.buffer instanceof SharedArrayBuffer))return;{const i=n.bx((0,s.E_)(o.A),{shared:!0,initial:t,maximum:r});h=new WebAssembly.Instance(new WebAssembly.Module(i),{env:{memory:e}})}(0,a.$Z)({add:function(e,t,r){switch(r){case 5:case 3:return 255&h.exports.add8(e,t);case 12:return h.exports.add8(e,t);case 14:return h.exports.add16(e,t);case 7:return 65535&h.exports.add16(e,t);case 16:return h.exports.add32(e,t);case 9:return 4294967295&h.exports.add32(e,t);case 21:return h.exports.add64(e,t);case 22:return BigInt.asUintN(64,h.exports.add64(e,t))}},sub:function(e,t,r){switch(r){case 5:case 3:return 255&h.exports.sub8(e,t);case 12:return h.exports.sub8(e,t);case 14:return h.exports.sub16(e,t);case 7:return 65535&h.exports.sub16(e,t);case 16:return h.exports.sub32(e,t);case 9:return 4294967295&h.exports.sub32(e,t);case 21:return h.exports.sub64(e,t);case 22:return BigInt.asUintN(64,h.exports.sub64(e,t))}},and:function(e,t,r){switch(r){case 5:case 3:return 255&h.exports.and8(e,t);case 12:return h.exports.and8(e,t);case 14:return h.exports.and16(e,t);case 7:return 65535&h.exports.and16(e,t);case 16:return h.exports.and32(e,t);case 9:return 4294967295&h.exports.and32(e,t);case 21:return h.exports.and64(e,t);case 22:return BigInt.asUintN(64,h.exports.and64(e,t))}},or:function(e,t,r){switch(r){case 5:case 3:return 255&h.exports.or8(e,t);case 12:return h.exports.or8(e,t);case 14:return h.exports.or16(e,t);case 7:return 65535&h.exports.or16(e,t);case 16:case 9:return h.exports.or32(e,t);case 21:return h.exports.or64(e,t);case 22:return BigInt.asUintN(64,h.exports.or64(e,t))}},xor:function(e,t,r){switch(r){case 5:case 3:return 255&h.exports.xor8(e,t);case 12:return h.exports.xor8(e,t);case 14:return h.exports.xor16(e,t);case 7:return 65535&h.exports.xor16(e,t);case 16:case 9:return h.exports.xor32(e,t);case 21:return h.exports.xor64(e,t);case 22:return BigInt.asUintN(64,h.exports.xor64(e,t))}},store:function(e,t,r){switch(r){case 5:case 12:case 3:return h.exports.store8(e,t);case 14:case 7:return h.exports.store16(e,t);case 16:case 9:return h.exports.store32(e,t);case 21:case 22:return h.exports.store64(e,t)}},load:function(e,t){switch(t){case 5:case 3:return 255&h.exports.load8(e);case 12:return h.exports.load8(e);case 14:case 7:return h.exports.load16(e);case 16:return h.exports.load32(e);case 9:return 4294967295&h.exports.load32(e);case 21:return h.exports.load64(e);case 22:return BigInt.asUintN(64,h.exports.load64(e))}},compareExchange:function(e,t,r,s){switch(s){case 5:case 3:return 255&h.exports.compare_exchange8(e,t,r);case 12:return h.exports.compare_exchange8(e,t,r);case 14:return h.exports.compare_exchange16(e,t,r);case 7:return 65535&h.exports.compare_exchange16(e,t,r);case 16:return h.exports.compare_exchange32(e,t,r);case 9:return 4294967295&h.exports.compare_exchange32(e,t,r);case 21:return h.exports.compare_exchange64(e,t,r);case 22:return BigInt.asUintN(64,h.exports.compare_exchange64(e,t,r))}},exchange:function(e,t,r){switch(r){case 5:case 3:return 255&h.exports.exchange8(e,t);case 12:return h.exports.exchange8(e,t);case 14:return h.exports.exchange16(e,t);case 7:return 65535&h.exports.exchange16(e,t);case 16:return h.exports.exchange32(e,t);case 9:return 4294967295&h.exports.exchange32(e,t);case 21:return h.exports.exchange64(e,t);case 22:return BigInt.asUintN(64,h.exports.exchange64(e,t))}},notify:function(e,t){return h.exports.notify(e,t)},wait:function(e,t){return h.exports.wait(e,t)},waitTimeout:function(e,t,r){return h.exports.waitTimeout(e,t,BigInt(0|r)*BigInt(1e6))}})}catch(e){i.R8("atomics asm not support, cannot use asm atomics function",c,291)}}},40046:(e,t,r)=>{"use strict";let s,i,n,o,a,c,h,d,u,l,f,p,m,g;function A(e){e.add&&(s=e.add),e.sub&&(i=e.sub),e.and&&(n=e.and),e.or&&(o=e.or),e.xor&&(a=e.xor),e.store&&(c=e.store),e.load&&(h=e.load),e.compareExchange&&(d=e.compareExchange),e.exchange&&(u=e.exchange),e.notify&&(l=e.notify),e.wait&&(f=e.wait),e.waitTimeout&&(p=e.waitTimeout),e.waitAsync&&(m=e.waitAsync),e.waitTimeoutAsync&&(g=e.waitTimeoutAsync)}r.d(t,{$Z:()=>A,Hh:()=>h,I8:()=>a,M_:()=>c,Uo:()=>n,WQ:()=>s,cv:()=>u,j4:()=>p,jb:()=>i,me:()=>l,or:()=>o,p_:()=>d,uk:()=>f})},33856:(e,t,r)=>{"use strict";r.d(t,{A:()=>C});var s=r(54001),i=r.n(s),n=r(86932),o=r(7972),a=r(40046),c=r(26429),h=r(86834),d=r(95797);let u;const l=c.USE_THREADS||!h.A.chrome&&d.A.atomics||h.A.checkVersion(h.A.majorVersion,"94",!0);function f(e,t,r,s){if(l)return Atomics.add(u(r),e>>>s,t);{const i=u(r),n=e>>>s,o=i[n];return i[n]+=t,o}}function p(e,t,r,s){if(l)return Atomics.sub(u(r),e>>>s,t);{const i=u(r),n=e>>>s,o=i[n];return i[n]-=t,o}}function m(e,t,r,s){if(l)return Atomics.and(u(r),e>>>s,t);{const i=u(r),n=e>>>s,o=i[n];return i[n]&=t,o}}function g(e,t,r,s){if(l)return Atomics.or(u(r),e>>>s,t);{const i=u(r),n=e>>>s,o=i[n];return i[n]|=t,o}}function A(e,t,r,s){if(l)return Atomics.xor(u(r),e>>>s,t);{const i=u(r),n=e>>>s,o=i[n];return i[n]^=t,o}}function v(e,t,r,s){if(l)return Atomics.store(u(r),e>>>s,t);{const i=u(r),n=e>>>s,o=i[n];return i[n]=t,o}}function w(e,t,r){return l?Atomics.load(u(t),e>>>r):u(t)[e>>>r]}function y(e,t,r,s,i){if(l)return Atomics.compareExchange(u(s),e>>>i,t,r);{const n=u(s),o=e>>>i,a=n[o];return a===t&&(n[o]=r),a}}function b(e,t,r,s){if(l)return Atomics.exchange(u(r),e>>>s,t);{const i=u(r),n=e>>>s,o=i[n];return i[n]=t,o}}function _(e,t){return l?Atomics.notify(u(16),e>>>2,t):void 0}const k={ok:0,"not-equal":1,"timed-out":2};function x(e,t){return k[Atomics.wait(u(16),e>>>2,t)]}function I(e,t,r){return k[Atomics.wait(u(16),e>>>2,t,r)]}async function M(e,t){if(Atomics.waitAsync){const r=Atomics.waitAsync(u(16),e>>>2,t);return r.async?k[await r.value]:k[r.value]}if(w(e)!==t)return 1;for(;w(e)===t;)await new(i())((e=>{(0,o.A)((()=>{e()}))}));return 0}async function P(e,t,r){if(Atomics.waitAsync){const s=Atomics.waitAsync(u(16),e>>>2,t,r);return s.async?k[await s.value]:k[s.value]}if(w(e)!==t)return 1;{const s=(0,n.A)();for(;w(e)===t&&(0,n.A)()-s<r;)await new(i())((e=>{(0,o.A)((()=>{e()}))}));return w(e)!==t?0:2}}function C(e){u=e,(0,a.$Z)({add:f,sub:p,and:m,or:g,xor:A,store:v,load:w,compareExchange:y,exchange:b,notify:_,wait:x,waitTimeout:I,waitAsync:M,waitTimeoutAsync:P})}},42518:(e,t,r)=>{"use strict";r.d(t,{Ts:()=>l,XR:()=>A,mq:()=>m,uk:()=>g,vP:()=>p,zr:()=>f});var s,i,n=r(134),o=r(80662),a=r.n(o),c=r(61499),h=r(12085),d=r(73783),u=r(40046);function l(e,t){return u.M_(e,0,16,2),0}function f(e){return u.M_(e,0,16,2),0}function p(e){return u.WQ(e,1,16,2),u.me(e,1),0}function m(e){return u.WQ(e,1,16,2),u.me(e,1073741824),0}function g(e,t){let r=u.Hh(e,16,2);return d.Tl(t),u.uk(e,r),d.s2(t),0}function A(e,t,r){let s=u.Hh(e,16,2);d.Tl(t);let i=u.j4(e,s,r);return d.s2(t),2===i?110:0}s=class{constructor(){(0,n.A)(this,"atomic",void 0)}}.prototype,(i=new(a())).set("atomic",{0:16,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),(0,h.A)(s,c.Og,!0),(0,h.A)(s,c.dc,4),(0,h.A)(s,c.g7,4),(0,h.A)(s,c.JY,i)},81574:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var s=r(84149),i=(r(55013),r(10576)),n=r(67672);let o=i.TK;function a(e){let t,r;o.onmessage=a=>{const c=a.data,h=c.type,d=c.data;switch(h){case"init":if(i.TK.CHeap&&i.TK.CHeap.initThread&&i.TK.CHeap.Config.USE_THREADS)return void i.TK.CHeap.initThread(d).then((()=>{o.postMessage({type:"ready"})}));o.postMessage({type:"ready"});break;case"run":o.postMessage({type:"running"}),r=e(d.params),u=d.port,t=new s.Ay(u),t.on(s.S3,(async e=>{const s=e.method,i=e.params;if(n.Pc(r[s]))try{r[s].transfer||(r[s].transfer=[]);const n=await r[s](...i.params);t.reply(e,n,null,r[s].transfer),r[s].transfer.length=0}catch(r){t.reply(e,-2097152,{message:r.message})}}));break;case"stop":t&&t.destroy(),i.TK.__freeSmartPtr__&&i.TK.__freeSmartPtr__(),o.postMessage({type:"stopped"})}var u}}},26848:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var s=r(10576);let i=s.TK;function n(e){let t;i.onmessage=r=>{const n=r.data,o=n.type,a=n.data;switch(o){case"init":if(s.TK.CHeap&&s.TK.CHeap.initThread&&s.TK.CHeap.Config.USE_THREADS)return void s.TK.CHeap.initThread(a).then((()=>{i.postMessage({type:"ready"})}));i.postMessage({type:"ready"});break;case"run":t=e(a.params);break;case"stop":t&&t.then?t.then((e=>{s.TK.__freeSmartPtr__&&s.TK.__freeSmartPtr__(),i.postMessage({type:"stopped",data:e})})):(s.TK.__freeSmartPtr__&&s.TK.__freeSmartPtr__(),i.postMessage({type:"stopped",data:t}))}}}},67524:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var s=r(84149),i=(r(55013),r(10576)),n=r(67672);let o=i.TK;function a(e){let t;o.onmessage=r=>{const a=r.data,c=a.type,h=a.data;switch(c){case"init":if(i.TK.CHeap&&i.TK.CHeap.initThread&&i.TK.CHeap.Config.USE_THREADS)return void i.TK.CHeap.initThread(h).then((()=>{o.postMessage({type:"ready"})}));o.postMessage({type:"ready"});break;case"run":o.postMessage({type:"running"}),d=h.port,t=new s.Ay(d),t.on(s.S3,(async r=>{const s=r.method,i=r.params;if(n.Pc(e[s]))try{e[s].transfer||(e[s].transfer=[]);const n=await e[s](...i.params);t.reply(r,n,null,e[s].transfer),e[s].transfer.length=0}catch(e){t.reply(r,-2097152,{message:e.message})}}));break;case"stop":t&&t.destroy(),i.TK.__freeSmartPtr__&&i.TK.__freeSmartPtr__(),o.postMessage({type:"stopped"})}var d}}},73783:(e,t,r)=>{"use strict";r.d(t,{Tl:()=>g,Ts:()=>f,bh:()=>m,eu:()=>l,s2:()=>p,zr:()=>A});var s,i,n=r(134),o=r(80662),a=r.n(o),c=r(61499),h=r(12085),d=r(40046),u=r(39638);class l{constructor(){(0,n.A)(this,"atomic",void 0)}}function f(e){return d.M_(e,0,16,2),0}function p(e,t=!1){let r;if(0!==(r=d.p_(e,0,1,16,2)))do{2!=r&&0===d.p_(e,1,2,16,2)||!t&&(0,u.A)()&&d.uk(e,2)}while(0!==(r=d.p_(e,0,2,16,2)));return 0}function m(e){return 0===d.p_(e,0,1,16,2)?0:16}function g(e){return 1!==d.jb(e,1,16,2)&&(d.M_(e,0,16,2),d.me(e,1)),0}function A(e){return d.M_(e,0,16,2),0}s=l.prototype,(i=new(a())).set("atomic",{0:16,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),(0,h.A)(s,c.Og,!0),(0,h.A)(s,c.dc,4),(0,h.A)(s,c.g7,4),(0,h.A)(s,c.JY,i)},79490:(e,t,r)=>{"use strict";r.d(t,{Ts:()=>p,XR:()=>w,Zr:()=>v,bE:()=>g,uk:()=>A,zr:()=>m});var s,i,n=r(134),o=r(80662),a=r.n(o),c=r(61499),h=r(12085),d=r(73783),u=r(63939),l=r(50932),f=r(40046);function p(e,t){return f.M_(e,0|t,16,2),d.Ts(e+4),0}function m(e){return d.zr(e+4),0}function g(e){return f.WQ(e,1,16,2),f.me(e,1),0}function A(e){for(;f.uk(e,0),f.jb(e,1,16,2)<=0;)f.WQ(e,1,16,2);return 0}function v(e){return d.s2(e+4),u.f[16](e)>0?(l.M[16](e,u.f[16](e)-1),d.Tl(e+4),0):(d.Tl(e+4),11)}function w(e,t){return 2!==f.j4(e,0,t)&&f.jb(e,1,16,2)<=0?(f.WQ(e,1,16,2),110):0}s=class{constructor(){(0,n.A)(this,"atomic",void 0),(0,n.A)(this,"mutex",void 0)}}.prototype,(i=new(a())).set("atomic",{0:16,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),i.set("mutex",{0:d.eu,1:0,2:0,3:0,4:0,5:0,6:0,7:4,8:0}),(0,h.A)(s,c.Og,!0),(0,h.A)(s,c.dc,4),(0,h.A)(s,c.g7,8),(0,h.A)(s,c.JY,i)},88506:(e,t,r)=>{"use strict";r.d(t,{nE:()=>x,pt:()=>k});var s=r(75062),i=r.n(s),n=r(80662),o=r.n(n),a=r(54001),c=r.n(a),h=r(11473),d=r(84149),u=(r(55013),r(61837)),l=r(26429),f=r(67672),p=r(10576),m=r(62100),g=r(95073);let A=p.TK.Worker,v=p.TK.MessageChannel;r(81574),r(26848),r(67524);const w=(0,u.A)(81574,{varName:"init"}),y=((0,u.A)(26848,{varName:"init"}),(0,u.A)(67524,{varName:"init"}),i()("revoke")),b=new(o());function _(e,t){return`${e}_${t}`}function k(e,t,r){t=t||{},f.Pc(t)&&(r=t,t={});let s,i=[];function n(...t){const s=new e(...t);return new(c())((t=>{const i={$worker:null,$ipc:null,$channel:null,$moduleId:(0,m.A)(r),$stackPointer:0,$instance:s,$type:"class"},{proxy:n,revoke:o}=Proxy.revocable(i,{get(t,r,n){if(t[r])return i[r];if(r in e.prototype&&"function"==typeof e.prototype[r]){const e=function(...e){return s[r](...e)};e.transfer=function(...e){return{invoke:function(...e){return s[r](...e)}}},t[r]=e}return t[r]}});i[y]=o,t(n)}))}return s=(...s)=>{let n;if(f.Pc(r))n=r();else{let t;const s=_(r,"class");if(b.has(s))t=b.get(s).url,b.get(s).refCount++;else{const i=(0,u.A)(r,{varName:`__module_${e.name}__`,exportName:`__${e.name}__`,pointName:e.name,exportIsClass:!0}),n=`\n            self.CHEAP_DISABLE_THREAD = ${p.TK.CHEAP_DISABLE_THREAD}\n            self.CHEAP_HEAP_INITIAL = ${p.TK.CHEAP_HEAP_INITIAL}\n            self.CHEAP_HEAP_MAXIMUM = ${p.TK.CHEAP_HEAP_MAXIMUM}\n            ${p.TK.CHEAP_POLYFILL_URL?`self.CHEAP_POLYFILL_URL = '${p.TK.CHEAP_POLYFILL_URL}'`:""}\n            ${p.TK.CHEAP_POLYFILL_URL?`importScripts('${p.TK.CHEAP_POLYFILL_URL}');`:""}\n            ${i}\n            function run(params) {\n              params.unshift(null)\n              return new (Function.prototype.bind.apply(__module_${e.name}__.__${e.name}__, params))()\n            }\n            ${w}\n            init.default(run);\n          `;{const e=new Blob([n],{type:"text/javascript"});t=URL.createObjectURL(e)}b.set(s,{url:t,refCount:1})}n=new A(t)}const o=new v;return new(c())(((a,c)=>{var u;const f=l.USE_THREADS?h.s_.alignedAlloc(l.STACK_ALIGNMENT,t.stackSize?(0,g.A)(t.stackSize,l.STACK_ALIGNMENT):l.STACK_SIZE):0;n.onmessage=t=>{const c=t.data,h=c.type;switch(c.data,h){case"ready":n.postMessage({type:"run",data:{port:o.port2,params:s}},[o.port2,...i]);break;case"running":!function(){const t=new d.Ay(o.port1),s={$worker:n,$ipc:t,$channel:o,$moduleId:(0,m.A)(r),$stackPointer:f,$type:"class"},{proxy:i,revoke:c}=Proxy.revocable(s,{get(r,i,n){if(r[i])return s[i];if(i in e.prototype&&"function"==typeof e.prototype[i]){const e=async function(...e){return t.request(i,{params:e})};e.transfer=function(...e){return{invoke:async function(...r){return t.request(i,{params:r},e)}}},r[i]=e}return r[i]}});s[y]=c,a(i)}()}},n.postMessage({type:"init",data:{memory:l.USE_THREADS?h.ce:null,name:t.name||e.name,stackPointer:f,stackSize:null!==(u=t.stackSize)&&void 0!==u?u:l.STACK_SIZE}})}))},{run:!l.USE_THREADS&&!t.dispatchToWorker||t.disableWorker?n:s,transfer:function(...e){return i=e,{run:!l.USE_THREADS&&!t.dispatchToWorker||t.disableWorker?n:s}}}}function x(e){if(e.$worker&&(e.$worker.terminate(),e.$worker=null),e.$moduleId){if(f.Yj(e.$moduleId)){const t=_(e.$moduleId,e.$type);b.has(t)&&(b.get(t).refCount--,0===b.get(t).refCount&&(URL.revokeObjectURL(b.get(t).url),b.delete(t)))}e.$moduleId=null}if(e.$ipc&&(e.$ipc.destroy(),e.$ipc=null),e.$stackPointer&&(h.s_.free(e.$stackPointer),e.$stackPointer=0),e.$channel=null,e.$instance=null,e[y]){const t=e[y];e[y]=null,t()}}},6704:(e,t,r)=>{"use strict";r.d(t,{_:()=>i,i:()=>s});const s={2:1,3:1,4:1,5:1,6:2,7:2,8:4,9:4,10:8,11:1,12:1,13:2,14:2,15:4,16:4,17:8,18:4,19:8,20:4,0:4,1:4,22:8,21:8,23:1,24:1,25:4},i={2:0,3:0,4:0,5:0,6:1,7:1,8:2,9:2,10:4,11:0,12:0,13:1,14:1,15:2,16:2,17:4,18:2,19:4,20:2,1:2,0:2,22:4,21:4,23:0,24:0,25:2}},19094:(e,t,r)=>{"use strict";r.d(t,{A:()=>p});var s=r(134),i=r(54001),n=r.n(i),o=r(11473),a=r(63939),c=r(50932),h=r(26429),d=r(14686),u=r(42518),l=r(73783),f=r(40046);class p{constructor(e,t){(0,s.A)(this,"count",void 0),(0,s.A)(this,"url",void 0),(0,s.A)(this,"childThreads",void 0),this.count=e,this.url=t,this.childThreads=[]}async createTheadPoolEntry(e){return new(n())(((t,r)=>{const s=new Worker(this.url),i=o.s_.alignedAlloc(h.STACK_ALIGNMENT,h.STACK_SIZE),n=o.s_.malloc(8);(0,d.sO)(n,0,8),c.M[15](n+4,0),c.M[15](n,2|a.f[15](n));const f=(0,o.pv)();s.onmessage=e=>{if("ready"===e.data.type){const e=i;(0,d.sO)(e,0,20),l.Ts(e+16),u.Ts(e+12),s.postMessage({type:"wait"}),t({id:f,thread:{thread:0,worker:s,stackPointer:i,threadDescriptor:n},threadWait:e})}},s.postMessage({type:"ready",data:{cheap:{memory:o.ce,stackPointer:i,stackSize:h.STACK_SIZE,id:f},runner:{resource:{tableSize:e.tableSize,module:e.module,initFuncs:e.initFuncs},options:{memoryBase:e.memoryBase,tableBase:e.tableBase,threadDescriptor:n,childImports:e.childImports},imports:e.childImports}}})}))}async ready(e){this.childThreads=await n().all(new Array(this.count).fill(0).map((()=>this.createTheadPoolEntry(e))))}hasFree(){for(let e=0;e<this.childThreads.length;e++)if(0===a.f[15](this.childThreads[e].thread.threadDescriptor+4))return!0;return!1}isPoolThread(e){for(let t=0;t<this.childThreads.length;t++)if(this.childThreads[t].thread.thread===e)return!0;return!1}createThread(e,t,r,s){for(let t=0;t<this.childThreads.length;t++)if(0===a.f[15](this.childThreads[t].thread.threadDescriptor+4))return c.M[15](this.childThreads[t].thread.threadDescriptor+4,1),this.childThreads[t].thread.thread=e,c.M[15](e+8,2|a.f[15](e+8)),l.s2(this.childThreads[t].threadWait+16),c.M[20](this.childThreads[t].threadWait,e),c.M[20](this.childThreads[t].threadWait+4,r),c.M[20](this.childThreads[t].threadWait+8,s),l.Tl(this.childThreads[t].threadWait+16),void u.vP(this.childThreads[t].threadWait+12)}joinThread(e,t){let r;for(let t=0;t<this.childThreads.length;t++)if(this.childThreads[t].thread.thread===e){r=this.childThreads[t];break}return r?(1&a.f[15](e+8)||(f.uk(e+12,1),0!==t&&c.M[20](t,a.f[20](e+4)),c.M[15](r.thread.threadDescriptor+4,0)),0):-1}detachThread(e){let t;for(let r=0;r<this.childThreads.length;r++)if(this.childThreads[r].thread.thread===e){t=this.childThreads[r];break}return t?(c.M[15](t.thread.threadDescriptor,1|a.f[15](t.thread.threadDescriptor)),c.M[15](e+8,1|a.f[15](e+8)),0):-1}destroy(){for(let e=0;e<this.childThreads.length;e++)o.s_.free(this.childThreads[e].thread.stackPointer),o.s_.free(this.childThreads[e].thread.threadDescriptor),this.childThreads[e].thread.worker.terminate();this.childThreads=[]}}},16030:(e,t,r)=>{"use strict";r.d(t,{A:()=>L});var s=r(134),i=r(80662),n=r.n(i),o=r(54001),a=r.n(o),c=r(63939),h=r(50932),d=r(11473),u=r(95335),l=r(72739),f=r(4624),p=r(67672),m=r(14686),g=r(14621),A=r(1708),v=r(20357),w=r(77775),y=r(26429),b=r(40046),_=r(82854),k=r(80905),x=r(24565),I=r(19094),M=r(42518),P=r(73783),C=r(95797),E=(r(81999),r(10576)),T=r(61837);const B="src/cheap/webassembly/WebAssemblyRunner.ts";let S=E.TK.Worker;function U(){}let D=!1;class L{static getTable(){return d.XI}static mutexLock(e){P.s2(e)}static mutexUnlock(e){P.Tl(e)}static condWait(e,t){M.uk(e,t)}static readPointer(e){return c.f[20](e)}static writePointer(e,t){h.M[20](e,t)}constructor(e,t={}){var r,i;(0,s.A)(this,"resource",void 0),(0,s.A)(this,"instance",void 0),(0,s.A)(this,"options",void 0),(0,s.A)(this,"builtinMalloc",void 0),(0,s.A)(this,"memoryBase",void 0),(0,s.A)(this,"tableBase",void 0),(0,s.A)(this,"childImports",void 0),(0,s.A)(this,"childUrl",void 0),(0,s.A)(this,"childBlob",void 0),(0,s.A)(this,"childThreads",void 0),(0,s.A)(this,"imports",void 0),(0,s.A)(this,"childReadyPromises",void 0),(0,s.A)(this,"threadPool",void 0),(0,s.A)(this,"initCalling",void 0),(0,s.A)(this,"promisingMap",void 0),this.resource=e,this.builtinMalloc=[],this.initCalling=!1,this.childThreads=new(n()),this.childReadyPromises=[],this.promisingMap=new(n()),p.Yj(t.childImports)?this.childImports=t.childImports:p.Ik(t.childImports)&&t.childImports instanceof Blob&&(this.childImports=URL.createObjectURL(t.childImports)),this.memoryBase=e.dataSize?d.s_.alignedAlloc(null!==(r=e.dataAlign)&&void 0!==r?r:8,e.dataSize):0,this.memoryBase&&e.bssSize&&(0,m.sO)(this.memoryBase+(e.dataSize-e.bssSize),0,e.bssSize),t.thread&&t.tableBase&&d.XI.getPointer()!==t.tableBase&&d.XI.alloc(t.tableBase-d.XI.getPointer()),this.tableBase=e.tableSize?d.XI.alloc(e.tableSize):0,this.options=t,this.imports={env:{memory:d.ce,__stack_pointer:d.GE,__indirect_function_table:d.XI.table,clock_time_get:g.WU,clock_res_get:g.Lq,random_get:g.Pp,abort:g.h2,proc_exit:function(e){f.z3(`wasm module exit, code: ${e}`,B,158)},__syscall_renameat:U,__syscall_unlinkat:U,environ_get:g.B,environ_sizes_get:g.CK,fd_close:U,fd_fdstat_get:g.LS,fd_read:U,fd_seek:U,fd_write:g.nK,emscripten_builtin_malloc:e=>{const t=d.s_.malloc(e);return this.builtinMalloc.push(t),t},emscripten_builtin_free:e=>{d.s_.free(e)},emscripten_builtin_memalign:(e,t,r)=>{const s=d.s_.alignedAlloc(t,r);return 0!==s?(h.M[20](e,s),this.builtinMalloc.push(s),0):-1},emscripten_memcpy_big:function(e,t,r){(0,m.Mr)(e,t,r)},__libc_malloc:function(e){return d.s_.malloc(e)},__libc_free:e=>{d.s_.free(e)},malloc:e=>{if(!0===this.initCalling){const t=d.s_.malloc(e);return this.builtinMalloc.push(t),t}return d.s_.malloc(e)},calloc:function(e,t){return d.s_.calloc(e,t)},realloc:function(e,t){return d.s_.realloc(e,t)},aligned_alloc:(e,t)=>d.s_.alignedAlloc(e,t),free:function(e){d.s_.free(e)},posix_memalign:function(e,t,r){const s=d.s_.alignedAlloc(t,r);return 0!==s?(h.M[20](e,s),0):-1},memalign:function(e,t){return d.s_.alignedAlloc(e,t)}},"GOT.func":{malloc:new WebAssembly.Global({mutable:!0,value:"i32"},2),calloc:new WebAssembly.Global({mutable:!0,value:"i32"},3),realloc:new WebAssembly.Global({mutable:!0,value:"i32"},4),aligned_alloc:new WebAssembly.Global({mutable:!0,value:"i32"},5),free:new WebAssembly.Global({mutable:!0,value:"i32"},1)}};{const e=(e,t,r,s)=>{if(this.threadPool&&this.threadPool.hasFree())return this.threadPool.createThread(e,t,r,s),0;this.childUrl||this.createChildUrl();const i=new S(this.childUrl);h.M[15](e,(0,d.pv)()),h.M[16](e+12,1),h.M[15](e+8,0),h.M[20](e+4,0);const n=d.s_.alignedAlloc(y.STACK_ALIGNMENT,y.STACK_SIZE),o=d.s_.malloc(8);let u;(0,m.sO)(o,0,8),this.childThreads.set(c.f[15](e),{thread:e,worker:i,stackPointer:n,threadDescriptor:o});const l=new(a())((e=>{u=e}));C.A.jspi||this.childReadyPromises.push(l);return i.onmessage=e=>{const t=e.data,r=t.type;t.data,"run"===r&&u(0)},i.postMessage({type:"run",data:{cheap:{memory:d.ce,stackPointer:n,stackSize:y.STACK_SIZE,id:c.f[15](e)},runner:{resource:{tableSize:this.resource.tableSize,module:this.resource.threadModule.module,initFuncs:this.resource.threadModule.initFuncs},options:{memoryBase:this.options.memoryBase||this.memoryBase,tableBase:this.tableBase,thread:e,threadDescriptor:o,childImports:this.childImports},func:r,args:s,imports:this.childImports,thread:e}}}),C.A.jspi?l:0};u.X$(this.imports.env,{wasm_pthread_create:C.A.jspi?new WebAssembly.Suspending(e):e,wasm_pthread_join2:(e,t)=>{if(this.threadPool&&this.threadPool.isPoolThread(e))return this.threadPool.joinThread(e,t),0;if(1&c.f[15](e+8))return this.childThreads.delete(c.f[15](e)),0;b.uk(e+12,1),0!==t&&h.M[20](t,c.f[20](e+4));const r=this.childThreads.get(c.f[15](e));return d.s_.free(r.stackPointer),d.s_.free(r.threadDescriptor),r.worker.terminate(),this.childThreads.delete(c.f[15](e)),(0,m.sO)(e,0,16),0},wasm_pthread_detach2:e=>{if(this.threadPool&&this.threadPool.isPoolThread(e))return this.threadPool.detachThread(e),0;const t=this.childThreads.get(c.f[15](e));h.M[15](t.threadDescriptor,1|c.f[15](t.threadDescriptor)),h.M[15](e+8,1|c.f[15](e+8))}}),u.X$(this.imports.env,A),u.X$(this.imports.env,v),u.X$(this.imports.env,w)}if(this.memoryBase?u.X$(this.imports.env,{__memory_base:this.memoryBase}):t.memoryBase&&u.X$(this.imports.env,{__memory_base:t.memoryBase}),this.tableBase&&u.X$(this.imports.env,{__table_base:this.tableBase}),null!==(i=t.imports)&&void 0!==i&&i.env&&(u.X$(this.imports.env,t.imports.env),t.envKey&&t.importMap)){const e={};u.__(this.imports.env,((r,s)=>{t.importMap[s]&&(e[t.importMap[s]]=r)})),this.imports[t.envKey]=e}this.imports.wasi_snapshot_preview1=this.imports.env}createChildUrl(){{let e="";{r(81999);const t=(0,T.A)(16030,{varName:"__WebAssemblyRunner__",exportName:"__WebAssemblyRunner__",pointName:L.name,exportIsClass:!0}),s=(0,T.A)(81999,{varName:"runThread"});let i="",n="";this.childImports&&(i=`importScripts('${this.childImports}');`),E.TK.CHEAP_POLYFILL_URL&&(n=`importScripts('${E.TK.CHEAP_POLYFILL_URL}');`),e=`\n          ${t}\n          ${s}\n          self.imports = {env:{}};\n          ${n}\n          ${i}\n          runThread.default();\n        `}this.childBlob=new Blob([e],{type:"text/javascript"}),this.childUrl=URL.createObjectURL(this.childBlob)}}overrideAtomic(){A.override({atomic_add_i8:_.KJ.exports.add8,atomic_sub_i8:_.KJ.exports.sub8,atomic_and_i8:_.KJ.exports.and8,atomic_or_i8:_.KJ.exports.or8,atomic_xor_i8:_.KJ.exports.xor8,atomic_store_i8:_.KJ.exports.store8,atomic_load_i8:_.KJ.exports.load8,atomic_compare_exchange_i8:_.KJ.exports.compare_exchange8,atomic_exchange_i8:_.KJ.exports.exchange8,atomic_add_i16:_.KJ.exports.add16,atomic_sub_i16:_.KJ.exports.sub16,atomic_and_i16:_.KJ.exports.and16,atomic_or_i16:_.KJ.exports.or16,atomic_xor_i16:_.KJ.exports.xor16,atomic_store_i16:_.KJ.exports.store16,atomic_load_i16:_.KJ.exports.load16,atomic_compare_exchange_i16:_.KJ.exports.compare_exchange16,atomic_exchange_i16:_.KJ.exports.exchange16,atomic_add_i32:_.KJ.exports.add32,atomic_sub_i32:_.KJ.exports.sub32,atomic_and_i32:_.KJ.exports.and32,atomic_or_i32:_.KJ.exports.or32,atomic_xor_i32:_.KJ.exports.xor32,atomic_store_i32:_.KJ.exports.store32,atomic_load_i32:_.KJ.exports.load32,atomic_compare_exchange_i32:_.KJ.exports.compare_exchange32,atomic_exchange_i32:_.KJ.exports.exchange32,atomic_add_i64:_.KJ.exports.add64,atomic_sub_i64:_.KJ.exports.sub64,atomic_and_i64:_.KJ.exports.and64,atomic_or_i64:_.KJ.exports.or64,atomic_xor_i64:_.KJ.exports.xor64,atomic_store_i64:_.KJ.exports.store64,atomic_load_i64:_.KJ.exports.load64,atomic_compare_exchange_i64:_.KJ.exports.compare_exchange64,atomic_exchange_i64:_.KJ.exports.exchange64,atomics_notify:_.KJ.exports.notify,atomics_wait:_.KJ.exports.wait}),u.X$(this.imports.env,A)}async run(e,t){if(p.Ik(e)&&u.X$(this.options.imports,e),x.Ko()&&this.resource.threadModule&&(x.LK||x.Ts(d.ce,y.HEAP_INITIAL,y.HEAP_MAXIMUM,v.override),u.X$(this.imports.env,v)),!k.LK&&k.Ko()&&k.Ts(d.ce,y.HEAP_INITIAL,y.HEAP_MAXIMUM),!D&&_.Ko()&&(D=!0,this.overrideAtomic()),this.instance=await WebAssembly.instantiate(this.resource.module,this.imports),this.initRunTime(),this.resource.threadModule&&this.resource.enableThreadPool&&t>0&&!C.A.jspi){this.childUrl||this.createChildUrl();let e=t;this.resource.enableThreadCountRate&&(e*=this.resource.enableThreadCountRate),this.threadPool=new I.A(e,this.childUrl),await this.threadPool.ready({tableSize:this.resource.tableSize,module:this.resource.threadModule.module,initFuncs:this.resource.threadModule.initFuncs,memoryBase:this.options.memoryBase||this.memoryBase,tableBase:this.tableBase,childImports:this.childImports})}}runAsChild(e){p.Ik(e)&&u.X$(this.options.imports,e),x.Ko()&&(x.LK||x.Ts(d.ce,y.HEAP_INITIAL,y.HEAP_MAXIMUM,v.override),u.X$(this.imports.env,v)),!D&&_.Ko()&&(D=!0,this.overrideAtomic()),this.instance=new WebAssembly.Instance(this.resource.module,this.imports),this.initRunTime()}async childThreadsReady(){if(!this.childReadyPromises.length)return;const e=this.childReadyPromises;this.childReadyPromises=[],await a().all(e)}initRunTime(){this.builtinMalloc=[],this.initCalling=!0,p.YO(this.resource.initFuncs)&&l.__(this.resource.initFuncs,(e=>{let t;if(this.asm[e]&&(t=this.asm[e]),t)return t()})),this.initCalling=!1}invoke(e,...t){if(!this.asm)return-1;let r;if(this.asm[e]?r=this.asm[e]:this.options.exportMap&&this.options.exportMap[e]&&this.asm[this.options.exportMap[e]]&&(r=this.asm[this.options.exportMap[e]]),r)return r.apply(null,t);f.z3(`the wasm module has not function ${e} to call`,B,676)}async invokeAsync(e,...t){if(!this.asm)return-1;if(!C.A.jspi)return this.invoke(e,...t);let r;if(this.promisingMap.has(e)?r=this.promisingMap.get(e):(this.asm[e]?r=this.asm[e]:this.options.exportMap&&this.options.exportMap[e]&&this.asm[this.options.exportMap[e]]&&(r=this.asm[this.options.exportMap[e]]),r=WebAssembly.promising(r),this.promisingMap.set(e,r)),r)return r.apply(null,t);f.z3(`the wasm module has not function ${e} to call`,B,717)}get asm(){return this.instance&&this.instance.exports}getInstance(){return this.instance}getChildThreadCount(){return this.childThreads.size}destroy(){var e;null!==(e=this.builtinMalloc)&&void 0!==e&&e.length&&(l.__(this.builtinMalloc,(e=>{d.s_.free(e)})),this.builtinMalloc.length=0),this.memoryBase&&(d.s_.free(this.memoryBase),this.memoryBase=null),this.tableBase&&(d.XI.free(this.tableBase),this.tableBase=0),this.childImports&&(URL.revokeObjectURL(this.childImports),this.childImports=null),this.childUrl&&(URL.revokeObjectURL(this.childUrl),this.childUrl=null),this.childBlob=null,this.childReadyPromises.length=0,this.childThreads.size&&this.childThreads.forEach(((e,t)=>{1&c.f[15](e.threadDescriptor)||(f.R8("has child thread running, maybe resource leakage",B,772),e.worker.terminate(),h.M[16](e.thread+12,0),e.stackPointer&&d.s_.free(e.stackPointer),d.s_.free(e.threadDescriptor),this.childThreads.delete(t))})),this.builtinMalloc=null,this.instance=null,this.options.thread&&(this.options.threadDescriptor&&h.M[15](this.options.threadDescriptor+4,0),this.options.threadDescriptor&&(1&c.f[15](this.options.threadDescriptor)||4&c.f[15](this.options.thread+8))?2&c.f[15](this.options.threadDescriptor)||(d.wE&&d.s_.free(d.wE),d.s_.free(this.options.threadDescriptor),(0,m.sO)(this.options.thread,0,16),self.close()):(h.M[16](this.options.thread+12,0),b.me(this.options.thread+12,1))),this.threadPool&&this.threadPool.destroy(),this.threadPool=null,this.promisingMap&&(this.promisingMap.clear(),this.promisingMap=null)}}},76045:(e,t,r)=>{"use strict";r.d(t,{A:()=>g});var s=r(54001),i=r.n(s),n=r(67672),o=r(24175),a=r(34531),c=r(88096),h=r(92647),d=r(95335),u=r(26429),l=r(86834),f=r(44690),p=r(729),m=r(4304);async function g(e,t={}){let r,s,g,A,v,w,y;if(t=d.X$({enableThread:u.USE_THREADS,initFuncs:t.child?[]:["__wasm_apply_data_relocs","_initialize"]},t),n.ai(e.dataSize)&&n.ai(e.tableSize))if(s=e.dataSize,A=e.dataSize,g=e.dataAlign,v=e.dataAlign,w=e.bssSize,n.Yj(e.source)){const t={method:"GET",headers:{},mode:"cors",cache:"default",referrerPolicy:"no-referrer-when-downgrade"};if(n.Pc(WebAssembly.compileStreaming))r=await WebAssembly.compileStreaming(fetch(e.source,t));else{const s=await fetch(e.source,t);y=await s.arrayBuffer(),r=await WebAssembly.compile(y)}}else r=await WebAssembly.compile(e.source),y=n.sv(e.source)?e.source:e.source.buffer;else{const d={ioReader:new o.A(1048576),ioWriter:new a.A(1048576),bufferEnded:!1,compileStopped:!1,error:"",abortController:null,pullResolve:null,bufferResolve:null,buffers:[],data:{},options:t},m=new Response(new ReadableStream({async start(t){if(n.Yj(e.source)){var r;"function"==typeof AbortController&&(d.abortController=new AbortController);const s={method:"GET",headers:{},mode:"cors",cache:"default",referrerPolicy:"no-referrer-when-downgrade",signal:null===(r=d.abortController)||void 0===r?void 0:r.signal},i=await fetch(e.source,s);let n;i.ok&&i.status>=200&&i.status<=299?n=i.body.getReader():t.error(`Http code invalid, ${i.status} ${i.statusText}`);const o=[];d.ioReader.onFlush=async e=>{let t=0;for(;o.length&&t<e.length;){const r=o.shift();r.length>e.length-t?(e.set(r.subarray(0,e.length-t),t),o.unshift(r.subarray(e.length-t)),t=e.length):(e.set(r,t),t+=r.length)}if(t>=e.length)return e.length;const{value:r,done:s}=await n.read();return s?t>0?t:-1048576:(d.buffers.push(r),r.length>e.length-t?(e.set(r.subarray(0,e.length-t),t),o.push(r.subarray(e.length-t)),e.length):(e.set(r,t),t+=r.length,t))}}else{let t=0,r=e.source.byteLength;const s=n.sv(e.source)?new Uint8Array(e.source):e.source;d.ioReader.onFlush=async e=>{if(t>=r)return-1048576;const i=Math.min(e.length,r-t);return e.set(s.subarray(t,t+i),0),t+=i,i}}d.ioWriter.onFlush=async e=>{if(d.pullResolve)return d.pullResolve(e.slice()),d.pullResolve=null,0;const t=await new(i())((e=>{d.bufferResolve=e}));return t.enqueue(e.slice()),d.bufferEnded&&t.close(),0},async function(e){try{for(await e.ioWriter.writeUint32(await e.ioReader.readUint32()),await e.ioWriter.writeUint32(await e.ioReader.readUint32());;){if(e.compileStopped){e.abortController&&e.abortController.abort();break}const t=await e.ioReader.readUint8();if(e.options.child&&11===t){await e.ioWriter.writeUint8(t),await(0,c.$z)(e.ioWriter,7),await(0,c.$z)(e.ioWriter,1),await(0,c.$z)(e.ioWriter,0),await e.ioWriter.writeUint8(65),await e.ioWriter.writeUint8(0),await e.ioWriter.writeUint8(11),await(0,c.$z)(e.ioWriter,1),await e.ioWriter.writeUint8(0);const r=await(0,c.GW)(e.ioReader);await e.ioReader.skip(r);continue}await e.ioWriter.writeUint8(t);const r=await(0,c.GW)(e.ioReader),s=e.ioReader.getPos();if(0===t){await(0,c.$z)(e.ioWriter,r);const t=e.ioReader.getPos(),s=await(0,c.GW)(e.ioReader),i=await e.ioReader.readString(s);if(await(0,c.$z)(e.ioWriter,s),await e.ioWriter.writeString(i),"dylink.0"===i){const s=e.ioReader.getPos()+(BigInt(Math.floor(r))-(e.ioReader.getPos()-t));for(;e.ioReader.getPos()<s;){const t=await e.ioReader.readUint8();await e.ioWriter.writeUint8(t);const r=await(0,c.GW)(e.ioReader);await(0,c.$z)(e.ioWriter,r),1===t?(e.data.dataSize=await(0,c.GW)(e.ioReader),e.data.dataAlign=await(0,c.GW)(e.ioReader),e.data.tableSize=await(0,c.GW)(e.ioReader),e.data.tableAlign=await(0,c.GW)(e.ioReader),await(0,c.$z)(e.ioWriter,e.data.dataSize),await(0,c.$z)(e.ioWriter,e.data.dataAlign),await(0,c.$z)(e.ioWriter,e.data.tableSize),await(0,c.$z)(e.ioWriter,e.data.tableAlign)):await e.ioWriter.writeBuffer(await e.ioReader.readBuffer(r))}}}else if(11===t){await(0,c.$z)(e.ioWriter,r);const t=await(0,c.GW)(e.ioReader);if(await(0,c.$z)(e.ioWriter,t),t){for(await(0,c.$z)(e.ioWriter,await(0,c.GW)(e.ioReader));;){const t=await e.ioReader.readUint8();if(await e.ioWriter.writeUint8(t),11===t)break}const t=await(0,c.GW)(e.ioReader);e.data.dataSize?e.data.bssSize=e.data.dataSize-t:e.data.dataSize=t,await(0,c.$z)(e.ioWriter,t)}}else if(2===t){const t=new p.A(new Uint8Array(r+100));let i=await(0,c.GW)(e.ioReader);(0,c.tt)(t,i);let n=0;for(;i--;){const r=await(0,c.GW)(e.ioReader);(0,c.tt)(t,r),t.writeBuffer(await e.ioReader.readBuffer(r));const s=await(0,c.GW)(e.ioReader);(0,c.tt)(t,s),t.writeBuffer(await e.ioReader.readBuffer(s));const i=await e.ioReader.readUint8();switch(t.writeUint8(i),i){case 0:(0,c.tt)(t,await(0,c.GW)(e.ioReader));break;case 3:(0,c.p2)(t,await(0,c.WP)(e.ioReader)),(0,c.tt)(t,await(0,c.GW)(e.ioReader));break;case 2:{let r=await(0,c.GW)(e.ioReader);e.options.enableThread?r|=2:r&=-3,(0,c.tt)(t,r);const s=await(0,c.GW)(e.ioReader);if((0,c.tt)(t,u.HEAP_INITIAL||s),1&r){let r=await(0,c.GW)(e.ioReader);f.A.ios&&!l.A.checkVersion(f.A.version,"17",!0)&&e.options.enableThread||(r=u.HEAP_MAXIMUM),(0,c.tt)(t,r)}n++;break}case 1:{(0,c.p2)(t,await(0,c.WP)(e.ioReader));const r=await(0,c.GW)(e.ioReader);(0,c.tt)(t,r);const s=await(0,c.GW)(e.ioReader);(0,c.tt)(t,s),e.data.tableSize=s,1&r&&(0,c.tt)(t,await(0,c.GW)(e.ioReader)),n++;break}}if(2===n)break}const o=t.getWroteBuffer(),a=r-Number(e.ioReader.getPos()-s);await(0,c.$z)(e.ioWriter,o.length+a),await e.ioWriter.writeBuffer(o)}else await(0,c.$z)(e.ioWriter,r);r-Number(e.ioReader.getPos()-s)&&await e.ioReader.pipe(e.ioWriter,r-Number(e.ioReader.getPos()-s))}}catch(t){-1048576===e.ioReader.error?e.bufferEnded=!0:e.error=t,e.ioReader.remainingLength()&&await e.ioWriter.writeBuffer(await e.ioReader.readBuffer(e.ioReader.remainingLength())),await e.ioWriter.flush()}}(d)},async pull(e){if(d.error)e.close();else{if(d.bufferResolve)return d.bufferResolve(e),void(d.bufferResolve=null);e.enqueue(await new(i())(((e,t)=>{d.pullResolve=e}))),d.bufferEnded?e.close():d.error&&e.error(d.error)}},cancel(e){d.compileStopped=!0}}),{headers:{"Content-Type":"application/wasm"}});r=n.Pc(WebAssembly.compileStreaming)?await WebAssembly.compileStreaming(m):await WebAssembly.compile(await m.arrayBuffer()),y=n.Yj(e.source)?(0,h.A)(Uint8Array,d.buffers).buffer:n.sv(e.source)?e.source:e.source.buffer,s=d.data.tableSize,A=d.data.dataSize,g=d.data.tableAlign,v=d.data.dataAlign,w=d.data.bssSize}return t.child?{module:r,initFuncs:t.initFuncs||[],tableSize:0,tableAlign:g||0,dataSize:1,dataAlign:v?Math.max((0,m.A)(v),8):8,bssSize:0,buffer:y}:{module:r,tableSize:s,tableAlign:g||0,dataSize:A,dataAlign:v?Math.max((0,m.A)(v),8):8,bssSize:w||0,initFuncs:t.initFuncs||[],buffer:y}}},81999:(e,t,r)=>{"use strict";function s(){let e;e=__WebAssemblyRunner__?__WebAssemblyRunner__.__WebAssemblyRunner__:__CHeap_WebAssemblyRunner__.default;let t,r,s=self,i=0;s.onmessage=n=>{const o=n.data,a=o.type,c=o.data;switch(a){case"run":s.postMessage({type:"run"}),self.CHeap&&self.CHeap.initThread&&self.CHeap.initThread(c.cheap).then((()=>{self.__SELF_THREAD__=c.runner.thread,c.runner.options.imports=self.imports,t=new e(c.runner.resource,c.runner.options),t.runAsChild(),e.getTable().get(c.runner.func)(c.runner.args),t.destroy()}));break;case"ready":r=c.runner,i=c.cheap.stackPointer,self.CHeap&&self.CHeap.initThread&&self.CHeap.initThread(c.cheap).then((()=>{s.postMessage({type:"ready"})}));break;case"wait":{async function h(){for(;;){for(e.mutexLock(i+16);0===e.readPointer(i);)e.condWait(i+12,i+16);self.__SELF_THREAD__=e.readPointer(i),r.options.thread=e.readPointer(i),r.thread=e.readPointer(i),r.func=e.readPointer(i+4),r.args=e.readPointer(i+8),t=new e(r.resource,r.options),t.runAsChild(),e.getTable().get(r.func)(r.args),t.destroy(),e.writePointer(i,0),e.mutexUnlock(i+16)}}r.options.imports=self.imports,h();break}}}}r.r(t),r.d(t,{default:()=>s})},91808:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});const s="AGFzbQEAAAABEANgAX8Bf2ABfwBgAn9/AX8CWQYDZW52Bm1lbW9yeQIDAYCABANlbnYGbWFsbG9jAAADZW52BGZyZWUAAQNlbnYGY2FsbG9jAAIDZW52B3JlYWxsb2MAAgNlbnYNYWxpZ25lZF9hbGxvYwACAwYFAAECAgIHMwUGbWFsbG9jAAUEZnJlZQAGBmNhbGxvYwAHB3JlYWxsb2MACAxhbGlnbmVkQWxsb2MACQoqBQYAIAAQAAsGACAAEAELCAAgACABEAILCAAgACABEAMLCAAgACABEAML"},80905:(e,t,r)=>{"use strict";r.d(t,{Ko:()=>u,LK:()=>h,Ts:()=>l});var s=r(11473),i=r(4919),n=r(4624),o=r(91808),a=r(88096);const c="src/cheap/webassembly/runtime/asm/libc.ts";let h,d=!0;function u(){return d}function l(e,t,r){try{const n=a.bx((0,i.E_)(o.A),{shared:"function"==typeof SharedArrayBuffer&&e.buffer instanceof SharedArrayBuffer,initial:t,maximum:r});h=new WebAssembly.Instance(new WebAssembly.Module(n),{env:{memory:e,malloc:function(e){return s.s_.malloc(e)},calloc:function(e,t){return s.s_.calloc(e,t)},realloc:function(e,t){return s.s_.realloc(e,t)},aligned_alloc:(e,t)=>s.s_.alignedAlloc(e,t),free:function(e){s.s_.free(e)}}}),s.XI.set(2,h.exports.malloc),s.XI.set(1,h.exports.free),s.XI.set(3,h.exports.calloc),s.XI.set(4,h.exports.realloc),s.XI.set(5,h.exports.alignedAlloc)}catch(e){d=!1,n.R8("libc asm not support, cannot use asm thread function",c,60)}}},60:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});const s="AGFzbQEAAAABEwNgAX8Bf2ACf38Bf2ADf39/AX8CEgEDZW52Bm1lbW9yeQIDAYCABAMIBwAAAAECAAAHQwcEbG9jawAAB3RyeWxvY2sAAQZ1bmxvY2sAAgR3YWl0AAMJdGltZWR3YWl0AAQGc2lnbmFsAAUJYnJvYWRjYXN0AAYKnAIHVgEBfyAAQQBBAf5IAgAhASABQQBHBEADQCABQQJGBH9BAQUgAEEBQQL+SAIAQQBHCwRAIABBAkJ//gECABoLIABBAEEC/kgCACEBIAFBAEcNAAsLQQALFwAgAEEAQQH+SAIAQQBGBH9BAAVBEAsLIwAgAEEB/iUCAEEBRwRAIABBAP4XAgAgAEEB/gACABoLQQALHQAgACAA/hACACABEAIaQn/+AQIAGiABEAAaQQALNwAgACAA/hACACABEAIaIAIpAwBCgJTr3AN+IAIoAgitfP4BAgAgARAAGkECRgR/QfAABUEACwsWACAAQQH+HgIAGiAAQQH+AAIAGkEACxoAIABBAf4eAgAaIABBgICAgAT+AAIAGkEACw=="},24565:(e,t,r)=>{"use strict";r.d(t,{Ko:()=>d,LK:()=>c,Ts:()=>u});var s=r(4919),i=r(4624),n=r(60),o=r(88096);const a="src/cheap/webassembly/runtime/asm/thread.ts";let c,h=!0;function d(){return h}function u(e,t,r,d){try{if(!("function"==typeof SharedArrayBuffer&&e.buffer instanceof SharedArrayBuffer))return void(h=!1);{const i=o.bx((0,s.E_)(n.A),{shared:!0,initial:t,maximum:r});c=new WebAssembly.Instance(new WebAssembly.Module(i),{env:{memory:e}})}d({wasm_pthread_mutex_lock:c.exports.lock,wasm_pthread_mutex_trylock:c.exports.trylock,wasm_pthread_mutex_unlock:c.exports.unlock,wasm_pthread_cond_wait:c.exports.wait,wasm_pthread_cond_timedwait:c.exports.timedwait,wasm_pthread_cond_signal:c.exports.signal,wasm_pthread_cond_broadcast:c.exports.broadcast})}catch(e){h=!1,i.R8("thread asm not support, cannot use asm thread function",a,69)}}},1708:(e,t,r)=>{"use strict";r.r(t),r.d(t,{atomic_add_i16:()=>p,atomic_add_i32:()=>k,atomic_add_i64:()=>S,atomic_add_i8:()=>n,atomic_and_i16:()=>g,atomic_and_i32:()=>I,atomic_and_i64:()=>D,atomic_and_i8:()=>a,atomic_compare_exchange_i16:()=>b,atomic_compare_exchange_i32:()=>T,atomic_compare_exchange_i64:()=>z,atomic_compare_exchange_i8:()=>l,atomic_exchange_i16:()=>_,atomic_exchange_i32:()=>B,atomic_exchange_i64:()=>O,atomic_exchange_i8:()=>f,atomic_load_i16:()=>y,atomic_load_i32:()=>E,atomic_load_i64:()=>F,atomic_load_i8:()=>u,atomic_or_i16:()=>A,atomic_or_i32:()=>M,atomic_or_i64:()=>L,atomic_or_i8:()=>c,atomic_store_i16:()=>w,atomic_store_i32:()=>C,atomic_store_i64:()=>$,atomic_store_i8:()=>d,atomic_sub_i16:()=>m,atomic_sub_i32:()=>x,atomic_sub_i64:()=>U,atomic_sub_i8:()=>o,atomic_xor_i16:()=>v,atomic_xor_i32:()=>P,atomic_xor_i64:()=>R,atomic_xor_i8:()=>h,atomics_notify:()=>W,atomics_wait:()=>N,atomics_wait_timeout:()=>V,override:()=>H});var s=r(40046),i=r(6704);let n=function(e,t){return s.WQ(e,t,12,i._[12])},o=function(e,t){return s.jb(e,t,12,i._[12])},a=function(e,t){return s.Uo(e,t,12,i._[12])},c=function(e,t){return s.or(e,t,12,i._[12])},h=function(e,t){return s.I8(e,t,12,i._[12])},d=function(e,t){return s.M_(e,t,12,i._[12])},u=function(e){return s.Hh(e,12,i._[12])},l=function(e,t,r){return s.p_(e,t,r,12,i._[12])},f=function(e,t){return s.cv(e,t,12,i._[12])},p=function(e,t){return s.WQ(e,t,14,i._[14])},m=function(e,t){return s.jb(e,t,14,i._[14])},g=function(e,t){return s.Uo(e,t,14,i._[14])},A=function(e,t){return s.or(e,t,14,i._[14])},v=function(e,t){return s.I8(e,t,14,i._[14])},w=function(e,t){return s.M_(e,t,14,i._[14])},y=function(e){return s.Hh(e,14,i._[14])},b=function(e,t,r){return s.p_(e,t,r,14,i._[14])},_=function(e,t){return s.cv(e,t,14,i._[14])},k=function(e,t){return s.WQ(e,t,16,i._[16])},x=function(e,t){return s.jb(e,t,16,i._[16])},I=function(e,t){return s.Uo(e,t,16,i._[16])},M=function(e,t){return s.or(e,t,16,i._[16])},P=function(e,t){return s.I8(e,t,16,i._[16])},C=function(e,t){return s.M_(e,t,16,i._[16])},E=function(e){return s.Hh(e,16,i._[16])},T=function(e,t,r){return s.p_(e,t,r,16,i._[16])},B=function(e,t){return s.cv(e,t,16,i._[16])},S=function(e,t){return s.WQ(e,t,21,i._[21])},U=function(e,t){return s.jb(e,t,21,i._[21])},D=function(e,t){return s.Uo(e,t,21,i._[21])},L=function(e,t){return s.or(e,t,21,i._[21])},R=function(e,t){return s.I8(e,t,21,i._[21])},$=function(e,t){return s.M_(e,t,21,i._[21])},F=function(e){return s.Hh(e,21,i._[21])},z=function(e,t,r){return s.p_(e,t,r,21,i._[21])},O=function(e,t){return s.cv(e,t,21,i._[21])},W=function(e,t){return s.me(e,t)},N=function(e,t){return s.uk(e,t)},V=function(e,t,r){return s.j4(e,t,Number(BigInt.asIntN(32,r)))};function H(e){e.atomic_add_i8&&(n=e.atomic_add_i8),e.atomic_sub_i8&&(o=e.atomic_sub_i8),e.atomic_and_i8&&(a=e.atomic_and_i8),e.atomic_or_i8&&(c=e.atomic_or_i8),e.atomic_xor_i8&&(h=e.atomic_xor_i8),e.atomic_store_i8&&(d=e.atomic_store_i8),e.atomic_load_i8&&(u=e.atomic_load_i8),e.atomic_compare_exchange_i8&&(l=e.atomic_compare_exchange_i8),e.atomic_exchange_i8&&(f=e.atomic_exchange_i8),e.atomic_add_i16&&(p=e.atomic_add_i16),e.atomic_sub_i16&&(m=e.atomic_sub_i16),e.atomic_and_i16&&(g=e.atomic_and_i16),e.atomic_or_i16&&(A=e.atomic_or_i16),e.atomic_xor_i16&&(v=e.atomic_xor_i16),e.atomic_store_i16&&(w=e.atomic_store_i16),e.atomic_load_i16&&(y=e.atomic_load_i16),e.atomic_compare_exchange_i16&&(b=e.atomic_compare_exchange_i16),e.atomic_exchange_i16&&(_=e.atomic_exchange_i16),e.atomic_add_i32&&(k=e.atomic_add_i32),e.atomic_sub_i32&&(x=e.atomic_sub_i32),e.atomic_and_i32&&(I=e.atomic_and_i32),e.atomic_or_i32&&(M=e.atomic_or_i32),e.atomic_xor_i32&&(P=e.atomic_xor_i32),e.atomic_store_i32&&(C=e.atomic_store_i32),e.atomic_load_i32&&(E=e.atomic_load_i32),e.atomic_compare_exchange_i32&&(T=e.atomic_compare_exchange_i32),e.atomic_exchange_i32&&(B=e.atomic_exchange_i32),e.atomic_add_i64&&(S=e.atomic_add_i64),e.atomic_sub_i64&&(U=e.atomic_sub_i64),e.atomic_and_i64&&(D=e.atomic_and_i64),e.atomic_or_i64&&(L=e.atomic_or_i64),e.atomic_xor_i64&&(R=e.atomic_xor_i64),e.atomic_store_i64&&($=e.atomic_store_i64),e.atomic_load_i64&&(F=e.atomic_load_i64),e.atomic_compare_exchange_i64&&(z=e.atomic_compare_exchange_i64),e.atomic_exchange_i64&&(O=e.atomic_exchange_i64),e.atomics_notify&&(W=e.atomics_notify),e.atomics_wait&&(N=e.atomics_wait),e.atomics_wait_timeout&&(V=e.atomics_wait_timeout)}},14621:(e,t,r)=>{"use strict";r.d(t,{B:()=>y,CK:()=>b,LS:()=>_,Lq:()=>C,Pp:()=>E,WU:()=>P,h2:()=>M,nK:()=>I});var s=r(134),i=r(80662),n=r.n(i),o=r(61499),a=r(50932),c=r(12085),h=r(63939),d=r(14686),u=r(50011);const l=[null,[],[]],f=0,p=28;function m(e,t){const r=l[e];0===t||10===t?(console.log.bind(console)(u.decode(r)),r.length=0):r.push(t)}const g={};let A,v="./this.program";function w(){if(!A){const e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:v||"./this.program"};for(let t in g)e[t]=g[t];const t=[];for(let r in e)t.push(r+"="+e[r]);A=t}return A}function y(e,t){let r=0;return w().forEach((function(s,i){const n=t+r;a.M[20](e+4*i,n),function(e,t){for(let r=0;r<e.length;++r)a.M[4](t,e.charCodeAt(r)),t+=1;a.M[4](t,0)}(s,n),r+=s.length+1})),0}function b(e,t){const r=w();a.M[25](e,r.length);let s=0;return r.forEach((function(e){s+=e.length+1})),a.M[25](t,s),0}function _(e,t){let r=0;return 0==e?r=2:1!=e&&2!=e||(r=64),a.M[11](t,2),a.M[13](t+2,1),a.M[15](t+8,r),a.M[15](t+12,0),a.M[17](t+16,BigInt(0)),f}var k,x;function I(e,t,r,s){let i=0;for(let s=0;s<r;s++){let r=h.f[20](t),s=h.f[25](t+4);for(let t=0;t<s;t++)m(e,h.f[4](r+t));i+=s,t+=8}return a.M[25](s,i),f}function M(e){throw e=`abort(${e+=""}). Build with -s ASSERTIONS=1 for more info.`,new WebAssembly.RuntimeError(e)}function P(e,t,r){if(0!==e)return p;const s=(new Date).getTime();return a.M[10](r,BigInt(s)*BigInt(1e6)),f}function C(e,t){return 0!==e?p:(a.M[10](t,BigInt(1e6)),f)}function E(e,t){const r=(0,d.s3)(e,t);return crypto.getRandomValues(r),f}k=class{constructor(){(0,s.A)(this,"buf",void 0),(0,s.A)(this,"len",void 0)}}.prototype,(x=new(n())).set("buf",{0:1,1:1,2:1,3:0,4:0,5:0,6:0,7:0,8:0}),x.set("len",{0:25,1:0,2:0,3:0,4:0,5:0,6:0,7:4,8:0}),(0,c.A)(k,o.Og,!0),(0,c.A)(k,o.dc,4),(0,c.A)(k,o.g7,8),(0,c.A)(k,o.JY,x)},20357:(e,t,r)=>{"use strict";r.r(t),r.d(t,{override:()=>T,wasm_cpu_core_count:()=>C,wasm_pthread_cond_broadcast:()=>_,wasm_pthread_cond_destroy:()=>v,wasm_pthread_cond_init:()=>A,wasm_pthread_cond_signal:()=>b,wasm_pthread_cond_timedwait:()=>y,wasm_pthread_cond_wait:()=>w,wasm_pthread_equal2:()=>M,wasm_pthread_exit:()=>I,wasm_pthread_mutex_destroy:()=>f,wasm_pthread_mutex_init:()=>l,wasm_pthread_mutex_lock:()=>p,wasm_pthread_mutex_trylock:()=>m,wasm_pthread_mutex_unlock:()=>g,wasm_pthread_once:()=>k,wasm_pthread_self2:()=>x,wasm_pthread_support:()=>P,wasm_threw_error:()=>E});var s=r(63939),i=r(50932),n=r(73783),o=r(42518),a=r(26429),c=r(11473),h=r(40046),d=r(10576),u=r(14686);let l,f,p,m,g,A,v,w,y,b,_,k;function x(){return d.TK.__SELF_THREAD__}function I(e){const t=d.TK.__SELF_THREAD__;i.M[20](t+4,e),i.M[15](t+8,4|s.f[15](t+8))}function M(e,t){return s.f[15](e)===s.f[15](t)?1:0}function P(){return a.USE_THREADS?1:0}function C(){return navigator.hardwareConcurrency}function E(e,t){throw new Error((0,u.lH)(t))}function T(e){e.wasm_pthread_mutex_lock&&(p=e.wasm_pthread_mutex_lock),e.wasm_pthread_mutex_trylock&&(m=e.wasm_pthread_mutex_trylock),e.wasm_pthread_mutex_unlock&&(g=e.wasm_pthread_mutex_unlock),e.wasm_pthread_cond_wait&&(w=e.wasm_pthread_cond_wait),e.wasm_pthread_cond_timedwait&&(y=e.wasm_pthread_cond_timedwait),e.wasm_pthread_cond_signal&&(b=e.wasm_pthread_cond_signal),e.wasm_pthread_cond_broadcast&&(_=e.wasm_pthread_cond_broadcast)}l=function(e,t){return n.Ts(e)},f=function(e){return n.zr(e)},p=function(e){return n.s2(e)},m=function(e){return n.bh(e)},g=function(e){return n.Tl(e)},A=function(e,t){return o.Ts(e,t)},v=function(e){return o.zr(e)},w=function(e,t){return o.uk(e,t)},y=function(e,t,r){let i=1e3*Number(s.f[17](r))+s.f[15](r+8)/1e6;return o.XR(e,t,i)},b=function(e){return o.vP(e)},_=function(e){return o.mq(e)},k=function(e,t){return 0===h.WQ(e,1,16,2)&&c.XI.get(t)(),0}},77775:(e,t,r)=>{"use strict";r.r(t),r.d(t,{Timespec:()=>l,wasm_sem_destroy:()=>p,wasm_sem_init:()=>f,wasm_sem_post:()=>v,wasm_sem_timedwait:()=>A,wasm_sem_trywait:()=>g,wasm_sem_wait:()=>m});var s,i,n=r(134),o=r(80662),a=r.n(o),c=r(61499),h=r(12085),d=r(63939),u=r(79490);class l{constructor(){(0,n.A)(this,"tvSec",void 0),(0,n.A)(this,"tvNSec",void 0)}}function f(e,t,r){return u.Ts(e,r)}function p(e){return u.zr(e)}function m(e){return u.uk(e)}function g(e){return u.Zr(e)}function A(e,t){let r=1e3*Number(d.f[17](t))+d.f[15](t+8)/1e6;return u.XR(e,r)}function v(e){return u.bE(e)}s=l.prototype,(i=new(a())).set("tvSec",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),i.set("tvNSec",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:8,8:0}),(0,h.A)(s,c.Og,!0),(0,h.A)(s,c.dc,8),(0,h.A)(s,c.g7,16),(0,h.A)(s,c.JY,i)},6331:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r(134),i=r(10576);class n{constructor(e,t){(0,s.A)(this,"type",void 0),(0,s.A)(this,"phase",void 0),(0,s.A)(this,"ns",void 0),(0,s.A)(this,"target",void 0),(0,s.A)(this,"originalEvent",void 0),(0,s.A)(this,"isPrevented",void 0),(0,s.A)(this,"isStopped",void 0),(0,s.A)(this,"listener",void 0),this.type=e,this.phase=n.PHASE_CURRENT,t&&(this.originalEvent=t)}preventDefault(){const e=this;if(!e.isPrevented){const{originalEvent:t}=e;t&&t.preventDefault(),e.isPrevented=i.rT}return e}stopPropagation(){const e=this;if(!e.isStopped){const{originalEvent:t}=e;t&&t.stopPropagation(),e.isStopped=i.rT}return e}prevent(){return this.preventDefault()}stop(){return this.stopPropagation()}}(0,s.A)(n,"PHASE_CURRENT",0),(0,s.A)(n,"PHASE_UPWARD",1),(0,s.A)(n,"PHASE_DOWNWARD",i.Cy)},96172:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var s=r(134),i=r(67672),n=r(72739),o=r(6331),a=r(95335),c=r(20525),h=(r(4624),r(56401)),d=r(10576);class u{constructor(e){(0,s.A)(this,"ns",void 0),(0,s.A)(this,"listeners",void 0),(0,s.A)(this,"nativeListeners",void 0),this.ns=e||d.W8,this.listeners={}}fire(e,t,r){let s=this,c=i.Yj(e)?s.parse(e):e,u=s.listeners[c.type],l=d.rT;if(u){u=a.C(u);const e=t&&t[0]instanceof o.A?t[0]:d.ZH;n.__(u,(function(i){if(!p(c.ns,i,d.rT)||!n.zy(u,i)||r&&!r(c,t,i))return;e&&(e.listener=i.fn);let o=(0,h.A)(i.fn,i.ctx,t);return e&&(e.listener=d.ZH),i.num=i.num?i.num+1:1,i.num===i.max&&s.off(c,i.fn),e&&(o===d.W8?e.prevent().stop():e.isStopped&&(o=d.W8)),o===d.W8?l=d.W8:void 0}))}return l}on(e,t){const r=this,s=r.listeners,o=i.Pc(t)?{fn:t}:t;if(i.Ik(o)&&i.Pc(o.fn)){const t=i.Yj(e)?r.parse(e):e;o.ns=t.ns,n.VC(s[t.type]||(s[t.type]=[]),o)}return this}one(e,t){return i.Pc(t)?t={fn:t,max:1}:t.max=1,this.on(e,t)}off(e,t){const r=this,s=r.listeners;if(e){const o=i.Yj(e)?r.parse(e):e,c=o.type,h=o.ns,u=f(t),l=function(e,t){n.__(e,(function(t,r){u(t)&&e.splice(r,1)}),d.rT),e.length||delete s[t]},m=function(e,t){n.__(e,(function(t,r){p(h,t)&&e.splice(r,1)}),d.rT),e.length||delete s[t]};c?s[c]&&l(s[c],c):h&&a.__(s,m)}else r.listeners={}}has(e,t){let r=this.listeners,s=i.Yj(e)?this.parse(e):e,o=s.type,c=s.ns,h=d.rT,u=f(t);var l;return o?r[o]&&(l=r[o],n.__(l,(function(e){if(u(e))return h=d.W8}))):c&&a.__(r,(function(e){return n.__(e,(function(e){if(p(c,e))return h=d.W8})),h})),!h}parse(e){const t={type:e,ns:d.u1};if(this.ns){const r=c.qh(e,d.ZG);r>=0&&(t.type=c.di(e,0,r),t.ns=c.di(e,r+1))}return t}}function l(){return d.rT}function f(e){return i.Pc(e)?function(t){return e===t.fn}:l}function p(e,t,r){const{ns:s}=t;return s&&e?s===e:r?d.rT:d.W8}},84504:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var s=r(2148);function i(e,t,r=!1){const i=t.split("."),n=e.split(".");for(let e=0;e<n.length;e++){if(r&&e==n.length-1&&(0,s.A)(n[e])>=(0,s.A)(i[e]))return n.length>=i.length;if((0,s.A)(n[e])>(0,s.A)(i[e]))return!0;if((0,s.A)(n[e])<(0,s.A)(i[e]))return!1;if(e===i.length-1&&e===n.length-1)return r;if(e===i.length-1)return!0;if(e===n.length-1)return!1}return!0}},92647:(e,t,r)=>{"use strict";function s(e,t){if(!t.length)return null;if(1===t.length)return t[0];let r,s=0;for(r of t)s+=r.length;let i=new e(s),n=0;for(r of t)i.set(r,n),n+=r.length;return i}r.d(t,{A:()=>s})},78995:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var s=r(56401),i=r(72739),n=r(10576);function o(e,t,r,o=!1){let a,c;return function(){let h=this;o&&(c=i.$r(arguments)),a||(o||(c=i.$r(arguments)),r&&(0,s.A)(e,h,c),a=setTimeout((function(){a=n.ZH,r||(0,s.A)(e,h,c)}),t))}}},56401:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r(67672),i=r(10576);function n(e,t,r){if(s.Pc(e))return s.YO(r)?e.apply(t,r):t!==i.ZH?e.call(t,r):r!==i.ZH?e(r):e()}},8284:(e,t,r)=>{"use strict";function s(){let e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){let r=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?r:3&r|8).toString(16)}))}r.d(t,{A:()=>s})},86932:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r(45249),i=r.n(s);function n(){return i()()}},54568:(e,t,r)=>{"use strict";function s(){return"function"==typeof registerProcessor&&"number"==typeof sampleRate&&"number"==typeof currentFrame&&"number"==typeof currentTime}r.d(t,{A:()=>s})},34677:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var s=r(10576);function i(e){return e!==s.ZH}},59135:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r(34677);let i;function n(){if((0,s.A)(i))return i;const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),i=256===new Int16Array(e)[0],i}},20491:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var s=r(67672),i=r(62100),n=r(20525);function o(e){return s.Pc(e)&&n.zy((0,i.A)(e),"[native code]")}},39638:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r(34677),i=r(54568);function n(){return!("object"==typeof window&&(0,s.A)(window.document)||(0,i.A)())}},7972:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var s=r(64236),i=r.n(s),n=r(20491),o=r(10576);let a;typeof i()===o.s0&&(0,n.A)(i())&&(a=i()),a=typeof MessageChannel===o.s0&&(0,n.A)(MessageChannel)?function(e){const t=new MessageChannel;t.port1.onmessage=e,t.port2.postMessage(1)}:"function"==typeof setTimeout?setTimeout:function(e){setTimeout(e)};const c=a},61837:(e,t,r)=>{"use strict";r.d(t,{A:()=>f});var s=r(69736),i=r.n(s),n=r(73146),o=r.n(n);const a='\nfunction webpackBootstrapFunc (modules) {\n  var installedModules = {};\n  function __webpack_require__(moduleId) {\n    if(installedModules[moduleId])\n    return installedModules[moduleId].exports;\n    var module = installedModules[moduleId] = {\n      i: moduleId,\n      l: false,\n      exports: {}\n    };\n    if (!modules[moduleId]) {\n      console.error(\'can not found module:\', moduleId)\n    }\n    modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n    module.l = true;\n    return module.exports;\n  }\n  __webpack_require__.m = modules;\n  __webpack_require__.c = installedModules;\n  __webpack_require__.i = function(value) { return value; };\n  __webpack_require__.d = function(exports, definition, getter) {\n    if (typeof definition === \'string\') {\n      if(!__webpack_require__.o(exports, definition)) {\n        Object.defineProperty(exports, definition, {\n          enumerable: true,\n          get: getter\n        });\n      }\n    }\n    else {\n      for(var key in definition) {\n        if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n          Object.defineProperty(exports, key, {\n            enumerable: true,\n            get: definition[key]\n          });\n        }\n      }\n    }\n  };\n  __webpack_require__.r = function(exports) {\n    if(typeof Symbol !== \'undefined\' && Symbol.toStringTag) {\n    \tObject.defineProperty(exports, Symbol.toStringTag, { value: \'Module\' });\n    }\n    Object.defineProperty(exports, \'__esModule\', { value: true });\n  };\n  __webpack_require__.f = {};\n  __webpack_require__.e = function(chunkId) {\n    return Promise.all(Object.keys(__webpack_require__.f).reduce(function (promises, key) {\n      __webpack_require__.f[key](chunkId, promises);\n        return promises;\n    \t}, []));\n\t};\n  __webpack_require__.u = function(chunkId) {\n    return chunkId + "LIB_NAME";\n  };\n  __webpack_require__.n = function(module) {\n    var getter = module && module.__esModule ?\n      function getDefault() { return module[\'default\']; } :\n      function getModuleExports() { return module; };\n    __webpack_require__.d(getter, \'a\', getter);\n    return getter;\n  };\n  (function() {\n    var installedChunks = {\n      "main": 0\n    };\n    __webpack_require__.f.j = function(chunkId, promises) {\n      var installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n      if (installedChunkData !== 0) {\n        if(installedChunkData) {\n          promises.push(installedChunkData[2]);\n        } else {\n          if (true) {\n            var promise = new Promise(function(resolve, reject){installedChunkData = installedChunks[chunkId] = [resolve, reject]});\n            promises.push(installedChunkData[2] = promise);\n            var url = __webpack_require__.p + __webpack_require__.u(chunkId);\n            var error = new Error();\n            var loadingEnded = function(event) {\n              if(__webpack_require__.o(installedChunks, chunkId)) {\n                installedChunkData = installedChunks[chunkId];\n                if(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n                if(installedChunkData) {\n                  var errorType = event && (event.type === \'load\' ? \'missing\' : event.type);\n                  var realSrc = url;\n                  error.message = "Loading chunk " + chunkId + " failed.\\n(" + errorType + ": " + realSrc + ")";\n                  error.name = "ChunkLoadError";\n                  error.type = errorType;\n                  error.request = realSrc;\n                  installedChunkData[1](error);\n                }\n              }\n            };\n            __webpack_require__.l(url, loadingEnded);\n          }\n        }\n      }\n    };\n    var webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n    var [chunkIds, moreModules, runtime] = data;\n    var moduleId, chunkId, i = 0;\n    if (chunkIds.some(function(id){return installedChunks[id] !== 0})) {\n      for(moduleId in moreModules) {\n        if(__webpack_require__.o(moreModules, moduleId)) {\n          __webpack_require__.m[moduleId] = moreModules[moduleId];\n        }\n      }\n      if(runtime) runtime(__webpack_require__);\n    }\n    if (parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n      for (;i < chunkIds.length; i++) {\n        chunkId = chunkIds[i];\n        if (__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n          installedChunks[chunkId][0]();\n        }\n        installedChunks[chunkId] = 0;\n      }\n    }\n    var self = typeof globalThis !== undefined ? globalThis : self\n    var exportName = \'LIBRARY_EXPORT_NAME\'\n    var chunkLoadingGlobal = self["webpackChunk" + exportName] = self["webpackChunk" + exportName] || [];\n    chunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\n    chunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));\n  })();\n  (function() {\n    var inProgress = {};\n    __webpack_require__.l = function(url, done) {\n      if (inProgress[url]) { inProgress[url].push(done); return; }\n        inProgress[url] = [done];\n        var onComplete = function(event) {\n          clearTimeout(timeout);\n          var doneFns = inProgress[url];\n          delete inProgress[url];\n          doneFns && doneFns.forEach(function(fn){fn(event)});\n        }\n        var timeout = setTimeout(onComplete.bind(null, undefined, { type: "timeout" }), 120000);\n      if (typeof importScripts === \'function\') {\n        try {\n          importScripts(url);onComplete({type: "load"});\n        }\n        catch(e) {\n          onComplete({type: "missing"});\n        }\n      }\n      else {\n        import(url).then(function() {\n          onComplete({\n            type: "load"\n          });\n        }, function (error) {\n          onComplete({\n            type: "missing"\n          });\n        })\n      }\n    };\n  })();\n  __webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n  __webpack_require__.p = "ROOT_URL";\n  __webpack_require__.oe = function(err) { console.error(err); throw err; };\n  var f = __webpack_require__(__webpack_require__.s = ENTRY_MODULE);\n  return f;\n}\n',c="[\\.|\\-|\\+|\\w|/|@|!]+",h="\\(\\s*(/\\*.*?\\*/)?\\s*.*?("+c+").*?\\)";function d(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function u(e,t,s,n){const o={};o[s]=[];let a=t.toString();const u=a.match(/^(function)?\s?\w*\(\w+,\s*(\w+),\s*(\w+)\)/);if(!u)return o;const l=u[3];n.__webpack_exports_process__||(n.__webpack_require__=l,n.__webpack_exports__=u[2],n.__webpack_exports_process__=!0);let f,p=new RegExp("(\\\\n|\\W)"+d(l)+h,"g");for(;f=p.exec(a);)"dll-reference"!==f[3]&&o[s].push(f[3]);for(p=new RegExp("\\("+d(l)+'\\("(dll-reference\\s('+c+'))"\\)\\)'+h,"g");f=p.exec(a);)e[f[2]]||(o[s].push(f[1]),e[f[2]]=r(f[1]).m),o[f[2]]=o[f[2]]||[],o[f[2]].push(f[4]);const m=i()(o);for(let e=0;e<m.length;e++)for(let t=0;t<o[m[e]].length;t++)g=+o[m[e]][t],isNaN(g)||(o[m[e]][t]=+o[m[e]][t]);var g;return o}function l(e){return i()(e).reduce((function(t,r){return t||e[r].length>0}),!1)}function f(e,t){const s={main:r.m},n=function(e,t){const r={main:[t]},s={main:[],__webpack_exports__:"__webpack_exports__",__webpack_require__:"__webpack_require__",__webpack_exports_process__:!1},n={main:{}};for(;l(r);){const t=i()(r);for(let o=0;o<t.length;o++){let a=t[o],c=r[a].pop();if(n[a]=n[a]||{},n[a][c]||!e[a][c])continue;n[a][c]=!0,s[a]=s[a]||[],s[a].push(c);let h=u(e,e[a][c],a,s),d=i()(h);for(let e=0;e<d.length;e++)r[d[e]]=r[d[e]]||[],r[d[e]]=r[d[e]].concat(h[d[e]])}}return s}(s,e);let c=o()(e);return"var "+t.varName+"=("+a.replace("ENTRY_MODULE",c).replace("ROOT_URL",r.p||"").replace("LIBRARY_EXPORT_NAME","AVTranscoder").replace("LIB_NAME",r.u&&r.u("")||"")+")({"+n.main.map((function(e){const r=o()(e);let i=r+": "+s.main[e].toString();if(r===c&&t.exportName&&t.pointName){const e=`;${n.__webpack_require__}.d(\n          ${n.__webpack_exports__},\n          "${t.exportName}",\n          function() {\n            if (${t.exportIsClass}) {\n              for (var key in ${n.__webpack_exports__}) {\n                if (key === '${t.exportName}') {\n                  continue;\n                }\n                var v = ${n.__webpack_exports__}[key];\n                if (typeof v === 'function' && v.name === '${t.pointName}') {\n                  return v;\n                }\n              }\n            }\n            return ${t.pointName};\n          }\n        );`;i=i.slice(0,i.length-1)+e+"}"}return i})).join(",")+"});"}},6498:(e,t,r)=>{"use strict";r(67672),r(72739)},2148:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r(67672),i=r(10576);function n(e,t){return s.sH(e)?+e:t!==i.ZH?t:0}},62100:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var s=r(10576);function i(e,t){return e!=s.Cq&&e.toString?e.toString():t!==s.ZH?t:s.u1}},65196:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var s=r(134),i=r(54001),n=r.n(i),o=r(67672),a=r(72739);class c{constructor(){(0,s.A)(this,"queue",void 0),this.queue=[]}async execute(e){try{const t=await e.task();e.resolve(t)}catch(t){e.reject(t)}}async next(){if(this.queue.length){const e=this.queue[0];e.error?e.reject(e.error):await this.execute(e),this.queue.shift(),this.queue.length&&this.next()}}async push(e){if(!o.Pc(e))throw new TypeError("task must be a function");return new(n())(((t,r)=>{const s={task:e,resolve:t,reject:r};this.queue.push(s),1===this.queue.length&&this.next()}))}clear(e){a.__(this.queue,(t=>{t.error=e||new Error("command queue clear")}))}clearPadding(){this.queue.length=0}get length(){return this.queue.length}}},61403:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r(134),i=r(67672);class n{constructor(){(0,s.A)(this,"proxy",void 0),this.proxy=new Proxy(this,{get:(e,t,r)=>i.sH(t)?e.getIndexValue(+t):e[t],set:(e,t,r,s)=>(i.sH(t)?e.setIndexValue(+t,r):e[t]=r,!0)})}}},37246:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r(134),i=r(4624);class n{constructor(e=1048576){(0,s.A)(this,"buffer",void 0),(0,s.A)(this,"pointer",void 0),(0,s.A)(this,"bitsLeft",void 0),(0,s.A)(this,"size",void 0),(0,s.A)(this,"endPointer",void 0),(0,s.A)(this,"pos",void 0),(0,s.A)(this,"error",void 0),(0,s.A)(this,"onFlush",void 0),this.pointer=0,this.bitsLeft=8,this.pos=BigInt(0),this.size=e,this.endPointer=0,this.error=0,this.buffer=new Uint8Array(this.size)}peekU1(){let e=0;(this.remainingLength()<1||1===this.remainingLength()&&0===this.bitsLeft)&&this.flush();let t=this.pointer,r=this.bitsLeft;return 0===r&&(t++,r=8),e=this.buffer[t]>>r-1&1,e}readU1(){let e=0;return(this.remainingLength()<1||1===this.remainingLength()&&0===this.bitsLeft)&&this.flush(),this.bitsLeft--,e=this.buffer[this.pointer]>>this.bitsLeft&1,0===this.bitsLeft&&(this.pointer++,this.bitsLeft=8,this.pos++),e}readU(e){let t=0;for(let r=0;r<e;r++)t|=this.readU1()<<e-r-1;return t}peekU(e){const t=this.pointer,r=this.bitsLeft,s=this.pos,i=this.readU(e);return this.pointer=t,this.bitsLeft=r,this.pos=s,i}remainingLength(){return this.endPointer-this.pointer}getBitLeft(){return this.bitsLeft}getPointer(){return this.pointer}setPointer(e){this.pointer=e}getPos(){return this.pos}skip(e){const t=(e-e%8)/8;this.pointer+=t,this.pos+=BigInt(t);const r=e%8;this.bitsLeft<=r?(this.pointer++,this.pos++,this.bitsLeft=8-(r-this.bitsLeft)):this.bitsLeft-=r}flush(){if(!this.onFlush)throw this.error=-1048574,Error("IOReader error, flush failed because of no flush callback");if(0===this.bitsLeft&&(this.pointer++,this.pos++),!(this.size-this.remainingLength()<=0))if(this.pointer<this.endPointer){this.buffer.set(this.buffer.subarray(this.pointer,this.endPointer),0);const e=this.onFlush(this.buffer.subarray(this.endPointer-this.pointer,this.size));if(e<0)throw this.error=e,Error("IOReader error, flush failed");this.endPointer=this.endPointer-this.pointer+e,this.pointer=0}else{const e=this.onFlush(this.buffer);if(this.endPointer=e,this.pointer=0,this.bitsLeft=8,e<0)throw this.error=e,Error("IOReader error, flush failed")}}getBuffer(){return this.buffer}appendBuffer(e){if(this.size-this.endPointer>=e.length)this.buffer.set(e,this.endPointer),this.endPointer+=e.length;else if(this.buffer.set(this.buffer.subarray(this.pointer,this.endPointer),0),this.endPointer=this.endPointer-this.pointer,this.pointer=0,this.size-this.endPointer>=e.length)this.buffer.set(e,this.endPointer),this.endPointer+=e.length;else{const t=Math.min(this.size-this.endPointer,e.length);this.buffer.set(e.subarray(0,t),this.endPointer),this.endPointer+=t,i.R8("BSReader, call appendBuffer but the buffer's size is lagger then the remaining size","src/common/io/BitReader.ts",257)}}reset(){this.pointer=this.endPointer=0,this.bitsLeft=8,this.error=0,this.pos=BigInt(0)}skipPadding(){this.bitsLeft<8&&(this.bitsLeft=8,this.pointer++,this.pos++)}}},83314:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var s=r(134);class i{constructor(e=1048576){(0,s.A)(this,"buffer",void 0),(0,s.A)(this,"pointer",void 0),(0,s.A)(this,"pos",void 0),(0,s.A)(this,"bitPointer",void 0),(0,s.A)(this,"size",void 0),(0,s.A)(this,"error",void 0),(0,s.A)(this,"onFlush",void 0),this.pointer=0,this.bitPointer=0,this.size=e,this.error=0,this.pos=BigInt(0),this.buffer=new Uint8Array(this.size)}writeU1(e){(this.remainingLength()<1||1===this.remainingLength()&&this.bitPointer>=8)&&this.flush(),1&e?this.buffer[this.pointer]|=1<<7-this.bitPointer:this.buffer[this.pointer]&=~(1<<7-this.bitPointer),this.bitPointer++,8===this.bitPointer&&(this.pointer++,this.pos++,this.bitPointer=0)}writeU(e,t){for(let r=0;r<e;r++)this.writeU1(t>>e-r-1&1)}remainingLength(){return this.size-this.pointer}flush(){if(!this.onFlush)throw this.error=-1048574,Error("BSWriter error, flush failed because of no flush callback");if(this.pointer)if(this.bitPointer&&this.pointer>0){const e=this.onFlush(this.buffer.subarray(0,this.pointer).slice());if(0!==e)throw this.error=e,Error("BSWriter error, flush failed");this.buffer[0]=this.buffer[this.pointer]}else if(0===this.bitPointer){const e=this.onFlush(this.buffer.subarray(0,this.pointer));if(0!==e)throw this.error=e,Error("BSWriter error, flush failed")}this.pointer=0}padding(){for(;0!==this.bitPointer;)this.writeU1(0)}reset(){this.pointer=0,this.bitPointer=0,this.error=0,this.pos=BigInt(0)}getBuffer(){return this.buffer}getPointer(){return this.pointer}getPos(){return this.pos}}},31865:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var s=r(134),i=r(92647),n=r(50011);class o{constructor(e,t=!0){(0,s.A)(this,"data",void 0),(0,s.A)(this,"buffer",void 0),(0,s.A)(this,"byteStart",void 0),(0,s.A)(this,"pos",void 0),(0,s.A)(this,"size",void 0),(0,s.A)(this,"littleEndian",void 0),this.buffer=e,this.data=e instanceof Uint8Array?new DataView(e.buffer):e.view,this.byteStart=e instanceof Uint8Array?e.byteOffset:0,this.pos=0,this.size=e.byteLength,this.littleEndian=!t}readUint8(){return this.data.getUint8(this.pos+++this.byteStart)}peekUint8(){return this.data.getUint8(this.pos+this.byteStart)}readUint16(){const e=this.data.getUint16(this.pos+this.byteStart,this.littleEndian);return this.pos+=2,e}peekUint16(){return this.data.getUint16(this.pos+this.byteStart,this.littleEndian)}readUint24(){const e=this.readUint16(),t=this.readUint8();return this.littleEndian?t<<16|e:e<<8|t}peekUint24(){const e=this.readUint16(),t=this.readUint8();return this.pos-=3,this.littleEndian?t<<16|e:e<<8|t}readUint32(){const e=this.data.getUint32(this.pos+this.byteStart,this.littleEndian);return this.pos+=4,e}peekUint32(){return this.data.getUint32(this.pos+this.byteStart,this.littleEndian)}readUint64(){const e=BigInt(this.readUint32()),t=BigInt(this.readUint32());return this.littleEndian?t<<BigInt(32)|e:e<<BigInt(32)|t}peekUint64(){const e=BigInt(this.readUint32()),t=BigInt(this.readUint32());return this.pos-=8,this.littleEndian?t<<BigInt(32)|e:e<<BigInt(32)|t}readInt8(){return this.data.getInt8(this.pos+++this.byteStart)}peekInt8(){return this.data.getInt8(this.pos+this.byteStart)}readInt16(){const e=this.data.getInt16(this.pos+this.byteStart,this.littleEndian);return this.pos+=2,e}peekInt16(){return this.data.getInt16(this.pos+this.byteStart,this.littleEndian)}readInt24(){const e=this.readUint24();return 8388608&e?e-16777216:e}peekInt24(){const e=this.peekUint24();return 8388608&e?e-16777216:e}readInt32(){const e=this.data.getInt32(this.pos+this.byteStart,this.littleEndian);return this.pos+=4,e}peekInt32(){return this.data.getInt32(this.pos+this.byteStart,this.littleEndian)}readInt64(){const e=BigInt(this.readInt32()),t=BigInt(this.readInt32());return this.littleEndian?t<<BigInt(32)|e:e<<BigInt(32)|t}peekInt64(){const e=BigInt(this.readInt32()),t=BigInt(this.readInt32());return this.pos-=8,this.littleEndian?t<<BigInt(32)|e:e<<BigInt(32)|t}readFloat(){const e=this.data.getFloat32(this.pos+this.byteStart,this.littleEndian);return this.pos+=4,e}peekFloat(){return this.data.getFloat32(this.pos+this.byteStart,this.littleEndian)}readDouble(){const e=this.data.getFloat64(this.pos+this.byteStart,this.littleEndian);return this.pos+=8,e}peekDouble(){return this.data.getFloat64(this.pos+this.byteStart,this.littleEndian)}readHex(e=1){let t="";for(let r=0;r<e;r++){const e=this.readUint8().toString(16);t+=1===e.length?"0"+e:e}return t}peekHex(e=1){const t=this.pos,r=this.readHex(e);return this.pos=t,r}readString(e=1){let t="";if(e){let r=this.pos;for(let t=0;t<e&&0===this.buffer[this.pos+t];t++)r++;t=n.decode(this.buffer.subarray(r,r+e))}return this.pos+=e,t}peekString(e=1){const t=this.pos,r=this.readString(e);return this.pos=t,r}readLine(){let e="";for(let t=this.pos;t<this.size;t++)if(10===this.buffer[t]||13===this.buffer[t]){e+=this.readString(t-this.pos);break}for(let e=this.pos;e<this.size&&(10===this.buffer[e]||13===this.buffer[e]);e++)this.readUint8();return e}peekLine(){const e=this.pos,t=this.readLine();return this.pos=e,t}getPos(){return BigInt(this.pos)}seek(e){e>this.size&&(e=this.size),this.pos=Math.max(0,e)}skip(e){this.seek(this.pos+e)}back(e){this.seek(this.pos-e)}remainingSize(){return this.size-this.pos}readBuffer(e){e=Math.min(e,this.remainingSize());const t=this.buffer.slice(this.pos,this.pos+e);return this.pos+=e,t}appendBuffer(e){this.buffer=(0,i.A)(Uint8Array,[this.buffer.slice(),e.slice()]),this.data=new DataView(this.buffer.buffer),this.size+=e.byteLength,this.byteStart=0}resetBuffer(e,t=!0){this.buffer=e,this.data=e instanceof Uint8Array?new DataView(e.buffer):e.view,this.byteStart=e instanceof Uint8Array?e.byteOffset:0,this.pos=0,this.size=e.byteLength,this.littleEndian=!t}}},729:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var s=r(134),i=r(4624),n=r(50011);class o{constructor(e,t=!0){(0,s.A)(this,"data",void 0),(0,s.A)(this,"buffer",void 0),(0,s.A)(this,"byteStart",void 0),(0,s.A)(this,"pos",void 0),(0,s.A)(this,"size",void 0),(0,s.A)(this,"littleEndian",void 0),this.buffer=e,this.data=e instanceof Uint8Array?new DataView(e.buffer):e.view,this.byteStart=e instanceof Uint8Array?e.byteOffset:0,this.pos=0,this.size=e.byteLength,this.littleEndian=!t}writeUint8(e){this.data.setUint8(this.pos+++this.byteStart,e)}writeUint16(e){this.data.setUint16(this.pos+this.byteStart,e,this.littleEndian),this.pos+=2}writeUint24(e){const t=3840&e,r=240&e,s=15&e;this.littleEndian?(this.writeUint8(s),this.writeUint8(r),this.writeUint8(t)):(this.writeUint8(t),this.writeUint8(r),this.writeUint8(s))}writeUint32(e){this.data.setUint32(this.pos+this.byteStart,e,this.littleEndian),this.pos+=4}writeUint64(e){this.data.setBigUint64(this.pos+this.byteStart,e,this.littleEndian),this.pos+=8}writeInt8(e){this.data.setInt8(this.pos+++this.byteStart,e)}writeInt16(e){this.data.setInt16(this.pos+this.byteStart,e,this.littleEndian),this.pos+=2}writeInt24(e){this.writeUint24(e<0?e+16777216:e)}writeInt32(e){this.data.setInt32(this.pos+this.byteStart,e,this.littleEndian),this.pos+=4}writeInt64(e){this.data.setBigInt64(this.pos+this.byteStart,e,this.littleEndian),this.pos+=8}writeFloat(e){this.data.setFloat32(this.pos+this.byteStart,e,this.littleEndian),this.pos+=4}writeDouble(e){this.data.setFloat64(this.pos+this.byteStart,e,this.littleEndian),this.pos+=8}getPos(){return this.pos}seek(e){e>this.size&&(e=this.size),this.pos=Math.max(0,e)}skip(e){this.seek(this.pos+e)}back(e){this.seek(this.pos-e)}remainingSize(){return this.size-this.pos}writeBuffer(e){let t=e.length;this.remainingSize()<t&&(t=this.remainingSize(),i.R8(`the remaining buffer size is smaller then the wrote buffer, hope set ${e.length}, but set ${t}`,"src/common/io/BufferWriter.ts",202)),this.buffer.set(e,this.pos),this.pos+=e.length}writeString(e){const t=n.encode(e);return this.writeBuffer(t),t.length}getWroteBuffer(){return this.buffer.subarray(0,this.pos)}resetBuffer(e,t=!0){this.buffer=e,this.data=e instanceof Uint8Array?new DataView(e.buffer):e.view,this.byteStart=e instanceof Uint8Array?e.byteOffset:0,this.pos=0,this.size=e.byteLength,this.littleEndian=!t}}},31830:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var s=r(134),i=r(54001),n=r.n(i);class o{constructor(e,t=!1){(0,s.A)(this,"handler",void 0),(0,s.A)(this,"file",void 0),(0,s.A)(this,"pos",void 0),(0,s.A)(this,"writer",void 0),(0,s.A)(this,"append",void 0),(0,s.A)(this,"reader",void 0),(0,s.A)(this,"size",void 0),(0,s.A)(this,"blobSlice",void 0),(0,s.A)(this,"readied",void 0),(0,s.A)(this,"readHold",void 0),this.handler=e,this.append=t,this.readied=!1}async ready(){this.readied||(this.file=await this.handler.getFile(),this.writer=await this.handler.createWritable(),this.pos=this.append?this.file.size:0,this.size=this.pos,this.reader=new FileReader,this.blobSlice=File.prototype.slice||File.prototype.mozSlice||File.prototype.webkitSlice,this.reader.onloadend=e=>{this.readHold&&(this.readHold.resolve(e.target.result),this.readHold=null)},this.readied=!0)}async write_(e){await this.writer.write(e),this.pos+=e.byteLength,this.pos>this.size&&(this.size+=e.byteLength)}async write(e){await this.write_(e)}async seek_(e){await this.writer.seek(e),this.pos=e}async seek(e){await this.seek_(e)}async seekToEnd(){await this.seek_(this.size)}async resize_(e){e!==this.file.size&&(e<this.file.size&&(this.pos=this.file.size),await this.writer.truncate(e),this.size=e)}async resize(e){await this.resize_(e)}async read_(e,t){return new(n())(((r,s)=>{this.readHold={resolve:r,reject:s},this.reader.readAsArrayBuffer(this.blobSlice.call(this.file,e,t))}))}async read(e,t){return await this.read_(e,t)}async appendBufferByPosition(e,t){await this.writer.close(),this.file=await this.handler.getFile(),this.writer=await this.handler.createWritable({keepExistingData:!0});const r=this.file.size,s=e.byteLength;if(t>=this.file.size)await this.resize_(t+s),await this.seek_(t),await this.write_(e);else{let s=t;for(await this.seek_(t),await this.write_(e);s<r;){const e=await this.read_(s,Math.min(s+5242880,r));await this.write_(e),s+=e.byteLength}}}async close_(){this.readied&&(await this.writer.close(),this.file=await this.handler.getFile(),this.readied=!1)}async close(){await this.close_()}getFile(){return this.file}getHandle(){return this.handler}getPos(){return this.pos}getSize(){return this.size}async destroy(){await this.close_(),this.handler=null,this.file=null}}},24175:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var s=r(134),i=r(4624),n=r(50011),o=r(13724);const a="src/common/io/IOReader.ts";class c{constructor(e=1048576,t=!0,r){if((0,s.A)(this,"data",void 0),(0,s.A)(this,"buffer",void 0),(0,s.A)(this,"pointer",void 0),(0,s.A)(this,"endPointer",void 0),(0,s.A)(this,"pos",void 0),(0,s.A)(this,"size",void 0),(0,s.A)(this,"littleEndian",void 0),(0,s.A)(this,"fileSize_",void 0),(0,s.A)(this,"error",void 0),(0,s.A)(this,"onFlush",void 0),(0,s.A)(this,"onSeek",void 0),(0,s.A)(this,"onSize",void 0),(0,s.A)(this,"flags",void 0),this.pos=BigInt(0),this.pointer=0,this.error=0,this.endPointer=0,this.littleEndian=!t,this.flags=0,r&&r.view)this.size=r.length,this.buffer=r,this.data=r.view;else if(r&&!r.byteOffset)this.size=r.length,this.buffer=r,this.data=new DataView(this.buffer.buffer);else{if(r)throw new Error("not support subarray of ArrayBuffer");this.size=Math.max(e,102400),this.buffer=new Uint8Array(this.size),this.data=new DataView(this.buffer.buffer)}}async readUint8(){this.remainingLength()<1&&await this.flush(1);const e=this.data.getUint8(this.pointer);return this.pointer++,this.pos++,e}async peekUint8(){return this.remainingLength()<1&&await this.flush(1),this.data.getUint8(this.pointer)}async readUint16(){this.remainingLength()<2&&await this.flush(2);const e=this.data.getUint16(this.pointer,this.littleEndian);return this.pointer+=2,this.pos+=BigInt(2),e}async peekUint16(){return this.remainingLength()<2&&await this.flush(2),this.data.getUint16(this.pointer,this.littleEndian)}async readUint24(){this.remainingLength()<3&&await this.flush(3);const e=await this.readUint16(),t=await this.readUint8();return this.littleEndian?t<<16|e:e<<8|t}async peekUint24(){this.remainingLength()<3&&await this.flush(3);const e=this.pointer,t=this.pos,r=await this.readUint16(),s=await this.readUint8(),i=this.littleEndian?s<<16|r:r<<8|s;return this.pointer=e,this.pos=t,i}async readUint32(){this.remainingLength()<4&&await this.flush(4);const e=this.data.getUint32(this.pointer,this.littleEndian);return this.pointer+=4,this.pos+=BigInt(4),e}async peekUint32(){return this.remainingLength()<4&&await this.flush(4),this.data.getUint32(this.pointer,this.littleEndian)}async readUint64(){this.remainingLength()<8&&await this.flush(8);const e=this.data.getBigUint64(this.pointer,this.littleEndian);return this.pointer+=8,this.pos+=BigInt(8),e}async peekUint64(){return this.remainingLength()<8&&await this.flush(8),this.data.getBigUint64(this.pointer,this.littleEndian)}async readInt8(){this.remainingLength()<1&&await this.flush(1);const e=this.data.getInt8(this.pointer);return this.pointer++,this.pos++,e}async peekInt8(){return this.remainingLength()<1&&await this.flush(1),this.data.getInt8(this.pointer)}async readInt16(){this.remainingLength()<2&&await this.flush(2);const e=this.data.getInt16(this.pointer,this.littleEndian);return this.pointer+=2,this.pos+=BigInt(2),e}async peekInt16(){return this.remainingLength()<2&&await this.flush(2),this.data.getInt16(this.pointer,this.littleEndian)}async readInt24(){const e=await this.readUint24();return 8388608&e?e-16777216:e}async peekInt24(){const e=await this.peekUint24();return 8388608&e?e-16777216:e}async readInt32(){this.remainingLength()<4&&await this.flush(4);const e=this.data.getInt32(this.pointer,this.littleEndian);return this.pointer+=4,this.pos+=BigInt(4),e}async peekInt32(){return this.remainingLength()<4&&await this.flush(4),this.data.getInt32(this.pointer,this.littleEndian)}async readInt64(){this.remainingLength()<8&&await this.flush(8);const e=this.data.getBigInt64(this.pointer,this.littleEndian);return this.pointer+=8,this.pos+=BigInt(8),e}async peekInt64(){return this.remainingLength()<8&&await this.flush(8),this.data.getBigInt64(this.pointer,this.littleEndian)}async readFloat(){this.remainingLength()<4&&await this.flush(4);const e=this.data.getFloat32(this.pointer,this.littleEndian);return this.pointer+=4,this.pos+=BigInt(4),e}async peekFloat(){return this.remainingLength()<4&&await this.flush(4),this.data.getFloat32(this.pointer,this.littleEndian)}async readDouble(){this.remainingLength()<8&&await this.flush(8);const e=this.data.getFloat64(this.pointer,this.littleEndian);return this.pointer+=8,this.pos+=BigInt(8),e}async peekDouble(){return this.remainingLength()<8&&await this.flush(8),this.data.getFloat64(this.pointer,this.littleEndian)}async readHex(e=1){let t="";for(let r=0;r<e;r++){const e=(await this.readUint8()).toString(16);t+=1===e.length?"0"+e:e}return t}async peekHex(e=1){e>this.size&&(this.error=-1048574,i.h2("peekHex, length too large",a,414)),this.remainingLength()<e&&await this.flush(e);const t=this.pointer,r=this.pos;let s="";for(let t=0;t<e;t++){const e=(await this.readUint8()).toString(16);s+=1===e.length?"0"+e:e}return this.pointer=t,this.pos=r,s}async readBuffer(e,t){if(t||(t=new Uint8Array(e)),this.remainingLength()<e){let r=0;if(this.remainingLength()>0){const s=this.remainingLength();t.set(this.buffer.subarray(this.pointer,this.pointer+s),r),r+=s,this.pointer+=s,this.pos+=BigInt(s),e-=s}for(;e>0;){await this.flush();const s=Math.min(this.endPointer-this.pointer,e);t.set(this.buffer.subarray(this.pointer,this.pointer+s),r),r+=s,this.pointer+=s,this.pos+=BigInt(s),e-=s}}else t.set(this.buffer.subarray(this.pointer,this.pointer+e),0),this.pointer+=e,this.pos+=BigInt(e);return t}async peekBuffer(e,t){return e>this.size&&(this.error=-1048574,i.h2("peekBuffer, length too large",a,499)),this.remainingLength()<e&&await this.flush(e),t||(t=new Uint8Array(e)),t.set(this.buffer.subarray(this.pointer,this.pointer+e),0),t}async readToBuffer(e,t){if(this.remainingLength()<e){let r=0;if(this.remainingLength()>0){const s=this.remainingLength();t.set(this.buffer.subarray(this.pointer,this.pointer+s),r),r+=s,this.pointer+=s,this.pos+=BigInt(s),e-=s}for(;e>0;){try{await this.flush()}catch(e){if(-1048576===this.error&&r)return r;throw e}const s=Math.min(this.endPointer-this.pointer,e);t.set(this.buffer.subarray(this.pointer,this.pointer+s),r),r+=s,this.pointer+=s,this.pos+=BigInt(s),e-=s}return r}return t.set(this.buffer.subarray(this.pointer,this.pointer+e),0),this.pointer+=e,this.pos+=BigInt(e),e}async readString(e=1){const t=await this.readBuffer(e);return n.decode(t)}async peekString(e=1){const t=await this.peekBuffer(e);return n.decode(t)}async readLine(){let e="";for(;;){let t=!1;for(let r=this.pointer;r<this.endPointer;r++)if(10===this.buffer[r]||13===this.buffer[r]){r!==this.pointer&&(e+=await this.readString(r-this.pointer)),t=!0;break}if(t)break;e+=await this.readString(this.remainingLength()),await this.flush()}let t=await this.peekUint8();return 10!==t&&13!==t||(this.pointer++,13===t&&(t=await this.peekUint8(),10===t&&this.pointer++)),e}async peekLine(){if(this.remainingLength()<this.size)try{await this.flush()}catch(e){if(-1048576!==this.error)throw e}let e="",t=!1;for(let r=this.pointer;r<this.endPointer;r++)if(10===this.buffer[r]||13===this.buffer[r]){e+=await this.peekString(r-this.pointer),t=!0;break}return t||(this.error=-1048574,i.h2("peekLine, out of buffer",a,657)),e}getPointer(){return this.pointer}getPos(){return this.pos}async skip(e){const t=e;for(;this.remainingLength()<e;)e-=this.remainingLength(),this.pointer=this.endPointer,await this.flush();this.remainingLength()>=e&&(this.pointer+=e),this.pos+=BigInt(t)}remainingLength(){return this.endPointer-this.pointer}async flush_(e){for(;;){const t=await this.onFlush(e);if(-1048575!==t)return t;await new o.A(0)}}async flush(e=0){if(this.onFlush||(this.error=-1048574,i.h2("IOReader error, flush failed because of no flush callback",a,731)),!(this.size-this.remainingLength()<=0)){if(e=Math.min(e,this.size),this.pointer<this.endPointer?(this.buffer.set(this.buffer.subarray(this.pointer,this.endPointer),0),this.endPointer=this.endPointer-this.pointer):this.endPointer=0,this.pointer=0,e)for(;this.remainingLength()<e;){const e=await this.flush_(this.buffer.subarray(this.endPointer));if(e<0)throw this.error=e,new Error(`IOReader error, flush ${-1048576===e?"ended":"failed"}, ret: ${e}`);this.endPointer+=e}else{const e=await this.flush_(this.buffer.subarray(this.endPointer));if(e<0)throw this.error=e,new Error(`IOReader error, flush ${-1048576===e?"ended":"failed"}, ret: ${e}`);this.endPointer+=e}this.error=0}}async seek(e,t=!1,r=!0){if(!t){const t=Number(e-this.pos);if(t<0&&Math.abs(t)<this.pointer)return this.pointer+=t,void(this.pos=e);if(t>0&&this.pointer+t<this.endPointer)return this.pointer+=t,void(this.pos=e);if(0===t)return}this.onSeek||(this.error=-1048574,i.h2("IOReader error, seek failed because of no seek callback",a,802)),this.pointer=this.endPointer=0,this.pos=e;const s=await this.onSeek(e);0!==s&&(this.error=s,i.h2("IOReader error, seek failed",a,811)),r&&await this.flush()}getBuffer(){return this.buffer}appendBuffer(e){if(this.size-this.endPointer>=e.length)this.buffer.set(e,this.endPointer),this.endPointer+=e.length;else if(this.buffer.set(this.buffer.subarray(this.pointer,this.endPointer),0),this.endPointer=this.endPointer-this.pointer,this.pointer=0,this.size-this.endPointer>=e.length)this.buffer.set(e,this.endPointer),this.endPointer+=e.length;else{const t=Math.min(this.size-this.endPointer,e.length);this.buffer.set(e.subarray(0,t),this.endPointer),this.endPointer+=t,i.R8("IOReader, call appendBuffer but the buffer's size is lagger then the remaining size",a,849)}}reset(){this.pointer=this.endPointer=0,this.pos=BigInt(0),this.error=0}setEndian(e){this.littleEndian=!e}async fileSize(){if(this.fileSize_)return this.fileSize_;if(!this.onSize)return i.R8("IOReader error, fileSize failed because of no onSize callback",a,882),BigInt(0);try{this.fileSize_=await this.onSize()}catch(e){i.R8(`IOReader error, call fileSize failed: ${e}`,a,889),this.fileSize_=BigInt(0)}return this.fileSize_}getBufferSize(){return this.size}async pipe(e,t){if(t)if(this.remainingLength()<t){if(this.remainingLength()>0){const r=this.remainingLength();await e.writeBuffer(this.buffer.subarray(this.pointer,this.pointer+r)),this.pointer+=r,this.pos+=BigInt(r),t-=r}for(;t>0;){await this.flush();const r=Math.min(this.remainingLength(),t);await e.writeBuffer(this.buffer.subarray(this.pointer,this.pointer+r)),this.pointer+=r,this.pos+=BigInt(r),t-=r}}else await e.writeBuffer(this.buffer.subarray(this.pointer,this.pointer+t)),this.pointer+=t,this.pos+=BigInt(t);else{if(this.remainingLength()>0){const t=this.remainingLength();await e.writeBuffer(this.buffer.subarray(this.pointer,this.pointer+t)),this.pointer+=t,this.pos+=BigInt(t)}for(;await this.flush_(this.buffer.subarray(0))>0;){const t=this.remainingLength();await e.writeBuffer(this.buffer.subarray(this.pointer,this.pointer+t)),this.pointer+=t,this.pos+=BigInt(t)}}}}},34531:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r(134),i=r(50011);class n{constructor(e=1048576,t=!0,r){if((0,s.A)(this,"data",void 0),(0,s.A)(this,"buffer",void 0),(0,s.A)(this,"pointer",void 0),(0,s.A)(this,"pos",void 0),(0,s.A)(this,"size",void 0),(0,s.A)(this,"littleEndian",void 0),(0,s.A)(this,"error",void 0),(0,s.A)(this,"onFlush",void 0),(0,s.A)(this,"onSeek",void 0),this.pointer=0,this.pos=BigInt(0),this.size=e,this.littleEndian=!t,this.error=0,r&&r.view)this.size=r.length,this.buffer=r,this.data=r.view;else if(r&&!r.byteOffset)this.size=r.length,this.buffer=r,this.data=new DataView(this.buffer.buffer);else{if(r)throw new Error("not support subarray of ArrayBuffer");this.buffer=new Uint8Array(this.size),this.data=new DataView(this.buffer.buffer)}}async writeUint8(e){this.remainingLength()<1&&await this.flush(),this.data.setUint8(this.pointer,e),this.pointer++,this.pos++}async writeUint16(e){this.remainingLength()<2&&await this.flush(),this.data.setUint16(this.pointer,e,this.littleEndian),this.pointer+=2,this.pos+=BigInt(2)}async writeUint24(e){this.remainingLength()<3&&await this.flush();const t=(16711680&e)>>16,r=(65280&e)>>8,s=255&e;this.littleEndian?(await this.writeUint8(s),await this.writeUint8(r),await this.writeUint8(t)):(await this.writeUint8(t),await this.writeUint8(r),await this.writeUint8(s))}async writeUint32(e){this.remainingLength()<4&&await this.flush(),this.data.setUint32(this.pointer,e,this.littleEndian),this.pointer+=4,this.pos+=BigInt(4)}async writeUint64(e){this.remainingLength()<8&&await this.flush(),this.data.setBigUint64(this.pointer,e,this.littleEndian),this.pointer+=8,this.pos+=BigInt(8)}async writeInt8(e){this.remainingLength()<1&&await this.flush(),this.data.setInt8(this.pointer,e),this.pointer++,this.pos++}async writeInt16(e){this.remainingLength()<2&&await this.flush(),this.data.setInt16(this.pointer,e,this.littleEndian),this.pointer+=2,this.pos+=BigInt(2)}async writeInt24(e){await this.writeUint24(e<0?e+16777216:e)}async writeInt32(e){this.remainingLength()<4&&await this.flush(),this.data.setInt32(this.pointer,e,this.littleEndian),this.pointer+=4,this.pos+=BigInt(4)}async writeInt64(e){this.remainingLength()<8&&await this.flush(),this.data.setBigInt64(this.pointer,e,this.littleEndian),this.pointer+=8,this.pos+=BigInt(8)}async writeFloat(e){this.remainingLength()<4&&await this.flush(),this.data.setFloat32(this.pointer,e,this.littleEndian),this.pointer+=4,this.pos+=BigInt(4)}async writeDouble(e){this.remainingLength()<8&&await this.flush(),this.data.setFloat64(this.pointer,e,this.littleEndian),this.pointer+=8,this.pos+=BigInt(8)}getPointer(){return this.pointer}getPos(){return this.pos}remainingLength(){return this.size-this.pointer}async writeBuffer(e){if(!e.length)return;let t=e.length;if(this.remainingLength()<t){let r=0;for(;t>0;){await this.flush();const s=Math.min(this.size,t);this.buffer.set(e.subarray(r,r+s),this.pointer),this.pointer+=s,this.pos+=BigInt(s),r+=s,t-=s}}else this.buffer.set(e,this.pointer),this.pointer+=t,this.pos+=BigInt(t)}async writeString(e){const t=i.encode(e);return await this.writeBuffer(t),t.length}async flush(){if(!this.onFlush)throw this.error=-1048574,Error("IOWriter error, flush failed because of no flush callback");if(this.pointer){const e=await this.onFlush(this.buffer.subarray(0,this.pointer));if(0!==e)throw this.error=e,Error("IOWriter error, flush failed")}this.pointer=0}async flushToPos(e){if(!this.onFlush)throw this.error=-1048574,Error("IOWriter error, flush failed because of no flush callback");if(this.pointer){const t=await this.onFlush(this.buffer.subarray(0,this.pointer),e);if(0!==t)throw this.error=t,Error("IOWriter error, flush failed")}this.pointer=0}async seek(e){if(!this.onSeek)throw this.error=-1048574,Error("IOWriter error, seek failed because of no seek callback");await this.flush();const t=await this.onSeek(e);if(0!==t)throw this.error=t,Error("IOWriter error, seek failed");this.pos=e}seekInline(e){const t=this.pointer;this.pointer=Math.max(0,Math.min(this.size,e)),this.pos+=BigInt(this.pointer-t)}skip(e){const t=this.pointer;this.pointer=Math.min(this.size,this.pointer+e),this.pos+=BigInt(this.pointer-t)}back(e){const t=this.pointer;this.pointer=Math.max(0,this.pointer-e),this.pos+=BigInt(this.pointer-t)}getBuffer(){return this.buffer.subarray(0,this.pointer)}setEndian(e){this.littleEndian=!e}reset(){this.pointer=0,this.pos=BigInt(0),this.error=0}getBufferSize(){return this.size}}},35336:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r(134),i=r(50011);class n{constructor(e=1048576,t=!0,r){if((0,s.A)(this,"data",void 0),(0,s.A)(this,"buffer",void 0),(0,s.A)(this,"pointer",void 0),(0,s.A)(this,"pos",void 0),(0,s.A)(this,"size",void 0),(0,s.A)(this,"littleEndian",void 0),(0,s.A)(this,"error",void 0),(0,s.A)(this,"onFlush",void 0),(0,s.A)(this,"onSeek",void 0),this.pointer=0,this.pos=BigInt(0),this.size=e,this.littleEndian=!t,this.error=0,r&&r.view)this.size=r.length,this.buffer=r,this.data=r.view;else if(r&&!r.byteOffset)this.size=r.length,this.buffer=r,this.data=new DataView(this.buffer.buffer);else{if(r)throw new Error("not support subarray of ArrayBuffer");this.buffer=new Uint8Array(this.size),this.data=new DataView(this.buffer.buffer)}}writeUint8(e){this.remainingLength()<1&&this.flush(),this.data.setUint8(this.pointer,e),this.pointer++,this.pos++}writeUint16(e){this.remainingLength()<2&&this.flush(),this.data.setUint16(this.pointer,e,this.littleEndian),this.pointer+=2,this.pos+=BigInt(2)}writeUint24(e){this.remainingLength()<3&&this.flush();const t=(16711680&e)>>16,r=(65280&e)>>8,s=255&e;this.littleEndian?(this.writeUint8(s),this.writeUint8(r),this.writeUint8(t)):(this.writeUint8(t),this.writeUint8(r),this.writeUint8(s))}writeUint32(e){this.remainingLength()<4&&this.flush(),this.data.setUint32(this.pointer,e,this.littleEndian),this.pointer+=4,this.pos+=BigInt(4)}writeUint64(e){this.remainingLength()<8&&this.flush(),this.data.setBigUint64(this.pointer,e,this.littleEndian),this.pointer+=8,this.pos+=BigInt(8)}writeInt8(e){this.remainingLength()<1&&this.flush(),this.data.setInt8(this.pointer,e),this.pointer++,this.pos++}writeInt16(e){this.remainingLength()<2&&this.flush(),this.data.setInt16(this.pointer,e,this.littleEndian),this.pointer+=2,this.pos+=BigInt(2)}writeInt24(e){this.writeUint24(e<0?e+16777216:e)}writeInt32(e){this.remainingLength()<4&&this.flush(),this.data.setInt32(this.pointer,e,this.littleEndian),this.pointer+=4,this.pos+=BigInt(4)}writeInt64(e){this.remainingLength()<8&&this.flush(),this.data.setBigInt64(this.pointer,e,this.littleEndian),this.pointer+=8,this.pos+=BigInt(8)}writeFloat(e){this.remainingLength()<4&&this.flush(),this.data.setFloat32(this.pointer,e,this.littleEndian),this.pointer+=4,this.pos+=BigInt(4)}writeDouble(e){this.remainingLength()<8&&this.flush(),this.data.setFloat64(this.pointer,e,this.littleEndian),this.pointer+=8,this.pos+=BigInt(8)}getPointer(){return this.pointer}getPos(){return this.pos}remainingLength(){return this.size-this.pointer}writeBuffer(e){if(!e.length)return;let t=e.length;if(this.remainingLength()<t){let r=0;for(;t>0;){this.flush();const s=Math.min(this.size,t);this.buffer.set(e.subarray(r,r+s),this.pointer),this.pointer+=s,this.pos+=BigInt(s),r+=s,t-=s}}else this.buffer.set(e,this.pointer),this.pointer+=t,this.pos+=BigInt(t)}writeString(e){const t=i.encode(e);return this.writeBuffer(t),t.length}flush(){if(!this.onFlush)throw this.error=-1048574,Error("IOWriter error, flush failed because of no flush callback");if(this.pointer){const e=this.onFlush(this.buffer.subarray(0,this.pointer));if(0!==e)throw this.error=e,Error("IOWriter error, flush failed")}this.pointer=0}flushToPos(e){if(!this.onFlush)throw this.error=-1048574,Error("IOWriter error, flush failed because of no flush callback");if(this.pointer){const t=this.onFlush(this.buffer.subarray(0,this.pointer),e);if(0!==t)throw this.error=t,Error("IOWriter error, flush failed")}this.pointer=0}seek(e){if(!this.onSeek)throw this.error=-1048574,Error("IOWriter error, seek failed because of no seek callback");this.flush();const t=this.onSeek(e);if(0!==t)throw this.error=t,Error("IOWriter error, seek failed");this.pos=e}seekInline(e){const t=this.pointer;this.pointer=Math.max(0,Math.min(this.size,e)),this.pos+=BigInt(this.pointer-t)}skip(e){const t=this.pointer;this.pointer=Math.min(this.size,this.pointer+e),this.pos+=BigInt(this.pointer-t)}back(e){const t=this.pointer;this.pointer=Math.max(0,this.pointer-e),this.pos+=BigInt(this.pointer-t)}getBuffer(){return this.buffer.subarray(0,this.pointer)}setEndian(e){this.littleEndian=!e}reset(){this.pointer=0,this.pos=BigInt(0),this.error=0}getBufferSize(){return this.size}}},59475:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var s=r(134),i=r(31830),n=r(65196);class o extends i.A{constructor(e,t=!1){super(e,t),(0,s.A)(this,"commandQueue",void 0),this.commandQueue=new n.A}async write(e){return this.commandQueue.push((async()=>super.write(e)))}async seek(e){return this.commandQueue.push((async()=>super.seek(e)))}async seekToEnd(){return this.commandQueue.push((async()=>super.seekToEnd()))}async resize(e){return this.commandQueue.push((async()=>super.resize(e)))}async read(e,t){return this.commandQueue.push((async()=>super.read(e,t)))}async appendBufferByPosition(e,t){return this.commandQueue.push((async()=>super.appendBufferByPosition(e,t)))}async close(){return this.commandQueue.push((async()=>super.close()))}async destroy(){await super.destroy(),this.commandQueue.clear(),this.commandQueue=null}get writeQueueSize(){var e,t;return null!==(e=null===(t=this.commandQueue)||void 0===t?void 0:t.length)&&void 0!==e?e:0}}},95073:(e,t,r)=>{"use strict";function s(e,t){return e+(t-1)&~(t-1)}r.d(t,{A:()=>s})},31658:(e,t,r)=>{"use strict";function s(e,t){for(;0!==t;)[e,t]=[t,e%t];return e}r.d(t,{A:()=>s})},4304:(e,t,r)=>{"use strict";function s(e){return e<=0?1:Math.pow(2,Math.ceil(Math.log2(e)))}r.d(t,{A:()=>s})},42577:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r(134);class i extends EventTarget{constructor(...e){super(...e),(0,s.A)(this,"peer",void 0),(0,s.A)(this,"onmessage",void 0),(0,s.A)(this,"onmessageerror",void 0)}postMessage(e,t){var r;null!==(r=this.peer)&&void 0!==r&&r.onmessage&&this.peer.onmessage({data:e})}close(){this.peer=null}start(){}}class n{constructor(){(0,s.A)(this,"port1",void 0),(0,s.A)(this,"port2",void 0),this.port1=new i,this.port2=new i,this.port1.peer=this.port2,this.port2.peer=this.port1}}},84149:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>l,S3:()=>u,Wo:()=>d});var s=r(134),i=r(80662),n=r.n(i),o=r(54001),a=r.n(o),c=r(96172),h=r(34677);const d="notify",u="request";class l extends c.A{constructor(e){super(!0),(0,s.A)(this,"port",void 0),(0,s.A)(this,"requestMap",void 0),(0,s.A)(this,"seq",void 0),(0,s.A)(this,"closed",void 0),this.port=e,this.port.onmessage=this.handle.bind(this),this.seq=0,this.requestMap=new(n()),this.port.start(),this.closed=!1}handle(e){const t=e.data,r=t.type,s=t.data;if("notify"===r)this.fire(d,s);else if("reply"===r){const e=this.requestMap.get(s.seq);e&&((0,h.A)(s.result)?e.resolve(s.result):s.error?e.reject(s.error):e.resolve(void 0),this.requestMap.delete(s.seq))}else"request"===r&&this.fire(u,s)}notify(e,t={},r=[]){this.port.postMessage({type:"notify",data:{method:e,params:t}},r)}async request(e,t={},r=[]){return new(a())(((s,i)=>{const n=this.seq++;this.requestMap.set(n,{resolve:s,reject:i}),this.port.postMessage({type:"request",data:{seq:n,method:e,params:t}},r)}))}reply(e,t,r,s=[]){const i={seq:e.seq};(0,h.A)(t)?i.result=t:r&&(i.error=r),null!=s&&s.length?this.port.postMessage({type:"reply",data:i},s):this.port.postMessage({type:"reply",data:i})}getPort(){return this.port}destroy(){this.requestMap.size&&(this.requestMap.forEach((e=>{e.reject("ipc port close")})),this.requestMap.clear()),this.port&&(this.port.close(),this.port=null),this.closed=!0}}},55013:(e,t,r)=>{"use strict";r(84149).Ay},6253:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var s=r(134),i=r(39638),n=r(86932),o=r(47222),a=r(78995);let c,h=0;function d(){return c?(h++,c):(c=new o.A,h=1,c)}function u(){0!==h&&(h--,0===h&&(c.destroy(),c=null))}class l{constructor(e,t=!0){(0,s.A)(this,"messageChannel",void 0),(0,s.A)(this,"interval",void 0),(0,s.A)(this,"started",void 0),(0,s.A)(this,"timer",void 0),(0,s.A)(this,"workerTimer",void 0),(0,s.A)(this,"workerSetTimeout",void 0),(0,s.A)(this,"onClock",void 0),(0,s.A)(this,"nextTick",void 0),(0,s.A)(this,"a",void 0),(0,s.A)(this,"b",void 0),(0,s.A)(this,"beta",void 0),(0,s.A)(this,"alpha",void 0),(0,s.A)(this,"count",void 0),(0,s.A)(this,"equivalent",void 0),(0,s.A)(this,"timestamp",void 0),(0,s.A)(this,"onVisibilityChange",void 0),(0,s.A)(this,"timeoutNext",void 0),(0,s.A)(this,"running",void 0),(0,s.A)(this,"highPerformance",void 0),this.started=!1,this.interval=e,this.highPerformance=t,this.a=.2,this.b=4,this.equivalent=50,this.timestamp=0,this.nextTick=()=>{if(this.started&&!this.running)if(this.running=!0,this.interval>=4||!this.highPerformance)this.timeoutTick();else if(this.interval<=0)this.messageChannel.port1.postMessage(null);else{const e=(0,n.A)();e-this.timestamp>this.equivalent&&(this.count=0,this.timestamp=e),this.count<this.beta?this.messageChannel.port1.postMessage(null):this.timeoutTick()}},this.compute(),this.messageChannel=new MessageChannel,this.handleEvent(),this.timeoutNext=e=>{e?this.workerTimer=null:this.timer=null,this.running=!1,this.count++,this.onClock?this.onClock(this.nextTick):this.nextTick()},(0,i.A)()||"hidden"!==document.visibilityState||(this.workerSetTimeout=d()),this.running=!1}compute(e=!0){this.interval>0&&(this.beta=Math.ceil(this.equivalent*(1-this.b/this.interval)/(this.a-this.b)),this.alpha=Math.floor(this.equivalent/this.interval-this.beta),e&&(this.count=0))}timeoutTick(){this.workerSetTimeout&&"hidden"===document.visibilityState&&this.interval<1e3?this.workerTimer=this.workerSetTimeout.setTimeout(this.timeoutNext,this.interval):this.timer=setTimeout(this.timeoutNext,this.interval)}start(){this.started||(this.started=!0,this.timestamp=(0,n.A)(),this.nextTick())}stop(){this.started=!1,this.timer&&(clearTimeout(this.timer),this.timer=null),this.workerTimer&&this.workerSetTimeout&&this.workerSetTimeout.clearTimeout(this.workerTimer),this.running=!1}isStarted(){return this.started}setInterval(e){this.interval=Math.max(e,0),this.compute()}getInterval(){return this.interval}isZeroTimeout(){return this.interval<4}destroy(){this.stop(),this.workerSetTimeout&&(u(),this.workerSetTimeout=null),this.onVisibilityChange&&(document.removeEventListener("visibilitychange",this.onVisibilityChange),this.onVisibilityChange=null)}handleEvent(){this.messageChannel.port2.onmessage=()=>{this.started&&(this.running=!1,this.count++,this.onClock?this.onClock(this.nextTick):this.nextTick())},(0,i.A)()||(this.onVisibilityChange=(0,a.A)((e=>{"hidden"===document.visibilityState?(this.workerSetTimeout=d(),this.timer&&(clearTimeout(this.timer),this.timer=null,this.running=!1),this.nextTick()):(this.workerTimer&&(this.workerSetTimeout.clearTimeout(this.workerTimer),this.workerTimer=null,this.running=!1),this.timer&&(clearTimeout(this.timer),this.timer=null,this.running=!1),u(),this.workerSetTimeout=null,this.nextTick())}),20),document.addEventListener("visibilitychange",this.onVisibilityChange))}}},39148:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var s=r(134),i=r(54001),n=r.n(i),o=r(6253),a=r(86932);class c{constructor(e,t=0,r=0,i=!0,n=!0){(0,s.A)(this,"task",void 0),(0,s.A)(this,"count",void 0),(0,s.A)(this,"emptyCount",void 0),(0,s.A)(this,"started",void 0),(0,s.A)(this,"clock",void 0),(0,s.A)(this,"timestamp",void 0),(0,s.A)(this,"timeout",void 0),(0,s.A)(this,"interval",void 0),(0,s.A)(this,"startTimer",void 0),(0,s.A)(this,"autoInterval",void 0),(0,s.A)(this,"sync",void 0),(0,s.A)(this,"tickAfter",void 0),(0,s.A)(this,"processing",void 0),this.task=e,this.timeout=t,this.interval=r,this.autoInterval=i,this.sync=n,this.count=0,this.emptyCount=0,this.timestamp=0,this.started=!1,this.processing=!1,this.clock=new o.A(this.interval),this.clock.onClock=e=>{if(this.started)if(this.count++,this.sync)this.tickAfter&&(this.tickAfter(),this.tickAfter=null),!1===this.task()?this.stop():this.next(e);else{if(this.processing)return;this.processing=!0,this.task().then((t=>{this.processing=!1,this.tickAfter&&(this.tickAfter(),this.tickAfter=null),!1===t?this.stop():this.next(e)}))}}}next(e){if(!this.started)return;const t=(0,a.A)();if(this.autoInterval&&t-this.timestamp>50){const e=this.emptyCount/this.count;0===this.emptyCount?this.clock.setInterval(Math.max(this.clock.getInterval()>>1,this.interval)):e<.1?this.clock.setInterval(this.clock.getInterval()-1):e>.2?this.clock.setInterval(Math.min(this.clock.getInterval()+1,20)):e>.5&&this.clock.setInterval(this.clock.getInterval()<<1),this.count=0,this.emptyCount=0,this.timestamp=t}e()}start(){this.started=!0,this.timeout?this.startTimer=setTimeout((()=>{this.count=0,this.emptyCount=0,this.timestamp=(0,a.A)(),this.clock.start(),this.startTimer=null}),this.timeout):(this.count=0,this.emptyCount=0,this.timestamp=(0,a.A)(),this.clock.start())}stop(){this.started=!1,this.processing=!1,this.startTimer&&(clearTimeout(this.startTimer),this.startTimer=null),this.clock.stop()}async stopBeforeNextTick(){if(this.startTimer&&(clearTimeout(this.startTimer),this.startTimer=null),this.clock.isStarted())return this.sync?(this.started=!1,this.processing=!1,void this.clock.stop()):new(n())((e=>{this.tickAfter=()=>{this.started=!1,this.processing=!1,this.clock.stop(),e()}}))}isStarted(){return this.started}emptyTask(){this.emptyCount++}isZeroTimeout(){var e;return null===(e=this.clock)||void 0===e?void 0:e.isZeroTimeout()}restart(){this.clock&&(this.stop(),this.clock.setInterval(this.interval),this.start())}resetInterval(){this.clock.setInterval(Math.max(this.clock.getInterval()>>1,this.interval)),this.emptyCount=0,this.count=0,this.timestamp=(0,a.A)()}destroy(){this.stop(),this.task=null,this.timeout=null,this.interval=null}}},13724:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var s=r(134),i=r(45249),n=r.n(i);class o{constructor(e){(0,s.A)(this,"timeout",void 0),(0,s.A)(this,"timer",void 0),(0,s.A)(this,"resolve",void 0),(0,s.A)(this,"reject",void 0),(0,s.A)(this,"startTime",void 0),this.timeout=e}then(e,t){this.resolve=e,this.reject=t,this.startTime=n()(),this.timer=setTimeout((()=>{this.resolve(n()()-this.startTime),this.timer=null}),1e3*this.timeout)}stop(e=!0){this.timer&&(clearTimeout(this.timer),this.timer=null,this.resolve&&e?this.resolve(n()()-this.startTime):this.reject&&!e&&this.reject(n()()-this.startTime))}reset(e){e&&(this.timeout=e),this.timer&&(clearTimeout(this.timer),this.timer=setTimeout((()=>{this.resolve(n()()-this.startTime),this.timer=null}),1e3*this.timeout))}}},54058:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var s=r(134);class i{constructor(e,t,r){(0,s.A)(this,"task",void 0),(0,s.A)(this,"timeout",void 0),(0,s.A)(this,"interval",void 0),(0,s.A)(this,"timer",void 0),this.task=e,this.timeout=t,this.interval=r}start(){const e=this;e.stop();let t=e.timeout;const r=e.interval,s=function(){!1!==e.task()&&e.timer?e.timer=setTimeout(s,e.interval):e.stop()};null==t&&(t=r),e.timer=setTimeout(s,t)}stop(){this.timer&&(clearTimeout(this.timer),this.timer=null)}updateInterval(e){this.interval=e}isStarted(){return!!this.timer}destroy(){this.stop(),this.task=this.timeout=this.interval=null}}},47222:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var s=r(134),i=r(80662),n=r.n(i);function o(e){e.addEventListener("message",(t=>{var r;let s=t.data.data;setTimeout((()=>{e.postMessage({type:"pong",id:s.id})}),Math.max(null!==(r=s.timeout)&&void 0!==r?r:0,4))}))}class a{constructor(){(0,s.A)(this,"worker",void 0),(0,s.A)(this,"workerUrl",void 0),(0,s.A)(this,"taskMap",void 0),(0,s.A)(this,"id",void 0),this.id=0,this.taskMap=new(n());const e=`\n      ${o.toString()}\n      ${o.name}(self)\n    `,t=new Blob([e],{type:"text/javascript"});this.workerUrl=URL.createObjectURL(t),this.worker=new Worker(this.workerUrl),this.worker.addEventListener("message",(e=>{const t=e.data,r=t.type,s=t.id;if("pong"===r){const e=this.taskMap.get(s);e&&e(!0)}}))}setTimeout(e,t=0){const r=this.id++;return this.taskMap.set(r,e),this.worker.postMessage({type:"ping",data:{timeout:t,id:r}}),r}clearTimeout(e){this.taskMap.delete(e)}destroy(){this.worker&&(this.worker.terminate(),this.worker=null),this.workerUrl&&(URL.revokeObjectURL(this.workerUrl),this.workerUrl=null),this.taskMap&&(this.taskMap.clear(),this.taskMap=null)}}},72739:(e,t,r)=>{"use strict";r.d(t,{$r:()=>u,El:()=>l,TF:()=>h,VC:()=>c,_:()=>f,__:()=>o,zy:()=>d});var s=r(67672),i=r(10576),n=r(56401);function o(e,t,r){if(!e)return;const{length:s}=e;if(s)if(r)for(let r=s-1;r>=0&&t(e[r],r)!==i.W8;r--);else for(let r=0;r<s&&t(e[r],r)!==i.W8;r++);}function a(e,t){e[e.length]=t}function c(e,t){!function(e,t,r){s.YO(t)?o(t,(function(t){r(e,t)})):r(e,t)}(e,t,a)}function h(e,t,r){let s=0;return o(e,(function(n,o){(r===i.W8?n==t:n===t)&&(e.splice(o,1),s++)}),i.rT),s}function d(e,t,r){return function(e,t,r){let s=i.Cy;return o(e,(function(e,n){if(r===i.W8?e==t:e===t)return s=n,i.W8})),s}(e,t,r)>=0}function u(e){return s.YO(e)?e:(0,n.A)(i.Ml.slice,e)}function l(e,t){let r=0,s=e.length-1,i=-1;for(;r<=s;){let n=(r+s)/2>>>0;const o=t(e[n]);if(0===o){i=n;break}1===o?r=n+1:(s=n-1,i=n)}return i}function f(e,t,r){const s=l(e,r);s>-1?e.splice(s,0,t):e.push(t)}},90932:(e,t,r)=>{"use strict";r.d(t,{l:()=>i});const s="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567";function i(e,t=!0){const r=e.length;let i=0,n=0,o="";for(let t=0;t<r;t++)for(n=n<<8|e[t],i+=8;i>=5;)o+=s[n>>>i-5&31],i-=5;if(i>0&&(o+=s[n<<5-i&31]),t)for(;o.length%8!=0;)o+="=";return o}},4919:(e,t,r)=>{"use strict";r.d(t,{E_:()=>n});var s=r(72739);const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function n(e){const t="function"==typeof atob?atob(e):function(e){function t(e){const t=i.indexOf(e);return-1===t?0:t}let r="";for(let s=0;s<e.length;){const i=t(e[s++]),n=t(e[s++]),o=t(e[s++]),a=t(e[s++]),c=i<<2|n>>4,h=(15&n)<<4|o>>2,d=(3&o)<<6|a;r+=String.fromCharCode(c),64!==o&&(r+=String.fromCharCode(h)),64!==a&&(r+=String.fromCharCode(d))}return r}(e),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);return r}const o={};s.__(["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"],((e,t)=>{o[e]=t}))},43607:(e,t,r)=>{"use strict";function s(e){return e>0?e:-e}function i(e,t){return e>t?e:t}function n(e,t){return e>t?t:e}r.d(t,{T9:()=>i,jk:()=>n,tn:()=>s})},86834:(e,t,r)=>{"use strict";r.d(t,{A:()=>p});var s=r(29967),i=r.n(s),n=r(72739),o=r(67672),a=r(84504),c=r(44690);function h(e){return o.Yj(e)&&e.split(".").shift()||""}const d=[["alipay",/alipay/],["wechat",/micromessenger/],["dingtalk",/dingtalk[ \/]([\d_.]+)/],["baiduApp",/baiduboxapp/],["baidu",/baidubrowser/],["baidu",/bdbrowser/],["uc",/ucbrowser/],["uc",/ucweb/],["qq",/qqbrowser/],["qqApp",/qq/],["ie",/iemobile[ \/]([\d_.]+)/],["ie",/msie[ \/]([\d_.]+)/],["ie",/trident[ \/]([\d_.]+)/,4],["edge",/edge[ \/]([\d_.]+)/],["newEdge",/edg[ \/]([\d_.]+)/],["chrome",/chrome[ \/]([\d_.]+)/],["firefox",/firefox[ \/]([\d_.]+)/],["opera",/opera(?:.*version)?[ \/]([\d_.]+)/],["safari",/version[ \/]([\d_.]+) safari/],["safari",/version[ \/]([\d_.]+) \S* safari/],["safari",/safari/]],u={},l={},f=function(e){let t,r;return(0,n.__)(d,(s=>{let n=s[1].exec(e);if(n)return t=s[0],r=n[1],r&&(r=r.replace(/_/g,"."),s[2]&&(r=i()(r,10)+s[2]+".0")),!1})),"safari"!==t||r||(r=c.A.version),{name:t||"",version:r||"",majorVersion:(u[t]||h)(r),checkVersion:l[t]||a.A}}(("object"==typeof navigator&&navigator.userAgent||"").toLowerCase());f.name&&(f[f.name]=!0);const p=f},10576:(e,t,r)=>{"use strict";r.d(t,{Cq:()=>a,Cy:()=>h,M_:()=>p,Ml:()=>A,TK:()=>m,W8:()=>o,ZG:()=>l,ZH:()=>c,aV:()=>d,jf:()=>f,rT:()=>n,s0:()=>u,u1:()=>v,x7:()=>g});var s=r(7403),i=r.n(s);const n=!0,o=!1,a=null,c=void 0,h=-1,d="undefined",u="function",l=".",f=typeof window!==d?window:c,p=(typeof document!==d&&document,typeof globalThis!==d?globalThis:typeof r.g!==d?r.g:f),m=typeof self!==d?self:p,g=function(){},A=(i()({}),i()([])),v=""},67672:(e,t,r)=>{"use strict";r.d(t,{Ik:()=>d,Pc:()=>c,YO:()=>h,Yj:()=>u,ai:()=>l,o:()=>f,sH:()=>m,sv:()=>g,zM:()=>p});var s=r(68632),i=r.n(s),n=r(88032),o=r.n(n),a=r(10576);function c(e){return typeof e===a.s0}function h(e){return i()(e)}function d(e){return e!==a.Cq&&"object"==typeof e}function u(e){return"string"==typeof e}function l(e){return"number"==typeof e&&!isNaN(e)}function f(e){return"bigint"==typeof e}function p(e){return"boolean"==typeof e}function m(e){return l(e)||u(e)&&!isNaN(o()(e))&&isFinite(+e)}function g(e){return e instanceof ArrayBuffer}},10534:(e,t,r)=>{"use strict";r.d(t,{__:()=>n}),r(20525);var s=r(10576);const i={};function n(e,t){const r=i.hasOwnProperty(e)?i[e]:i[e]=e.split(s.ZG);for(let e=0,i=r.length-1;e<=i&&t(r[e],e===i)!==s.W8;e++);}},4624:(e,t,r)=>{"use strict";r.d(t,{R8:()=>y,V$:()=>g,Yz:()=>v,h2:()=>_,pq:()=>w,rD:()=>a,z3:()=>b});var s=r(10576),i=r(62100);const n=0,o=1,a=2,c=3,h=4,d=5,u=typeof console!==s.aV?console:s.Cq,l=/common/.test((0,i.A)(s.x7))?a:c,f=(s.jf&&/edge|msie|trident/i.test(s.jf.navigator.userAgent),s.u1),p=u?f?function(e,t,r){u.log(f+e,r,t)}:function(e,t){u.log(e,t)}:s.x7;function m(){if(s.M_){const e=s.TK.COMMON_LOG_LEVEL;if(e>=n&&e<=d)return e}return l}function g(e){s.TK.COMMON_LOG_LEVEL=e}function A(e){return`background-color:${e};border-radius:12px;color:#fff;font-size:10px;padding:3px 6px;`}function v(e,t,r){m()<=o&&p(`[${arguments[1]}][line ${arguments[2]}] [debug]`,e,A("#999"))}function w(e,t,r){m()<=a&&p(`[${arguments[1]}][line ${arguments[2]}] [info]`,e,A("#2db7f5"))}function y(e,t,r){m()<=c&&p(`[${arguments[1]}][line ${arguments[2]}] [warn]`,e,A("#f90"))}function b(e,t,r){m()<=h&&p(`[${arguments[1]}][line ${arguments[2]}] [error]`,e,A("#ed4014"))}function _(e,t,r){if(m()<=d)throw b(e,t,r),new Error(`[${arguments[1]}][line ${arguments[2]}] [fatal]: ${e}`)}},95335:(e,t,r)=>{"use strict";r.d(t,{C:()=>f,HP:()=>h,X$:()=>l,__:()=>d,zy:()=>p});var s=r(69736),i=r.n(s),n=r(67672),o=r(72739),a=r(10576),c=(r(10534),r(34677));function h(e){return(0,c.A)(e)?i()(e):[]}function d(e,t){for(let r in e)if(t(e[r],r)===a.W8)break}function u(e,t){return n.Ik(e)?n.Ik(t)?(d(t,(function(t,r){e[r]=t})),e):e:t}function l(e,t,r){return u(u(e,t),r)}function f(e,t){let r=e;return n.YO(e)?t?(r=[],o.__(e,(function(e,s){r[s]=f(e,t)}))):r=e.slice():n.Ik(e)&&(r={},d(e,(function(e,s){r[s]=t?f(e,t):e}))),r}function p(e,t){return e[t]!==a.ZH}},44690:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var s=r(72739);const i=[["harmony",/harmonyos ([\d_.]+)/],["harmony",/openharmony ([\d_.]+)/],["iphone",/iphone os ([\d_.]+)/],["ipad",/ipad; cpu os ([\d_.]+)/],["itouch",/itouch; cpu os ([\d_.]+)/],["android",/android ([\d_.]+)/],["wp",/windows phone ([\d_.]+)/],["windows",/windows nt ([\d_.]+)/],["linux",/linux/],["mac",/mac os x ([\d_.]+)/]],n=function(e){let t,r;return(0,s.__)(i,(s=>{let i=s[1].exec(e);if(i)return t=s[0],r=i[1],r&&(r=r.replace(/_/g,".")),!1})),{name:t||"",version:r||"",mobile:e.indexOf("mobile")>-1}}(("object"==typeof navigator&&navigator.userAgent||"").toLowerCase());n.name&&(n[n.name]=!0,{iphone:1,ipad:1,itouch:1}[n.name]&&(n.ios=!0));const o=n},20525:(e,t,r)=>{"use strict";r.d(t,{GP:()=>u,di:()=>c,qh:()=>h,zy:()=>d});var s=r(29967),i=r.n(s),n=r(67672),o=r(10576),a=r(62100);function c(e,t,r){return n.ai(r)?t===r?o.u1:e.slice(t,r):e.slice(t)}function h(e,t,r){return e.indexOf(t,r!==o.ZH?r:0)}function d(e,t){return h(e,t)>=0}function u(e,...t){let r=0;const s=t.length;return e.replace(/(%[sdvx%])|(%0(\d)+[dx])/g,(e=>{if(r>=s)return e;const n=t[r++];if(/%0(\d)+[dx]/g.test(e)){const t=i()(e.substring(1));let r="d"===e[e.length-1]?(0,a.A)(Number(n)):Number(n).toString(16);return t>r.length&&(r=new Array(t-r.length).fill("0").join("")+r),r}switch(e){case"%%":return"%";case"%s":return String(n);case"%d":return(0,a.A)(Number(n));case"%v":return"";case"%x":return Number(n).toString(16)}return e}))}},95797:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var s=r(20149),i=r.n(s),n=r(39638),o=r(86834),a=r(44690);const c=function(){let e="function"==typeof Blob,t="object"==typeof WebAssembly&&"function"==typeof WebAssembly.instantiate,r="function"==typeof fetch,s="object"==typeof document&&document.createElement("canvas"),c=s&&!!s.getContext("webgl"),h="function"==typeof OffscreenCanvas,d="function"==typeof Worker,u="function"==typeof ArrayBuffer,l="object"==typeof Atomics&&"Atomics"===Atomics[i()],f="function"==typeof AudioContext||"function"==typeof webkitAudioContext,p="function"==typeof AudioWorklet,m="function"==typeof VideoDecoder,g="function"==typeof VideoEncoder,A="function"==typeof AudioDecoder,v="function"==typeof AudioEncoder,w="function"==typeof SharedArrayBuffer,y="function"==typeof MediaSource||"function"==typeof ManagedMediaSource,b="function"==typeof Proxy,_=(d||(0,n.A)())&&w&&l&&b,k="function"==typeof WebAssembly.Suspending&&"function"==typeof WebAssembly.promising;(o.A.safari&&!o.A.checkVersion(o.A.majorVersion,"11",!0)||a.A.ios&&!o.A.checkVersion(a.A.version,"11",!0))&&(t=!1),o.A.chrome&&!o.A.checkVersion(o.A.majorVersion,"94",!0)&&(m=!1,A=!1),(o.A.safari&&!o.A.checkVersion(o.A.majorVersion,"17",!0)||a.A.ios&&!o.A.checkVersion(a.A.version,"17",!0))&&(m=!1);let x="object"==typeof navigator&&"object"==typeof navigator.gpu,I="function"==typeof MediaSourceHandle,M=t&&"function"==typeof WebAssembly.Global;return{browser:o.A,blob:e,wasm:t,fetch:r,webgl:c,worker:d,mse:y,arrayBuffer:u,audioContext:f,audioWorklet:p,videoDecoder:m,videoEncoder:g,audioDecoder:A,audioEncoder:v,atomics:l,shareArrayBuffer:w,thread:_,webgpu:x,offscreenCanvas:h,workerMSE:I,webAssemblyGlobal:M,jspi:k,proxy:b,simd:(o.A.chrome||o.A.newEdge)&&o.A.checkVersion(o.A.majorVersion,"91",!0)||o.A.firefox&&o.A.checkVersion(o.A.majorVersion,"89",!0)||o.A.safari&&o.A.checkVersion(o.A.version,"16.4",!0)||a.A.ios&&o.A.checkVersion(a.A.version,"16.4",!0),wasmPlayerSupported:r&&t&&c&&f&&u&&M,wasmBaseSupported:t&&M&&u}}()},50011:(e,t,r)=>{"use strict";r.r(t),r.d(t,{decode:()=>a,encode:()=>n});const s="function"==typeof TextEncoder?new TextEncoder:null,i="function"==typeof TextDecoder?new TextDecoder:null;function n(e){if(s)return s.encode(e);const t=[];for(let r=0;r<e.length;++r){let s=e.charCodeAt(r);s>=55296&&s<=57343&&(s=65536+((1023&s)<<10)|1023&e.charCodeAt(++r)),s<=127?t.push(s):s<=2047?(t.push(192|s>>6),t.push(128|63&s)):s<=65535?(t.push(224|s>>12),t.push(128|s>>6&63),t.push(128|63&s)):(t.push(240|s>>18),t.push(128|s>>12&63),t.push(128|s>>6&63),t.push(128|63&s))}return new Uint8Array(t)}function o(e){let t="";for(let r=0;r<e.length;){let s=e[r++>>>0];if(!(128&s)){t+=String.fromCharCode(s);continue}let i=63&e[r++>>>0];if(192==(224&s)){t+=String.fromCharCode((31&s)<<6|i);continue}let n=63&e[r++>>>0];if(s=224==(240&s)?(15&s)<<12|i<<6|n:(7&s)<<18|i<<12|n<<6|63&e[r++>>>0],s<65536)t+=String.fromCharCode(s);else{let e=s-65536;t+=String.fromCharCode(55296|e>>10,56320|1023&e)}}return t}function a(e){if(e instanceof Uint8Array&&i&&!("function"==typeof SharedArrayBuffer&&e.buffer instanceof SharedArrayBuffer))try{return i.decode(e)}catch(t){return o(e)}return o(e)}},8507:(e,t,r)=>{"use strict";function s(e){const t=e,r=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],s=/:\/\/([^\/@]*@?)\[(\S+)\]/;let i="";s.test(e)&&(e=e.replace(s,((e,t,r)=>(i=r,`://${t||""}a.b`))));const n={},o=/^(?:(?![^:@\/]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*)(?::([^:@\/]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e);let a=14;for(;a--;){var c;n[r[a]]=null!==(c=o[a])&&void 0!==c?c:""}return i&&(n.host=i,n.source=t,n.authority=i+(n.port?":"+n.port:"")),{protocol:n.protocol,file:n.file,host:n.host,port:n.port,user:n.user,password:n.password,origin:`${n.protocol}://${n.authority}`,pathname:n.path,search:`?${n.query}`,hash:n.anchor?`#${n.anchor}`:""}}r.d(t,{ll:()=>u,qg:()=>s}),r(73146),r(67672),r(6498),r(72739),r(95335);const i=/(?:\/|^)\.(?=\/)/g,n=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,o=/^(?=([^\/?#]*))\1([^]*)$/,a=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/;function c(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}function h(e){const t=a.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null}function d(e){for(e=e.split("").reverse().join("").replace(i,"");e.length!==(e=e.replace(n,"")).length;);return e.split("").reverse().join("")}function u(e,t,r){if(r=r||{},e=e.trim(),!(t=t.trim())){if(!r.alwaysNormalize)return e;let t=h(e);if(!t)throw new Error("Error trying to parse base URL.");return t.path=d(t.path),c(t)}let s=h(t);if(!s)throw new Error("Error trying to parse relative URL.");if(s.scheme)return r.alwaysNormalize?(s.path=d(s.path),c(s)):t;let i=h(e);if(!i)throw new Error("Error trying to parse base URL.");if(!i.netLoc&&i.path&&"/"!==i.path[0]){let e=o.exec(i.path);i.netLoc=e[1],i.path=e[2]}i.netLoc&&!i.path&&(i.path="/");const n={scheme:i.scheme,netLoc:s.netLoc,path:null,params:s.params,query:s.query,fragment:s.fragment};if(!s.netLoc&&(n.netLoc=i.netLoc,"/"!==s.path[0]))if(s.path){let e=i.path,t=e.substring(0,e.lastIndexOf("/")+1)+s.path;n.path=d(t)}else n.path=i.path,s.params||(n.params=i.params,s.query||(n.query=i.query));return null===n.path&&(n.path=r.alwaysNormalize?d(s.path):s.path),c(n)}},88096:(e,t,r)=>{"use strict";r.d(t,{$z:()=>f,GW:()=>c,WP:()=>d,bx:()=>p,p2:()=>u,tt:()=>l});var s=r(729),i=r(31865),n=r(86834),o=r(44690);function a(e){let t=0,r=0;for(;;){const s=e.readUint8();if(t|=(127&s)<<r,r+=7,!(128&s))break}return t}async function c(e){let t=0,r=0;for(;;){const s=await e.readUint8();if(t|=(127&s)<<r,r+=7,!(128&s))break}return t}function h(e){let t,r=0,s=0;for(;t=e.readUint8(),r|=(127&t)<<s,s+=7,128&t;);return 64&t&&(r|=-1<<s),r}async function d(e){let t,r=0,s=0;for(;t=await e.readUint8(),r|=(127&t)<<s,s+=7,128&t;);return 64&t&&(r|=-1<<s),r}function u(e,t){let r=!0;for(;r;){let s=127&t;0==(t>>=7)&&!(64&s)||-1===t&&64&s?r=!1:s|=128,e.writeUint8(s)}}function l(e,t){do{let r=127&t;0!=(t>>=7)&&(r|=128),e.writeUint8(r)}while(0!==t)}async function f(e,t){do{let r=127&t;0!=(t>>=7)&&(r|=128),await e.writeUint8(r)}while(0!==t)}function p(e,t){const r=new i.A(e,!0),c=new s.A(new Uint8Array(e.length+100),!0);for(c.writeBuffer(r.readBuffer(8));r.remainingSize();){const e=r.readUint8();c.writeUint8(e);const i=a(r);if(2===e){const e=new s.A(new Uint8Array(i+100));let d=a(r);for(l(e,d);d--;){const s=a(r);l(e,s),e.writeBuffer(r.readBuffer(s));const i=a(r);l(e,i),e.writeBuffer(r.readBuffer(i));const c=r.readUint8();switch(e.writeUint8(c),c){case 0:l(e,a(r));break;case 3:u(e,h(r)),l(e,a(r));break;case 2:{let s=a(r);t.shared?l(e,2|s):l(e,-3&s);const i=a(r);if(l(e,t.initial||i),1&s){let s=a(r);!t.maximum||o.A.ios&&!n.A.checkVersion(o.A.version,"17",!0)&&t.shared||(s=t.maximum),l(e,s)}break}case 1:{u(e,h(r));const t=a(r);l(e,t),l(e,a(r)),1&t&&l(e,a(r));break}}}const f=e.getWroteBuffer();l(c,f.length),c.writeBuffer(f)}else l(c,i),c.writeBuffer(r.readBuffer(i))}return c.getWroteBuffer()}},49804:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var s=r(134),i=r(16030),n=r(4624),o=r(9705);class a{constructor(e){(0,s.A)(this,"scaler",void 0),(0,s.A)(this,"options",void 0),(0,s.A)(this,"inputParameters",void 0),(0,s.A)(this,"outputParameters",void 0),this.options=e,this.scaler=new i.A(this.options.resource)}async open(e,t,r=2){this.inputParameters=e,this.outputParameters=t,await this.scaler.run(),this.scaler.invoke("scale_set_input_parameters",e.width,e.height,e.format),this.scaler.invoke("scale_set_output_parameters",t.width,t.height,t.format);let s=this.scaler.invoke("scale_init",r);return s<0?(n.z3(`open scaler failed, ret: ${s}`,"src/videoscale/VideoScaler.ts",93),o.nr):0}scale(e,t){return this.scaler.invoke("scale_process",e,t)}close(){this.scaler.invoke("scale_destroy"),this.scaler.destroy(),this.scaler=null}getInputScaleParameters(){return this.inputParameters}getOutputScaleParameters(){return this.outputParameters}}},37149:(e,t,r)=>{r(18355),e.exports=r(46438).Array.isArray},87172:(e,t,r)=>{r(23204),e.exports=r(46438).Date.now},85079:(e,t,r)=>{var s=r(46438),i=s.JSON||(s.JSON={stringify:JSON.stringify});e.exports=function(e){return i.stringify.apply(i,arguments)}},92861:(e,t,r)=>{r(78978),r(97863),r(7914),r(96050),r(28337),r(74674),r(62223),e.exports=r(46438).Map},92696:(e,t,r)=>{r(74712);var s=r(46438).Object;e.exports=function(e,t,r){return s.defineProperty(e,t,r)}},22948:(e,t,r)=>{r(51780),e.exports=r(46438).Object.freeze},62160:(e,t,r)=>{r(18128),e.exports=r(46438).Object.getPrototypeOf},47567:(e,t,r)=>{r(96847),e.exports=r(46438).Object.keys},21724:(e,t,r)=>{r(4284),e.exports=r(46438).Object.setPrototypeOf},27279:(e,t,r)=>{r(95828),e.exports=r(46438).parseFloat},25216:(e,t,r)=>{r(65331),e.exports=r(46438).parseInt},34750:(e,t,r)=>{r(78978),r(97863),r(7914),r(91229),r(2639),r(46121),e.exports=r(46438).Promise},31707:(e,t,r)=>{r(66801),e.exports=r(46438).setImmediate},16560:(e,t,r)=>{r(19626),r(78978),r(42860),r(60716),e.exports=r(46438).Symbol},54220:(e,t,r)=>{r(97863),r(7914),e.exports=r(84336).f("iterator")},39967:(e,t,r)=>{e.exports=r(84336).f("toPrimitive")},48652:(e,t,r)=>{r(78978),e.exports=r(84336).f("toStringTag")},25219:e=>{e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},12560:e=>{e.exports=function(){}},2832:e=>{e.exports=function(e,t,r,s){if(!(e instanceof t)||void 0!==s&&s in e)throw TypeError(r+": incorrect invocation!");return e}},80812:(e,t,r)=>{var s=r(24401);e.exports=function(e){if(!s(e))throw TypeError(e+" is not an object!");return e}},77076:(e,t,r)=>{var s=r(95838);e.exports=function(e,t){var r=[];return s(e,!1,r.push,r,t),r}},84448:(e,t,r)=>{var s=r(65133),i=r(70181),n=r(72917);e.exports=function(e){return function(t,r,o){var a,c=s(t),h=i(c.length),d=n(o,h);if(e&&r!=r){for(;h>d;)if((a=c[d++])!=a)return!0}else for(;h>d;d++)if((e||d in c)&&c[d]===r)return e||d||0;return!e&&-1}}},48219:(e,t,r)=>{var s=r(58852),i=r(7001),n=r(66310),o=r(70181),a=r(99244);e.exports=function(e,t){var r=1==e,c=2==e,h=3==e,d=4==e,u=6==e,l=5==e||u,f=t||a;return function(t,a,p){for(var m,g,A=n(t),v=i(A),w=s(a,p,3),y=o(v.length),b=0,_=r?f(t,y):c?f(t,0):void 0;y>b;b++)if((l||b in v)&&(g=w(m=v[b],b,A),e))if(r)_[b]=g;else if(g)switch(e){case 3:return!0;case 5:return m;case 6:return b;case 2:_.push(m)}else if(d)return!1;return u?-1:h||d?d:_}}},49742:(e,t,r)=>{var s=r(24401),i=r(15461),n=r(30254)("species");e.exports=function(e){var t;return i(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!i(t.prototype)||(t=void 0),s(t)&&null===(t=t[n])&&(t=void 0)),void 0===t?Array:t}},99244:(e,t,r)=>{var s=r(49742);e.exports=function(e,t){return new(s(e))(t)}},44968:(e,t,r)=>{var s=r(93417),i=r(30254)("toStringTag"),n="Arguments"==s(function(){return arguments}());e.exports=function(e){var t,r,o;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),i))?r:n?s(t):"Object"==(o=s(t))&&"function"==typeof t.callee?"Arguments":o}},93417:e=>{var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},95933:(e,t,r)=>{"use strict";var s=r(78423).f,i=r(22087),n=r(30953),o=r(58852),a=r(2832),c=r(95838),h=r(88839),d=r(20322),u=r(45274),l=r(58219),f=r(75172).fastKey,p=r(6096),m=l?"_s":"size",g=function(e,t){var r,s=f(t);if("F"!==s)return e._i[s];for(r=e._f;r;r=r.n)if(r.k==t)return r};e.exports={getConstructor:function(e,t,r,h){var d=e((function(e,s){a(e,d,t,"_i"),e._t=t,e._i=i(null),e._f=void 0,e._l=void 0,e[m]=0,null!=s&&c(s,r,e[h],e)}));return n(d.prototype,{clear:function(){for(var e=p(this,t),r=e._i,s=e._f;s;s=s.n)s.r=!0,s.p&&(s.p=s.p.n=void 0),delete r[s.i];e._f=e._l=void 0,e[m]=0},delete:function(e){var r=p(this,t),s=g(r,e);if(s){var i=s.n,n=s.p;delete r._i[s.i],s.r=!0,n&&(n.n=i),i&&(i.p=n),r._f==s&&(r._f=i),r._l==s&&(r._l=n),r[m]--}return!!s},forEach:function(e){p(this,t);for(var r,s=o(e,arguments.length>1?arguments[1]:void 0,3);r=r?r.n:this._f;)for(s(r.v,r.k,this);r&&r.r;)r=r.p},has:function(e){return!!g(p(this,t),e)}}),l&&s(d.prototype,"size",{get:function(){return p(this,t)[m]}}),d},def:function(e,t,r){var s,i,n=g(e,t);return n?n.v=r:(e._l=n={i:i=f(t,!0),k:t,v:r,p:s=e._l,n:void 0,r:!1},e._f||(e._f=n),s&&(s.n=n),e[m]++,"F"!==i&&(e._i[i]=n)),e},getEntry:g,setStrong:function(e,t,r){h(e,t,(function(e,r){this._t=p(e,t),this._k=r,this._l=void 0}),(function(){for(var e=this,t=e._k,r=e._l;r&&r.r;)r=r.p;return e._t&&(e._l=r=r?r.n:e._t._f)?d(0,"keys"==t?r.k:"values"==t?r.v:[r.k,r.v]):(e._t=void 0,d(1))}),r?"entries":"values",!r,!0),u(t)}}},5874:(e,t,r)=>{var s=r(44968),i=r(77076);e.exports=function(e){return function(){if(s(this)!=e)throw TypeError(e+"#toJSON isn't generic");return i(this)}}},99373:(e,t,r)=>{"use strict";var s=r(66670),i=r(88535),n=r(75172),o=r(81984),a=r(2677),c=r(30953),h=r(95838),d=r(2832),u=r(24401),l=r(1356),f=r(78423).f,p=r(48219)(0),m=r(58219);e.exports=function(e,t,r,g,A,v){var w=s[e],y=w,b=A?"set":"add",_=y&&y.prototype,k={};return m&&"function"==typeof y&&(v||_.forEach&&!o((function(){(new y).entries().next()})))?(y=t((function(t,r){d(t,y,e,"_c"),t._c=new w,null!=r&&h(r,A,t[b],t)})),p("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),(function(e){var t="add"==e||"set"==e;!(e in _)||v&&"clear"==e||a(y.prototype,e,(function(r,s){if(d(this,y,e),!t&&v&&!u(r))return"get"==e&&void 0;var i=this._c[e](0===r?0:r,s);return t?this:i}))})),v||f(y.prototype,"size",{get:function(){return this._c.size}})):(y=g.getConstructor(t,e,A,b),c(y.prototype,r),n.NEED=!0),l(y,e),k[e]=y,i(i.G+i.W+i.F,k),v||g.setStrong(y,e,A),y}},46438:e=>{var t=e.exports={version:"2.6.12"};"number"==typeof __e&&(__e=t)},58852:(e,t,r)=>{var s=r(25219);e.exports=function(e,t,r){if(s(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,s){return e.call(t,r,s)};case 3:return function(r,s,i){return e.call(t,r,s,i)}}return function(){return e.apply(t,arguments)}}},87608:e=>{e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},58219:(e,t,r)=>{e.exports=!r(81984)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},3802:(e,t,r)=>{var s=r(24401),i=r(66670).document,n=s(i)&&s(i.createElement);e.exports=function(e){return n?i.createElement(e):{}}},77956:e=>{e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},36473:(e,t,r)=>{var s=r(54311),i=r(59820),n=r(36569);e.exports=function(e){var t=s(e),r=i.f;if(r)for(var o,a=r(e),c=n.f,h=0;a.length>h;)c.call(e,o=a[h++])&&t.push(o);return t}},88535:(e,t,r)=>{var s=r(66670),i=r(46438),n=r(58852),o=r(2677),a=r(75509),c="prototype",h=function(e,t,r){var d,u,l,f=e&h.F,p=e&h.G,m=e&h.S,g=e&h.P,A=e&h.B,v=e&h.W,w=p?i:i[t]||(i[t]={}),y=w[c],b=p?s:m?s[t]:(s[t]||{})[c];for(d in p&&(r=t),r)(u=!f&&b&&void 0!==b[d])&&a(w,d)||(l=u?b[d]:r[d],w[d]=p&&"function"!=typeof b[d]?r[d]:A&&u?n(l,s):v&&b[d]==l?function(e){var t=function(t,r,s){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,r)}return new e(t,r,s)}return e.apply(this,arguments)};return t[c]=e[c],t}(l):g&&"function"==typeof l?n(Function.call,l):l,g&&((w.virtual||(w.virtual={}))[d]=l,e&h.R&&y&&!y[d]&&o(y,d,l)))};h.F=1,h.G=2,h.S=4,h.P=8,h.B=16,h.W=32,h.U=64,h.R=128,e.exports=h},81984:e=>{e.exports=function(e){try{return!!e()}catch(e){return!0}}},95838:(e,t,r)=>{var s=r(58852),i=r(27904),n=r(12828),o=r(80812),a=r(70181),c=r(55298),h={},d={},u=e.exports=function(e,t,r,u,l){var f,p,m,g,A=l?function(){return e}:c(e),v=s(r,u,t?2:1),w=0;if("function"!=typeof A)throw TypeError(e+" is not iterable!");if(n(A)){for(f=a(e.length);f>w;w++)if((g=t?v(o(p=e[w])[0],p[1]):v(e[w]))===h||g===d)return g}else for(m=A.call(e);!(p=m.next()).done;)if((g=i(m,v,p.value,t))===h||g===d)return g};u.BREAK=h,u.RETURN=d},66670:e=>{var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)},75509:e=>{var t={}.hasOwnProperty;e.exports=function(e,r){return t.call(e,r)}},2677:(e,t,r)=>{var s=r(78423),i=r(86260);e.exports=r(58219)?function(e,t,r){return s.f(e,t,i(1,r))}:function(e,t,r){return e[t]=r,e}},76260:(e,t,r)=>{var s=r(66670).document;e.exports=s&&s.documentElement},32484:(e,t,r)=>{e.exports=!r(58219)&&!r(81984)((function(){return 7!=Object.defineProperty(r(3802)("div"),"a",{get:function(){return 7}}).a}))},20709:e=>{e.exports=function(e,t,r){var s=void 0===r;switch(t.length){case 0:return s?e():e.call(r);case 1:return s?e(t[0]):e.call(r,t[0]);case 2:return s?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return s?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return s?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)}},7001:(e,t,r)=>{var s=r(93417);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==s(e)?e.split(""):Object(e)}},12828:(e,t,r)=>{var s=r(20210),i=r(30254)("iterator"),n=Array.prototype;e.exports=function(e){return void 0!==e&&(s.Array===e||n[i]===e)}},15461:(e,t,r)=>{var s=r(93417);e.exports=Array.isArray||function(e){return"Array"==s(e)}},24401:e=>{e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},27904:(e,t,r)=>{var s=r(80812);e.exports=function(e,t,r,i){try{return i?t(s(r)[0],r[1]):t(r)}catch(t){var n=e.return;throw void 0!==n&&s(n.call(e)),t}}},48248:(e,t,r)=>{"use strict";var s=r(22087),i=r(86260),n=r(1356),o={};r(2677)(o,r(30254)("iterator"),(function(){return this})),e.exports=function(e,t,r){e.prototype=s(o,{next:i(1,r)}),n(e,t+" Iterator")}},88839:(e,t,r)=>{"use strict";var s=r(74742),i=r(88535),n=r(61331),o=r(2677),a=r(20210),c=r(48248),h=r(1356),d=r(66123),u=r(30254)("iterator"),l=!([].keys&&"next"in[].keys()),f="keys",p="values",m=function(){return this};e.exports=function(e,t,r,g,A,v,w){c(r,t,g);var y,b,_,k=function(e){if(!l&&e in P)return P[e];switch(e){case f:case p:return function(){return new r(this,e)}}return function(){return new r(this,e)}},x=t+" Iterator",I=A==p,M=!1,P=e.prototype,C=P[u]||P["@@iterator"]||A&&P[A],E=C||k(A),T=A?I?k("entries"):E:void 0,B="Array"==t&&P.entries||C;if(B&&(_=d(B.call(new e)))!==Object.prototype&&_.next&&(h(_,x,!0),s||"function"==typeof _[u]||o(_,u,m)),I&&C&&C.name!==p&&(M=!0,E=function(){return C.call(this)}),s&&!w||!l&&!M&&P[u]||o(P,u,E),a[t]=E,a[x]=m,A)if(y={values:I?E:k(p),keys:v?E:k(f),entries:T},w)for(b in y)b in P||n(P,b,y[b]);else i(i.P+i.F*(l||M),t,y);return y}},27899:(e,t,r)=>{var s=r(30254)("iterator"),i=!1;try{var n=[7][s]();n.return=function(){i=!0},Array.from(n,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var r=!1;try{var n=[7],o=n[s]();o.next=function(){return{done:r=!0}},n[s]=function(){return o},e(n)}catch(e){}return r}},20322:e=>{e.exports=function(e,t){return{value:t,done:!!e}}},20210:e=>{e.exports={}},74742:e=>{e.exports=!0},75172:(e,t,r)=>{var s=r(19191)("meta"),i=r(24401),n=r(75509),o=r(78423).f,a=0,c=Object.isExtensible||function(){return!0},h=!r(81984)((function(){return c(Object.preventExtensions({}))})),d=function(e){o(e,s,{value:{i:"O"+ ++a,w:{}}})},u=e.exports={KEY:s,NEED:!1,fastKey:function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!n(e,s)){if(!c(e))return"F";if(!t)return"E";d(e)}return e[s].i},getWeak:function(e,t){if(!n(e,s)){if(!c(e))return!0;if(!t)return!1;d(e)}return e[s].w},onFreeze:function(e){return h&&u.NEED&&c(e)&&!n(e,s)&&d(e),e}}},53792:(e,t,r)=>{var s=r(66670),i=r(8036).set,n=s.MutationObserver||s.WebKitMutationObserver,o=s.process,a=s.Promise,c="process"==r(93417)(o);e.exports=function(){var e,t,r,h=function(){var s,i;for(c&&(s=o.domain)&&s.exit();e;){i=e.fn,e=e.next;try{i()}catch(s){throw e?r():t=void 0,s}}t=void 0,s&&s.enter()};if(c)r=function(){o.nextTick(h)};else if(!n||s.navigator&&s.navigator.standalone)if(a&&a.resolve){var d=a.resolve(void 0);r=function(){d.then(h)}}else r=function(){i.call(s,h)};else{var u=!0,l=document.createTextNode("");new n(h).observe(l,{characterData:!0}),r=function(){l.data=u=!u}}return function(s){var i={fn:s,next:void 0};t&&(t.next=i),e||(e=i,r()),t=i}}},11642:(e,t,r)=>{"use strict";var s=r(25219);function i(e){var t,r;this.promise=new e((function(e,s){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=s})),this.resolve=s(t),this.reject=s(r)}e.exports.f=function(e){return new i(e)}},22087:(e,t,r)=>{var s=r(80812),i=r(90082),n=r(77956),o=r(4566)("IE_PROTO"),a=function(){},c="prototype",h=function(){var e,t=r(3802)("iframe"),s=n.length;for(t.style.display="none",r(76260).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),h=e.F;s--;)delete h[c][n[s]];return h()};e.exports=Object.create||function(e,t){var r;return null!==e?(a[c]=s(e),r=new a,a[c]=null,r[o]=e):r=h(),void 0===t?r:i(r,t)}},78423:(e,t,r)=>{var s=r(80812),i=r(32484),n=r(10752),o=Object.defineProperty;t.f=r(58219)?Object.defineProperty:function(e,t,r){if(s(e),t=n(t,!0),s(r),i)try{return o(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e}},90082:(e,t,r)=>{var s=r(78423),i=r(80812),n=r(54311);e.exports=r(58219)?Object.defineProperties:function(e,t){i(e);for(var r,o=n(t),a=o.length,c=0;a>c;)s.f(e,r=o[c++],t[r]);return e}},81033:(e,t,r)=>{var s=r(36569),i=r(86260),n=r(65133),o=r(10752),a=r(75509),c=r(32484),h=Object.getOwnPropertyDescriptor;t.f=r(58219)?h:function(e,t){if(e=n(e),t=o(t,!0),c)try{return h(e,t)}catch(e){}if(a(e,t))return i(!s.f.call(e,t),e[t])}},36309:(e,t,r)=>{var s=r(65133),i=r(1743).f,n={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return o&&"[object Window]"==n.call(e)?function(e){try{return i(e)}catch(e){return o.slice()}}(e):i(s(e))}},1743:(e,t,r)=>{var s=r(85081),i=r(77956).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return s(e,i)}},59820:(e,t)=>{t.f=Object.getOwnPropertySymbols},66123:(e,t,r)=>{var s=r(75509),i=r(66310),n=r(4566)("IE_PROTO"),o=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),s(e,n)?e[n]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?o:null}},85081:(e,t,r)=>{var s=r(75509),i=r(65133),n=r(84448)(!1),o=r(4566)("IE_PROTO");e.exports=function(e,t){var r,a=i(e),c=0,h=[];for(r in a)r!=o&&s(a,r)&&h.push(r);for(;t.length>c;)s(a,r=t[c++])&&(~n(h,r)||h.push(r));return h}},54311:(e,t,r)=>{var s=r(85081),i=r(77956);e.exports=Object.keys||function(e){return s(e,i)}},36569:(e,t)=>{t.f={}.propertyIsEnumerable},47331:(e,t,r)=>{var s=r(88535),i=r(46438),n=r(81984);e.exports=function(e,t){var r=(i.Object||{})[e]||Object[e],o={};o[e]=t(r),s(s.S+s.F*n((function(){r(1)})),"Object",o)}},49709:(e,t,r)=>{var s=r(66670).parseFloat,i=r(24269).trim;e.exports=1/s(r(80459)+"-0")!=-1/0?function(e){var t=i(String(e),3),r=s(t);return 0===r&&"-"==t.charAt(0)?-0:r}:s},15722:(e,t,r)=>{var s=r(66670).parseInt,i=r(24269).trim,n=r(80459),o=/^[-+]?0[xX]/;e.exports=8!==s(n+"08")||22!==s(n+"0x16")?function(e,t){var r=i(String(e),3);return s(r,t>>>0||(o.test(r)?16:10))}:s},41704:e=>{e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},61037:(e,t,r)=>{var s=r(80812),i=r(24401),n=r(11642);e.exports=function(e,t){if(s(e),i(t)&&t.constructor===e)return t;var r=n.f(e);return(0,r.resolve)(t),r.promise}},86260:e=>{e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},30953:(e,t,r)=>{var s=r(2677);e.exports=function(e,t,r){for(var i in t)r&&e[i]?e[i]=t[i]:s(e,i,t[i]);return e}},61331:(e,t,r)=>{e.exports=r(2677)},643:(e,t,r)=>{"use strict";var s=r(88535),i=r(25219),n=r(58852),o=r(95838);e.exports=function(e){s(s.S,e,{from:function(e){var t,r,s,a,c=arguments[1];return i(this),(t=void 0!==c)&&i(c),null==e?new this:(r=[],t?(s=0,a=n(c,arguments[2],2),o(e,!1,(function(e){r.push(a(e,s++))}))):o(e,!1,r.push,r),new this(r))}})}},44398:(e,t,r)=>{"use strict";var s=r(88535);e.exports=function(e){s(s.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},32074:(e,t,r)=>{var s=r(24401),i=r(80812),n=function(e,t){if(i(e),!s(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,s){try{(s=r(58852)(Function.call,r(81033).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,r){return n(e,r),t?e.__proto__=r:s(e,r),e}}({},!1):void 0),check:n}},45274:(e,t,r)=>{"use strict";var s=r(66670),i=r(46438),n=r(78423),o=r(58219),a=r(30254)("species");e.exports=function(e){var t="function"==typeof i[e]?i[e]:s[e];o&&t&&!t[a]&&n.f(t,a,{configurable:!0,get:function(){return this}})}},1356:(e,t,r)=>{var s=r(78423).f,i=r(75509),n=r(30254)("toStringTag");e.exports=function(e,t,r){e&&!i(e=r?e:e.prototype,n)&&s(e,n,{configurable:!0,value:t})}},4566:(e,t,r)=>{var s=r(96308)("keys"),i=r(19191);e.exports=function(e){return s[e]||(s[e]=i(e))}},96308:(e,t,r)=>{var s=r(46438),i=r(66670),n="__core-js_shared__",o=i[n]||(i[n]={});(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:s.version,mode:r(74742)?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},85614:(e,t,r)=>{var s=r(80812),i=r(25219),n=r(30254)("species");e.exports=function(e,t){var r,o=s(e).constructor;return void 0===o||null==(r=s(o)[n])?t:i(r)}},43172:(e,t,r)=>{var s=r(49383),i=r(87608);e.exports=function(e){return function(t,r){var n,o,a=String(i(t)),c=s(r),h=a.length;return c<0||c>=h?e?"":void 0:(n=a.charCodeAt(c))<55296||n>56319||c+1===h||(o=a.charCodeAt(c+1))<56320||o>57343?e?a.charAt(c):n:e?a.slice(c,c+2):o-56320+(n-55296<<10)+65536}}},24269:(e,t,r)=>{var s=r(88535),i=r(87608),n=r(81984),o=r(80459),a="["+o+"]",c=RegExp("^"+a+a+"*"),h=RegExp(a+a+"*$"),d=function(e,t,r){var i={},a=n((function(){return!!o[e]()||"​"!="​"[e]()})),c=i[e]=a?t(u):o[e];r&&(i[r]=c),s(s.P+s.F*a,"String",i)},u=d.trim=function(e,t){return e=String(i(e)),1&t&&(e=e.replace(c,"")),2&t&&(e=e.replace(h,"")),e};e.exports=d},80459:e=>{e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},8036:(e,t,r)=>{var s,i,n,o=r(58852),a=r(20709),c=r(76260),h=r(3802),d=r(66670),u=d.process,l=d.setImmediate,f=d.clearImmediate,p=d.MessageChannel,m=d.Dispatch,g=0,A={},v="onreadystatechange",w=function(){var e=+this;if(A.hasOwnProperty(e)){var t=A[e];delete A[e],t()}},y=function(e){w.call(e.data)};l&&f||(l=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return A[++g]=function(){a("function"==typeof e?e:Function(e),t)},s(g),g},f=function(e){delete A[e]},"process"==r(93417)(u)?s=function(e){u.nextTick(o(w,e,1))}:m&&m.now?s=function(e){m.now(o(w,e,1))}:p?(n=(i=new p).port2,i.port1.onmessage=y,s=o(n.postMessage,n,1)):d.addEventListener&&"function"==typeof postMessage&&!d.importScripts?(s=function(e){d.postMessage(e+"","*")},d.addEventListener("message",y,!1)):s=v in h("script")?function(e){c.appendChild(h("script"))[v]=function(){c.removeChild(this),w.call(e)}}:function(e){setTimeout(o(w,e,1),0)}),e.exports={set:l,clear:f}},72917:(e,t,r)=>{var s=r(49383),i=Math.max,n=Math.min;e.exports=function(e,t){return(e=s(e))<0?i(e+t,0):n(e,t)}},49383:e=>{var t=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:t)(e)}},65133:(e,t,r)=>{var s=r(7001),i=r(87608);e.exports=function(e){return s(i(e))}},70181:(e,t,r)=>{var s=r(49383),i=Math.min;e.exports=function(e){return e>0?i(s(e),9007199254740991):0}},66310:(e,t,r)=>{var s=r(87608);e.exports=function(e){return Object(s(e))}},10752:(e,t,r)=>{var s=r(24401);e.exports=function(e,t){if(!s(e))return e;var r,i;if(t&&"function"==typeof(r=e.toString)&&!s(i=r.call(e)))return i;if("function"==typeof(r=e.valueOf)&&!s(i=r.call(e)))return i;if(!t&&"function"==typeof(r=e.toString)&&!s(i=r.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},19191:e=>{var t=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++t+r).toString(36))}},80218:(e,t,r)=>{var s=r(66670).navigator;e.exports=s&&s.userAgent||""},6096:(e,t,r)=>{var s=r(24401);e.exports=function(e,t){if(!s(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},67816:(e,t,r)=>{var s=r(66670),i=r(46438),n=r(74742),o=r(84336),a=r(78423).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=n?{}:s.Symbol||{});"_"==e.charAt(0)||e in t||a(t,e,{value:o.f(e)})}},84336:(e,t,r)=>{t.f=r(30254)},30254:(e,t,r)=>{var s=r(96308)("wks"),i=r(19191),n=r(66670).Symbol,o="function"==typeof n;(e.exports=function(e){return s[e]||(s[e]=o&&n[e]||(o?n:i)("Symbol."+e))}).store=s},55298:(e,t,r)=>{var s=r(44968),i=r(30254)("iterator"),n=r(20210);e.exports=r(46438).getIteratorMethod=function(e){if(null!=e)return e[i]||e["@@iterator"]||n[s(e)]}},18355:(e,t,r)=>{var s=r(88535);s(s.S,"Array",{isArray:r(15461)})},52293:(e,t,r)=>{"use strict";var s=r(12560),i=r(20322),n=r(20210),o=r(65133);e.exports=r(88839)(Array,"Array",(function(e,t){this._t=o(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,i(1)):i(0,"keys"==t?r:"values"==t?e[r]:[r,e[r]])}),"values"),n.Arguments=n.Array,s("keys"),s("values"),s("entries")},23204:(e,t,r)=>{var s=r(88535);s(s.S,"Date",{now:function(){return(new Date).getTime()}})},96050:(e,t,r)=>{"use strict";var s=r(95933),i=r(6096),n="Map";e.exports=r(99373)(n,(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(e){var t=s.getEntry(i(this,n),e);return t&&t.v},set:function(e,t){return s.def(i(this,n),0===e?0:e,t)}},s,!0)},74712:(e,t,r)=>{var s=r(88535);s(s.S+s.F*!r(58219),"Object",{defineProperty:r(78423).f})},51780:(e,t,r)=>{var s=r(24401),i=r(75172).onFreeze;r(47331)("freeze",(function(e){return function(t){return e&&s(t)?e(i(t)):t}}))},18128:(e,t,r)=>{var s=r(66310),i=r(66123);r(47331)("getPrototypeOf",(function(){return function(e){return i(s(e))}}))},96847:(e,t,r)=>{var s=r(66310),i=r(54311);r(47331)("keys",(function(){return function(e){return i(s(e))}}))},4284:(e,t,r)=>{var s=r(88535);s(s.S,"Object",{setPrototypeOf:r(32074).set})},78978:()=>{},95828:(e,t,r)=>{var s=r(88535),i=r(49709);s(s.G+s.F*(parseFloat!=i),{parseFloat:i})},65331:(e,t,r)=>{var s=r(88535),i=r(15722);s(s.G+s.F*(parseInt!=i),{parseInt:i})},91229:(e,t,r)=>{"use strict";var s,i,n,o,a=r(74742),c=r(66670),h=r(58852),d=r(44968),u=r(88535),l=r(24401),f=r(25219),p=r(2832),m=r(95838),g=r(85614),A=r(8036).set,v=r(53792)(),w=r(11642),y=r(41704),b=r(80218),_=r(61037),k="Promise",x=c.TypeError,I=c.process,M=I&&I.versions,P=M&&M.v8||"",C=c[k],E="process"==d(I),T=function(){},B=i=w.f,S=!!function(){try{var e=C.resolve(1),t=(e.constructor={})[r(30254)("species")]=function(e){e(T,T)};return(E||"function"==typeof PromiseRejectionEvent)&&e.then(T)instanceof t&&0!==P.indexOf("6.6")&&-1===b.indexOf("Chrome/66")}catch(e){}}(),U=function(e){var t;return!(!l(e)||"function"!=typeof(t=e.then))&&t},D=function(e,t){if(!e._n){e._n=!0;var r=e._c;v((function(){for(var s=e._v,i=1==e._s,n=0,o=function(t){var r,n,o,a=i?t.ok:t.fail,c=t.resolve,h=t.reject,d=t.domain;try{a?(i||(2==e._h&&$(e),e._h=1),!0===a?r=s:(d&&d.enter(),r=a(s),d&&(d.exit(),o=!0)),r===t.promise?h(x("Promise-chain cycle")):(n=U(r))?n.call(r,c,h):c(r)):h(s)}catch(e){d&&!o&&d.exit(),h(e)}};r.length>n;)o(r[n++]);e._c=[],e._n=!1,t&&!e._h&&L(e)}))}},L=function(e){A.call(c,(function(){var t,r,s,i=e._v,n=R(e);if(n&&(t=y((function(){E?I.emit("unhandledRejection",i,e):(r=c.onunhandledrejection)?r({promise:e,reason:i}):(s=c.console)&&s.error&&s.error("Unhandled promise rejection",i)})),e._h=E||R(e)?2:1),e._a=void 0,n&&t.e)throw t.v}))},R=function(e){return 1!==e._h&&0===(e._a||e._c).length},$=function(e){A.call(c,(function(){var t;E?I.emit("rejectionHandled",e):(t=c.onrejectionhandled)&&t({promise:e,reason:e._v})}))},F=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),D(t,!0))},z=function(e){var t,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===e)throw x("Promise can't be resolved itself");(t=U(e))?v((function(){var s={_w:r,_d:!1};try{t.call(e,h(z,s,1),h(F,s,1))}catch(e){F.call(s,e)}})):(r._v=e,r._s=1,D(r,!1))}catch(e){F.call({_w:r,_d:!1},e)}}};S||(C=function(e){p(this,C,k,"_h"),f(e),s.call(this);try{e(h(z,this,1),h(F,this,1))}catch(e){F.call(this,e)}},(s=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=r(30953)(C.prototype,{then:function(e,t){var r=B(g(this,C));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=E?I.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&D(this,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),n=function(){var e=new s;this.promise=e,this.resolve=h(z,e,1),this.reject=h(F,e,1)},w.f=B=function(e){return e===C||e===o?new n(e):i(e)}),u(u.G+u.W+u.F*!S,{Promise:C}),r(1356)(C,k),r(45274)(k),o=r(46438)[k],u(u.S+u.F*!S,k,{reject:function(e){var t=B(this);return(0,t.reject)(e),t.promise}}),u(u.S+u.F*(a||!S),k,{resolve:function(e){return _(a&&this===o?C:this,e)}}),u(u.S+u.F*!(S&&r(27899)((function(e){C.all(e).catch(T)}))),k,{all:function(e){var t=this,r=B(t),s=r.resolve,i=r.reject,n=y((function(){var r=[],n=0,o=1;m(e,!1,(function(e){var a=n++,c=!1;r.push(void 0),o++,t.resolve(e).then((function(e){c||(c=!0,r[a]=e,--o||s(r))}),i)})),--o||s(r)}));return n.e&&i(n.v),r.promise},race:function(e){var t=this,r=B(t),s=r.reject,i=y((function(){m(e,!1,(function(e){t.resolve(e).then(r.resolve,s)}))}));return i.e&&s(i.v),r.promise}})},97863:(e,t,r)=>{"use strict";var s=r(43172)(!0);r(88839)(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=s(t,r),this._i+=e.length,{value:e,done:!1})}))},19626:(e,t,r)=>{"use strict";var s=r(66670),i=r(75509),n=r(58219),o=r(88535),a=r(61331),c=r(75172).KEY,h=r(81984),d=r(96308),u=r(1356),l=r(19191),f=r(30254),p=r(84336),m=r(67816),g=r(36473),A=r(15461),v=r(80812),w=r(24401),y=r(66310),b=r(65133),_=r(10752),k=r(86260),x=r(22087),I=r(36309),M=r(81033),P=r(59820),C=r(78423),E=r(54311),T=M.f,B=C.f,S=I.f,U=s.Symbol,D=s.JSON,L=D&&D.stringify,R="prototype",$=f("_hidden"),F=f("toPrimitive"),z={}.propertyIsEnumerable,O=d("symbol-registry"),W=d("symbols"),N=d("op-symbols"),V=Object[R],H="function"==typeof U&&!!P.f,j=s.QObject,G=!j||!j[R]||!j[R].findChild,Q=n&&h((function(){return 7!=x(B({},"a",{get:function(){return B(this,"a",{value:7}).a}})).a}))?function(e,t,r){var s=T(V,t);s&&delete V[t],B(e,t,r),s&&e!==V&&B(V,t,s)}:B,q=function(e){var t=W[e]=x(U[R]);return t._k=e,t},Y=H&&"symbol"==typeof U.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof U},K=function(e,t,r){return e===V&&K(N,t,r),v(e),t=_(t,!0),v(r),i(W,t)?(r.enumerable?(i(e,$)&&e[$][t]&&(e[$][t]=!1),r=x(r,{enumerable:k(0,!1)})):(i(e,$)||B(e,$,k(1,{})),e[$][t]=!0),Q(e,t,r)):B(e,t,r)},X=function(e,t){v(e);for(var r,s=g(t=b(t)),i=0,n=s.length;n>i;)K(e,r=s[i++],t[r]);return e},J=function(e){var t=z.call(this,e=_(e,!0));return!(this===V&&i(W,e)&&!i(N,e))&&(!(t||!i(this,e)||!i(W,e)||i(this,$)&&this[$][e])||t)},Z=function(e,t){if(e=b(e),t=_(t,!0),e!==V||!i(W,t)||i(N,t)){var r=T(e,t);return!r||!i(W,t)||i(e,$)&&e[$][t]||(r.enumerable=!0),r}},ee=function(e){for(var t,r=S(b(e)),s=[],n=0;r.length>n;)i(W,t=r[n++])||t==$||t==c||s.push(t);return s},te=function(e){for(var t,r=e===V,s=S(r?N:b(e)),n=[],o=0;s.length>o;)!i(W,t=s[o++])||r&&!i(V,t)||n.push(W[t]);return n};H||(a((U=function(){if(this instanceof U)throw TypeError("Symbol is not a constructor!");var e=l(arguments.length>0?arguments[0]:void 0),t=function(r){this===V&&t.call(N,r),i(this,$)&&i(this[$],e)&&(this[$][e]=!1),Q(this,e,k(1,r))};return n&&G&&Q(V,e,{configurable:!0,set:t}),q(e)})[R],"toString",(function(){return this._k})),M.f=Z,C.f=K,r(1743).f=I.f=ee,r(36569).f=J,P.f=te,n&&!r(74742)&&a(V,"propertyIsEnumerable",J,!0),p.f=function(e){return q(f(e))}),o(o.G+o.W+o.F*!H,{Symbol:U});for(var re="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),se=0;re.length>se;)f(re[se++]);for(var ie=E(f.store),ne=0;ie.length>ne;)m(ie[ne++]);o(o.S+o.F*!H,"Symbol",{for:function(e){return i(O,e+="")?O[e]:O[e]=U(e)},keyFor:function(e){if(!Y(e))throw TypeError(e+" is not a symbol!");for(var t in O)if(O[t]===e)return t},useSetter:function(){G=!0},useSimple:function(){G=!1}}),o(o.S+o.F*!H,"Object",{create:function(e,t){return void 0===t?x(e):X(x(e),t)},defineProperty:K,defineProperties:X,getOwnPropertyDescriptor:Z,getOwnPropertyNames:ee,getOwnPropertySymbols:te});var oe=h((function(){P.f(1)}));o(o.S+o.F*oe,"Object",{getOwnPropertySymbols:function(e){return P.f(y(e))}}),D&&o(o.S+o.F*(!H||h((function(){var e=U();return"[null]"!=L([e])||"{}"!=L({a:e})||"{}"!=L(Object(e))}))),"JSON",{stringify:function(e){for(var t,r,s=[e],i=1;arguments.length>i;)s.push(arguments[i++]);if(r=t=s[1],(w(t)||void 0!==e)&&!Y(e))return A(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!Y(t))return t}),s[1]=t,L.apply(D,s)}}),U[R][F]||r(2677)(U[R],F,U[R].valueOf),u(U,"Symbol"),u(Math,"Math",!0),u(s.JSON,"JSON",!0)},62223:(e,t,r)=>{r(643)("Map")},74674:(e,t,r)=>{r(44398)("Map")},28337:(e,t,r)=>{var s=r(88535);s(s.P+s.R,"Map",{toJSON:r(5874)("Map")})},2639:(e,t,r)=>{"use strict";var s=r(88535),i=r(46438),n=r(66670),o=r(85614),a=r(61037);s(s.P+s.R,"Promise",{finally:function(e){var t=o(this,i.Promise||n.Promise),r="function"==typeof e;return this.then(r?function(r){return a(t,e()).then((function(){return r}))}:e,r?function(r){return a(t,e()).then((function(){throw r}))}:e)}})},46121:(e,t,r)=>{"use strict";var s=r(88535),i=r(11642),n=r(41704);s(s.S,"Promise",{try:function(e){var t=i.f(this),r=n(e);return(r.e?t.reject:t.resolve)(r.v),t.promise}})},42860:(e,t,r)=>{r(67816)("asyncIterator")},60716:(e,t,r)=>{r(67816)("observable")},7914:(e,t,r)=>{r(52293);for(var s=r(66670),i=r(2677),n=r(20210),o=r(30254)("toStringTag"),a="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),c=0;c<a.length;c++){var h=a[c],d=s[h],u=d&&d.prototype;u&&!u[o]&&i(u,o,h),n[h]=n.Array}},66801:(e,t,r)=>{var s=r(88535),i=r(8036);s(s.G+s.B,{setImmediate:i.set,clearImmediate:i.clear})},68632:(e,t,r)=>{e.exports=r(37149)},45249:(e,t,r)=>{e.exports=r(87172)},73146:(e,t,r)=>{e.exports=r(85079)},80662:(e,t,r)=>{e.exports=r(92861)},66681:(e,t,r)=>{e.exports=r(92696)},7403:(e,t,r)=>{e.exports=r(22948)},75019:(e,t,r)=>{e.exports=r(62160)},69736:(e,t,r)=>{e.exports=r(47567)},11919:(e,t,r)=>{e.exports=r(21724)},88032:(e,t,r)=>{e.exports=r(27279)},29967:(e,t,r)=>{e.exports=r(25216)},54001:(e,t,r)=>{e.exports=r(34750)},64236:(e,t,r)=>{e.exports=r(31707)},75062:(e,t,r)=>{e.exports=r(16560)},20149:(e,t,r)=>{e.exports=r(48652)},134:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r(92696),i=r(87361);function n(e,t,r){return(t=(0,i.A)(t))in e?s(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},91908:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r(23509),i=r(39967);function n(e,t){if("object"!=(0,s.A)(e)||!e)return e;var r=e[i];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=(0,s.A)(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}},87361:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r(23509),i=r(91908);function n(e){var t=(0,i.A)(e,"string");return"symbol"==(0,s.A)(t)?t:String(t)}},23509:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r(16560),i=r(54220);function n(e){return n="function"==typeof s&&"symbol"==typeof i?function(e){return typeof e}:function(e){return e&&"function"==typeof s&&e.constructor===s&&e!==s.prototype?"symbol":typeof e},n(e)}}},s={};function i(e){var t=s[e];if(void 0!==t)return t.exports;var n=s[e]={exports:{}};return r[e](n,n.exports,i),n.exports}i.m=r,i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.f={},i.e=e=>Promise.all(Object.keys(i.f).reduce(((t,r)=>(i.f[r](e,t),t)),[])),i.u=e=>e+".avtranscoder.js",i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},t="AVTranscoder:",i.l=(r,s,n,o)=>{if(e[r])e[r].push(s);else{var a,c;if(void 0!==n)for(var h=document.getElementsByTagName("script"),d=0;d<h.length;d++){var u=h[d];if(u.getAttribute("src")==r||u.getAttribute("data-webpack")==t+n){a=u;break}}a||(c=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,i.nc&&a.setAttribute("nonce",i.nc),a.setAttribute("data-webpack",t+n),a.src=r),e[r]=[s];var l=(t,s)=>{a.onerror=a.onload=null,clearTimeout(f);var i=e[r];if(delete e[r],a.parentNode&&a.parentNode.removeChild(a),i&&i.forEach((e=>e(s))),t)return t(s)},f=setTimeout(l.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=l.bind(null,a.onerror),a.onload=l.bind(null,a.onload),c&&document.head.appendChild(a)}},i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;i.g.importScripts&&(e=i.g.location+"");var t=i.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");if(r.length)for(var s=r.length-1;s>-1&&(!e||!/^http(s?):/.test(e));)e=r[s--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=e})(),(()=>{var e={792:0};i.f.j=(t,r)=>{var s=i.o(e,t)?e[t]:void 0;if(0!==s)if(s)r.push(s[2]);else{var n=new Promise(((r,i)=>s=e[t]=[r,i]));r.push(s[2]=n);var o=i.p+i.u(t),a=new Error;i.l(o,(r=>{if(i.o(e,t)&&(0!==(s=e[t])&&(e[t]=void 0),s)){var n=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;a.message="Loading chunk "+t+" failed.\n("+n+": "+o+")",a.name="ChunkLoadError",a.type=n,a.request=o,s[1](a)}}),"chunk-"+t,t)}};var t=(t,r)=>{var s,n,[o,a,c]=r,h=0;if(o.some((t=>0!==e[t]))){for(s in a)i.o(a,s)&&(i.m[s]=a[s]);c&&c(i)}for(t&&t(r);h<o.length;h++)n=o[h],i.o(e,n)&&e[n]&&e[n][0](),e[n]=0},r=self.webpackChunkAVTranscoder=self.webpackChunkAVTranscoder||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var n=i(51170);return n.default})()));