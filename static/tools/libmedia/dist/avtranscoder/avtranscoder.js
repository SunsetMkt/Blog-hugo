!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.AVTranscoder=e():t.AVTranscoder=e()}(self,(()=>(()=>{var t,e,r={92246:(t,e,r)=>{"use strict";r.d(e,{A:()=>o});var s=r(49859),i=r(16030),n=r(4624),a=r(9705);class o{constructor(t){(0,s.A)(this,"resampler",void 0),(0,s.A)(this,"options",void 0),(0,s.A)(this,"inputParameters",void 0),(0,s.A)(this,"outputParameters",void 0),this.options=t,this.resampler=new i.A(this.options.resource)}async open(t,e){this.inputParameters=t,this.outputParameters=e,await this.resampler.run(),this.resampler.invoke("resample_set_input_parameters",t.sampleRate,t.channels,t.format,t.layout||0),this.resampler.invoke("resample_set_output_parameters",e.sampleRate,e.channels,e.format,e.layout||0);let r=this.resampler.invoke("resample_init");return r<0?(n.z3(`open resampler failed, ret: ${r}`,"src/audioresample/Resampler.ts",85),a.nr):0}resample(t,e,r){return this.resampler.invoke("resample_process",t,e,r)}getOutputSampleCount(t){return this.resampler.invoke("resample_nb_sample",t)}close(){this.resampler.invoke("resample_destroy"),this.resampler.destroy()}getInputPCMParameters(){return this.inputParameters}getOutputPCMParameters(){return this.outputParameters}}},75742:(t,e,r)=>{"use strict";r.d(e,{A:()=>g});var s=r(49859),i=r(63939),n=r(50932),a=r(11473),o=r(16030),c=r(56024),u=r(4624),h=r(95797),d=(r(56490),r(95335)),l=r(73749),f=r(67672),p=r(37837),m=r(9705);class g{constructor(t){(0,s.A)(this,"options",void 0),(0,s.A)(this,"decoder",void 0),(0,s.A)(this,"frame",0),(0,s.A)(this,"decoderOptions",0),(0,s.A)(this,"timeBase",void 0),this.options=t,this.decoder=new o.A(t.resource)}getAVFrame(){return this.frame?this.frame:this.frame=this.options.avframePool?this.options.avframePool.alloc():(0,c.FP)()}outputAVFrame(){this.frame&&(this.options.onReceiveAVFrame?(n.M[15](this.frame+124,this.timeBase.den),n.M[15](this.frame+120,this.timeBase.num),this.options.onReceiveAVFrame(this.frame)):this.options.avframePool?this.options.avframePool.release(this.frame):(0,c.xj)(this.frame),this.frame=0)}receiveAVFrame(){return this.decoder.invoke("decoder_receive",this.getAVFrame())}async open(t,e={}){await this.decoder.run();const r=a.s_.malloc(4);n.M[20](r,0),d.HP(e).length&&(this.decoderOptions&&(l.AO(this.decoderOptions),a.s_.free(this.decoderOptions),this.decoderOptions=0),this.decoderOptions=(0,p.Gy)(8),d.__(e,((t,e)=>{(f.Yj(t)||f.Yj(e))&&l.a5(this.decoderOptions,e,t)})),n.M[20](r,this.decoderOptions));let s=0;return h.A.jspi?s=await this.decoder.invokeAsync("decoder_open",t,0,1,r):(s=this.decoder.invoke("decoder_open",t,0,1,r),await this.decoder.childThreadsReady()),this.decoderOptions=i.f[20](r),a.s_.free(r),s<0?(u.z3(`open audio decoder failed, ret: ${s}`,"src/avcodec/wasmcodec/AudioDecoder.ts",129),m.r8):(this.timeBase=void 0,0)}decode(t){this.timeBase||(this.timeBase={den:i.f[15](t+76),num:i.f[15](t+72)});let e=this.decoder.invoke("decoder_decode",t);if(e)return e;for(;;){if(e=this.receiveAVFrame(),1!==e){if(e<0)return e;break}this.outputAVFrame()}return 0}async flush(){for(this.decoder.invoke("decoder_flush");;){const t=this.receiveAVFrame();if(t<1)return t;this.outputAVFrame()}return 0}close(){this.decoder.invoke("decoder_close"),this.decoder.destroy(),this.frame&&(this.options.avframePool?this.options.avframePool.release(this.frame):(0,c.xj)(this.frame),this.frame=0),this.decoderOptions&&(l.AO(this.decoderOptions),a.s_.free(this.decoderOptions),this.decoderOptions=0)}}},21910:(t,e,r)=>{"use strict";r.d(e,{A:()=>P});var s=r(49859),i=r(18979),n=r.n(i),a=r(63939),o=(r(9599),r(50932)),c=r(11473),u=r(16030),h=r(71517),d=r(4624),l=r(36204),f=r(56024),p=r(14686),m=r(66788),g=r(44328),v=r(95797),A=r(72703),w=(r(56490),r(95335)),y=r(73749),b=r(67672),k=r(37837),x=r(9705),_=r(77231);class I{constructor(t,e,r=!1){(0,s.A)(this,"parameters",void 0),(0,s.A)(this,"data",void 0),(0,s.A)(this,"planes",void 0),(0,s.A)(this,"pos",void 0),(0,s.A)(this,"posEnd",void 0),(0,s.A)(this,"bufferLength",void 0),(0,s.A)(this,"bytesPerSample",void 0),(0,s.A)(this,"planar",void 0),(0,s.A)(this,"channels",void 0),(0,s.A)(this,"frameSize",void 0),(0,s.A)(this,"pts",void 0),(0,s.A)(this,"copyTs",!1),this.parameters=t,this.frameSize=e,this.copyTs=r,this.planar=(0,m.K0)(a.f[15](t+28)),this.planes=this.planar?a.f[15](t+116):1,this.channels=a.f[15](t+116),this.bufferLength=512e3,this.data=[];for(let t=0;t<this.planes;t++)this.data[t]=new Uint8Array(this.bufferLength);this.pos=0,this.posEnd=0,this.bytesPerSample=(0,m.Dw)(a.f[15](t+28)),this.pts=BigInt(0)}sendAVFrame(t){this.copyTs&&a.f[17](t+104)!==_.Dh&&0!==a.f[15](t+124)&&0!==a.f[15](t+120)&&this.posEnd-this.pos==0&&(this.pts=(0,g.Mr)(a.f[17](t+104),t+120,{num:1,den:a.f[15](this.parameters+136)}));const e=a.f[15](t+76)*this.bytesPerSample*(this.planar?1:this.channels);if(this.posEnd+e>=this.bufferLength){const t=this.posEnd-this.pos;for(let t=0;t<this.planes;t++)this.data[t].set(this.data[t].subarray(this.pos,this.posEnd),0);this.pos=0,this.posEnd=t}for(let r=0;r<this.planes;r++)this.data[r].set((0,p.s3)(a.f[20](t+4*r),e),this.posEnd);this.posEnd+=e}remainFrameSize(){const t=this.bytesPerSample*(this.planar?1:this.channels);return(this.posEnd-this.pos)/t}handleData(t,e){(0,f.to)(t),o.M[15](t+152,a.f[15](this.parameters+136)),o.M[15](t+76,this.frameSize),o.M[15](t+292,a.f[15](this.parameters+116)),o.M[15](t+80,a.f[15](this.parameters+28)),o.M[17](t+104,this.pts),o.M[15](t+124,a.f[15](this.parameters+136)),o.M[15](t+120,1),(0,f.rh)(t);for(let r=0;r<this.planes;r++)(0,p.lW)(a.f[20](t+4*r),a.f[15](t+32),this.data[r].subarray(this.pos,this.pos+e));this.pos+=e,this.pts+=BigInt(0|this.frameSize)}receiveAVFrame(t){const e=this.frameSize*this.bytesPerSample*(this.planar?1:this.channels);return this.posEnd-this.pos<e?-1:(this.handleData(t,e),0)}flush(t){const e=this.posEnd-this.pos,r=e/(this.bytesPerSample*(this.planar?1:this.channels));return this.handleData(t,e),(0,m.wj)(t,r,a.f[15](this.parameters+28),this.frameSize-r,a.f[15](this.parameters+116)),0}}class P{constructor(t){(0,s.A)(this,"options",void 0),(0,s.A)(this,"encoder",void 0),(0,s.A)(this,"parameters",0),(0,s.A)(this,"timeBase",void 0),(0,s.A)(this,"avpacket",0),(0,s.A)(this,"avframe",0),(0,s.A)(this,"pts",BigInt(0)),(0,s.A)(this,"frameSize",0),(0,s.A)(this,"audioFrameResizer",void 0),(0,s.A)(this,"encoderOptions",0),(0,s.A)(this,"ptsQueue",[]),this.options=t,this.encoder=new u.A(this.options.resource)}getAVPacket(){return this.avpacket?this.avpacket:this.avpacket=this.options.avpacketPool?this.options.avpacketPool.alloc():(0,h._5)()}outputAVPacket(){if(this.avpacket){let t=this.ptsQueue.shift();void 0!==t&&t!==_.Dh||(t=this.pts),o.M[17](this.avpacket+8,t),o.M[17](this.avpacket+16,t),this.pts=t+a.f[17](this.avpacket+48),o.M[15](this.avpacket+76,this.timeBase.den),o.M[15](this.avpacket+72,this.timeBase.num),this.options.onReceiveAVPacket(this.avpacket),this.avpacket=0}}receiveAVPacket(){return this.encoder.invoke("encoder_receive",this.getAVPacket())}async open(t,e,r={}){await this.encoder.run();const s=c.s_.malloc(8),i=c.s_.malloc(4);o.M[15](s,e.num),o.M[15](s+4,e.den),o.M[20](i,0),this.encoder.invoke("encoder_set_flags",4194304),w.HP(r).length&&(this.encoderOptions&&(y.AO(this.encoderOptions),c.s_.free(this.encoderOptions),this.encoderOptions=0),this.encoderOptions=(0,k.Gy)(8),w.__(r,((t,e)=>{(b.Yj(t)||b.Yj(e))&&y.a5(this.encoderOptions,e,t)})),o.M[20](i,this.encoderOptions));let n=0;return v.A.jspi?n=await this.encoder.invokeAsync("encoder_open",t,s,1,i):(n=this.encoder.invoke("encoder_open",t,s,1,i),await this.encoder.childThreadsReady()),this.frameSize=this.encoder.invoke("encoder_get_framesize_size"),this.encoderOptions=a.f[20](i),c.s_.free(i),c.s_.free(s),n<0?(d.z3(`open audio encoder failed, ret: ${n}`,"src/avcodec/wasmcodec/AudioEncoder.ts",274),x.r8):(this.parameters=t,this.timeBase=e,this.pts=BigInt(0),this.ptsQueue=[],0)}encode_(t){let e=this.encoder.invoke("encoder_encode",t);if(e)return e;for(a.f[17](t+104)===_.Dh||0===a.f[15](t+124)||0===a.f[15](t+120)?this.ptsQueue.push(_.Dh):this.ptsQueue.push((0,g.Mr)(a.f[17](t+104),t+120,this.timeBase));;){if(e=this.receiveAVPacket(),1!==e){if(e<0)return e;this.ptsQueue.length>1&&this.ptsQueue.pop();break}this.outputAVPacket()}return 0}encode(t){if(this.avframe?(0,f.to)(this.avframe):this.avframe=(0,f.FP)(),(0,A.A)(t)?((0,f.gg)(this.avframe,t),t=this.avframe):t=(0,l.t)(t,this.avframe),!(this.frameSize>0&&a.f[15](t+76)!==this.frameSize||this.audioFrameResizer))return this.encode_(t);for(this.audioFrameResizer||(this.audioFrameResizer=new I(this.parameters,this.frameSize,this.options.copyTs)),this.audioFrameResizer.sendAVFrame(t);;){let e=this.audioFrameResizer.receiveAVFrame(t);if(e<0)return 0;if(e=this.encode_(t),e)return e}}async flush(){if(this.audioFrameResizer&&this.audioFrameResizer.remainFrameSize()>0){const t=(0,f.FP)();this.audioFrameResizer.flush(t),o.M[17](t+104,(0,g.Mr)(a.f[17](t+104),t+120,this.timeBase)),this.encode_(t),(0,f.xj)(t)}for(this.encoder.invoke("encoder_flush",0);;){const t=this.receiveAVPacket();if(t<1)return t;this.outputAVPacket()}return 0}getExtraData(){const t=this.encoder.invoke("encoder_get_extradata"),e=this.encoder.invoke("encoder_get_extradata_size");var r;return t&&e?n()(r=(0,p.s3)(t,e)).call(r):null}close(){this.encoder.invoke("encoder_close"),this.encoder.destroy(),this.avpacket&&(this.options.avpacketPool?this.options.avpacketPool.release(this.avpacket):(0,h.Qe)(this.avpacket),this.avpacket=0),this.avframe&&((0,f.xj)(this.avframe),this.avframe=0),this.encoderOptions&&(y.AO(this.encoderOptions),c.s_.free(this.encoderOptions),this.encoderOptions=0)}}},40417:(t,e,r)=>{"use strict";r.d(e,{A:()=>g});var s=r(49859),i=r(63939),n=r(50932),a=r(11473),o=r(16030),c=r(56024),u=r(4624),h=r(95797),d=(r(56490),r(95335)),l=r(73749),f=r(67672),p=r(37837),m=r(9705);class g{constructor(t){(0,s.A)(this,"options",void 0),(0,s.A)(this,"decoder",void 0),(0,s.A)(this,"frame",0),(0,s.A)(this,"parameters",0),(0,s.A)(this,"decoderOptions",0),(0,s.A)(this,"timeBase",void 0),(0,s.A)(this,"dtsQueue",[]),this.options=t,this.decoder=new o.A(this.options.resource)}getAVFrame(){return this.frame?this.frame:this.frame=this.options.avframePool?this.options.avframePool.alloc():(0,c.FP)()}outputAVFrame(){this.frame&&(2&i.f[15](this.parameters+160)&&this.dtsQueue.length&&n.M[17](this.frame+104,this.dtsQueue.shift()),this.options.onReceiveAVFrame?(n.M[15](this.frame+124,this.timeBase.den),n.M[15](this.frame+120,this.timeBase.num),this.options.onReceiveAVFrame(this.frame)):this.options.avframePool?this.options.avframePool.release(this.frame):(0,c.xj)(this.frame),this.frame=0)}receiveAVFrame(){return this.decoder.invoke("decoder_receive",this.getAVFrame())}async open(t,e=1,r={}){await this.decoder.run(void 0,e);let s=0;const o=a.s_.malloc(4);return n.M[20](o,0),d.HP(r).length&&(this.decoderOptions&&(l.AO(this.decoderOptions),a.s_.free(this.decoderOptions),this.decoderOptions=0),this.decoderOptions=(0,p.Gy)(8),d.__(r,((t,e)=>{(f.Yj(t)||f.Yj(e))&&l.a5(this.decoderOptions,e,t)})),n.M[20](o,this.decoderOptions)),h.A.jspi?s=await this.decoder.invokeAsync("decoder_open",t,0,e,o):(s=this.decoder.invoke("decoder_open",t,0,e,o),await this.decoder.childThreadsReady()),this.decoderOptions=i.f[20](o),a.s_.free(o),s<0?(u.z3(`open video decoder failed, ret: ${s}`,"src/avcodec/wasmcodec/VideoDecoder.ts",173),m.r8):(this.parameters=t,this.timeBase=void 0,this.dtsQueue.length=0,0)}decode(t){this.timeBase||(this.timeBase={den:i.f[15](t+76),num:i.f[15](t+72)});let e=this.decoder.invoke("decoder_decode",t);if(e)return e;for(2&i.f[15](this.parameters+160)&&this.dtsQueue.push(i.f[17](t+16));;){if(e=this.receiveAVFrame(),1!==e){if(e<0)return e;break}this.outputAVFrame()}return 0}async flush(){for(this.decoder.invoke("decoder_flush");;){const t=this.receiveAVFrame();if(t<1)return t;this.outputAVFrame()}return 0}close(){this.decoder.invoke("decoder_close"),this.decoder.destroy(),this.frame&&(this.options.avframePool?this.options.avframePool.release(this.frame):(0,c.xj)(this.frame),this.frame=0),this.parameters=0,this.decoderOptions&&(l.AO(this.decoderOptions),a.s_.free(this.decoderOptions),this.decoderOptions=0)}setSkipFrameDiscard(t){this.decoder.invoke("decoder_discard",t)}getChildThreadCount(){return this.decoder?this.decoder.getChildThreadCount():0}}},80105:(t,e,r)=>{"use strict";r.d(e,{A:()=>P});var s=r(49859),i=r(18979),n=r.n(i),a=r(63939),o=r(50932),c=r(11473),u=(r(9599),r(16030)),h=r(71517),d=r(4624),l=r(52699),f=r(56024),p=r(14686),m=r(26173),g=r(95797),v=r(21477),A=r(82014),w=(r(56490),r(95335)),y=r(73749),b=r(67672),k=r(37837),x=r(44328),_=r(77231),I=r(9705);class P{constructor(t){(0,s.A)(this,"options",void 0),(0,s.A)(this,"encoder",void 0),(0,s.A)(this,"parameters",0),(0,s.A)(this,"timeBase",void 0),(0,s.A)(this,"framerateTimebase",void 0),(0,s.A)(this,"inputCounter",BigInt(0)),(0,s.A)(this,"avpacket",0),(0,s.A)(this,"avframe",0),(0,s.A)(this,"encodeQueueSize",0),(0,s.A)(this,"bitrateFilter",void 0),(0,s.A)(this,"extradata",null),(0,s.A)(this,"encoderOptions",0),this.options=t,this.encoder=new u.A(this.options.resource)}getAVPacket(){return this.avpacket?this.avpacket:this.avpacket=this.options.avpacketPool?this.options.avpacketPool.alloc():(0,h._5)()}outputAVPacket(){if(this.avpacket){if(27===a.f[15](this.parameters+4)||173===a.f[15](this.parameters+4)||196===a.f[15](this.parameters+4)){if(o.M[15](this.avpacket+36,64|a.f[15](this.avpacket+36)),!(1&a.f[15](this.parameters+160))){if(!this.bitrateFilter){this.bitrateFilter=new m.A;const t=l.z(8);o.M[15](t,this.timeBase.num),o.M[15](t+4,this.timeBase.den),this.bitrateFilter.init(this.parameters,t),l.t(8)}this.bitrateFilter.sendAVPacket(this.avpacket),this.bitrateFilter.receiveAVPacket(this.avpacket)}if(!this.extradata){const e=(0,h.rU)(this.avpacket,1);var t;e&&(this.extradata=n()(t=(0,p.s3)(a.f[20](e),a.f[25](e+4))).call(t))}}else 225===a.f[15](this.parameters+4)?this.extradata||(this.extradata=v.Yj(this.parameters,(0,h.iI)(this.avpacket))):167===a.f[15](this.parameters+4)&&(this.extradata||(this.extradata=A.Yj(this.parameters)));o.M[15](this.avpacket+76,this.timeBase.den),o.M[15](this.avpacket+72,this.timeBase.num),o.M[17](this.avpacket+48,(0,x.k)(BigInt(1),this.framerateTimebase,this.timeBase)),this.options.onReceiveAVPacket(this.avpacket),this.avpacket=0,this.encodeQueueSize--}}receiveAVPacket(){return this.encoder.invoke("encoder_receive",this.getAVPacket())}async open(t,e,r=1,s={}){await this.encoder.run(void 0,r);const i=c.s_.malloc(8),n=c.s_.malloc(4);o.M[15](i,e.num),o.M[15](i+4,e.den),o.M[20](n,0),12!==a.f[15](t+4)||1&a.f[15](t+160)||this.encoder.invoke("encoder_set_flags",4194304),this.encoder.invoke("encoder_set_max_b_frame",a.f[15](t+104)),w.HP(s).length&&(this.encoderOptions&&(y.AO(this.encoderOptions),c.s_.free(this.encoderOptions),this.encoderOptions=0),this.encoderOptions=(0,k.Gy)(8),w.__(s,((t,e)=>{(b.Yj(t)||b.Yj(e))&&y.a5(this.encoderOptions,e,t)})),o.M[20](n,this.encoderOptions));let u=0;return g.A.jspi?u=await this.encoder.invokeAsync("encoder_open",t,i,r,n):(u=this.encoder.invoke("encoder_open",t,i,r,n),await this.encoder.childThreadsReady()),this.encoderOptions=a.f[20](n),c.s_.free(n),c.s_.free(i),u<0?(d.z3(`open video encoder failed, ret: ${u}`,"src/avcodec/wasmcodec/VideoEncoder.ts",197),I.r8):(this.parameters=t,this.timeBase=e,this.inputCounter=BigInt(0),this.framerateTimebase={den:a.f[15](t+72),num:a.f[15](t+76)},this.encodeQueueSize=0,0)}preEncode(t,e){return this.avframe?(0,f.to)(this.avframe):this.avframe=(0,f.FP)(),(0,f.gg)(this.avframe,t),t=this.avframe,e&&o.M[15](t+88,1),this.options.copyTs&&a.f[17](t+104)!==_.Dh&&0!==a.f[15](t+124)&&0!==a.f[15](t+120)?o.M[17](t+104,(0,x.Mr)(a.f[17](t+104),t+120,this.timeBase)):o.M[17](t+104,(0,x.k)(this.inputCounter,this.framerateTimebase,this.timeBase)),this.inputCounter++,o.M[15](t+124,this.timeBase.den),o.M[15](t+120,this.timeBase.num),t}postEncode(){for(this.encodeQueueSize++;;){let t=this.receiveAVPacket();if(1!==t){if(t<0)return t;break}this.outputAVPacket()}return 0}async encodeAsync(t,e){return t=this.preEncode(t,e),await this.encoder.invokeAsync("encoder_encode",t)||this.postEncode()}encode(t,e){return t=this.preEncode(t,e),this.encoder.invoke("encoder_encode",t)||this.postEncode()}async flush(){for(this.encoder.invoke("encoder_flush");;){const t=this.receiveAVPacket();if(t<1)return t;this.outputAVPacket()}return 0}getExtraData(){if(this.extradata)return this.extradata;const t=this.encoder.invoke("encoder_get_extradata"),e=this.encoder.invoke("encoder_get_extradata_size");var r;return t&&e?n()(r=(0,p.s3)(t,e)).call(r):null}getColorSpace(){return{colorSpace:this.encoder.invoke("encoder_get_color_space"),colorPrimaries:this.encoder.invoke("encoder_get_color_primaries"),colorTrc:this.encoder.invoke("encoder_get_color_trc")}}close(){this.encoder.invoke("encoder_close"),this.encoder.destroy(),this.avpacket&&(this.options.avpacketPool?this.options.avpacketPool.release(this.avpacket):(0,h.Qe)(this.avpacket),this.avpacket=0),this.avframe&&((0,f.xj)(this.avframe),this.avframe=0),this.bitrateFilter&&(this.bitrateFilter.destroy(),this.bitrateFilter=void 0),this.encoderOptions&&(y.AO(this.encoderOptions),c.s_.free(this.encoderOptions),this.encoderOptions=0)}getQueueLength(){return this.encodeQueueSize}getChildThreadCount(){return this.encoder?this.encoder.getChildThreadCount():0}}},77104:(t,e,r)=>{"use strict";r.d(e,{A:()=>v});var s=r(49859),i=r(18979),n=r.n(i),a=r(94870),o=r.n(a),c=r(63939),u=r(79756),h=r(14686),d=r(71517),l=r(22898),f=r(4624),p=r(9705),m=r(72739);const g="src/avcodec/webcodec/AudioDecoder.ts";class v{constructor(t){(0,s.A)(this,"options",void 0),(0,s.A)(this,"decoder",void 0),(0,s.A)(this,"parameters",0),(0,s.A)(this,"extradata",void 0),(0,s.A)(this,"currentError",null),this.options=t}output(t){this.options.onReceiveAudioData?this.options.onReceiveAudioData(t):t.close()}error(t){this.currentError=t,this.options.onError(t)}async open(t){var e,r,s,i;this.currentError=null,this.parameters=t,this.extradata=void 0,0!==c.f[20](t+12)&&(this.extradata=n()(i=(0,h.s3)(c.f[20](t+12),c.f[15](t+16))).call(i));const a={codec:null!==(e=this.options.codec)&&void 0!==e?e:(0,u.A)(this.parameters),sampleRate:c.f[15](t+136),numberOfChannels:c.f[15](t+116),description:this.extradata};a.description||delete a.description;try{if(!(await AudioDecoder.isConfigSupported(a)).supported)return f.z3("not support",g,95),p.nr}catch(t){return f.z3(`${t}`,g,100),p.r8}return this.decoder&&"closed"!==this.decoder.state&&this.decoder.close(),this.decoder=new AudioDecoder({output:o()(r=this.output).call(r,this),error:o()(s=this.error).call(s,this)}),this.decoder.reset(),this.decoder.configure(a),this.currentError?(f.z3(`open audio decoder error, ${this.currentError}`,g,117),p.r8):0}changeExtraData(t){var e;return m.FB(t,this.extradata)?0:(this.currentError=null,this.extradata=n()(t).call(t),this.decoder.reset(),this.decoder.configure({codec:null!==(e=this.options.codec)&&void 0!==e?e:(0,u.A)(this.parameters),sampleRate:c.f[15](this.parameters+136),numberOfChannels:c.f[15](this.parameters+116),description:this.extradata}),this.currentError?(f.z3(`change extra data error, ${this.currentError}`,g,141),p.r8):0)}decode(t){if(this.currentError)return f.z3(`decode error, ${this.currentError}`,g,150),p.LR;const e=(0,d.rU)(t,1);if(0!==e){let t=this.changeExtraData((0,h.s3)(c.f[20](e),c.f[25](e+4)));if(t)return t}const r=(0,l.A)(t);try{this.decoder.decode(r)}catch(t){return f.z3(`decode error, ${t}`,g,169),p.LR}return 0}async flush(){if(this.currentError)return f.z3(`flush error, ${this.currentError}`,g,178),p.LR;try{return await this.decoder.flush(),0}catch(t){return f.z3(`flush error, ${t}`,g,186),p.LR}}close(){"closed"!==this.decoder.state&&this.decoder.close(),this.decoder=void 0}getQueueLength(){var t,e;return null!==(t=null===(e=this.decoder)||void 0===e?void 0:e.decodeQueueSize)&&void 0!==t?t:0}static async isSupported(t){let e;var r;0!==c.f[20](t+12)&&(e=n()(r=(0,h.s3)(c.f[20](t+12),c.f[15](t+16))).call(r));const s={codec:(0,u.A)(t),sampleRate:c.f[15](t+136),numberOfChannels:c.f[15](t+116),description:e};s.description||delete s.description;try{return(await AudioDecoder.isConfigSupported(s)).supported}catch(t){return!1}}}},72308:(t,e,r)=>{"use strict";r.d(e,{A:()=>b});var s=r(49859),i=r(94870),n=r.n(i),a=r(86226),o=r.n(a),c=r(63939),u=r(50932),h=(r(9599),r(79756)),d=r(84716),l=r(71517),f=r(56024),p=r(59944),m=r(44328),g=r(77231),v=r(72703),A=r(4624),w=r(9705);const y="src/avcodec/webcodec/AudioEncoder.ts";class b{constructor(t){(0,s.A)(this,"encoder",void 0),(0,s.A)(this,"options",void 0),(0,s.A)(this,"parameters",0),(0,s.A)(this,"timeBase",void 0),(0,s.A)(this,"currentError",null),(0,s.A)(this,"pts",BigInt(0)),(0,s.A)(this,"ptsQueue",[]),(0,s.A)(this,"avframeCache",void 0),(0,s.A)(this,"extradata",null),this.options=t,this.avframeCache=[]}async output(t,e){const r=this.options.avpacketPool?this.options.avpacketPool.alloc():(0,l._5)();if(this.extradata)(0,p.A)(t,r,e);else{var s;if(null!=e&&null!==(s=e.decoderConfig)&&void 0!==s&&s.description){let t;t=e.decoderConfig.description instanceof ArrayBuffer?new Uint8Array(e.decoderConfig.description):new Uint8Array(e.decoderConfig.description.buffer),this.extradata=t}(0,p.A)(t,r)}let i=this.ptsQueue.shift();void 0!==i&&i!==g.Dh&&this.options.copyTs||(i=this.pts),u.M[17](r+8,i),u.M[17](r+16,i),u.M[17](r+48,(0,m.Mr)(c.f[17](r+48),r+72,this.timeBase)),u.M[15](r+76,this.timeBase.den),u.M[15](r+72,this.timeBase.num),this.pts+=c.f[17](r+48),this.options.onReceiveAVPacket(r);const n=this.avframeCache.shift();n&&(this.options.avframePool?this.options.avframePool.release(n):(0,f.xj)(n))}error(t){this.options.onError(t)}async open(t,e){var r,s,i;this.currentError=null;const a={codec:(0,h.A)(t),sampleRate:c.f[15](t+136),numberOfChannels:c.f[15](t+116),bitrate:Number(c.f[17](t+32)),bitrateMode:null!==(r=this.options.bitrateMode)&&void 0!==r?r:"constant"};this.options.opus&&(a.opus=this.options.opus);try{if(!(await AudioEncoder.isConfigSupported(a)).supported)return A.z3("not support",y,141),w.nr}catch(t){return A.z3(`${t}`,y,146),w.r8}return this.encoder&&"closed"!==this.encoder.state&&this.encoder.close(),this.encoder=new AudioEncoder({output:n()(s=this.output).call(s,this),error:n()(i=this.error).call(i,this)}),this.encoder.reset(),this.encoder.configure(a),this.currentError?(A.z3(`open audio encoder error, ${this.currentError}`,y,163),w.r8):(this.pts=BigInt(0),this.ptsQueue=[],this.parameters=t,this.timeBase=e,0)}encode(t){if(this.currentError)return A.z3(`encode error, ${this.currentError}`,y,177),w.r8;if((0,v.A)(t)){const e=this.options.avframePool?this.options.avframePool.alloc():(0,f.FP)();(0,f.gg)(e,t),this.avframeCache.push(e),u.M[17](e+104,BigInt(0)),t=(0,d.T)(e)}try{return t.timestamp===g.N_?this.ptsQueue.push(g.Dh):this.ptsQueue.push((0,m.k)(BigInt(Math.floor(t.timestamp)),g.KR,this.timeBase)),this.encoder.encode(t),0}catch(t){return A.z3(`encode error, ${t}`,y,198),w.LR}}async flush(){if(this.currentError)return A.z3(`flush error, ${this.currentError}`,y,205),w.LR;try{return await this.encoder.flush(),0}catch(t){return A.z3(`flush error, ${t}`,y,213),w.LR}}close(){var t;this.encoder&&"closed"!==this.encoder.state&&this.encoder.close(),this.avframeCache.length&&o()(t=this.avframeCache).call(t,(t=>{this.options.avframePool?this.options.avframePool.release(t):(0,f.xj)(t)})),this.encoder=void 0}getExtraData(){return this.extradata}getQueueLength(){var t,e;return null!==(t=null===(e=this.encoder)||void 0===e?void 0:e.encodeQueueSize)&&void 0!==t?t:0}static async isSupported(t){const e={codec:(0,h.A)(t),sampleRate:c.f[15](t+136),numberOfChannels:c.f[15](t+116),bitrate:Number(c.f[17](t+32)),bitrateMode:"constant"};try{return(await AudioEncoder.isConfigSupported(e)).supported}catch(t){return!1}}}},71039:(t,e,r)=>{"use strict";r.d(e,{A:()=>O});var s=r(49859),i=r(74707),n=r.n(i),a=r(385),o=r.n(a),c=r(129),u=r.n(c),h=r(86226),d=r.n(h),l=r(18979),f=r.n(l),p=r(94870),m=r.n(p),g=r(61240),v=r.n(g),A=r(63939),w=r(77162),y=r(29170),b=(r(9599),r(86834)),k=r(28875),x=r(14686),_=r(71517),I=r(39365),P=r(28917),M=r(4624),S=r(44690),E=r(62815),T=r(67659),B=r(59166),C=r(9705),U=r(72739),D=r(77231),R=r(44328),L=r(39381);const $="src/avcodec/webcodec/VideoDecoder.ts";class O{constructor(t){(0,s.A)(this,"decoder",void 0),(0,s.A)(this,"alphaDecoder",void 0),(0,s.A)(this,"options",void 0),(0,s.A)(this,"parameters",0),(0,s.A)(this,"extradata",void 0),(0,s.A)(this,"currentError",null),(0,s.A)(this,"inputQueue",void 0),(0,s.A)(this,"outputQueue",void 0),(0,s.A)(this,"dtsQueue",void 0),(0,s.A)(this,"sort",void 0),(0,s.A)(this,"keyframeRequire",!1),(0,s.A)(this,"extradataRequire",!1),(0,s.A)(this,"alphaQueue",void 0),(0,s.A)(this,"alphaPending",void 0),this.options=t,this.inputQueue=[],this.outputQueue=[],this.dtsQueue=[],this.alphaQueue=[],this.alphaPending=new(n()),this.sort=!(!b.A.safari&&!S.A.ios)}getAlphaFrame(t){if(this.alphaQueue.length){let r=this.alphaQueue.length-1;for(;r>=0;r--){var e;if(this.alphaQueue[r].timestamp===t.timestamp)return o()(e=this.alphaQueue).call(e,r,1).shift()}}}async output(t){if(2&A.f[15](this.parameters+160)&&this.dtsQueue.length){const e=t;t=new VideoFrame(e,{timestamp:this.dtsQueue.shift()}),e.close()}if(!this.alphaPending.has(t.timestamp)||(await this.alphaPending.get(t.timestamp).promise,this.decoder))if(u()(this)){let r=0;for(;r<this.outputQueue.length;r++)if(this.outputQueue[r].timestamp>t.timestamp){var e;o()(e=this.outputQueue).call(e,r,0,t);break}for(r===this.outputQueue.length&&this.outputQueue.push(t);this.outputQueue.length>2&&this.outputQueue[0].timestamp===this.inputQueue[0];){const t=this.outputQueue.shift(),e=this.getAlphaFrame(t);this.options.onReceiveVideoFrame?this.options.onReceiveVideoFrame(t,e):(t.close(),e&&e.close()),this.inputQueue.shift()}}else{const e=this.getAlphaFrame(t);this.options.onReceiveVideoFrame?this.options.onReceiveVideoFrame(t,e):(t.close(),e&&e.close())}else t.close()}async outputAlpha(t){this.alphaQueue.push(t),this.alphaPending.has(t.timestamp)&&(this.alphaPending.get(t.timestamp).resolve(),this.alphaPending.delete(t.timestamp))}error(t){this.currentError=t,this.options.onError(t)}errorAlpha(t){var e;this.currentError=t,this.options.onError(t),d()(e=this.alphaPending).call(e,(t=>{t.resolve()})),this.alphaPending.clear()}changeExtraData(t){var e,r;if(U.FB(t,this.extradata))return 0;this.currentError=null,this.extradata=f()(t).call(t),27===A.f[15](this.parameters+4)?E.XC({codecpar:(0,y.A)(this.parameters,w.A),sideData:{},metadata:{}},this.extradata):173===A.f[15](this.parameters+4)&&T.XC({codecpar:(0,y.A)(this.parameters,w.A),sideData:{},metadata:{}},this.extradata),this.decoder.reset();const s={codec:null!==(e=this.options.codec)&&void 0!==e?e:(0,k.A)(this.parameters,t),codedWidth:A.f[15](this.parameters+56),codedHeight:A.f[15](this.parameters+60),description:this.extradata,hardwareAcceleration:(0,I.C)(null===(r=this.options.enableHardwareAcceleration)||void 0===r||r)};return s.codedWidth||delete s.codedWidth,s.codedHeight||delete s.codedHeight,this.options.optimizeForLatency&&(s.optimizeForLatency=this.options.optimizeForLatency),this.options.colorSpace&&(s.colorSpace=this.options.colorSpace),this.options.rotation&&(s.rotation=this.options.rotation),this.options.flip&&(s.flip=this.options.flip),this.decoder.configure(s),this.alphaDecoder&&this.alphaDecoder.configure(s),this.currentError?(M.z3(`change extra data error, ${this.currentError}`,$,256),C.r8):(this.keyframeRequire=!0,0)}async open(t){var e,r,s,i,n,a;this.currentError=null,this.extradata=void 0,0!==A.f[20](t+12)&&(this.extradata=f()(a=(0,x.s3)(A.f[20](t+12),A.f[15](t+16))).call(a)),this.parameters=t;const o={codec:null!==(e=this.options.codec)&&void 0!==e?e:(0,k.A)(t),codedWidth:A.f[15](t+56),codedHeight:A.f[15](t+60),description:1&A.f[15](t+160)?void 0:this.extradata,hardwareAcceleration:(0,I.C)(null===(r=this.options.enableHardwareAcceleration)||void 0===r||r)};this.options.optimizeForLatency&&(o.optimizeForLatency=this.options.optimizeForLatency),this.options.colorSpace&&(o.colorSpace=this.options.colorSpace),this.options.rotation&&(o.rotation=this.options.rotation),this.options.flip&&(o.flip=this.options.flip),o.description||delete o.description,o.codedWidth||delete o.codedWidth,o.codedHeight||delete o.codedHeight;try{if(!(await VideoDecoder.isConfigSupported(o)).supported)return M.z3("not support",$,309),C.nr}catch(t){return M.z3(`${t}`,$,314),C.r8}var c,u,h,l;return this.decoder&&"closed"!==this.decoder.state&&this.decoder.close(),this.alphaDecoder&&"closed"!==this.alphaDecoder.state&&this.alphaDecoder.close(),this.decoder=new VideoDecoder({output:m()(s=this.output).call(s,this),error:m()(i=this.error).call(i,this)}),this.decoder.reset(),this.decoder.configure(o),8&A.f[15](t+160)&&(139===A.f[15](t+4)||167===A.f[15](t+4)||225===A.f[15](t+4))&&"keep"===this.options.alpha&&(this.alphaDecoder=new VideoDecoder({output:m()(c=this.outputAlpha).call(c,this),error:m()(u=this.errorAlpha).call(u,this)}),this.alphaDecoder.reset(),this.alphaDecoder.configure(o)),this.currentError?(M.z3(`open video decoder error, ${this.currentError}`,$,349),C.r8):(this.keyframeRequire=!0,1&A.f[15](t+160)&&(this.extradataRequire=!0),2&A.f[15](this.parameters+160)&&(this.sort=!1),this.outputQueue.length&&d()(h=this.outputQueue).call(h,(t=>{t.close()})),this.alphaQueue.length&&d()(l=this.alphaQueue).call(l,(t=>{t.close()})),d()(n=this.alphaPending).call(n,(t=>{t.resolve()})),this.alphaPending.clear(),this.inputQueue.length=0,this.outputQueue.length=0,this.dtsQueue.length=0,this.alphaQueue.length=0,0)}decode(t){if(this.currentError)return M.z3(`decode error, ${this.currentError}`,$,388),C.LR;const e=(0,_.rU)(t,1);if(0!==e){let t=this.changeExtraData((0,x.s3)(A.f[20](e),A.f[25](e+4)));if(t)return t}const r=1&A.f[15](t+36);if(this.keyframeRequire){if(!r)return 0;if(1&A.f[15](this.parameters+160)&&this.extradata&&this.extradataRequire){if(27===A.f[15](this.parameters+4)){if(!E.sL((0,_.iI)(t))){const e=E.kM((0,_.iI)(t),this.extradata);e&&(0,_.NX)(t,e.bufferPointer,e.length)}}else if(173===A.f[15](this.parameters+4)){if(!T.sL((0,_.iI)(t))){const e=T.kM((0,_.iI)(t),this.extradata);e&&(0,_.NX)(t,e.bufferPointer,e.length)}}else if(196===A.f[15](this.parameters+4)&&!B.sL((0,_.iI)(t))){const e=B.kM((0,_.iI)(t),this.extradata);e&&(0,_.NX)(t,e.bufferPointer,e.length)}this.extradataRequire=!1}}const s=(0,P.A)(t),i=s.timestamp;if(u()(this)){let t=0;for(;t<this.inputQueue.length;t++)if(this.inputQueue[t]>i){var n;o()(n=this.inputQueue).call(n,t,0,i);break}t===this.inputQueue.length&&this.inputQueue.push(i)}try{if(this.alphaDecoder){const e=(0,_.rU)(t,15);if(e&&L.v4(A.f[20](e))===BigInt(1))if(s.timestamp!==D.N_){this.alphaDecoder.decode(new EncodedVideoChunk({type:s.type,timestamp:s.timestamp,duration:null!=s.duration?s.duration:void 0,data:(0,x.s3)(A.f[20](e)+8,A.f[25](e+4)-8)}));let{promise:t,resolve:r}=v().withResolvers();this.alphaPending.set(s.timestamp,{promise:t,resolve:r})}else M.R8("decode with alpha need avpacket's pts, ignore alpha channel data",$,478)}this.decoder.decode(s),2&A.f[15](this.parameters+160)&&this.dtsQueue.push(Number((0,R.Mr)(A.f[17](t+16),t+72,D.KR)))}catch(t){return M.z3(`decode error, ${t}`,$,490),C.LR}return r&&(this.keyframeRequire=!1),0}async flush(){if(this.currentError)return M.z3(`flush error, ${this.currentError}`,$,503),C.LR;try{this.alphaDecoder&&await this.alphaDecoder.flush(),await this.decoder.flush()}catch(t){return M.z3(`flush error, ${t}`,$,513),C.LR}if(u()(this))for(;this.outputQueue.length;){const t=this.outputQueue.shift(),e=this.getAlphaFrame(t);this.options.onReceiveVideoFrame?this.options.onReceiveVideoFrame(t,e):(t.close(),e&&e.close())}return this.keyframeRequire=!0,0}close(){var t,e,r;this.decoder&&"closed"!==this.decoder.state&&this.decoder.close(),this.alphaDecoder&&"closed"!==this.alphaDecoder.state&&this.alphaDecoder.close(),d()(t=this.alphaPending).call(t,(t=>{t.resolve()})),this.alphaPending.clear(),this.decoder=void 0,this.alphaDecoder=void 0,this.currentError=null,this.outputQueue.length&&d()(e=this.outputQueue).call(e,(t=>{t.close()})),this.alphaQueue.length&&d()(r=this.alphaQueue).call(r,(t=>{t.close()})),this.inputQueue.length=0,this.outputQueue.length=0,this.alphaQueue.length=0}getQueueLength(){var t,e;return null!==(t=null===(e=this.decoder)||void 0===e?void 0:e.decodeQueueSize)&&void 0!==t?t:0}setSkipFrameDiscard(t){}static async isSupported(t,e){let r;var s;0!==A.f[20](t+12)&&(r=f()(s=(0,x.s3)(A.f[20](t+12),A.f[15](t+16))).call(s));const i={codec:(0,k.A)(t),codedWidth:A.f[15](t+56),codedHeight:A.f[15](t+60),description:1&A.f[15](t+160)?void 0:r,hardwareAcceleration:(0,I.C)(null==e||e)};i.description||delete i.description;try{return(await VideoDecoder.isConfigSupported(i)).supported}catch(t){return!1}}}},47243:(t,e,r)=>{"use strict";r.d(e,{A:()=>O});var s=r(49859),i=r(8628),n=r.n(i),a=r(18979),o=r.n(a),c=r(74707),u=r.n(c),h=r(52730),d=r.n(h),l=r(94870),f=r.n(l),p=r(86226),m=r.n(p),g=r(63939),v=r(50932),A=r(9599),w=r(29170),y=r(28875),b=r(39365),k=r(44328),x=r(89188),_=r(71517),I=r(97317),P=r(56024),M=r(26777),S=r(37180),E=r(86834),T=r(4624),B=r(9705),C=r(21477),U=r(82014),D=r(72703),R=r(77231),L=r(95335);const $="src/avcodec/webcodec/VideoEncoder.ts";class O{constructor(t){(0,s.A)(this,"encoder",void 0),(0,s.A)(this,"options",void 0),(0,s.A)(this,"parameters",0),(0,s.A)(this,"timeBase",void 0),(0,s.A)(this,"currentError",null),(0,s.A)(this,"avframeMap",void 0),(0,s.A)(this,"framerateTimebase",void 0),(0,s.A)(this,"inputCounter",BigInt(0)),(0,s.A)(this,"outputCounter",BigInt(0)),(0,s.A)(this,"extradata",void 0),(0,s.A)(this,"ptsQueue",[]),this.options=t,this.avframeMap=new(u())}async output(t,e){const r=BigInt(t.timestamp);let s=(0,k.k)(this.outputCounter++,this.framerateTimebase,this.timeBase);this.options.copyTs&&this.ptsQueue.length&&(s=this.ptsQueue.shift());const i=this.options.avpacketPool?this.options.avpacketPool.alloc():(0,_._5)();if(this.extradata)(0,M.A)(t,i,e);else{var a,c;if(null!=e&&null!==(a=e.decoderConfig)&&void 0!==a&&a.description){let t;t=e.decoderConfig.description instanceof ArrayBuffer?new Uint8Array(e.decoderConfig.description):new Uint8Array(e.decoderConfig.description.buffer),E.A.chrome&&!E.A.checkVersion(E.A.version,"130",!0)&&27===g.f[15](this.parameters+4)&&function(t){var e,r;const s=t[2];void 0!==s&&n()(e=o()(r=s.toString(2)).call(r,-2)).call(e,"1")&&(t[2]=0)}(t),this.extradata=t}if(null!=e&&null!==(c=e.decoderConfig)&&void 0!==c&&c.colorSpace&&(v.M[15](this.parameters+96,(0,S.mt)(e.decoderConfig.colorSpace.matrix)),v.M[15](this.parameters+88,(0,S.ab)(e.decoderConfig.colorSpace.primaries)),v.M[15](this.parameters+92,(0,S.nG)(e.decoderConfig.colorSpace.transfer))),(0,M.A)(t,i,e?L.X$({},e,{decoderConfig:void 0}):void 0),!this.extradata){let t;225===g.f[15](this.parameters+4)?t=C.Yj(this.parameters,(0,_.iI)(i)):167===g.f[15](this.parameters+4)&&(t=U.Yj(this.parameters)),t&&(this.extradata=t)}}v.M[17](i+8,r),v.M[17](i+16,s),v.M[15](i+76,this.timeBase.den),v.M[15](i+72,this.timeBase.num),v.M[17](i+48,(0,k.k)(BigInt(1),this.framerateTimebase,this.timeBase)),27!==g.f[15](this.parameters+4)&&173!==g.f[15](this.parameters+4)&&196!==g.f[15](this.parameters+4)||(1&g.f[15](this.parameters+160)?v.M[15](i+36,64|g.f[15](i+36)):v.M[15](i+36,-65&g.f[15](i+36))),this.options.onReceiveAVPacket(i);const u=this.avframeMap.get(r);u&&(this.options.avframePool?this.options.avframePool.release(u):(0,P.xj)(u)),this.avframeMap.delete(r)}error(t){this.currentError=t,this.options.onError(t)}async open(t,e){var r,s,i;this.currentError=null;const n=(0,I.I)(g.f[15](t+28));if(!n||n.comp[0].depth>8)return T.z3(`format ${g.f[15](t+28)} not support`,$,205),B.r8;const a={codec:(0,y.A)(t),width:g.f[15](t+56),height:g.f[15](t+60),bitrate:Number(g.f[17](t+32)),framerate:(0,k.lb)((0,w.A)(t+72,A.P)),hardwareAcceleration:(0,b.C)(null===(r=this.options.enableHardwareAcceleration)||void 0===r||r),latencyMode:g.f[15](t+104)?"quality":"realtime",alpha:n&&128&d()(n)?"keep":"discard"};this.options.latencyMode&&(a.latencyMode=this.options.latencyMode),this.options.bitrateMode&&(a.bitrateMode=this.options.bitrateMode),this.options.contentHint&&(a.contentHint=this.options.contentHint),this.options.scalabilityMode&&(a.scalabilityMode=this.options.scalabilityMode),27===g.f[15](t+4)?a.avc={format:1&g.f[15](t+160)?"annexb":"avc"}:173===g.f[15](t+4)?a.hevc={format:1&g.f[15](t+160)?"annexb":"hevc"}:196===g.f[15](t+4)&&(a.vvc={format:1&g.f[15](t+160)?"annexb":"vvc"});try{if(!(await VideoEncoder.isConfigSupported(a)).supported)return T.z3("not support",$,253),B.nr}catch(t){return T.z3(`${t}`,$,258),B.r8}return this.encoder&&"closed"!==this.encoder.state&&this.encoder.close(),this.encoder=new VideoEncoder({output:f()(s=this.output).call(s,this),error:f()(i=this.error).call(i,this)}),this.encoder.reset(),this.encoder.configure(a),this.currentError?(T.z3(`open video encoder error, ${this.currentError}`,$,275),B.r8):(this.parameters=t,this.timeBase=e,this.inputCounter=BigInt(0),this.outputCounter=BigInt(0),this.ptsQueue.length=0,this.framerateTimebase={den:g.f[15](t+72),num:g.f[15](t+76)},0)}encode(t,e){if(this.currentError)return T.z3(`encode error, ${this.currentError}`,$,295),B.LR;let r=(0,k.k)(this.inputCounter,this.framerateTimebase,this.timeBase);if(this.options.copyTs&&((0,D.A)(t)&&g.f[17](t+104)!==R.Dh&&0!==g.f[15](t+124)&&0!==g.f[15](t+120)||!(0,D.A)(t)&&t.timestamp>=0)&&(r=(0,D.A)(t)?(0,k.Mr)(g.f[17](t+104),t+120,this.timeBase):(0,k.k)(BigInt(t.timestamp),R.KR,this.timeBase),this.ptsQueue.push(r)),(0,D.A)(t)){const e=this.options.avframePool?this.options.avframePool.alloc():(0,P.FP)();(0,P.gg)(e,t),v.M[17](e+104,r),this.avframeMap.set(g.f[17](e+104),e),v.M[17](e+312,(0,k.k)(BigInt(1),this.framerateTimebase,(0,w.A)(e+120,A.P))),t=(0,x.pt)(e,r)}else t=new VideoFrame(t,{timestamp:Number(r),duration:Number((0,k.k)(BigInt(1),this.framerateTimebase,this.timeBase))});try{return this.encoder.encode(t,{keyFrame:e}),t.close(),this.inputCounter++,0}catch(e){return T.z3(`encode error, ${e}`,$,343),t.close(),B.LR}}async flush(){if(this.currentError)return T.z3(`flush error, ${this.currentError}`,$,351),B.LR;try{return await this.encoder.flush(),0}catch(t){return T.z3(`flush error, ${t}`,$,359),B.LR}}close(){var t;this.encoder&&"closed"!==this.encoder.state&&this.encoder.close(),this.avframeMap.size&&m()(t=this.avframeMap).call(t,(t=>{this.options.avframePool?this.options.avframePool.release(t):(0,P.xj)(t)})),this.encoder=void 0}getExtraData(){return this.extradata}getColorSpace(){return{colorSpace:g.f[15](this.parameters+96),colorPrimaries:g.f[15](this.parameters+88),colorTrc:g.f[15](this.parameters+92)}}getQueueLength(){var t,e;return null!==(t=null===(e=this.encoder)||void 0===e?void 0:e.encodeQueueSize)&&void 0!==t?t:0}static async isSupported(t,e){const r=(0,I.I)(g.f[15](t+28));if(!r||r.comp[0].depth>8)return!1;const s={codec:(0,y.A)(t),width:g.f[15](t+56),height:g.f[15](t+60),bitrate:Number(g.f[17](t+32)),framerate:(0,k.lb)((0,w.A)(t+72,A.P)),hardwareAcceleration:(0,b.C)(null==e||e),latencyMode:g.f[15](t+104)?"quality":"realtime",alpha:r&&128&d()(r)?"keep":"discard"};try{return(await VideoEncoder.isConfigSupported(s)).supported}catch(t){return!1}}}},18812:(t,e,r)=>{"use strict";r.d(e,{A:()=>g,t:()=>m});var s=r(49859),i=r(74707),n=r.n(i),a=r(86226),o=r.n(a),c=r(61240),u=r.n(c),h=r(56024),d=r(84149),l=r(72739),f=r(72703),p=r(67672);class m extends d.Ay{constructor(t){super(t instanceof MessageChannel?t.port1:t),(0,s.A)(this,"channel",void 0),(0,s.A)(this,"next",void 0),this.channel=t}connect(t){this.off(),t.off(),this.on(d.S3,(async e=>{try{const r=await t.request(e.method,e.params);this.reply(e,r,void 0,(0,f.A)(r)||p.ai(r)||"pull"!==e.method?void 0:[r])}catch(t){this.reply(e,null,t)}})),this.on(d.Wo,(e=>{t.notify(e.method,e.params)})),t.on(d.S3,(async e=>{try{const r=await this.request(e.method,e.params);t.reply(e,r,void 0,(0,f.A)(r)||p.ai(r)||"pull"!==e.method?void 0:[r])}catch(r){t.reply(e,null,r)}})),t.on(d.Wo,(t=>{this.notify(t.method,t.params)})),this.next=t}disconnect(){this.off(),this.next&&this.next.off(),this.next=void 0}getInnerPort(){if(this.channel instanceof MessageChannel)return this.channel.port2}}class g{constructor(t,e,r){(0,s.A)(this,"options",void 0),(0,s.A)(this,"inputAVFilterNodePort",void 0),(0,s.A)(this,"outputAVFilterNodePort",void 0),(0,s.A)(this,"inputInnerNodePort",void 0),(0,s.A)(this,"outputInnerNodePort",void 0),(0,s.A)(this,"currentOutput",void 0),(0,s.A)(this,"consumedCount",void 0),(0,s.A)(this,"pending",void 0),(0,s.A)(this,"inputCount",void 0),(0,s.A)(this,"outputCount",void 0),(0,s.A)(this,"inputConnectedMap",void 0),(0,s.A)(this,"outputConnectedMap",void 0),this.options=t,this.inputCount=e,this.outputCount=r,this.inputAVFilterNodePort=[],this.outputAVFilterNodePort=[],this.inputInnerNodePort=[],this.outputInnerNodePort=[];for(let t=0;t<this.inputCount;t++){const t=new m(new MessageChannel);this.inputAVFilterNodePort.push(t),this.inputInnerNodePort.push(new d.Ay(t.getInnerPort()))}for(let t=0;t<this.outputCount;t++){const t=new m(new MessageChannel);this.outputAVFilterNodePort.push(t),this.outputInnerNodePort.push(new d.Ay(t.getInnerPort()))}this.consumedCount=0,this.pending=[],this.currentOutput=[];for(let t=0;t<this.outputCount;t++)this.handlePull(this.outputInnerNodePort[t],t);this.inputConnectedMap=new(n()),this.outputConnectedMap=new(n())}handlePull(t,e){t.on(d.S3,(async r=>{if("pull"===r.method)if(0===this.consumedCount){const i=[];this.currentOutput.length=0;for(let t=0;t<this.inputCount;t++)i.push(await this.inputInnerNodePort[t].request("pull",r.params));var s;await this.process(i,this.currentOutput,r.params),o()(i).call(i,(t=>{p.ai(t)&&t<0||((0,f.A)(t)?t>0&&(this.options.avframePool?this.options.avframePool.release(t):(0,h.xj)(t)):t.close())})),t.reply(r,this.currentOutput[e],void 0,(0,f.A)(this.currentOutput[e])||p.ai(this.currentOutput[e])?void 0:[this.currentOutput[e]]),this.consumedCount++,this.pending.length&&(o()(s=this.pending).call(s,(t=>{t.resolve()})),this.pending.length=0),this.consumedCount===this.outputCount&&(this.consumedCount=0,this.currentOutput.length=0)}else this.consumedCount===this.outputCount-1?(t.reply(r,this.currentOutput[e],void 0,(0,f.A)(this.currentOutput[e])||p.ai(this.currentOutput[e])?void 0:[this.currentOutput[e]]),this.consumedCount=0,this.currentOutput.length=0):(await new(u())(((t,e)=>{this.pending.push({resolve:t,reject:e})})),t.reply(r,this.currentOutput[e],void 0,(0,f.A)(this.currentOutput[e])||p.ai(this.currentOutput[e])?void 0:[this.currentOutput[e]]),this.consumedCount++)}))}getInputNodePort(t){return this.inputAVFilterNodePort[t]}getOutputNodePort(t){return this.outputAVFilterNodePort[t]}getInputCount(){return this.inputCount}getOutputCount(){return this.outputCount}getFreeInputNodePort(){var t;const e=[];o()(t=this.inputConnectedMap).call(t,((t,r)=>{e.push(t)}));for(let t=0;t<this.inputCount;t++)if(!l.zy(e,t))return{index:t,port:this.getInputNodePort(t)}}getFreeOutputNodePort(){var t;const e=[];o()(t=this.outputConnectedMap).call(t,((t,r)=>{e.push(t)}));for(let t=0;t<this.outputCount;t++)if(!l.zy(e,t))return{index:t,port:this.getOutputNodePort(t)}}addInputPeer(t,e){this.inputConnectedMap.set(t,e)}removeInputPeer(t){this.inputConnectedMap.delete(t)}addOutputPeer(t,e){this.outputConnectedMap.set(t,e)}removeOutputPeer(t){this.outputConnectedMap.delete(t)}connect(t){if(this.outputConnectedMap.size===this.outputCount)throw new Error("all output has connected");const e=this.getFreeOutputNodePort(),r=t.getFreeInputNodePort();if(!r)throw new Error("next node all input has connected");e.port.connect(r.port),this.outputConnectedMap.set(t,e.index),t.addInputPeer(this,r.index)}disconnectNode(t){this.outputConnectedMap.has(t)&&(this.outputAVFilterNodePort[this.outputConnectedMap.get(t)].disconnect(),this.outputConnectedMap.delete(t),t instanceof g&&t.removeInputPeer(this))}disconnect(t){var e;if(t)return this.disconnectNode(t);o()(e=this.outputConnectedMap).call(e,((t,e)=>{this.disconnectNode(e)}))}}},88496:(t,e,r)=>{"use strict";r.d(e,{A:()=>n});var s=r(49859),i=r(18812);class n{constructor(t){(0,s.A)(this,"nodePort",void 0),(0,s.A)(this,"outputNode",void 0),this.nodePort=new i.t(t)}connect(t){const{port:e,index:r}=t.getFreeInputNodePort();this.nodePort.connect(e),t.addInputPeer(this,r),this.outputNode=t}}},2579:(t,e,r)=>{"use strict";r.d(e,{A:()=>n});var s=r(49859),i=r(18812);class n{constructor(t){(0,s.A)(this,"nodePort",void 0),(0,s.A)(this,"inputNode",void 0),this.nodePort=new i.t(t)}getFreeInputNodePort(){return{index:0,port:this.nodePort}}addInputPeer(t){this.inputNode=t}}},53402:(t,e,r)=>{"use strict";r.d(e,{A:()=>h});var s=r(63939),i=(r(9599),r(77231)),n=r(18812),a=r(56024),o=r(44328),c=r(72703),u=r(67672);class h extends n.A{constructor(t){super(t,1,1)}async ready(){}async destroy(){}async process(t,e){let r=t[0];if(u.ai(r)&&r<0)return void(e[0]=r);let n=(0,c.A)(r)?(0,o.Mr)(s.f[17](r+104),r+120,i.KR):BigInt(r.timestamp);if(n<this.options.start)for(;;){const t=await this.inputInnerNodePort[0].request("pull");if(u.ai(t)&&t<0)return void(e[0]=t);if(n=(0,c.A)(t)?(0,o.Mr)(s.f[17](t+104),t+120,i.KR):BigInt(t.timestamp),n>=this.options.start)return void(e[0]=t);(0,c.A)(t)?this.options.avframePool?this.options.avframePool.release(t):(0,a.xj)(t):t.close()}else{if(n>this.options.end&&this.options.end>=this.options.start)return void(e[0]=-1048576);if((0,c.A)(r)){const t=this.options.avframePool?this.options.avframePool.alloc():(0,a.FP)();(0,a.gg)(t,r),e[0]=t}else e[0]=r.clone()}}}},54903:(t,e,r)=>{"use strict";r.d(e,{A:()=>A});var s=r(49859),i=r(14686),n=r(63939),a=r(50932),o=(r(9599),r(92246)),c=r(18812),u=(r(10278),r(56024)),h=r(37837),d=r(66788),l=r(9705),f=r(37815),p=r(77231),m=r(4624),g=r(67672),v=r(94561);class A extends c.A{constructor(t){super(t,1,1),(0,s.A)(this,"resampler",void 0),(0,s.A)(this,"pcm",0)}async ready(){this.pcm=(0,h.Gy)(48)}async destroy(){this.pcm&&(n.f[20](this.pcm)&&((0,h.aI)(n.f[20](this.pcm)),(0,h.aI)(this.pcm)),(0,h.Eb)(this.pcm)),this.resampler&&(this.resampler.close(),this.resampler=void 0)}async process(t,e){const r=t[0];if(r<0)return void(e[0]=r);const s=this.options.avframePool?this.options.avframePool.alloc():(0,u.FP)();if(n.f[15](r+152)!==this.options.output.sampleRate||n.f[15](r+292)!==this.options.output.channels||n.f[15](r+80)!==this.options.output.format&&this.options.output.format!==p.N_){if(this.resampler){const t=this.resampler.getInputPCMParameters();t.channels===n.f[15](r+292)&&t.sampleRate===n.f[15](r+152)&&t.format===n.f[15](r+80)||(this.resampler.close(),this.resampler=void 0)}if(!this.resampler){let t=this.options.resource;g.sv(t)&&(t=await(0,v.A)(t)),this.resampler=new o.A({resource:t});const s=await this.resampler.open({channels:n.f[15](r+292),sampleRate:n.f[15](r+152),format:n.f[15](r+80)},{channels:this.options.output.channels,sampleRate:this.options.output.sampleRate,format:this.options.output.format===p.N_?n.f[15](r+80):this.options.output.format});if(s)return m.z3(`open resampler failed, error ${s}`,"src/avfilter/audio/ResampleFilterNode.ts",97),void(e[0]=l.E$)}this.resampler.resample(n.f[20](r+64),this.pcm,n.f[15](r+76)),a.M[15](s+80,this.options.output.format===p.N_?n.f[15](r+80):this.options.output.format),a.M[15](s+76,n.f[15](this.pcm+8)),a.M[15](s+152,n.f[15](this.pcm+20)),a.M[15](s+292,n.f[15](this.pcm+16)),a.M[15](s+32,n.f[15](this.pcm+4)),a.M[17](s+104,n.f[17](r+104)),a.M[17](s+312,n.f[17](r+312)),a.M[17](s+112,n.f[17](r+112)),(0,i.Mr)(s+120,r+120,8);const t=(0,d.K0)(n.f[15](s+80)),c=t?n.f[15](s+292):1;if(c>p.pu){if(a.M[20](s+64,(0,h.sY)(4*c)),!n.f[20](s+64))return(0,h.aI)(s+64),void(e[0]=l.gR)}else a.M[20](s+64,s);for(let r=0;r<Math.min(c,p.pu);r++){if(0===r&&(a.M[20](s+156+4*r,(0,f.aw)(n.f[20](n.f[20](this.pcm)+4*r),n.f[15](this.pcm+4)*(t?n.f[15](this.pcm+16):1))),!n.f[20](s+156+4*r)))return(0,u.to)(s),void(e[0]=l.gR);a.M[20](n.f[20](s+64)+4*r,n.f[20](n.f[20](this.pcm)+4*r)),a.M[20](s+4*r,n.f[20](n.f[20](this.pcm)+4*r)),a.M[20](n.f[20](this.pcm)+4*r,0)}for(let t=0;t<c-p.pu;t++)a.M[20](n.f[20](s+64)+4*(t+p.pu),n.f[20](n.f[20](this.pcm)+4*t)),a.M[20](n.f[20](this.pcm)+4*t,0);a.M[15](this.pcm+12,0),e[0]=s}else(0,u.gg)(s,r),e[0]=s}}},2849:(t,e,r)=>{"use strict";r.d(e,{Fn:()=>v,T$:()=>A,iT:()=>w});var s=r(74707),i=r.n(s),n=r(86226),a=r.n(n),o=r(96319),c=r.n(o),u=r(53402),h=r(54903),d=r(84624),l=r(57473),f=r(4624);const p="src/avfilter/graph.ts";function m(t,e){const r=t.options;switch(e&&(r.avframePool=e),t.type){case"resampler":return new h.A(r);case"scaler":return new l.A(r);case"range":return new u.A(r);case"framerate":return new d.A(r);default:throw new Error(`invalid GraphNodeType, ${t.type}`)}}let g=0;function v(t,e){return{id:g++,type:t,options:e}}function A(t,e){var r,s,n;const o=[],u=[],h=[],d=new(i()),l=new(i()),g=new(i());return a()(r=t.vertices).call(r,(t=>{const r={id:t.id,filter:m(t,e),children:[],parents:[]};d.set(r.id,r),o.push(r)})),a()(s=t.edges).call(s,((t,e)=>{const r=d.get(t.parent),s=d.get(t.child);r||f.h2(`${e} edge parent(${t.parent}) not found`,p,125),s||f.h2(`${e} edge child(${t.child}) not found`,p,128),r.children.push(s),s.parents.push(r),l.set(r.id,!0),g.set(s.id,!0),c()(r).connect(c()(s))})),a()(n=t.vertices).call(n,(t=>{g.has(t.id)||u.push(d.get(t.id)),l.has(t.id)||h.push(d.get(t.id))})),{vertices:o,edges:t.edges,inputs:u,outputs:h}}function w(t,e,r){const s=new(i()),n=new(i());for(let t=0;t<e.length;t++)s.has(e[t].id)?s.set(e[t].id,s.get(e[t].id)+1):s.set(e[t].id,1);for(let t=0;t<r.length;t++)n.has(r[t].id)?n.set(r[t].id,n.get(r[t].id)+1):n.set(r[t].id,1);for(let e=0;e<t.inputs.length;e++){var a;if(c()(t.inputs[e]).getInputCount()>(null!==(a=s.get(t.inputs[e].id))&&void 0!==a?a:0))return f.z3(`input filter(${t.inputs[e].id}) only has ${s.get(t.inputs[e].id)} input channel port`,p,178),!1}for(let e=0;e<t.outputs.length;e++){var o;if(c()(t.outputs[e]).getOutputCount()>(null!==(o=n.get(t.outputs[e].id))&&void 0!==o?o:0))return f.z3(`output filter(${t.outputs[e].id}) only has ${n.get(t.outputs[e].id)} output channel port`,p,185),!1}for(let e=0;e<t.vertices.length;e++)if(t.vertices[e].children.length&&t.vertices[e].parents.length){if(c()(t.vertices[e]).getOutputCount()!==t.vertices[e].children.length)return f.z3(`filter(${t.vertices[e].id}) only has ${t.vertices[e].children.length} output channel port`,p,193),!1;if(c()(t.vertices[e]).getInputCount()!==t.vertices[e].parents.length)return f.z3(`filter(${t.vertices[e].id}) only has ${t.vertices[e].parents.length} input channel port`,p,197),!1}return!0}},84624:(t,e,r)=>{"use strict";r.d(e,{A:()=>d});var s=r(49859),i=r(63939),n=(r(9599),r(18812)),a=r(67672),o=r(56024),c=r(44328),u=r(77231),h=r(72703);class d extends n.A{constructor(t){super(t,1,1),(0,s.A)(this,"lastPts",-BigInt(1)),(0,s.A)(this,"delta",BigInt(0)),(0,s.A)(this,"timeBase",u.KR),(0,s.A)(this,"step",BigInt(0))}async ready(){this.lastPts=-BigInt(1),this.delta=BigInt(0),this.timeBase=u.KR,this.step=(0,c.k)(BigInt(1),{den:this.options.framerate.num,num:this.options.framerate.den},this.timeBase)}async destroy(){}async process(t,e){let r=t[0];if(a.ai(r)&&r<0)return void(e[0]=r);let s=(0,h.A)(r)?(0,c.Mr)(i.f[17](r+104),r+120,this.timeBase):BigInt(Math.floor(r.timestamp)),n=s-this.lastPts+this.delta;if(n<this.step&&this.lastPts>-BigInt(1))for(;;){const t=await this.inputInnerNodePort[0].request("pull");if(a.ai(t)&&t<0)return void(e[0]=t);if(s=(0,h.A)(t)?(0,c.Mr)(i.f[17](t+104),t+120,this.timeBase):BigInt(Math.floor(t.timestamp)),n=s-this.lastPts,n>=this.step)return this.delta+=n-this.step,this.lastPts=s,void(e[0]=t);(0,h.A)(t)?this.options.avframePool?this.options.avframePool.release(t):(0,o.xj)(t):t.close()}else if(this.lastPts>-BigInt(1)&&(this.delta=n-this.step),this.lastPts=s,(0,h.A)(r)){const t=this.options.avframePool?this.options.avframePool.alloc():(0,o.FP)();(0,o.gg)(t,r),e[0]=t}else e[0]=r.clone()}}},57473:(t,e,r)=>{"use strict";r.d(e,{A:()=>v});var s=r(49859),i=r(63939),n=r(50932),a=r(18812),o=r(56024),c=r(49804),u=r(67672),h=r(37180),d=r(77231),l=r(9705),f=r(4624),p=r(72703),m=r(94561);const g="src/avfilter/video/ScaleFilterNode.ts";class v extends a.A{constructor(t){super(t,1,1),(0,s.A)(this,"scaler",void 0)}async ready(){}async destroy(){this.scaler&&(this.scaler.close(),this.scaler=void 0)}async process(t,e,r){let s=t[0];if(u.ai(s)&&s<0)return void(e[0]=s);const a=(0,p.A)(s)?i.f[15](s+68):s.displayWidth,v=(0,p.A)(s)?i.f[15](s+72):s.displayHeight,A=(0,p.A)(s)?i.f[15](s+80):(0,h.OB)(s.format);if(a===this.options.output.width&&v===this.options.output.height&&(A===this.options.output.format||this.options.output.format===d.N_||-1===A||r&&r.preferVideoFrame&&!(0,p.A)(s)))if((0,p.A)(s)){const t=this.options.avframePool?this.options.avframePool.alloc():(0,o.FP)();(0,o.gg)(t,s),e[0]=t}else e[0]=s.clone();else{if(-1===A)return f.z3("src avframe format not support",g,65),void(e[0]=l.E$);const r=this.options.avframePool?this.options.avframePool.alloc():(0,o.FP)();if(this.scaler){const t=this.scaler.getInputScaleParameters();t.width===a&&t.height===v&&t.format===A||(this.scaler.close(),this.scaler=void 0)}if(!this.scaler){let t=this.options.resource;u.sv(t)&&(t=await(0,m.A)(t)),this.scaler=new c.A({resource:t});const r=await this.scaler.open({width:a,height:v,format:A},{width:this.options.output.width,height:this.options.output.height,format:this.options.output.format!==d.N_?this.options.output.format:23!==A||(0,p.A)(s)?A:0});if(r)return f.z3(`open scaler failed, error ${r}`,g,108),void(e[0]=l.E$)}(0,p.A)(s)||(s=await(0,h.lL)(t[0],this.options.avframePool?this.options.avframePool.alloc():(0,o.FP)())),this.scaler.scale(s,r),(0,o.Cj)(r,s),n.M[15](r+68,this.options.output.width),n.M[15](r+72,this.options.output.height),n.M[15](r+80,this.options.output.format),e[0]=r,(0,p.A)(t[0])||(this.options.avframePool?this.options.avframePool.release(s):(0,o.xj)(s))}}}},44315:(t,e,r)=>{"use strict";r.d(e,{Xv:()=>w,fG:()=>y,oD:()=>A});var s=r(49859),i=r(71426),n=r.n(i),a=r(31721),o=r.n(a),c=r(26327),u=r.n(c),h=r(385),d=r.n(h),l=r(86226),f=r.n(l),p=r(68960),m=r(71517),g=r(20756);class v{constructor(){(0,s.A)(this,"packetBuffer",void 0),this.packetBuffer=[]}}class A{constructor(){(0,s.A)(this,"metadataHeaderPadding",-1),(0,s.A)(this,"metadata",void 0),(0,s.A)(this,"streams",void 0),(0,s.A)(this,"streamGroups",void 0),(0,s.A)(this,"options",void 0),(0,s.A)(this,"chapters",void 0),(0,s.A)(this,"privateData",void 0),(0,s.A)(this,"privateData2",void 0),(0,s.A)(this,"iformat",void 0),(0,s.A)(this,"oformat",void 0),(0,s.A)(this,"ioReader",void 0),(0,s.A)(this,"ioWriter",void 0),(0,s.A)(this,"errorFlag",void 0),(0,s.A)(this,"interval",void 0),(0,s.A)(this,"streamIndex",void 0),(0,s.A)(this,"streamGroupIndex",void 0),(0,s.A)(this,"getDecoderResource",null),this.streams=[],this.streamGroups=[],this.errorFlag=0,this.streamIndex=0,this.streamGroupIndex=0,this.interval=new v,this.options={},this.privateData={},this.metadata={},this.chapters=[]}get format(){return this.iformat?this.iformat.type:this.oformat?this.oformat.type:-1}getStreamById(t){var e;return n()(e=this.streams).call(e,(e=>e.id===t))}getStreamGroupById(t){var e;return n()(e=this.streamGroups).call(e,(e=>e.id===t))}getStreamByIndex(t){var e;return n()(e=this.streams).call(e,(e=>e.index===t))}getStreamGroupByIndex(t){var e;return n()(e=this.streamGroups).call(e,(e=>e.index===t))}getStreamByMediaType(t){var e;return n()(e=this.streams).call(e,(e=>{var r;return(null===(r=e.codecpar)||void 0===r?void 0:r.codecType)===t&&!(1024&e.disposition)}))}getStreamGroupByGroupType(t){var e;return n()(e=this.streamGroups).call(e,(e=>e.type===t))}getAttachmentPicture(){var t;return n()(t=this.streams).call(t,(t=>{var e;return 0===(null===(e=t.codecpar)||void 0===e?void 0:e.codecType)&&1024&t.disposition}))}createStream(){const t=new p.Ay;return t.index=this.streamIndex++,t.id=(0,g.A)(),this.removeStreamByIndex(t.index),this.streams.push(t),t}createStreamGroup(t){const e=new p.Tr;return e.index=this.streamGroupIndex++,e.type=t,e.id=(0,g.A)(),this.removeStreamGroupByIndex(e.index),this.streamGroups.push(e),e}addStream(t){this.removeStreamByIndex(t.index),this.streams.push(t)}addStreamGroup(t){this.removeStreamGroupByIndex(t.index),this.streamGroups.push(t)}addStreamToStreamGroup(t,e){var r;o()(r=t.streams).call(r,(t=>t===e))||t.streams.push(e)}removeStream(t){this.removeStreamByIndex(t.index)}removeStreamGroup(t){this.removeStreamGroupByIndex(t.index)}removeStreamById(t){var e;const r=u()(e=this.streams).call(e,(e=>e.id===t));if(r>-1){var s;const t=d()(s=this.streams).call(s,r,1);t[0]&&t[0].destroy()}}removeStreamGroupById(t){var e;const r=u()(e=this.streamGroups).call(e,(e=>e.id===t));if(r>-1){var s;const t=d()(s=this.streamGroups).call(s,r,1);t[0]&&t[0].destroy()}}removeStreamByIndex(t){var e;const r=u()(e=this.streams).call(e,(e=>e.index===t));if(r>-1){var s;const t=d()(s=this.streams).call(s,r,1);t[0]&&t[0].destroy()}}removeStreamGroupByIndex(t){var e;const r=u()(e=this.streamGroups).call(e,(e=>e.index===t));if(r>-1){var s;const t=d()(s=this.streamGroups).call(s,r,1);t[0]&&t[0].destroy()}}async destroy(){var t,e;this.oformat&&this.oformat.destroy(this),this.iformat&&await this.iformat.destroy(this),this.interval.packetBuffer.length&&f()(e=this.interval.packetBuffer).call(e,(t=>{(0,m.Qe)(t)})),f()(t=this.streams).call(t,(t=>{t.destroy()})),this.streams=[],this.interval=null,this.ioReader=this.ioWriter=null,this.oformat=this.iformat=null}}function w(){return new A}function y(){return new A}},64436:(t,e,r)=>{"use strict";r.d(e,{A:()=>o});var s=r(49859),i=r(63939),n=(r(77162),r(37837)),a=r(71766);class o{constructor(){(0,s.A)(this,"inCodecpar",void 0),(0,s.A)(this,"inTimeBase",void 0),(0,s.A)(this,"outCodecpar",void 0)}init(t,e){return this.inCodecpar=(0,n.Gy)(168),(0,a.Yi)(this.inCodecpar,t),this.inTimeBase={den:i.f[15](e+4),num:i.f[15](e)},0}destroy(){this.inCodecpar&&((0,a.dn)(this.inCodecpar),this.inCodecpar=0)}}},26173:(t,e,r)=>{"use strict";r.d(e,{A:()=>m});var s=r(49859),i=r(63939),n=r(50932),a=r(64436),o=r(71517),c=r(62815),u=r(67659),h=r(59166),d=r(14686),l=r(9705),f=r(37837),p=r(4624);class m extends a.A{constructor(t=!1){super(),(0,s.A)(this,"cache",void 0),(0,s.A)(this,"cached",void 0),(0,s.A)(this,"reverseSps",void 0),this.reverseSps=t}init(t,e){return super.init(t,e),this.cache=(0,o._5)(),this.cached=!1,0}destroy(){super.destroy(),(0,o.Qe)(this.cache),this.cache=0}sendAVPacket(t){if(64&i.f[15](t+36)){let e;(0,o.zu)(this.cache,t);const r=(0,d.JW)(i.f[20](t+24),i.f[15](t+28));if(27===i.f[15](this.inCodecpar+4)?e=c.oT(r,this.reverseSps):173===i.f[15](this.inCodecpar+4)?e=u.oT(r,this.reverseSps):196===i.f[15](this.inCodecpar+4)?e=h.oT(r,this.reverseSps):p.h2(`not support for codecId: ${i.f[15](this.inCodecpar+4)}`,"src/avformat/bsf/h2645/Annexb2AvccFilter.ts",97),n.M[15](this.cache+36,-65&i.f[15](this.cache+36)),(0,o.NX)(this.cache,e.bufferPointer,e.length),e.key&&n.M[15](this.cache+36,1|i.f[15](this.cache+36)),e.extradata){const t=(0,f.sY)(e.extradata.length);(0,d.lW)(t,e.extradata.length,e.extradata),(0,o.Ow)(this.cache,1,t,e.extradata.length)}}else(0,o.rN)(this.cache,t);return this.cached=!0,0}receiveAVPacket(t){return this.cached?((0,o.Up)(t),(0,o.rN)(t,this.cache),this.cached=!1,0):l.LR}reset(){return 0}}},16160:(t,e,r)=>{"use strict";r.d(e,{V:()=>i,v:()=>s});const s=256e3,i=BigInt(5e3)},75:(t,e,r)=>{"use strict";r.d(e,{Cj:()=>q,Ib:()=>H,ho:()=>j,jF:()=>Y});var s=r(96319),i=r.n(s),n=r(18979),a=r.n(n),o=r(71426),c=r.n(o),u=r(11393),h=r.n(u),d=r(52730),l=r.n(d),f=r(385),p=r.n(f),m=r(86226),g=r.n(m),v=r(31721),A=r.n(v),w=r(61499),y=r(63939),b=r(50932),k=r(9599),x=r(29170),_=r(36981),I=r(95335),P=r(72739),M=r(77231),S=r(31425),E=r(44328),T=r(71517),B=r(16160),C=r(9705),U=r(4624),D=r(40417),R=r(75742),L=r(56024),$=r(14686),O=r(31633),F=r(55680),z=r(89478);const N="src/avformat/demux.ts",V=16,W={fastOpen:!1,maxAnalyzeDuration:15e3};async function j(t,e={}){const r=I.X$({},W,e);return t.ioReader||U.h2("need IOReader",N,88),t.iformat||U.h2("need iformat",N,91),2===t.iformat.type&&(r.maxAnalyzeDuration=Math.max(r.maxAnalyzeDuration,2e3)),t.iformat.init(t),t.options=r,t.iformat.readHeader(t)}async function H(t){const e={},r={},s={},n={},o={},u={},d={},f=t.iformat.getAnalyzeStreamsCount();let p=0;const m=[];let g=0;function v(){if(!t.getDecoderResource)return!0;for(let e=0;e<t.streams.length;e++)if(u[t.streams[e].index]&&!d[t.streams[e].index])return!1;return!0}function A(t,e){let i=r[t.index];const u=s[t.index];let h=t.codecpar.videoDelay;if(null!=u&&u.length&&(h=Math.min(Math.max((0,F.A)(u),t.codecpar.videoDelay),16),e&&(t.codecpar.videoDelay=h)),!i&&null!=u&&u.length){i=h?(0,z.A)(h,u):a()(u).call(u);const e={delay:h,dtsQueue:i};i=[],o[t.index]=e;for(let r=0;r<m.length;r++)if(t.index===y.f[15](m[r]+32)){var d;const s=e.dtsQueue.shift();b.M[17](m[r]+16,s),i.push(s);const n=c()(d=t.sampleIndexes).call(d,(t=>t.pts===y.f[17](m[r]+8)));n&&(n.dts=y.f[17](m[r]+16))}}if(i&&i.length>1){let e=BigInt(0);for(let t=1;t<i.length;t++)e+=i[t]-i[t-1];if(1===t.codecpar.codecType&&t.codecpar.sampleRate>0&&!t.codecpar.frameSize){let r=Number(e)/(i.length-1);t.codecpar.frameSize=Math.round(r/t.timeBase.den*t.timeBase.num*t.codecpar.sampleRate)}else if(0===t.codecpar.codecType){const r=(0,E.j2)(t.timeBase.den*(i.length-1)/(Number(e)*t.timeBase.num),M.go);t.codecpar.framerate.num=r.num,t.codecpar.framerate.den=r.den,(0,O.A)(t.codecpar.framerate)}const r=Number(i[i.length-1]-t.startTime)*t.timeBase.num/t.timeBase.den;r&&(t.codecpar.bitrate=BigInt(Math.floor(8*n[t.index]/r)))}}async function C(){for(let e=0;e<t.streams.length;e++){const r=t.streams[e];if(1024&r.disposition){if(r.attachedPic&&t.getDecoderResource){const e=await t.getDecoderResource(r.codecpar.codecType,r.codecpar.codecId);if(!e)continue;e.threadModule&&delete e.threadModule;const s=new D.A({resource:e,onReceiveAVFrame:t=>{r.codecpar.format=y.f[15](t+80),r.codecpar.colorRange=y.f[15](t+208),r.codecpar.colorSpace=y.f[15](t+220),r.codecpar.colorPrimaries=y.f[15](t+212),r.codecpar.colorTrc=y.f[15](t+216),r.codecpar.chromaLocation=y.f[15](t+224),y.f[15](t+92)&&y.f[15](t+96)&&(r.codecpar.sampleAspectRatio=(0,x.A)(t+92,k.P)),r.codecpar.width=y.f[15](t+68),r.codecpar.height=y.f[15](t+72),(0,L.xj)(t)}});await s.open(r.codecpar[w.o9])||(s.decode(r.attachedPic),await s.flush()),s.close()}}else A(r,!0),1===r.codecpar.codecType&&(1===r.codecpar.chLayout.nbChannels?(r.codecpar.chLayout.u.mask=BigInt(4),r.codecpar.chLayout.order=1):2===r.codecpar.chLayout.nbChannels&&(r.codecpar.chLayout.u.mask=BigInt(3),r.codecpar.chLayout.order=1))}}for(;;){if(t.streams.length>=f&&t.options.fastOpen&&(0,S.$)(t)){await C();break}p||(p=(0,T._5)());let i=!1;if(g=await q(t,p),0!==g){await C();break}const a=t.getStreamByIndex(y.f[15](p+32));let o=y.f[17](p+8);if(o===M.Dh&&(o=y.f[17](p+16)),y.f[15](p+28)&&(i=!0,m.push(p),e[a.index]?o<a.startTime&&(a.startTime=o):(a.firstDTS=y.f[17](p+16),a.startTime=o,e[a.index]=!0),y.f[17](p+16)!==M.Dh&&(r[a.index]?r[a.index].push(y.f[17](p+16)):r[a.index]=[y.f[17](p+16)]),s[a.index]?s[a.index].push(o):s[a.index]=[o],n[a.index]?n[a.index]+=y.f[15](p+28):n[a.index]=y.f[15](p+28),!d[a.index]&&t.getDecoderResource&&!t.options.fastOpen&&!a.metadata.encryption)){let e=u[a.index];if(!e){const r=await t.getDecoderResource(a.codecpar.codecType,a.codecpar.codecId);r&&(1===a.codecpar.codecType?e=new R.A({resource:r,onReceiveAVFrame:t=>{a.codecpar.format=y.f[15](t+80),a.codecpar.frameSize=y.f[15](t+76),a.codecpar.sampleRate=y.f[15](t+152),a.codecpar.chLayout=(0,x.A)(t+288,_.r),(0,L.xj)(t),d[a.index]=!0}}):0===a.codecpar.codecType&&(r.threadModule&&delete r.threadModule,e=new D.A({resource:r,onReceiveAVFrame:t=>{a.codecpar.format=y.f[15](t+80),a.codecpar.colorRange=y.f[15](t+208),a.codecpar.colorSpace=y.f[15](t+220),a.codecpar.colorPrimaries=y.f[15](t+212),a.codecpar.colorTrc=y.f[15](t+216),a.codecpar.chromaLocation=y.f[15](t+224),y.f[15](t+92)&&y.f[15](t+96)&&(a.codecpar.sampleAspectRatio=(0,x.A)(t+92,k.P)),a.codecpar.width=y.f[15](t+68),a.codecpar.height=y.f[15](t+72),(0,L.xj)(t),d[a.index]=!0}})),await e.open(a.codecpar[w.o9])?(e.close(),d[a.index]=!0):u[a.index]=e)}e&&e.decode(p)&&(d[a.index]=!0)}if(s[a.index]&&s[a.index].length===V&&A(a,!1),a.startTime!==M.Dh&&o-a.startTime>(0,E.k)(BigInt(Math.floor(t.options.maxAnalyzeDuration)),M.i0,a.timeBase)&&(t.streams.length>=f&&(0,S.$)(t)||o-a.startTime>(0,E.k)(BigInt(15e3),M.i0,a.timeBase)&&(!s[a.index]||s[a.index].length>450))&&v()){await C(),i&&(p=0);break}i&&(p=0)}return p&&(0,T.Qe)(p),m.length&&(t.interval.packetBuffer=h()(m).call(m,t.interval.packetBuffer)),I.__(u,(t=>{t&&t.close()})),I.__(o,((e,r)=>{const s=t.getStreamByIndex(+r);s.privateData2?I.X$(s.privateData2,e):s.privateData2=e})),-1048576===g||-1048572===g?0:0!==g?g:(2===t.iformat.type&&1&l()(t.ioReader)&&!(2&l()(t.ioReader))&&await async function(t){const e=await t.ioReader.fileSize();if(e<=BigInt(0))return;const r=t.interval.packetBuffer;t.interval.packetBuffer=[];let s=t.ioReader.getPos(),n=0;for(;n<4;){const r=e-BigInt(Math.floor(B.v<<n)),i=await t.iformat.seek(t,null,r,2);if(i<0)break;!n&&i>0&&(s=i);const a={},o=(0,T._5)();for(;!(await q(t,o)<0);){let e=y.f[17](o+8);e===M.Dh&&(e=y.f[17](o+16));const r=t.getStreamByIndex(y.f[15](o+32));r.startTime!==M.Dh?e-=r.startTime:e-=r.firstDTS,e>BigInt(0)&&((r.duration===M.Dh||!a[y.f[15](o+32)]||r.duration<e&&Math.abs(Number(e-r.duration))<60*r.timeBase.den/r.timeBase.num)&&(r.duration=e),a[o.streamIndex]=e)}(0,T.Qe)(o);let c=!0;if(P.__(t.streams,(t=>{if(t.duration===M.Dh)return c=!1,!1})),c)break;n++}P.__(t.interval.packetBuffer,(t=>{(0,T.Qe)(t)})),t.interval.packetBuffer=i()(r).call(r,(t=>!(y.f[17](t+56)>=s&&((0,T.Qe)(t),1)))),await t.iformat.seek(t,null,s,2)}(t),0)}function G(t,e){let r=y.f[17](e+8);r===M.Dh&&(r=y.f[17](e+16));const s=P.El(t.sampleIndexes,(t=>t.pts<r?1:-1)),i={dts:y.f[17](e+16),pts:r,pos:y.f[17](e+56),size:y.f[15](e+28),duration:y.f[17](e+48),flags:y.f[15](e+36)};var n;s>-1?(t.sampleIndexesPosMap.set(y.f[17](e+56),s),p()(n=t.sampleIndexes).call(n,s,0,i)):(t.sampleIndexesPosMap.set(y.f[17](e+56),t.sampleIndexes.length),t.sampleIndexes.push(i))}async function Q(t,e){const r=t.getStreamByIndex(y.f[15](e+32));if(y.f[17](e+16)===M.Dh){const t=r.privateData2;t&&(t.delay?(P._(t.dtsQueue,y.f[17](e+8),(t=>t<y.f[17](e+8)?1:-1)),t.dtsQueue.length>t.delay&&b.M[17](e+16,t.dtsQueue.shift())):b.M[17](e+16,y.f[17](e+8)))}let s=0;if(r&&(27===r.codecpar.codecId||173===r.codecpar.codecId||196===r.codecpar.codecId||86018===r.codecpar.codecId))if(!y.f[15](e+28)&&(0,T.fQ)(e,1))for(;;){const r=(0,T._5)();if(s=await t.iformat.readAVPacket(t,r),0!==s){if(t.interval.packetBuffer.length){let r=t.interval.packetBuffer.shift();return(0,T.Up)(e),(0,T.rN)(e,r),(0,T.Qe)(r),Q(t,e)}return s}if(y.f[15](r+32)!==y.f[15](e+32)){let e=t.interval.packetBuffer.length-1,s=!0;for(;e>=0;e--)if(y.f[15](t.interval.packetBuffer[e]+32)===y.f[15](r+32)){var i;y.f[15](t.interval.packetBuffer[e]+28)||y.f[15](r+28)?!y.f[15](t.interval.packetBuffer[e]+28)&&y.f[15](r+28)&&((0,T.Zx)(t.interval.packetBuffer[e],r),(0,T.Qe)(r),s=!1):((0,T.Qe)(t.interval.packetBuffer[e]),p()(i=t.interval.packetBuffer).call(i,e,1,r),s=!1);break}s&&t.interval.packetBuffer.push(r)}else{if(y.f[15](r+28))return(0,T.Zx)(e,r),b.M[17](e+16,y.f[17](r+16)),b.M[17](e+8,y.f[17](r+8)),(0,T.Qe)(r),0;(0,T.Up)(e),(0,T.rN)(e,r),(0,T.Qe)(r)}}else if(32&y.f[15](e+36))return q(t,e);if(1&l()(t.ioReader)&&!r.sampleIndexesPosMap.has(y.f[17](e+56)))if(0===r.codecpar.codecType)1&y.f[15](e+36)&&G(r,e);else if(1===r.codecpar.codecType){const t=P.El(r.sampleIndexes,(t=>t.pts<y.f[17](e+8)?1:-1));(!r.sampleIndexes.length||t<0&&(0,E.Mr)(y.f[17](e+8)-r.sampleIndexes[r.sampleIndexes.length-1].pts,e+72,M.i0)>=B.V||t>0&&t<r.sampleIndexes.length-1&&(0,E.Mr)(y.f[17](e+8)-r.sampleIndexes[t-1].pts,e+72,M.i0)>=B.V||0===t&&(0,E.Mr)(r.sampleIndexes[0].pts-y.f[17](e+8),e+72,M.i0)>=B.V)&&G(r,e)}return 0}async function q(t,e){let r=0;if((0,T.Up)(e),t.interval.packetBuffer.length){const r=t.interval.packetBuffer.shift();return(0,T.rN)(e,r),(0,T.Qe)(r),Q(t,e)}return r=await t.iformat.readAVPacket(t,e),0!==r?((0,T.Up)(e),r):Q(t,e)}async function Y(t,e,r,s){var i;let n=e>-1?c()(i=t.streams).call(i,(t=>t.index===e)):null;if(n||(n=t.getStreamByMediaType(0),n||(n=t.getStreamByMediaType(1)),n||(n=t.getStreamByMediaType(3))),!n)return U.z3(`not found any stream to seek, streamIndex: ${n.index}`,N,774),BigInt(C.LR);U.Yz(`seek in ${0===n.codecpar.codecType?"video":"audio"} stream, streamIndex: ${n.index}, timestamp: ${r}, flags: ${s}`,N,778),r=(0,E.k)(r,M.i0,n.timeBase);const o=await t.iformat.seek(t,n,r,s);if(o>=BigInt(0)){var u,d;P.__(t.interval.packetBuffer,(e=>{if(2&l()(t.ioReader)){const s=(0,T.rU)(e,1),i=t.streams[y.f[15](e+32)];var r;!i.sideData[1]&&s&&(i.sideData[1]=a()(r=(0,$.s3)(y.f[20](s),y.f[25](s+4))).call(r))}(0,T.Qe)(e)})),t.interval.packetBuffer.length=0;const e={};g()(u=t.streams).call(u,(t=>{const r=t.privateData2;null!=r&&r.dtsQueue&&(r.dtsQueue.length=0,r.delay&&(e[t.index]=r.delay,r.delay=V))}));const r=[];for(;A()(f=t.streams).call(f,(t=>{const e=t.privateData2;return e&&e.dtsQueue&&e.dtsQueue.length<e.delay}));){var f;const e=(0,T._5)();if(await q(t,e)){(0,T.Qe)(e);break}r.push(e)}return g()(d=t.streams).call(d,(t=>{const s=t.privateData2;if(null!=s&&s.delay){s.delay=e[t.index],s.dtsQueue=(0,z.A)(s.delay,s.dtsQueue);for(let e=0;e<r.length;e++)if(t.index===y.f[15](r[e]+32)){var i;b.M[17](r[e]+16,s.dtsQueue.shift());const n=c()(i=t.sampleIndexes).call(i,(t=>t.pts===y.f[17](r[e]+8)));n&&(n.dts=y.f[17](r[e]+16))}}})),t.interval.packetBuffer=h()(r).call(r,t.interval.packetBuffer),BigInt(0)}return o}},548:(t,e,r)=>{"use strict";r.d(e,{Ay:()=>H,L_:()=>F,eG:()=>O,iV:()=>R});var s=r(50697),i=r.n(s),n=r(17201),a=r.n(n),o=r(78010),c=r.n(o),u=r(86226),h=r.n(u),d=r(48079),l=r.n(d),f=r(71426),p=r.n(f),m=r(61499),g=r(63939),v=r(36981),A=r(29170),w=r(9599),y=r(44315),b=r(95335),k=r(62751),x=r(67672),_=r(44328),I=r(77231),P=r(20525),M=r(62100),S=r(95832),E=r(62815),T=r(67659),B=r(21477),C=r(82014),U=r(64093),D=r(24310);function R(t){t<0&&(t=BigInt(0));const e=Number(BigInt.asIntN(32,t%BigInt(1e3))),r=Number(BigInt.asIntN(32,t/BigInt(1e3)%BigInt(60))),s=Number(BigInt.asIntN(32,t/BigInt(1e3)/BigInt(60)%BigInt(60))),i=Number(BigInt.asIntN(32,t/BigInt(1e3)/BigInt(3600)));return P.GP("%02d:%02d:%02d.%03d",i,s,r,e)}function L(t){return t<BigInt(1e4)?(0,M.A)(Number(BigInt.asIntN(32,t)))+" bps/s":Number(BigInt.asIntN(32,t/BigInt(1e3)))+" kbps/s"}function $(t,e,r="unknown"){let s=r;return b.__(t,((t,r)=>{if(e===t)return s=r,!1})),s}function O(t,e){return 1===t?$(k.n1,e):0===t?$(k._R,e):3===t?$(k.Xp,e):"unknown"}function F(t){return $(k.iW,t)}function z(t,e){switch(t){case 86018:return S.uF[e]||"LC";case 86017:return U.He[e]||"Layer3";case 27:return E.tZ[e]||"High";case 173:return T.dT[e]||"Main";case 225:return B.zk[e]||"Main";case 167:return C.wN[e]||"Profile0"}}function N(t){let e="";return t&&(e=" ",1&t&&(e+=`(${$(k.Ki,1)}) `),2&t&&(e+=`(${$(k.Ki,2)}) `),4&t&&(e+=`(${$(k.Ki,4)}) `),8&t&&(e+=`(${$(k.Ki,8)}) `),16&t&&(e+=`(${$(k.Ki,16)}) `),32&t&&(e+=`(${$(k.Ki,32)}) `),64&t&&(e+=`(${$(k.Ki,64)}) `),128&t&&(e+=`(${$(k.Ki,128)}) `),256&t&&(e+=`(${$(k.Ki,256)}) `),512&t&&(e+=`(${$(k.Ki,512)}) `),1024&t&&(e+=`(${$(k.Ki,1024)}) `),2048&t&&(e+=`(${$(k.Ki,2048)}) `),65536&t&&(e+=`(${$(k.Ki,65536)}) `),131072&t&&(e+=`(${$(k.Ki,131072)}) `),262144&t&&(e+=`(${$(k.Ki,262144)}) `),524288&t&&(e+=`(${$(k.Ki,524288)}) `),1048576&t&&(e+=`(${$(k.Ki,1048576)}) `),8192&t&&(e+=`(${$(k.Ki,8192)}) `)),e}function V(t,e){const r=z(g.f[15](t.codecpar+4),g.f[15](t.codecpar+48)),s=$(k._R,g.f[15](t.codecpar+4));if(e.push(`${s}${r?` (${r})`:""}`),g.f[15](t.codecpar+28)!==I.N_){const r=$(k.qO,g.f[15](t.codecpar+28),`unknown(${g.f[15](t.codecpar+28)})`),s=$(k.mX,g.f[15](t.codecpar+84),"tv"),i=$(k._m,g.f[15](t.codecpar+96)),n=$(k.Eh,g.f[15](t.codecpar+88)),a=$(k.d8,g.f[15](t.codecpar+92)),o=(0,D.A)(t.codecpar);i===n&&n===a?e.push(`${r}(${s}, ${i}, ${o?"HDR":"SDR"})`):e.push(`${r}(${s}, ${i}/${n}/${a}, ${o?"HDR":"SDR"})`);const c={num:g.f[15](t.codecpar+56)*g.f[15](t.codecpar+64),den:g.f[15](t.codecpar+60)*g.f[15](t.codecpar+68)};(0,_.iU)(c),e.push(`${g.f[15](t.codecpar+56)}x${g.f[15](t.codecpar+60)} [SAR: ${g.f[15](t.codecpar+64)}:${g.f[15](t.codecpar+68)} DAR ${c.num}:${c.den}]`)}}function W(t,e){const r=z(g.f[15](t.codecpar+4),g.f[15](t.codecpar+48)),s=$(k.n1,g.f[15](t.codecpar+4));e.push(`${s}${r?` (${r})`:""}`),e.push(`${g.f[15](t.codecpar+136)} Hz`);let i=`${g.f[15](t.codecpar+116)} channels`;if(1===g.f[15](t.codecpar+112)){const e=$(k.IY,Number((0,A.A)(t.codecpar+120,v.r,"u").mask),"");e&&(i=e)}e.push(i),e.push($(k.Sz,g.f[15](t.codecpar+28)))}function j(t,e,r){const s=$(k.Mb,g.f[15](t.codecpar)),n=[];if(1===g.f[15](t.codecpar))W(t,n),g.f[17](t.codecpar+32)>BigInt(0)&&t.nbFrames!==BigInt(1)&&n.push(`${L(g.f[17](t.codecpar+32))}`);else if(0===g.f[15](t.codecpar))V(t,n),g.f[17](t.codecpar+32)>BigInt(0)&&t.nbFrames!==BigInt(1)&&n.push(`${L(g.f[17](t.codecpar+32))}`),(0,_.lb)((0,A.A)(t.codecpar+72,w.P))>0&&(n.push(`${(0,_.lb)((0,A.A)(t.codecpar+72,w.P)).toFixed(2)} fps`),n.push(`${(0,_.lb)((0,A.A)(t.codecpar+72,w.P)).toFixed(2)} tbr`)),n.push(`${o=BigInt(Math.floor((0,_.lb)({num:t.timeBase.den,den:t.timeBase.num}))),o<BigInt(1e4)?(0,M.A)(Number(BigInt.asIntN(32,o))):Number(BigInt.asIntN(32,o/BigInt(1e3)))+"k"} tbn`);else if(3===g.f[15](t.codecpar)){const e=$(k.Xp,g.f[15](t.codecpar+4));n.push(e),g.f[17](t.codecpar+32)>BigInt(0)&&n.push(`${L(g.f[17](t.codecpar+32))}`)}else{const e=$(k.Ld,g.f[15](t.codecpar+4));n.push(e),g.f[17](t.codecpar+32)>BigInt(0)&&n.push(`${L(g.f[17](t.codecpar+32))}`)}var o;let u=`${r}Stream #${e}:${t.index}[0x${P.GP("%02x",t.id)}] ${s}: ${n.join(", ")}${N(t.disposition)}\n`;return i()(t.metadata).length&&(u+=`${r}  Metadata:\n`,b.__(t.metadata,((e,s)=>{x.Ik(e)||x.YO(e)||x.sv(e)||ArrayBuffer.isView(e)?"matrix"===s&&0===g.f[15](t.codecpar)&&(u+=`${r}    ${s}: [${e.toString()}]\n`):(x.Yj(e)&&(e=a()(e).call(e,"\n","\n"+c()(" ").call(" ",6+s.length))),u+=`${r}    ${s}: ${e}\n`)}))),u}function H(t,e){let r="";return h()(t).call(t,((t,s)=>{if(t instanceof y.oD){const e=[],r=[];for(let r=0;r<t.streams.length;r++){const s=t.streams[r];e.push({index:s.index,id:s.id,codecpar:s.codecpar[m.o9],nbFrames:s.nbFrames,metadata:s.metadata,duration:s.duration,startTime:s.startTime,disposition:s.disposition,timeBase:s.timeBase,attachedPic:s.attachedPic})}for(let s=0;s<t.streamGroups.length;s++){var n;const i=t.streamGroups[s];r.push({index:i.index,id:i.id,type:i.type,params:i.params,metadata:i.metadata,disposition:i.disposition,streams:l()(n=i.streams).call(n,(t=>p()(e).call(e,(e=>e.id===t.id))))})}t={metadata:t.metadata,format:t.format,chapters:t.chapters,streams:e,streamGroups:r}}r+=function(t,e,r){var s,n,o,u;let d=`${r.tag} #${e}, ${r.isLive?"live":"vod"}, ${$(k.iW,t.format)}, from '${r.from}':\n`;i()(t.metadata).length&&(d+="  Metadata:\n",b.__(t.metadata,((t,e)=>{x.Ik(t)||x.YO(t)||x.sv(t)||ArrayBuffer.isView(t)||(x.Yj(t)&&(t=a()(t).call(t,"\n","\n"+c()(" ").call(" ",6+e.length))),d+=`    ${e}: ${t}\n`)})));let l=I.Dh,f=BigInt(0),p=I.Dh;var m;h()(s=t.streams).call(s,(t=>{const e=t.duration!==I.Dh?(0,_.k)(t.duration,t.timeBase,I.i0):I.Dh,r=t.startTime!==I.Dh?(0,_.k)(t.startTime,t.timeBase,I.i0):I.Dh;e>l&&(l=e),(r!==I.Dh&&r<p||p===I.Dh)&&(p=r),f+=g.f[17](t.codecpar+32)})),d+=`  Duration: ${l!==I.Dh?R(l):"N/A"}, start: ${p!==I.Dh?R(p):"N/A"}, bitrate: ${f?L(f):"N/A"}\n`,null!==(n=t.chapters)&&void 0!==n&&n.length&&(d+="  Chapters:\n",h()(m=t.chapters).call(m,((t,r)=>{d+=function(t,e,r,s){let n="N/A",o="N/A";t.start!==I.Dh&&(n=R((0,_.k)(t.start,t.timeBase,I.i0))),t.end!==I.Dh&&(o=R((0,_.k)(t.end,t.timeBase,I.i0)));let u=`${s}Chapter #${e}:${r} start: ${n}, end: ${o}\n`;return i()(t.metadata).length&&(u+=`${s}  Metadata:\n`,b.__(t.metadata,((t,e)=>{x.Ik(t)||x.YO(t)||x.sv(t)||ArrayBuffer.isView(t)||(x.Yj(t)&&(t=a()(t).call(t,"\n","\n"+c()(" ").call(" ",6+e.length))),u+=`${s}    ${e}: ${t}\n`)}))),u}(t,e,r,"    ")})));const v={};return h()(o=t.streamGroups).call(o,(t=>{d+=function(t,e,r,s){const i=$(k.u6,t.type),n=[];if(3===t.type){const e=t.streams[0];e&&(1===g.f[15](e.codecpar)?W(e,n):0===g.f[15](e.codecpar)&&(V(e,n),n.push(`${t.params.width}x${t.params.height}`)))}let a=`  Stream Group #${e}:${t.index} ${i}: ${n.join(", ")}${N(t.disposition)}\n`;var o;return t.streams.length&&h()(o=t.streams).call(o,(t=>{a+=j(t,e,"    "),s[t.id]=!0})),a}(t,e,0,v)})),h()(u=t.streams).call(u,(t=>{v[t.id]||(d+=j(t,e,"  "))})),d}(t,s,e[s])})),r}},31425:(t,e,r)=>{"use strict";r.d(e,{$:()=>a});var s=r(77231),i=r(72739),n=r(44328);function a(t){let e=!0;return i.__(t.streams,(t=>{switch(t.codecpar.codecType){case 1:t.codecpar.chLayout.nbChannels!==s.N_&&t.codecpar.sampleRate!==s.N_&&t.codecpar.frameSize!==s.N_&&t.codecpar.bitrate!==BigInt(0)||(e=!1);break;case 0:0!==(0,n.lb)(t.codecpar.framerate)&&t.codecpar.width!==s.N_&&t.codecpar.height!==s.N_&&t.codecpar.bitrate!==BigInt(0)||(e=!1),27!==t.codecpar.codecId&&173!==t.codecpar.codecId&&196!==t.codecpar.codecId&&12!==t.codecpar.codecId||t.codecpar.profile!==s.N_&&t.codecpar.level!==s.N_||(e=!1)}})),e}},55680:(t,e,r)=>{"use strict";r.d(e,{A:()=>c});var s=r(129),i=r.n(s),n=r(18979),a=r.n(n),o=r(72739);function c(t){var e;if(t.length<2)return 0;const r=i()(e=a()(t).call(t)).call(e,((t,e)=>t>e?1:-1));let s=0,n=0,c=[];for(let e=0;e<t.length;e++){for(o._(c,t[e],(r=>r<t[e]?1:-1));c.length&&c[0]===r[n];)c.shift(),n++;s=Math.max(s,c.length)}return s}},89478:(t,e,r)=>{"use strict";r.d(e,{A:()=>d});var s=r(129),i=r.n(s),n=r(18979),a=r.n(n),o=r(57855),c=r.n(o),u=r(11393),h=r.n(u);function d(t,e){var r,s;if(e.length<t)return i()(s=a()(e).call(e)).call(s,((t,e)=>t>e?1:-1));const n=[],o=i()(r=a()(e).call(e)).call(r,((t,e)=>t>e?1:-1));if(t){const e=o[o.length-1]-o[o.length-2];for(let r=t;r>0;r--)n.push((n.length?n[n.length-1]:BigInt(0))+(r>=o.length?e:o[r]-o[r-1]));c()(n).call(n)}const u=[];for(let e=0;e<t;e++)u.push(o[0]-n[e]);return h()(u).call(u,o)}},31633:(t,e,r)=>{"use strict";r.d(e,{A:()=>a});var s=r(44328);const i=399;function n(t){return t<360?1001*(t+1):(t-=360)<30?1001*(t+31)*12:(t-=30)<3?1001*[80,120,240][t]*12:1e3*[24,30,60,12,15,48][t-=3]*12}function a(t){let e=0,r=.01;for(let a=0;a<i;a++){const i=Math.abs((0,s.lb)(t)/(0,s.lb)({num:n(a),den:12012})-1);i<r&&(r=i,e=n(a))}if(e){const r={num:e,den:12012};(0,s.iU)(r),t.num=r.num,t.den=r.den}}},92174:(t,e,r)=>{"use strict";r.d(e,{XA:()=>A,bX:()=>y,bx:()=>v,dJ:()=>w,ho:()=>g});var s=r(74707),i=r.n(s),n=r(63939),a=r(50932),o=r(95335),c=r(4624),u=r(72739),h=r(9705),d=r(548),l=r(77231),f=r(43607);const p="src/avformat/mux.ts",m={zeroStart:!1,nonnegative:!1};function g(t,e={}){const r=o.X$({},m,e);t.ioWriter||c.h2("need ioWriter",p,58),t.oformat||c.h2("need oformat",p,61),t.options=r,t.privateData2={firstPts:new(i()),firstDts:new(i()),dtsPtsDelta:new(i())};let s=t.oformat.getCapabilities();if(s)for(let e=0;e<t.streams.length;e++){if(1024&t.streams[e].disposition)continue;const r=t.streams[e].codecpar.codecId,i=t.streams[e].codecpar.codecType;if(16===t.oformat.type){if(r<65536||r>69683)return c.z3(`format ${(0,d.L_)(t.oformat.type)} not support codecId ${(0,d.eG)(t.streams[e].codecpar.codecType,r)}`,p,83),h.r8}else if(2!==i&&4!==i&&!u.zy(s,r))return c.z3(`format ${(0,d.L_)(t.oformat.type)} not support codecId ${(0,d.eG)(t.streams[e].codecpar.codecType,r)}`,p,91),h.r8}return t.oformat.init(t)}function v(t){return t.oformat.writeHeader(t),0}function A(t,e){const r=t.privateData2;return r.firstDts.has(n.f[15](e+32))||r.firstDts.set(n.f[15](e+32),n.f[17](e+16)===l.Dh?BigInt(0):n.f[17](e+16)),r.firstPts.has(n.f[15](e+32))||(r.firstPts.set(n.f[15](e+32),n.f[17](e+8)===l.Dh?BigInt(0):n.f[17](e+8)),r.dtsPtsDelta.set(n.f[15](e+32),f.jk(r.firstDts.get(n.f[15](e+32)),r.firstPts.get(n.f[15](e+32))))),(t.options.zeroStart||t.options.nonnegative&&(r.firstDts.get(n.f[15](e+32))<0||r.firstPts.get(n.f[15](e+32))<0))&&(a.M[17](e+16,n.f[17](e+16)-r.dtsPtsDelta.get(n.f[15](e+32))),a.M[17](e+8,n.f[17](e+8)-r.dtsPtsDelta.get(n.f[15](e+32)))),t.oformat.writeAVPacket(t,e)}function w(t){return t.oformat.writeTrailer(t),0}function y(t){t.oformat.flush(t)}},49847:(t,e,r)=>{"use strict";r.d(e,{A:()=>s});class s{constructor(){}get ext(){throw new Error("need implemented ext getter")}get flags(){return 0}get name(){return"CustomIOLoader."+Math.random()}get minBuffer(){return 4}write(t){throw new Error("need implemented write function")}}},77580:(t,e,r)=>{"use strict";r.d(e,{A:()=>v});var s=r(49859),i=r(64007),n=r.n(i),a=r(36586),o=r.n(a),c=r(61240),u=r.n(c),h=r(13724),d=r(82800),l=r(95335),f=r(4624),p=r(9705),m=r(86932);const g="src/avnetwork/ioLoader/FetchIOLoader.ts";class v extends d.A{constructor(t={}){super(t),(0,s.A)(this,"contentLength",void 0),(0,s.A)(this,"receivedLength",void 0),(0,s.A)(this,"info",void 0),(0,s.A)(this,"range",void 0),(0,s.A)(this,"startBytes",void 0),(0,s.A)(this,"endBytes",void 0),(0,s.A)(this,"eofIndex",void 0),(0,s.A)(this,"abortController",void 0),(0,s.A)(this,"reader",void 0),(0,s.A)(this,"buffers",void 0),(0,s.A)(this,"supportRange",void 0),(0,s.A)(this,"abortSleep_",void 0),(0,s.A)(this,"aborted",void 0),(0,s.A)(this,"bandwidth",void 0),(0,s.A)(this,"delay",void 0)}async getTotalSize(t,e={}){var r,s,i;const a={method:t,headers:{},mode:"cors",cache:"default",referrerPolicy:"no-referrer-when-downgrade"};null!==(r=this.info.httpOptions)&&void 0!==r&&r.headers&&l.__(this.info.httpOptions.headers,((t,e)=>{a.headers[e]=t})),l.__(e,((t,e)=>{a.headers[e]=t})),null!==(s=this.info.httpOptions)&&void 0!==s&&s.credentials&&(a.credentials=this.info.httpOptions.credentials),null!==(i=this.info.httpOptions)&&void 0!==i&&i.referrerPolicy&&(a.referrerPolicy=this.info.httpOptions.referrerPolicy),"function"==typeof AbortController&&(this.abortController=new AbortController,a.signal=this.abortController.signal);try{const t=await fetch(this.info.url,a);if(t.ok&&t.status>=200&&t.status<=299){this.abortController&&(this.abortController.abort(),this.abortController=null);const e=t.headers.get("Accept-Ranges");e&&-1===n()(e).call(e,"bytes")&&(this.supportRange=!1);const r=t.headers.get("Content-Range");if(r){const t=r.split("/")[1];if(t)return o()(t)}const s=t.headers.get("X-Content-Length")||t.headers.get("Content-Length");if(null!=s)return o()(s)}}catch(t){}return 0}async open(t,e={from:0,to:-1}){var r;if(this.info=t,this.range=e,this.range.to||(this.range.to=-1),this.range.from=Math.max(this.range.from,0),this.startBytes=0,this.endBytes=-1,this.eofIndex=-1,this.receivedLength=0,this.buffers=[],this.supportRange=!0,this.aborted=!1,this.bandwidth=0,this.range.to>0&&(this.eofIndex=e.to),this.range&&!this.options.isLive&&(this.startBytes=null!==(r=this.range.from)&&void 0!==r?r:0),this.status=1,!this.options.isLive&&!this.options.disableSegment){let t=await this.getTotalSize("HEAD");t||(t=await this.getTotalSize("Get",{range:"bytes=0-1"})),t<=2&&(t=0),t?(this.contentLength=t,this.range.to<0&&(this.eofIndex=this.contentLength+this.range.to),this.supportRange&&(this.endBytes=Math.min(this.startBytes+this.options.preload-1,this.eofIndex))):this.endBytes=-1}return this.status=2,0}getBandwidthReader(t,e){const r=[];let s,i=!1,n=0;const a=this;return new ReadableStream({async start(o){for(;;){const{value:o,done:c}=await t.read();if(c){i=!0;const t=((0,m.A)()-e)/1e3;a.bandwidth=8*n/t,s&&(s(),s=null);break}r.push(o),n+=o.length,s&&(s(),s=null)}},async pull(t){for(;;){if(r.length)return void t.enqueue(r.shift());if(i&&!r.length)return void t.close();await new(u())((t=>{s=t}))}}}).getReader()}async openReader(){var t,e,r;const s={method:"GET",headers:{},mode:"cors",cache:"default",referrerPolicy:"no-referrer-when-downgrade"};null!==(t=this.info.httpOptions)&&void 0!==t&&t.headers&&l.__(this.info.httpOptions.headers,((t,e)=>{s.headers[e]=t})),this.options.isLive||this.options.disableSegment||(s.headers.range=`bytes=${this.startBytes}-${this.endBytes>0?this.endBytes:""}`),null!==(e=this.info.httpOptions)&&void 0!==e&&e.credentials&&(s.credentials=this.info.httpOptions.credentials),null!==(r=this.info.httpOptions)&&void 0!==r&&r.referrerPolicy&&(s.referrerPolicy=this.info.httpOptions.referrerPolicy),this.abortController&&this.abortController.abort(),"function"==typeof AbortController&&(this.abortController=new AbortController,s.signal=this.abortController.signal);try{const t=(0,m.A)(),e=await fetch(this.info.url,s),r=(0,m.A)();this.delay=r-t,e.ok&&e.status>=200&&e.status<=299?this.reader=this.options.enableBandwidthReader?this.getBandwidthReader(e.body.getReader(),r):e.body.getReader():(this.status=3,f.h2(`FetchStreamLoader: Http code invalid, ${e.status} ${e.statusText}`,g,299))}catch(t){if(this.retryCount<this.options.retryCount&&(!this.options.isLive||!this.receivedLength)){if(this.retryCount++,this.status=1,this.abortSleep_=new h.A(this.options.retryInterval),await this.abortSleep_,this.abortSleep_=null,this.aborted)return;return this.openReader()}f.h2(`FetchStreamLoader: exception ${t.message}`,g,316)}}async readInterval(t,e=0){let r=0;for(;this.buffers.length&&r<t.length;){const e=this.buffers.shift();e.length>t.length-r?(t.set(e.subarray(0,t.length-r),r),this.buffers.unshift(e.subarray(t.length-r)),r=t.length):(t.set(e,r),r+=e.length)}if(r>=t.length)return t.length+e;if(4===this.status)return r>0?r+e:e>0?e:-1048576;if(!this.reader&&(await this.openReader(),this.aborted))return-1048576;const{value:s,done:i}=await this.reader.read();return i?void 0!==this.contentLength&&this.receivedLength+this.range.from<this.endBytes+1?(this.status=3,void f.h2("Fetch stream meet Early-EOF",g,358)):this.options.isLive||this.options.disableSegment||this.receivedLength+this.range.from>=this.eofIndex?(this.status=4,this.startBytes=0,r>0?r+e:e>0?e:-1048576):(await this.reader.cancel(),this.abortController&&(this.abortController.abort(),this.abortController=null),this.reader=null,this.startBytes=this.endBytes+1,this.endBytes=Math.min(this.startBytes+this.options.preload-1,this.eofIndex),this.readInterval(t.subarray(r,void 0,!0),r)):(this.receivedLength+=s.length,s.length>t.length-r?(t.set(s.subarray(0,t.length-r),r),this.buffers.push(s.subarray(t.length-r)),t.length+e):(t.set(s,r),r+=s.length,r+e))}async read(t){return this.readInterval(t)}async seek(t){return this.supportRange?this.eofIndex>0&&Number(t)>this.eofIndex?p.nr:(await this.abort(),this.aborted=!1,this.receivedLength=Number(t)-this.range.from,this.startBytes=Number(t),this.options.disableSegment||(this.endBytes=Math.min(this.startBytes+this.options.preload,this.eofIndex)),this.buffers.length=0,4===this.status&&(this.status=2),0):p.NU}async size(){return this.options.isLive?BigInt(0):BigInt(Math.floor(this.contentLength||0))}abortSleep(){this.aborted=!0,this.abortSleep_&&(this.abortSleep_.stop(),this.abortSleep_=null)}async abort(){this.abortSleep(),this.reader&&(await this.reader.cancel(),this.abortController&&(this.abortController.abort(),this.abortController=null),this.reader=null)}async stop(){this.status=0,await this.abort()}getUrl(){var t;return null===(t=this.info)||void 0===t?void 0:t.url}}},79686:(t,e,r)=>{"use strict";r.d(e,{A:()=>d});var s=r(49859),i=r(18979),n=r.n(i),a=r(61240),o=r.n(a),c=r(82800);const u=r(67672).Pc(Blob.prototype.arrayBuffer),h="function"==typeof FileReaderSync;class d extends c.A{constructor(...t){super(...t),(0,s.A)(this,"info",void 0),(0,s.A)(this,"range",void 0),(0,s.A)(this,"readPos",void 0),(0,s.A)(this,"endPos",void 0),(0,s.A)(this,"reader",void 0),(0,s.A)(this,"readerResolve",void 0)}async open(t,e={from:0,to:-1}){return this.info=t,this.range=e,this.readPos=0,this.endPos=this.info.file.size,e.from>0&&(this.readPos=e.from),e.to>0&&(this.endPos=e.to),this.status=2,0}readBufferByReaderSync(t){var e;return this.reader||(this.reader=new FileReaderSync),this.reader.readAsArrayBuffer(n()(e=this.info.file).call(e,this.readPos,this.readPos+t))}async readBufferByReader(t){return this.reader||(this.reader=new FileReader,this.reader.onloadend=t=>{this.readerResolve&&this.readerResolve(t.target.result)}),new(o())((e=>{var r;this.readerResolve=e,this.reader.readAsArrayBuffer(n()(r=this.info.file).call(r,this.readPos,this.readPos+t))}))}async read(t){if(this.readPos>=this.endPos)return this.status=4,-1048576;const e=Math.min(t.length,this.endPos-this.readPos);if(h)t.set(new Uint8Array(this.readBufferByReaderSync(e)),0);else if(u){var r;t.set(new Uint8Array(await n()(r=this.info.file).call(r,this.readPos,this.readPos+e).arrayBuffer()),0)}else t.set(new Uint8Array(await this.readBufferByReader(e)),0);return this.readPos+=e,this.readPos>=this.endPos&&(this.status=4),e}async seek(t){return this.readPos=Number(t),4===this.status&&(this.status=2),0}async size(){return BigInt(Math.floor(this.info.file.size))}async stop(){this.status=0}}},82800:(t,e,r)=>{"use strict";r.d(e,{A:()=>a});var s=r(49859),i=r(95335);const n={isLive:!1,preload:5242880,retryCount:20,retryInterval:1};class a{constructor(t={}){(0,s.A)(this,"options",void 0),(0,s.A)(this,"status",void 0),(0,s.A)(this,"retryCount",void 0),(0,s.A)(this,"retryTimeout",void 0),this.options=t,this.status=0,this.retryCount=0,this.options=i.X$({},n),i.X$(this.options,t)}write(t){throw new Error("need implemented write function")}}},36773:(t,e,r)=>{"use strict";r.d(e,{A:()=>o});var s=r(49859),i=r(61240),n=r.n(i),a=r(82800);class o extends a.A{constructor(t={}){super(t),(0,s.A)(this,"readQueue",void 0),(0,s.A)(this,"consume",void 0),this.readQueue=[]}async readInterval(t,e=0){let r=0;for(;this.readQueue.length&&r<t.length;){const e=this.readQueue.shift();e.length>t.length-r?(t.set(e.subarray(0,t.length-r),r),this.readQueue.unshift(e.subarray(t.length-r)),r=t.length):(t.set(e,r),r+=e.length)}return r>0||e?r+e:4===this.status||0===this.status?r>0?r+e:e>0?e:-1048576:3===this.status?r>0?r+e:e>0?e:-1048573:(await new(n())((t=>{this.consume=t})),this.consume=null,this.readInterval(t,e))}async read(t){return this.readInterval(t)}async write(t){return this.send(t)}}},14619:(t,e,r)=>{"use strict";r.d(e,{A:()=>u});var s=r(49859),i=r(18979),n=r.n(i),a=r(61240),o=r.n(a),c=r(36773);class u extends c.A{constructor(...t){super(...t),(0,s.A)(this,"info",void 0),(0,s.A)(this,"socket",void 0)}async send(t){return this.socket?(this.socket.send(n()(t).call(t)),0):-1048574}open(t){return this.info=t,this.status=1,new(o())((e=>{var r;this.socket=new WebSocket(t.url,null===(r=t.websocketOptions)||void 0===r?void 0:r.protocols),this.socket.binaryType="arraybuffer",this.socket.onopen=()=>{this.status=2,e(0)},this.socket.onerror=()=>{this.status=3,e(-1048573),this.consume&&this.consume()},this.socket.onclose=()=>{this.status=4,e(-1048576),this.consume&&this.consume()},this.socket.onmessage=t=>{let e=t.data;this.readQueue.push(new Uint8Array(e)),this.consume&&this.consume()}}))}seek(t,e){throw new Error("Method not implemented.")}size(){throw new Error("Method not implemented.")}async stop(){this.socket&&(this.socket.close(),this.socket=null),this.status=4,this.consume&&this.consume()}}},42383:(t,e,r)=>{"use strict";r.d(e,{A:()=>u});var s=r(49859),i=r(18979),n=r.n(i),a=r(61240),o=r.n(a),c=r(36773);class u extends c.A{constructor(...t){super(...t),(0,s.A)(this,"info",void 0),(0,s.A)(this,"transport",void 0),(0,s.A)(this,"datagramReader",void 0),(0,s.A)(this,"reader",void 0),(0,s.A)(this,"datagramWriter",void 0),(0,s.A)(this,"writer",void 0),(0,s.A)(this,"stream",void 0),(0,s.A)(this,"readPacketQueue",void 0),(0,s.A)(this,"consumePacket",void 0)}async send(t){return this.writer?(this.writer.write(n()(t).call(t)),0):-1048574}async handleRead(){let t=!1;for(;;)try{const{value:e,done:r}=await this.reader.read();if(r){t=r,this.status=4,this.consume&&this.consume();break}this.readQueue.push(e)}catch(e){t||(this.status=3,this.consume&&this.consume());break}}async readDatagram(){let t=!1;for(;;)try{const{value:e,done:r}=await this.datagramReader.read();if(r){t=!0,this.status=4,this.consumePacket&&this.consumePacket();break}this.readPacketQueue.push(e)}catch(e){t||(this.status=3,this.consumePacket&&this.consumePacket());break}}async open(t){return this.info=t,this.transport=new WebTransport(t.url,t.webtransportOptions),this.readPacketQueue=[],this.status=1,await this.transport.ready,this.transport.closed.then((()=>{this.transport?this.status=3:this.status=4})),this.status=2,this.stream=await this.transport.createBidirectionalStream(),this.reader=this.stream.readable.getReader(),this.writer=this.stream.writable.getWriter(),this.datagramReader=this.transport.datagrams.readable.getReader(),this.datagramWriter=this.transport.datagrams.writable.getWriter(),this.handleRead(),this.readDatagram(),0}async readPacket(t){for(;;){if(this.readPacketQueue.length){const e=this.readPacketQueue.shift();return t.set(e,0),e.length}if(4===this.status||0===this.status)return-1048576;if(3===this.status)return-1048573;await new(o())((t=>{this.consumePacket=t})),this.consumePacket=null}}async writePacket(t){return this.datagramWriter?(this.datagramWriter.write(n()(t).call(t)),0):-1048574}seek(t,e){throw new Error("Method not implemented.")}size(){throw new Error("Method not implemented.")}async stop(){this.transport&&(this.transport.close(),this.transport=null),this.status=4,this.consume&&this.consume()}}},18667:(t,e,r)=>{"use strict";r.d(e,{A:()=>E});var s=r(61240),i=r.n(s),n=r(86226),a=r.n(n),o=r(63939),c=r(50932),u=r(12264),h=r(29170),d=r(44527),l=r(9705),f=r(84149),p=r(75742),m=r(4624),g=r(16041),v=(r(77162),r(77104)),A=r(84290),w=r(72739),y=r(86932),b=r(36204),k=r(94561),x=r(72703),_=r(71762),I=r(37837),P=r(71766),M=r(67672);const S="src/avpipeline/AudioDecodePipeline.ts";class E extends d.A{constructor(){super()}createWebcodecDecoder(t){return new v.A({onError:e=>{m.z3(`audio decode error, taskId: ${t.taskId}, error: ${e}`,S,94)},onReceiveAudioData(e){const r=(0,b.t)(e,t.avframePool.alloc());t.frameCaches.push(r),c.M[17](t.stats+56,o.f[17](t.stats+56)+BigInt(1)),c.M[15](t.stats+248,Math.max((0,y.A)()-t.lastDecodeTimestamp,o.f[15](t.stats+248))),e.close()}})}createWasmcodecDecoder(t,e){return new p.A({resource:e,onReceiveAVFrame(e){t.frameCaches.push(e),c.M[17](t.stats+56,o.f[17](t.stats+56)+BigInt(1)),c.M[15](t.stats+248,Math.max((0,y.A)()-t.lastDecodeTimestamp,o.f[15](t.stats+248)))},avframePool:t.avframePool})}async pullAVPacketInternal(t,e){const r=await e.request("pull");if(M.ai(r)||(0,x.A)(r))return r;{const e=t.avpacketPool.alloc();return(0,_.r0)(r,e),e}}async createTask(t){const e=new f.Ay(t.leftPort),r=new f.Ay(t.rightPort),s=[],i=new g.A((0,h.A)(t.avframeList,u.A),t.avframeListMutex),n={...t,resource:await(0,k.A)(t.resource),frameCaches:s,inputEnd:!1,decoder:null,parameters:0,lastDecodeTimestamp:0,avframePool:i,avpacketPool:new A.A((0,h.A)(t.avpacketList,u.A),t.avpacketListMutex)};return n.resource?n.decoder=this.createWasmcodecDecoder(n,n.resource):n.decoder=this.createWebcodecDecoder(n),this.tasks.set(t.taskId,n),r.on(f.S3,(async i=>{switch(i.method){case"pull":if(s.length){const t=s.shift();r.reply(i,t);break}if(!n.inputEnd){for(;;){if(s.length){const t=s.shift();r.reply(i,t);break}n.pending&&await n.pending,n.lastDecodeTimestamp=(0,y.A)();const a=await this.pullAVPacketInternal(n,e);if(-1048576===a){if(await n.decoder.flush(),n.inputEnd=!0,s.length){const t=s.shift();r.reply(i,t);break}m.pq(`audio decoder ended, taskId: ${n.taskId}`,S,201),r.reply(i,-1048576);break}if(!(a>0)){m.z3(`audio decode pull avpacket error, taskId: ${t.taskId}, ret: ${a}`,S,219),r.reply(i,a);break}{const e=n.decoder.decode(a);n.avpacketPool.release(a),e<0&&(c.M[15](n.stats+48,o.f[15](n.stats+48)+1),m.z3(`audio decode error, taskId: ${t.taskId}, ret: ${e}`,S,214))}}break}r.reply(i,-1048576)}})),0}async open(t,e,r={}){const s=this.tasks.get(t);if(s){s.wasmDecoderOptions=r;const t=(0,I.Gy)(168);return(0,x.A)(e)?(0,P.Yi)(t,e):(0,_.T8)(e,t),s.parameters&&(0,P.dn)(s.parameters),s.parameters=t,new(i())((async(e,r)=>{const i=await s.decoder.open(t,s.wasmDecoderOptions);if(i)return m.z3(`open audio decoder failed, error: ${i}`,S,253),void e(l.r8);e(0)}))}m.h2("task not found",S,260)}async beforeReopenDecoder(t){const e=this.tasks.get(t);e?e.pending=new(i())((t=>{e.pendingResolve=t})):m.h2("task not found",S,271)}async reopenDecoder(t,e,r,s){const n=this.tasks.get(t);if(n){s&&(n.wasmDecoderOptions=s);const t=(0,I.Gy)(168);let a;return(0,x.A)(e)?(0,P.Yi)(t,e):(0,_.T8)(e,t),n.parameters&&(0,P.dn)(n.parameters),n.parameters=t,r?(r=await(0,k.A)(r),a=this.createWasmcodecDecoder(n,r)):a=this.createWebcodecDecoder(n),new(i())((async(e,s)=>{const i=await a.open(t);if(i)return m.z3(`reopen audio decoder failed, error: ${i}`,S,308),void e(l.r8);r&&(n.resource=r),n.decoder.close(),n.decoder=a,m.Yz(`reopen audio decoder, taskId: ${n.taskId}`,S,318),e(0),n.pendingResolve&&(n.pendingResolve(),n.pending=null)}))}m.h2("task not found",S,326)}async resetTask(t){const e=this.tasks.get(t);e&&(e.decoder&&await e.decoder.flush(),w.__(e.frameCaches,(t=>{e.avframePool.release(t)})),e.frameCaches.length=0,e.inputEnd=!1,e.lastDecodeTimestamp=(0,y.A)(),m.pq(`reset audio decoder, taskId: ${e.taskId}`,S,342))}async registerTask(t){return this.tasks.has(t.taskId)?l.lh:this.createTask(t)}async unregisterTask(t){const e=this.tasks.get(t);var r;e&&(e.rightPort.close(),e.leftPort.close(),e.decoder.close(),a()(r=e.frameCaches).call(r,(t=>{e.avframePool.release(t)})),e.parameters&&(0,P.dn)(e.parameters),this.tasks.delete(t),m.Yz(`unregisterTask task, taskId: ${t}`,S,366))}}},68175:(t,e,r)=>{"use strict";r.d(e,{A:()=>_});var s=r(61240),i=r.n(s),n=r(86226),a=r.n(n),o=r(63939),c=r(50932),u=r(12264),h=r(29170),d=r(44527),l=r(21910),f=r(72308),p=r(16041),m=r(84149),g=r(84290),v=r(4624),A=r(72739),w=r(9705),y=r(13724),b=r(72703),k=r(94561);const x="src/avpipeline/AudioEncodePipeline.ts";class _ extends d.A{constructor(){super()}createWebcodecEncoder(t){var e;return new f.A({onError:e=>{v.z3(`audio encode error, taskId: ${t.taskId}, error: ${e}`,x,82)},onReceiveAVPacket(e){t.avpacketCaches.push(e),c.M[17](t.stats+64,o.f[17](t.stats+64)+BigInt(1))},avpacketPool:t.avpacketPool,avframePool:t.avframePool,copyTs:null!==(e=t.copyTs)&&void 0!==e&&e})}async createTask(t){const e=new m.Ay(t.leftPort),r=new m.Ay(t.rightPort),s=[],i=new g.A((0,h.A)(t.avpacketList,u.A),t.avpacketListMutex),n={...t,resource:await(0,k.A)(t.resource),avpacketCaches:s,encoder:null,inputEnd:!1,parameters:0,avframePool:new p.A((0,h.A)(t.avframeList,u.A),t.avframeListMutex),avpacketPool:i};var a;return n.resource?n.encoder=new l.A({resource:n.resource,onReceiveAVPacket(t){n.avpacketCaches.push(t),c.M[17](n.stats+64,o.f[17](n.stats+64)+BigInt(1))},avpacketPool:i,copyTs:null!==(a=n.copyTs)&&void 0!==a&&a}):n.encoder=this.createWebcodecEncoder(n),this.tasks.set(t.taskId,n),r.on(m.S3,(async i=>{switch(i.method){case"pull":if(s.length){const t=s.shift();r.reply(i,t);break}if(!n.inputEnd){for(;;){if(s.length){const t=s.shift();r.reply(i,t);break}const a=await e.request("pull");if(!((0,b.A)(a)||a instanceof AudioData)){if(-1048576===a){if(await n.encoder.flush(),n.inputEnd=!0,s.length){const t=s.shift();r.reply(i,t);break}v.pq(`audio encoder ended, taskId: ${n.taskId}`,x,184),r.reply(i,-1048576);break}v.z3(`audio encoder pull avpacket error, taskId: ${t.taskId}, ret: ${a}`,x,190),r.reply(i,a);break}{const e=n.encoder.encode(a);if((0,b.A)(a)?n.avframePool.release(a):a.close(),e<0){c.M[15](n.stats+52,o.f[15](n.stats+52)+1),v.z3(`audio encode error, taskId: ${t.taskId}, ret: ${e}`,x,162),r.reply(i,e);break}for(;n.encoder instanceof f.A&&n.encoder.getQueueLength()>4;)await new y.A(0)}}break}v.pq(`audio encoder ended, taskId: ${n.taskId}`,x,198),r.reply(i,-1048576)}})),0}async open(t,e,r,s={}){const n=this.tasks.get(t);if(n)return n.wasmEncoderOptions=s,new(i())((async(t,s)=>{const i=await n.encoder.open(e,r,n.wasmEncoderOptions);if(i)return v.z3(`open audio encoder failed, error: ${i}`,x,215),void t(w.r8);n.parameters=e,t(0)}));v.h2("task not found",x,223)}async getExtraData(t){const e=this.tasks.get(t);if(e)return e.encoder.getExtraData();v.h2("task not found",x,231)}async resetTask(t){const e=this.tasks.get(t);e&&(e.encoder&&await e.encoder.flush(),A.__(e.avpacketCaches,(t=>{e.avpacketPool.release(t)})),e.avpacketCaches.length=0,e.inputEnd=!1,v.pq(`reset audio encoder, taskId: ${e.taskId}`,x,246))}async registerTask(t){return this.tasks.has(t.taskId)?w.lh:this.createTask(t)}async unregisterTask(t){const e=this.tasks.get(t);var r;e&&(e.rightPort.close(),e.leftPort.close(),e.encoder.close(),a()(r=e.avpacketCaches).call(r,(t=>{e.avpacketPool.release(t)})),this.tasks.delete(t))}}},72480:(t,e,r)=>{"use strict";r.d(e,{A:()=>et});var s=r(52730),i=r.n(s),n=r(74707),a=r.n(n),o=r(48079),c=r.n(o),u=r(71426),h=r.n(u),d=r(86226),l=r.n(d),f=r(15413),p=r.n(f),m=r(18979),g=r.n(m),v=r(385),A=r.n(v),w=r(61499),y=r(12264),b=r(29170),k=r(63939),x=r(50932),_=(r(9599),r(44527)),I=r(9705),P=r(84149),M=r(44315),S=r(24175),E=r(34531),T=r(75),B=r(37837),C=r(79630),U=r(4624),D=r(84290),R=r(39148),L=r(72739),$=r(44328),O=r(77231),F=r(43607),z=r(71517),N=r(14686),V=r(49032),W=r(94561),j=r(39638),H=r(26429),G=r(71762),Q=r(72703),q=r(67672),Y=r(62815),K=r(67659),X=r(59166),J=r(95797);const Z="src/avpipeline/DemuxPipeline.ts",tt=-1;class et extends _.A{constructor(){super()}createTask(t){let e,r;if(t.mainTaskId){const s=this.tasks.get(t.mainTaskId);e=s.leftIPCPort,r=s.controlIPCPort}else e=new P.Ay(t.leftPort),t.controlPort&&(r=new P.Ay(t.controlPort));const s=t.bufferLength||1048576,n=(0,B.sY)(s);if(!n)return I.gR;const o=(0,B.sY)(s);if(!o)return I.gR;const c=new C.A(n,s),u=new S.A(s,!0,c),h=new C.A(o,s),d=new E.A(s,!0,h);t.isLive||(u.flags|=1),i()(t)&&(u.flags|=i()(t)),u.onFlush=async r=>{const s={pointer:r.byteOffset,length:r.length};t.ioloaderOptions&&(s.ioloaderOptions=t.ioloaderOptions);try{const t=await e.request("read",s);return q.ai(t)?t:((0,N.lW)(s.pointer,t.length,t),t.length)}catch(t){return-1048574}},u.onSeek=async r=>{try{const s={pos:r};return t.ioloaderOptions&&(s.ioloaderOptions=t.ioloaderOptions),e.request("seek",s)}catch(t){return-1048574}},u.onSize=async()=>{try{return e.request("size")}catch(t){return BigInt(-1048574)}},d.onFlush=async t=>{const r={pointer:t.byteOffset,length:t.length};try{return await e.request("write",r)}catch(t){return-1048574}};const l=(0,M.Xv)();return l.ioReader=u,l.ioWriter=d,J.A.wasmBaseSupported&&(l.getDecoderResource=async(t,e)=>{if(!r)return;const s=await r.request("getDecoderResource",{codecId:e,mediaType:t});return(0,W.A)(s,0===t)}),this.tasks.set(t.taskId,{...t,leftIPCPort:e,rightIPCPorts:new(a()),controlIPCPort:r,formatContext:l,ioReader:u,iBuffer:n,oBuffer:o,cacheAVPackets:new(a()),cacheRequests:new(a()),streamIndexFlush:new(a()),pendingAVPackets:new(a()),realFormat:-1,demuxEnded:!1,loop:null,gopCounter:0,lastKeyFramePts:BigInt(0),lastAudioDts:BigInt(0),lastVideoDts:BigInt(0),avpacketPool:new D.A((0,b.A)(t.avpacketList,y.A),t.avpacketListMutex)}),0}async openStream(t,e=3e3){const s=this.tasks.get(t);if(s){let t,i,n=await s.leftIPCPort.request("open");if(n<0)return U.z3(`open ioloader failed, ret: ${n}`,Z,305),n;try{6!==s.format?(t=await(0,V.A)(s.ioReader,s.format),s.format=t):t=s.format}catch(t){return I.LR}switch(t){case 0:i=new((await Promise.all([r.e(171),r.e(773)]).then(r.bind(r,28773))).default)(s.formatOptions);break;case 1:i=new((await Promise.all([r.e(771),r.e(85)]).then(r.bind(r,25085))).default)(s.formatOptions);break;case 2:i=new((await Promise.all([r.e(685),r.e(331)]).then(r.bind(r,59331))).default);break;case 3:i=new((await Promise.all([r.e(685),r.e(855)]).then(r.bind(r,83855))).default);break;case 5:i=new((await r.e(634).then(r.bind(r,16634))).default);break;case 4:i=new((await Promise.all([r.e(888),r.e(118)]).then(r.bind(r,29118))).default);break;case 14:i=new((await Promise.all([r.e(652),r.e(839)]).then(r.bind(r,6839))).default);break;case 8:case 9:i=new((await r.e(577).then(r.bind(r,34577))).default);break;case 15:i=new((await r.e(94).then(r.bind(r,47094))).default);break;case 17:i=new((await Promise.all([r.e(547),r.e(453)]).then(r.bind(r,18453))).default);break;case 16:i=new((await Promise.all([r.e(897),r.e(791)]).then(r.bind(r,3791))).default);break;case 18:i=new((await r.e(611).then(r.bind(r,85611))).default);break;case 19:i=new((await r.e(70).then(r.bind(r,78070))).default);break;case 20:i=new((await r.e(378).then(r.bind(r,47344))).default);break;case 21:i=new((await r.e(854).then(r.bind(r,98854))).default);break;case 11:i=new((await r.e(299).then(r.bind(r,5299))).default)(s.formatOptions);break;case 12:i=new((await r.e(487).then(r.bind(r,85487))).default)(s.formatOptions);break;case 13:i=new((await r.e(808).then(r.bind(r,95808))).default)(s.formatOptions);break;case 6:i=new((await r.e(522).then(r.bind(r,50522))).default)(s.formatOptions);break;case 10:i=new((await Promise.all([r.e(897),r.e(635)]).then(r.bind(r,96635))).default)(s.formatOptions);break;default:return U.z3("format not support",Z,508),I.E$}return s.realFormat=t,s.formatContext.iformat=i,T.ho(s.formatContext,{maxAnalyzeDuration:e,fastOpen:s.isLive})}U.h2("task not found",Z,523)}async getFormat(t){const e=this.tasks.get(t);if(e)return e.realFormat;U.h2("task not found",Z,533)}async analyzeStreams(t){const e=this.tasks.get(t);if(e){let t=await T.Ib(e.formatContext);if(t)return t;const s=[],i=[];for(let t=0;t<e.formatContext.streams.length;t++){const r=e.formatContext.streams[t];s.push({index:r.index,id:r.id,codecpar:r.codecpar[w.o9],nbFrames:r.nbFrames,metadata:r.metadata,duration:r.duration,startTime:r.startTime,disposition:r.disposition,timeBase:{den:r.timeBase.den,num:r.timeBase.num},attachedPic:r.attachedPic})}for(let t=0;t<e.formatContext.streamGroups.length;t++){var r;const n=e.formatContext.streamGroups[t];i.push({index:n.index,id:n.id,type:n.type,params:n.params,metadata:n.metadata,disposition:n.disposition,streams:c()(r=n.streams).call(r,(t=>h()(s).call(s,(e=>e.id===t.id))))})}return{metadata:e.formatContext.metadata,format:e.realFormat,chapters:e.formatContext.chapters,streams:s,streamGroups:i}}U.h2("task not found",Z,590)}replyAVPacket(t,e,r,s){if((0,j.A)()&&!H.USE_THREADS&&(0,Q.A)(s)){const n=(0,G.wm)(s),a=[n.data.buffer];var i;return n.sideData.length&&l()(i=n.sideData).call(i,(t=>{a.push(t.data.buffer)})),e.reply(r,n,null,a),void t.avpacketPool.release(s)}e.reply(r,s)}async connectStreamTask(t,e,r){const s=this.tasks.get(t);if(s){const t=new P.Ay(r);s.cacheAVPackets.set(e,[]),t.streamIndex=e,t.on(P.S3,(async e=>{switch(e.method){case"pull":{const r=s.cacheAVPackets.get(t.streamIndex);if(r.length){const i=r.shift();0!==s.stats&&i>0&&(1===s.formatContext.streams[k.f[15](i+32)].codecpar.codecType?x.M[15](s.stats+32,k.f[15](s.stats+32)-1):0===s.formatContext.streams[k.f[15](i+32)].codecpar.codecType&&x.M[15](s.stats+120,k.f[15](s.stats+120)-1)),this.replyAVPacket(s,t,e,i)}else s.demuxEnded?t.reply(e,-1048576):(s.cacheRequests.set(t.streamIndex,e),s.loop&&s.loop.isStarted()&&s.loop.resetInterval());break}}})),s.rightIPCPorts.set(e,t),U.Yz(`connect stream ${e}, taskId: ${s.taskId}`,Z,651)}else U.h2("task not found",Z,654)}async addPendingStream(t,e){const r=this.tasks.get(t);r?r.pendingAVPackets.set(e,[]):U.h2("task not found",Z,664)}async changeConnectStream(t,e,r,s=!0,i=!1){const n=this.tasks.get(t);if(n){if(e===r)return;let t=n.cacheAVPackets.get(r);const a=n.rightIPCPorts.get(r),o=n.cacheRequests.get(r);t||U.R8(`oldStreamIndex ${r} not found`,Z,681),await n.loop.stopBeforeNextTick(),s?n.pendingAVPackets.has(e)||(L.__(t,(t=>{n.avpacketPool.release(t)})),t.length=0):n.streamIndexFlush.set(e,!0),n.pendingAVPackets.has(e)&&(n.pendingAVPackets.set(r,t),t=n.pendingAVPackets.get(e),n.pendingAVPackets.delete(e)),1===n.formatContext.streams[e].codecpar.codecType?x.M[15](n.stats+32,t.length):0===n.formatContext.streams[e].codecpar.codecType&&x.M[15](n.stats+120,t.length),a.streamIndex=e,n.cacheAVPackets.set(e,t),n.rightIPCPorts.set(e,a),n.cacheAVPackets.delete(r),n.rightIPCPorts.delete(r),o&&(n.cacheRequests.set(e,o),n.cacheRequests.delete(r)),s&&!i||n.loop.start(),U.Yz(`changed connect stream, new ${e}, old: ${r}, force: ${s}, taskId: ${n.taskId}`,Z,727)}else U.h2("task not found",Z,730)}async doDemux(t,e){const r=t.avpacketPool.alloc();let s=await T.Cj(t.formatContext,r);if(s){t.avpacketPool.release(r),-1048576!==s&&-1048572!==s&&(t.controlIPCPort.notify("demuxError",{code:s}),U.z3(`demux error, ret: ${s}, taskId: ${t.taskId}`,Z,890));for(let e of p()(i=t.cacheRequests).call(i)){var i;t.cacheAVPackets.get(e).length||(t.rightIPCPorts.get(e).reply(t.cacheRequests.get(e),-1048576),t.cacheRequests.delete(e))}}else{const s=k.f[15](r+32);if(0!==t.stats)if(1===t.formatContext.streams[s].codecpar.codecType&&t.cacheAVPackets.has(s)){if(x.M[17](t.stats+24,k.f[17](t.stats+24)+BigInt(1)),x.M[17](t.stats+16,k.f[17](t.stats+16)+BigInt(0|k.f[15](r+28))),k.f[17](t.stats+24)>1&&k.f[17](r+16)>t.lastAudioDts){const e=t.cacheAVPackets.get(s);e&&e.length?x.M[15](t.stats+244,Math.round(k.f[15](r+76)/k.f[15](r+72)/(Number(BigInt.asIntN(32,k.f[17](r+16)-k.f[17](e[0]+16)))/e.length))):x.M[15](t.stats+244,Math.round(k.f[15](r+76)/k.f[15](r+72)/Number(BigInt.asIntN(32,k.f[17](r+16)-t.lastAudioDts))))}t.lastAudioDts=k.f[17](r+16)}else if(0===t.formatContext.streams[s].codecpar.codecType&&t.cacheAVPackets.has(s)){if(x.M[17](t.stats+112,k.f[17](t.stats+112)+BigInt(1)),x.M[17](t.stats+104,k.f[17](t.stats+104)+BigInt(0|k.f[15](r+28))),1&k.f[15](r+36)?(x.M[17](t.stats+176,k.f[17](t.stats+176)+BigInt(1)),k.f[17](t.stats+176)>1&&k.f[17](r+8)>t.lastKeyFramePts&&(x.M[15](t.stats+96,t.gopCounter),t.gopCounter=1,x.M[15](t.stats+92,Number(BigInt.asIntN(32,(0,$.Mr)(k.f[17](r+8)-t.lastKeyFramePts,r+72,O.i0))))),t.lastKeyFramePts=k.f[17](r+8)):t.gopCounter++,k.f[17](t.stats+112)>1&&k.f[17](r+16)>t.lastVideoDts){const e=t.cacheAVPackets.get(s);e&&e.length?x.M[15](t.stats+232,Math.round(k.f[15](r+76)/k.f[15](r+72)/(Number(BigInt.asIntN(32,k.f[17](r+16)-k.f[17](e[0]+16)))/e.length))):x.M[15](t.stats+232,Math.round(k.f[15](r+76)/k.f[15](r+72)/Number(BigInt.asIntN(32,k.f[17](r+16)-t.lastVideoDts))))}t.lastVideoDts=k.f[17](r+16)}if(t.streamIndexFlush.get(s)){var n;const e=h()(n=t.formatContext.streams).call(n,(t=>t.index===s));if(!(0,z.rU)(r,1)&&e&&e.codecpar.extradataSize){const t=(0,B.sY)(e.codecpar.extradataSize);(0,N.Mr)(t,e.codecpar.extradata,e.codecpar.extradataSize),(0,z.Ow)(r,1,t,e.codecpar.extradataSize)}t.streamIndexFlush.set(s,!1)}if(t.cacheRequests.has(s))this.replyAVPacket(t,t.rightIPCPorts.get(s),t.cacheRequests.get(s),r),t.cacheRequests.delete(s);else if(t.cacheAVPackets.has(s))t.cacheAVPackets.get(s).push(r),0!==t.stats&&(1===t.formatContext.streams[s].codecpar.codecType?x.M[15](t.stats+32,k.f[15](t.stats+32)+1):0===t.formatContext.streams[s].codecpar.codecType&&x.M[15](t.stats+120,k.f[15](t.stats+120)+1)),3===t.formatContext.streams[s].codecpar.codecType&&t.cacheAVPackets.get(s).length>e&&t.avpacketPool.release(t.cacheAVPackets.get(s).shift());else if(t.pendingAVPackets.has(s)){const i=t.pendingAVPackets.get(s);if(i.push(r),0!==t.stats){const r=t.formatContext.streams[s].codecpar.codecType;for(;i.length;){const s=i[0],n=(0,$.Mr)(k.f[17](s+8),s+72,O.i0),a=F.T9(k.f[17](t.stats+328),k.f[17](t.stats+336));if(1===r&&n>=a||0===r&&n>=a||1!==r&&0!==r&&i.length<=e)break;t.avpacketPool.release(i.shift())}}else i.length>e&&t.avpacketPool.release(i.shift())}else t.rightIPCPorts.has(tt)?t.cacheRequests.has(tt)?(this.replyAVPacket(t,t.rightIPCPorts.get(tt),t.cacheRequests.get(tt),r),t.cacheRequests.delete(tt)):t.cacheAVPackets.get(tt).push(r):t.avpacketPool.release(r)}return s}doAttachedPicture(t){var e;l()(e=t.cacheAVPackets).call(e,((e,r)=>{var s;const i=h()(s=t.formatContext.streams).call(s,(t=>t.index===r));if(1024&i.disposition&&i.attachedPic){const r=t.avpacketPool.alloc();(0,z.rN)(r,i.attachedPic),e.push(r),e.push(-1048576),0!==t.stats&&x.M[15](t.stats+120,1)}}))}async startDemux(t,e,r){const s=this.tasks.get(t);if(s){if(r=Math.max(r,2===s.format?20:10),s.loop&&s.loop.destroy(),s.loop=new R.A((async()=>{if(!e){var t;let e=!1,i=!1;if(l()(t=s.cacheAVPackets).call(t,((t,n)=>{var a;const o=h()(a=s.formatContext.streams).call(a,(t=>t.index===n));t.length<r&&(3!==o.codecpar.codecType&&!(1024&o.disposition)||1===s.cacheAVPackets.size)&&(e=!0),t.length>Math.max(2*r,5e3)&&(i=!0)})),!e||i)return void s.loop.emptyTask()}await this.doDemux(s,r)&&(s.demuxEnded=!0,U.pq(`demuxer ended, taskId: ${s.taskId}`,Z,959),s.loop.stop())}),0,0,!0,!1),e&&s.cacheAVPackets.size)for(;;){var i;let t=!1;if(l()(i=s.cacheAVPackets).call(i,((e,s)=>{e.length>=r&&(t=!0)})),t)break;if(await this.doDemux(s,r))return void(s.demuxEnded=!0)}this.doAttachedPicture(s),s.loop.start(),U.Yz(`start demux loop, taskId: ${s.taskId}`,Z,989)}else U.h2("task not found",Z,992)}async seek(t,e,r,s=-1){const n=this.tasks.get(t);if(n){if(n.loop){await n.loop.stopBeforeNextTick();let u=await T.jF(n.formatContext,s,e,r);if(u>=BigInt(0)){var a,o,c;function d(t){L.__(t,(t=>{if(2&i()(n.formatContext.ioReader)){const r=(0,z.rU)(t,1),s=n.formatContext.streams[k.f[15](t+32)];var e;!s.sideData[1]&&r&&(s.sideData[1]=g()(e=(0,N.s3)(k.f[20](r),k.f[25](r+4))).call(e))}n.avpacketPool.release(t)})),t.length=0}l()(a=n.cacheAVPackets).call(a,d),l()(o=n.pendingAVPackets).call(o,d),0!==n.stats&&l()(c=n.cacheAVPackets).call(c,((t,e)=>{var r;const s=h()(r=n.formatContext.streams).call(r,(t=>t.index===e));1===s.codecpar.codecType?x.M[15](n.stats+32,0):0===s.codecpar.codecType&&x.M[15](n.stats+120,0)}));const f=n.avpacketPool.alloc();for(;u=await T.Cj(n.formatContext,f),!(u<0||n.cacheAVPackets.has(k.f[15](f+32))););if(u>=0){n.demuxEnded=!1;const p=k.f[15](f+32);return n.cacheAVPackets.get(p).push(f),0!==n.stats&&(1===n.formatContext.streams[k.f[15](f+32)].codecpar.codecType?x.M[15](n.stats+32,k.f[15](n.stats+32)+1):0===n.formatContext.streams[k.f[15](f+32)].codecpar.codecType&&x.M[15](n.stats+120,k.f[15](n.stats+120)+1)),this.doAttachedPicture(n),n.loop.start(),(0,$.Mr)(F.T9(k.f[17](f+8),BigInt(0)),f+72,O.i0)}return U.R8(`got first packet failed after seek, taskId: ${n.taskId}`,Z,1063),n.avpacketPool.release(f),n.demuxEnded=!0,e}return n.loop.start(),u}{U.pq("seek before demux loop start",Z,1077);let m=await T.jF(n.formatContext,-1,e,r);return m<0?m:e}}}async croppingAVPacketQueue(t,e){const r=this.tasks.get(t);if(r){var s,i;let n=e;const o=new(a());function c(t,e){if(!(1&k.f[15](t+36)))return!1;let r=0!==(0,z.rU)(t,1);return!r&&64&k.f[15](t+36)&&(27===e?r=!!Y.sL((0,z.iI)(t)):173===e?r=!!K.sL((0,z.iI)(t)):196===e&&(r=!!X.sL((0,z.iI)(t)))),r}const u=new(a());l()(s=r.cacheAVPackets).call(s,((t,e)=>{u.set(e,t)})),l()(i=r.pendingAVPackets).call(i,((t,e)=>{u.set(e,t)})),l()(u).call(u,((t,s)=>{const i=r.formatContext.streams[s].codecpar.codecType,a=r.formatContext.streams[s].codecpar.codecId;if(0===i){const r=k.f[17](t[t.length-1]+16);let i=t.length-2;for(i=t.length-2;i>=0;i--)if(1&k.f[15](t[i]+36)&&(0,$.Mr)(r-k.f[17](t[i]+16),t[i]+72,O.i0)>=e){n=F.T9(n,(0,$.Mr)(r-k.f[17](t[i]+16),t[i]+72,O.i0));break}if((27===a||173===a||196===a)&&i>0&&!c(t[i],a))for(let e=i-1;e>0;e--)if(1&k.f[15](t[e]+36)&&c(t[e],a)){n=F.T9(n,(0,$.Mr)(r-k.f[17](t[e]+16),t[e]+72,O.i0)),i=e;break}i>0&&o.set(s,i)}})),l()(u).call(u,((t,e)=>{if(0!==r.formatContext.streams[e].codecpar.codecType){const r=k.f[17](t[t.length-1]+16);let s=t.length-2;for(s=t.length-2;s>=0&&!((0,$.Mr)(r-k.f[17](t[s]+16),t[s]+72,O.i0)>=n);s--);s>=0&&o.set(e,s)}})),o.size===u.size&&l()(o).call(o,((t,e)=>{var s;const i=u.get(e);l()(s=A()(i).call(i,0,t)).call(s,(t=>{r.avpacketPool.release(t)}));const n=r.formatContext.streams[e].codecpar.codecType;0!==r.stats&&(1===n?x.M[15](r.stats+32,i.length):0===n&&x.M[15](r.stats+120,i.length))}))}}async stop(t){const e=this.tasks.get(t);e&&(e.formatContext.ioReader.flags|=8)}async registerTask(t){return this.tasks.has(t.taskId)?I.lh:this.createTask(t)}async unregisterTask(t){const e=this.tasks.get(t);var r,s,n,a;e&&(e.ioReader&&4&i()(e.ioReader)&&e.ioReader.abort(),e.loop&&(await e.loop.stopBeforeNextTick(),e.loop.destroy()),l()(r=e.cacheAVPackets).call(r,(t=>{l()(t).call(t,(t=>{e.avpacketPool.release(t)}))})),l()(s=e.pendingAVPackets).call(s,(t=>{l()(t).call(t,(t=>{e.avpacketPool.release(t)}))})),l()(n=e.cacheRequests).call(n,((t,r)=>{e.rightIPCPorts.get(r).reply(t,-1048576)})),e.cacheRequests.clear(),await e.formatContext.destroy(),e.mainTaskId||(e.leftIPCPort.destroy(),e.controlIPCPort&&e.controlIPCPort.destroy()),l()(a=e.rightIPCPorts).call(a,(t=>{t.destroy()})),e.rightIPCPorts.clear(),e.iBuffer&&((0,B.Eb)(e.iBuffer),e.iBuffer=0),e.oBuffer&&((0,B.Eb)(e.oBuffer),e.oBuffer=0),this.tasks.delete(t),U.Yz(`unregisterTask task, taskId: ${t}`,Z,1271))}}},87243:(t,e,r)=>{"use strict";r.d(e,{A:()=>m});var s=r(63939),i=r(50932),n=r(44527),a=r(77580),o=r(9705),c=r(84149),u=r(14686),h=r(79686),d=r(4624),l=r(14619),f=r(42383);const p="src/avpipeline/IOPipeline.ts";class m extends n.A{constructor(){super()}async createTask(t){let e;switch(t.type){case 0:e=new a.A(t.options);break;case 1:e=new h.A(t.options);break;case 2:e=new l.A(t.options);break;case 3:e=new f.A(t.options);break;case 4:e=new((await r.e(433).then(r.bind(r,15433))).default)(t.options);break;case 5:e=new((await r.e(576).then(r.bind(r,41576))).default)(t.options);break;case 6:e=new((await Promise.all([r.e(171),r.e(543)]).then(r.bind(r,67543))).default)(t.options)}if(!e)return o.UY;const n=new c.Ay(t.rightPort),m={...t,ioLoader:e,ipcPort:n};return n.on(c.S3,(async r=>{switch(r.method){case"open":try{const s=await e.open(t.info,t.range);if(s<0){d.z3(`loader open error, ${s}, taskId: ${t.taskId}`,p,131),n.reply(r,null,s);break}n.reply(r,s)}catch(e){d.z3(`loader open error, ${e}, taskId: ${t.taskId}`,p,138),n.reply(r,null,e)}break;case"read":{const a=r.params.pointer,c=r.params.length,h=r.params.ioloaderOptions,l=(0,u.JW)(a,c);try{const t=await e.read(l,h);i.M[17](m.stats+192,s.f[17](m.stats+192)+BigInt(0|t)),n.reply(r,t)}catch(e){if(!this.tasks.has(t.taskId))return;d.z3(`loader read error, ${e}, taskId: ${t.taskId}`,p,162),n.reply(r,o.LR)}break}case"write":{const a=r.params.pointer,c=r.params.length,h=(0,u.JW)(a,c);try{const t=await e.write(h);i.M[17](m.stats+200,s.f[17](m.stats+200)+BigInt(0|c)),n.reply(r,t)}catch(e){d.z3(`loader write error, ${e}, taskId: ${t.taskId}`,p,184),n.reply(r,o.LR)}break}case"seek":{const s=r.params.pos,i=r.params.ioloaderOptions;try{const a=await e.seek(s,i);if(a<0){d.z3(`loader seek error, ${a}, taskId: ${t.taskId}`,p,200),n.reply(r,null,a);break}n.reply(r,a)}catch(e){d.z3(`loader seek error, ${e}, taskId: ${t.taskId}`,p,207),n.reply(r,null,e)}break}case"size":n.reply(r,await e.size())}})),this.tasks.set(t.taskId,m),0}async open(t){const e=this.tasks.get(t);if(e)return await e.ioLoader.open(e.info,e.range),0}async getDuration(t){const e=this.tasks.get(t);if(e)return 4===e.type||5===e.type?e.ioLoader.getDuration():0}async hasAudio(t){const e=this.tasks.get(t);if(e){if(5===e.type)return e.ioLoader.hasAudio();if(4===e.type)return e.ioLoader.hasAudio()}return!1}async hasVideo(t){const e=this.tasks.get(t);if(e){if(5===e.type)return e.ioLoader.hasVideo();if(4===e.type)return e.ioLoader.hasVideo()}return!1}async hasSubtitle(t){const e=this.tasks.get(t);if(e){if(5===e.type)return e.ioLoader.hasSubtitle();if(4===e.type)return e.ioLoader.hasSubtitle()}return!1}async getVideoList(t){const e=this.tasks.get(t);if(e){if(5===e.type)return e.ioLoader.getVideoList();if(4===e.type)return e.ioLoader.getVideoList()}return{list:[],selectedIndex:0}}async getAudioList(t){const e=this.tasks.get(t);if(e){if(5===e.type)return e.ioLoader.getAudioList();if(4===e.type)return e.ioLoader.getAudioList()}return{list:[],selectedIndex:0}}async getSubtitleList(t){const e=this.tasks.get(t);if(e){if(5===e.type)return e.ioLoader.getSubtitleList();if(4===e.type)return e.ioLoader.getSubtitleList()}return{list:[],selectedIndex:0}}async selectVideo(t,e){const r=this.tasks.get(t);if(r){if(5===r.type)return r.ioLoader.selectVideo(e);if(4===r.type)return r.ioLoader.selectVideo(e)}}async selectAudio(t,e){const r=this.tasks.get(t);if(r){if(5===r.type)return r.ioLoader.selectAudio(e);if(4===r.type)return r.ioLoader.selectAudio(e)}}async selectSubtitle(t,e){const r=this.tasks.get(t);if(r){if(5===r.type)return r.ioLoader.selectSubtitle(e);if(4===r.type)return r.ioLoader.selectSubtitle(e)}}async getCurrentProtection(t,e){const r=this.tasks.get(t);if(r&&5===r.type)return r.ioLoader.getCurrentProtection(e)}async getMinBuffer(t){const e=this.tasks.get(t);if(e){if(5===e.type)return e.ioLoader.getMinBuffer();if(4===e.type)return e.ioLoader.getMinBuffer()}return 0}async setStart(t,e){const r=this.tasks.get(t);return r&&4===r.type?r.ioLoader.setStart(e):0}async registerTask(t){return this.tasks.has(t.taskId)?o.lh:this.createTask(t)}async unregisterTask(t){const e=this.tasks.get(t);e&&(await e.ioLoader.stop().catch((t=>{d.R8(`stop ioloader error: ${t}, we will ignore it`,p,437)})),e.ipcPort.destroy(),this.tasks.delete(t),d.Yz(`unregisterTask task, taskId: ${t}`,p,441))}}},45597:(t,e,r)=>{"use strict";r.d(e,{A:()=>T});var s=r(18979),i=r.n(s),n=r(31721),a=r.n(n),o=r(86226),c=r.n(o),u=r(61499),h=r(12264),d=r(29170),l=r(63939),f=r(50932),p=(r(9599),r(44527)),m=r(9705),g=r(84149),v=r(44315),A=r(92174),w=r(4624),y=r(84290),b=r(39148),k=r(72739),x=r(44328),_=r(77231),I=r(35336),P=r(71766),M=r(95335),S=r(71517);const E="src/avpipeline/MuxPipeline.ts";class T extends p.A{constructor(){super()}createTask(t){const e=new g.Ay(t.rightPort),r=(0,v.fG)(),s=new I.A(5242880);return s.onFlush=(t,r)=>{const s=i()(t).call(t);return e.notify("write",{data:s,pos:r},[s.buffer]),0},s.onSeek=t=>(e.notify("seek",{pos:t}),0),r.ioWriter=s,this.tasks.set(t.taskId,{...t,rightIPCPort:e,formatContext:r,loop:null,ended:!1,streams:[],avpacketPool:new y.A((0,d.A)(t.avpacketList,h.A),t.avpacketListMutex)}),0}async open(t){const e=this.tasks.get(t);if(e){let t;switch(e.format){case 0:t=new((await Promise.all([r.e(171),r.e(3)]).then(r.bind(r,4003))).default)(e.formatOptions);break;case 1:t=new((await Promise.all([r.e(771),r.e(695)]).then(r.bind(r,92695))).default)(e.formatOptions);break;case 2:t=new((await r.e(597).then(r.bind(r,15597))).default)(e.formatOptions);break;case 5:t=new((await r.e(632).then(r.bind(r,5632))).default);break;case 4:t=new((await Promise.all([r.e(888),r.e(952)]).then(r.bind(r,29952))).default);break;case 14:t=new((await Promise.all([r.e(652),r.e(257)]).then(r.bind(r,52257))).default)(e.formatOptions);break;case 16:t=new((await r.e(293).then(r.bind(r,29293))).default)(e.formatOptions);break;case 17:t=new((await Promise.all([r.e(547),r.e(903)]).then(r.bind(r,46903))).default)(e.formatOptions);break;case 15:t=new((await r.e(8).then(r.bind(r,48008))).default)(e.formatOptions);break;case 8:case 9:{const s={isLive:e.isLive,docType:9===e.format?"webm":"matroska"};t=new((await r.e(411).then(r.bind(r,68675))).default)(M.X$(e.formatOptions,s))}break;case 11:case 12:case 13:t=new((await r.e(113).then(r.bind(r,7113))).default);break;default:return w.z3("format not support",E,242),m.E$}e.formatContext.oformat=t;for(let t=0;t<e.streams.length;t++){if(e.streams[t].ended||1!==e.streams[t].stream.codecpar.codecType&&0!==e.streams[t].stream.codecpar.codecType)continue;const r=await e.streams[t].pullIPC.request("pull");if(-1048576===r)e.streams[t].ended=!0;else{if(r<0)return w.z3(`pull stream ${t} avpacket error, ret: ${r}`,E,263),e.streams[t].ended=!0,m.LR;{f.M[15](r+32,e.streams[t].stream.index),e.streams[t].avpacketQueue.push(r);const s=(0,x.Mr)(l.f[17](r+16),r+72,_.i0);1===e.streams[t].stream.codecpar.codecType?f.M[17](e.stats+296,s):0===e.streams[t].stream.codecpar.codecType&&f.M[17](e.stats+312,s)}}}return 0}w.h2("task not found",E,282)}async addStream(t,e,r){const s=this.tasks.get(t);if(s){const t=s.formatContext.createStream();t.id=e.id,(0,P.Yi)(t.codecpar[u.o9],e.codecpar),t.timeBase.num=e.timeBase.num,t.timeBase.den=e.timeBase.den,t.disposition=e.disposition,t.metadata=e.metadata,e.attachedPic&&(t.attachedPic=(0,S._5)(),(0,S.rN)(t.attachedPic,e.attachedPic)),s.streams.push({stream:t,pullIPC:new g.Ay(r),avpacketQueue:[],ended:4===l.f[15](e.codecpar)||2===l.f[15](e.codecpar)||!!(1024&e.disposition),pulling:null})}else w.h2("task not found",E,312)}async addFormatContextMetadata(t,e){const r=this.tasks.get(t);r?M.X$(r.formatContext.metadata,e):w.h2("task not found",E,322)}async addFormatContextChapters(t,e){const r=this.tasks.get(t);r?r.formatContext.chapters.push(...e):w.h2("task not found",E,332)}async updateAVCodecParameters(t,e,r){const s=this.tasks.get(t);if(s){const t=s.formatContext.getStreamById(e);t&&(0,P.Yi)(t.codecpar[u.o9],r)}else w.h2("task not found",E,345)}async start(t){const e=this.tasks.get(t);if(e){var r,s;if(e.loop)return w.z3("task has started",E,354),m.lh;if(A.ho(e.formatContext,{nonnegative:1!==e.format&&8!==e.format||null!==(r=e.nonnegative)&&void 0!==r&&r,zeroStart:null!==(s=e.zeroStart)&&void 0!==s&&s})<0)return w.z3("mux task open error",E,366),m.E$;if(A.bx(e.formatContext),!e.streams.length)return w.z3("task streams not found",E,373),m.lh;function i(t,r){-1048576===r?e.streams[t].ended=!0:r<0?(w.z3(`pull stream ${t} avpacket error, ret: ${r}`,E,382),e.streams[t].ended=!0,e.loop.stop(),e.ended=!0,e.rightIPCPort.notify("error")):(f.M[15](r+32,e.streams[t].stream.index),e.streams[t].avpacketQueue.push(r))}function n(t){e.streams[t].pulling||(e.streams[t].pulling=e.streams[t].pullIPC.request("pull").then((r=>{i(t,r),e.streams[t].pulling=null})))}return e.loop=new b.A((async()=>{var t;for(let t=0;t<e.streams.length;t++)if(!e.streams[t].ended&&e.streams[t].avpacketQueue.length<30){const r=e.streams[t].stream.codecpar.codecType;1!==r&&0!==r||e.streams[t].avpacketQueue.length?n(t):e.streams[t].pulling?await e.streams[t].pulling:i(t,await e.streams[t].pullIPC.request("pull"))}let r=0,s=_.Dh,o=0,c=-1;for(let t=0;t<e.streams.length;t++)if(e.streams[t].avpacketQueue.length){const i=(0,x.Mr)(l.f[17](e.streams[t].avpacketQueue[0]+16),e.streams[t].avpacketQueue[0]+72,_.i0);(s===_.Dh||i<s)&&(r=e.streams[t].avpacketQueue[0],s=i,o=t,c=e.streams[t].stream.codecpar.codecType)}if(r){const t=e.formatContext.ioWriter.getPos();A.XA(e.formatContext,r),f.M[17](e.stats+208,l.f[17](e.stats+208)+(e.formatContext.ioWriter.getPos()-t)),e.avpacketPool.release(r),e.streams[o].avpacketQueue.shift(),1===c?f.M[17](e.stats+304,s):0===c&&f.M[17](e.stats+320,s)}else a()(t=e.streams).call(t,(t=>!t.ended))||(A.dJ(e.formatContext),A.bX(e.formatContext),e.rightIPCPort.notify("end"),e.loop.stop(),e.ended=!0)}),0,0,!1,!1),e.loop.start(),0}return w.z3("task not found",E,467),m.lh}async pause(t){const e=this.tasks.get(t);e?e.loop&&await e.loop.stopBeforeNextTick():w.h2("task not found",E,480)}async unpause(t){const e=this.tasks.get(t);e?!e.loop||e.loop.isStarted()||e.ended||e.loop.start():w.h2("task not found",E,492)}async registerTask(t){return this.tasks.has(t.taskId)?m.lh:this.createTask(t)}async unregisterTask(t){const e=this.tasks.get(t);e&&(e.loop&&(await e.loop.stopBeforeNextTick(),e.loop.destroy()),k.__(e.streams,(t=>{var r;t.avpacketQueue.length&&(c()(r=t.avpacketQueue).call(r,(t=>{e.avpacketPool.release(t)})),t.avpacketQueue.length=0),t.pullIPC.destroy()})),await e.formatContext.destroy(),this.tasks.delete(t))}}},44527:(t,e,r)=>{"use strict";r.d(e,{A:()=>u});var s=r(49859),i=r(74707),n=r.n(i),a=r(15413),o=r.n(a),c=r(4624);class u{constructor(){(0,s.A)(this,"tasks",void 0),this.tasks=new(n())}async clear(){if(this.tasks.size)for(const e of o()(t=this.tasks).call(t)){var t;await this.unregisterTask(e)}}async setLogLevel(t){c.V$(t)}async getTaskCount(){return this.tasks.size}}},31138:(t,e,r)=>{"use strict";r.d(e,{A:()=>N});var s=r(61240),i=r.n(s),n=r(86226),a=r.n(n),o=r(63939),c=r(50932),u=r(12264),h=r(29170),d=r(9599),l=r(44527),f=r(9705),p=r(84149),m=r(40417),g=r(71039),v=r(4624),A=r(16041),w=r(67672),y=r(72739),b=r(13724),k=(r(77162),r(84290)),x=r(39638),_=r(44328),I=r(86932),P=r(77231),M=r(95797),S=r(72703),E=r(94561),T=r(71762),B=r(37837),C=r(71766),U=r(71517),D=r(14686),R=r(62815),L=r(67659),$=r(59166),O=r(39381),F=r(9781);const z="src/avpipeline/VideoDecodePipeline.ts";class N extends l.A{constructor(){super()}createWebCodecDecoder(t,e=!0){return new g.A({onError:e=>{t.hardwareRetryCount>3||!t.firstDecoded?t.targetDecoder===t.hardwareDecoder?(t.targetDecoder=t.softwareDecoder,t.hardwareDecoder.close(),t.hardwareDecoder=null,t.decoderFallbackReady=this.openSoftwareDecoder(t),v.R8(`video decode error by hardware decoder(${t.hardwareRetryCount}), taskId: ${t.taskId}, error: ${e}, try to fallback to software decoder`,z,140)):t.targetDecoder===t.softwareDecoder&&(t.softwareDecoder.close(),t.softwareDecoder=this.createWasmcodecDecoder(t,t.resource),t.softwareDecoderOpened=!1,t.decoderFallbackReady=this.openSoftwareDecoder(t),v.R8(`video decode error by software(webcodecs) decoder(${t.hardwareRetryCount}), taskId: ${t.taskId}, error: ${e}, try to fallback to software(wasm) decoder`,z,147)):(t.hardwareRetryCount++,t.targetDecoder===t.hardwareDecoder?(v.pq(`retry open hardware decoder(${t.hardwareRetryCount}), taskId: ${t.taskId}`,z,153),t.decoderFallbackReady=t.hardwareDecoder.open(t.parameters)):t.targetDecoder===t.softwareDecoder&&(v.pq(`retry open software(webcodecs) decoder(${t.hardwareRetryCount}), taskId: ${t.taskId}`,z,157),t.decoderFallbackReady=t.softwareDecoder.open(t.parameters))),t.needKeyFrame=!0,t.leftIPCPort.request("requestKeyframe")},onReceiveVideoFrame(e,r){r&&(e.alpha=r),t.firstDecoded=!0,t.frameCaches.push(e),c.M[17](t.stats+144,o.f[17](t.stats+144)+BigInt(1)),t.lastDecodeTimestamp!==P.N_&&(c.M[15](t.stats+256,Math.max((0,I.A)()-t.lastDecodeTimestamp,o.f[15](t.stats+256))),t.lastDecodeTimestamp=P.N_)},enableHardwareAcceleration:e,optimizeForLatency:t.preferLatency,alpha:t.keepAlpha?"keep":"discard"})}createWasmcodecDecoder(t,e){return new m.A({resource:e,onReceiveAVFrame(e){t.firstDecoded=!0,t.frameCaches.push(e),c.M[17](t.stats+144,o.f[17](t.stats+144)+BigInt(1)),t.lastDecodeTimestamp!==P.N_&&(c.M[15](t.stats+256,Math.max((0,I.A)()-t.lastDecodeTimestamp,o.f[15](t.stats+256))),t.lastDecodeTimestamp=P.N_)},avframePool:t.avframePool})}async pullAVPacketInternal(t,e){const r=await e.request("pull");if(w.ai(r)||(0,S.A)(r))return r;{const e=t.avpacketPool.alloc();return(0,T.r0)(r,e),e}}async createTask(t){const e=new p.Ay(t.leftPort),r=new p.Ay(t.rightPort),s=[],n=new A.A((0,h.A)(t.avframeList,u.A),t.avframeListMutex),a={...t,resource:await(0,E.A)(t.resource,!0),leftIPCPort:e,rightIPCPort:r,softwareDecoder:null,hardwareDecoder:null,frameCaches:s,inputEnd:!1,targetDecoder:null,needKeyFrame:!0,parameters:0,hardwareRetryCount:0,lastDecodeTimestamp:0,firstDecoded:!1,decoderFallbackReady:null,softwareDecoderOpened:!1,discard:0,playRate:1,avframePool:n,avpacketPool:new k.A((0,h.A)(t.avpacketList,u.A),t.avpacketListMutex)};if(a.softwareDecoder=a.resource?this.createWasmcodecDecoder(a,a.resource):M.A.videoDecoder?this.createWebCodecDecoder(a,!1):null,!a.softwareDecoder)return v.z3("software decoder not support",z,256),f.lh;function d(t,e){w.ai(e)||(0,S.A)(e)?r.reply(t,e):(0,F.z)(e)?r.reply(t,{ref:e,alpha:e.alpha},null,[e,e.alpha]):r.reply(t,e,null,[e])}return M.A.videoDecoder&&t.enableHardware&&(a.hardwareDecoder=this.createWebCodecDecoder(a)),a.targetDecoder=a.hardwareDecoder||a.softwareDecoder,this.tasks.set(t.taskId,a),r.on(p.S3,(async n=>{switch(n.method){case"pull":if(s.length){d(n,s.shift());break}if(!a.inputEnd){for(;;){if(s.length){d(n,s.shift());break}if(a.decoderFallbackReady){let t=await a.decoderFallbackReady;if(t&&(a.targetDecoder===a.hardwareDecoder&&(a.targetDecoder=a.softwareDecoder,a.hardwareDecoder.close(),a.hardwareDecoder=null,v.R8(`video decode error by hardware decoder(${a.hardwareRetryCount}), taskId: ${a.taskId}, error: ${t}, try to fallback to software decoder`,z,301),t=await this.openSoftwareDecoder(a)),t)){v.pq(`video decoder open error, taskId: ${a.taskId}`,z,305),r.reply(n,f.r8);break}a.decoderFallbackReady=null}a.lastDecodeTimestamp===P.N_&&(a.lastDecodeTimestamp=(0,I.A)());const u=await this.pullAVPacketInternal(a,e);if(-1048576===u){if(a.targetDecoder===a.hardwareDecoder?await i().race([new b.A(2),a.targetDecoder.flush()])&&v.R8(`video hardware decoder flush failed, ignore it, taskId: ${a.taskId}`,z,325):await a.targetDecoder.flush(),a.inputEnd=!0,a.targetDecoder===a.hardwareDecoder&&await new b.A(0),s.length){d(n,s.shift());break}v.pq(`video decoder ended, taskId: ${a.taskId}`,z,341),r.reply(n,-1048576);break}if(!(u>0)){v.z3(`video decode pull avpacket error, taskId: ${t.taskId}, ret: ${u}`,z,486),r.reply(n,u);break}{if(a.needKeyFrame){if(!(1&o.f[15](u+36)&&27!==o.f[15](a.parameters+4)||27===o.f[15](a.parameters+4)&&R.KD(u,o.f[20](a.parameters+12)?1+(3&O.r8(o.f[20](a.parameters+12)+4)):4)||173===o.f[15](a.parameters+4)&&L.KD(u,o.f[20](a.parameters+12)?1+(3&O.r8(o.f[20](a.parameters+12)+21)):4)||196===o.f[15](a.parameters+4)&&$.KD(u,o.f[20](a.parameters+12)?1+(O.r8(o.f[20](a.parameters+12))>>>1&3):4))){a.avpacketPool.release(u);continue}a.needKeyFrame=!1,c.M[15](u+36,1|o.f[15](u+36))}let e=a.targetDecoder.decode(u);if(1&o.f[15](u+36)){const t=(0,U.rU)(u,1);0!==t&&(o.f[20](a.parameters+12)&&(0,B.Eb)(o.f[20](a.parameters+12)),c.M[15](a.parameters+16,0|o.f[25](t+4)),c.M[20](a.parameters+12,(0,B.sY)(o.f[25](t+4))),(0,D.Mr)(o.f[20](a.parameters+12),o.f[20](t),o.f[25](t+4)))}if(e<0){if(c.M[15](a.stats+136,o.f[15](a.stats+136)+1),a.targetDecoder instanceof g.A&&a.softwareDecoder){if(v.R8(`video decode error from hardware, taskId: ${a.taskId}, error: ${e}, try to fallback to software decoder`,z,407),a.targetDecoder===a.hardwareDecoder)a.hardwareDecoder.close(),a.hardwareDecoder=null;else{if(!a.resource){v.z3(`cannot fallback to wasm video decoder because of resource not found , taskId: ${t.taskId}`,z,419),r.reply(n,f.r8);break}a.softwareDecoder.close(),a.softwareDecoder=this.createWasmcodecDecoder(a,a.resource),a.softwareDecoderOpened=!1}try{await this.openSoftwareDecoder(a),a.targetDecoder=a.softwareDecoder}catch(e){v.z3(`video software decoder open error, taskId: ${t.taskId}`,z,429),r.reply(n,f.r8);break}if(!(1&o.f[15](u+36))){a.avpacketPool.release(u),a.needKeyFrame=!0,a.leftIPCPort.request("requestKeyframe");continue}if(e=a.targetDecoder.decode(u),e>=0){a.avpacketPool.release(u);continue}if(a.targetDecoder instanceof g.A&&a.resource){v.R8(`video decode error by webcodecs soft decoder, taskId: ${a.taskId}, error: ${e}, try to fallback to wasm software decoder`,z,443),a.softwareDecoder.close(),a.softwareDecoder=this.createWasmcodecDecoder(a,a.resource),a.softwareDecoderOpened=!1;try{await this.openSoftwareDecoder(a),a.targetDecoder=a.softwareDecoder}catch(e){v.z3(`video wasm software decoder open error, taskId: ${t.taskId}`,z,453),r.reply(n,f.r8);break}if(e=a.targetDecoder.decode(u),e>=0){a.avpacketPool.release(u);continue}}}a.avpacketPool.release(u),v.z3(`video decode error, taskId: ${t.taskId}, ret: ${e}`,z,472),r.reply(n,e);break}for(a.avpacketPool.release(u);a.targetDecoder instanceof g.A&&a.targetDecoder.getQueueLength()>20;)await new b.A(0)}}break}v.pq(`video decoder ended, taskId: ${a.taskId}`,z,493),r.reply(n,-1048576)}})),0}async openSoftwareDecoder(t){if(t.softwareDecoder&&!t.softwareDecoderOpened){const e=t.parameters;let r=1;if((0,x.A)()){let t=o.f[15](e+56)*o.f[15](e+60),s=(0,_.lb)((0,h.A)(e+72,d.P));t>=2073600&&t<=2211840?(173!==o.f[15](e+4)&&196!==o.f[15](e+4)&&225!==o.f[15](e+4)||(r=2),s>30?(r=2,173!==o.f[15](e+4)&&196!==o.f[15](e+4)&&225!==o.f[15](e+4)||(r=4)):s>60&&(r=4,173!==o.f[15](e+4)&&196!==o.f[15](e+4)&&225!==o.f[15](e+4)||(r=6))):t>2211840&&t<=8294400?(r=4,173!==o.f[15](e+4)&&196!==o.f[15](e+4)&&225!==o.f[15](e+4)||(r=6)):t>8294400&&(r=6,173!==o.f[15](e+4)&&196!==o.f[15](e+4)&&225!==o.f[15](e+4)||(r=8)),r=Math.min(r,navigator.hardwareConcurrency)}v.Yz(`open software(${t.softwareDecoder instanceof g.A?"webcodecs":"wasm"}) decoder`,z,558);let s=await t.softwareDecoder.open(e,r,t.wasmDecoderOptions);if(s){if(!(t.softwareDecoder instanceof g.A&&t.resource))return s;if(v.R8(`webcodecs software decoder open failed, ${s}, try to fallback to wasm software decoder`,z,564),t.softwareDecoder.close(),t.softwareDecoder=this.createWasmcodecDecoder(t,t.resource),s=await t.softwareDecoder.open(e,r),s)return s;t.targetDecoder=t.softwareDecoder}t.softwareDecoderOpened=!0}return 0}async reopenDecoder(t,e,r,s){const n=this.tasks.get(t);if(n){const t=(0,B.Gy)(168);let a;(0,S.A)(e)?(0,C.Yi)(t,e):(0,T.T8)(e,t),n.parameters&&(0,C.dn)(n.parameters),n.parameters=t,s&&(n.wasmDecoderOptions=s),r&&(r=await(0,E.A)(r,!0)),a=n.preferWebCodecs&&M.A.videoDecoder&&g.A.isSupported(t,!1)?this.createWebCodecDecoder(n,!1):r?this.createWasmcodecDecoder(n,r):M.A.videoDecoder?this.createWebCodecDecoder(n,!1):null;let o=M.A.videoDecoder&&n.enableHardware?this.createWebCodecDecoder(n,!0):null;return new(i())((async(e,s)=>{if(n.softwareDecoder&&n.softwareDecoder.close(),n.hardwareDecoder&&n.hardwareDecoder.close(),n.softwareDecoder=a,n.hardwareDecoder=o,n.targetDecoder=n.hardwareDecoder||n.softwareDecoder,n.hardwareRetryCount=0,n.hardwareDecoder){const e=await n.hardwareDecoder.open(t);e?(v.z3(`cannot reopen hardware decoder, ${e}, taskId: ${n.taskId}`,z,640),n.hardwareDecoder.close(),n.hardwareDecoder=null,n.targetDecoder=n.softwareDecoder):v.Yz(`reopen video hardware decoder, taskId: ${n.taskId}`,z,646)}if(r&&(n.resource=r),n.targetDecoder===n.softwareDecoder){const t=await this.openSoftwareDecoder(n);if(t){if(v.z3(`reopen video software decoder failed, error: ${t}`,z,657),!n.hardwareDecoder)return void e(f.r8)}else v.Yz(`reopen video soft decoder, taskId: ${n.taskId}`,z,664)}e(0)}))}v.h2("task not found",z,670)}async open(t,e,r={}){const s=this.tasks.get(t);if(s){s.wasmDecoderOptions=r;const t=(0,B.Gy)(168);if((0,S.A)(e)?(0,C.Yi)(t,e):(0,T.T8)(e,t),s.parameters&&(0,C.dn)(s.parameters),s.parameters=t,s.preferWebCodecs&&M.A.videoDecoder&&g.A.isSupported(t,!1)&&s.softwareDecoder instanceof m.A){s.softwareDecoder.close();const t=this.createWebCodecDecoder(s,!1);s.softwareDecoder===s.targetDecoder&&(s.targetDecoder=t),s.softwareDecoder=t}return new(i())((async(e,r)=>{if(s.hardwareDecoder){v.Yz("open hardware decoder",z,705);const e=await s.hardwareDecoder.open(t);e&&(v.R8(`cannot open hardware decoder, ${e}, try to open software decoder`,z,708),s.hardwareDecoder.close(),s.hardwareDecoder=null,s.targetDecoder=s.softwareDecoder)}if(s.targetDecoder===s.softwareDecoder){const t=await this.openSoftwareDecoder(s);if(t&&(v.z3(`open video software decoder failed, error: ${t}`,z,718),!s.hardwareDecoder))return void e(f.r8)}e(0)}))}v.h2("task not found",z,728)}async setPlayRate(t,e){const r=this.tasks.get(t);if(r&&r.softwareDecoder){let t=0,s=(0,_.lb)((0,h.A)(r.parameters+72,d.P));t=s>=120?e<=1?0:e<1.5||e<3?8:32:s>=60?e<1.5?0:e<3?8:e<8?24:32:e>=8?32:e>=4?24:0,r.softwareDecoder.setSkipFrameDiscard(t),r.playRate<e?r.discard=t:r.discard=Math.max(r.discard,t),r.playRate=e}}async setNextDiscard(t){const e=this.tasks.get(t);e&&e.softwareDecoder&&e.discard<32&&(e.discard+=8,e.softwareDecoder.setSkipFrameDiscard(e.discard),v.pq(`set next discard, taskId: ${e.taskId}, discard: ${e.discard}`,z,795))}async setPrevDiscard(t){const e=this.tasks.get(t);e&&e.softwareDecoder&&e.discard>0&&(e.discard-=8,e.softwareDecoder.setSkipFrameDiscard(e.discard),v.pq(`set prev discard, taskId: ${e.taskId}, discard: ${e.discard}`,z,807))}async resetTask(t){const e=this.tasks.get(t);e&&(e.targetDecoder===e.softwareDecoder?await e.targetDecoder.flush():e.targetDecoder===e.hardwareDecoder&&(e.hardwareDecoder.close(),e.hardwareDecoder=this.createWebCodecDecoder(e),await e.hardwareDecoder.open(e.parameters)&&v.h2("reopen hardware decoder failed",z,824),e.targetDecoder=e.hardwareDecoder),y.__(e.frameCaches,(t=>{(0,S.A)(t)?e.avframePool.release(t):(t.close(),(0,F.z)(t)&&t.alpha.close())})),e.frameCaches.length=0,e.needKeyFrame=!0,e.inputEnd=!1,e.lastDecodeTimestamp=(0,I.A)(),v.pq(`reset video decoder, taskId: ${e.taskId}`,z,844))}async registerTask(t){return this.tasks.has(t.taskId)?f.lh:this.createTask(t)}async unregisterTask(t){const e=this.tasks.get(t);var r;e&&(e.rightPort.close(),e.leftPort.close(),e.softwareDecoder&&e.softwareDecoder.close(),e.hardwareDecoder&&e.hardwareDecoder.close(),a()(r=e.frameCaches).call(r,(t=>{(0,S.A)(t)?e.avframePool.release(t):(t.close(),(0,F.z)(t)&&t.alpha.close())})),e.parameters&&(0,C.dn)(e.parameters),this.tasks.delete(t),v.Yz(`unregisterTask task, taskId: ${t}`,z,881))}async getTasksInfo(){var t;const e=[];return a()(t=this.tasks).call(t,(t=>{e.push({codecId:o.f[15](t.parameters+4),width:o.f[15](t.parameters+56),height:o.f[15](t.parameters+60),framerate:(0,_.lb)((0,h.A)(t.parameters+72,d.P)),hardware:t.targetDecoder===t.hardwareDecoder})})),e}}},41678:(t,e,r)=>{"use strict";r.d(e,{A:()=>B});var s=r(61240),i=r.n(s),n=r(86226),a=r.n(n),o=r(63939),c=r(50932),u=r(12264),h=r(29170),d=r(9599),l=r(44527),f=r(9705),p=r(84149),m=r(4624),g=r(16041),v=r(67672),A=r(72739),w=r(95335),y=r(13724),b=r(84290),k=r(39638),x=r(44328),_=r(95797),I=r(80105),P=r(47243),M=r(72703),S=r(94561),E=r(37180);const T="src/avpipeline/VideoEncodePipeline.ts";class B extends l.A{constructor(){super()}createWebcodecEncoder(t,e=!0){var r;return new P.A({onError:e=>{t.targetEncoder===t.hardwareEncoder?(t.targetEncoder=t.softwareEncoder,t.hardwareEncoder.close(),t.hardwareEncoder=null,t.encoderFallbackReady=this.openSoftwareEncoder(t),m.R8(`video encode error by hardware encoder, taskId: ${t.taskId}, error: ${e}, try to fallback to software encoder`,T,125)):m.z3(`video encode error by hardware encoder, taskId: ${t.taskId}, error: ${e}`,T,128)},onReceiveAVPacket(e){t.avpacketCaches.push(e),c.M[17](t.stats+152,o.f[17](t.stats+152)+BigInt(1))},enableHardwareAcceleration:e,avpacketPool:t.avpacketPool,avframePool:t.avframePool,copyTs:null!==(r=t.copyTs)&&void 0!==r&&r})}createWasmcodecEncoder(t,e){var r;return new I.A({resource:t.resource,onReceiveAVPacket(e){t.avpacketCaches.push(e),c.M[17](t.stats+152,o.f[17](t.stats+152)+BigInt(1))},avpacketPool:t.avpacketPool,copyTs:null!==(r=t.copyTs)&&void 0!==r&&r})}async createTask(t){const e=new p.Ay(t.leftPort),r=new p.Ay(t.rightPort),s=[],n=new g.A((0,h.A)(t.avframeList,u.A),t.avframeListMutex),a=new b.A((0,h.A)(t.avpacketList,u.A),t.avpacketListMutex),d=await(0,S.A)(t.resource,!0);t.resourceExtraData&&w.X$(d,t.resourceExtraData);const l={...t,resource:d,leftIPCPort:e,rightIPCPort:r,softwareEncoder:null,hardwareEncoder:null,avpacketCaches:s,inputEnd:!1,encodeEnd:!1,targetEncoder:null,parameters:0,timeBase:null,encoderFallbackReady:null,softwareEncoderOpened:!1,gopCounter:0,firstEncoded:!1,avframePool:n,avpacketPool:a};if(l.softwareEncoder=l.resource?this.createWasmcodecEncoder(l,l.resource):_.A.videoEncoder?this.createWebcodecEncoder(l,!1):null,!l.softwareEncoder)return m.z3("software encoder not support",T,199),f.lh;_.A.videoEncoder&&t.enableHardware&&(l.hardwareEncoder=this.createWebcodecEncoder(l)),l.targetEncoder=l.hardwareEncoder||l.softwareEncoder,this.tasks.set(t.taskId,l);const A=[];let k;async function x(){if(!l.inputEnd){if(!A.length){k&&await k;const t=await e.request("pull",{preferVideoFrame:l.targetEncoder instanceof P.A&&l.firstEncoded});v.ai(t)&&t<0&&(l.inputEnd=!0),A.push(t)}A.length<4&&!k&&l.firstEncoded&&(k=e.request("pull",{preferVideoFrame:l.targetEncoder instanceof P.A&&l.firstEncoded}).then((t=>{v.ai(t)&&t<0&&(l.inputEnd=!0),A.push(t),k=null})))}return A.length?A.shift():-1048576}return r.on(p.S3,(async e=>{switch(e.method){case"pull":if(s.length){const t=s.shift();r.reply(e,t);break}if(!l.encodeEnd){for(;;){if(s.length){const t=s.shift();r.reply(e,t);break}if(l.encoderFallbackReady){let t=await l.encoderFallbackReady;if(t&&(l.targetEncoder===l.hardwareEncoder&&(l.targetEncoder=l.softwareEncoder,l.hardwareEncoder.close(),l.hardwareEncoder=null,t=await this.openSoftwareEncoder(l),m.R8(`video encode error by hardware encoder, taskId: ${l.taskId}, error: ${t}, try to fallback to software encoder`,T,269)),t)){m.pq(`video encoder open error, taskId: ${l.taskId}`,T,272),r.reply(e,f.r8);break}l.encoderFallbackReady=null}let n=await x();if(l.targetEncoder instanceof I.A&&n instanceof VideoFrame){const t=l.avframePool.alloc();await(0,E.lL)(n,t),n.close(),n=t}if(!((0,M.A)(n)||n instanceof VideoFrame)){if(l.encodeEnd=!0,-1048576===n){if(l.targetEncoder===l.hardwareEncoder?await i().race([new y.A(2),l.targetEncoder.flush()])&&m.R8(`video hardware encoder flush failed, ignore it, taskId: ${l.taskId}`,T,409):await l.targetEncoder.flush(),l.targetEncoder===l.hardwareEncoder&&await new y.A(0),s.length){const t=s.shift();r.reply(e,t);break}m.pq(`video encoder ended, taskId: ${l.taskId}`,T,425),r.reply(e,-1048576);break}m.z3(`video encoder pull avframe error, taskId: ${t.taskId}, ret: ${n}`,T,431),r.reply(e,n);break}{let s=!l.firstEncoded&&l.targetEncoder instanceof I.A?await l.targetEncoder.encodeAsync(n,0===l.gopCounter):l.targetEncoder.encode(n,0===l.gopCounter);if(s<0){if(c.M[15](l.stats+140,o.f[15](l.stats+140)+1),l.targetEncoder instanceof P.A&&l.softwareEncoder){if(m.R8(`video encode error from hardware, taskId: ${l.taskId}, error: ${s}, try to fallback to software decoder`,T,296),l.targetEncoder===l.hardwareEncoder)l.hardwareEncoder.close(),l.hardwareEncoder=null;else{if(!l.resource){m.z3(`cannot fallback to wasm video encoder because of resource not found , taskId: ${t.taskId}`,T,319),r.reply(e,f.r8);break}for(l.softwareEncoder.close(),l.softwareEncoder=this.createWasmcodecEncoder(l,l.resource),l.softwareEncoderOpened=!1,l.firstEncoded=!1;A.length&&A[0]instanceof VideoFrame&&(0,E.OB)(A[0].format)!==o.f[15](l.parameters+28);)A.shift().close()}try{await this.openSoftwareEncoder(l),l.targetEncoder=l.softwareEncoder}catch(s){m.z3(`video software encoder open error, taskId: ${t.taskId}`,T,328),r.reply(e,f.r8);break}if(l.gopCounter=0,s=l.targetEncoder instanceof I.A?await l.targetEncoder.encodeAsync(n,!0):l.targetEncoder.encode(n,!0),s<0&&l.targetEncoder instanceof P.A&&l.resource){m.R8(`video encode error from webcodecs soft encoder, taskId: ${l.taskId}, error: ${s}, try to fallback to wasm software encoder`,T,340),l.softwareEncoder.close(),l.softwareEncoder=this.createWasmcodecEncoder(l,l.resource),l.softwareEncoderOpened=!1,l.firstEncoded=!1,l.gopCounter=0;try{await this.openSoftwareEncoder(l),l.targetEncoder=l.softwareEncoder}catch(s){m.z3(`video software encoder open error, taskId: ${t.taskId}`,T,351),r.reply(e,f.r8);break}s=await l.targetEncoder.encodeAsync(n,!0)}}if(s<0){(0,M.A)(n)?l.avframePool.release(n):n.close(),m.z3(`video encode error, taskId: ${t.taskId}, ret: ${s}`,T,365),r.reply(e,s);break}}for(l.firstEncoded||!(l.targetEncoder instanceof P.A)&&l.resourceExtraData.enableThreadPool&&_.A.jspi&&!l.targetEncoder.getChildThreadCount()||(l.firstEncoded=!0),l.gopCounter++,l.gopCounter===l.gop&&(l.gopCounter=0),(0,M.A)(n)?l.avframePool.release(n):n.close();l.targetEncoder instanceof P.A&&l.targetEncoder.getQueueLength()>10;)await new y.A(0)}}break}m.pq(`video encoder ended, taskId: ${l.taskId}`,T,439),r.reply(e,-1048576)}})),0}async openSoftwareEncoder(t){if(t.softwareEncoder&&!t.softwareEncoderOpened){const e=t.parameters;let r=1;(0,k.A)()&&(r=Math.max(r,navigator.hardwareConcurrency));let s=await t.softwareEncoder.open(e,t.timeBase,r,t.wasmEncoderOptions);if(s){if(!(t.softwareEncoder instanceof P.A&&t.resource))return s;if(m.R8(`webcodecs software encoder open failed, error: ${s}, try to fallback to wasm software encoder`,T,460),t.softwareEncoder.close(),t.softwareEncoder=this.createWasmcodecEncoder(t,t.resource),s=await t.softwareEncoder.open(e,t.timeBase,r,t.wasmEncoderOptions),s)return s;t.targetEncoder=t.softwareEncoder}t.softwareEncoderOpened=!0,t.softwareEncoder instanceof I.A&&(t.firstEncoded=!1)}return 0}async open(t,e,r,s={}){const n=this.tasks.get(t);if(n){if(n.wasmEncoderOptions=s,n.preferWebCodecs&&_.A.videoEncoder&&P.A.isSupported(e,!1)&&n.softwareEncoder instanceof I.A){n.softwareEncoder.close();const t=this.createWebcodecEncoder(n,!1);n.softwareEncoder===n.targetEncoder&&(n.targetEncoder=t),n.softwareEncoder=t}return new(i())((async(t,s)=>{if(n.hardwareEncoder){let t=await n.hardwareEncoder.open(e,r);t&&(m.z3(`cannot open hardware encoder, error: ${t}`,T,505),n.hardwareEncoder.close(),n.hardwareEncoder=null,n.targetEncoder=n.softwareEncoder)}if(n.parameters=e,n.timeBase=r,n.targetEncoder===n.softwareEncoder){let e=await this.openSoftwareEncoder(n);if(e&&(m.z3(`open video software encoder failed, error: ${e}`,T,518),!n.hardwareEncoder))return void t(f.r8)}t(0)}))}m.h2("task not found",T,528)}async resetTask(t){const e=this.tasks.get(t);e&&(e.targetEncoder===e.softwareEncoder?await e.targetEncoder.flush():e.targetEncoder===e.hardwareEncoder&&(e.hardwareEncoder.close(),e.hardwareEncoder=this.createWebcodecEncoder(e),await e.hardwareEncoder.open(e.parameters,e.timeBase),e.targetEncoder=e.hardwareEncoder),A.__(e.avpacketCaches,(t=>{e.avpacketPool.release(t)})),e.avpacketCaches.length=0,e.inputEnd=!1,e.encodeEnd=!1,m.pq(`reset video encode, taskId: ${e.taskId}`,T,551))}async getExtraData(t){const e=this.tasks.get(t);if(e)return e.targetEncoder.getExtraData();m.h2("task not found",T,560)}async getColorSpace(t){const e=this.tasks.get(t);if(e)return e.targetEncoder.getColorSpace();m.h2("task not found",T,568)}async registerTask(t){return this.tasks.has(t.taskId)?f.lh:this.createTask(t)}async unregisterTask(t){const e=this.tasks.get(t);e&&(e.rightPort.close(),e.leftPort.close(),e.softwareEncoder&&e.softwareEncoder.close(),e.hardwareEncoder&&e.hardwareEncoder.close(),A.__(e.avpacketCaches,(t=>{e.avpacketPool.release(t)})),this.tasks.delete(t))}async getTasksInfo(){var t;const e=[];return a()(t=this.tasks).call(t,(t=>{e.push({codecId:o.f[15](t.parameters+4),width:o.f[15](t.parameters+56),height:o.f[15](t.parameters+60),framerate:(0,x.lb)((0,h.A)(t.parameters+72,d.P)),hardware:t.targetEncoder===t.hardwareEncoder})})),e}}},30128:(t,e,r)=>{"use strict";r.d(e,{A:()=>d});var s,i,n=r(49859),a=r(74707),o=r.n(a),c=r(61499),u=r(12085);class h{constructor(){(0,n.A)(this,"min",void 0),(0,n.A)(this,"max",void 0)}}s=h.prototype,(i=new(o())).set("min",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),i.set("max",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:4,8:0}),(0,u.A)(s,c.Og,!0),(0,u.A)(s,c.dc,4),(0,u.A)(s,c.g7,8),(0,u.A)(s,c.JY,i);class d{constructor(){(0,n.A)(this,"channels",void 0),(0,n.A)(this,"sampleRate",void 0),(0,n.A)(this,"audioFrameSize",void 0),(0,n.A)(this,"audioPacketBytes",void 0),(0,n.A)(this,"audioPacketCount",void 0),(0,n.A)(this,"audioPacketQueueLength",void 0),(0,n.A)(this,"audioDropPacketCount",void 0),(0,n.A)(this,"audioDecodeErrorPacketCount",void 0),(0,n.A)(this,"audioEncodeErrorFrameCount",void 0),(0,n.A)(this,"audioFrameDecodeCount",void 0),(0,n.A)(this,"audioPacketEncodeCount",void 0),(0,n.A)(this,"audioFrameRenderCount",void 0),(0,n.A)(this,"audioFrameDropCount",void 0),(0,n.A)(this,"width",void 0),(0,n.A)(this,"height",void 0),(0,n.A)(this,"keyFrameInterval",void 0),(0,n.A)(this,"gop",void 0),(0,n.A)(this,"videoPacketBytes",void 0),(0,n.A)(this,"videoPacketCount",void 0),(0,n.A)(this,"videoPacketQueueLength",void 0),(0,n.A)(this,"videoDropPacketCount",void 0),(0,n.A)(this,"videoDecodeErrorPacketCount",void 0),(0,n.A)(this,"videoEncodeErrorFrameCount",void 0),(0,n.A)(this,"videoFrameDecodeCount",void 0),(0,n.A)(this,"videoPacketEncodeCount",void 0),(0,n.A)(this,"videoFrameRenderCount",void 0),(0,n.A)(this,"videoFrameDropCount",void 0),(0,n.A)(this,"keyFrameCount",void 0),(0,n.A)(this,"bufferDropBytes",void 0),(0,n.A)(this,"bufferReceiveBytes",void 0),(0,n.A)(this,"bufferSendBytes",void 0),(0,n.A)(this,"bufferOutputBytes",void 0),(0,n.A)(this,"audioBitrate",void 0),(0,n.A)(this,"videoBitrate",void 0),(0,n.A)(this,"videoDecodeFramerate",void 0),(0,n.A)(this,"videoRenderFramerate",void 0),(0,n.A)(this,"videoEncodeFramerate",void 0),(0,n.A)(this,"audioDecodeFramerate",void 0),(0,n.A)(this,"audioRenderFramerate",void 0),(0,n.A)(this,"audioEncodeFramerate",void 0),(0,n.A)(this,"audioFrameDecodeIntervalMax",void 0),(0,n.A)(this,"audioFrameRenderIntervalMax",void 0),(0,n.A)(this,"videoFrameDecodeIntervalMax",void 0),(0,n.A)(this,"videoFrameRenderIntervalMax",void 0),(0,n.A)(this,"bandwidth",void 0),(0,n.A)(this,"jitter",void 0),(0,n.A)(this,"jitterBuffer",void 0),(0,n.A)(this,"audioStutter",void 0),(0,n.A)(this,"videoStutter",void 0),(0,n.A)(this,"audiocodec",void 0),(0,n.A)(this,"videocodec",void 0),(0,n.A)(this,"firstAudioMuxDts",void 0),(0,n.A)(this,"lastAudioMuxDts",void 0),(0,n.A)(this,"firstVideoMuxDts",void 0),(0,n.A)(this,"lastVideoMuxDts",void 0),(0,n.A)(this,"audioCurrentTime",void 0),(0,n.A)(this,"videoCurrentTime",void 0),(0,n.A)(this,"audioNextTime",void 0),(0,n.A)(this,"videoNextTime",void 0)}}!function(t){var e=new(o());e.set("channels",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),e.set("sampleRate",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:4,8:0}),e.set("audioFrameSize",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:8,8:0}),e.set("audioPacketBytes",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:16,8:0}),e.set("audioPacketCount",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:24,8:0}),e.set("audioPacketQueueLength",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:32,8:0}),e.set("audioDropPacketCount",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:40,8:0}),e.set("audioDecodeErrorPacketCount",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:48,8:0}),e.set("audioEncodeErrorFrameCount",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:52,8:0}),e.set("audioFrameDecodeCount",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:56,8:0}),e.set("audioPacketEncodeCount",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:64,8:0}),e.set("audioFrameRenderCount",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:72,8:0}),e.set("audioFrameDropCount",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:80,8:0}),e.set("width",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:84,8:0}),e.set("height",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:88,8:0}),e.set("keyFrameInterval",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:92,8:0}),e.set("gop",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:96,8:0}),e.set("videoPacketBytes",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:104,8:0}),e.set("videoPacketCount",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:112,8:0}),e.set("videoPacketQueueLength",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:120,8:0}),e.set("videoDropPacketCount",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:128,8:0}),e.set("videoDecodeErrorPacketCount",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:136,8:0}),e.set("videoEncodeErrorFrameCount",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:140,8:0}),e.set("videoFrameDecodeCount",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:144,8:0}),e.set("videoPacketEncodeCount",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:152,8:0}),e.set("videoFrameRenderCount",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:160,8:0}),e.set("videoFrameDropCount",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:168,8:0}),e.set("keyFrameCount",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:176,8:0}),e.set("bufferDropBytes",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:184,8:0}),e.set("bufferReceiveBytes",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:192,8:0}),e.set("bufferSendBytes",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:200,8:0}),e.set("bufferOutputBytes",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:208,8:0}),e.set("audioBitrate",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:216,8:0}),e.set("videoBitrate",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:220,8:0}),e.set("videoDecodeFramerate",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:224,8:0}),e.set("videoRenderFramerate",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:228,8:0}),e.set("videoEncodeFramerate",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:232,8:0}),e.set("audioDecodeFramerate",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:236,8:0}),e.set("audioRenderFramerate",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:240,8:0}),e.set("audioEncodeFramerate",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:244,8:0}),e.set("audioFrameDecodeIntervalMax",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:248,8:0}),e.set("audioFrameRenderIntervalMax",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:252,8:0}),e.set("videoFrameDecodeIntervalMax",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:256,8:0}),e.set("videoFrameRenderIntervalMax",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:260,8:0}),e.set("bandwidth",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:264,8:0}),e.set("jitter",{0:19,1:0,2:0,3:0,4:0,5:0,6:0,7:272,8:0}),e.set("jitterBuffer",{0:h,1:0,2:0,3:0,4:0,5:0,6:0,7:280,8:0}),e.set("audioStutter",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:288,8:0}),e.set("videoStutter",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:292,8:0}),e.set("firstAudioMuxDts",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:296,8:0}),e.set("lastAudioMuxDts",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:304,8:0}),e.set("firstVideoMuxDts",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:312,8:0}),e.set("lastVideoMuxDts",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:320,8:0}),e.set("audioCurrentTime",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:328,8:0}),e.set("videoCurrentTime",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:336,8:0}),e.set("audioNextTime",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:344,8:0}),e.set("videoNextTime",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:352,8:0}),(0,u.A)(t,c.Og,!0),(0,u.A)(t,c.dc,8),(0,u.A)(t,c.g7,360),(0,u.A)(t,c.JY,e)}(d.prototype)},9781:(t,e,r)=>{"use strict";function s(t){return t.alpha&&t.alpha instanceof VideoFrame}r.d(e,{z:()=>s})},51170:(t,e,r)=>{"use strict";r.d(e,{default:()=>Dt});var s=r(49859),i=r(74707),n=r.n(i),a=r(86226),o=r.n(a),c=r(71426),u=r.n(c),h=r(61240),d=r.n(h),l=r(11393),f=r.n(l),p=r(61499),m=r(12085),g=r(12264),v=r(73783),A=r(74503),w=r(63939),y=r(50932),b=r(9599),k=r(29170),x=r(94300),_=r(30128),I=r(77162),P=r(87243),M=r(72480),S=r(31138),E=r(18667),T=r(88506),B=r(8284),C=r(67672),U=r(95335),D=r(76045),R=r(4624),L=r(95797),$=r(86834),O=r(44328),F=r(77231),z=r(14686),N=r(28875),V=r(68175),W=r(41678),j=r(62751),H=r(45597),G=r(84149),Q=r(9705),q=r(79756),Y=r(37837),K=r(71766),X=r(59475),J=r(96172),Z=r(62636),tt=r(56024),et=r(71517),rt=r(95832),st=r(22576),it=r(62815),nt=r(67659),at=r(21477),ot=r(82014),ct=r(95644),ut=r(13724),ht=r(38656),dt=r(2849),lt=r(86932),ft=r(54058),pt=r(79283),mt=r(10922),gt=r(548),vt=r(44690),At=r(94561),wt=r(49847),yt=r(77580),bt=r(79686),kt=r(364),xt=r(67603),_t=r(43607),It=r(95073),Pt=r(97317),Mt=r(24310),St=r(93147);const Et="src/avtranscoder/AVTranscoder.ts";class Tt{constructor(){(0,s.A)(this,"avpacketList",void 0),(0,s.A)(this,"avframeList",void 0),(0,s.A)(this,"avpacketListMutex",void 0),(0,s.A)(this,"avframeListMutex",void 0)}}var Bt,Ct;Bt=Tt.prototype,(Ct=new(n())).set("avpacketList",{0:g.A,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),Ct.set("avframeList",{0:g.A,1:0,2:0,3:0,4:0,5:0,6:0,7:12,8:0}),Ct.set("avpacketListMutex",{0:v.eu,1:0,2:0,3:0,4:0,5:0,6:0,7:24,8:0}),Ct.set("avframeListMutex",{0:v.eu,1:0,2:0,3:0,4:0,5:0,6:0,7:28,8:0}),(0,m.A)(Bt,p.Og,!0),(0,m.A)(Bt,p.dc,4),(0,m.A)(Bt,p.g7,32),(0,m.A)(Bt,p.JY,Ct);const Ut={};class Dt extends J.A{constructor(t){super(!0),(0,s.A)(this,"level",R.rD),(0,s.A)(this,"DemuxThreadReady",void 0),(0,s.A)(this,"AudioThreadReady",void 0),(0,s.A)(this,"VideoThreadReady",void 0),(0,s.A)(this,"MuxThreadReady",void 0),(0,s.A)(this,"IOThread",void 0),(0,s.A)(this,"DemuxerThread",void 0),(0,s.A)(this,"MuxThread",void 0),(0,s.A)(this,"AudioDecoderThread",void 0),(0,s.A)(this,"AudioFilterThread",void 0),(0,s.A)(this,"AudioEncoderThread",void 0),(0,s.A)(this,"VideoDecoderThread",void 0),(0,s.A)(this,"VideoFilterThread",void 0),(0,s.A)(this,"VideoEncoderThread",void 0),(0,s.A)(this,"GlobalData",void 0),(0,s.A)(this,"tasks",void 0),(0,s.A)(this,"options",void 0),(0,s.A)(this,"reportTimer",void 0),this.options=U.X$({},Ut,t),this.GlobalData=(0,A.A)(Tt),v.Ts(this.GlobalData[p.o9]+24),v.Ts(this.GlobalData[p.o9]+28),this.tasks=new(n()),this.reportTimer=new ft.A((()=>{this.report()}),0,1e3),R.pq("create transcoder",Et,399)}async getResource(t,e,r){var s;const i=null!=e?`${t}-${e}`:t;if(Dt.Resource.has(i))return Dt.Resource.get(i);const n=this.options.getWasm?this.options.getWasm(t,e,r):(0,xt.A)(null!==(s=this.options.wasmBaseUrl)&&void 0!==s?s:`https://cdn.jsdelivr.net/gh/zhaohappy/libmedia@${"v0.6.1-355-g72ba4aa7".split("-")[0].replace(/^[v|n]/,"")}/dist`,t,e);if(n){let t;if(($.A.safari&&!$.A.checkVersion($.A.version,"16.1",!0)||vt.A.ios&&!$.A.checkVersion(vt.A.version,"16.1",!0))&&(C.Yj(n)||C.sv(n)))if(C.Yj(n)){const e={method:"GET",headers:{},mode:"cors",cache:"default",referrerPolicy:"no-referrer-when-downgrade"},r=await fetch(n,e);t=await r.arrayBuffer()}else t=n;else t=await(0,At.A)(n,0===r);return Dt.Resource.set(i,t),t}}report(){var t;o()(t=this.tasks).call(t,(t=>{if(t.startTime){const s=t.stats.videoPacketEncodeCount||t.stats.audioPacketEncodeCount,i=(0,lt.A)()-t.startTime;let n=BigInt(0),a=BigInt(0);if(t.stats.lastVideoMuxDts){var e;const r=u()(e=t.streams).call(e,(t=>0===w.f[15](t.input.codecpar)));n=t.stats.lastVideoMuxDts-t.stats.firstVideoMuxDts,a=r.output?(0,O.k)(r.output.duration,r.output.timeBase,F.i0):(0,O.k)(r.input.duration,r.input.timeBase,F.i0)}if(t.stats.lastAudioMuxDts&&!n){var r;const e=u()(r=t.streams).call(r,(t=>1===w.f[15](t.input.codecpar)));n=t.stats.lastAudioMuxDts-t.stats.firstAudioMuxDts,a=e.output?(0,O.k)(e.output.duration,e.output.timeBase,F.i0):(0,O.k)(e.input.duration,e.input.timeBase,F.i0)}const o=i?Number(s)/(i/1e3):Number(s),c=Number(t.stats.bufferOutputBytes)/1e3,h=n?8*c/(Number(n)/1e3):0,d=Number(n)/1e3/(i/1e3);let l=a?Number(n)/Number(a)*100:0;l>100&&(l=100),R.pq(`[${t.taskId}] frame=${s} fps=${o.toFixed(2)} size=${c}kB time=${(0,gt.iV)(n)} bitrate=${h.toFixed(2)}kbps speed=${d.toFixed(2)}x progress=${l.toFixed(2)}%`,Et,493),this.options.onprogress&&this.options.onprogress(t.taskId,l)}}))}async startDemuxPipeline(){return this.DemuxThreadReady?this.DemuxThreadReady:this.DemuxThreadReady=new(d())((async t=>{this.IOThread=await(0,T.pt)(P.A,{name:"IOThread"},87243).run(),this.IOThread.setLogLevel(this.level),this.DemuxerThread=await(0,T.pt)(M.A,{name:"DemuxerThread"},72480).run(),this.DemuxerThread.setLogLevel(this.level),t()}))}async startVideoPipeline(){return this.VideoThreadReady?this.VideoThreadReady:this.VideoThreadReady=new(d())((async t=>{this.VideoDecoderThread=await(0,T.pt)(S.A,{name:"VideoDecoderThread",disableWorker:$.A.safari&&!$.A.checkVersion($.A.version,"16.1",!0)||vt.A.ios&&!$.A.checkVersion(vt.A.version,"16.1",!0)},31138).run(),this.VideoDecoderThread.setLogLevel(this.level),this.VideoFilterThread=await(0,T.pt)(ht.A,{name:"VideoFilterThread",disableWorker:$.A.safari&&!$.A.checkVersion($.A.version,"16.1",!0)||vt.A.ios&&!$.A.checkVersion(vt.A.version,"16.1",!0)},38656).run(),this.VideoFilterThread.setLogLevel(this.level),this.VideoEncoderThread=await(0,T.pt)(W.A,{name:"VideoEncoderThread",disableWorker:$.A.safari&&!$.A.checkVersion($.A.version,"16.1",!0)||vt.A.ios&&!$.A.checkVersion(vt.A.version,"16.1",!0)},41678).run(),this.VideoEncoderThread.setLogLevel(this.level),t()}))}async startAudioPipeline(){return this.AudioThreadReady?this.AudioThreadReady:this.AudioThreadReady=new(d())((async t=>{this.AudioDecoderThread=await(0,T.pt)(E.A,{name:"AudioDecoderThread",disableWorker:$.A.safari&&!$.A.checkVersion($.A.version,"16.1",!0)||vt.A.ios&&!$.A.checkVersion(vt.A.version,"16.1",!0)},18667).run(),this.AudioDecoderThread.setLogLevel(this.level),this.AudioFilterThread=await(0,T.pt)(ht.A,{name:"AudioFilterThread",disableWorker:$.A.safari&&!$.A.checkVersion($.A.version,"16.1",!0)||vt.A.ios&&!$.A.checkVersion(vt.A.version,"16.1",!0)},38656).run(),this.AudioFilterThread.setLogLevel(this.level),this.AudioEncoderThread=await(0,T.pt)(V.A,{name:"AudioEncoderThread",disableWorker:$.A.safari&&!$.A.checkVersion($.A.version,"16.1",!0)||vt.A.ios&&!$.A.checkVersion(vt.A.version,"16.1",!0)},68175).run(),this.AudioEncoderThread.setLogLevel(this.level),t()}))}async startMuxPipeline(){return this.MuxThreadReady?this.MuxThreadReady:this.MuxThreadReady=new(d())((async t=>{this.MuxThread=await(0,T.pt)(H.A,{name:"MuxThread",disableWorker:!L.A.workerMSE},45597).run(),this.MuxThread.setLogLevel(this.level),t()}))}isHls(t){return t.ext?"m3u8"===t.ext||"m3u"===t.ext:t.options.input.file instanceof wt.A?"m3u8"===t.options.input.file.ext:"m3u8"===t.options.input.ext}isDash(t){return t.ext?"mpd"===t.ext:t.options.input.file instanceof wt.A?"mpd"===t.options.input.file.ext:"mpd"===t.options.input.ext}async ready(){await this.startDemuxPipeline(),await this.startAudioPipeline(),await this.startVideoPipeline(),await this.startMuxPipeline(),R.pq("AVTranscoder pipelines started",Et,635)}changeAVStreamTimebase(t,e){let r=t.startTime,s=t.duration;r!==F.Dh&&(r=(0,O.k)(r,t.timeBase,e)),s!==F.Dh&&(s=(0,O.k)(s,t.timeBase,e)),t.duration=s,t.startTime=r,t.timeBase.den=e.den,t.timeBase.num=e.num}copyAVStreamInterface(t,e,r=!1){const s=U.X$({},e);if(s.codecpar=(0,Y.Gy)(168),(0,K.Yi)(s.codecpar,e.codecpar),s.timeBase={den:1,num:1},s.timeBase.den=e.timeBase.den,s.timeBase.num=e.timeBase.num,y.M[8](s.codecpar+8,0),s.timeBase.num>1&&(1===w.f[15](s.codecpar)?this.changeAVStreamTimebase(s,{num:1,den:w.f[15](s.codecpar+136)}):0===w.f[15](s.codecpar)&&this.changeAVStreamTimebase(s,{num:1,den:9e4})),1===t.oformat&&0===w.f[15](s.codecpar)){const t=(0,O.lb)((0,k.A)(s.codecpar+72,b.P));t===Math.floor(t)&&this.changeAVStreamTimebase(s,{num:1,den:256*t})}return w.f[20](s.codecpar+12)&&!r&&((0,Y.Eb)(w.f[20](s.codecpar+12)),y.M[20](s.codecpar+12,0),y.M[15](s.codecpar+16,0)),e.attachedPic&&(s.attachedPic=(0,et._5)(),(0,et.rN)(s.attachedPic,e.attachedPic)),t.options.duration&&(s.duration=(0,O.k)(BigInt(Math.floor(t.options.duration)),F.i0,s.timeBase)),r||(s.metadata.encoder="libmedia-v0.6.1-355-g72ba4aa7"),s}freeAVStreamInterface(t){t.codecpar&&((0,K.dn)(t.codecpar),t.codecpar=0),t.attachedPic&&((0,et.Qe)(t.attachedPic),t.attachedPic=0)}async setTaskInput(t){const e=t.taskId,r=t.options,s=t.ioloader2DemuxerChannel=(0,pt.A)(),i=t.stats;let n,a=0;if(C.Yj(r.input.file)){let{info:t,type:o,ext:c}=await(0,kt.A)(r.input.file,r.input.ext,r.input.http);n=c,a=await this.IOThread.registerTask.transfer(s.port1).invoke({type:o,info:{...t},range:{from:-1,to:-1},taskId:e,options:{isLive:!1},rightPort:s.port1,stats:i[p.o9]})}else if(r.input.file instanceof File)n=r.input.file.name.split(".").pop(),a=await this.IOThread.registerTask.transfer(s.port1).invoke({type:1,info:{file:r.input.file},range:{from:-1,to:-1},taskId:e,options:{isLive:!1},rightPort:s.port1,stats:i[p.o9]});else if(r.input.file instanceof wt.A){const e=t.inputIPCPort=new G.Ay(s.port1);e.on(G.S3,(async r=>{switch(r.method){case"open":{const s=await t.options.input.file.open();if(s<0){R.z3(`custom loader open error, ${s}, taskId: ${t.taskId}`,Et,794),e.reply(r,null,s);break}e.reply(r,s);break}case"read":{const s=r.params.pointer,i=r.params.length,n=(0,z.JW)(s,i);try{const s=await t.options.input.file.read(i,n);s>0&&(t.stats.bufferReceiveBytes+=BigInt(0|s)),e.reply(r,s)}catch(s){R.z3(`loader read error, ${s}, taskId: ${t.taskId}`,Et,818),e.reply(r,Q.LR)}break}case"write":{const s=r.params.pointer,i=r.params.length,n=(0,z.JW)(s,i);try{const s=await t.options.input.file.write(n);t.stats.bufferSendBytes+=i,e.reply(r,s)}catch(s){R.z3(`loader write error, ${s}, taskId: ${t.taskId}`,Et,840),e.reply(r,Q.LR)}break}case"seek":{const s=r.params.pos;try{const i=await t.options.input.file.seek(s);if(i<0){R.z3(`custom loader seek error, ${i}, taskId: ${t.taskId}`,Et,855),e.reply(r,null,i);break}e.reply(r,i)}catch(s){R.z3(`loader seek error, ${s}, taskId: ${t.taskId}`,Et,862),e.reply(r,null,s)}break}case"size":e.reply(r,await t.options.input.file.size())}}))}else R.h2("invalid source",Et,876);n&&(t.ext=n),a<0&&R.h2(`register io task failed, ret: ${a}, taskId: ${e}`,Et,885)}async setTaskOutput(t){var e,r;const s=t.muxer2OutputChannel=(0,pt.A)(),i=t.outputIPCPort=new G.Ay(s.port2);let n;if(t.options.output.format)n=j.iW[t.options.output.format];else if(t.options.output.file instanceof FileSystemFileHandle){let e=t.options.output.file.name.split(".").pop();n=j.HR[e]}C.ai(n)||R.h2("invalid output format",Et,907),t.oformat=n;let a,o=await this.MuxThread.registerTask.transfer(s.port1).invoke({taskId:t.taskId,format:n,avpacketList:this.GlobalData[p.o9],avpacketListMutex:this.GlobalData[p.o9]+24,stats:t.stats[p.o9],rightPort:s.port1,formatOptions:t.options.output.formatOptions,zeroStart:null!==(e=t.options.startAtZero)&&void 0!==e&&e,nonnegative:null!==(r=t.options.nonnegative)&&void 0!==r&&r});o<0&&R.h2(`register mux task failed, ret: ${o}, taskId: ${t.taskId}`,Et,926),t.options.output.file instanceof FileSystemFileHandle?(a=t.safeFileIO=new X.A(t.options.output.file),await t.safeFileIO.ready()):a={write:e=>{t.options.output.file.writeBuffer(e)},appendBufferByPosition:(e,r)=>{t.options.output.file.flush(),t.options.output.file.writeBuffer(e),t.options.output.file.flushToPos(BigInt(Math.floor(r)))},seek:e=>{t.options.output.file.seek(BigInt(Math.floor(e)))},close:()=>{t.options.output.file.flush()}},i.on(G.Wo,(async e=>{switch(e.method){case"write":try{if(null!=e.params.pos?a.appendBufferByPosition(e.params.data,Number(e.params.pos)):a.write(e.params.data),t.options.output.file instanceof FileSystemFileHandle&&t.safeFileIO.writeQueueSize>5)try{for(await this.MuxThread.pause(t.taskId);t.safeFileIO.writeQueueSize>5;)await new ut.A(0);await this.MuxThread.unpause(t.taskId)}catch(t){}}catch(e){R.z3(`ioWriter write error, ${e}, taskId: ${t.taskId}`,Et,983)}break;case"seek":{const r=e.params.pos;try{a.seek(Number(r))}catch(e){R.z3(`ioWriter seek error, ${e}, taskId: ${t.taskId}`,Et,996)}break}case"end":await a.close(),await this.clearTask(t),this.fire(Z.X,[t.taskId]),R.pq(`transcode ended, taskId: ${t.taskId}, cost: ${(0,gt.iV)(BigInt(Math.floor((0,lt.A)()-t.startTime)))}`,Et,1004);break;case"error":await a.close(),await this.clearTask(t),this.fire(Z.L,[t.taskId]),R.pq(`transcode error, taskId: ${t.taskId}`,Et,1012)}}))}async analyzeInputStreams(t){const e=t.taskId,r=t.ioloader2DemuxerChannel,s=t.ext,i=t.stats;let n,a=0;if(this.isDash(t)){await this.IOThread.open(e);const a=await this.IOThread.hasAudio(e),o=await this.IOThread.hasVideo(e);a&&o?(n=(0,B.A)(),await this.DemuxerThread.registerTask.transfer(r.port2,t.controller.getDemuxerRenderControlPort()).invoke({taskId:e,leftPort:r.port2,controlPort:t.controller.getDemuxerRenderControlPort(),format:j.HR[s],stats:i[p.o9],isLive:!1,flags:2,ioloaderOptions:{mediaType:"audio"},avpacketList:this.GlobalData[p.o9],avpacketListMutex:this.GlobalData[p.o9]+24,formatOptions:t.options.input.formatOptions}),await this.DemuxerThread.registerTask({taskId:n,mainTaskId:e,flags:2,format:j.HR[s],stats:i[p.o9],isLive:!1,ioloaderOptions:{mediaType:"video"},avpacketList:this.GlobalData[p.o9],avpacketListMutex:this.GlobalData[p.o9]+24,formatOptions:t.options.input.formatOptions})):await this.DemuxerThread.registerTask.transfer(r.port2,t.controller.getDemuxerRenderControlPort()).invoke({taskId:e,leftPort:r.port2,controlPort:t.controller.getDemuxerRenderControlPort(),format:j.HR[s],stats:i[p.o9],isLive:!1,flags:2,ioloaderOptions:{mediaType:a?"audio":"video"},avpacketList:this.GlobalData[p.o9],avpacketListMutex:this.GlobalData[p.o9]+24,formatOptions:t.options.input.formatOptions})}else await this.DemuxerThread.registerTask.transfer(r.port2,t.controller.getDemuxerRenderControlPort()).invoke({taskId:e,leftPort:r.port2,controlPort:t.controller.getDemuxerRenderControlPort(),format:j.HR[s],stats:i[p.o9],isLive:!1,flags:this.isHls(t)?2:0,avpacketList:this.GlobalData[p.o9],avpacketListMutex:this.GlobalData[p.o9]+24,formatOptions:t.options.input.formatOptions});a=await this.DemuxerThread.openStream(e,15e3),a<0&&R.h2(`open stream failed, ret: ${a}, taskId: ${e}`,Et,1109);let o=await this.DemuxerThread.analyzeStreams(e);if(!C.ai(o)){if(o.streams.length||R.h2("not found any stream",Et,1117),n){var c;a=await this.DemuxerThread.openStream(n,15e3),a<0&&R.h2(`open stream failed, ret: ${a}, taskId: ${e}`,Et,1123);const t=await this.DemuxerThread.analyzeStreams(n);if(C.ai(t))return void R.h2(`analyze stream failed, ret: ${t}`,Et,1127);t.streams.length||R.h2("not found any stream",Et,1131),o.streams=f()(c=o.streams).call(c,t.streams)}if(n&&(t.subTaskId=n),this.isHls(t)||this.isDash(t)){const t=1e3*await this.IOThread.getDuration(e);if(t>0)for(let e=0;e<o.streams.length;e++)o.streams[e].duration=(0,O.k)(BigInt(Math.floor(t)),F.i0,o.streams[e].timeBase)}return o}R.h2(`analyze stream failed, ret: ${o}`,Et,1113)}async handleAudioStream(t,e){const r=e.options.output.audio;if(null!=r&&r.disable)return 0;if("copy"!==(null==r?void 0:r.codec)||e.options.start||e.options.duration){var s;const i=(0,pt.A)(),n=(0,pt.A)(),a=(0,pt.A)(),o=(0,pt.A)(),c=this.copyAVStreamInterface(e,t),u=(0,B.A)();let h=0;if(r){if(r.codec&&"copy"!==r.codec){const e=j.n1[r.codec];C.ai(e)||(this.freeAVStreamInterface(c),R.h2(`invalid codec name(${r.codec})`,Et,1207)),y.M[15](c.codecpar+4,e),w.f[15](c.codecpar+4)!==w.f[15](t.codecpar+4)&&(y.M[15](c.codecpar+48,F.N_),y.M[15](c.codecpar+52,F.N_))}if(r.bitrate&&y.M[17](c.codecpar+32,BigInt(Math.floor(r.bitrate))),r.channels&&y.M[15](c.codecpar+116,r.channels),r.sampleRate&&y.M[15](c.codecpar+136,r.sampleRate),r.sampleFmt){const t=j.Sz[r.sampleFmt];C.ai(t)||(this.freeAVStreamInterface(c),R.h2(`invalid sampleFmt name(${r.sampleFmt})`,Et,1229)),y.M[15](c.codecpar+28,t)}r.profile&&y.M[15](c.codecpar+48,r.profile)}if(16===e.oformat){if(65557!==w.f[15](c.codecpar+4)&&65559!==w.f[15](c.codecpar+4)&&65541!==w.f[15](c.codecpar+4)&&65536!==w.f[15](c.codecpar+4)&&65548!==w.f[15](c.codecpar+4)&&65544!==w.f[15](c.codecpar+4)&&65567!==w.f[15](c.codecpar+4))switch(w.f[15](c.codecpar+28)){case 3:case 8:default:y.M[15](c.codecpar+4,65557);break;case 4:case 9:y.M[15](c.codecpar+4,65559);break;case 0:case 5:y.M[15](c.codecpar+4,65541);break;case 1:case 6:y.M[15](c.codecpar+4,65536);break;case 2:case 7:y.M[15](c.codecpar+4,65544);break;case 10:case 11:y.M[15](c.codecpar+4,65567)}switch(w.f[15](c.codecpar+4)){case 65557:y.M[15](c.codecpar+28,3);break;case 65559:y.M[15](c.codecpar+28,4);break;case 65541:y.M[15](c.codecpar+28,0);break;case 65536:y.M[15](c.codecpar+28,1);break;case 65548:case 65544:y.M[15](c.codecpar+28,2);break;case 65567:y.M[15](c.codecpar+28,10)}y.M[15](c.codecpar+40,ct.MZ(w.f[15](t.codecpar+4)))}if(86018===w.f[15](c.codecpar+4))y.M[15](c.codecpar+28,8),w.f[15](c.codecpar+136)>48e3&&y.M[15](c.codecpar+136,48e3);else if(86017===w.f[15](c.codecpar+4))y.M[15](c.codecpar+28,8),w.f[15](c.codecpar+136)>48e3&&y.M[15](c.codecpar+136,48e3);else if(86021===w.f[15](c.codecpar+4))y.M[15](c.codecpar+28,8);else if(86076===w.f[15](c.codecpar+4))y.M[15](c.codecpar+136,48e3),y.M[15](c.codecpar+28,8);else if(86028===w.f[15](c.codecpar+4))1!==w.f[15](c.codecpar+28)&&2!==w.f[15](c.codecpar+28)&&y.M[15](c.codecpar+28,1);else if(65543===w.f[15](c.codecpar+4)||65542===w.f[15](c.codecpar+4))y.M[15](c.codecpar+136,8e3),y.M[17](c.codecpar+32,BigInt(64e3)),y.M[15](c.codecpar+28,1);else if(86051===w.f[15](c.codecpar+4))y.M[15](c.codecpar+28,1),w.f[15](c.codecpar+136)>32e3&&y.M[15](c.codecpar+136,32e3);else if(86020===w.f[15](c.codecpar+4)){y.M[15](c.codecpar+28,2);let t=w.f[15](c.codecpar+116);const e=6===t||3===t?1:0;e&&t--;const r=((0,It.A)(132+1389*t+72*e,32)*w.f[15](c.codecpar+136)-w.f[15](c.codecpar+136)+1)/512;y.M[17](c.codecpar+32,_t.T9(BigInt(0|r),w.f[17](c.codecpar+32)))}w.f[15](c.codecpar+48)===F.N_&&(86018===w.f[15](c.codecpar+4)?y.M[15](c.codecpar+48,2):86017===w.f[15](c.codecpar+4)&&y.M[15](c.codecpar+48,34)),1===e.oformat&&this.changeAVStreamTimebase(c,{num:1,den:w.f[15](c.codecpar+136)}),await this.DemuxerThread.connectStreamTask.transfer(i.port1).invoke(e.taskId,t.index,i.port1);let d=await this.getResource("decoder",w.f[15](t.codecpar+4),w.f[15](t.codecpar));if(!d){if(!L.A.audioDecoder)return R.z3(`audio decoder codecId ${w.f[15](t.codecpar+4)} not support`,Et,1386),(0,K.dn)(c.codecpar),Q.NU;if(!(await AudioDecoder.isConfigSupported({codec:(0,N.A)(t.codecpar),sampleRate:w.f[15](t.codecpar+136),numberOfChannels:w.f[15](t.codecpar+116)})).supported)return R.z3(`AudioDecoder codecId ${w.f[15](t.codecpar+4)} not support`,Et,1380),(0,K.dn)(c.codecpar),Q.NU}if(await this.AudioDecoderThread.registerTask.transfer(i.port2,a.port1).invoke({taskId:u,resource:d,leftPort:i.port2,rightPort:a.port1,stats:e.stats[p.o9],avpacketList:this.GlobalData[p.o9],avpacketListMutex:this.GlobalData[p.o9]+24,avframeList:this.GlobalData[p.o9]+12,avframeListMutex:this.GlobalData[p.o9]+28}),h=await this.AudioDecoderThread.open(u,t.codecpar),h<0)return R.z3(`cannot open audio ${(0,gt.eG)(w.f[15](t.codecpar),w.f[15](t.codecpar+4))} decoder`,Et,1410),this.freeAVStreamInterface(c),h;let l=await this.getResource("resampler");if(!l)return R.z3("resampler not found",Et,1417),this.freeAVStreamInterface(c),Q.NU;const f=[],m=[];let g,v;const A=(0,dt.Fn)("resampler",{resource:l,output:{channels:w.f[15](c.codecpar+116),sampleRate:w.f[15](c.codecpar+136),format:w.f[15](c.codecpar+28)}});if(f.push(A),g={id:A.id,port:a.port2},v={id:A.id,port:o.port1},e.options.start||e.options.duration){const r=(0,O.k)(BigInt(Math.floor(e.options.start||0)),F.i0,t.timeBase),s=(0,dt.Fn)("range",{start:r,end:e.options.duration?(0,O.k)(BigInt(Math.floor(e.options.duration)),F.i0,F.KR)+r:-BigInt(1)});f.push(s),g={id:s.id,port:a.port2},m.push({parent:s.id,child:A.id})}await this.AudioFilterThread.registerTask.transfer(a.port2,o.port1).invoke({taskId:u,graph:{vertices:f,edges:m},inputPorts:[g],outputPorts:[v],stats:e.stats[p.o9],avframeList:this.GlobalData[p.o9]+12,avframeListMutex:this.GlobalData[p.o9]+28});let b=await this.getResource("encoder",w.f[15](c.codecpar+4),w.f[15](c.codecpar));if(!b){if(!L.A.audioEncoder)return R.z3(`${(0,gt.eG)(w.f[15](c.codecpar),w.f[15](c.codecpar+4))} encoder codecId ${w.f[15](c.codecpar+4)} not support`,Et,1496),this.freeAVStreamInterface(c),Q.NU;if(!(await AudioEncoder.isConfigSupported({codec:(0,q.A)(c.codecpar),sampleRate:w.f[15](c.codecpar+136),numberOfChannels:w.f[15](c.codecpar+116),bitrate:Number(BigInt.asIntN(32,w.f[17](c.codecpar+32))),bitrateMode:"constant"})).supported)return R.z3(`AudioEncoder ${(0,gt.eG)(w.f[15](c.codecpar),w.f[15](c.codecpar+4))} codecId ${w.f[15](c.codecpar+4)} not support`,Et,1490),this.freeAVStreamInterface(c),Q.NU}return await this.AudioEncoderThread.registerTask.transfer(o.port2,n.port1).invoke({taskId:u,resource:b,leftPort:o.port2,rightPort:n.port1,stats:e.stats[p.o9],avpacketList:this.GlobalData[p.o9],avpacketListMutex:this.GlobalData[p.o9]+24,avframeList:this.GlobalData[p.o9]+12,avframeListMutex:this.GlobalData[p.o9]+28,copyTs:null!==(s=e.options.copyTs)&&void 0!==s&&s}),h=await this.AudioEncoderThread.open(u,c.codecpar,{num:c.timeBase.num,den:c.timeBase.den}),h<0?(R.z3(`cannot open audio ${(0,gt.eG)(w.f[15](c.codecpar),w.f[15](c.codecpar+4))} encoder`,Et,1521),this.freeAVStreamInterface(c),h):(await this.MuxThread.addStream.transfer(n.port2).invoke(e.taskId,c,n.port2),e.streams.push({taskId:u,input:t,output:c,demuxer2DecoderChannel:i,decoder2FilterChannel:a,filter2EncoderChannel:o,encoder2MuxerChannel:n}),0)}{let r=this.copyAVStreamInterface(e,t,!0);try{const s=(0,pt.A)();return await this.DemuxerThread.connectStreamTask.transfer(s.port1).invoke(e.taskId,r.index,s.port1),await this.MuxThread.addStream.transfer(s.port2).invoke(e.taskId,r,s.port2),this.freeAVStreamInterface(r),e.streams.push({input:t,demuxer2MuxerChannel:s}),0}catch(t){throw this.freeAVStreamInterface(r),t}}}async handleVideoStream(t,e){const r=e.options.output.video;if(null!=r&&r.disable)return 0;if("copy"!==(null==r?void 0:r.codec)||e.options.start||e.options.duration){var s,i,n,a;const u=(0,pt.A)(),h=(0,pt.A)(),d=(0,pt.A)(),l=(0,pt.A)(),f=this.copyAVStreamInterface(e,t);y.M[15](f.codecpar+160,-3&w.f[15](f.codecpar+160)),y.M[15](f.codecpar+160,-5&w.f[15](f.codecpar+160));const m=(0,B.A)();let g=0;if(r){if(r.codec&&"copy"!==r.codec){const e=j._R[r.codec];C.ai(e)||(this.freeAVStreamInterface(f),R.h2(`invalid codec name(${r.codec})`,Et,1596)),y.M[15](f.codecpar+4,e),w.f[15](f.codecpar+4)!==w.f[15](t.codecpar+4)&&(y.M[15](f.codecpar+48,F.N_),y.M[15](f.codecpar+52,F.N_))}if(r.width&&y.M[15](f.codecpar+56,r.width),r.height&&y.M[15](f.codecpar+60,r.height),r.bitrate&&y.M[17](f.codecpar+32,BigInt(Math.floor(r.bitrate))),r.pixfmt){const t=j.qO[r.pixfmt];C.ai(t)||R.h2(`invalid pixfmt name(${r.pixfmt})`,Et,1617),y.M[15](f.codecpar+28,t)}r.framerate&&(y.M[15](f.codecpar+72,r.framerate>>>0),y.M[15](f.codecpar+76,1)),r.aspect&&(y.M[15](f.codecpar+68,r.aspect.den),y.M[15](f.codecpar+64,r.aspect.num)),r.profile&&y.M[15](f.codecpar+48,r.profile),r.level&&y.M[15](f.codecpar+52,r.level),r.delay&&y.M[15](f.codecpar+104,r.delay)}if(w.f[15](f.codecpar+48)===F.N_)if(27===w.f[15](f.codecpar+4)){var o;const t=(0,Pt.I)(w.f[15](f.codecpar+28));y.M[15](f.codecpar+48,10===(null==t||null===(o=t.comp[0])||void 0===o?void 0:o.depth)?110:100)}else if(173===w.f[15](f.codecpar+4)){var c;const t=(0,Pt.I)(w.f[15](f.codecpar+28));y.M[15](f.codecpar+48,10===(null==t||null===(c=t.comp[0])||void 0===c?void 0:c.depth)?2:1)}else 196===w.f[15](f.codecpar+4)||(225===w.f[15](f.codecpar+4)||167===w.f[15](f.codecpar+4)||139===w.f[15](f.codecpar+4))&&y.M[15](f.codecpar+48,0);w.f[15](f.codecpar+52)===F.N_&&(27===w.f[15](f.codecpar+4)?y.M[15](f.codecpar+52,it.k9(w.f[15](f.codecpar+56),w.f[15](f.codecpar+60),(0,O.lb)((0,k.A)(f.codecpar+72,b.P)))):173===w.f[15](f.codecpar+4)?y.M[15](f.codecpar+52,nt.k9(w.f[15](f.codecpar+48),w.f[15](f.codecpar+56),w.f[15](f.codecpar+60),(0,O.lb)((0,k.A)(f.codecpar+72,b.P)),Number(w.f[17](f.codecpar+32)))):196===w.f[15](f.codecpar+4)||(225===w.f[15](f.codecpar+4)?y.M[15](f.codecpar+52,at.k9(w.f[15](f.codecpar+56),w.f[15](f.codecpar+60),(0,O.lb)((0,k.A)(f.codecpar+72,b.P)))):167===w.f[15](f.codecpar+4)&&y.M[15](f.codecpar+52,ot.k9(w.f[15](f.codecpar+56),w.f[15](f.codecpar+60),(0,O.lb)((0,k.A)(f.codecpar+72,b.P)))))),r&&null!=r.delay||0!==w.f[15](f.codecpar+104)||y.M[15](f.codecpar+104,4),27!==w.f[15](f.codecpar+4)&&12!==w.f[15](f.codecpar+4)&&173!==w.f[15](f.codecpar+4)&&196!==w.f[15](f.codecpar+4)||(2===e.oformat||11===e.oformat||12===e.oformat||13===e.oformat?y.M[15](f.codecpar+160,1|w.f[15](f.codecpar+160)):y.M[15](f.codecpar+160,-2&w.f[15](f.codecpar+160))),12===w.f[15](f.codecpar+4)&&f.timeBase.den>65535&&this.changeAVStreamTimebase(f,{num:1,den:65535}),await this.DemuxerThread.connectStreamTask.transfer(u.port1).invoke(e.subTaskId||e.taskId,t.index,u.port1);let v=await this.getResource("decoder",w.f[15](t.codecpar+4),w.f[15](t.codecpar));if(!v){if(!L.A.videoDecoder)return R.z3(`video decoder codecId ${w.f[15](t.codecpar+4)} not support`,Et,1731),this.freeAVStreamInterface(f),Q.NU;if(!(await VideoDecoder.isConfigSupported({codec:(0,N.A)(t.codecpar)})).supported)return R.z3(`VideoDecoder codecId ${w.f[15](t.codecpar+4)} not support`,Et,1725),this.freeAVStreamInterface(f),Q.NU}const A=(0,Pt.I)(w.f[15](t.codecpar+28));let x=!0;if((null==A||null===(s=A.comp[0])||void 0===s?void 0:s.depth)>8&&(x=!1),await this.VideoDecoderThread.registerTask.transfer(u.port2,d.port1).invoke({taskId:m,resource:v,leftPort:u.port2,rightPort:d.port1,stats:e.stats[p.o9],enableHardware:!!e.options.input.enableHardware&&!!e.options.input.enableWebCodecs&&x,avpacketList:this.GlobalData[p.o9],avpacketListMutex:this.GlobalData[p.o9]+24,avframeList:this.GlobalData[p.o9]+12,avframeListMutex:this.GlobalData[p.o9]+28,preferWebCodecs:!(0,Mt.A)(t.codecpar)&&!(0,St.A)(t.codecpar)&&!!e.options.input.enableWebCodecs}),g=await this.VideoDecoderThread.open(m,t.codecpar),g<0)return R.z3(`cannot open video ${(0,gt.eG)(w.f[15](t.codecpar),w.f[15](t.codecpar+4))} decoder`,Et,1764),this.freeAVStreamInterface(f),g;let _=await this.getResource("scaler");_||R.h2("scaler not found",Et,1771);const I=[],P=[];let M,S,E;const T=(0,dt.Fn)("scaler",{resource:_,output:{width:w.f[15](f.codecpar+56),height:w.f[15](f.codecpar+60),format:w.f[15](f.codecpar+28)}});if(I.push(T),M={id:T.id,port:d.port2},S={id:T.id,port:l.port1},e.options.start||e.options.duration){const t=(0,O.k)(BigInt(Math.floor(e.options.start||0)),F.i0,F.KR),r=(0,dt.Fn)("range",{start:t,end:e.options.duration?(0,O.k)(BigInt(Math.floor(e.options.duration)),F.i0,F.KR)+t:-BigInt(1)});I.push(r),M={id:r.id,port:d.port2},P.push({parent:r.id,child:T.id}),E=r.id}if((0,O.lb)((0,k.A)(t.codecpar+72,b.P))>(0,O.lb)((0,k.A)(f.codecpar+72,b.P))){const t=(0,dt.Fn)("framerate",{framerate:{num:w.f[15](f.codecpar+72),den:w.f[15](f.codecpar+76)}});I.push(t),P.length=0,E?(P.push({parent:E,child:t.id}),P.push({parent:t.id,child:T.id})):(M={id:t.id,port:d.port2},P.push({parent:t.id,child:T.id}))}await this.VideoFilterThread.registerTask.transfer(d.port2,l.port1).invoke({taskId:m,graph:{vertices:I,edges:P},inputPorts:[M],outputPorts:[S],stats:e.stats[p.o9],avframeList:this.GlobalData[p.o9]+12,avframeListMutex:this.GlobalData[p.o9]+28});let D=await this.getResource("encoder",w.f[15](f.codecpar+4),w.f[15](f.codecpar));if(!D){if(!L.A.videoEncoder)return R.z3(`${(0,gt.eG)(w.f[15](f.codecpar),w.f[15](f.codecpar+4))} encoder codecId ${w.f[15](f.codecpar+4)} not support`,Et,1882),this.freeAVStreamInterface(f),Q.NU;if(!(await VideoEncoder.isConfigSupported({codec:(0,N.A)(f.codecpar),width:w.f[15](f.codecpar+56),height:w.f[15](f.codecpar+60)})).supported)return R.z3(`VideoEncoder ${(0,gt.eG)(w.f[15](f.codecpar),w.f[15](f.codecpar+4))} codecId ${w.f[15](f.codecpar+4)} not support`,Et,1876),this.freeAVStreamInterface(f),Q.NU}const $={},z={};return 173===w.f[15](f.codecpar+4)?(z.enableThreadPool=!0,z.enableThreadCountRate=2):167===w.f[15](f.codecpar+4)&&(z.enableThreadPool=!0),null!==(i=e.options)&&void 0!==i&&null!==(i=i.output)&&void 0!==i&&null!==(i=i.video)&&void 0!==i&&i.encoderOptions&&U.__(e.options.output.video.encoderOptions,((t,e)=>{$[e]=t})),await this.VideoEncoderThread.registerTask.transfer(l.port2,h.port1).invoke({taskId:m,resource:D,resourceExtraData:z,leftPort:l.port2,rightPort:h.port1,stats:e.stats[p.o9],enableHardware:!!r.enableHardware&&!!r.enableWebCodecs,avpacketList:this.GlobalData[p.o9],avpacketListMutex:this.GlobalData[p.o9]+24,avframeList:this.GlobalData[p.o9]+12,avframeListMutex:this.GlobalData[p.o9]+28,gop:(0,O.lb)((0,k.A)(f.codecpar+72,b.P))*(null!==(n=r.keyFrameInterval)&&void 0!==n?n:5e3)/1e3|0,preferWebCodecs:!(0,Mt.A)(f.codecpar)&&!(0,St.A)(f.codecpar)&&!!r.enableWebCodecs,copyTs:null!==(a=e.options.copyTs)&&void 0!==a&&a}),g=await this.VideoEncoderThread.open(m,f.codecpar,{num:f.timeBase.num,den:f.timeBase.den},$),g<0?(R.z3(`cannot open video ${(0,gt.eG)(w.f[15](f.codecpar),w.f[15](f.codecpar+4))} encoder`,Et,1930),this.freeAVStreamInterface(f),g):(await this.MuxThread.addStream.transfer(h.port2).invoke(e.taskId,f,h.port2),e.streams.push({taskId:m,input:t,output:f,demuxer2DecoderChannel:u,decoder2FilterChannel:d,filter2EncoderChannel:l,encoder2MuxerChannel:h}),0)}{let r=this.copyAVStreamInterface(e,t,!0);try{const s=(0,pt.A)();return await this.DemuxerThread.connectStreamTask.transfer(s.port1).invoke(e.subTaskId||e.taskId,r.index,s.port1),await this.MuxThread.addStream.transfer(s.port2).invoke(e.taskId,r,s.port2),this.freeAVStreamInterface(r),e.streams.push({input:t,demuxer2MuxerChannel:s}),0}catch(t){throw this.freeAVStreamInterface(r),t}}}async handleCopyStream(t,e){let r=this.copyAVStreamInterface(e,t,!0);try{const s=(0,pt.A)();return 1024&t.disposition||await this.DemuxerThread.connectStreamTask.transfer(s.port1).invoke(e.subTaskId||e.taskId,r.index,s.port1),await this.MuxThread.addStream.transfer(s.port2).invoke(e.taskId,r,s.port2),this.freeAVStreamInterface(r),e.streams.push({input:t,demuxer2MuxerChannel:s}),0}catch(t){throw this.freeAVStreamInterface(r),t}}async clearTask(t){this.MuxThread.unregisterTask(t.taskId);for(let e=0;e<t.streams.length;e++)t.streams[e].taskId&&(1===w.f[15](t.streams[e].input.codecpar)?(await this.AudioEncoderThread.unregisterTask(t.streams[e].taskId),await this.AudioFilterThread.unregisterTask(t.streams[e].taskId),await this.AudioDecoderThread.unregisterTask(t.streams[e].taskId)):0===w.f[15](t.streams[e].input.codecpar)&&(await this.VideoEncoderThread.unregisterTask(t.streams[e].taskId),await this.VideoFilterThread.unregisterTask(t.streams[e].taskId),await this.VideoDecoderThread.unregisterTask(t.streams[e].taskId))),t.streams[e].output&&this.freeAVStreamInterface(t.streams[e].output);this.DemuxerThread.unregisterTask(t.taskId),t.subTaskId&&this.DemuxerThread.unregisterTask(t.subTaskId),this.IOThread.unregisterTask(t.taskId),t.inputIPCPort&&t.inputIPCPort.destroy(),t.outputIPCPort&&t.outputIPCPort.destroy(),t.safeFileIO&&t.safeFileIO.destroy(),t.stats&&(0,x.A)(t.stats),this.tasks.delete(t.taskId),this.tasks.size||this.reportTimer.stop()}async addTask(t){var e,r;null!==(e=t.output.audio)&&void 0!==e&&e.disable&&null!==(r=t.output.video)&&void 0!==r&&r.disable&&R.h2("audio and video are all disable",Et,2034);const s=(0,B.A)(),i={taskId:s,startTime:0,options:t,ioloader2DemuxerChannel:null,muxer2OutputChannel:null,stats:(0,A.A)(_.A),iformat:-1,oformat:-1,streams:[],formatContext:null,controller:new mt.A(this)};try{var n,a,c;let t=0;await this.setTaskInput(i),await this.setTaskOutput(i);const e=i.formatContext=await this.analyzeInputStreams(i);if(await this.MuxThread.addFormatContextMetadata(i.taskId,U.X$({},null!==(n=i.options.output.metadata)&&void 0!==n?n:{},e.metadata)),e.chapters.length||null!==(a=i.options.output.chapters)&&void 0!==a&&a.length){var u;const t=[];e.chapters.length&&t.push(...e.chapters),null!==(u=i.options.output.chapters)&&void 0!==u&&u.length&&t.push(...i.options.output.chapters),await this.MuxThread.addFormatContextChapters(i.taskId,t)}i.iformat=e.format;for(let r=0;r<e.streams.length;r++){const s=w.f[15](e.streams[r].codecpar);t=1===s?await this.handleAudioStream(e.streams[r],i):0!==s||1024&e.streams[r].disposition?await this.handleCopyStream(e.streams[r],i):await this.handleVideoStream(e.streams[r],i),t<0&&R.h2(`config transcode error, ret: ${t}`,Et,2093)}const r={streams:[],format:i.oformat,metadata:{},chapters:[],streamGroups:[]};let h="Mapping:\n";return o()(c=i.streams).call(c,(t=>{t.output?(r.streams.push(t.output),h+=`  Stream #0:${t.input.index} -> #0:${t.output.index} (${(0,gt.eG)(w.f[15](t.input.codecpar),w.f[15](t.input.codecpar+4))} -> ${(0,gt.eG)(w.f[15](t.output.codecpar),w.f[15](t.output.codecpar+4))})\n`):(r.streams.push(t.input),h+=`  Stream #0:${t.input.index} -> #0:${t.input.index} (${(0,gt.eG)(w.f[15](t.input.codecpar),w.f[15](t.input.codecpar+4))} -> copy)\n`)})),R.pq("\nAVTranscoder version v0.6.1-355-g72ba4aa7 Copyright (c) 2024-present the libmedia developers\n"+(0,gt.Ay)([e],[{from:C.Yj(i.options.input.file)?i.options.input.file:i.options.input.file instanceof File?i.options.input.file.name:"ioReader",tag:"Input"}])+"\n"+h+"\n"+(0,gt.Ay)([r],[{from:i.options.output.file instanceof FileSystemFileHandle?i.options.output.file.name:"IOWriter",tag:"Output"}]),Et,2119),this.tasks.set(s,i),s}catch(t){throw await this.clearTask(i),t}}async startTask(t){const e=this.tasks.get(t);if(e){e.options.start&&await this.DemuxerThread.seek(e.taskId,BigInt(Math.floor(e.options.start)),16);let r=0;await this.DemuxerThread.startDemux(t,!1,10),r=await this.MuxThread.open(t),r<0&&(await this.clearTask(e),R.h2(`start transcode error, ret ${r}`,Et,2153));const s=e.streams;for(let t=0;t<s.length;t++){if(!s[t].output)continue;let r,i=!1;if(1===w.f[15](s[t].output.codecpar))r=await this.AudioEncoderThread.getExtraData(s[t].taskId);else if(0===w.f[15](s[t].output.codecpar)){r=await this.VideoEncoderThread.getExtraData(s[t].taskId);const e=await this.VideoEncoderThread.getColorSpace(s[t].taskId);e&&(y.M[15](s[t].output.codecpar+96,e.colorSpace),y.M[15](s[t].output.codecpar+88,e.colorPrimaries),y.M[15](s[t].output.codecpar+92,e.colorTrc),i=!0)}if(!r){const e=w.f[15](s[t].output.codecpar+4);86018===e?r=rt.Ij((0,k.A)(s[t].output.codecpar,I.A)):86076===e&&(r=st.Ij((0,k.A)(s[t].output.codecpar,I.A)))}if(r){const e=(0,Y.sY)(r.length);(0,z.lW)(e,r.length,r),w.f[20](s[t].output.codecpar+12)&&(0,Y.Eb)(w.f[20](s[t].output.codecpar+12)),y.M[20](s[t].output.codecpar+12,e),y.M[15](s[t].output.codecpar+16,r.length),i=!0}i&&await this.MuxThread.updateAVCodecParameters(e.taskId,s[t].output.id,s[t].output.codecpar)}r=await this.MuxThread.start(t),r<0&&(await this.clearTask(e),R.h2(`start transcode error, ret ${r}`,Et,2206)),e.startTime=(0,lt.A)(),this.reportTimer.isStarted()||this.reportTimer.start()}else R.h2(`task ${t} not found`,Et,2215)}async pauseTask(t){this.tasks.get(t)?await this.MuxThread.pause(t):R.h2(`task ${t} not found`,Et,2225)}async unpauseTask(t){this.tasks.get(t)?await this.MuxThread.unpause(t):R.h2(`task ${t} not found`,Et,2235)}async cancelTask(t){const e=this.tasks.get(t);e?(await this.MuxThread.unpause(t),await this.clearTask(e)):R.h2(`task ${t} not found`,Et,2246)}async destroy(){this.MuxThread&&(await this.MuxThread.clear(),(0,T.nE)(this.MuxThread)),this.AudioEncoderThread&&(await this.AudioEncoderThread.clear(),(0,T.nE)(this.AudioEncoderThread)),this.AudioFilterThread&&(await this.AudioFilterThread.clear(),(0,T.nE)(this.AudioFilterThread)),this.AudioDecoderThread&&(await this.AudioDecoderThread.clear(),(0,T.nE)(this.AudioDecoderThread)),this.VideoEncoderThread&&(await this.VideoEncoderThread.clear(),(0,T.nE)(this.VideoEncoderThread)),this.VideoFilterThread&&(await this.VideoFilterThread.clear(),(0,T.nE)(this.VideoFilterThread)),this.VideoDecoderThread&&(await this.VideoDecoderThread.clear(),(0,T.nE)(this.VideoDecoderThread)),this.DemuxerThread&&(await this.DemuxerThread.clear(),(0,T.nE)(this.DemuxerThread)),this.IOThread&&(await this.IOThread.clear(),(0,T.nE)(this.IOThread)),this.VideoEncoderThread=null,this.VideoFilterThread=null,this.VideoDecoderThread=null,this.AudioEncoderThread=null,this.AudioFilterThread=null,this.AudioDecoderThread=null,this.DemuxerThread=null,this.IOThread=null,this.MuxThread=null,this.GlobalData&&(this.GlobalData.avframeList.clear((t=>{(0,tt.to)(t)}),20),this.GlobalData.avpacketList.clear((t=>{(0,et.Up)(t)}),20),v.zr(this.GlobalData[p.o9]+24),v.zr(this.GlobalData[p.o9]+28),(0,x.A)(this.GlobalData),this.GlobalData=null),R.pq("AVTranscoder pipelines stopped",Et,2313)}setLogLevel(t){this.level=t,R.V$(t),this.IOThread&&this.IOThread.setLogLevel(t),this.DemuxerThread&&this.DemuxerThread.setLogLevel(t),this.AudioDecoderThread&&this.AudioDecoderThread.setLogLevel(t),this.AudioFilterThread&&this.AudioFilterThread.setLogLevel(t),this.AudioEncoderThread&&this.AudioEncoderThread.setLogLevel(t),this.VideoDecoderThread&&this.VideoDecoderThread.setLogLevel(t),this.VideoFilterThread&&this.VideoFilterThread.setLogLevel(t),this.VideoEncoderThread&&this.VideoEncoderThread.setLogLevel(t),this.MuxThread&&this.MuxThread.setLogLevel(t),R.pq(`set log level: ${t}`,Et,2349)}async onGetDecoderResource(t,e){return this.getResource("decoder",e,t)}}(0,s.A)(Dt,"Util",{compile:D.A,browser:$.A,os:vt.A}),(0,s.A)(Dt,"IOLoader",{CustomIOLoader:wt.A,FetchIOLoader:yt.A,FileIOLoader:bt.A}),(0,s.A)(Dt,"Resource",new(n()))},10922:(t,e,r)=>{"use strict";r.d(e,{A:()=>a});var s=r(49859),i=r(84149),n=r(79283);class a{constructor(t){(0,s.A)(this,"demuxerControlChannel",void 0),(0,s.A)(this,"demuxerControlIPCPort",void 0),(0,s.A)(this,"observer",void 0),this.observer=t,this.demuxerControlChannel=(0,n.A)(),this.demuxerControlIPCPort=new i.Ay(this.demuxerControlChannel.port2),this.demuxerControlIPCPort.on(i.S3,(async t=>{"getDecoderResource"===t.method&&this.demuxerControlIPCPort.reply(t,await this.observer.onGetDecoderResource(t.params.mediaType,t.params.codecId))}))}getDemuxerRenderControlPort(){return this.demuxerControlChannel.port1}destroy(){this.demuxerControlIPCPort&&this.demuxerControlIPCPort.destroy(),this.demuxerControlChannel=null}}},62636:(t,e,r)=>{"use strict";r.d(e,{L:()=>i,X:()=>s});const s="task-ended",i="task-error"},38656:(t,e,r)=>{"use strict";r.d(e,{A:()=>m});var s=r(71426),i=r.n(s),n=r(96319),a=r.n(n),o=r(12264),c=r(29170),u=r(16041),h=r(9705),d=r(44527),l=r(2849),f=r(88496),p=r(2579);class m extends d.A{constructor(){super()}async createTask(t){const e=new u.A((0,c.A)(t.avframeList,o.A),t.avframeListMutex),r=(0,l.T$)(t.graph,e);if(!(0,l.iT)(r,t.inputPorts,t.outputPorts))return h.lh;const s=[],n=[];for(let e=0;e<t.inputPorts.length;e++){var d;const n=new f.A(t.inputPorts[e].port);s.push(n);const o=i()(d=r.inputs).call(d,(r=>r.id===t.inputPorts[e].id));n.connect(a()(o))}for(let e=0;e<t.outputPorts.length;e++){var m;const s=new p.A(t.outputPorts[e].port);n.push(s);const o=i()(m=r.outputs).call(m,(r=>r.id===t.outputPorts[e].id));a()(o).connect(s)}for(let t=0;t<r.vertices.length;t++)await a()(r.vertices[t]).ready();return this.tasks.set(t.taskId,{...t,filterGraph:r,inputNodes:s,outputNodes:n,avframePool:e}),0}async registerTask(t){return this.tasks.has(t.taskId)?h.lh:this.createTask(t)}async unregisterTask(t){const e=this.tasks.get(t);if(e){for(let t=0;t<e.filterGraph.vertices.length;t++)a()(e.filterGraph.vertices[t]).disconnect(),await a()(e.filterGraph.vertices[t]).destroy();this.tasks.delete(t)}}}},79283:(t,e,r)=>{"use strict";r.d(e,{A:()=>n});var s=r(26429),i=r(42577);function n(){return s.USE_THREADS?new MessageChannel:new i.A}},68960:(t,e,r)=>{"use strict";r.d(e,{Ay:()=>l,Tr:()=>p,de:()=>f});var s=r(49859),i=r(74707),n=r.n(i),a=r(77162),o=r(74503),c=r(9599),u=r(94300),h=r(77231),d=r(71517);class l{constructor(){(0,s.A)(this,"index",h.N_),(0,s.A)(this,"id",h.N_),(0,s.A)(this,"privData",null),(0,s.A)(this,"privateData2",null),(0,s.A)(this,"codecpar",(0,o.A)(new a.A,a.A)),(0,s.A)(this,"sideData",{}),(0,s.A)(this,"nbFrames",BigInt(0)),(0,s.A)(this,"metadata",{}),(0,s.A)(this,"duration",h.Dh),(0,s.A)(this,"startTime",h.Dh),(0,s.A)(this,"firstDTS",h.Dh),(0,s.A)(this,"disposition",0),(0,s.A)(this,"discard",-16),(0,s.A)(this,"timeBase",(0,o.A)(c.P)),(0,s.A)(this,"sampleIndexes",[]),(0,s.A)(this,"sampleIndexesPosMap",new(n())),(0,s.A)(this,"attachedPic",0)}destroy(){this.codecpar&&(this.codecpar.destroy(),(0,u.A)(this.codecpar),this.codecpar=null),this.timeBase&&((0,u.A)(this.timeBase),this.timeBase=null),this.attachedPic&&((0,d.Qe)(this.attachedPic),this.attachedPic=0),this.sampleIndexes.length=0,this.sampleIndexesPosMap.clear()}}class f{constructor(){(0,s.A)(this,"codedWidth",0),(0,s.A)(this,"codedHeight",0),(0,s.A)(this,"offsets",[]),(0,s.A)(this,"background",null),(0,s.A)(this,"horizontalOffset",h.N_),(0,s.A)(this,"verticalOffset",h.N_),(0,s.A)(this,"width",0),(0,s.A)(this,"height",0),(0,s.A)(this,"sideData",{})}}class p{constructor(){(0,s.A)(this,"privData",null),(0,s.A)(this,"index",h.N_),(0,s.A)(this,"id",h.N_),(0,s.A)(this,"type",0),(0,s.A)(this,"params",null),(0,s.A)(this,"metadata",{}),(0,s.A)(this,"streams",[]),(0,s.A)(this,"disposition",0)}destroy(){this.streams.length=0,this.params=null}}},95832:(t,e,r)=>{"use strict";r.d(e,{Bq:()=>l,En:()=>c,Hm:()=>a,Ij:()=>d,XC:()=>h,_5:()=>u,f7:()=>f,hY:()=>o,uF:()=>n});var s=r(77231),i=r(37246);const n={1:"Main",2:"LC",3:"SSR",4:"LTP",5:"HE",6:"SCALABLE",29:"HEv2",23:"LD",39:"ELD"},a={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12},o=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350,s.N_,s.N_,s.N_],c=[s.N_,1,2,3,4,5,6,7];function u(t){let e=s.N_,r=s.N_,i=s.N_;return t.length>=2&&(e=t[0]>>3&31,r=o[(7&t[0])<<1|t[1]>>7],i=c[t[1]>>3&15]),{profile:e,sampleRate:r,channels:i}}function h(t,e){if(!e&&t.sideData[1]&&(e=t.sideData[1]),e){const{profile:r,sampleRate:s,channels:i}=u(e);t.codecpar.profile=r,t.codecpar.sampleRate=s,t.codecpar.chLayout.nbChannels=i,t.codecpar.frameSize=5===r?2048:1024,t.codecpar.format=8}}function d(t){const e=a[t.sampleRate],r=t.chLayout.nbChannels,i=t.profile===s.N_?2:t.profile,n=new Uint8Array(2);return n[0]=(31&i)<<3|(14&e)>>1,n[1]=(1&e)<<7|(15&r)<<3,n}function l(t){if(t.length<7)return-1;const e=t[0]<<4|t[1]>>4;if(4095!==e)return-1;const r=1&t[1],s=(192&t[2])>>>6,i=(60&t[2])>>>2,n=(1&t[2])<<2|(192&t[3])>>>6,a=(3&t[3])<<11|t[4]<<3|(224&t[5])>>>5,u=3&t[6];let h=1===r?7:9,d=a-h;return{syncWord:e,profile:s+1,sampleRate:o[i],channels:c[n],aacFrameLength:a,numberOfRawDataBlocksInFrame:u,headerLength:h,framePayloadLength:d}}function f(t,e){function r(){const t=e.readU(2);let r=0;for(let s=0;s<=t;s++)r<<=8,r|=e.readU(8);return r}e||(e=new i.A).appendBuffer(t);const s=e.getPointer(),n={syncWord:0,profile:0,sampleRate:0,channels:0,useSameStreamMux:!1,headerLength:0,framePayloadLength:0,muxLengthBytes:0},a=e.readU(11);if(695!==a)return-1;n.syncWord=a,n.muxLengthBytes=e.readU(13);const u=1===e.readU1();if(n.useSameStreamMux=u,!u){const t=1===e.readU1();if(t&&1===e.readU1())return-1;if(t&&r(),1!==e.readU1())return-1;if(0!==e.readU(6))return-1;if(0!==e.readU(4))return-1;if(0!==e.readU(3))return-1;let s=t?r():0;const i=e.readU(5);s-=5;const a=e.readU(4);s-=4;const u=e.readU(4);if(s-=4,e.readU(3),s-=3,s>0&&e.readU(s),0!==e.readU(3))return-1;if(e.readU(8),1===e.readU1())if(t)r();else{let t=0;for(;;){t<<=8;const r=1===e.readU1();if(t+=e.readU(8),!r)break}}1===e.readU1()&&e.readU(8),n.profile=i+1,n.sampleRate=o[a],n.channels=c[u]}let h=0;for(;;){const t=e.readU(8);if(h+=t,255!==t)break}return n.framePayloadLength=h,n.headerLength=e.getPointer()-s+(8===e.getBitLeft()?0:1),n}},21477:(t,e,r)=>{"use strict";r.d(e,{Ui:()=>m,XC:()=>p,Yj:()=>g,k9:()=>f,zk:()=>h});var s=r(71426),i=r.n(s),n=r(63939),a=r(37246),o=r(11573),c=r(83314),u=r(97317);const h={0:"Main",1:"High",2:"Professional"},d=[{level:20,maxResolution:2359296},{level:21,maxResolution:4460544},{level:30,maxResolution:10653696},{level:31,maxResolution:17040384},{level:40,maxResolution:21233664},{level:41,maxResolution:21233664},{level:50,maxResolution:35651584},{level:51,maxResolution:35651584},{level:52,maxResolution:35651584},{level:53,maxResolution:35651584},{level:60,maxResolution:142606336},{level:61,maxResolution:142606336},{level:62,maxResolution:142606336},{level:63,maxResolution:142606336}],l=[20,21,22,23,30,31,32,33,40,41,42,43,50,51,52,53,60,61,62,63,70,71,72,73];function f(t,e,r){const s=t*e;for(const t of d)if(s<=t.maxResolution)return t.level}function p(t,e){if(!e&&t.sideData[1]&&(e=t.sideData[1]),e&&e.length>=4){const r=m(e);t.codecpar.profile=r.profile,t.codecpar.level=r.level}}function m(t){const e=new a.A(t.length);e.appendBuffer(t),e.readU1(),e.readU(7);const r=e.readU(3),s=e.readU(5),i=e.readU1();let n=e.readU1()?10:8;return e.readU1()&&(n=12),{profile:r,level:s,tier:i,bitDepth:n,monochrome:e.readU1(),chromaSubsamplingX:e.readU1(),chromaSubsamplingY:e.readU1(),chromaSamplePosition:e.readU(2)}}function g(t,e){var r;const s=new c.A(4);s.writeU1(1),s.writeU(7,1);const h=i()(r=function(t){const e=new a.A;e.appendBuffer(t);const r=[];for(;e.remainingLength();){const s=e.getPointer();e.readU1(),e.readU(4);const i=e.readU1(),n=e.readU1();e.readU1(),i&&e.readU(8);const a=n?o.v(e):t.length-1-i,c=e.getPointer()-s;r.push(t.subarray(s,s+c+a)),e.skip(8*a)}return r}(e)).call(r,(t=>1==(t[0]>>>3&15)));if(h){const t=function(t){const e=new a.A(t.length);e.appendBuffer(t),e.readU1(),e.readU(4);const r=e.readU1(),s=e.readU1();e.readU1(),r&&e.readU(8),s&&o.v(e);const i=o.f(e,3),n=(o.f(e,1),o.f(e,1));let c=0,u=0,h=[0],d=[0],f=[0],p=[0],m=[0],g=[0],v=0,A=[0],w=[0],y=[0];if(n)d[0]=o.f(e,5);else{c=o.f(e,1),c?(o.f(e,32),o.f(e,32),o.f(e,1)&&o.d(e),o.f(e,1)&&(v=o.f(e,5),o.f(e,32),o.f(e,5),o.f(e,5))):u=0;let t=o.f(e,1),r=o.f(e,5);for(let s=0;s<=r;s++){if(h[s]=o.f(e,12),d[s]=o.f(e,5),d[s]>7?f[s]=o.f(e,1):f[s]=0,u){if(p[s]=o.f(e,1),p[s]){let t=v+1;A[s]=o.f(e,t),w[s]=o.f(e,t),y[s]=o.f(e,1)}}else p[s]=0;t&&(m[s]=o.f(e,1),m[s]&&(g[s]=o.f(e,4)))}}let b=o.f(e,4),k=o.f(e,4),x=b+1,_=o.f(e,x);x=k+1;let I=o.f(e,x),P=0,M=0,S=0;P=n?0:o.f(e,1),P&&(o.f(e,4),o.f(e,3)),o.f(e,1),o.f(e,1),o.f(e,1);let E=0,T=0,B=0,C=0,U=0,D=0,R=2,L=2,$=0;n||(o.f(e,1),o.f(e,1),o.f(e,1),o.f(e,1),C=o.f(e,1),C?(U=o.f(e,1),D=o.f(e,1)):(U=0,D=0),R=o.f(e,1)?2:o.f(e,1),R>0?o.f(e,1)?2:o.f(e,1):2,C&&o.f(e,3)),o.f(e,1),o.f(e,1),o.f(e,1);let O=o.f(e,1),F=0,z=0,N=0;2==i&&O?(F=o.f(e,1),z=F?12:10):i<=2&&(z=O?10:8),N=1==i?0:o.f(e,1);let V=0,W=0,j=0;o.f(e,1)?(V=o.f(e,8),W=o.f(e,8),j=o.f(e,8)):(V=2,W=2,j=2);let H=0,G=0,Q=0,q=0,Y=0;return N?(H=o.f(e,1),G=1,Q=1,q=0,Y=0):1==V&&13==W&&0==j?(H=1,G=0,Q=0,Y=o.f(e,1)):(H=o.f(e,1),0==i?(G=1,Q=1):1==i?(G=0,Q=0):12==z?(G=o.f(e,1),Q=G?o.f(e,1):0):(G=1,Q=0),G&&Q&&(q=o.f(e,2)),Y=o.f(e,1)),o.f(e,1),{width:_+1,height:I+1,profile:i,level:l[d[0]],tier:f[0],bitDepth:z,monoChrome:N,colorRange:H,colorPrimaries:V,transferCharacteristics:W,matrixCoefficients:j,subsamplingX:G,subsamplingY:Q,chromaSamplePosition:q}}(h);s.writeU(3,t.profile),s.writeU(5,t.level),s.writeU(1,t.tier),s.writeU(1,t.bitDepth>8?1:0),s.writeU(1,12===t.bitDepth?1:0),s.writeU(1,t.monoChrome),s.writeU(1,t.subsamplingX),s.writeU(1,t.subsamplingY),s.writeU(1,t.chromaSamplePosition)}else{const e=(0,u.I)(n.f[15](t+28));s.writeU(3,n.f[15](t+48)),s.writeU(5,n.f[15](t+52)),s.writeU(1,0),s.writeU(1,e.comp[0].depth>8?1:0),s.writeU(1,12===e.comp[0].depth?1:0),s.writeU(1,0),s.writeU(1,1),s.writeU(1,1),s.writeU(1,0)}return s.writeU(8,0),s.padding(),s.getBuffer()}},62815:(t,e,r)=>{"use strict";r.d(e,{KD:()=>V,MB:()=>U,OD:()=>z,S1:()=>R,XC:()=>N,k9:()=>C,kM:()=>F,oT:()=>$,sL:()=>L,tZ:()=>T,wA:()=>O,wf:()=>W});var s=r(18979),i=r.n(s),n=r(73363),a=r.n(n),o=r(86226),c=r.n(o),u=r(96319),h=r.n(u),d=r(11393),l=r.n(d),f=r(31721),p=r.n(f),m=r(63939),g=r(72739),v=r(729),A=r(31865),w=r(37246),y=r(4624),b=r(14686),k=r(60264),x=r(37837),_=r(23991),I=r(39381),P=r(82774);const M="src/avutil/codecs/h264.ts",S=16,E=3,T={66:"Constrained Baseline",77:"Main",100:"High",110:"High10",122:"High422",244:"High444"},B=[{level:10,maxResolution:25344,maxFrameRate:15},{level:11,maxResolution:25344,maxFrameRate:30},{level:12,maxResolution:101376,maxFrameRate:30},{level:13,maxResolution:101376,maxFrameRate:30},{level:20,maxResolution:101376,maxFrameRate:30},{level:21,maxResolution:202752,maxFrameRate:30},{level:22,maxResolution:414720,maxFrameRate:30},{level:30,maxResolution:414720,maxFrameRate:30},{level:31,maxResolution:921600,maxFrameRate:30},{level:32,maxResolution:1310720,maxFrameRate:60},{level:40,maxResolution:2097152,maxFrameRate:30},{level:41,maxResolution:2097152,maxFrameRate:60},{level:42,maxResolution:2228224,maxFrameRate:60},{level:50,maxResolution:8912896,maxFrameRate:30},{level:51,maxResolution:8912896,maxFrameRate:60},{level:52,maxResolution:8912896,maxFrameRate:120},{level:60,maxResolution:35651584,maxFrameRate:30},{level:61,maxResolution:35651584,maxFrameRate:60},{level:62,maxResolution:35651584,maxFrameRate:120}];function C(t,e,r){const s=t*e;for(const t of B)if(s<=t.maxResolution&&r<=t.maxFrameRate)return t.level}function U(t){const e=new A.A(t);e.skip(5);const r=[],s=[],i=[],n=31&e.readUint8();for(let t=0;t<n;t++){const t=e.readUint16();r.push(e.readBuffer(t))}const a=e.readUint8();for(let t=0;t<a;t++){const t=e.readUint16();s.push(e.readBuffer(t))}if(e.remainingSize()>4){e.skip(3);const t=e.readUint8();if(t>0)for(let r=0;r<t;r++){const t=e.readUint16();i.push(e.readBuffer(t))}}return{spss:r,ppss:s,spsExts:i}}function D(t,e,r=[]){t.length>32&&(y.R8(`h264 metadata's sps max length is 32, but get ${t.length}`,M,218),t=i()(t).call(t,0,32)),t.length>256&&(y.R8(`h264 metadata's pps max length is 256, but get ${t.length}`,M,222),t=i()(t).call(t,0,256));let s=7;s=a()(t).call(t,((t,e)=>t+2+e.length),s),s=a()(e).call(e,((t,e)=>t+2+e.length),s);const n=t[0],o=W(n);66!==o.profile&&77!==o.profile&&88!==o.profile&&(s+=4,r.length&&(s=a()(r).call(r,((t,e)=>t+2+e.length),s)));const c=new Uint8Array(s),u=new v.A(c);return u.writeUint8(1),u.writeUint8(n[1]),u.writeUint8(n[2]),u.writeUint8(n[3]),u.writeUint8(252|E),u.writeUint8(224|31&t.length),g.__(t,(t=>{u.writeUint16(t.length),u.writeBuffer(t)})),u.writeUint8(e.length),g.__(e,(t=>{u.writeUint16(t.length),u.writeBuffer(t)})),66!==o.profile&&77!==o.profile&&88!==o.profile&&(u.writeUint8(252|o.chromaFormatIdc),u.writeUint8(248|o.bitDepthLumaMinus8),u.writeUint8(248|o.bitDepthChromaMinus8),r.length&&g.__(r,(t=>{u.writeUint16(t.length),u.writeBuffer(t)}))),c}function R(t){let e=k.py(t);if(e.length>1){const t=[],r=[],s=[];if(c()(e).call(e,(e=>{const i=31&e[0];7===i?t.push(e):8===i?r.push(e):13===i&&s.push(e)})),t.length&&r.length)return D(t,r,s)}}function L(t){let e=k.py(t);if(e.length>1){const t=[],r=[],s=[];if(c()(e).call(e,(e=>{const i=31&e[0];7===i?t.push(e):8===i?r.push(e):13===i&&s.push(e)})),t.length&&r.length){const e=[t[0],r[0]];return s.length&&e.push(s[0]),k.nW(e,0)}}}function $(t,e=!1){let r,s=k.py(t),i=!1;if(s.length){const t=[],n=[],a=[];c()(s).call(s,(e=>{const r=31&e[0];7===r?t.push(e):8===r?n.push(e):13===r?a.push(e):5===r&&(i=!0)})),t.length&&n.length?(r=D(t,n,a),s=h()(s).call(s,(t=>{const r=31&t[0];return e?9!==r:9!==r&&8!==r&&7!==r&&13!==r}))):s=h()(s).call(s,(t=>9!=(31&t[0])))}const n=a()(s).call(s,((t,e)=>t+E+1+e.length),0),o=(0,x.sY)(n),u=(0,b.s3)(o,n);return k.S9(s,E,u),{bufferPointer:o,length:n,key:i,extradata:r}}function O(t,e,r,s,i){const n=[k.Le(s,0),k.Le(t,0),k.Le(e,0),k.Le(r,0),k.Le(i,2)];let o=a()(n).call(n,((t,e)=>t+e),0);const c=(0,x.sY)(o+6);let u=c;return P.w8((u+=1,u-1),0),P.w8((u+=1,u-1),0),P.w8((u+=1,u-1),0),P.w8((u+=1,u-1),1),P.w8((u+=1,u-1),9),P.w8((u+=1,u-1),240),s.length&&(k.nW(s,0,(0,b.s3)(u,n[0])),u+=n[0]),t.length&&(k.nW(t,0,(0,b.s3)(u,n[1])),u+=n[1]),e.length&&(k.nW(e,0,(0,b.s3)(u,n[2])),u+=n[2]),r.length&&(k.nW(r,0,(0,b.s3)(u,n[3])),u+=n[3]),i.length&&k.nW(i,2,(0,b.s3)(u,n[4])),{bufferPointer:c,length:o+6}}function F(t,e){var r;let s=l()(r=k.py(t)).call(r,k.py(e));if(s.length){const t=[],e=[],r=[],i=[],n=[];return c()(s).call(s,(s=>{const a=31&s[0];7===a?t.push(s):8===a?e.push(s):13===a?r.push(s):6===a?i.push(s):9!==a&&n.push(s)})),O(t,e,r,i,n)}}function z(t,e,r=E){e&&(r=3&e[4]);let s=[],i=[],n=[],a=!1;if(e){const t=U(e);s=t.spss,i=t.ppss,n=t.spsExts,a=!0}const o=[],u=[],h=k.wN(t,r);return c()(h).call(h,(t=>{const e=31&t[0];6===e?u.push(t):7!==e||s.length?8!==e||i.length?9!==e&&o.push(t):i.push(t):s.push(t),5===e&&(a=!0)})),{...O(s,i,n,u,o),key:a}}function N(t,e){let r;if(!e&&t.sideData[1]&&(e=t.sideData[1]),e&&k.Bs(e))g.__(k.py(e),(t=>{if(7==(31&t[0]))return r=t,!1}));else if(e&&e.length>=6){const{spss:t}=U(e);t.length&&(r=t[0])}if(r){const{profile:e,level:s,width:i,height:n,videoDelay:a,chromaFormatIdc:o,bitDepthLumaMinus8:c}=W(r);switch(t.codecpar.profile=e,t.codecpar.level=s,t.codecpar.width=i,t.codecpar.height=n,t.codecpar.videoDelay=a,c){case 0:t.codecpar.format=3===o?5:2===o?4:0;break;case 1:t.codecpar.format=3===o?66:2===o?70:60;break;case 2:t.codecpar.format=3===o?68:2===o?64:62}}}function V(t,e=4){if(64&m.f[15](t+36)){let e=k.py((0,b.s3)(m.f[20](t+24),m.f[15](t+28)));return p()(e).call(e,(t=>5==(31&t[0])))}{const r=m.f[15](t+28);let s=0;for(;s<r-e;){if(5==(31&I.r8(m.f[20](t+24)+(s+e))))return!0;s+=4===e?I.Sg(m.f[20](t+24)+s):3===e?I.ht(m.f[20](t+24)+s):2===e?I.yd(m.f[20](t+24)+s):I.r8(m.f[20](t+24)+s),s+=e}return!1}}function W(t){if(!t||t.length<3)return;let e=0;0===t[0]&&0===t[1]&&0===t[2]&&1===t[3]&&(e=4);const r=k.BN(t.subarray(e)),s=new w.A(r.length);s.appendBuffer(r),s.readU1(),s.readU(2),s.readU(5);const i=s.readU(8);s.readU1(),s.readU1(),s.readU1(),s.readU1(),s.readU1(),s.readU1(),s.readU(2);const n=s.readU(8);_.xb(s);let a=1,o=0,c=0;if(100==i||110==i||122==i||244==i||44==i||83==i||86==i||118==i||128==i||138==i||139==i||134==i||135==i){function b(t){let e,r=8,i=8;for(let n=0;n<t;n++)0!==i&&(e=_.$x(s),i=(r+e+256)%256),r=0===i?r:i}if(a=_.xb(s),3===a&&s.readU1(),o=_.xb(s),c=_.xb(s),s.readU1(),s.readU1()){const x=new Array(8);for(let I=0;I<(3!=a?8:12);I++)x[I]=s.readU1(),x[I]&&b(I<6?16:64)}}const u=_.xb(s),h=_.xb(s);let d=0,l=0;if(0===h)d=_.xb(s);else if(1===h){l=s.readU1(),_.$x(s),_.$x(s);const P=_.xb(s);for(let M=0;M<P;M++)_.$x(s)}_.xb(s),s.readU1();const f=_.xb(s),p=_.xb(s),m=s.readU1();let g=16*(f+1),v=(2-m)*(p+1)*16;m||s.readU1(),s.readU1();const A=s.readU1();if(A){let E=1,T=2-A;1===a?(E=2,T=2*(2-A)):2===A&&(E=2,T=2-A),g-=E*(_.xb(s)+_.xb(s)),v-=T*(_.xb(s)+_.xb(s))}let y=0;if(s.readU1()){let B=s.readU1();function C(){const t=_.xb(s)+1;s.readU(4),s.readU(4);for(let e=0;e<t;e++)_.xb(s),_.xb(s),s.readU1();s.readU(5),s.readU(5),s.readU(5),s.readU(5)}B&&s.readU(8)>=17&&(s.readU(16),s.readU(16)),B=s.readU1(),B&&s.readU1(),B=s.readU1(),B&&(s.readU(3),s.readU1(),B=s.readU1(),B&&(s.readU(8),s.readU(8),s.readU(8))),B=s.readU1(),B&&(_.xb(s),_.xb(s)),B=s.readU1(),B&&(s.readU(32),s.readU(32),s.readU1());let U=s.readU1();U&&C();let D=s.readU1();D&&C(),(U||D)&&s.readU1(),s.readU1(),B=s.readU1(),B&&(s.readU1(),_.xb(s),_.xb(s),_.xb(s),_.xb(s),y=Math.min(_.xb(s),S))}return{profile:i,level:n,width:g,height:v,chromaFormatIdc:a,bitDepthLumaMinus8:o,bitDepthChromaMinus8:c,frameMbsOnlyFlag:m,picOrderCntType:h,log2MaxPicOrderCntLsbMinus4:d,deltaPicOrderAlwaysZeroFlag:l,log2MaxFrameNumMinus4:u,videoDelay:y}}},67659:(t,e,r)=>{"use strict";r.d(e,{HL:()=>E,KD:()=>O,OD:()=>L,S1:()=>B,XC:()=>$,ZU:()=>z,dT:()=>I,k9:()=>M,kM:()=>R,oT:()=>U,sL:()=>C,wA:()=>D,wf:()=>F});var s=r(73363),i=r.n(s),n=r(86226),a=r.n(n),o=r(96319),c=r.n(o),u=r(11393),h=r.n(u),d=r(31721),l=r.n(d),f=r(63939),p=r(72739),m=r(729),g=r(31865),v=r(37246),A=r(14686),w=r(60264),y=r(37837),b=r(23991),k=r(39381),x=r(82774);const _=16,I={1:"Main",2:"Main10",3:"MainStillPicture",4:"Main444"},P=[{level:10,maxLumaSamplesPerSecond:552960,maxLumaPictureSize:36864,maxBitRate:{main:128,main10:150}},{level:20,maxLumaSamplesPerSecond:3686400,maxLumaPictureSize:122880,maxBitRate:{main:1500,main10:1875}},{level:21,maxLumaSamplesPerSecond:7372800,maxLumaPictureSize:245760,maxBitRate:{main:3e3,main10:3750}},{level:30,maxLumaSamplesPerSecond:16588800,maxLumaPictureSize:552960,maxBitRate:{main:6e3,main10:7500}},{level:31,maxLumaSamplesPerSecond:33177600,maxLumaPictureSize:983040,maxBitRate:{main:1e4,main10:12500}},{level:40,maxLumaSamplesPerSecond:66846720,maxLumaPictureSize:2228224,maxBitRate:{main:12e3,main10:15e3}},{level:41,maxLumaSamplesPerSecond:133693440,maxLumaPictureSize:2228224,maxBitRate:{main:2e4,main10:25e3}},{level:50,maxLumaSamplesPerSecond:267386880,maxLumaPictureSize:8912896,maxBitRate:{main:25e3,main10:4e4}},{level:51,maxLumaSamplesPerSecond:534773760,maxLumaPictureSize:8912896,maxBitRate:{main:4e4,main10:6e4}},{level:52,maxLumaSamplesPerSecond:1069547520,maxLumaPictureSize:35651584,maxBitRate:{main:6e4,main10:1e5}},{level:60,maxLumaSamplesPerSecond:1069547520,maxLumaPictureSize:35651584,maxBitRate:{main:6e4,main10:1e5}},{level:61,maxLumaSamplesPerSecond:2139095040,maxLumaPictureSize:89128960,maxBitRate:{main:12e4,main10:24e4}},{level:62,maxLumaSamplesPerSecond:4278190080,maxLumaPictureSize:356515840,maxBitRate:{main:24e4,main10:48e4}}];function M(t,e,r,s,i){i/=1e3;const n=1===t?"main":"main10",a=e*r*s;for(const t of P)if(a<=t.maxLumaSamplesPerSecond&&e*r<=t.maxLumaPictureSize&&i<=t.maxBitRate[n])return t.level}const S=3;function E(t){const e=new g.A(t,!0);e.skip(22);let r=[],s=[],i=[];const n=e.readUint8();for(let t=0;t<n;t++){const t=63&e.readUint8(),n=e.readUint16(),a=[];for(let t=0;t<n;t++){const t=e.readUint16();a.push(e.readBuffer(t))}32===t?r=a:33===t?s=a:34===t&&(i=a)}return{vpss:r,spss:s,ppss:i}}function T(t,e,r){const s=e[0];let n=23;t.length&&(n+=3,n=i()(t).call(t,((t,e)=>t+2+e.length),n)),e.length&&(n+=3,n=i()(e).call(e,((t,e)=>t+2+e.length),n)),r.length&&(n+=3,n=i()(r).call(r,((t,e)=>t+2+e.length),n));const a=new Uint8Array(n),o=new m.A(a,!0),c=F(s);o.writeUint8(1),o.writeUint8(s[1]),o.writeUint8(s[2]),o.writeUint8(s[3]),o.writeUint8(s[4]),o.writeUint8(s[5]),o.writeUint8(s[6]),o.writeUint8(s[7]),o.writeUint8(s[8]),o.writeUint8(s[9]),o.writeUint8(s[10]),o.writeUint8(s[11]),o.writeUint8(c.level),o.writeUint8(1020),o.writeUint8(0),o.writeUint8(16320),o.writeUint8(16320|c.chroma_format_idc),o.writeUint8(8160|c.bit_depth_luma_minus8),o.writeUint8(8160|c.bit_depth_chroma_minus8),o.writeUint16(0),o.writeUint8(8|(1&s[0])<<2|S);let u=0;return t.length&&u++,e.length&&u++,r.length&&u++,o.writeUint8(u),t.length&&(o.writeUint8(160),o.writeUint16(t.length),p.__(t,(t=>{o.writeUint16(t.length),o.writeBuffer(t)}))),e.length&&(o.writeUint8(161),o.writeUint16(e.length),p.__(e,(t=>{o.writeUint16(t.length),o.writeBuffer(t)}))),r.length&&(o.writeUint8(162),o.writeUint16(r.length),p.__(r,(t=>{o.writeUint16(t.length),o.writeBuffer(t)}))),a}function B(t){let e=w.py(t);if(e.length>=2){const t=[],r=[],s=[];if(a()(e).call(e,(e=>{const i=e[0]>>>1&63;32===i?t.push(e):33===i?r.push(e):34===i&&s.push(e)})),r.length&&s.length)return T(t,r,s)}}function C(t){let e=w.py(t);if(e.length>=2){const t=[],r=[],s=[];if(a()(e).call(e,(e=>{const i=e[0]>>>1&63;32===i?t.push(e):33===i?r.push(e):34===i&&s.push(e)})),r.length&&s.length){const e=[r[0],s[0]];return t.length&&e.unshift(t[0]),w.nW(e,0)}}}function U(t,e=!1){let r,s=!1,n=w.py(t);if(n.length){const t=[],i=[],o=[];a()(n).call(n,(e=>{const r=e[0]>>>1&63;32===r?t.push(e):33===r?i.push(e):34===r&&o.push(e),19!==r&&20!==r&&21!==r||(s=!0)})),i.length&&o.length?(r=T(t,i,o),n=c()(n).call(n,(t=>{const r=t[0]>>>1&63;return(e||32!==r&&33!==r&&34!==r)&&35!==r}))):n=c()(n).call(n,(t=>35!=(t[0]>>>1&63)))}const o=i()(n).call(n,((t,e)=>t+S+1+e.length),0),u=(0,y.sY)(o),h=(0,A.s3)(u,o);return w.S9(n,S,h),{bufferPointer:u,length:o,extradata:r,key:s}}function D(t,e,r,s){const n=[w.Le(t,0),w.Le(e,0),w.Le(r,0),w.Le(s,2)];let a=i()(n).call(n,((t,e)=>t+e),0);const o=(0,y.sY)(a+7);let c=o;return x.w8((c+=1,c-1),0),x.w8((c+=1,c-1),0),x.w8((c+=1,c-1),0),x.w8((c+=1,c-1),1),x.w8((c+=1,c-1),70),x.w8((c+=1,c-1),1),x.w8((c+=1,c-1),80),t.length&&(w.nW(t,0,(0,A.s3)(c,n[0])),c+=n[0]),e.length&&(w.nW(e,0,(0,A.s3)(c,n[1])),c+=n[1]),r.length&&(w.nW(r,0,(0,A.s3)(c,n[2])),c+=n[2]),s.length&&w.nW(s,2,(0,A.s3)(c,n[3])),{bufferPointer:o,length:a+7}}function R(t,e){var r;let s=h()(r=w.py(t)).call(r,w.py(e));if(s.length){let t=[],e=[],r=[],i=[];return a()(s).call(s,(s=>{const n=s[0]>>>1&63;32===n?t.push(s):33===n?e.push(s):34===n?r.push(s):35!==n&&i.push(s)})),D(t,e,r,i)}}function L(t,e,r=S){var s;e&&(r=3&e[21]);let i=[],n=[],o=[],u=!1;if(e){const t=E(e);i=t.vpss,n=t.spss,o=t.ppss,u=!0}const h=c()(s=w.wN(t,r)).call(s,(t=>35!=(t[0]>>>1&63))),d=[];return a()(h).call(h,(t=>{const e=t[0]>>>1&63;33!==e||n.length?34!==e||o.length?35!==e&&d.push(t):o.push(t):n.push(t),19!==e&&20!==e||(u=!0)})),{...D(i,n,o,d),key:u}}function $(t,e){let r;if(!e&&t.sideData[1]&&(e=t.sideData[1]),e&&w.Bs(e))p.__(w.py(e),(t=>{if(33==(t[0]>>>1&63))return r=t,!1}));else if(e&&e.length>=6){const{spss:t}=E(e);t.length&&(r=t[0])}if(r){const{profile:e,level:s,width:i,height:n,video_delay:a,chroma_format_idc:o,bit_depth_luma_minus8:c}=F(r);switch(t.codecpar.profile=e,t.codecpar.level=s,t.codecpar.width=i,t.codecpar.height=n,t.codecpar.videoDelay=a,c){case 0:t.codecpar.format=3===o?5:2===o?4:0;break;case 2:t.codecpar.format=3===o?68:2===o?64:62}}}function O(t,e=4){if(64&f.f[15](t+36)){let e=w.py((0,A.s3)(f.f[20](t+24),f.f[15](t+28)));return l()(e).call(e,(t=>{const e=t[0]>>>1&63;return 20===e||19===e}))}{const r=f.f[15](t+28);let s=0;for(;s<r-e;){const r=k.r8(f.f[20](t+24)+(s+e))>>>1&63;if(20===r||19===r)return!0;s+=4===e?k.Sg(f.f[20](t+24)+s):3===e?k.ht(f.f[20](t+24)+s):2===e?k.yd(f.f[20](t+24)+s):k.r8(f.f[20](t+24)+s),s+=e}return!1}}function F(t){if(!t||t.length<3)return;let e=0;0===t[0]&&0===t[1]&&0===t[2]&&1===t[3]&&(e=4);let r=0,s=0,i=0,n=0,a=0,o=0,c=1,u=0,h=0,d=0,l=0;const f=w.BN(t.subarray(e)),p=new v.A(f.length);p.appendBuffer(f),p.readU1(),p.readU(6),p.readU(6),p.readU(3),p.readU(4);const m=p.readU(3);p.readU1();let g=0;if(m<=6){u=p.readU(2),h=p.readU1(),r=p.readU(5),d=p.readU(32),l=p.readU(48),s=p.readU(8);const t=new Array(6),e=new Array(6);for(let r=0;r<m;r++)t[r]=p.readU1(),e[r]=p.readU1();if(m>0)for(let t=m;t<8;t++)p.readU(2);for(let r=0;r<m;r++)t[r]&&(p.readU(2),p.readU(1),p.readU(5),p.readU(32),p.readU(1),p.readU(1),p.readU(1),p.readU(1),p.readU(44)),e[r]&&p.readU(8);b.xb(p),c=b.xb(p),3===c&&(g=p.readU(1)),i=b.xb(p),n=b.xb(p);let f=0,v=0,A=0,w=0;p.readU1()&&(f=b.xb(p),v=b.xb(p),A=b.xb(p),w=b.xb(p)),a=b.xb(p),o=b.xb(p);let y=2,k=2;0===c?y=k=0:2===c?(y=2,k=1):3===c&&(y=k=1),i-=y*(1<<a+1)*(f+v),n-=k*(1<<a+1)*(A+w)}const A=b.xb(p)+4;let y=0;for(let t=p.readU1()?0:m;t<m+1;t++)b.xb(p),y=Math.max(y,Math.min(b.xb(p),_)),b.xb(p);const k=b.xb(p)+3,x=b.xb(p),I=b.xb(p)+2,P=b.xb(p),M=k+x,S=k-1,E=i+(1<<M)-1>>M,T=n+(1<<M)-1>>M;return{profile:r,level:s,width:i,height:n,chroma_format_idc:c,bit_depth_luma_minus8:a,bit_depth_chroma_minus8:o,general_profile_space:u,general_tier_flag:h,general_profile_compatibility_flags:d,constraint_flags:l,separate_colour_plane_flag:g,log2_min_cb_size:k,log2_diff_max_min_coding_block_size:x,log2_min_tb_size:I,log2_diff_max_min_transform_block_size:P,log2_max_trafo_size:P+I,log2_ctb_size:M,log2_min_pu_size:S,ctb_width:E,ctb_height:T,ctb_size:E*T,min_cb_width:i>>k,min_cb_height:n>>k,min_tb_width:i>>I,min_tb_height:n>>I,min_pu_width:i>>S,min_pu_height:n>>S,log2_max_poc_lsb:A,video_delay:y}}function z(t){if(!t||t.length<3)return;let e=0;0===t[0]&&0===t[1]&&0===t[2]&&1===t[3]&&(e=4);const r=w.BN(t.subarray(e)),s=new v.A(r.length);return s.appendBuffer(r),{pps_pic_parameter_set_id:b.xb(s),pps_seq_parameter_set_id:b.xb(s),dependent_slice_segment_flag:s.readU1(),output_flag_present_flag:s.readU1(),num_extra_slice_header_bits:s.readU(3)}}},64093:(t,e,r)=>{"use strict";r.d(e,{Au:()=>A,He:()=>w,XC:()=>y,Y2:()=>m,hG:()=>g,oz:()=>v});var s=r(77231);const i=[44100,48e3,32e3,0],n=[22050,24e3,16e3,0],a=[11025,12e3,8e3,0],o=[0,1152,1152,384],c=[0,576,1152,384],u=[0,576,1152,384],h=[0,32,64,96,128,160,192,224,256,288,320,352,384,416,448,-1],d=[0,32,48,56,64,80,96,112,128,160,192,224,256,320,384,-1],l=[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],f=[0,32,48,56,64,80,96,112,128,144,160,176,192,224,256,-1],p=[0,8,16,24,32,40,48,56,64,80,96,112,128,144,160,-1];function m(t,e){switch(t){case 0:return a[e];case 2:return n[e];case 3:return i[e]}return s.N_}function g(t,e){switch(t){case 0:return u[e];case 2:return c[e];case 3:return o[e]}return s.N_}function v(t,e,r){switch(e){case 1:switch(t){case 0:case 2:return p[r];case 3:return l[r]}break;case 2:switch(t){case 0:case 2:return p[r];case 3:return d[r]}case 3:switch(t){case 0:case 2:return f[r];case 3:return h[r]}}return s.N_}function A(t){switch(t){case 1:return 34;case 2:return 33;case 3:return 32}return s.N_}const w={32:"Layer1",33:"Layer2",34:"Layer3"};function y(t,e){if(e&&e.length>=4){const r=e[1]>>>3&3,s=(6&e[1])>>1,i=(12&e[2])>>>2,n=3&~(e[3]>>>6)?2:1,a=A(s),o=m(r,i);t.codecpar.profile=a,t.codecpar.sampleRate=o,t.codecpar.chLayout.nbChannels=n}}},22576:(t,e,r)=>{"use strict";r.d(e,{Ij:()=>u,XC:()=>c,kt:()=>o});var s=r(31865),i=r(729),n=r(44328);const a=[480,960,1920,2880,480,960,1920,2880,480,960,1920,2880,480,960,480,960,120,240,480,960,120,240,480,960,120,240,480,960,120,240,480,960];function o(t){let e=0,r=0,s=0;if(t.length<1)return 0;switch(e=t[0],r=a[e>>3],3&e){case 0:s=1;break;case 1:case 2:s=2;break;case 3:if(t.length<2)return 0;s=63&t[1]}return s*r}function c(t,e){if(!e&&t.sideData[1]&&(e=t.sideData[1]),e&&e.length>=19){const r=new s.A(e,!1);r.skip(9),t.codecpar.chLayout.nbChannels=r.readUint8(),t.codecpar.initialPadding=r.readUint16(),t.codecpar.sampleRate=r.readUint32(),t.codecpar.seekPreroll=Number((0,n.k)(BigInt(80),{den:1e3,num:1},{den:48e3,num:1}))}}function u(t){const e=new Uint8Array(19),r=new i.A(e,!1);return r.writeString("OpusHead"),r.writeUint8(1),r.writeUint8(t.chLayout.nbChannels),r.writeUint16(t.initialPadding),r.writeUint32(t.sampleRate),e}},97077:(t,e,r)=>{"use strict";r.d(e,{Ui:()=>n,XC:()=>i});var s=r(37246);function i(t,e){if(!e&&t.sideData[1]&&(e=t.sideData[1]),e&&e.length>=6){const r=n(e);t.codecpar.profile=r.profile,t.codecpar.level=r.level}}function n(t){const e=new s.A(t.length);return e.appendBuffer(t.subarray(4)),{profile:e.readU(8),level:e.readU(8),bitDepth:e.readU(4),chromaSubsampling:e.readU(3),fullRangeFlag:e.readU1(),colorPrimaries:e.readU(8),colorTrc:e.readU(8),colorSpace:e.readU(8)}}},82014:(t,e,r)=>{"use strict";r.d(e,{Ui:()=>m,XC:()=>p,Yj:()=>g,k9:()=>f,wN:()=>d});var s=r(63939),i=r(9599),n=r(29170),a=r(37246),o=r(77231),c=r(97317),u=r(44328),h=r(729);const d={0:"Profile0",1:"Profile1",2:"Profile2",3:"Profile3"},l=[{level:10,maxResolution:196608,maxFrameRate:30},{level:11,maxResolution:196608,maxFrameRate:60},{level:20,maxResolution:518400,maxFrameRate:30},{level:21,maxResolution:518400,maxFrameRate:60},{level:30,maxResolution:2073600,maxFrameRate:30},{level:31,maxResolution:2073600,maxFrameRate:60},{level:40,maxResolution:3686400,maxFrameRate:30},{level:41,maxResolution:3686400,maxFrameRate:60},{level:50,maxResolution:8294400,maxFrameRate:30},{level:51,maxResolution:8294400,maxFrameRate:60},{level:60,maxResolution:8847360,maxFrameRate:30},{level:61,maxResolution:8847360,maxFrameRate:60},{level:70,maxResolution:35389440,maxFrameRate:30},{level:71,maxResolution:35389440,maxFrameRate:60}];function f(t,e,r){const s=t*e;for(const t of l)if(s<=t.maxResolution&&r<=t.maxFrameRate)return t.level}function p(t,e){if(!e&&t.sideData[1]&&(e=t.sideData[1]),e&&e.length>=6){const r=m(e);t.codecpar.profile=r.profile,t.codecpar.level=r.level}}function m(t){const e=new a.A(t.length);return e.appendBuffer(t),{profile:e.readU(8),level:e.readU(8),bitDepth:e.readU(4),chromaSubsampling:e.readU(3),fullRangeFlag:e.readU1(),colorPrimaries:e.readU(8),colorTrc:e.readU(8),colorSpace:e.readU(8)}}function g(t){const e=new h.A(new Uint8Array(8)),r=function(t){let e=s.f[15](t+48),r=s.f[15](t+52);r===o.N_&&(r=f(s.f[15](t+56),s.f[15](t+60),(0,u.lb)((0,n.A)(t+72,i.P))));const a=(0,c.I)(s.f[15](t+28));let h=s.f[15](t+40),d=1;a&&(h=a.comp[0].depth,1===a.log2ChromaW&&1===a.log2ChromaH?1===s.f[15](t+100)&&(d=0):1===a.log2ChromaW&&0===a.log2ChromaH?d=2:0===a.log2ChromaW&&0===a.log2ChromaH&&(d=3));const l=2===s.f[15](t+84)?1:0;return e===o.N_&&h&&(e=0==d||1==d?8==h?0:2:8==h?1:3),{profile:e,level:r,bitDepth:h,chromaSubsampling:d,fullRange:l}}(t);return e.writeUint8(r.profile),e.writeUint8(r.level),e.writeUint8(r.bitDepth<<4|r.chromaSubsampling<<1|r.fullRange),e.writeUint8(s.f[15](t+88)),e.writeUint8(s.f[15](t+92)),e.writeUint8(s.f[15](t+96)),e.writeUint16(0),e.getWroteBuffer()}},59166:(t,e,r)=>{"use strict";r.d(e,{HL:()=>B,KD:()=>z,OD:()=>O,S1:()=>U,Ui:()=>V,XC:()=>F,kM:()=>$,oT:()=>R,sL:()=>D,wA:()=>L,wf:()=>N});var s=r(5496),i=r.n(s),n=r(73363),a=r.n(n),o=r(86226),c=r.n(o),u=r(96319),h=r.n(u),d=r(11393),l=r.n(d),f=r(31721),p=r.n(f),m=r(54810),g=r.n(m),v=r(63939),A=r(72739),w=r(729),y=r(31865),b=r(37246),k=r(14686),x=r(60264),_=r(37837),I=r(23991),P=r(83314),M=r(39381),S=r(82774);const E=3;function T(t){const e=t.readU(9),r=t.readU(3),s=t.readU(2),i=t.readU(2),n=t.readU(3);t.readU(5),t.readU(2);const a=t.readU(6),o=t.readU(7),c=t.readU(1),u=t.readU(8),h=t.readU(1),d=t.readU(1),l=[],f=[];if(a){for(let e=0;e<a-1;e++)l[e]=t.readU(8);l[a-1]=t.readU(6)}else t.readU(6);if(r>1){let e=0;for(let s=r-2;s>=0;--s)e|=t.readU(1)<<s;for(let e=r;e<=8&&r>1;++e)t.readU(1);for(let s=r-2;s>=0;--s)e&1<<s&&(f[s]=t.readU(8))}const p=t.readU(8),m=[];if(p)for(let e=0;e<p;e++)m.push(t.readU(8));return{olsIdx:e,numSublayers:r,bitDepthMinus8:n,chromaFormatIdc:i,constantFrameRate:s,generalProfileIdc:o,generalTierFlag:c,generalLevelIdc:u,ptlFrameOnlyConstraintFlag:h,ptlMultilayerEnabledFlag:d,generalConstraintInfo:l,sublayerLevelIdc:f,generalSubProfileIdc:m,maxPictureWidth:t.readU(16),maxPictureHeight:t.readU(16),avgFramerate:t.readU(16)}}function B(t){const e=new y.A(t,!0);if(1&e.readUint8()){const r=new b.A;r.appendBuffer(t.subarray(1)),T(r),e.skip(r.getPointer())}let r=[],s=[],i=[];const n=e.readUint8();for(let t=0;t<n;t++){const t=31&e.readUint8();let n=1;13!==t&&12!==t&&(n=e.readUint16());const a=[];for(let t=0;t<n;t++){const t=e.readUint16();a.push(e.readBuffer(t))}14===t?r=a:15===t?s=a:16===t&&(i=a)}return{vpss:r,spss:s,ppss:i}}function C(t,e,r){const s=e[0];let n;if(s){const t=N(s);let e=t.generalConstraintInfo;var o;e.length||(e=i()(o=new Array(12)).call(o,0));const r=new P.A;if(r.writeU(9,0),r.writeU(3,t.spsMaxSublayersMinus1+1),r.writeU(2,1),r.writeU(2,t.chromaFormatIdc),r.writeU(3,t.bitDepthMinus8),r.writeU(5,31),r.writeU(2,0),r.writeU(6,e.length),r.writeU(7,t.profile),r.writeU1(t.tierFlag),r.writeU(8,t.level),r.writeU1(t.ptlFrameOnlyConstraintFlag),r.writeU1(t.ptlMultilayerEnabledFlag),e.length){for(let t=0;t<e.length-1;t++)r.writeU(8,e[t]);r.writeU(6,e[e.length-1])}else r.writeU(6,63);if(t.spsMaxSublayersMinus1+1>1){let e=0;for(let r=t.spsMaxSublayersMinus1-1;r>=0;r--)e=e<<1|t.ptlSublayerLevelPresentFlag[r];r.writeU(t.spsMaxSublayersMinus1,e);for(let e=t.spsMaxSublayersMinus1+1;e<=8&&t.spsMaxSublayersMinus1>0;++e)r.writeU1(0);for(let e=t.spsMaxSublayersMinus1-1;e>=0;e--)t.ptlSublayerLevelPresentFlag[e]&&r.writeU(8,t.sublayerLevelIdc[e])}r.writeU(8,t.generalSubProfileIdc.length);for(let e=0;e<t.generalSubProfileIdc.length;e++)r.writeU(8,t.sublayerLevelIdc[e]);r.writeU(16,t.width),r.writeU(16,t.height),r.writeU(16,0),r.padding(),n=r.getBuffer().subarray(0,r.getPointer())}let c=2+(n?n.length:0);t.length&&(c+=3,c=a()(t).call(t,((t,e)=>t+2+e.length),c)),e.length&&(c+=3,c=a()(e).call(e,((t,e)=>t+2+e.length),c)),r.length&&(c+=3,c=a()(r).call(r,((t,e)=>t+2+e.length),c));const u=new Uint8Array(c),h=new w.A(u,!0);h.writeUint8(E<<1|(n?1:0)|248),n&&h.writeBuffer(n);let d=0;return t.length&&d++,e.length&&d++,r.length&&d++,h.writeUint8(d),t.length&&(h.writeUint8(142),h.writeUint16(t.length),A.__(t,(t=>{h.writeUint16(t.length),h.writeBuffer(t)}))),e.length&&(h.writeUint8(143),h.writeUint16(e.length),A.__(e,(t=>{h.writeUint16(t.length),h.writeBuffer(t)}))),r.length&&(h.writeUint8(144),h.writeUint16(r.length),A.__(r,(t=>{h.writeUint16(t.length),h.writeBuffer(t)}))),u}function U(t){let e=x.py(t);if(e.length>=2){const t=[],r=[],s=[];if(c()(e).call(e,(e=>{const i=e[1]>>>3&31;14===i?t.push(e):15===i?r.push(e):16===i&&s.push(e)})),r.length&&s.length)return C(t,r,s)}}function D(t){let e=x.py(t);if(e.length>=2){const t=[],r=[],s=[];if(c()(e).call(e,(e=>{const i=e[1]>>>3&31;14===i?t.push(e):15===i?r.push(e):16===i&&s.push(e)})),r.length&&s.length){const e=[r[0],s[0]];return t.length&&e.unshift(t[0]),x.nW(e,0)}}}function R(t,e=!1){let r,s=!1,i=x.py(t);if(i.length){const t=[],n=[],a=[];c()(i).call(i,(e=>{const r=e[1]>>>3&31;14===r?t.push(e):15===r?n.push(e):16===r&&a.push(e),8!==r&&7!==r&&9!==r&&10!==r||(s=!0)})),n.length&&a.length?(r=C(t,n,a),i=h()(i).call(i,(t=>{const r=t[1]>>>3&31;return(e||14!==r&&15!==r&&16!==r)&&20!==r}))):i=h()(i).call(i,(t=>20!=(t[1]>>>3&31)))}const n=a()(i).call(i,((t,e)=>t+E+1+e.length),0),o=(0,_.sY)(n),u=(0,k.s3)(o,n);return x.S9(i,E,u),{bufferPointer:o,length:n,extradata:r,key:s}}function L(t,e,r,s,i){const n=[x.Le(t,0),x.Le(e,0),x.Le(r,0),x.Le(s,2)];let o=a()(n).call(n,((t,e)=>t+e),0);const c=(0,_.sY)(o+7);let u=c;return S.w8((u+=1,u-1),0),S.w8((u+=1,u-1),0),S.w8((u+=1,u-1),0),S.w8((u+=1,u-1),1),S.w8((u+=1,u-1),0),S.w8((u+=1,u-1),161),S.w8((u+=1,u-1),(i?1:0)<<7|40),t.length&&(x.nW(t,0,(0,k.s3)(u,n[0])),u+=n[0]),e.length&&(x.nW(e,0,(0,k.s3)(u,n[1])),u+=n[1]),r.length&&(x.nW(r,0,(0,k.s3)(u,n[2])),u+=n[2]),s.length&&x.nW(s,2,(0,k.s3)(u,n[3])),{bufferPointer:c,length:o+7}}function $(t,e){var r;let s=l()(r=x.py(t)).call(r,x.py(e));if(s.length){let t=[],e=[],r=[],i=[];return c()(s).call(s,(s=>{const n=s[1]>>>3&31;14===n?t.push(s):15===n?e.push(s):16===n?r.push(s):20!==n&&i.push(s)})),L(t,e,r,i,!0)}}function O(t,e,r=E){var s;e&&(r=e[0]>>>1&3);let i=[],n=[],a=[],o=!1;if(e){const t=B(e);i=t.vpss,n=t.spss,a=t.ppss,o=!0}const u=h()(s=x.wN(t,r)).call(s,(t=>20!=(t[1]>>>3&31))),d=[];return c()(u).call(u,(t=>{const e=t[1]>>>3&31;15!==e||n.length?16!==e||a.length?20!==e&&d.push(t):a.push(t):n.push(t),8!==e&&7!==e||(o=!0)})),{...L(i,n,a,d,o),key:o}}function F(t,e){let r;if(!e&&t.sideData[1]&&(e=t.sideData[1]),e&&x.Bs(e))A.__(x.py(e),(t=>{if(15==(t[1]>>>3&31))return r=t,!1}));else if(e&&e.length>=6){const{spss:t}=B(e);t.length&&(r=t[0])}r&&function(t,e){const{profile:r,level:s,width:i,height:n,videoDelay:a,chromaFormatIdc:o,bitDepthMinus8:c}=N(e);switch(t.codecpar.profile=r,t.codecpar.level=s,t.codecpar.width=i,t.codecpar.height=n,t.codecpar.videoDelay=a,c){case 0:t.codecpar.format=3===o?5:2===o?4:0;break;case 2:t.codecpar.format=3===o?68:2===o?64:62}}(t,r)}function z(t,e=4){if(64&v.f[15](t+36)){let e=x.py((0,k.s3)(v.f[20](t+24),v.f[15](t+28)));return p()(e).call(e,(t=>{const e=t[1]>>>3&31;return 8===e||7===e}))}{const r=v.f[15](t+28);let s=0;for(;s<r-e;){const r=M.r8(v.f[20](t+24)+(s+e+1))>>>3&31;if(8===r||7===r)return!0;s+=4===e?M.Sg(v.f[20](t+24)+s):3===e?M.ht(v.f[20](t+24)+s):2===e?M.yd(v.f[20](t+24)+s):M.r8(v.f[20](t+24)+s),s+=e}return!1}}function N(t){if(!t||t.length<3)return;let e=0;0===t[0]&&0===t[1]&&0===t[2]&&1===t[3]&&(e=4);let r=0,s=0,i=0,n=0,a=0,o=1,c=0,u=0,h=0;const d=[],l=[],f=[],p=[],m=x.BN(t.subarray(e)),v=new b.A(m.length);v.appendBuffer(m),v.readU1(),v.readU1(),v.readU(6),v.readU(5),v.readU(3),v.readU(8);const A=v.readU(3);o=v.readU(2);const w=v.readU(2);if(v.readU(1)){if(r=v.readU(7),c=v.readU(1),s=v.readU(8),u=v.readU(1),h=v.readU(1),v.readU(1)){for(let t=0;t<8;t++)d[t]=v.readU(8);d[8]=v.readU(7);const t=v.readU(8);v.readU(t)}v.skipPadding();for(let t=A-1;t>=0;t--)l[t]=v.readU(1);v.skipPadding();for(let t=A-1;t>=0;t--)l[t]&&(f[t]=v.readU(8));const t=v.readU(8);if(t)for(let e=0;e<t;e++)p[e]=v.readU(32)}v.readU1(),v.readU1()&&v.readU1();const y=i=I.xb(v),k=n=I.xb(v);if(v.readU1()&&(I.xb(v),I.xb(v),I.xb(v),I.xb(v)),v.readU1()){const t=I.xb(v),e=w+5,r=1<<e,s=y/(1<<e),i=k/(1<<e),n=Math.ceil(g()(s)),a=Math.ceil(g()(i));let o=0,c=0,u=0;t>0&&(u=v.readU1(),c=v.readU1());for(let e=0;t>0&&e<=t;e++)c&&0!=e||(e>0&&y>r&&v.readU(n),e>0&&k>r&&v.readU(a),e<t&&y>r&&v.readU(n),e<t&&k>r&&v.readU(a)),u||v.readU(2);if(o=I.xb(v)+1,v.readU(1)&&v.readU(1))for(let e=0;e<=t;e++)v.readU(o)}a=I.xb(v),v.readU(1),v.readU(1);const _=v.readU(4),P=v.readU(1);let M=0;P&&(M=I.xb(v));const S=[],E=v.readU(2);for(let t=0;t<8*E;t++)S[t]=v.readU(1);return{profile:r,level:s,width:i,height:n,videoDelay:A+1>2?2:A,chromaFormatIdc:o,bitDepthMinus8:a,generalProfileSpace:0,tierFlag:c,generalConstraintInfo:d,generalSubProfileIdc:p,ptlFrameOnlyConstraintFlag:u,ptlMultilayerEnabledFlag:h,spsMaxSublayersMinus1:A,ptlSublayerLevelPresentFlag:l,sublayerLevelIdc:f,sps_log2_max_pic_order_cnt_lsb_minus4:_,sps_poc_msb_cycle_flag:P,sps_poc_msb_cycle_len_minus1:M,sps_num_extra_ph_bytes:E,sps_extra_ph_bit_present_flag:S}}function V(t){x.Bs(t)&&(t=U(t));const e=new b.A;return e.appendBuffer(t),1&e.readU(8)?T(e):{}}},77231:(t,e,r)=>{"use strict";r.d(e,{Dh:()=>i,FQ:()=>l,H3:()=>c,KR:()=>h,N_:()=>n,SF:()=>a,WT:()=>u,f7:()=>g,go:()=>f,i0:()=>d,mN:()=>v,pu:()=>A,qs:()=>o,vh:()=>p,zg:()=>m});var s=r(9599);const i=-BigInt(1),n=-1,a=1e6,o=1e3,c=1e9,u=BigInt(2208988800)*BigInt(1e6),h=new s.P({den:a,num:1}),d=new s.P({den:o,num:1}),l=new s.P({den:c,num:1}),f=(new s.P({den:1,num:1}),2147483647),p=BigInt(0x8000000000000000),m=65535,g=4294967295,v=BigInt(0x10000000000000000),A=8},9705:(t,e,r)=>{"use strict";r.d(e,{E$:()=>s,LR:()=>i,LT:()=>u,NU:()=>d,OY:()=>c,UY:()=>n,gR:()=>a,lh:()=>o,nr:()=>l,r8:()=>h});const s=-1,i=-2,n=-3,a=-4,o=-5,c=-6,u=-7,h=-8,d=-9,l=-10},49032:(t,e,r)=>{"use strict";r.d(e,{A:()=>o});var s=r(18979),i=r.n(s),n=r(8628),a=r.n(n);async function o(t,e=-1){var r;let s=await t.peekString(8);if(/^FLV/.test(s))return 0;if(/^DKIF/.test(s))return 5;if(/^ftyp/.test(i()(s).call(s,4,8)))return 1;if(/^OggS/.test(s))return 4;if(/^ID3/.test(s))return 14;if(/^fLaC/.test(s))return 17;if(/^RIFF/.test(s)){var n;const e=i()(n=await t.peekString(12)).call(n,8);if(/^WAVE/.test(e))return 16;if(/^AVI/.test(e))return 10}else{if(/^ADIF/.test(s))return 15;if(440786851===await t.peekUint32())return 8;if(/^WEBVTT/.test(s))return 18;if(/^LIMA/.test(s))return await t.skip(4),await t.readUint16();{const e=await t.peekBuffer(2);switch(e[0]){case 86:if(!(224&~e[1]))return 15;break;case 255:if(240==(246&e[1]))return 15;if(a()(r=[242,244,246,250,252]).call(r,254&e[1]))return 14}}}return e}},364:(t,e,r)=>{"use strict";r.d(e,{A:()=>l});var s=r(64007),i=r.n(s),n=r(62751),a=r(92647),o=r(95335),c=r(50011),u=r(8507),h=r(72739);const d=["php","asp","aspx","jsp","do","pl"];async function l(t,e="",r={}){let s,l="",f={url:t};if(/^rtsp/.test(t)||/^rtmp/.test(t)){/^rtsp/.test(t)?l="rtsp":/^rtmp/.test(t)&&(l="rtmp"),s=2;const e=u.qg(t).protocol.split("+")[1]||"wss";"wss"===e||"ws"===e?s=2:"webtransport"===e&&(s=3),f.url=f.url.replace(/^\S+:\/\//,e+"://"),"rtmp"===l&&(f.subProtocol=s,s=6)}else{var p;const f=u.qg(t).protocol;l=e||u.qg(t).file.split(".").pop(),l&&!h.zy(d,l)||!/^https?/.test(f)||(l=await async function(t,e={}){const r={method:"GET",headers:{},mode:"cors",cache:"default",referrerPolicy:"no-referrer-when-downgrade"};let s;e.headers&&o.__(e.headers,((t,e)=>{r.headers[e]=t})),e.credentials&&(r.credentials=e.credentials),e.referrerPolicy&&(r.referrerPolicy=e.referrerPolicy),"function"==typeof AbortController&&(s=new AbortController,r.signal=s.signal);const n=await fetch(t,r);if(n.ok&&n.status>=200&&n.status<=299){const t=n.body.getReader(),e=[];let r=0;for(;;){let s=await t.read();if(s.done)break;if(r+=s.value.length,e.push(s.value),r>=100)break}if(s&&s.abort(),e.length){const t=e.length>1?(0,a.A)(Uint8Array,e):e[0];if(t.length){const e=c.decode(t.subarray(0,100));if(/<\?xml/.test(e)){if(i()(e).call(e,"<MPD")>-1)return"mpd"}else if(/#EXTM3U/.test(e))return"m3u8"}}}return""}(t,r));let m=0;"wss"===f||"ws"===f?m=2:"webtransport"===f&&(m=3),s=null!==(p=n.$$[l])&&void 0!==p?p:m}return{type:s,ext:l,info:f}}},36204:(t,e,r)=>{"use strict";r.d(e,{t:()=>u});var s=r(63939),i=r(50932),n=r(56024),a=r(66788),o=r(14686),c=r(77231);function u(t,e=0){0===e&&(e=(0,n.FP)()),i.M[15](e+152,t.sampleRate),i.M[15](e+76,t.numberOfFrames),i.M[15](e+292,t.numberOfChannels),i.M[15](e+80,function(t){switch(t){case"u8":return 0;case"s16":return 1;case"s32":return 2;case"f32":return 3;case"u8-planar":return 5;case"s16-planar":return 6;case"s32-planar":return 7;case"f32-planar":return 8;default:throw new Error("not support")}}(t.format)),i.M[17](e+104,t.timestamp<0?c.Dh:BigInt(Math.floor(t.timestamp))),i.M[17](e+312,BigInt(Math.floor(t.duration))),i.M[15](e+124,c.SF),i.M[15](e+120,1),(0,n.rh)(e);const r=(0,a.K0)(s.f[15](e+80))?s.f[15](e+292):1;for(let i=0;i<r;i++)t.copyTo((0,o.s3)(s.f[20](s.f[20](e+64)+4*i),s.f[15](e+32)),{planeIndex:i});return e}},84716:(t,e,r)=>{"use strict";r.d(e,{T:()=>u});var s=r(63939),i=(r(9599),r(14686)),n=r(66788),a=r(44328),o=r(77231);function c(t){switch(s.f[15](t+80)){case 0:return"u8";case 1:return"s16";case 2:return"s32";case 3:return"f32";case 5:return"u8-planar";case 6:return"s16-planar";case 7:return"s32-planar";case 8:return"f32-planar";default:throw new Error("not support")}}function u(t,e){const r=(0,n.K0)(s.f[15](t+80)),u=r?s.f[15](t+292):1;let h;const d=(0,n.Dw)(s.f[15](t+80));if(r){const e=s.f[15](t+76)*d,r=new Uint8Array(u*e);let n=0;for(let a=0;a<u;a++)r.set((0,i.s3)(s.f[20](t+4*a),e),n),n+=e;h=function(t,e){switch(t){case 0:case 5:return e;case 1:case 6:return new Int16Array(e.buffer);case 2:case 7:return new Int32Array(e.buffer);case 3:case 8:return new Float32Array(e.buffer);default:throw new Error("not support")}}(s.f[15](t+80),r)}else h=function(t,e,r){switch(t){case 0:case 5:return(0,i.s3)(e,r);case 1:case 6:return(0,i.cC)(e,r>>>1);case 2:case 7:return(0,i.gd)(e,r>>>2);case 3:case 8:return(0,i.TL)(e,r>>>2);default:throw new Error("not support")}}(s.f[15](t+80),s.f[20](t),d*s.f[15](t+76)*s.f[15](t+292));return new AudioData({data:h,format:c(t),sampleRate:s.f[15](t+152),numberOfFrames:s.f[15](t+76),numberOfChannels:s.f[15](t+292),timestamp:e?Number(e):s.f[17](t+104)===o.Dh?-1:Number((0,a.Mr)(s.f[17](t+104),t+120,o.KR))})}},89188:(t,e,r)=>{"use strict";r.d(e,{pt:()=>m});var s=r(63939),i=(r(9599),r(97317)),n=r(44328),a=r(77231),o=r(11473),c=r(95335),u=r(15980);const h=c.BE(u.GR),d=c.BE(u.OG),l=c.BE(u.SY),f=c.BE(u.re);function p(t){var e,r,i;const n={fullRange:!1,matrix:null!==(e=l[s.f[15](t+220)])&&void 0!==e?e:null,primaries:null!==(r=d[s.f[15](t+212)])&&void 0!==r?r:null,transfer:null!==(i=f[s.f[15](t+216)])&&void 0!==i?i:null};return 2===s.f[15](t+208)&&(n.fullRange=!0),n}function m(t,e,r={}){let u=s.f[15](t+72);const d=(0,i.I)(s.f[15](t+80)),l=[];for(let e=0;e<d.comp.length;e++)l.push({offset:s.f[20](t+4*e),stride:s.f[15](t+32+4*e)});const f=c.X$({codedWidth:s.f[15](t+68),codedHeight:u,timestamp:Number(e||(0,n.Mr)(s.f[17](t+104),t+120,a.KR)),format:(m=s.f[15](t+80),null!==(g=h[m])&&void 0!==g?g:null),duration:Number((0,n.Mr)(s.f[17](t+312),t+120,a.KR)),layout:l,colorSpace:p(t),visibleRect:{x:s.f[25](t+276),y:s.f[25](t+268),width:s.f[15](t+68)-(s.f[25](t+276)+s.f[25](t+280)),height:s.f[15](t+72)-(s.f[25](t+268)+s.f[25](t+272))}},r);var m,g;return new VideoFrame((0,o.Lv)(),f)}},22898:(t,e,r)=>{"use strict";r.d(e,{A:()=>o});var s=r(63939),i=(r(9599),r(44328)),n=r(14686),a=r(77231);function o(t){const e=1&s.f[15](t+36);return new EncodedAudioChunk({type:e?"key":"delta",duration:s.f[17](t+48)<0?void 0:Number((0,i.Mr)(s.f[17](t+48),t+72,a.KR)),timestamp:s.f[17](t+8)===a.Dh?a.N_:Number((0,i.Mr)(s.f[17](t+8),t+72,a.KR)),data:(0,n.s3)(s.f[20](t+24),s.f[15](t+28))})}},28917:(t,e,r)=>{"use strict";r.d(e,{A:()=>o});var s=r(63939),i=(r(9599),r(44328)),n=r(14686),a=r(77231);function o(t){const e=1&s.f[15](t+36);return new EncodedVideoChunk({type:e?"key":"delta",duration:s.f[17](t+48)<0?void 0:Number((0,i.Mr)(s.f[17](t+48),t+72,a.KR)),timestamp:s.f[17](t+8)===a.Dh?a.N_:Number((0,i.Mr)(s.f[17](t+8),t+72,a.KR)),data:(0,n.s3)(s.f[20](t+24),s.f[15](t+28))})}},94561:(t,e,r)=>{"use strict";r.d(e,{A:()=>a});var s=r(26429),i=r(76045),n=r(67672);async function a(t,e=!1){let r;return n.Yj(t)||n.sv(t)?(r=await(0,i.A)({source:t}),s.USE_THREADS&&e&&(r.threadModule=await(0,i.A)({source:r.buffer},{child:!0})),delete r.buffer):r=t,r}},15980:(t,e,r)=>{"use strict";r.d(e,{GR:()=>s,OG:()=>n,SY:()=>i,re:()=>a});const s={BGRA:28,BGRX:121,I420:0,I420P10:62,I420P12:123,I420A:33,I420AP10:87,I420AP12:229,I422:4,I422P10:64,I422P12:127,I422A:78,I422AP10:89,I422AP12:185,I444:5,I444P10:68,I444P12:131,I444A:79,I444AP10:91,I444AP12:187,NV12:23,RGBA:26,RGBX:119},i={bt709:1,smpte170m:6,bt470bg:5,"bt2020-ncl":9,rgb:0},n={bt709:1,bt470bg:5,smpte170m:6,bt2020:9,smpte432:12},a={bt709:1,"iec61966-2-1":13,smpte170m:6,linear:8,pq:16,hlg:18}},59944:(t,e,r)=>{"use strict";r.d(e,{A:()=>u});var s=r(63939),i=r(50932),n=r(71517),a=r(37837),o=r(14686),c=r(77231);function u(t,e=0,r){0===e&&(e=(0,n._5)()),i.M[17](e+8,BigInt(Math.floor(t.timestamp))),i.M[17](e+16,BigInt(Math.floor(t.timestamp))),i.M[17](e+48,null==t.duration?c.Dh:BigInt(Math.floor(t.duration))),i.M[15](e+76,c.SF),i.M[15](e+72,1),i.M[15](e+36,1|s.f[15](e+36));const u=(0,a.sY)(t.byteLength);var h;if(t.copyTo((0,o.s3)(u,t.byteLength)),(0,n.NX)(e,u,t.byteLength),r&&null!==(h=r.decoderConfig)&&void 0!==h&&h.description){let t;t=r.decoderConfig.description instanceof ArrayBuffer?new Uint8Array(r.decoderConfig.description):new Uint8Array(r.decoderConfig.description.buffer);const s=(0,a.sY)(t.length);(0,o.lW)(s,t.length,t),(0,n.Ow)(e,1,s,t.length)}}},26777:(t,e,r)=>{"use strict";r.d(e,{A:()=>h});var s=r(63939),i=r(50932),n=r(71517),a=r(37837),o=r(14686),c=r(77231),u=r(82774);function h(t,e=0,r){0===e&&(e=(0,n._5)()),i.M[17](e+8,BigInt(Math.floor(t.timestamp))),i.M[15](e+76,c.SF),i.M[15](e+72,1),i.M[17](e+48,null==t.duration?c.Dh:BigInt(Math.floor(t.duration)));const h=(0,a.sY)(t.byteLength);if(t.copyTo((0,o.s3)(h,t.byteLength)),(0,n.NX)(e,h,t.byteLength),r){var d;if(null!==(d=r.decoderConfig)&&void 0!==d&&d.description){let t;t=r.decoderConfig.description instanceof ArrayBuffer?new Uint8Array(r.decoderConfig.description):new Uint8Array(r.decoderConfig.description.buffer);const s=(0,a.sY)(t.length);(0,o.lW)(s,t.length,t),(0,n.Ow)(e,1,s,t.length)}if(r.alphaSideData){const t=(0,a.sY)(r.alphaSideData.byteLength+8);let s;s=r.alphaSideData instanceof ArrayBuffer?new Uint8Array(r.alphaSideData):new Uint8Array(r.alphaSideData.buffer),u.Cv(h,BigInt(1)),(0,o.lW)(t+8,s.length,s),(0,n.Ow)(e,15,t,s.length)}}"key"===t.type&&i.M[15](e+36,1|s.f[15](e+36))}},79756:(t,e,r)=>{"use strict";r.d(e,{A:()=>n});var s=r(63939),i=r(62751);function n(t){const e=s.f[15](t+4);let r=s.f[15](t+48),n=i.os[e];return 86018===e&&(n=`${n}.${r}`),n||"unknown"}},39365:(t,e,r)=>{"use strict";r.d(e,{C:()=>i});var s=r(86834);function i(t){return t?!s.A.chrome||s.A.checkVersion(s.A.majorVersion,"94",!0)?"prefer-hardware":"allow":!s.A.chrome||s.A.checkVersion(s.A.majorVersion,"94",!0)?"prefer-software":"deny"}},28875:(t,e,r)=>{"use strict";r.d(e,{A:()=>w});var s=r(18979),i=r.n(s),n=r(48079),a=r.n(n),o=r(63939),c=r(62751),u=r(21477),h=r(97077),d=r(82014),l=r(59166),f=r(67659),p=r(20525),m=r(77231),g=r(14686),v=r(90932),A=r(60264);function w(t,e){const r=o.f[15](t+4);let s=o.f[15](t+48),n=o.f[15](t+52);!e&&0!==o.f[20](t+12)&&o.f[15](t+16)&&(e=(0,g.s3)(o.f[20](t+12),o.f[15](t+16)));let w=c.os[r],y="";if(27===r)110===s&&(s=100),y=p.GP("%s.%02x00%02x",w,255&s,255&n);else if(173===r){let t=0,r=0,i=0,a=0;e&&(A.Bs(e)&&(e=f.S1(e)),e.length>13&&(t=e[1]>>>6&3,i=e[1]>>>5&1,r=e[2]|e[3]<<8|e[4]<<16|e[5]<<24,a=240&e[6]));const o={0:"",1:"A",2:"B",3:"C"};y=p.GP("%s.%s%d.%x.%s%d.%x",w,o[t],s,r,0===i?"L":"H",n,a)}else if(196===r){var b;let t=0;if((null===(b=e)||void 0===b?void 0:b.length)>13&&(t=1&e[5]),y=p.GP("%s.%d.%s%d",w,s,0===t?"L":"H",n),e){A.Bs(e)&&(e=l.S1(e));const t=l.Ui(e);if(t.generalConstraintInfo.length){var k;let e=t.generalConstraintInfo.length-1;for(;e>0&&0===t.generalConstraintInfo[e];)e--;const r=i()(k=t.generalConstraintInfo).call(k,0,e+1);r.length&&(y+=`.C${v.l(new Uint8Array(r),!1)}`)}var x;t.generalSubProfileIdc.length&&(y+=`.S${a()(x=t.generalSubProfileIdc).call(x,(t=>t.toString(16))).join("+")}`),y+=`.O${t.olsIdx}+${t.numSublayers}`}}else if(225===r)if(e){const t=u.Ui(e);y=p.GP("%s.%d.%02d%s.%02d.%d.%d%d%d",w,t.profile,t.level,t.tier?"H":"M",t.bitDepth,t.monochrome,t.chromaSubsamplingX,t.chromaSubsamplingY,t.chromaSamplePosition)}else y=p.GP("%s.%d.%02dM.08",w,s,n);else if(139===r)if(e){const t=h.Ui(e);y=p.GP("%s.%02d.%02d.%02d",w,t.profile,t.level,t.bitDepth)}else y=s!==m.N_&&n!==m.N_?p.GP("%s.%02d.%02d.08",w,s,n):w;else if(167===r)if(e){const t=d.Ui(e);y=p.GP("%s.%02d.%02d.%02d.%02d.%02d.%02d.%02d.%02d",w,t.profile,t.level,t.bitDepth,t.chromaSubsampling,t.colorPrimaries,t.colorTrc,t.colorSpace,t.fullRangeFlag)}else y=s!==m.N_&&n!==m.N_?p.GP("%s.%02d.%02d.08.00",w,s,n):p.GP("%s.%02d.%02d.08.00",w,0,40);else y=w||"unknown";return y}},67603:(t,e,r)=>{"use strict";r.d(e,{A:()=>a});var s=r(4919);let i=WebAssembly.validate((0,s.E_)("AGFzbQEAAAABBgFgAX8BfwISAQNlbnYGbWVtb3J5AgMBgIACAwIBAAcJAQVsb2FkOAAACgoBCAAgAP4SAAAL")),n=WebAssembly.validate((0,s.E_)("AGFzbQEAAAABBQFgAAF7AhIBA2VudgZtZW1vcnkCAwGAgAIDAgEACgoBCABBAP0ABAAL"));function a(t,e,r){let s=n?"-simd":i?"-atomic":"";switch(e){case"decoder":if(r>65536&&r<=65572)return`${t}/decode/pcm${s}.wasm`;if(r>=69632&&r<=69683)return`${t}/decode/adpcm${s}.wasm`;switch(r){case 2:return`${t}/decode/mpeg2video${s}.wasm`;case 27:return`${t}/decode/h264${s}.wasm`;case 30:return`${t}/decode/theora${s}.wasm`;case 86018:return`${t}/decode/aac${s}.wasm`;case 86019:return`${t}/decode/ac3${s}.wasm`;case 86056:return`${t}/decode/eac3${s}.wasm`;case 86020:return`${t}/decode/dca${s}.wasm`;case 86017:return`${t}/decode/mp3${s}.wasm`;case 173:return`${t}/decode/hevc${s}.wasm`;case 196:return`${t}/decode/vvc${s}.wasm`;case 12:return`${t}/decode/mpeg4${s}.wasm`;case 225:return`${t}/decode/av1${s}.wasm`;case 86051:return`${t}/decode/speex${s}.wasm`;case 86076:return`${t}/decode/opus${s}.wasm`;case 86028:return`${t}/decode/flac${s}.wasm`;case 86021:return`${t}/decode/vorbis${s}.wasm`;case 139:return`${t}/decode/vp8${s}.wasm`;case 167:return`${t}/decode/vp9${s}.wasm`;case 86022:return`${t}/decode/dvaudio${s}.wasm`;case 24:return`${t}/decode/dvvideo${s}.wasm`;case 3:return`${t}/decode/h261${s}.wasm`;case 4:case 20:case 19:return`${t}/decode/h263${s}.wasm`;case 14:case 15:case 16:case 5:case 6:case 68:case 69:return`${t}/decode/msmpeg4${s}.wasm`;case 86036:case 86057:case 86073:return`${t}/decode/ra${s}.wasm`;case 86023:case 86024:case 86052:case 86054:case 86053:return`${t}/decode/wma${s}.wasm`;case 17:case 18:case 71:return`${t}/decode/wmv${s}.wasm`;case 7:return`${t}/decode/mjpeg${s}.wasm`;case 61:return`${t}/decode/png${s}.wasm`;case 171:return`${t}/decode/webp${s}.wasm`;case 97:return`${t}/decode/gif${s}.wasm`;case 96:return`${t}/decode/tiff${s}.wasm`;case 78:return`${t}/decode/bmp${s}.wasm`;default:return null}case"encoder":if(r>65536&&r<=65572)return`${t}/encode/pcm${s}.wasm`;switch(r){case 27:return`${t}/encode/x264${s}.wasm`;case 30:return`${t}/encode/theora${s}.wasm`;case 86018:return`${t}/encode/aac${s}.wasm`;case 86019:return`${t}/encode/ac3${s}.wasm`;case 86056:return`${t}/encode/eac3${s}.wasm`;case 86020:return`${t}/encode/dca${s}.wasm`;case 86017:return`${t}/encode/mp3lame${s}.wasm`;case 173:return`${t}/encode/x265${s}.wasm`;case 12:return`${t}/encode/mpeg4${s}.wasm`;case 225:return`${t}/encode/av1${s}.wasm`;case 86051:return`${t}/encode/speex${s}.wasm`;case 86076:return`${t}/encode/opus${s}.wasm`;case 86028:return`${t}/encode/flac${s}.wasm`;case 86021:return`${t}/encode/vorbis${s}.wasm`;case 139:return`${t}/encode/vp8${s}.wasm`;case 167:return`${t}/encode/vp9${s}.wasm`;default:return null}case"resampler":return`${t}/resample/resample${s}.wasm`;case"scaler":return`${t}/scale/scale${s}.wasm`;case"stretchpitcher":return`${t}/stretchpitch/stretchpitch${s}.wasm`}}},93147:(t,e,r)=>{"use strict";r.d(e,{A:()=>o});var s=r(52730),i=r.n(s),n=r(63939),a=r(97317);function o(t){if(0!==n.f[15](t))return!1;const e=(0,a.I)(n.f[15](t+28));return e&&128&i()(e)}},24310:(t,e,r)=>{"use strict";r.d(e,{A:()=>n});var s=r(63939),i=r(97317);function n(t){if(0!==s.f[15](t))return!1;const e=(0,i.I)(s.f[15](t+28));return!(!e||e.comp[0].depth<=8||18!==s.f[15](t+92)&&16!==s.f[15](t+92))}},37180:(t,e,r)=>{"use strict";r.d(e,{OB:()=>h,ab:()=>l,lL:()=>p,mt:()=>d,nG:()=>f});var s=r(63939),i=r(50932),n=r(56024),a=r(97317),o=r(11473),c=r(77231),u=r(15980);function h(t){var e;return null!==(e=u.GR[t])&&void 0!==e?e:-1}function d(t){var e;return null!==(e=u.SY[t])&&void 0!==e?e:1}function l(t){var e;return null!==(e=u.OG[t])&&void 0!==e?e:1}function f(t){var e;return null!==(e=u.re[t])&&void 0!==e?e:1}async function p(t,e=0){0===e?e=(0,n.FP)():(0,n.to)(e),i.M[15](e+80,h(t.format)),i.M[17](e+104,BigInt(Math.floor(t.timestamp))),i.M[17](e+232,s.f[17](e+104)),i.M[15](e+68,t.codedWidth),i.M[15](e+72,t.codedHeight),i.M[17](e+312,BigInt(Math.floor(t.duration))),i.M[15](e+124,c.SF),i.M[15](e+120,1),i.M[15](e+220,d(t.colorSpace.matrix)),i.M[15](e+212,l(t.colorSpace.primaries)),i.M[15](e+216,f(t.colorSpace.transfer)),i.M[15](e+208,t.colorSpace.fullRange?2:1),t.visibleRect&&(i.M[25](e+276,t.visibleRect.left),i.M[25](e+280,t.codedWidth-t.visibleRect.right),i.M[25](e+268,t.visibleRect.top),i.M[25](e+272,t.codedHeight-t.visibleRect.bottom)),(0,n.UD)(e);const r=(0,a.I)(s.f[15](e+80)),u=[];for(let t=0;t<r.comp.length;t++)r.comp[t].plane>=t&&u.push({offset:s.f[20](e+4*t),stride:s.f[15](e+32+4*t)});return await t.copyTo((0,o.Lv)(),{layout:u}),e}},16041:(t,e,r)=>{"use strict";r.d(e,{A:()=>h});var s=r(49859),i=r(71426),n=r.n(i),a=(r(55833),r(40046)),o=r(73783),c=r(37837),u=r(56024);class h{constructor(t,e){(0,s.A)(this,"list",void 0),(0,s.A)(this,"mutex",void 0),this.list=t,this.mutex=e}alloc(){var t;let e=n()(t=this.list).call(t,(t=>-1===a.p_(t+320,-1,1,16,2)),20);return e||(e=(0,c.Gy)(328),(0,u._h)(e),a.M_(e+320,1,16,2),o.s2(this.mutex),this.list.push(e,20),o.Tl(this.mutex)),e}release(t){a.Hh(t+320,16,2)<=0||1===a.jb(t+320,1,16,2)&&((0,u.to)(t),a.M_(t+320,-1,16,2))}}},84290:(t,e,r)=>{"use strict";r.d(e,{A:()=>h});var s=r(49859),i=r(71426),n=r.n(i),a=r(40046),o=r(73783),c=r(37837),u=(r(47958),r(71517));class h{constructor(t,e){(0,s.A)(this,"list",void 0),(0,s.A)(this,"mutex",void 0),this.list=t,this.mutex=e}alloc(){var t;let e=n()(t=this.list).call(t,(t=>-1===a.p_(t+80,-1,1,16,2)),20);return e||(e=(0,c.Gy)(88),(0,u.Pd)(e),a.M_(e+80,1,16,2),o.s2(this.mutex),this.list.push(e,20),o.Tl(this.mutex)),e}release(t){a.Hh(t+80,16,2)<=0||1===a.jb(t+80,1,16,2)&&((0,u.Up)(t),a.M_(t+80,-1,16,2))}}},97317:(t,e,r)=>{"use strict";r.d(e,{I:()=>c,U:()=>u});var s=r(74707),i=r.n(s),n=r(48079),a=r.n(n);const o=new(i());function c(t){var e;if(o.has(t))return o.get(t);const r=R[t];if(!r)return;const s={log2ChromaW:r[0],log2ChromaH:r[1],flags:r[2],comp:a()(e=r[3]).call(e,(t=>({plane:t[0],step:t[1],offset:t[2],shift:t[3],depth:t[4]})))};return o.set(t,s),s}function u(t){const e=c(t);if(e){let t=0,r=0,s=e.log2ChromaW+e.log2ChromaH;for(t=0;t<e.comp.length;t++){let i=1==t||2==t?0:s;r+=e.comp[t].depth<<i}return r>>s}return 0}const h=[[0,1,0,0,8],[1,1,0,0,8],[2,1,0,0,8]],d=[...h,[3,1,0,0,8]],l=[[0,2,0,0,9],[1,2,0,0,9],[2,2,0,0,9]],f=[...l,[3,2,0,0,9]],p=[[0,2,0,0,10],[1,2,0,0,10],[2,2,0,0,10]],m=[...p,[3,2,0,0,10]],g=[[0,2,0,0,12],[1,2,0,0,12],[2,2,0,0,12]],v=[...g,[3,2,0,0,12]],A=[[0,2,0,0,14],[1,2,0,0,14],[2,2,0,0,14]],w=[[0,2,0,0,16],[1,2,0,0,16],[2,2,0,0,16]],y=[...w,[3,2,0,0,16]],b=[[0,1,0,0,8],[1,2,0,0,8],[1,2,1,0,8]],k=[[0,1,0,0,8],[1,2,1,0,8],[1,2,0,0,8]],x=[[0,8,2,0,16],[0,8,4,0,16],[0,8,6,0,16],[0,8,0,0,16]],_=[[0,2,0,6,10],[1,4,0,6,10],[1,4,2,6,10]],I=[[0,2,0,4,12],[1,4,0,4,12],[1,4,2,4,12]],P=[[0,2,0,0,16],[1,4,0,0,16],[1,4,2,0,16]],M=[[0,8,0,0,16],[0,8,2,0,16],[0,8,4,0,16],[0,8,6,0,16]],S=[[0,8,4,0,16],[0,8,2,0,16],[0,8,0,0,16],[0,8,6,0,16]],E=[[2,2,0,0,9],[0,2,0,0,9],[1,2,0,0,9]],T=[[2,2,0,0,10],[0,2,0,0,10],[1,2,0,0,10]],B=[[2,2,0,0,12],[0,2,0,0,12],[1,2,0,0,12]],C=[[2,2,0,0,14],[0,2,0,0,14],[1,2,0,0,14]],U=[[2,2,0,0,16],[0,2,0,0,16],[1,2,0,0,16]],D=[[2,2,0,0,16],[0,2,0,0,16],[1,2,0,0,16],[3,2,0,0,16]],R={6:[2,2,16,h],0:[1,1,16,h],12:[1,1,16,h],4:[1,0,16,h],13:[1,0,16,h],5:[0,0,16,h],14:[0,0,16,h],23:[1,1,16,b],24:[1,1,16,k],188:[0,0,16,b],189:[0,0,16,k],59:[1,1,17,l],60:[1,1,16,l],69:[1,0,17,l],70:[1,0,16,l],65:[0,0,17,l],66:[0,0,16,l],61:[1,1,17,p],62:[1,1,16,p],63:[1,0,17,p],64:[1,0,16,p],67:[0,0,17,p],68:[0,0,16,p],122:[1,1,17,g],123:[1,1,16,g],126:[1,0,17,g],127:[1,0,16,g],130:[0,0,17,g],131:[0,0,16,g],124:[1,1,17,A],125:[1,1,16,A],128:[1,0,17,A],129:[1,0,16,A],132:[0,0,17,A],133:[0,0,16,A],46:[1,1,17,w],45:[1,1,16,w],48:[1,0,17,w],47:[1,0,16,w],50:[0,0,17,w],49:[0,0,16,w],33:[1,1,144,d],78:[1,0,144,d],79:[0,0,144,d],80:[1,1,145,f],81:[1,1,144,f],82:[1,0,145,f],83:[1,0,144,f],84:[0,0,145,f],85:[0,0,144,f],86:[1,1,145,m],87:[1,1,144,m],88:[1,0,145,m],89:[1,0,144,m],90:[0,0,145,m],91:[0,0,144,m],230:[1,1,145,v],229:[1,1,144,v],184:[1,0,145,v],185:[1,0,144,v],186:[0,0,145,v],187:[0,0,144,v],92:[1,1,145,y],93:[1,1,144,y],94:[1,0,145,y],95:[1,0,144,y],96:[0,0,145,y],97:[0,0,144,y],156:[0,0,129,x],155:[0,0,128,x],159:[1,1,17,_],158:[1,1,16,_],210:[1,1,17,I],209:[1,1,16,I],170:[1,1,17,P],169:[1,1,16,P],8:[0,0,0,[[0,1,0,0,8]]],29:[0,0,1,[[0,2,0,0,16]]],30:[0,0,0,[[0,2,0,0,16]]],56:[0,0,128,[[0,2,0,0,8],[0,2,1,0,8]]],109:[0,0,129,[[0,4,0,0,16],[0,4,2,0,16]]],110:[0,0,128,[[0,4,0,0,16],[0,4,2,0,16]]],26:[0,0,160,[[0,4,0,0,8],[0,4,1,0,8],[0,4,2,0,8],[0,4,3,0,8]]],25:[0,0,160,[[0,4,1,0,8],[0,4,2,0,8],[0,4,3,0,8],[0,4,0,0,8]]],104:[0,0,161,M],105:[0,0,160,M],28:[0,0,160,[[0,4,2,0,8],[0,4,1,0,8],[0,4,0,0,8],[0,4,3,0,8]]],27:[0,0,160,[[0,4,3,0,8],[0,4,2,0,8],[0,4,1,0,8],[0,4,0,0,8]]],106:[0,0,161,S],107:[0,0,160,S],2:[0,0,32,[[0,3,0,0,8],[0,3,1,0,8],[0,3,2,0,8]]],3:[0,0,32,[[0,3,2,0,8],[0,3,1,0,8],[0,3,0,0,8]]],119:[0,0,32,[[0,4,0,0,8],[0,4,1,0,8],[0,4,2,0,8]]],121:[0,0,32,[[0,4,2,0,8],[0,4,1,0,8],[0,4,0,0,8]]],71:[0,0,48,[[2,1,0,0,8],[0,1,0,0,8],[1,1,0,0,8]]],111:[0,0,176,[[2,1,0,0,8],[0,1,0,0,8],[1,1,0,0,8],[3,1,0,0,8]]],72:[0,0,49,E],73:[0,0,48,E],74:[0,0,49,T],75:[0,0,48,T],134:[0,0,49,B],135:[0,0,48,B],136:[0,0,49,C],137:[0,0,48,C],76:[0,0,49,U],77:[0,0,48,U],112:[0,0,177,D],113:[0,0,176,D]}},58055:(t,e,r)=>{"use strict";r.d(e,{J:()=>s});const s={0:{bits:8,planar:!1},1:{bits:16,planar:!1},2:{bits:32,planar:!1},10:{bits:64,planar:!1},3:{bits:32,planar:!1},4:{bits:64,planar:!1},5:{bits:8,planar:!0},6:{bits:16,planar:!0},7:{bits:32,planar:!0},11:{bits:64,planar:!0},8:{bits:32,planar:!0},9:{bits:64,planar:!0}}},62751:(t,e,r)=>{"use strict";r.d(e,{$$:()=>n,Eh:()=>m,HR:()=>i,IY:()=>y,Ki:()=>w,Ld:()=>u,Mb:()=>v,Sz:()=>d,Xp:()=>c,_R:()=>a,_m:()=>p,d8:()=>g,iW:()=>l,mX:()=>f,n1:()=>o,os:()=>s,qO:()=>h,u6:()=>A});const s={86017:"mp3",86018:"mp4a.40",86021:"vorbis",86028:"flac",86076:"opus",65542:"ulaw",65543:"alaw",86019:"ac-3",86056:"ec-3",86020:"dtsc",65541:"pcm-u8",65540:"pcm-s8",65536:"pcm-s16",65537:"pcm-s16be",65548:"pcm-s24",65549:"pcm-s24be",65544:"pcm-s32",65545:"pcm-s32be",65557:"pcm-f32",65556:"pcm-f32be",65559:"pcm-f64",65558:"pcm-f64be",225:"av01",27:"avc1",173:"hev1",196:"vvc1",139:"vp8",167:"vp09",12:"mp4v"},i={flv:0,mp4:1,m4s:1,mov:1,ts:2,mts:2,m2ts:2,ivf:5,opus:4,oggs:4,ogg:4,m3u8:2,m3u:2,mpd:1,mp3:14,mkv:8,mka:8,webm:9,aac:15,flac:17,wav:16,srt:19,vtt:18,ssa:20,ass:20,xml:21,ttml:21,h264:11,264:11,avc:11,h265:12,265:12,hevc:12,h266:13,266:13,vvc:13,mpeg:3,mpg:3,rtsp:6,rtmp:7,avi:10,avif:1,heic:1},n={m3u8:4,m3u:4,mpd:5},a={copy:0,h264:27,h261:3,h263:4,h263i:20,h263p:19,mjpeg:7,wmv1:17,wmv2:18,wmv3:71,avc:27,hevc:173,h265:173,vvc:196,h266:196,av1:225,vp9:167,vp8:139,mpeg4:12,theora:30,mpeg2video:2,rv10:5,rv20:6,rv30:68,rv40:69,png:61,bmp:78,webp:171,tiff:96,gif:97},o={copy:0,aac:86018,ac3:86019,eac3:86056,dts:86020,mp3:86017,opus:86076,flac:86028,speex:86051,vorbis:86021,pcm_alaw:65543,pcm_mulaw:65542,wmav1:86023,wmav2:86024,cook:86036,sipr:86057,ralf:86073,pcm_u8:65541,pcm_s16le:65536,pcm_s24le:65548,pcm_s32le:65544,pcm_s64le:65567,pcm_f32le:65557,pcm_f64le:65559},c={webvtt:94226,subrip:94225,ass:94230,ttml:94232,mov_text:94213,hdmv_pgs:94214,hdmv_text:94231,dvd:94208,dvb:94209,eia_608:94218},u={bin_data:98314},h={yuv420p:0,yuv422p:4,yuv444p:5,yuva420p:33,yuva422p:78,yuva444p:79,yuvj420p:12,yuvj422p:13,yuvj444p:14,yuv420p10le:62,yuv422p10le:64,yuv444p10le:68,yuva420p10le:87,yuva422p10le:89,yuva444p10le:91,yuv420p10be:61,yuv422p10be:63,yuv444p10be:67,yuva420p10be:86,yuva422p10be:88,yuva444p10be:90,rgba:26,rgb24:2,bgr24:3,gray:8},d={u8:0,"u8-planar":5,s16:1,"s16-planar":6,s32:2,"s32-planar":7,s64:10,"s64-planar":11,float:3,"float-planar":8,double:4,"double-planar":9},l={flv:0,isobmff:1,mp4:1,mov:1,ts:2,mpegts:2,mpeg:3,ivf:5,ogg:4,opus:4,m3u8:2,m3u:2,mpd:1,mp3:14,mkv:8,matroska:8,mka:8,webm:9,aac:15,flac:17,wav:16,raw_h264:11,raw_h265:12,raw_vvc:13,rtsp:6,rtmp:7,avi:10,h264:11,h265:12,h266:13},f={tv:1,pc:2},p={bt709:1,fcc:4,bt470bg:5,smpte170m:6,smpte240m:7,ycgco:8,gbr:0,bt2020nc:9},m={bt709:1,bt470m:4,bt470bg:5,smpte170m:6,smpte240m:7,smpte428:10,film:8,smpte431:11,smpte432:12,bt2020:9,"jedec-p22":22,ebu3213:22},g={bt709:1,gamma22:4,gamma28:5,smpte170m:6,smpte240m:7,srgb:13,xvycc:11,"bt2020-10":14,"bt2020-12":15,smpte2084:16,"arib-std-b67":18},v={Audio:1,Video:0,Subtitle:3,Attachment:4,Data:2},A={"Tile Grid":3,"Audio Element":1,"Mix Presentation":2},w={default:1,dub:2,original:4,comment:8,lyrics:16,karaoke:32,forced:64,"hearing impaired":128,"visual impaired":256,"clean effects":512,"attached pic":1024,"timed thumbnails":2048,captions:65536,descriptions:131072,metadata:262144,dependent:524288,"still image":1048576,thumbnail:8192},y={mono:4,stereo:3,2.1:11,"3.0":7,"3.0(back)":259,"4.0":263,quad:51,"quad(side)":1539,3.1:15,"5.0":55,"5.0(side)":1543,4.1:271,5.1:63,"5.1(side)":1551,"6.0":1799,"6.0(front)":1731,"3.1.2":20495,hexagonal:311,6.1:1807,"6.1(back)":319,"6.1(front)":1739,"7.0":1591,"7.0(front)":1735,7.1:1599,"7.1(wide)":255,"7.1(wide-side)":1743,"5.1.2":20543,octagonal:1847,cube:184371,"5.1.4":184383,"7.1.2":22079,"7.1.4":185919,"7.2.3":34359825983,"9.1.4":186111,hexadecagonal:6442710839,downmix:1610612736,22.2:2164663779327}},36981:(t,e,r)=>{"use strict";r.d(e,{r:()=>d});var s,i,n=r(49859),a=r(74707),o=r.n(a),c=r(61499),u=r(12085);class h{constructor(){(0,n.A)(this,"id",void 0),(0,n.A)(this,"name",void 0),(0,n.A)(this,"opaque",void 0)}}s=h.prototype,(i=new(o())).set("id",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),i.set("name",{0:4,1:0,2:0,3:1,4:16,5:0,6:0,7:4,8:0}),i.set("opaque",{0:1,1:1,2:1,3:0,4:0,5:0,6:0,7:20,8:0}),(0,u.A)(s,c.Og,!0),(0,u.A)(s,c.dc,4),(0,u.A)(s,c.g7,24),(0,u.A)(s,c.JY,i);class d{constructor(){(0,n.A)(this,"order",void 0),(0,n.A)(this,"nbChannels",void 0),(0,n.A)(this,"u",void 0),(0,n.A)(this,"opaque",void 0)}}!function(t){var e=new(o());e.set("order",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),e.set("nbChannels",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:4,8:0}),e.set("u",{0:function(t){var e=new(o());return e.set("mask",{0:10,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),e.set("map",{0:h,1:1,2:1,3:0,4:0,5:0,6:0,7:0,8:0}),(0,u.A)(t,c.Og,!0),(0,u.A)(t,c.dc,8),(0,u.A)(t,c.g7,8),(0,u.A)(t,c.JY,e),t}({}),1:0,2:0,3:0,4:0,5:0,6:0,7:8,8:0}),e.set("opaque",{0:1,1:1,2:1,3:0,4:0,5:0,6:0,7:16,8:0}),(0,u.A)(t,c.Og,!0),(0,u.A)(t,c.dc,8),(0,u.A)(t,c.g7,24),(0,u.A)(t,c.JY,e)}(d.prototype)},50288:(t,e,r)=>{"use strict";r.d(e,{BU:()=>l});var s,i,n=r(49859),a=r(74707),o=r.n(a),c=r(61499),u=r(12085),h=r(73783);r(37837);class d{constructor(){(0,n.A)(this,"data",0),(0,n.A)(this,"size",0),(0,n.A)(this,"refcount",0),(0,n.A)(this,"free",0),(0,n.A)(this,"opaque",0),(0,n.A)(this,"flags",0),(0,n.A)(this,"flagsInternal",0)}}s=d.prototype,(i=new(o())).set("data",{0:2,1:1,2:1,3:0,4:0,5:0,6:0,7:0,8:0}),i.set("size",{0:25,1:0,2:0,3:0,4:0,5:0,6:0,7:4,8:0}),i.set("refcount",{0:9,1:0,2:0,3:0,4:0,5:0,6:0,7:8,8:0}),i.set("free",{0:1,1:1,2:1,3:0,4:0,5:0,6:0,7:12,8:0}),i.set("opaque",{0:1,1:1,2:1,3:0,4:0,5:0,6:0,7:16,8:0}),i.set("flags",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:20,8:0}),i.set("flagsInternal",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:24,8:0}),(0,u.A)(s,c.Og,!0),(0,u.A)(s,c.dc,4),(0,u.A)(s,c.g7,28),(0,u.A)(s,c.JY,i);class l{constructor(){(0,n.A)(this,"buffer",0),(0,n.A)(this,"data",0),(0,n.A)(this,"size",0)}}!function(t){var e=new(o());e.set("buffer",{0:d,1:1,2:1,3:0,4:0,5:0,6:0,7:0,8:0}),e.set("data",{0:2,1:1,2:1,3:0,4:0,5:0,6:0,7:4,8:0}),e.set("size",{0:25,1:0,2:0,3:0,4:0,5:0,6:0,7:8,8:0}),(0,u.A)(t,c.Og,!0),(0,u.A)(t,c.dc,4),(0,u.A)(t,c.g7,12),(0,u.A)(t,c.JY,e)}(l.prototype);class f{constructor(){(0,n.A)(this,"mutex",void 0),(0,n.A)(this,"pool",0),(0,n.A)(this,"refcount",0),(0,n.A)(this,"size",0),(0,n.A)(this,"opaque",0),(0,n.A)(this,"alloc",0),(0,n.A)(this,"alloc2",0),(0,n.A)(this,"poolFree",0)}}!function(t){var e=new(o());e.set("mutex",{0:h.eu,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),e.set("pool",{get 0(){return p},1:1,2:1,3:0,4:0,5:0,6:0,7:4,8:0}),e.set("refcount",{0:9,1:0,2:0,3:0,4:0,5:0,6:0,7:8,8:0}),e.set("size",{0:25,1:0,2:0,3:0,4:0,5:0,6:0,7:12,8:0}),e.set("opaque",{0:1,1:1,2:1,3:0,4:0,5:0,6:0,7:16,8:0}),e.set("alloc",{0:1,1:1,2:1,3:0,4:0,5:0,6:0,7:20,8:0}),e.set("alloc2",{0:1,1:1,2:1,3:0,4:0,5:0,6:0,7:24,8:0}),e.set("poolFree",{0:1,1:1,2:1,3:0,4:0,5:0,6:0,7:28,8:0}),(0,u.A)(t,c.Og,!0),(0,u.A)(t,c.dc,4),(0,u.A)(t,c.g7,32),(0,u.A)(t,c.JY,e)}(f.prototype);class p{constructor(){(0,n.A)(this,"data",0),(0,n.A)(this,"opaque",0),(0,n.A)(this,"free",0),(0,n.A)(this,"pool",0),(0,n.A)(this,"next",0),(0,n.A)(this,"buffer",void 0)}}!function(t){var e=new(o());e.set("data",{0:2,1:1,2:1,3:0,4:0,5:0,6:0,7:0,8:0}),e.set("opaque",{0:1,1:1,2:1,3:0,4:0,5:0,6:0,7:4,8:0}),e.set("free",{0:1,1:1,2:1,3:0,4:0,5:0,6:0,7:8,8:0}),e.set("pool",{0:f,1:1,2:1,3:0,4:0,5:0,6:0,7:12,8:0}),e.set("next",{0:p,1:1,2:1,3:0,4:0,5:0,6:0,7:16,8:0}),e.set("buffer",{0:d,1:0,2:0,3:0,4:0,5:0,6:0,7:20,8:0}),(0,u.A)(t,c.Og,!0),(0,u.A)(t,c.dc,4),(0,u.A)(t,c.g7,48),(0,u.A)(t,c.JY,e)}(p.prototype)},77162:(t,e,r)=>{"use strict";r.d(e,{A:()=>m});var s,i,n=r(49859),a=r(74707),o=r.n(a),c=r(61499),u=r(12085),h=r(47958),d=r(9599),l=r(36981),f=r(77231),p=r(71766);class m{constructor(){(0,n.A)(this,"codecType",-1),(0,n.A)(this,"codecId",0),(0,n.A)(this,"codecTag",0),(0,n.A)(this,"extradata",0),(0,n.A)(this,"extradataSize",0),(0,n.A)(this,"codedSideData",0),(0,n.A)(this,"nbCodedSideData",0),(0,n.A)(this,"format",f.N_),(0,n.A)(this,"bitrate",BigInt(0)),(0,n.A)(this,"bitsPerCodedSample",0),(0,n.A)(this,"bitsPerRawSample",0),(0,n.A)(this,"profile",f.N_),(0,n.A)(this,"level",f.N_),(0,n.A)(this,"width",0),(0,n.A)(this,"height",0),(0,n.A)(this,"sampleAspectRatio",new d.P({den:1,num:1})),(0,n.A)(this,"framerate",new d.P({den:1,num:0})),(0,n.A)(this,"fieldOrder",0),(0,n.A)(this,"colorRange",0),(0,n.A)(this,"colorPrimaries",2),(0,n.A)(this,"colorTrc",2),(0,n.A)(this,"colorSpace",2),(0,n.A)(this,"chromaLocation",0),(0,n.A)(this,"videoDelay",0),(0,n.A)(this,"chLayout",void 0),(0,n.A)(this,"sampleRate",f.N_),(0,n.A)(this,"blockAlign",0),(0,n.A)(this,"frameSize",0),(0,n.A)(this,"initialPadding",0),(0,n.A)(this,"trailingPadding",0),(0,n.A)(this,"seekPreroll",0),(0,n.A)(this,"flags",0)}destroy(){(0,p.dn)(this[c.o9]),this[c.o9]=0}}s=m.prototype,(i=new(o())).set("codecType",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),i.set("codecId",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:4,8:0}),i.set("codecTag",{0:8,1:0,2:0,3:0,4:0,5:0,6:0,7:8,8:0}),i.set("extradata",{0:2,1:1,2:1,3:0,4:0,5:0,6:0,7:12,8:0}),i.set("extradataSize",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:16,8:0}),i.set("codedSideData",{0:h.lg,1:1,2:1,3:0,4:0,5:0,6:0,7:20,8:0}),i.set("nbCodedSideData",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:24,8:0}),i.set("format",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:28,8:0}),i.set("bitrate",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:32,8:0}),i.set("bitsPerCodedSample",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:40,8:0}),i.set("bitsPerRawSample",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:44,8:0}),i.set("profile",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:48,8:0}),i.set("level",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:52,8:0}),i.set("width",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:56,8:0}),i.set("height",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:60,8:0}),i.set("sampleAspectRatio",{0:d.P,1:0,2:0,3:0,4:0,5:0,6:0,7:64,8:0}),i.set("framerate",{0:d.P,1:0,2:0,3:0,4:0,5:0,6:0,7:72,8:0}),i.set("fieldOrder",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:80,8:0}),i.set("colorRange",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:84,8:0}),i.set("colorPrimaries",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:88,8:0}),i.set("colorTrc",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:92,8:0}),i.set("colorSpace",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:96,8:0}),i.set("chromaLocation",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:100,8:0}),i.set("videoDelay",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:104,8:0}),i.set("chLayout",{0:l.r,1:0,2:0,3:0,4:0,5:0,6:0,7:112,8:0}),i.set("sampleRate",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:136,8:0}),i.set("blockAlign",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:140,8:0}),i.set("frameSize",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:144,8:0}),i.set("initialPadding",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:148,8:0}),i.set("trailingPadding",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:152,8:0}),i.set("seekPreroll",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:156,8:0}),i.set("flags",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:160,8:0}),(0,u.A)(s,c.Og,!0),(0,u.A)(s,c.dc,8),(0,u.A)(s,c.g7,168),(0,u.A)(s,c.JY,i)},56490:(t,e,r)=>{"use strict";r.d(e,{A:()=>d});var s,i,n=r(49859),a=r(74707),o=r.n(a),c=r(61499),u=r(12085);class h{constructor(){(0,n.A)(this,"key",0),(0,n.A)(this,"value",0)}}s=h.prototype,(i=new(o())).set("key",{0:1,1:1,2:1,3:0,4:0,5:0,6:0,7:0,8:0}),i.set("value",{0:1,1:1,2:1,3:0,4:0,5:0,6:0,7:4,8:0}),(0,u.A)(s,c.Og,!0),(0,u.A)(s,c.dc,4),(0,u.A)(s,c.g7,8),(0,u.A)(s,c.JY,i);class d{constructor(){(0,n.A)(this,"count",0),(0,n.A)(this,"elems",0)}}!function(t){var e=new(o());e.set("count",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),e.set("elems",{0:h,1:1,2:1,3:0,4:0,5:0,6:0,7:4,8:0}),(0,u.A)(t,c.Og,!0),(0,u.A)(t,c.dc,4),(0,u.A)(t,c.g7,8),(0,u.A)(t,c.JY,e)}(d.prototype)},55833:(t,e,r)=>{"use strict";var s,i,n=r(49859),a=r(74707),o=r.n(a),c=r(5496),u=r.n(c),h=r(61499),d=r(12085),l=r(56490),f=r(50288),p=r(9599),m=r(94300),g=r(36981),v=r(77231),A=r(56024);class w{constructor(){(0,n.A)(this,"type",0),(0,n.A)(this,"data",0),(0,n.A)(this,"size",0),(0,n.A)(this,"metadata",0),(0,n.A)(this,"buf",0)}}s=w.prototype,(i=new(o())).set("type",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),i.set("data",{0:2,1:1,2:1,3:0,4:0,5:0,6:0,7:4,8:0}),i.set("size",{0:25,1:0,2:0,3:0,4:0,5:0,6:0,7:8,8:0}),i.set("metadata",{0:l.A,1:1,2:1,3:0,4:0,5:0,6:0,7:12,8:0}),i.set("buf",{0:f.BU,1:1,2:1,3:0,4:0,5:0,6:0,7:16,8:0}),(0,d.A)(s,h.Og,!0),(0,d.A)(s,h.dc,4),(0,d.A)(s,h.g7,20),(0,d.A)(s,h.JY,i),function(t){var e=new(o());e.set("displayPrimaries",{0:p.P,1:0,2:0,3:1,4:6,5:0,6:0,7:0,8:0}),e.set("whitePoint",{0:p.P,1:0,2:0,3:1,4:2,5:0,6:0,7:48,8:0}),e.set("minLuminance",{0:p.P,1:0,2:0,3:0,4:0,5:0,6:0,7:64,8:0}),e.set("maxLuminance",{0:p.P,1:0,2:0,3:0,4:0,5:0,6:0,7:72,8:0}),e.set("hasPrimaries",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:80,8:0}),e.set("hasLuminance",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:84,8:0}),(0,d.A)(t,h.Og,!0),(0,d.A)(t,h.dc,4),(0,d.A)(t,h.g7,88),(0,d.A)(t,h.JY,e)}(class{constructor(){(0,n.A)(this,"displayPrimaries",void 0),(0,n.A)(this,"whitePoint",void 0),(0,n.A)(this,"minLuminance",void 0),(0,n.A)(this,"maxLuminance",void 0),(0,n.A)(this,"hasPrimaries",void 0),(0,n.A)(this,"hasLuminance",void 0)}}.prototype),function(t){var e=new(o());e.set("maxCLL",{0:8,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),e.set("maxFALL",{0:8,1:0,2:0,3:0,4:0,5:0,6:0,7:4,8:0}),(0,d.A)(t,h.Og,!0),(0,d.A)(t,h.dc,4),(0,d.A)(t,h.g7,8),(0,d.A)(t,h.JY,e)}(class{constructor(){(0,n.A)(this,"maxCLL",void 0),(0,n.A)(this,"maxFALL",void 0)}}.prototype);class y{constructor(){var t,e,r;(0,n.A)(this,"data",u()(t=new Array(v.pu)).call(t,0,0,v.pu)),(0,n.A)(this,"linesize",u()(e=new Array(v.pu)).call(e,0,0,v.pu)),(0,n.A)(this,"extendedData",0),(0,n.A)(this,"width",v.N_),(0,n.A)(this,"height",v.N_),(0,n.A)(this,"nbSamples",v.N_),(0,n.A)(this,"format",v.N_),(0,n.A)(this,"keyFrame",0),(0,n.A)(this,"pictType",0),(0,n.A)(this,"sampleAspectRatio",new p.P({den:1,num:0})),(0,n.A)(this,"pts",v.Dh),(0,n.A)(this,"pktDts",v.Dh),(0,n.A)(this,"timeBase",void 0),(0,n.A)(this,"quality",v.N_),(0,n.A)(this,"opaque",0),(0,n.A)(this,"repeatPict",v.N_),(0,n.A)(this,"interlacedFrame",v.N_),(0,n.A)(this,"topFieldFirst",v.N_),(0,n.A)(this,"paletteHasChanged",v.N_),(0,n.A)(this,"sampleRate",v.N_),(0,n.A)(this,"buf",u()(r=new Array(v.pu)).call(r,0,0,v.pu)),(0,n.A)(this,"extendedBuf",0),(0,n.A)(this,"nbExtendedBuf",0),(0,n.A)(this,"sideData",0),(0,n.A)(this,"nbSideData",0),(0,n.A)(this,"flags",0),(0,n.A)(this,"colorRange",0),(0,n.A)(this,"colorPrimaries",2),(0,n.A)(this,"colorTrc",2),(0,n.A)(this,"colorSpace",2),(0,n.A)(this,"chromaLocation",0),(0,n.A)(this,"bestEffortTimestamp",v.Dh),(0,n.A)(this,"pktPos",v.Dh),(0,n.A)(this,"metadata",0),(0,n.A)(this,"decodeErrorFlags",0),(0,n.A)(this,"pktSize",v.N_),(0,n.A)(this,"hwFramesCtx",0),(0,n.A)(this,"opaqueRef",0),(0,n.A)(this,"cropTop",0),(0,n.A)(this,"cropBottom",0),(0,n.A)(this,"cropLeft",0),(0,n.A)(this,"cropRight",0),(0,n.A)(this,"privateRef",0),(0,n.A)(this,"chLayout",void 0),(0,n.A)(this,"duration",BigInt(0))}close(){(0,A.to)(this[h.o9]),(0,m.A)(this)}}!function(t){var e=new(o());e.set("data",{0:2,1:1,2:1,3:1,4:8,5:0,6:0,7:0,8:0}),e.set("linesize",{0:15,1:0,2:0,3:1,4:8,5:0,6:0,7:32,8:0}),e.set("extendedData",{0:2,1:1,2:2,3:0,4:0,5:0,6:0,7:64,8:0}),e.set("width",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:68,8:0}),e.set("height",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:72,8:0}),e.set("nbSamples",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:76,8:0}),e.set("format",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:80,8:0}),e.set("keyFrame",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:84,8:0}),e.set("pictType",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:88,8:0}),e.set("sampleAspectRatio",{0:p.P,1:0,2:0,3:0,4:0,5:0,6:0,7:92,8:0}),e.set("pts",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:104,8:0}),e.set("pktDts",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:112,8:0}),e.set("timeBase",{0:p.P,1:0,2:0,3:0,4:0,5:0,6:0,7:120,8:0}),e.set("quality",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:128,8:0}),e.set("opaque",{0:1,1:1,2:1,3:0,4:0,5:0,6:0,7:132,8:0}),e.set("repeatPict",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:136,8:0}),e.set("interlacedFrame",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:140,8:0}),e.set("topFieldFirst",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:144,8:0}),e.set("paletteHasChanged",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:148,8:0}),e.set("sampleRate",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:152,8:0}),e.set("buf",{0:f.BU,1:1,2:1,3:1,4:8,5:0,6:0,7:156,8:0}),e.set("extendedBuf",{0:f.BU,1:1,2:2,3:0,4:0,5:0,6:0,7:188,8:0}),e.set("nbExtendedBuf",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:192,8:0}),e.set("sideData",{0:w,1:1,2:2,3:0,4:0,5:0,6:0,7:196,8:0}),e.set("nbSideData",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:200,8:0}),e.set("flags",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:204,8:0}),e.set("colorRange",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:208,8:0}),e.set("colorPrimaries",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:212,8:0}),e.set("colorTrc",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:216,8:0}),e.set("colorSpace",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:220,8:0}),e.set("chromaLocation",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:224,8:0}),e.set("bestEffortTimestamp",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:232,8:0}),e.set("pktPos",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:240,8:0}),e.set("metadata",{0:l.A,1:1,2:1,3:0,4:0,5:0,6:0,7:248,8:0}),e.set("decodeErrorFlags",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:252,8:0}),e.set("pktSize",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:256,8:0}),e.set("hwFramesCtx",{0:f.BU,1:1,2:1,3:0,4:0,5:0,6:0,7:260,8:0}),e.set("opaqueRef",{0:f.BU,1:1,2:1,3:0,4:0,5:0,6:0,7:264,8:0}),e.set("cropTop",{0:25,1:0,2:0,3:0,4:0,5:0,6:0,7:268,8:0}),e.set("cropBottom",{0:25,1:0,2:0,3:0,4:0,5:0,6:0,7:272,8:0}),e.set("cropLeft",{0:25,1:0,2:0,3:0,4:0,5:0,6:0,7:276,8:0}),e.set("cropRight",{0:25,1:0,2:0,3:0,4:0,5:0,6:0,7:280,8:0}),e.set("privateRef",{0:f.BU,1:1,2:1,3:0,4:0,5:0,6:0,7:284,8:0}),e.set("chLayout",{0:g.r,1:0,2:0,3:0,4:0,5:0,6:0,7:288,8:0}),e.set("duration",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:312,8:0}),(0,d.A)(t,h.Og,!0),(0,d.A)(t,h.dc,8),(0,d.A)(t,h.g7,320),(0,d.A)(t,h.JY,e)}(y.prototype),function(t){var e=new(o());e.set("refCount",{0:16,1:0,2:0,3:0,4:0,5:0,6:0,7:320,8:0}),(0,d.A)(t,h.Og,!0),(0,d.A)(t,h.dc,8),(0,d.A)(t,h.g7,328),(0,d.A)(t,h.JY,e)}(class extends y{constructor(...t){super(...t),(0,n.A)(this,"refCount",void 0)}}.prototype)},47958:(t,e,r)=>{"use strict";r.d(e,{lg:()=>f});var s,i,n=r(49859),a=r(74707),o=r.n(a),c=r(61499),u=r(12085),h=r(50288),d=r(9599),l=r(77231);class f{constructor(){(0,n.A)(this,"data",0),(0,n.A)(this,"size",0),(0,n.A)(this,"type",-1)}}s=f.prototype,(i=new(o())).set("data",{0:2,1:1,2:1,3:0,4:0,5:0,6:0,7:0,8:0}),i.set("size",{0:25,1:0,2:0,3:0,4:0,5:0,6:0,7:4,8:0}),i.set("type",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:8,8:0}),(0,u.A)(s,c.Og,!0),(0,u.A)(s,c.dc,4),(0,u.A)(s,c.g7,12),(0,u.A)(s,c.JY,i),function(t){var e=new(o());e.set("wallclock",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),e.set("flags",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:8,8:0}),(0,u.A)(t,c.Og,!0),(0,u.A)(t,c.dc,8),(0,u.A)(t,c.g7,16),(0,u.A)(t,c.JY,e)}(class{constructor(){(0,n.A)(this,"wallclock",void 0),(0,n.A)(this,"flags",void 0)}}.prototype);class p{constructor(){(0,n.A)(this,"buf",0),(0,n.A)(this,"pts",l.Dh),(0,n.A)(this,"dts",l.Dh),(0,n.A)(this,"data",0),(0,n.A)(this,"size",0),(0,n.A)(this,"streamIndex",l.N_),(0,n.A)(this,"flags",0),(0,n.A)(this,"sideData",0),(0,n.A)(this,"sideDataElems",0),(0,n.A)(this,"duration",l.Dh),(0,n.A)(this,"pos",l.Dh),(0,n.A)(this,"opaque",0),(0,n.A)(this,"opaqueRef",0),(0,n.A)(this,"timeBase",new d.P({den:l.SF,num:1}))}}!function(t){var e=new(o());e.set("buf",{0:h.BU,1:1,2:1,3:0,4:0,5:0,6:0,7:0,8:0}),e.set("pts",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:8,8:0}),e.set("dts",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:16,8:0}),e.set("data",{0:2,1:1,2:1,3:0,4:0,5:0,6:0,7:24,8:0}),e.set("size",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:28,8:0}),e.set("streamIndex",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:32,8:0}),e.set("flags",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:36,8:0}),e.set("sideData",{0:f,1:1,2:1,3:0,4:0,5:0,6:0,7:40,8:0}),e.set("sideDataElems",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:44,8:0}),e.set("duration",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:48,8:0}),e.set("pos",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:56,8:0}),e.set("opaque",{0:1,1:1,2:1,3:0,4:0,5:0,6:0,7:64,8:0}),e.set("opaqueRef",{0:h.BU,1:1,2:1,3:0,4:0,5:0,6:0,7:68,8:0}),e.set("timeBase",{0:d.P,1:0,2:0,3:0,4:0,5:0,6:0,7:72,8:0}),(0,u.A)(t,c.Og,!0),(0,u.A)(t,c.dc,8),(0,u.A)(t,c.g7,80),(0,u.A)(t,c.JY,e)}(p.prototype),function(t){var e=new(o());e.set("refCount",{0:16,1:0,2:0,3:0,4:0,5:0,6:0,7:80,8:0}),(0,u.A)(t,c.Og,!0),(0,u.A)(t,c.dc,8),(0,u.A)(t,c.g7,88),(0,u.A)(t,c.JY,e)}(class extends p{constructor(...t){super(...t),(0,n.A)(this,"refCount",void 0)}}.prototype)},10278:(t,e,r)=>{"use strict";var s,i,n=r(49859),a=r(74707),o=r.n(a),c=r(61499),u=r(12085);class h{constructor(){(0,n.A)(this,"data",void 0),(0,n.A)(this,"linesize",void 0),(0,n.A)(this,"nbSamples",void 0),(0,n.A)(this,"maxnbSamples",void 0),(0,n.A)(this,"channels",void 0),(0,n.A)(this,"sampleRate",void 0),(0,n.A)(this,"format",void 0),(0,n.A)(this,"timestamp",void 0),(0,n.A)(this,"duration",void 0)}}s=h.prototype,(i=new(o())).set("data",{0:2,1:1,2:2,3:0,4:0,5:0,6:0,7:0,8:0}),i.set("linesize",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:4,8:0}),i.set("nbSamples",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:8,8:0}),i.set("maxnbSamples",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:12,8:0}),i.set("channels",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:16,8:0}),i.set("sampleRate",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:20,8:0}),i.set("format",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:24,8:0}),i.set("timestamp",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:32,8:0}),i.set("duration",{0:19,1:0,2:0,3:0,4:0,5:0,6:0,7:40,8:0}),(0,u.A)(s,c.Og,!0),(0,u.A)(s,c.dc,8),(0,u.A)(s,c.g7,48),(0,u.A)(s,c.JY,i),function(t){var e=new(o());e.set("refCount",{0:16,1:0,2:0,3:0,4:0,5:0,6:0,7:48,8:0}),(0,u.A)(t,c.Og,!0),(0,u.A)(t,c.dc,8),(0,u.A)(t,c.g7,56),(0,u.A)(t,c.JY,e)}(class extends h{constructor(...t){super(...t),(0,n.A)(this,"refCount",void 0)}}.prototype)},9599:(t,e,r)=>{"use strict";r.d(e,{P:()=>h});var s,i,n=r(49859),a=r(74707),o=r.n(a),c=r(61499),u=r(12085);class h{constructor(t){(0,n.A)(this,"num",1),(0,n.A)(this,"den",1),t&&(this.den=t.den,this.num=t.num)}}s=h.prototype,(i=new(o())).set("num",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),i.set("den",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:4,8:0}),(0,u.A)(s,c.Og,!0),(0,u.A)(s,c.dc,4),(0,u.A)(s,c.g7,8),(0,u.A)(s,c.JY,i)},11573:(t,e,r)=>{"use strict";function s(t,e){let r=0;for(let s=0;s<e;s++)r=2*r+t.readU1();return r}function i(t){let e=0;for(;!s(t,1);)e++;return e>=32?0:s(t,e)+(1<<e)-1}function n(t){let e=0;for(let r=0;r<8;r++){let i=s(t,8);if(e|=(127&i)<<7*r,!(128&i))break}return e}r.d(e,{d:()=>i,f:()=>s,v:()=>n}),r(54810)},37815:(t,e,r)=>{"use strict";r.d(e,{A6:()=>v,D$:()=>l,Q7:()=>m,VG:()=>f,aw:()=>d,us:()=>g});var s=r(14686),i=r(63939),n=r(50932),a=r(37837),o=r(40046),c=(r(50288),r(73783)),u=r(52699);const h=1;function d(t,e,r=0,s=0,i=0){const c=(0,a.Gy)(28);if(!c)return 0;const u=function(t,e,r,s=0,i=0,c=0){n.M[20](t,e),n.M[25](t+4,r),n.M[20](t+12,s),n.M[20](t+16,i),o.M_(t+8,1,9,2),n.M[15](t+20,c);const u=(0,a.Gy)(12);return u?(n.M[20](u,t),n.M[20](u+4,e),n.M[25](u+8,r),u):0}(c,t,e,r,s,i);return u||((0,a.Eb)(c),0)}function l(t){return d((0,a.sY)(t),t)}function f(t){const e=(0,a.Gy)(12);return(0,s.Mr)(e,t,12),o.WQ(i.f[20](t)+8,1,9,2),e}function p(t,e){const r=i.f[20](i.f[20](t));if(e?((0,s.Mr)(i.f[20](t),i.f[20](e),12),(0,a.aI)(e)):(0,a.aI)(t),1===o.jb(r+8,1,9,2)){const t=!(2&i.f[15](r+24));i.f[20](r+16)?A(i.f[20](r+16),i.f[20](r)):(0,a.Eb)(i.f[20](r)),t&&(0,a.Eb)(r)}}function m(t){t&&i.f[20](t)&&p(t,0)}function g(t,e){const r=i.f[20](t);if(!e)return m(t),0;if(r&&i.f[20](r+4)===i.f[20](e+4))return n.M[20](r+4,i.f[20](e+4)),n.M[25](r+8,i.f[25](e+8)),0;const s=f(e);return m(t),n.M[20](t,s),0}function v(t,e){if(!i.f[20](t)){const r=d((0,a.cz)(0,e),e);return n.M[20](t,r),n.M[15](i.f[20](r)+24,i.f[15](i.f[20](r)+24)|h),0}const r=i.f[20](t),c=i.f[20](r);if(i.f[25](r+8)===e)return 0;if(!(i.f[15](c+24)&h&&function(t){return 1&i.f[15](i.f[20](t)+20)?0:1===o.Hh(i.f[20](t)+8,9,2)?1:0}(r)&&i.f[20](r+4)===i.f[20](c))){let r=u.z(4);n.M[20](r,0);const a=v(r,e);return a<0?(u.t(4),a):((0,s.Mr)(i.f[20](i.f[20](r)+4),i.f[20](c),Math.min(e,i.f[25](c+4))),p(t,r),u.t(4),0)}const l=(0,a.cz)(i.f[20](c),e);return n.M[20](r+4,l),n.M[20](c,l),n.M[25](r+8,e),n.M[25](c+4,e),0}function A(t,e){const r=t,s=i.f[20](r+12);c.s2(s),n.M[20](r+16,i.f[20](s+4)),n.M[20](s+4,r),c.Tl(s),1===o.jb(s+8,1,9,2)&&function(t){!function(t){for(;i.f[20](t+4);){const e=i.f[20](t+4);n.M[20](t+4,i.f[20](e+16)),i.f[20](e+4)?A(i.f[20](e+4),i.f[20](e)):(0,a.Eb)(i.f[20](e)),(0,a.Eb)(e)}}(t),c.zr(t),(0,a.Eb)(t)}(s)}},73749:(t,e,r)=>{"use strict";r.d(e,{AO:()=>f,IH:()=>l,Zx:()=>v,a5:()=>m});var s=r(64007),i=r.n(s),n=r(63939),a=r(50932),o=(r(56490),r(11473)),c=r(14686),u=r(37837),h=r(67672),d=r(62100);function l(t){f(n.f[20](t)),(0,u.aI)(t)}function f(t){if(t){for(;a.M[15](t,n.f[15](t)-1),n.f[15](t)+1;)(0,u.aI)(n.f[20](t+4)+8*n.f[15](t)),(0,u.aI)(n.f[20](t+4)+8*n.f[15](t)+4);(0,u.aI)(t+4)}}function p(t,e){let r=0;return t?(e&&(r=1+(e-n.f[20](t+4)>>3)),r>=n.f[15](t)?0:n.f[20](t+4)+8*r):0}function m(t,e,r,s=0){if(!t)throw new Error("m is nullptr");let u=0;if(64&s&&(u=function(t,e,r=0,s=0){if(!t)return 0;let a=r;if(!e)return 0;for(;a=p(t,a);){let t=(0,c.lH)(n.f[20](a));if(1&s&&(t.toLocaleLowerCase(),e.toLocaleLowerCase()),t===e||2&s&&0===i()(t).call(t,e))return a}}(t,e,0,s)),u){if(16&s)return 0;32&s&&(r=`${(0,c.lH)(n.f[20](u+4))},${r}`),o.s_.free(n.f[20](u+4)),a.M[20](u+4,o.s_.malloc(r.length+1)),(0,c.qW)(n.f[20](u+4),r,r.length)}else{h.Yj(r)||(r=(0,d.A)(r));let s=o.s_.realloc(n.f[20](t+4),8*(n.f[15](t)+1));a.M[20](t+4,s),a.M[20](n.f[20](t+4)+8*n.f[15](t),o.s_.malloc(e.length+1)),a.M[20](n.f[20](t+4)+8*n.f[15](t)+4,o.s_.malloc(r.length+1)),(0,c.qW)(n.f[20](n.f[20](t+4)+8*n.f[15](t)),e,e.length),(0,c.qW)(n.f[20](n.f[20](t+4)+8*n.f[15](t)+4),r,r.length),a.M[15](t,n.f[15](t)+1)}return 0}function g(t,e,r,s=0){let i=n.f[20](t);return i||(i=(0,u.Gy)(8),a.M[20](t,i)),m(i,e,r,s)}function v(t,e,r){if(!e)return-1;let s=0;for(;s=p(e,s);){let e=g(t,(0,c.lH)(n.f[20](s)),(0,c.lH)(n.f[20](s+4)),r);if(e<0)return e}return 0}},56024:(t,e,r)=>{"use strict";r.d(e,{Cj:()=>P,FP:()=>A,UD:()=>k,_h:()=>b,gg:()=>_,rh:()=>x,to:()=>I,xj:()=>w});var s,i=r(14686),n=r(63939),a=r(50932),o=(r(36981),r(9599),r(55833),r(37837)),c=r(77231),u=r(37815),h=r(73749),d=r(9705),l=r(99991),f=r(66788),p=r(97317),m=r(52699),g=r(38156),v=r(95073);function A(){const t=(0,o.Gy)(320);return b(t),t}function w(t){I(t),(0,o.Eb)(t)}function y(t){const e=n.f[20](t);(0,u.Q7)(e+16),(0,h.IH)(e+12),(0,o.aI)(t)}function b(t){n.f[20](t+64)!==t&&(0,o.aI)(t+64),(0,l.bl)(t+288),(0,i.sO)(t,0,320),a.M[17](t+104,c.Dh),a.M[17](t+112,c.Dh),a.M[17](t+232,c.Dh),a.M[17](t+240,c.Dh),a.M[15](t+256,-1),a.M[15](t+84,1),a.M[15](t+92,0),a.M[15](t+96,1),a.M[15](t+80,-1),a.M[20](t+64,t),a.M[15](t+212,2),a.M[15](t+216,2),a.M[15](t+220,2),a.M[15](t+208,0),a.M[15](t+224,0),a.M[15](t+204,0)}function k(t,e=0){if(!(0,p.I)(n.f[15](t+80)))return d.UY;const r=m.z(16),s=m.z(16),i=Math.max(32,e);let o=0;if(!n.f[15](t+32)){e<=0&&(e=32);for(let r=1;r<e;r+=r){if(o=(0,g.O5)(t+32,n.f[15](t+80),(0,v.A)(n.f[15](t+68),r)),o<0)return f(),o;if(!(n.f[15](t+32)&e-1))break}for(let r=0;r<4&&n.f[15](t+32+4*r);r++)a.M[15](t+32+4*r,(0,v.A)(n.f[15](t+32+4*r),e))}for(let e=0;e<4;e++)a.M[15](r+4*e,n.f[15](t+32+4*e));const h=(0,v.A)(n.f[15](t+72),32);if((o=(0,g.S5)(s,n.f[15](t+80),h,r))<0)return f(),o;let l=4*i;for(let t=0;t<4;t++)n.f[25](s+4*t)>c.go-l&&d.UY,l+=n.f[25](s+4*t);if(a.M[20](t+156,(0,u.D$)(l)),!n.f[20](t+156))return I(t),f(),d.gR;if((o=(0,g.Xo)(t,n.f[15](t+80),h,n.f[20](n.f[20](t+156)+4),r))<0)return I(t),f(),o;for(let e=1;e<4;e++)n.f[20](t+4*e)&&a.M[20](t+4*e,n.f[20](t+4*e)+e*i);return a.M[20](t+64,t),f(),0;function f(){m.t(16),m.t(16)}}function x(t,e){const r=(0,f.K0)(n.f[15](t+80)),s=n.f[15](t+292),i=r?s:1;let h=0;if(!n.f[15](t+32)){if(h=(0,f.f8)(n.f[15](t+80),s,n.f[15](t+76),e),h<0)return h;a.M[15](t+32,h)}if(i>c.pu){if(a.M[20](t+64,(0,o.sY)(4*i)),a.M[20](t+188,(0,o.sY)(4*i)),!n.f[20](t+188)||!n.f[20](t+64))return(0,o.aI)(t+64),(0,o.aI)(t+188),d.gR;a.M[15](t+192,i-c.pu)}else a.M[20](t+64,t);for(let e=0;e<Math.min(i,c.pu);e++){if(a.M[20](t+156+4*e,(0,u.D$)(n.f[15](t+32))),!n.f[20](t+156+4*e))return I(t),d.gR;a.M[20](n.f[20](t+64)+4*e,n.f[20](n.f[20](t+156+4*e)+4)),a.M[20](t+4*e,n.f[20](n.f[20](t+156+4*e)+4))}for(let e=0;e<i-c.pu;e++){if(a.M[20](n.f[20](t+188)+4*e,(0,u.D$)(n.f[15](t+32))),!n.f[20](n.f[20](t+188)+4*e))return I(t),d.gR;a.M[20](n.f[20](t+64)+4*(e+c.pu),n.f[20](n.f[20](n.f[20](t+188)+4*e)+4))}}function _(t,e){a.M[15](t+80,n.f[15](e+80)),a.M[15](t+68,n.f[15](e+68)),a.M[15](t+72,n.f[15](e+72)),(0,i.Mr)(t+288,e+288,24),a.M[15](t+76,n.f[15](e+76));let r=P(t,e);if(r<0)return r;if(!n.f[20](e+156)){for(let r=0;r<8;r++){if(!n.f[20](e+4*r)||!n.f[15](e+32+4*r))continue;let s=n.f[15](e+32+4*r);if(a.M[20](t+4*r,(0,o.sY)(s)),!n.f[20](t+4*r))return I(t),d.gR;(0,i.Mr)(n.f[20](t+4*r),n.f[20](e+4*r),s)}return 0}for(let r=0;r<8;r++)if(n.f[20](e+156+4*r)&&(a.M[20](t+156+4*r,(0,u.VG)(n.f[20](e+156+4*r))),!n.f[20](t+156+4*r)))return I(t),d.gR;if(n.f[20](e+188)){if(a.M[20](t+188,(0,o.Gy)(4*n.f[15](e+192))),!n.f[20](t+188))return I(t),d.gR;a.M[15](t+192,n.f[15](e+192));for(let r=0;r<n.f[15](e+192);r++)if(a.M[20](n.f[20](t+188)+4*r,(0,u.VG)(n.f[20](n.f[20](e+188)+4*r))),!n.f[20](n.f[20](t+188)+4*r))return I(t),d.gR}if(n.f[20](e+64)!==e){let r=n.f[15](e+292);if(!r)return I(t),d.UY;if(a.M[20](t+64,(0,o.Gy)(4*r)),!n.f[20](t+64))return I(t),d.gR;(0,i.Mr)(n.f[20](t+64),n.f[20](e+64),4*r)}else a.M[20](t+64,t);return(0,i.Mr)(t,e,32),(0,i.Mr)(t+32,e+32,32),0}function I(t){if(t){!function(t){!function(t,e){const r=n.f[15](e),s=n.f[20](t);for(let t=0;t<r;t++)y(s+4*t);a.M[15](e,0),(0,o.aI)(t)}(t+196,t+200)}(t);for(let e=0;e<8;e++)(0,u.Q7)(t+156+4*e);for(let e=0;e<n.f[15](t+192);e++)(0,u.Q7)(n.f[20](t+188)+4*e);(0,o.aI)(t+188),(0,h.IH)(t+248),(0,u.Q7)(t+260),(0,u.Q7)(t+264),(0,u.Q7)(t+284),b(t)}}function P(t,e){a.M[15](t+84,n.f[15](e+84)),a.M[15](t+88,n.f[15](e+88)),(0,i.Mr)(t+92,e+92,8),a.M[25](t+268,n.f[25](e+268)),a.M[25](t+272,n.f[25](e+272)),a.M[25](t+276,n.f[25](e+276)),a.M[25](t+280,n.f[25](e+280)),a.M[17](t+104,n.f[17](e+104)),a.M[17](t+312,n.f[17](e+312)),a.M[15](t+136,n.f[15](e+136)),a.M[15](t+140,n.f[15](e+140)),a.M[15](t+144,n.f[15](e+144)),a.M[15](t+148,n.f[15](e+148)),a.M[15](t+152,n.f[15](e+152)),a.M[20](t+132,n.f[20](e+132)),a.M[17](t+112,n.f[17](e+112)),a.M[17](t+240,n.f[17](e+240)),a.M[15](t+256,n.f[15](e+256)),(0,i.Mr)(t+120,e+120,8),a.M[15](t+128,n.f[15](e+128)),a.M[17](t+232,n.f[17](e+232)),a.M[15](t+204,n.f[15](e+204)),a.M[15](t+252,n.f[15](e+252)),a.M[15](t+212,n.f[15](e+212)),a.M[15](t+216,n.f[15](e+216)),a.M[15](t+220,n.f[15](e+220)),a.M[15](t+208,n.f[15](e+208)),a.M[15](t+224,n.f[15](e+224)),(0,h.Zx)(t+248,n.f[20](e+248),0);for(let i=0;i<n.f[15](e+200);i++){const l=n.f[20](n.f[20](e+196)+4*i),f=(0,u.VG)(n.f[20](l+16)),p=(r=t+196,s=t+200,c=n.f[15](l),(d=f)?function(t,e,r,s,i,c){const u=(0,o.cz)(n.f[20](t),4*(n.f[15](e)+1));a.M[20](t,u);const h=(0,o.Gy)(20);return a.M[20](h+16,s),a.M[20](h+4,i),a.M[25](h+8,c),a.M[15](h,r),a.M[20](u+4*n.f[15](e),h),a.M[15](e,n.f[15](e)+1),h}(r,s,c,d,n.f[20](d+4),n.f[25](d+8)):0);(0,h.Zx)(p+12,n.f[20](l+12),0)}var r,s,c,d;let l=(0,u.us)(t+264,n.f[20](e+264));return l|=(0,u.us)(t+284,n.f[20](e+284)),l}!function(t){t[t.UNIQUE=1]="UNIQUE"}(s||(s={}))},71517:(t,e,r)=>{"use strict";r.d(e,{$W:()=>m,E4:()=>g,Is:()=>A,NX:()=>S,NZ:()=>b,Ow:()=>v,Pd:()=>k,Qe:()=>y,Un:()=>d,Up:()=>P,Zx:()=>M,_5:()=>w,fQ:()=>p,iI:()=>h,rN:()=>I,rU:()=>l,sn:()=>f,zu:()=>x});var s=r(14686),i=r(63939),n=r(50932),a=(r(47958),r(37837)),o=r(77231),c=r(37815);const u=64;function h(t,e){return e?(0,s.JW)(i.f[20](t+24),i.f[15](t+28)):(0,s.s3)(i.f[20](t+24),i.f[15](t+28))}function d(t,e,r){const s=i.f[15](e),n=i.f[20](t);for(let t=0;t<s;t++)if(i.f[15](n+12*t+8)===r)return n+12*t;return 0}function l(t,e){return d(t+40,t+44,e)}function f(t,e,r){const s=i.f[15](e),n=i.f[20](t);for(let t=0;t<s;t++)if(i.f[15](n+12*t+8)===r)return!0;return!1}function p(t,e){return f(t+40,t+44,e)}function m(t,e,r,o,c){const u=i.f[15](e),h=i.f[20](t);for(let t=0;t<u;t++)if(i.f[15](h+12*t+8)===r)return(0,a.Eb)(i.f[20](h+12*t)),n.M[20](h+12*t,o),void n.M[25](h+12*t+4,c);const d=12*(u+1),l=(0,a.Gy)(d);if(u)for(let t=0;t<u;t++)(0,s.Mr)(l+12*t,h+12*t,12);const f=l+12*u;return n.M[20](f,o),n.M[15](f+8,r),n.M[25](f+4,c),h&&(0,a.Eb)(h),n.M[20](t,l),n.M[15](e,u+1),f}function g(t,e,r,i){const n=(0,a.sY)(i+u);return(0,s.sO)(n+i,0,u),m(t,e,r,n,i)}function v(t,e,r,s){m(t+40,t+44,e,r,s)}function A(t,e){let r=-1;for(let s=0;s<i.f[15](t+44);s++)if(i.f[15](i.f[20](t+40)+12*s+8)===e){r=s;break}if(r>-1)if(1===i.f[15](t+44))(0,a.Eb)(i.f[20](i.f[20](t+40))),(0,a.Eb)(i.f[20](t+40)),n.M[20](t+40,0),n.M[15](t+44,0);else{const e=12*(i.f[15](t+44)-1),o=(0,a.Gy)(e);for(let e=0;e<i.f[15](t+44);e++)e!==r?(0,s.Mr)(o+12*e,i.f[20](t+40)+12*e,12):(0,a.Eb)(i.f[20](i.f[20](t+40)+12*e));(0,a.Eb)(i.f[20](t+40)),n.M[20](t+40,o),n.M[15](t+44,i.f[15](t+44)-1)}}function w(){const t=(0,a.Gy)(80);return k(t),t}function y(t){P(t),(0,a.Eb)(t)}function b(t,e){const r=i.f[20](t),s=i.f[15](e);if(r){for(let t=0;t<s;t++)(0,a.Eb)(i.f[20](r+12*t));(0,a.aI)(t),n.M[15](e,0)}}function k(t){n.M[20](t+24,0),n.M[15](t+28,0),n.M[20](t+40,0),n.M[15](t+44,0),n.M[15](t+32,o.N_),n.M[17](t+56,o.Dh),n.M[17](t+48,o.Dh),n.M[15](t+36,0),n.M[17](t+16,o.Dh),n.M[17](t+8,o.Dh),n.M[15](t+76,o.SF),n.M[15](t+72,1),n.M[20](t,0)}function x(t,e){return n.M[15](t+32,i.f[15](e+32)),n.M[17](t+56,i.f[17](e+56)),n.M[17](t+48,i.f[17](e+48)),n.M[15](t+36,i.f[15](e+36)),n.M[17](t+16,i.f[17](e+16)),n.M[17](t+8,i.f[17](e+8)),n.M[20](t+64,i.f[20](e+64)),n.M[15](t+76,i.f[15](e+76)),n.M[15](t+72,i.f[15](e+72)),n.M[20](t+68,0),(0,c.us)(t+68,i.f[20](e+68)),function(t,e){if(b(t+40,t+44),i.f[15](e+44)){let r=12;n.M[20](t+40,(0,a.Gy)(r*i.f[15](e+44)));for(let r=0;r<i.f[15](e+44);r++)n.M[25](i.f[20](t+40)+12*r+4,i.f[25](i.f[20](e+40)+12*r+4)),n.M[15](i.f[20](t+40)+12*r+8,i.f[15](i.f[20](e+40)+12*r+8)),n.M[20](i.f[20](t+40)+12*r,(0,a.sY)(i.f[25](i.f[20](e+40)+12*r+4))),(0,s.Mr)(i.f[20](i.f[20](t+40)+12*r),i.f[20](i.f[20](e+40)+12*r),i.f[25](i.f[20](e+40)+12*r+4));n.M[15](t+44,i.f[15](e+44))}}(t,e),0}function _(t,e){return(0,c.A6)(t,e+u),(0,s.sO)(i.f[20](i.f[20](t)+4)+e,0,u),0}function I(t,e){return i.f[20](t)&&(0,c.Q7)(t),n.M[20](t,0),x(t,e),!i.f[20](e)&&i.f[15](e+28)?(_(t,i.f[15](e+28)),i.f[15](e+28)&&(0,s.Mr)(i.f[20](i.f[20](t)+4),i.f[20](e+24),i.f[15](e+28)),n.M[20](t+24,i.f[20](i.f[20](t)+4))):i.f[20](e)&&(n.M[20](t,(0,c.VG)(i.f[20](e))),n.M[20](t+24,i.f[20](e+24))),n.M[15](t+28,i.f[15](e+28)),0}function P(t){b(t+40,t+44),(0,c.Q7)(t+68),i.f[20](t)?(0,c.Q7)(t):i.f[20](t+24)&&(0,a.Eb)(i.f[20](t+24)),k(t)}function M(t,e){i.f[20](t)&&(0,c.Q7)(t),n.M[20](t,0),!i.f[20](e)&&i.f[15](e+28)?(_(t,i.f[15](e+28)),i.f[15](e+28)&&(0,s.Mr)(i.f[20](i.f[20](t)+4),i.f[20](e+24),i.f[15](e+28)),n.M[20](t+24,i.f[20](i.f[20](t)+4))):i.f[20](e)&&(n.M[20](t,(0,c.VG)(i.f[20](e))),n.M[20](t+24,i.f[20](e+24))),n.M[15](t+28,i.f[15](e+28))}function S(t,e,r){i.f[20](t)?(0,c.Q7)(t):i.f[20](t+24)&&(0,a.Eb)(i.f[20](t+24)),n.M[20](t,(0,c.aw)(e,r+u)),n.M[20](t+24,e),n.M[15](t+28,r)}},99991:(t,e,r)=>{"use strict";r.d(e,{ML:()=>h,bl:()=>u,xY:()=>d});var s=r(63939),i=r(50932),n=r(85103),a=r(37837),o=r(14686),c=r(9705);function u(t){2==s.f[15](t)&&(0,a.aI)(t+8),(0,o.sO)(t,0,24)}function h(t,e){return e?(i.M[15](t,1),i.M[15](t+4,(0,n.Xb)(e)),i.M[10](t+8,e),0):c.UY}function d(t,e){if(e<=0)throw new Error("invalid channels");const r=(0,a.Gy)(24*e);for(let t=0;t<e;t++)i.M[15](r+24*t,768);i.M[15](t,2),i.M[15](t+4,e),i.M[20](t+8,r)}},71766:(t,e,r)=>{"use strict";r.d(e,{Yi:()=>h,dn:()=>d});var s=r(14686),i=r(63939),n=r(50932),a=(r(36981),r(9599),r(37837)),o=r(99991),c=r(71517),u=r(77231);function h(t,e){n.M[15](t,i.f[15](e)),n.M[15](t+4,i.f[15](e+4)),n.M[8](t+8,i.f[8](e+8)),n.M[15](t+28,i.f[15](e+28)),n.M[17](t+32,i.f[17](e+32)),n.M[15](t+40,i.f[15](e+40)),n.M[15](t+44,i.f[15](e+44)),n.M[15](t+48,i.f[15](e+48)),n.M[15](t+52,i.f[15](e+52)),n.M[15](t+56,i.f[15](e+56)),n.M[15](t+60,i.f[15](e+60)),n.M[15](t+68,i.f[15](e+68)),n.M[15](t+64,i.f[15](e+64)),n.M[15](t+80,i.f[15](e+80)),n.M[15](t+84,i.f[15](e+84)),n.M[15](t+88,i.f[15](e+88)),n.M[15](t+92,i.f[15](e+92)),n.M[15](t+96,i.f[15](e+96)),n.M[15](t+100,i.f[15](e+100)),n.M[15](t+104,i.f[15](e+104)),(0,s.Mr)(t+112,e+112,24),n.M[15](t+136,i.f[15](e+136)),n.M[15](t+140,i.f[15](e+140)),n.M[15](t+144,i.f[15](e+144)),n.M[15](t+148,i.f[15](e+148)),n.M[15](t+152,i.f[15](e+152)),n.M[15](t+156,i.f[15](e+156)),n.M[15](t+160,i.f[15](e+160)),(0,s.Mr)(t+72,e+72,8),i.f[20](e+12)&&(i.f[20](t+12)&&(0,a.Eb)(i.f[20](t+12)),n.M[20](t+12,(0,a.sY)(i.f[15](e+16))),n.M[15](t+16,i.f[15](e+16)),(0,s.Mr)(i.f[20](t+12),i.f[20](e+12),i.f[15](e+16))),i.f[20](e+20)&&function(t,e,r,o){if(!r)return;const c=(0,a.Gy)(12*o);for(let t=0;t<o;t++)n.M[15](c+12*t+8,i.f[15](r+12*t+8)),n.M[25](c+12*t+4,i.f[25](r+12*t+4)),n.M[20](c+12*t,(0,a.sY)(i.f[25](r+12*t+4))),(0,s.Mr)(i.f[20](c+12*t),i.f[20](r+12*t),i.f[25](r+12*t+4));n.M[15](e,o),n.M[20](t,c)}(t+20,t+24,i.f[20](e+20),i.f[15](e+24))}function d(t){t&&(function(t){i.f[20](t+12)&&(0,a.aI)(t+12),(0,o.bl)(t+112),(0,c.NZ)(t+20,t+24),(0,s.sO)(t,0,168),n.M[15](t,-1),n.M[15](t+4,0),n.M[15](t+28,-1),n.M[15](t+112,0),n.M[15](t+80,0),n.M[15](t+84,0),n.M[15](t+88,2),n.M[15](t+92,2),n.M[15](t+96,2),n.M[15](t+100,0),n.M[15](t+64,0),n.M[15](t+68,1),n.M[15](t+72,0),n.M[15](t+72,1),n.M[15](t+48,u.N_),n.M[15](t+52,u.N_),n.M[15](t+160,0)}(t),(0,a.Eb)(t))}r(47958)},85103:(t,e,r)=>{"use strict";function s(t){return t=(t=(858993459&(t-=t>>1&1431655765))+(t>>2&858993459))+(t>>4)&252645135,(t+=t>>8)+(t>>16)&63}function i(t){return s(Number(BigInt.asUintN(32,t)))+s(Number(BigInt.asUintN(32,t>>BigInt(32))))}r.d(e,{Xb:()=>i})},23991:(t,e,r)=>{"use strict";function s(t){let e=0,r=0;for(;r<32&&0===t.readU1();)r++;return e=t.readU(r),e+=(1<<r)-1,e}function i(t){let e=s(t);return e=1&e?(e+1)/2:-e/2,e}r.d(e,{$x:()=>i,xb:()=>s})},39381:(t,e,r)=>{"use strict";r.d(e,{E3:()=>n,Sg:()=>u,Y0:()=>c,ht:()=>o,r8:()=>i,v4:()=>h,yd:()=>a});var s=r(63939);function i(t){return s.f[2](t)}function n(t){return i(t+1)<<8|i(t)}function a(t){return i(t)<<8|i(t+1)}function o(t){return i(t)<<16|i(t+1)<<8|i(t+2)}function c(t){return n(t+2)<<16|n(t)}function u(t){return a(t)<<16|a(t+2)}function h(t){return BigInt(u(t))<<BigInt(32)|BigInt(u(t+4))}},82774:(t,e,r)=>{"use strict";r.d(e,{Cv:()=>o,w8:()=>i});var s=r(50932);function i(t,e){s.M[2](t,255&e)}function n(t,e){i(t,e>>>8),i(t+1,e)}function a(t,e){n(t,e>>>16),n(t+2,65535&e)}function o(t,e){a(t,Number(BigInt.asUintN(32,e>>BigInt(32)))),a(t+4,Number(BigInt.asUintN(32,e)))}},37837:(t,e,r)=>{"use strict";r.d(e,{Eb:()=>d,Gy:()=>h,aI:()=>l,cz:()=>f,sY:()=>u});var s=r(11473),i=r(63939),n=r(50932),a=r(14686),o=r(4624);const c="src/avutil/util/mem.ts";function u(t){const e=s.s_.malloc(t);return e||o.h2("can not alloc buffer",c,32),e}function h(t){const e=s.s_.malloc(t);return e||o.h2("can not alloc buffer",c,40),(0,a.sO)(e,0,t),e}function d(t){s.s_.free(t)}function l(t){s.s_.free(i.f[20](t)),n.M[20](t,0)}function f(t,e){return s.s_.realloc(t,e)}},60264:(t,e,r)=>{"use strict";r.d(e,{BN:()=>A,Bs:()=>d,Ky:()=>l,Le:()=>m,S9:()=>v,nW:()=>g,py:()=>f,wN:()=>p});var s=r(73363),i=r.n(s),n=r(18979),a=r.n(n),o=r(79630),c=r(31865),u=r(729),h=r(72739);function d(t){return t.length>4&&0===t[0]&&0===t[1]&&(1===t[2]||0===t[2]&&1===t[3])}function l(t,e){let r=0;for(let s=e;s<t.length;s++)switch(t[s]){case 0:r++;break;case 1:if(r>=2)return{offset:s-Math.min(r,3),startCode:Math.min(r+1,4)};r=0;break;default:r=0}return{offset:-1,startCode:0}}function f(t){const e=[];t instanceof o.A&&(t=t.subarray(0,t.length,!1));let r=l(t,0),s={offset:-1,startCode:0};for(;s=l(t,r.offset+r.startCode),s.offset>-1;)e.push(t.subarray(r.offset+r.startCode,s.offset,!0)),r=s;return e.push(t.subarray(r.offset+r.startCode,void 0,!0)),e}function p(t,e){const r=[],s=new c.A(t);for(;s.remainingSize()>0;){let i=0;i=3===e?s.readUint32():2===e?s.readUint24():1===e?s.readUint16():s.readUint8();const n=t.subarray(Number(BigInt.asIntN(32,s.getPos())),Number(BigInt.asIntN(32,s.getPos()))+i,!0);s.skip(i),r.push(n)}return r}function m(t,e){return i()(t).call(t,((t,r,s)=>0===e?t+4+r.length:1===e?t+3+r.length:t+(s?3:4)+r.length),0)}function g(t,e,r){if(!r){let s=i()(t).call(t,((t,r,s)=>0===e?t+4+r.length:1===e?t+3+r.length:t+(s?3:4)+r.length),0);r=new Uint8Array(s)}const s=new u.A(r);return h.__(t,((t,r)=>{s.writeUint8(0),s.writeUint8(0),(0===e||2===e&&!r)&&s.writeUint8(0),s.writeUint8(1),s.writeBuffer(t)})),r}function v(t,e,r){if(!r){const s=i()(t).call(t,((t,r)=>t+e+1+r.length),0);r=new Uint8Array(s)}const s=new u.A(r);return h.__(t,(t=>{3===e?s.writeUint32(t.length):2===e?s.writeUint24(t.length):1===e?s.writeUint16(t.length):s.writeUint8(t.length),s.writeBuffer(t)})),r}function A(t,e=0,r){r||(r=t.length);const s=new Uint8Array(t.length);let i=0,n=0;for(let a=0;a<t.length;a++){if(a>=e&&a<r)if(0===t[a])i++;else if(3===t[a]&&2===i&&a+1<t.length&&t[a+1]<=3){if(a++,a===t.length)break;i=0===t[a]?1:0}else i=0;s[n++]=t[a]}return a()(s).call(s,0,n)}},95644:(t,e,r)=>{"use strict";function s(t,e,r,s){if(t<=0||t>64)return 0;if(e)switch(t){case 32:return r?65556:65557;case 64:return r?65558:65559;default:return 0}else if(t+=7,s&1<<(t>>>=3)-1)switch(t){case 1:return 65540;case 2:return r?65537:65536;case 3:return r?65549:65548;case 4:return r?65545:65544;case 8:return r?65568:65567;default:return 0}else switch(t){case 1:return 65541;case 2:return r?65539:65538;case 3:return r?65551:65550;case 4:return r?65547:65546;default:return 0}}function i(t){switch(t){case 69649:return 2;case 69648:return 3;case 69647:case 69633:case 69632:case 69645:case 69638:return 4;default:return function(t){switch(t){case 86070:case 86071:case 69674:case 69644:case 69678:case 69651:case 69661:case 69677:case 69655:case 69664:case 69636:case 69675:case 69660:case 69646:case 69670:return 4;case 86089:case 86090:case 86091:case 86092:case 65543:case 65542:case 65571:case 65540:case 65563:case 65572:case 65541:case 81924:case 81926:return 8;case 65537:case 65566:case 65536:case 65554:case 65539:case 65538:return 16;case 65552:case 65549:case 65548:case 65564:case 65551:case 65550:return 24;case 65545:case 65544:case 65565:case 65547:case 65546:case 65556:case 65557:case 65570:case 65569:return 32;case 65558:case 65559:case 65568:case 65567:return 64;default:return 0}}(t)}}r.d(e,{MZ:()=>i,uU:()=>s})},38156:(t,e,r)=>{"use strict";r.d(e,{O5:()=>p,S5:()=>m,Xo:()=>g,uC:()=>l});var s=r(52730),i=r.n(s),n=r(63939),a=r(50932),o=r(97317),c=r(9705),u=r(77231),h=r(14686),d=r(52699);function l(t){if(!(t<=0||t>=7))return{x:128*(1&t),y:128*(t>>>1^(t<4?1:0))}}function f(t,e,r,s,n){if(!n)return c.UY;if(t<0)return c.UY;const a=1===s||2===s?n.log2ChromaW:0,o=t+(1<<a)-1>>>a;if(o&&r>u.go/o)return c.UY;let h=r*o;return 4&i()(n)&&(h=h+7>>>3),h}function p(t,e,r){const s=(0,o.I)(e);if(!s)return c.UY;const{maxPixSteps:i,maxPixStepsComps:n}=function(t){const e=[0,0,0,0],r=[0,0,0,0];for(let s=0;s<4;s++)t.comp[s]&&t.comp[s].step>e[t.comp[s].plane]&&(e[t.comp[s].plane]=t.comp[s].step,r[t.comp[s].plane]=s);return{maxPixSteps:e,maxPixStepsComps:r}}(s);(0,h.sO)(t,0,16);let u=0;for(let e=0;e<4;e++){if((u=f(r,0,i[e],n[e],s))<0)return u;a.M[15](t+4*e,u)}}function m(t,e,r,s){const d=[0,0,0,0],l=(0,o.I)(e);if(!l)return c.UY;if((0,h.sO)(t,0,16),n.f[15](s)>u.go/r)return c.UY;if(a.M[25](t,n.f[15](s)*r),2&i()(l))return a.M[25](t+4,1024),0;for(let t=0;t<4;t++)l.comp[t]&&(d[l.comp[t].plane]=1);for(let e=0;e<4&&d[e];e++){let i=1===e||2===e?l.log2ChromaH:0,o=r+(1<<i)-1>>i;if(n.f[15](s+4*e)>u.go/o)return c.UY;a.M[25](t+4*e,o*n.f[15](s+4*e))}return 0}function g(t,e,r,s,i){const o=d.z(16),l=d.z(16);(0,h.sO)(t,0,16);for(let t=0;t<4;t++)a.M[15](o+4*t,n.f[15](i+4*t));let f=m(l,e,r,o);if(f<0)return p(),f;f=0;for(let t=0;t<4;t++){if(n.f[25](l+4*t)>u.go-f)return p(),c.UY;f+=n.f[25](l+4*t)}if(!s)return p(),f;a.M[20](t,s);for(let e=1;e<4&&n.f[25](l+4*e);e++)a.M[20](t+4*e,n.f[20](t+4*(e-1))+n.f[25](l+4*(e-1)));return p(),f;function p(){d.t(16),d.t(16)}}r(37837)},44328:(t,e,r)=>{"use strict";r.d(e,{FP:()=>c,Mr:()=>o,iU:()=>d,j2:()=>h,k:()=>a,lb:()=>u});var s=r(63939),i=r(77231),n=r(31658);function a(t,e,r){return t*BigInt(e.num)*BigInt(r.den)/(BigInt(e.den)*BigInt(r.num))}function o(t,e,r){return t*BigInt(s.f[15](e))*BigInt(r.den)/(BigInt(s.f[15](e+4))*BigInt(r.num))}function c(t,e,r){return t*BigInt(e.num)*BigInt(s.f[15](r+4))/(BigInt(e.den)*BigInt(s.f[15](r)))}function u(t){return t.num/t.den}function h(t,e){if(isNaN(19))return{den:0,num:0};if(Math.abs(t)>i.go+3)return{den:0,num:t<0?-1:1};const r=t>1?{den:Math.floor(e/t+.5),num:e}:{den:e,num:Math.floor(t*e+.5)};return d(r),r}function d(t){const e=(0,n.A)(t.num,t.den);e<=1||(t.den/=e,t.num/=e)}},66788:(t,e,r)=>{"use strict";r.d(e,{Dw:()=>c,K0:()=>u,f8:()=>h,wj:()=>d});var s=r(63939),i=r(14686),n=r(77231),a=r(95073),o=(r(37837),r(58055));function c(t){return t<0||t>=12?0:o.J[t].bits>>3}function u(t){return!(t<0||t>=12)&&o.J[t].planar}function h(t,e,r,s){const i=c(t),o=u(t);return!i||r<=0||e<=0?-1:(s||(s=1,r=(0,a.A)(r,32)),e>n.go/s||e*r>(n.go-s*e)/i?-1:o?(0,a.A)(r*i,s):(0,a.A)(r*i*e,s))}function d(t,e,r,n,a){const o=u(r),h=o?a:1,d=c(r)*(o?1:a),l=n*d,f=0===r||5===r?128:0;e*=d;for(let r=0;r<h;r++)(0,i.sO)(s.f[20](t+4*r)+e,f,l)}},71762:(t,e,r)=>{"use strict";r.d(e,{T8:()=>p,r0:()=>f,wm:()=>l});var s=r(18979),i=r.n(s),n=r(52730),a=r.n(n),o=r(63939),c=r(50932),u=r(14686),h=r(71517),d=r(37837);function l(t){var e;const r={pts:o.f[17](t+8),dts:o.f[17](t+16),data:i()(e=(0,h.iI)(t)).call(e),streamIndex:o.f[15](t+32),flags:o.f[15](t+36),sideData:[],duration:o.f[17](t+48),pos:o.f[17](t+56),timeBase:{den:o.f[15](t+76),num:o.f[15](t+72)}};for(let e=0;e<o.f[15](t+44);e++){var s;const n={type:o.f[15](o.f[20](t+40)+12*e+8),data:i()(s=(0,u.s3)(o.f[20](o.f[20](t+40)+12*e),o.f[25](o.f[20](t+40)+12*e+4))).call(s)};r.sideData.push(n)}return r}function f(t,e=0){e||(e=(0,h._5)()),c.M[17](e+8,t.pts),c.M[17](e+16,t.dts);const r=(0,d.sY)(t.data.length);if((0,u.lW)(r,t.data.length,t.data),(0,h.NX)(e,r,t.data.length),c.M[15](e+32,t.streamIndex),c.M[15](e+36,a()(t)),c.M[17](e+48,t.duration),c.M[17](e+56,t.pos),c.M[15](e+76,t.timeBase.den),c.M[15](e+72,t.timeBase.num),t.sideData.length)for(let r=0;r<t.sideData.length;r++){const s=(0,d.sY)(t.sideData[r].data.length);(0,u.lW)(s,t.sideData[r].data.length,t.sideData[r].data),(0,h.Ow)(e,t.sideData[r].type,s,t.sideData[r].data.length)}else(0,h.NZ)(e+40,e+44);return e}function p(t,e=0){if(e||(e=(0,d.sY)(168),(0,u.sO)(e,0,168)),c.M[15](e,t.codecType),c.M[15](e+4,t.codecId),c.M[8](e+8,t.codecTag),t.extradata&&(o.f[20](e+12)&&(0,d.Eb)(o.f[20](e+12)),c.M[20](e+12,(0,d.sY)(t.extradata.length)),(0,u.lW)(o.f[20](e+12),t.extradata.length,t.extradata),c.M[15](e+16,t.extradata.length)),t.codedSideData.length)for(let r=0;r<t.codedSideData.length;r++){const s=(0,d.sY)(t.codedSideData[r].data.length);(0,u.lW)(s,t.codedSideData[r].data.length,t.codedSideData[r].data),(0,h.$W)(e+20,e+24,t.codedSideData[r].type,s,t.codedSideData[r].data.length)}else(0,h.NZ)(e+20,e+24);return c.M[15](e+28,t.format),c.M[17](e+32,t.bitrate),c.M[15](e+40,t.bitsPerCodedSample),c.M[15](e+44,t.bitsPerRawSample),c.M[15](e+48,t.profile),c.M[15](e+52,t.level),c.M[15](e+56,t.width),c.M[15](e+60,t.height),c.M[15](e+68,t.sampleAspectRatio.den),c.M[15](e+64,t.sampleAspectRatio.num),c.M[15](e+76,t.framerate.den),c.M[15](e+72,t.framerate.num),c.M[15](e+80,t.fieldOrder),c.M[15](e+84,t.colorRange),c.M[15](e+88,t.colorPrimaries),c.M[15](e+92,t.colorTrc),c.M[15](e+96,t.colorSpace),c.M[15](e+100,t.chromaLocation),c.M[15](e+104,t.videoDelay),c.M[15](e+112,t.chLayout.order),c.M[15](e+116,t.chLayout.nbChannels),c.M[10](e+120,t.chLayout.u),c.M[15](e+136,t.sampleRate),c.M[15](e+140,t.blockAlign),c.M[15](e+144,t.frameSize),c.M[15](e+148,t.initialPadding),c.M[15](e+152,t.trailingPadding),c.M[15](e+156,t.seekPreroll),c.M[15](e+160,a()(t)),e}r(77162)},95007:(t,e,r)=>{"use strict";r.d(e,{A:()=>m});var s=r(49859),i=r(5496),n=r.n(i),a=r(95335),o=r(72739),c=r(73783),u=r(7417),h=r(4624);const d="src/cheap/allocator/AllocatorJS.ts",l=w(16),f=32,p=68;class m{constructor(t,e=!0){var r,i,o,c,u;(0,s.A)(this,"buffer",void 0),(0,s.A)(this,"byteOffset",void 0),(0,s.A)(this,"heapOffset",void 0),(0,s.A)(this,"heapLength",void 0),(0,s.A)(this,"int32Array",void 0),(0,s.A)(this,"updates",void 0),(0,s.A)(this,"options",void 0),(0,s.A)(this,"shared",void 0),(0,s.A)(this,"handles",void 0),this.options=a.X$({growSize:1048576,maxHeapSize:2097152e3},t),this.handles=[],this.buffer=t.buffer,this.shared=!1,this.options.memory||this.buffer instanceof ArrayBuffer||this.buffer instanceof SharedArrayBuffer?(this.byteOffset=null!==(r=t.byteOffset)&&void 0!==r?r:0,this.heapOffset=b(this.byteOffset+A(f),null!==(i=t.byteLength)&&void 0!==i?i:this.buffer.byteLength),this.heapLength=k((null!==(o=t.byteLength)&&void 0!==o?o:this.buffer.byteLength)-this.heapOffset),this.int32Array=new Int32Array(this.buffer,this.heapOffset,w(this.heapLength)),this.updates=new Int32Array(this.buffer,this.byteOffset,f),"function"==typeof SharedArrayBuffer&&this.buffer instanceof SharedArrayBuffer&&(this.shared=!0)):h.h2("Expected buffer to be an instance of Buffer or ArrayBuffer",d,109),e&&(n()(c=this.updates).call(c,1),function(t){return 65===t[0]&&65===t[66]}(u=this.int32Array)||function(t){const e=t.length-69;I(t,65,1),t[1]=1,t[3]=68;for(let e=1;e<f;e++)t[3+e]=1;I(t,e,68),t[68]=1,t[70]=1}(u),function(t){let e=p;for(;e<t.length-1;){const r=_(t,e);r<2||r>=t.length-p?h.h2(`Got invalid sized chunk at ${A(e)} (${A(r)} bytes).`,d,565):S(t,e)?g(t,e,r):v(t,e,r),e+=r+2}}(this.int32Array))}addUpdateHandle(t){o.zy(this.handles,t)||this.handles.push(t)}removeUpdateHandle(t){o.TF(this.handles,t)}malloc_(t){(t=y(t,7))<16&&(t=16);const e=w(t),r=this.findFreeBlock(this.int32Array,e);if(r<=1)return 0;const s=_(this.int32Array,r);return s-(e+2)>=l?function(t,e,r,s,i){const n=e+r+2,a=s-(n-e);M(t,e,s,i),t[e-1]=-r,t[e+r]=-r,t[n-1]=-a,t[n+a]=-a,B(t,n,a,i)}(this.int32Array,r,e,s,this.updates):M(this.int32Array,r,s,this.updates),A(r)+this.heapOffset}malloc(t){this.shared&&((0,c.s2)(u.II,!0),this.checkBuffer());const e=this.malloc_(t);return this.shared&&(0,c.Tl)(u.II),e}calloc_(t,e){var r;let s=t*e;s=s<16?16:y(s,7);const i=this.malloc_(s);if(0===i)return 0;const a=w(i-this.heapOffset);return n()(r=this.int32Array.subarray(a,a+w(s))).call(r,0),i}calloc(t,e){this.shared&&((0,c.s2)(u.II,!0),this.checkBuffer());const r=this.calloc_(t,e);return this.shared&&(0,c.Tl)(u.II),r}realloc_(t,e){if(0===t)return this.malloc_(e);const r=t;if(0===e)return this.free_(r),0;let s=w(t-=this.heapOffset),i=s,n=0;E(this.int32Array,s)&&(i=this.int32Array[s-1],n=s-i);const a=_(this.int32Array,i)-n;if(a>=w(y(e,7)))return r;{const t=this.malloc_(e);return 0===t?(this.free_(r),0):(this.int32Array.set(this.int32Array.subarray(s,s+a),w(t-this.heapOffset)),this.free_(r),t)}}realloc(t,e){return this.shared&&((0,c.s2)(u.II,!0),this.checkBuffer()),t=this.realloc_(t,e),this.shared&&(0,c.Tl)(u.II),t}alignedAlloc_(t,e){if(t<=8)return this.malloc_(e);const r=this.malloc_(e+t-1+4);if(0===r)return 0;const s=r+t-1+4&~(t-1);return this.int32Array[w(s-this.heapOffset)-1]=w(r-this.heapOffset),s}alignedAlloc(t,e){this.shared&&((0,c.s2)(u.II,!0),this.checkBuffer());const r=this.alignedAlloc_(t,e);return this.shared&&(0,c.Tl)(u.II),r}free_(t){if(0===t)return;let e=w(t-=this.heapOffset);if(E(this.int32Array,e)&&(e=this.int32Array[e-1]),S(this.int32Array,e))return;const r=_(this.int32Array,e),s=T(this.int32Array,e),i=function(t,e){const r=_(t,e);if(e+r+2>=t.length-2)return 0;const s=e+r+2;return t[s-1]<2?0:s}(this.int32Array,e);0!==s?0!==i?function(t,e,r,s,i,n){const a=_(t,e),o=_(t,i),c=i-e+o;M(t,e,a,n),M(t,i,o,n),t[e-1]=-c,t[i+o]=-c,B(t,e,c,n)}(this.int32Array,s,0,0,i,this.updates):C(this.int32Array,s,e,r,this.updates):0!==i?function(t,e,r,s,i){const n=_(t,e);M(t,e,n,i);const a=s+n+2;t[r-1]=-a,t[e+n]=-a,B(t,r,a,i)}(this.int32Array,i,e,r,this.updates):B(this.int32Array,e,r,this.updates)}free(t){this.shared&&((0,c.s2)(u.II,!0),this.checkBuffer()),this.free_(t),this.shared&&(0,c.Tl)(u.II)}sizeof(t){if(0===t)return 0;let e=w(t-=this.heapOffset);return E(this.int32Array,e)&&(e=this.int32Array[e-1]),A(_(this.int32Array,e))}inspect(){return this.checkBuffer(),function(t,e){const r=[],s=x(t,1,e);let i=p,n=0;for(;i<t.length-1;){const s=_(t,i);(s<2||s>=t.length)&&h.h2(`Got invalid sized chunk at ${A(i)} (${A(s)})`,d,621),S(t,i)?r.push(x(t,i,e)):(n+=A(s),r.push({type:"used",block:i,offset:A(i)+e,size:A(s)})),i+=s+2}return{header:s,blocks:r,total:A(t.length),used:n}}(this.int32Array,this.heapOffset)}findFreeBlock(t,e){let r=function(t,e){let r=1;for(let s=t[1];s>0;s--){let i=t[r+2+(s-1)];for(;1!==i&&t[i-1]<e;)r=i,i=t[r+2+(s-1)]}return r=t[r+2],r}(t,e);if(1===r){if(this.options.growAllowed&&this.heapLength<this.options.maxHeapSize){const t=this.int32Array.length+1;let r,a,c=0,u=0,h=0;if(this.options.onResize){var s,i,n;const t=this.options.onResize(this.int32Array,this.int32Array.byteLength+y(Math.max(this.options.growSize,A(e)),7));c=null!==(s=t.byteOffset)&&void 0!==s?s:0,h=b(c+A(f),null!==(i=t.byteLength)&&void 0!==i?i:t.buffer.byteLength),u=k((null!==(n=t.byteLength)&&void 0!==n?n:t.buffer.byteLength)-h),r=new Int32Array(t.buffer,h,w(u)),a=new Int32Array(t.buffer,c,f)}else{const t=new ArrayBuffer(this.int32Array.length+w(this.options.growSize));h=b(c+A(f),t.byteLength),u=k(t.byteLength-h),r=new Int32Array(t,h,w(u)),r.set(this.int32Array,0),a=new Int32Array(t,c,f)}this.byteOffset=c,this.heapOffset=h,this.buffer=r.buffer,this.heapLength=u,this.int32Array=r,this.updates=a;const d=r.length-(t-1)-2;I(r,d,t);const l=T(r,t);return 0!==l?C(r,l,t,d,this.updates):B(r,t,d,this.updates),this.handles.length&&o.__(this.handles,(t=>{t(this.buffer)})),this.findFreeBlock(this.int32Array,e)}return r}return r}getBuffer(){return this.buffer}isAlloc(t){this.shared&&((0,c.s2)(u.II,!0),this.checkBuffer());const e=w(t-this.heapOffset);let r=this.int32Array[3];for(;r&&1!==r;){if(e>=r&&e<r+this.int32Array[r-1])return this.shared&&(0,c.Tl)(u.II),!1;r=this.int32Array[r+2]}return this.shared&&(0,c.Tl)(u.II),!0}checkBuffer(){this.options.memory&&this.options.memory.buffer!==this.buffer&&(this.buffer=this.options.memory.buffer,this.heapLength=k(this.buffer.byteLength-this.heapOffset),this.int32Array=new Int32Array(this.buffer,this.heapOffset,w(this.heapLength)))}}function g(t,e,r){t[e-1]!==t[e+r]&&h.h2(`Block length header does not match footer (${A(t[e-1])} vs ${A(t[e+r])}).`,d,581);const s=t[e+0];(s<1||s>f)&&h.h2(`Block ${A(e)} height must be between 1 and 32, got ${s}.`,d,586);for(let r=0;r<s;r++){const s=t[e+2+r];s>=p&&!S(t,s)&&h.h2(`Block ${A(e)} has a pointer to a non-free block (${A(s)}).`,d,592)}return!0}function v(t,e,r){if(t[e-1]===t[e+r])return!0;h.h2(`Block length header does not match footer (${A(t[e-1])} vs ${A(t[e+r])}).`,d,601)}function A(t){return t<<2>>>0}function w(t){return t>>>2}function y(t,e){return(t+e&~e)>>>0}function b(t,e){const r=e-t;return t+(y(r,7)===r?0:r-y(r,7)+8)}function k(t){return t-4}function x(t,e,r){const s=t[e+0],i=[];for(let r=0;r<s;r++)i.push(t[e+2+r]);return{type:"free",block:e,offset:A(e)+r,height:s,pointers:i,size:A(t[e-1])}}function _(t,e){const r=t[e-1],s=r>>31;return r+s^s}function I(t,e,r){t[r-1]=e,t[r+e]=e}function P(t,e,r){let s=1;for(let i=t[1];i>0;i--){let n=s+2+(i-1);for(;t[n]>=p&&t[t[n]-1]<e;)s=t[n],n=s+2+(i-1);r[i-1]=s}}function M(t,e,r,s){P(t,r,s);let i=t[s[0]+2];for(;i!==e&&1!==i&&t[i-1]<=r;){for(let r=t[i+0]-1;r>=0;r--)t[i+2+r]===e&&(s[r]=i);i=t[i+2]}let n=t[1];for(let r=0;r<n&&t[s[r]+2+r]===e;r++)t[s[r]+2+r]=t[e+2+r];for(;n>0&&1===t[n-1+3];)n--,t[1]=n;t[e-1]=-r,t[e+r]=-r}function S(t,e){return!(e<65)&&!(t[e-1]<0)}function E(t,e){return!(e<65)&&!(t[e-1]<0)}function T(t,e){if(e<=p)return 0;const r=t[e-2];return r<2?0:e-(2+r)}function B(t,e,r,s){P(t,r,s);const i=function(t,e,r,s){const i=t[1];let n=function(){let t=1;for(;Math.random()<.5&&t<f;)t+=1;return t}();if(r-1<n+1&&(n=r-2),n>i){const r=i+1;return t[1]=r,t[r-1+3]=1,s[r]=1,t[e+0]=r,r}return t[e+0]=n,n}(t,e,r,s);for(let r=1;r<=i;r++){const i=s[r-1]+2+(r-1);t[e+2+(r-1)]=t[i],t[i]=e,s[r-1]=1}return t[e-1]=r,t[e+r]=r,r}function C(t,e,r,s,i){const n=r-e+s;return M(t,e,r-e-2,i),t[e-1]=-n,t[r+s]=-n,B(t,e,n,i),s}},94321:(t,e,r)=>{"use strict";r.d(e,{z:()=>a});var s=r(49859),i=r(385),n=r.n(i);class a{constructor(){(0,s.A)(this,"table",void 0),(0,s.A)(this,"pointer",void 0),(0,s.A)(this,"nodes",void 0),this.table=new WebAssembly.Table({initial:16,element:"anyfunc",address:"i32",index:"i32"}),this.pointer=6,this.nodes=[{pointer:this.pointer,length:10,free:!0}]}getPointer(){return this.pointer}alloc(t){let e=this.findFree(t);if(e<0){const r=this.nodes[this.nodes.length-1],s=t-(r.free?r.length:0);this.table.grow(s),r.free?r.length=r.length+s:this.nodes.push({pointer:r.pointer+r.length,length:s,free:!0}),e=this.findFree(t)}const r=this.nodes[e];var s;return r.length>t&&(n()(s=this.nodes).call(s,e+1,0,{pointer:r.pointer+t,length:r.length-t,free:!0}),r.length=t),r.free=!1,r.pointer}free(t){let e=this.findNode(t);const r=this.nodes[e];if(r&&!r.free){const t=this.nodes[e-1],o=this.nodes[e+1];var s,i,a;t&&t.free?o&&o.free?(t.length+=r.length+o.length,n()(s=this.nodes).call(s,e,2)):(t.length+=r.length,n()(i=this.nodes).call(i,e,1)):o&&o.free?(r.length+=o.length,n()(a=this.nodes).call(a,e+1,1),r.free=!0):r.free=!0}if(1===this.nodes.length&&this.nodes[0].free){const t=new WebAssembly.Table({initial:16,element:"anyfunc",address:"i32",index:"i32"});this.pointer=6,this.nodes=[{pointer:this.pointer,length:10,free:!0}];for(let e=1;e<this.pointer;e++)t.set(e,this.table.get(e));this.table=t}}get(t){return this.table.get(t)}set(t,e){if(t<0||t>=this.pointer)throw new RangeError("index out of bound");this.table.set(t,e)}inspect(){return this.nodes}findFree(t){let e=-1;for(let r=0;r<this.nodes.length;r++)if(this.nodes[r].length>=t&&this.nodes[r].free){e=r;break}return e}findNode(t){let e=-1;for(let r=0;r<this.nodes.length;r++)if(this.nodes[r].pointer===t){e=r;break}return e}}},15541:(t,e,r)=>{"use strict";r.d(e,{A:()=>s});const s="AGFzbQEAAAABLwlgAn9/AGACf34AYAJ/fQBgAn98AGABfwF/YAF/AX5gAX8BfWABfwF8YAN/f38AAhIBA2VudgZtZW1vcnkCAwGAgAQDERAAAAABAgMEBAQEBAUGBwgIB5YBEAZ3cml0ZTgAAAd3cml0ZTE2AAEHd3JpdGUzMgACB3dyaXRlNjQAAwh3cml0ZWYzMgAECHdyaXRlZjY0AAUFcmVhZDgABgZyZWFkVTgABwZyZWFkMTYACAdyZWFkVTE2AAkGcmVhZDMyAAoGcmVhZDY0AAsHcmVhZGYzMgAMB3JlYWRmNjQADQRmaWxsAA4EY29weQAPCpYBEAkAIAAgAToAAAsJACAAIAE7AQALCQAgACABNgIACwkAIAAgATcDAAsJACAAIAE4AgALCQAgACABOQMACwcAIAAsAAALBwAgAC0AAAsHACAALgEACwcAIAAvAQALBwAgACgCAAsHACAAKQMACwcAIAAqAgALBwAgACsDAAsLACAAIAEgAvwLAAsMACAAIAEgAvwKAAAL"},98564:(t,e,r)=>{"use strict";r.d(e,{Ts:()=>f});var s=r(5496),i=r.n(s),n=r(4919),a=r(4624),o=r(63939),c=r(50932),u=r(88096),h=r(15541);const d="src/cheap/asm/memory.ts";let l;function f(t,e,r){try{const s=u.bx((0,n.E_)(h.A),{shared:"function"==typeof SharedArrayBuffer&&t.buffer instanceof SharedArrayBuffer,initial:e,maximum:r});l=new WebAssembly.Instance(new WebAssembly.Module(s),{env:{memory:t}}),(0,o.$)({4:l.exports.readU8,5:l.exports.readU8,2:l.exports.readU8,3:l.exports.readU8,6:l.exports.readU16,7:l.exports.readU16,8:t=>l.exports.read32(t)>>>0,9:t=>l.exports.read32(t)>>>0,10:t=>BigInt.asUintN(64,l.exports.read64(t)),22:t=>BigInt.asUintN(64,l.exports.read64(t)),11:l.exports.read8,12:l.exports.read8,13:l.exports.read16,14:l.exports.read16,15:l.exports.read32,16:l.exports.read32,17:l.exports.read64,21:l.exports.read64,18:l.exports.readf32,19:l.exports.readf64,20:t=>l.exports.read32(t)>>>0,25:t=>l.exports.read32(t)>>>0}),(0,c.$)({4:l.exports.write8,5:l.exports.write8,2:l.exports.write8,3:l.exports.write8,6:l.exports.write16,7:l.exports.write16,8:l.exports.write32,9:l.exports.write32,10:l.exports.write64,22:l.exports.write64,11:l.exports.write8,12:l.exports.write8,13:l.exports.write16,14:l.exports.write16,15:l.exports.write32,16:l.exports.write32,17:l.exports.write64,21:l.exports.write64,18:l.exports.writef32,19:l.exports.writef64,20:l.exports.write32,25:l.exports.write32,copy:l.exports.copy,fill:i()(l.exports)})}catch(t){a.R8("memory asm not support, cannot use asm memory function",d,119)}}},26429:(t,e,r)=>{"use strict";r.r(e),r.d(e,{HEAP_INITIAL:()=>p,HEAP_MAXIMUM:()=>m,HEAP_OFFSET:()=>f,STACK_ALIGNMENT:()=>d,STACK_SIZE:()=>l,USE_THREADS:()=>h});var s,i,n=r(95797),a=r(10576),o=r(86834),c=r(44690);const u=a.TK,h=!!n.A.thread&&!u.CHEAP_DISABLE_THREAD;let d=16,l=1048576;const f=1024,p=null!==(s=u.CHEAP_HEAP_INITIAL)&&void 0!==s?s:265,m=null!==(i=u.CHEAP_HEAP_MAXIMUM)&&void 0!==i?i:h&&c.A.ios&&!o.A.checkVersion(c.A.version,"17",!0)?8192:65536},73281:(t,e,r)=>{"use strict";r.d(e,{A:()=>C});var s=r(59135),i=r(63939),n=r(50932);let a,o;const c=(0,s.A)();function u(t,e){o().setUint8(t,e)}function h(t){return o().getUint8(t)}function d(t,e){o().setUint16(t,e,c)}function l(t){return o().getUint16(t,c)}function f(t,e){o().setUint32(t,e,c)}function p(t){return o().getUint32(t,c)}function m(t,e){o().setBigUint64(t,e,c)}function g(t){return o().getBigUint64(t,c)}function v(t,e){o().setInt8(t,e)}function A(t){return o().getInt8(t)}function w(t,e){o().setInt16(t,e,c)}function y(t){return o().getInt16(t,c)}function b(t,e){o().setInt32(t,e,c)}function k(t){return o().getInt32(t,c)}function x(t,e){o().setBigInt64(t,e,c)}function _(t){return o().getBigInt64(t,c)}function I(t,e){o().setFloat32(t,e,c)}function P(t){return o().getFloat32(t,c)}function M(t,e){o().setFloat64(t,e,c)}function S(t){return o().getFloat64(t,c)}function E(t){return o().getUint32(t,c)}function T(t,e){return o().setUint32(t,e,c)}function B(t,e){o().setUint32(t,e,c)}function C(t,e){a=t,o=e,(0,i.$)({4:h,5:h,2:h,3:h,6:l,7:l,8:p,9:p,10:g,11:A,12:A,13:y,14:y,15:k,16:k,17:_,18:P,19:S,20:E,23:t=>!!A(t),24:t=>!!A(t),25:t=>function(t){return o().getUint32(t,c)}(t)}),(0,n.$)({4:u,5:u,2:u,3:u,6:d,7:d,8:f,9:f,10:m,11:v,12:v,13:w,14:w,15:b,16:b,17:x,18:I,19:M,20:T,23:(t,e)=>{v(t,e?1:0)},24:(t,e)=>{v(t,e?1:0)},25:B})}},63939:(t,e,r)=>{"use strict";r.d(e,{$:()=>n,f:()=>i});var s=r(95335);const i={4:function(t){throw new Error("unimplemented")},5:function(t){throw new Error("unimplemented")},2:function(t){throw new Error("unimplemented")},3:function(t){throw new Error("unimplemented")},6:function(t){throw new Error("unimplemented")},7:function(t){throw new Error("unimplemented")},8:function(t){throw new Error("unimplemented")},9:function(t){throw new Error("unimplemented")},10:function(t){throw new Error("unimplemented")},11:function(t){throw new Error("unimplemented")},12:function(t){throw new Error("unimplemented")},13:function(t){throw new Error("unimplemented")},14:function(t){throw new Error("unimplemented")},15:function(t){throw new Error("unimplemented")},16:function(t){throw new Error("unimplemented")},17:function(t){throw new Error("unimplemented")},18:function(t){throw new Error("unimplemented")},19:function(t){throw new Error("unimplemented")},20:function(t){throw new Error("unimplemented")},0:function(t){throw new Error("invalid operate")},1:function(t){throw new Error("invalid operate")},22:function(t){throw new Error("invalid operate")},21:function(t){throw new Error("invalid operate")},23:function(t){throw new Error("invalid operate")},24:function(t){throw new Error("invalid operate")},25:function(t){throw new Error("unimplemented")}};function n(t){s.X$(i,t)}},50932:(t,e,r)=>{"use strict";r.d(e,{$:()=>n,M:()=>i});var s=r(95335);const i={4:function(t,e){throw new Error("unimplemented")},5:function(t,e){throw new Error("unimplemented")},2:function(t,e){throw new Error("unimplemented")},3:function(t,e){throw new Error("unimplemented")},6:function(t,e){throw new Error("unimplemented")},7:function(t,e){throw new Error("unimplemented")},8:function(t,e){throw new Error("unimplemented")},9:function(t,e){throw new Error("unimplemented")},10:function(t,e){throw new Error("unimplemented")},11:function(t,e){throw new Error("unimplemented")},12:function(t,e){throw new Error("unimplemented")},13:function(t,e){throw new Error("unimplemented")},14:function(t,e){throw new Error("unimplemented")},15:function(t,e){throw new Error("unimplemented")},16:function(t,e){throw new Error("unimplemented")},17:function(t,e){throw new Error("unimplemented")},18:function(t,e){throw new Error("unimplemented")},19:function(t,e){throw new Error("unimplemented")},20:function(t,e){throw new Error("unimplemented")},0:function(t,e){throw new Error("invalid operate")},1:function(t,e){throw new Error("invalid operate")},22:function(t,e){throw new Error("invalid operate")},21:function(t,e){throw new Error("invalid operate")},23:function(t,e){throw new Error("invalid operate")},24:function(t,e){throw new Error("invalid operate")},25:function(t,e){throw new Error("unimplemented")},copy:function(t,e,r){throw new Error("invalid operate")},fill:function(t,e,r){throw new Error("invalid operate")}};function n(t){s.X$(i,t)}},25323:(t,e,r)=>{"use strict";r.d(e,{X:()=>R,l:()=>D});var s=r(53930),i=r.n(s),n=r(12854),a=r.n(n),o=r(86226),c=r.n(o),u=r(7074),h=r.n(u),d=r(99921),l=r(63939),f=r(50932),p=r(61499),m=r(6704),g=r(67672),v=r(95335),A=r(62100),w=r(72739);function y(t,e,r,s){i()(t,e,{get:r,set:s,configurable:!0,enumerable:!0})}function b(t){return function(){return l.f[20](t())}}function k(t,e,r,s){return function(){return t[`__$__${e}`]||(t[`__$__${e}`]=D(r(),s))}}function x(t,e){return function(){return l.f[e](t())}}function _(t,e,r,s){const i=8*m.i[e]-s-r,n=Math.pow(2,r)-1;return function(){return l.f[e](t())>>>i&n}}function I(t){return function(e){f.M[20](t(),e)}}function P(t,e,r,s){const i=`__$__${e}`;return function(e){const n=t[i]||(t[i]=D(r(),s));v.__(e,((t,e)=>{n[e]=t})),t[i]=n}}function M(t,e){return function(r){f.M[e](t(),r)}}function S(t,e,r,s){let i=0,n=8*m.i[e];for(let t=0;t<r;t++)i|=1<<n-1-(t+s);const a=Math.pow(2,r)-1,o=n-s-r;return function(r){const s=t(),n=l.f[e](s);f.M[e](s,n&~i|(r&a)<<o)}}function E(t,e,r){const s={};let i=(0,d.A)(r);for(let n=0;n<e;n++){const e=(0,A.A)(n);y(s,e,k(s,e,(()=>t()+i*n),r),P(s,e,(()=>t()+i*n),r))}return s}function T(t,e,r){const s={};let i=(0,d.A)(r);for(let n=0;n<e;n++)y(s,(0,A.A)(n),x((()=>t()+i*n),r),M((()=>t()+i*n),r));return s}function B(t,e,r,s,i){return function(){let n=e[`__$__${r}`];return n||(n=g.Pc(i)||g.Ik(i)?E(t,s,i):T(t,s,i),e[`__$__${r}`]=n),n[p.o9]=t(),n}}function C(t,e,r,s,i){const n=`__$__${e}`;return function(e){let a=t[n]||E(r,s,i);a[p.o9]=r(),w.__(e,((t,e)=>{a[e]=t})),t[n]=a}}function U(t,e,r,s,i){const n=`__$__${e}`;return function(e){let a=t[n]||T(r,s,i);a[p.o9]=r(),w.__(e,((t,e)=>{a[e]=t})),t[n]=a}}function D(t,e){let r=g.Pc(e)?e.prototype:e;const s={};for(s[p.o9]=t,a()(s,r);;){let t=r[p.JY];if(t&&c()(t).call(t,((t,e)=>{t[3]?t[1]?y(s,e,B((()=>s[p.o9]+t[7]),s,e,t[4],t[0]),U(s,e,(()=>s[p.o9]+t[7]),t[4],20)):g.Pc(t[0])||g.Ik(t[0])?y(s,e,B((()=>s[p.o9]+t[7]),s,e,t[4],t[0]),C(s,e,(()=>s[p.o9]+t[7]),t[4],t[0])):y(s,e,B((()=>s[p.o9]+t[7]),s,e,t[4],t[0]),U(s,e,(()=>s[p.o9]+t[7]),t[4],t[0])):t[1]?y(s,e,b((()=>s[p.o9]+t[7])),I((()=>s[p.o9]+t[7]))):g.Pc(t[0])||g.Ik(t[0])?y(s,e,k(s,e,(()=>s[p.o9]+t[7]),t[0]),P(s,e,(()=>s[p.o9]+t[7]),t[0])):t[5]?y(s,e,_((()=>s[p.o9]+t[7]),t[0],t[6],t[8]),S((()=>s[p.o9]+t[7]),t[0],t[6],t[8])):y(s,e,x((()=>s[p.o9]+t[7]),t[0]),M((()=>s[p.o9]+t[7]),t[0]))})),r=h()(r),!r)break}return s}function R(t){let e=h()(t);for(;;){let r=e[p.JY];if(r&&c()(r).call(r,((e,r)=>{delete t[r]})),e=h()(e),!e)break}}},12085:(t,e,r)=>{"use strict";r.d(e,{A:()=>n});var s=r(53930),i=r.n(s);function n(t,e,r){i()(t,e,{value:r,writable:!1,enumerable:!1,configurable:!1})}},11473:(t,e,r)=>{"use strict";r.d(e,{GE:()=>k,Lv:()=>F,XI:()=>I,ce:()=>M,eq:()=>g,pv:()=>H,s_:()=>P,wE:()=>x});var s=r(39638),i=r(95007),n=r(94321),a=r(10576),o=r(26429),c=r(7417),u=r(33856),h=r(98564),d=r(82854),l=r(73281),f=r(54568),p=r(86834),m=r(44690);let g,v,A,w=-1,y=!0,b="",k=null,x=null,_=0,I=null,P=null,M=null,S=null,E=null,T=null,B=null,C=null,U=null,D=null,R=null,L=null,$={5:C,3:C,7:U,9:D,22:R,12:S,14:E,16:T,21:B};function O(){return!(!M||M.buffer===C.buffer)}function F(){return M.buffer}function z(){return O()&&j(M.buffer),C}function N(){return O()&&j(M.buffer),L}function V(t){return O()&&j(M.buffer),$[t]}function W(){o.USE_THREADS?(g=z,v=N,A=V):(g=()=>C,v=()=>L,A=t=>$[t])}function j(t){S=new Int8Array(t),E=new Int16Array(t),T=new Int32Array(t),B=new BigInt64Array(t),C=new Uint8Array(t),U=new Uint16Array(t),D=new Uint32Array(t),R=new BigUint64Array(t),L=new DataView(t),$={5:C,3:C,7:U,9:D,22:R,12:S,14:E,16:T,21:B}}function H(){return Atomics.add(D,c.hb>>>2,1)}!(0,s.A)()&&!(0,f.A)()||(0,s.A)()&&!o.USE_THREADS?function(){var t,e,r,s,f,g,S,E;if(W(),(0,l.A)((()=>P),v),(0,u.A)(A),M=null!==(t=a.TK.CHeap)&&void 0!==t&&t.Memory?a.TK.CHeap.Memory:new WebAssembly.Memory({initial:o.HEAP_INITIAL,maximum:o.HEAP_MAXIMUM,shared:o.USE_THREADS,address:"i32",index:"i32"}),"function"==typeof BigInt&&BigInt!==Number&&(p.A.chrome&&p.A.checkVersion(p.A.majorVersion,"85",!0)||p.A.firefox&&p.A.checkVersion(p.A.majorVersion,"78",!0)||p.A.safari&&p.A.checkVersion(p.A.majorVersion,"15",!0)||m.A.ios&&p.A.checkVersion(m.A.version,"15",!0)||p.A.newEdge)&&o.USE_THREADS&&h.Ts(M,o.HEAP_INITIAL,o.HEAP_MAXIMUM),o.USE_THREADS&&(p.A.chrome&&p.A.checkVersion(p.A.majorVersion,"85",!0)||p.A.firefox&&p.A.checkVersion(p.A.majorVersion,"78",!0)||p.A.safari&&p.A.checkVersion(p.A.majorVersion,"15",!0)||m.A.ios&&p.A.checkVersion(m.A.version,"15",!0)||p.A.newEdge)&&d.Ts(M,o.HEAP_INITIAL,o.HEAP_MAXIMUM),P=null!==(e=a.TK.CHeap)&&void 0!==e&&e.Allocator?a.TK.CHeap.Allocator:new i.A({buffer:M.buffer,memory:M,byteOffset:o.HEAP_OFFSET,maxHeapSize:64*o.HEAP_MAXIMUM*1024,growAllowed:!0,onResize:(t,e)=>(M.grow(e-t.byteLength>>>16),{buffer:M.buffer,byteOffset:o.HEAP_OFFSET})}),P.addUpdateHandle(j),j(P.getBuffer()),_=null!==(r=a.TK.CHeap)&&void 0!==r&&r.StackSize?a.TK.CHeap.StackSize:o.STACK_SIZE,x=null!==(s=a.TK.CHeap)&&void 0!==s&&s.StackTop?a.TK.CHeap.StackTop:P.malloc(_),k=null!==(f=a.TK.CHeap)&&void 0!==f&&f.StackPointer?a.TK.CHeap.StackPointer:new WebAssembly.Global({value:"i32",mutable:!0},x+_),I=null!==(g=a.TK.CHeap)&&void 0!==g&&g.Table?a.TK.CHeap.Table:new n.z,w=null!==(S=a.TK.CHeap)&&void 0!==S&&S.ThreadId?a.TK.CHeap.ThreadId:0,b=null!==(E=a.TK.CHeap)&&void 0!==E&&E.ThreadName?a.TK.CHeap.ThreadName:"main",!a.TK.CHeap)if(o.USE_THREADS)Atomics.store(D,c.hb>>>2,w+1),Atomics.store(T,c.II>>>2,0);else{D[c.hb>>>2]=w+1;let t=c.II>>>2;T[t]=0}a.TK.CHeap||(a.TK.CHeap={Allocator:P,Table:I,ThreadId:w,ThreadName:b,Memory:M,Config:o,StackSize:_,StackTop:x,StackPointer:k,isMainThread:!0}),y=!0}():(a.TK.CHeap={initThread:async function t(e){var r;W(),(0,l.A)((()=>P),v),(0,u.A)(A),M=e.memory,e.disableAsm||("function"==typeof BigInt&&BigInt!==Number&&(p.A.chrome&&p.A.checkVersion(p.A.majorVersion,"85",!0)||p.A.firefox&&p.A.checkVersion(p.A.majorVersion,"78",!0)||p.A.safari&&p.A.checkVersion(p.A.majorVersion,"15",!0)||m.A.ios&&p.A.checkVersion(m.A.version,"15",!0)||p.A.newEdge)&&h.Ts(M,o.HEAP_INITIAL,o.HEAP_MAXIMUM),(p.A.chrome&&p.A.checkVersion(p.A.majorVersion,"85",!0)||p.A.firefox&&p.A.checkVersion(p.A.majorVersion,"78",!0)||p.A.safari&&p.A.checkVersion(p.A.majorVersion,"15",!0)||m.A.ios&&p.A.checkVersion(m.A.version,"15",!0)||p.A.newEdge)&&d.Ts(M,o.HEAP_INITIAL,o.HEAP_MAXIMUM));var s;s=new i.A({buffer:M.buffer,memory:M,byteOffset:o.HEAP_OFFSET,maxHeapSize:64*o.HEAP_MAXIMUM*1024,growAllowed:!0,onResize:(t,e)=>(M.grow(e-t.byteLength>>>16),{buffer:M.buffer,byteOffset:o.HEAP_OFFSET})},!1),P&&P.removeUpdateHandle(j),P=s,a.TK.CHeap&&(a.TK.CHeap.Allocator=P),P.addUpdateHandle(j),j(P.getBuffer()),e.stackPointer&&(_=e.stackSize,x=e.stackPointer,k=new WebAssembly.Global({value:"i32",mutable:!0},x+_),I=new n.z),w="number"==typeof e.id?e.id:Atomics.add(D,c.hb>>>2,1),b=null!==(r=e.name)&&void 0!==r?r:"anonymous",a.TK.CHeap={initThread:t,Allocator:P,Table:I,ThreadId:w,ThreadName:b,Memory:M,Config:o,StackSize:_,StackTop:x,StackPointer:k,isMainThread:!1},y=!1},isMainThread:!1,Config:o},y=!1)},80098:(t,e,r)=>{"use strict";r.d(e,{I_:()=>x,SQ:()=>_});var s=r(7074),i=r.n(s),n=r(12854),a=r.n(n),o=r(49763),c=r.n(o),u=r(15413),h=r.n(u),d=r(99921),l=r(63939),f=r(50932),p=r(61499),m=r(6704),g=r(67672),v=r(95335),A=r(72739),w=r(2148);const y=i()({});function b(t,e){for(;;){let r=t[p.JY];if(r){const t=r.get(e);if(t)return t}if(!(t=i()(t))||t===y)return null}}function k(t,e,r,s){const i={};i[p.o9]=t;let n=(0,d.A)(s?20:r);return new Proxy(i,{get(t,e,i){if(e===p.o9)return t[p.o9];const a=(0,w.A)(e);return s?l.f[20](t[p.o9]+a*n):g.Pc(r)?t[e]:l.f[r](t[p.o9]+a*n)},set(t,e,i,a){if(e===p.o9)return t[p.o9]=i,!0;const o=(0,w.A)(e);if(s)f.M[20](t[p.o9]+o*n,i),t[e]=i;else if(g.Pc(r)){const s=t[e]||(t[e]=x(t[p.o9]+o*n,r));v.__(i,((t,e)=>{s[e]=t})),t[e]=s}else f.M[r](t[p.o9]+o*n,i),t[e]=i;return!0}})}function x(t,e){const r=g.Pc(e)?e.prototype:e,s={};s[p.o9]=t,a()(s,r);const{proxy:i,revoke:n}=Proxy.revocable(s,{get(t,e,s){if(g.Yj(e)){const s=b(r,e.replace(/^\$+/,""));if(s){const r=t[p.o9]+s[7];if(s[3]){let i=t[e];return i||(i=k(r,s[4],s[0],s[1]),t[e]=i),i[p.o9]=r,i}if(s[1])return l.f[20](r);if(g.Pc(s[0])||g.Ik(s[0]))return t[e]||(t[e]=x(r,s[0]));{let t=l.f[s[0]](r);return s[5]&&(t=t>>>8*m.i[s[0]]-s[8]-s[6]&Math.pow(2,s[6])-1),t}}return t[e]}return t[e]},set(t,e,s,i){if(g.Yj(e)){const i=b(r,e.replace(/^\$+/,""));if(i){const r=t[p.o9]+i[7];if(i[3]){const n=t[e]||k(r,i[4],i[0],i[1]);A.__(s,((t,e)=>{n[e]=t})),t[e]=n}else if(i[1])f.M[20](r,s),t[e]=s;else if(g.Pc(i[0])||g.Ik(i[0])){const n=t[e]||(t[e]=x(r,i[0]));v.__(s,((t,e)=>{n[e]=t})),t[e]=n}else{if(i[5]){let t=0,e=8*m.i[i[0]];for(let r=0;r<i[6];r++)t|=1<<e-1-(r+i[8]);const n=l.f[i[0]](r);f.M[i[0]](r,n&~t|(s&Math.pow(2,i[6])-1)<<e-i[8]-i[6])}else f.M[i[0]](r,s);t[e]=s}}else t[e]=s}else t[e]=s;return!0},getOwnPropertyDescriptor:(t,e)=>({enumerable:!0,configurable:!0}),ownKeys(t){var e;return c()(h()(e=t[p.JY]).call(e))}});return s[p.kE]=n,i}function _(t){const e=t[p.kE];e&&e()}},52699:(t,e,r)=>{"use strict";r.d(e,{t:()=>n,z:()=>i});var s=r(11473);function i(t){return s.GE.value=s.GE.value-t,s.GE.value}function n(t){s.GE.value=s.GE.value+t}},7417:(t,e,r)=>{"use strict";r.d(e,{II:()=>a,hb:()=>n,hf:()=>o});let s=4;function i(t,e=1){let r=s;for(;r%e;)r+=1;return s=r+t,r}const n=i(4,4),a=i(4,4),o=i(4,4);i(8,8)},79630:(t,e,r)=>{"use strict";r.d(e,{A:()=>l});var s=r(49859),i=r(18979),n=r.n(i),a=r(63939),o=r(50932),c=r(11473),u=r(61403),h=r(26429);class d{constructor(t,e){(0,s.A)(this,"pointer",void 0),(0,s.A)(this,"len",void 0),(0,s.A)(this,"view",void 0),this.pointer=t,this.len=e}get byteLength(){return this.len}get buffer(){return c.Lv}get byteOffset(){return this.pointer}getView(){return this.view&&this.view.buffer===c.ce.buffer||(this.view=new DataView((0,c.Lv)(),this.pointer,this.len)),this.view}getFloat32(t,e){return this.getView().getFloat32(t,e)}getFloat64(t,e){return this.getView().getFloat64(t,e)}getInt8(t){return this.getView().getInt8(t)}getInt16(t,e){return this.getView().getInt16(t,e)}getInt32(t,e){return this.getView().getInt32(t,e)}getUint8(t){return this.getView().getUint8(t)}getUint16(t,e){return this.getView().getUint16(t,e)}getUint32(t,e){return this.getView().getUint32(t,e)}setFloat32(t,e,r){this.getView().setFloat32(t,e,r)}setFloat64(t,e,r){this.getView().setFloat64(t,e,r)}setInt8(t,e){this.getView().setInt8(t,e)}setInt16(t,e,r){this.getView().setInt16(t,e,r)}setInt32(t,e,r){this.getView().setInt32(t,e,r)}setUint8(t,e){this.getView().setUint8(t,e)}setUint16(t,e,r){this.getView().setUint16(t,e,r)}setUint32(t,e,r){this.getView().setUint32(t,e,r)}getBigInt64(t,e){return this.getView().getBigInt64(t,e)}getBigUint64(t,e){return this.getView().getBigUint64(t,e)}setBigInt64(t,e,r){this.getView().setBigInt64(t,e,r)}setBigUint64(t,e,r){this.getView().setBigUint64(t,e,r)}}class l extends u.A{constructor(t,e){return super(),(0,s.A)(this,"pointer",void 0),(0,s.A)(this,"len",void 0),this.pointer=t,this.len=e,this.proxy}getIndexValue(t){return a.f[2](this.pointer+t)}setIndexValue(t,e){o.M[2](this.pointer+t,e)}set(t,e=0){new Uint8Array((0,c.Lv)(),this.pointer,this.len).set(t,e)}subarray(t=0,e,r){return r&&!h.USE_THREADS?new l(this.pointer+t,(e||this.len)-t):new Uint8Array((0,c.Lv)(),this.pointer+t,(null!=e?e:this.len)-t)}slice(t=0,e){var r;return n()(r=new Uint8Array((0,c.Lv)(),this.pointer+t,(null!=e?e:this.len)-t)).call(r)}get length(){return this.len}get byteLength(){return this.len}get buffer(){return(0,c.Lv)()}get byteOffset(){return this.pointer}get view(){return new d(this.pointer,this.len)}}},12264:(t,e,r)=>{"use strict";r.d(e,{A:()=>A});var s,i,n=r(49859),a=r(74707),o=r.n(a),c=r(61499),u=r(12085),h=r(11473),d=r(63939),l=r(50932),f=r(99921),p=r(14686),m=r(67672),g=r(29170);class v{constructor(){(0,n.A)(this,"prev",void 0),(0,n.A)(this,"next",void 0),(0,n.A)(this,"data",void 0)}}s=v.prototype,(i=new(o())).set("prev",{0:v,1:1,2:1,3:0,4:0,5:0,6:0,7:0,8:0}),i.set("next",{0:v,1:1,2:1,3:0,4:0,5:0,6:0,7:4,8:0}),i.set("data",{0:1,1:1,2:1,3:0,4:0,5:0,6:0,7:8,8:0}),(0,u.A)(s,c.Og,!0),(0,u.A)(s,c.dc,4),(0,u.A)(s,c.g7,12),(0,u.A)(s,c.JY,i);class A{constructor(){(0,n.A)(this,"length",0),(0,n.A)(this,"head",0),(0,n.A)(this,"tail",0)}createNode(t,e,r=!1){const s=h.s_.malloc(12);if(l.M[20](s+4,0),l.M[20](s,0),m.ai(e))if(20===e)l.M[20](s+8,t);else{const r=h.s_.malloc((0,f.A)(e));l.M[e](r,t),l.M[20](s+8,r)}else if(r)l.M[20](s+8,t);else{const r=h.s_.malloc((0,f.A)(e));(0,p.Mr)(r,t[c.o9],(0,f.A)(e)),l.M[20](s+8,r)}return s}getItem(t,e){let r;return r=m.ai(e)?20===e?t:d.f[e](t):(0,g.A)(t,e),r}push(t,e,r=!1){const s=this.createNode(t,e,r);this.tail?(l.M[20](this.tail+4,s),l.M[20](s,this.tail),this.tail=s):(this.head=s,this.tail=s),this.length++}pop(t){const e=this.tail;let r=this.getItem(d.f[20](e+8),t);return this.length>1?(l.M[20](d.f[20](e)+4,0),this.tail=d.f[20](e)):(this.head=0,this.tail=0),this.length--,h.s_.free(d.f[20](e+8)),h.s_.free(e),r}shift(t){const e=this.head;let r=this.getItem(d.f[20](e+8),t);return this.length>1?(l.M[20](d.f[20](e+4),0),this.head=d.f[20](e+4)):(this.head=0,this.tail=0),this.length--,h.s_.free(d.f[20](e+8)),h.s_.free(e),r}unshift(t,e,r=!1){const s=this.createNode(t,e,r);this.head?(l.M[20](this.head,s),l.M[20](s+4,this.head),this.head=s):(this.head=s,this.tail=s),this.length++}forEach(t,e){if(!this.length)return;let r=this.head,s=0;for(;0!==r&&!1!==t(this.getItem(d.f[20](r+8),e),s);)r=d.f[20](r+4),s++}find(t,e){if(!this.length)return 0;let r=this.head,s=0;for(;0!==r;){const i=this.getItem(d.f[20](r+8),e);if(!0===t(i,s))return i;r=d.f[20](r+4),s++}return 0}indexOf(t,e){if(!this.length)return 0;let r=this.head,s=0;for(;0!==r;){if(s===t)return this.getItem(d.f[20](r+8),e);r=d.f[20](r+4),s++}return 0}clear(t,e){if(this.length){let r=this.head;for(;0!==r;){t&&t(this.getItem(d.f[20](r+8),e)),h.s_.free(d.f[20](r+8));const s=d.f[20](r+4);h.s_.free(r),r=s}}this.head=0,this.tail=0,this.length=0}}!function(t){var e=new(o());e.set("length",{0:8,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),e.set("head",{0:v,1:1,2:1,3:0,4:0,5:0,6:0,7:4,8:0}),e.set("tail",{0:v,1:1,2:1,3:0,4:0,5:0,6:0,7:8,8:0}),(0,u.A)(t,c.Og,!0),(0,u.A)(t,c.dc,4),(0,u.A)(t,c.g7,12),(0,u.A)(t,c.JY,e)}(A.prototype)},20756:(t,e,r)=>{"use strict";r.d(e,{A:()=>n});var s=r(7417),i=r(40046);function n(){return i.WQ(s.hf,1,9,2)}},72703:(t,e,r)=>{"use strict";r.d(e,{A:()=>i});var s=r(67672);function i(t){return s.ai(t)&&t>=0}},74503:(t,e,r)=>{"use strict";r.d(e,{A:()=>u});var s=r(99921),i=r(11473),n=r(14686),a=r(95335),o=r(34677),c=r(29170);function u(t,e){(0,o.A)(e)||(e=t,t=null);const r=(0,s.A)(e),u=i.s_.malloc(r);if(!u)throw new TypeError("cannot alloc memory for struct");(0,n.sO)(u,0,r);const h=(0,c.A)(u,e),d=new e;return t&&a.X$(d,t),a.__(d,((t,e)=>{(0,o.A)(t)&&(h[e]=t)})),h}},14686:(t,e,r)=>{"use strict";r.d(e,{JW:()=>p,Mr:()=>d,TL:()=>A,cC:()=>g,gd:()=>v,lH:()=>w,lW:()=>l,qW:()=>y,s3:()=>m,sO:()=>f}),r(50314);var s=r(5496),i=r.n(s),n=r(11473),a=r(50011),o=r(50932),c=r(79630),u=r(26429),h=r(63939);function d(t,e,r){(0,n.eq)().set((0,n.eq)().subarray(e,e+r),t)}function l(t,e,r){(0,n.eq)().set(r.subarray(0,e),t)}function f(t,e,r){var s;i()(s=(0,n.eq)().subarray(t,t+r)).call(s,e)}function p(t,e){return u.USE_THREADS?m(t,e):new c.A(t,e)}function m(t,e){return new Uint8Array((0,n.Lv)(),t,e)}function g(t,e){return new Int16Array((0,n.Lv)(),t,e)}function v(t,e){return new Int32Array((0,n.Lv)(),t,e)}function A(t,e){return new Float32Array((0,n.Lv)(),t,e)}function w(t,e){let r=0;for(;h.f[4]((t+=1)-1)&&(r++,!(e&&r>=e)););const s=Math.min(r,null!=e?e:r);return a.decode(m(t,s))}function y(t,e,r,s=!0){const i=a.encode(e);let n=i.length,c=s?1:0;r&&n-c>r&&(n=r-c),l(t,n,i),s&&o.M[11](t+n,0)}},99921:(t,e,r)=>{"use strict";r.d(e,{A:()=>a});var s=r(61499),i=r(67672),n=r(6704);function a(t){return i.ai(t)?n.i[t]||0:i.Pc(t)&&t.prototype[s.Og]?t.prototype[s.g7]:0}},29170:(t,e,r)=>{"use strict";r.d(e,{A:()=>u});var s=r(61499),i=r(80098),n=r(25323),a=r(95797),o=r(67672),c=r(10534);function u(t,e){return arguments[2]&&o.Yj(arguments[2])&&(e=e.prototype,c.__(arguments[2],(t=>{const r=e[s.JY];e=r.get(t)[0]}))),a.A.proxy?(0,i.I_)(t,e):(0,n.l)(t,e)}},94300:(t,e,r)=>{"use strict";r.d(e,{A:()=>c});var s=r(11473),i=r(61499),n=r(80098),a=r(25323),o=r(95797);function c(t){const e=t[i.o9];e&&(s.s_.free(e),t[i.o9]=0,o.A.proxy?(0,n.SQ)(t):(0,a.X)(t))}},61499:(t,e,r)=>{"use strict";r.d(e,{JY:()=>u,Og:()=>n,dc:()=>o,g7:()=>a,kE:()=>h,o9:()=>c});var s=r(16781),i=r.n(s);const n=i()("Struct"),a=i()("StructLength"),o=i()("StructMaxBaseTypeByteLength"),c=i()("StructAddress"),u=(i()("StructKeysQueue"),i()("StructKeysMeta")),h=(i()("StructKeysInstance"),i()("StructProxyRevoke"))},10047:(t,e,r)=>{"use strict";r.d(e,{A:()=>s});const s="AGFzbQEAAAABLAdgAX8Bf2ABfwF+YAJ/fwF/YAJ/fgF+YAN/f38Bf2ADf35+AX5gA39/fgF/AhIBA2VudgZtZW1vcnkCAwGAgAQDKCcAAAABAgICAwICAgMCAgIDAgICAwICAgMCAgIDAgICAwQEBAUCAgYHhgMnBWxvYWQ4AAAGbG9hZDE2AAEGbG9hZDMyAAIGbG9hZDY0AAMGc3RvcmU4AAQHc3RvcmUxNgAFB3N0b3JlMzIABgdzdG9yZTY0AAcEYWRkOAAIBWFkZDE2AAkFYWRkMzIACgVhZGQ2NAALBHN1YjgADAVzdWIxNgANBXN1YjMyAA4Fc3ViNjQADwRhbmQ4ABAFYW5kMTYAEQVhbmQzMgASBWFuZDY0ABMDb3I4ABQEb3IxNgAVBG9yMzIAFgRvcjY0ABcEeG9yOAAYBXhvcjE2ABkFeG9yMzIAGgV4b3I2NAAbCWV4Y2hhbmdlOAAcCmV4Y2hhbmdlMTYAHQpleGNoYW5nZTMyAB4KZXhjaGFuZ2U2NAAfEWNvbXBhcmVfZXhjaGFuZ2U4ACASY29tcGFyZV9leGNoYW5nZTE2ACESY29tcGFyZV9leGNoYW5nZTMyACISY29tcGFyZV9leGNoYW5nZTY0ACMGbm90aWZ5ACQEd2FpdAAlC3dhaXRUaW1lb3V0ACYKugMnCAAgAP4SAAALCAAgAP4TAQALCAAgAP4QAgALCAAgAP4RAwALDAAgACAB/hkAACABCwwAIAAgAf4aAQAgAQsMACAAIAH+FwIAIAELDAAgACAB/hgDACABCwoAIAAgAf4gAAALCgAgACAB/iEBAAsKACAAIAH+HgIACwoAIAAgAf4fAwALCgAgACAB/icAAAsKACAAIAH+KAEACwoAIAAgAf4lAgALCgAgACAB/iYDAAsKACAAIAH+LgAACwoAIAAgAf4vAQALCgAgACAB/iwCAAsKACAAIAH+LQMACwoAIAAgAf41AAALCgAgACAB/jYBAAsKACAAIAH+MwIACwoAIAAgAf40AwALCgAgACAB/jwAAAsKACAAIAH+PQEACwoAIAAgAf46AgALCgAgACAB/jsDAAsKACAAIAH+QwAACwoAIAAgAf5EAQALCgAgACAB/kECAAsKACAAIAH+QgMACwwAIAAgASAC/koAAAsMACAAIAEgAv5LAQALDAAgACABIAL+SAIACwwAIAAgASAC/kkDAAsKACAAIAH+AAIACwwAIAAgAUJ//gECAAsMACAAIAEgAv4BAgAL"},82854:(t,e,r)=>{"use strict";r.d(e,{KJ:()=>u,Ko:()=>h,Ts:()=>d});var s=r(4919),i=r(4624),n=r(88096),a=r(10047),o=r(40046);const c="src/cheap/thread/asm/atomics.ts";let u;function h(){return!!u}function d(t,e,r){try{if(!("function"==typeof SharedArrayBuffer&&t.buffer instanceof SharedArrayBuffer))return;{const i=n.bx((0,s.E_)(a.A),{shared:!0,initial:e,maximum:r});u=new WebAssembly.Instance(new WebAssembly.Module(i),{env:{memory:t}})}(0,o.$Z)({add:function(t,e,r){switch(r){case 5:case 3:return 255&u.exports.add8(t,e);case 12:return u.exports.add8(t,e);case 14:return u.exports.add16(t,e);case 7:return 65535&u.exports.add16(t,e);case 16:return u.exports.add32(t,e);case 9:return 4294967295&u.exports.add32(t,e);case 21:return u.exports.add64(t,e);case 22:return BigInt.asUintN(64,u.exports.add64(t,e))}},sub:function(t,e,r){switch(r){case 5:case 3:return 255&u.exports.sub8(t,e);case 12:return u.exports.sub8(t,e);case 14:return u.exports.sub16(t,e);case 7:return 65535&u.exports.sub16(t,e);case 16:return u.exports.sub32(t,e);case 9:return 4294967295&u.exports.sub32(t,e);case 21:return u.exports.sub64(t,e);case 22:return BigInt.asUintN(64,u.exports.sub64(t,e))}},and:function(t,e,r){switch(r){case 5:case 3:return 255&u.exports.and8(t,e);case 12:return u.exports.and8(t,e);case 14:return u.exports.and16(t,e);case 7:return 65535&u.exports.and16(t,e);case 16:return u.exports.and32(t,e);case 9:return 4294967295&u.exports.and32(t,e);case 21:return u.exports.and64(t,e);case 22:return BigInt.asUintN(64,u.exports.and64(t,e))}},or:function(t,e,r){switch(r){case 5:case 3:return 255&u.exports.or8(t,e);case 12:return u.exports.or8(t,e);case 14:return u.exports.or16(t,e);case 7:return 65535&u.exports.or16(t,e);case 16:case 9:return u.exports.or32(t,e);case 21:return u.exports.or64(t,e);case 22:return BigInt.asUintN(64,u.exports.or64(t,e))}},xor:function(t,e,r){switch(r){case 5:case 3:return 255&u.exports.xor8(t,e);case 12:return u.exports.xor8(t,e);case 14:return u.exports.xor16(t,e);case 7:return 65535&u.exports.xor16(t,e);case 16:case 9:return u.exports.xor32(t,e);case 21:return u.exports.xor64(t,e);case 22:return BigInt.asUintN(64,u.exports.xor64(t,e))}},store:function(t,e,r){switch(r){case 5:case 12:case 3:return u.exports.store8(t,e);case 14:case 7:return u.exports.store16(t,e);case 16:case 9:return u.exports.store32(t,e);case 21:case 22:return u.exports.store64(t,e)}},load:function(t,e){switch(e){case 5:case 3:return 255&u.exports.load8(t);case 12:return u.exports.load8(t);case 14:case 7:return u.exports.load16(t);case 16:return u.exports.load32(t);case 9:return 4294967295&u.exports.load32(t);case 21:return u.exports.load64(t);case 22:return BigInt.asUintN(64,u.exports.load64(t))}},compareExchange:function(t,e,r,s){switch(s){case 5:case 3:return 255&u.exports.compare_exchange8(t,e,r);case 12:return u.exports.compare_exchange8(t,e,r);case 14:return u.exports.compare_exchange16(t,e,r);case 7:return 65535&u.exports.compare_exchange16(t,e,r);case 16:return u.exports.compare_exchange32(t,e,r);case 9:return 4294967295&u.exports.compare_exchange32(t,e,r);case 21:return u.exports.compare_exchange64(t,e,r);case 22:return BigInt.asUintN(64,u.exports.compare_exchange64(t,e,r))}},exchange:function(t,e,r){switch(r){case 5:case 3:return 255&u.exports.exchange8(t,e);case 12:return u.exports.exchange8(t,e);case 14:return u.exports.exchange16(t,e);case 7:return 65535&u.exports.exchange16(t,e);case 16:return u.exports.exchange32(t,e);case 9:return 4294967295&u.exports.exchange32(t,e);case 21:return u.exports.exchange64(t,e);case 22:return BigInt.asUintN(64,u.exports.exchange64(t,e))}},notify:function(t,e){return u.exports.notify(t,e)},wait:function(t,e){return u.exports.wait(t,e)},waitTimeout:function(t,e,r){return u.exports.waitTimeout(t,e,BigInt(0|r)*BigInt(1e6))}})}catch(t){i.R8("atomics asm not support, cannot use asm atomics function",c,291)}}},40046:(t,e,r)=>{"use strict";let s,i,n,a,o,c,u,h,d,l,f,p,m,g;function v(t){t.add&&(s=t.add),t.sub&&(i=t.sub),t.and&&(n=t.and),t.or&&(a=t.or),t.xor&&(o=t.xor),t.store&&(c=t.store),t.load&&(u=t.load),t.compareExchange&&(h=t.compareExchange),t.exchange&&(d=t.exchange),t.notify&&(l=t.notify),t.wait&&(f=t.wait),t.waitTimeout&&(p=t.waitTimeout),t.waitAsync&&(m=t.waitAsync),t.waitTimeoutAsync&&(g=t.waitTimeoutAsync)}r.d(e,{$Z:()=>v,Hh:()=>u,I8:()=>o,M_:()=>c,Uo:()=>n,WQ:()=>s,cv:()=>d,j4:()=>p,jb:()=>i,me:()=>l,or:()=>a,p_:()=>h,uk:()=>f})},33856:(t,e,r)=>{"use strict";r.d(e,{A:()=>S});var s=r(61240),i=r.n(s),n=r(86932),a=r(7972),o=r(40046),c=r(26429),u=r(86834),h=r(95797);let d;const l=c.USE_THREADS||!u.A.chrome&&h.A.atomics||u.A.checkVersion(u.A.majorVersion,"94",!0);function f(t,e,r,s){if(l)return Atomics.add(d(r),t>>>s,e);{const i=d(r),n=t>>>s,a=i[n];return i[n]+=e,a}}function p(t,e,r,s){if(l)return Atomics.sub(d(r),t>>>s,e);{const i=d(r),n=t>>>s,a=i[n];return i[n]-=e,a}}function m(t,e,r,s){if(l)return Atomics.and(d(r),t>>>s,e);{const i=d(r),n=t>>>s,a=i[n];return i[n]&=e,a}}function g(t,e,r,s){if(l)return Atomics.or(d(r),t>>>s,e);{const i=d(r),n=t>>>s,a=i[n];return i[n]|=e,a}}function v(t,e,r,s){if(l)return Atomics.xor(d(r),t>>>s,e);{const i=d(r),n=t>>>s,a=i[n];return i[n]^=e,a}}function A(t,e,r,s){if(l)return Atomics.store(d(r),t>>>s,e);{const i=d(r),n=t>>>s,a=i[n];return i[n]=e,a}}function w(t,e,r){return l?Atomics.load(d(e),t>>>r):d(e)[t>>>r]}function y(t,e,r,s,i){if(l)return Atomics.compareExchange(d(s),t>>>i,e,r);{const n=d(s),a=t>>>i,o=n[a];return o===e&&(n[a]=r),o}}function b(t,e,r,s){if(l)return Atomics.exchange(d(r),t>>>s,e);{const i=d(r),n=t>>>s,a=i[n];return i[n]=e,a}}function k(t,e){return l?Atomics.notify(d(16),t>>>2,e):void 0}const x={ok:0,"not-equal":1,"timed-out":2};function _(t,e){return x[Atomics.wait(d(16),t>>>2,e)]}function I(t,e,r){return x[Atomics.wait(d(16),t>>>2,e,r)]}async function P(t,e){if(Atomics.waitAsync){const r=Atomics.waitAsync(d(16),t>>>2,e);return r.async?x[await r.value]:x[r.value]}if(w(t)!==e)return 1;for(;w(t)===e;)await new(i())((t=>{(0,a.A)((()=>{t()}))}));return 0}async function M(t,e,r){if(Atomics.waitAsync){const s=Atomics.waitAsync(d(16),t>>>2,e,r);return s.async?x[await s.value]:x[s.value]}if(w(t)!==e)return 1;{const s=(0,n.A)();for(;w(t)===e&&(0,n.A)()-s<r;)await new(i())((t=>{(0,a.A)((()=>{t()}))}));return w(t)!==e?0:2}}function S(t){d=t,(0,o.$Z)({add:f,sub:p,and:m,or:g,xor:v,store:A,load:w,compareExchange:y,exchange:b,notify:k,wait:_,waitTimeout:I,waitAsync:P,waitTimeoutAsync:M})}},42518:(t,e,r)=>{"use strict";r.d(e,{Ts:()=>l,XR:()=>v,mq:()=>m,uk:()=>g,vP:()=>p,zr:()=>f});var s,i,n=r(49859),a=r(74707),o=r.n(a),c=r(61499),u=r(12085),h=r(73783),d=r(40046);function l(t,e){return d.M_(t,0,16,2),0}function f(t){return d.M_(t,0,16,2),0}function p(t){return d.WQ(t,1,16,2),d.me(t,1),0}function m(t){return d.WQ(t,1,16,2),d.me(t,1073741824),0}function g(t,e){let r=d.Hh(t,16,2);return h.Tl(e),d.uk(t,r),h.s2(e),0}function v(t,e,r){let s=d.Hh(t,16,2);h.Tl(e);let i=d.j4(t,s,r);return h.s2(e),2===i?110:0}s=class{constructor(){(0,n.A)(this,"atomic",void 0)}}.prototype,(i=new(o())).set("atomic",{0:16,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),(0,u.A)(s,c.Og,!0),(0,u.A)(s,c.dc,4),(0,u.A)(s,c.g7,4),(0,u.A)(s,c.JY,i)},81574:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>o});var s=r(84149),i=(r(55013),r(10576)),n=r(67672);let a=i.TK;function o(t){let e,r;a.onmessage=o=>{const c=o.data,u=c.type,h=c.data;switch(u){case"init":if(i.TK.CHeap&&i.TK.CHeap.initThread&&i.TK.CHeap.Config.USE_THREADS)return void i.TK.CHeap.initThread(h).then((()=>{a.postMessage({type:"ready"})}));a.postMessage({type:"ready"});break;case"run":a.postMessage({type:"running"}),r=t(h.params),d=h.port,e=new s.Ay(d),e.on(s.S3,(async t=>{const s=t.method,i=t.params;if(n.Pc(r[s]))try{r[s].transfer||(r[s].transfer=[]);const n=await r[s](...i.params);e.reply(t,n,null,r[s].transfer),r[s].transfer.length=0}catch(r){e.reply(t,-2097152,{message:r.message})}}));break;case"stop":e&&e.destroy(),i.TK.__freeSmartPtr__&&i.TK.__freeSmartPtr__(),a.postMessage({type:"stopped"})}var d}}},26848:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>n});var s=r(10576);let i=s.TK;function n(t){let e;i.onmessage=r=>{const n=r.data,a=n.type,o=n.data;switch(a){case"init":if(s.TK.CHeap&&s.TK.CHeap.initThread&&s.TK.CHeap.Config.USE_THREADS)return void s.TK.CHeap.initThread(o).then((()=>{i.postMessage({type:"ready"})}));i.postMessage({type:"ready"});break;case"run":e=t(o.params);break;case"stop":e&&e.then?e.then((t=>{s.TK.__freeSmartPtr__&&s.TK.__freeSmartPtr__(),i.postMessage({type:"stopped",data:t})})):(s.TK.__freeSmartPtr__&&s.TK.__freeSmartPtr__(),i.postMessage({type:"stopped",data:e}))}}}},67524:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>o});var s=r(84149),i=(r(55013),r(10576)),n=r(67672);let a=i.TK;function o(t){let e;a.onmessage=r=>{const o=r.data,c=o.type,u=o.data;switch(c){case"init":if(i.TK.CHeap&&i.TK.CHeap.initThread&&i.TK.CHeap.Config.USE_THREADS)return void i.TK.CHeap.initThread(u).then((()=>{a.postMessage({type:"ready"})}));a.postMessage({type:"ready"});break;case"run":a.postMessage({type:"running"}),h=u.port,e=new s.Ay(h),e.on(s.S3,(async r=>{const s=r.method,i=r.params;if(n.Pc(t[s]))try{t[s].transfer||(t[s].transfer=[]);const n=await t[s](...i.params);e.reply(r,n,null,t[s].transfer),t[s].transfer.length=0}catch(t){e.reply(r,-2097152,{message:t.message})}}));break;case"stop":e&&e.destroy(),i.TK.__freeSmartPtr__&&i.TK.__freeSmartPtr__(),a.postMessage({type:"stopped"})}var h}}},73783:(t,e,r)=>{"use strict";r.d(e,{Tl:()=>g,Ts:()=>f,bh:()=>m,eu:()=>l,s2:()=>p,zr:()=>v});var s,i,n=r(49859),a=r(74707),o=r.n(a),c=r(61499),u=r(12085),h=r(40046),d=r(39638);class l{constructor(){(0,n.A)(this,"atomic",void 0)}}function f(t){return h.M_(t,0,16,2),0}function p(t,e=!1){let r;if(0!==(r=h.p_(t,0,1,16,2)))do{2!=r&&0===h.p_(t,1,2,16,2)||!e&&(0,d.A)()&&h.uk(t,2)}while(0!==(r=h.p_(t,0,2,16,2)));return 0}function m(t){return 0===h.p_(t,0,1,16,2)?0:16}function g(t){return 1!==h.jb(t,1,16,2)&&(h.M_(t,0,16,2),h.me(t,1)),0}function v(t){return h.M_(t,0,16,2),0}s=l.prototype,(i=new(o())).set("atomic",{0:16,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),(0,u.A)(s,c.Og,!0),(0,u.A)(s,c.dc,4),(0,u.A)(s,c.g7,4),(0,u.A)(s,c.JY,i)},79490:(t,e,r)=>{"use strict";r.d(e,{Ts:()=>p,XR:()=>w,Zr:()=>A,bE:()=>g,uk:()=>v,zr:()=>m});var s,i,n=r(49859),a=r(74707),o=r.n(a),c=r(61499),u=r(12085),h=r(73783),d=r(63939),l=r(50932),f=r(40046);function p(t,e){return f.M_(t,0|e,16,2),h.Ts(t+4),0}function m(t){return h.zr(t+4),0}function g(t){return f.WQ(t,1,16,2),f.me(t,1),0}function v(t){for(;f.uk(t,0),f.jb(t,1,16,2)<=0;)f.WQ(t,1,16,2);return 0}function A(t){return h.s2(t+4),d.f[16](t)>0?(l.M[16](t,d.f[16](t)-1),h.Tl(t+4),0):(h.Tl(t+4),11)}function w(t,e){return 2!==f.j4(t,0,e)&&f.jb(t,1,16,2)<=0?(f.WQ(t,1,16,2),110):0}s=class{constructor(){(0,n.A)(this,"atomic",void 0),(0,n.A)(this,"mutex",void 0)}}.prototype,(i=new(o())).set("atomic",{0:16,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),i.set("mutex",{0:h.eu,1:0,2:0,3:0,4:0,5:0,6:0,7:4,8:0}),(0,u.A)(s,c.Og,!0),(0,u.A)(s,c.dc,4),(0,u.A)(s,c.g7,8),(0,u.A)(s,c.JY,i)},88506:(t,e,r)=>{"use strict";r.d(e,{nE:()=>P,pt:()=>I});var s=r(16781),i=r.n(s),n=r(74707),a=r.n(n),o=r(96984),c=r.n(o),u=r(61240),h=r.n(u),d=r(11473),l=r(84149),f=(r(55013),r(61837)),p=r(26429),m=r(67672),g=r(10576),v=r(62100),A=r(95073);let w=g.TK.Worker,y=g.TK.MessageChannel;r(81574),r(26848),r(67524);const b=(0,f.A)(81574,{varName:"init"}),k=((0,f.A)(26848,{varName:"init"}),(0,f.A)(67524,{varName:"init"}),i()("revoke")),x=new(a());function _(t,e){return`${t}_${e}`}function I(t,e,r){e=e||{},m.Pc(e)&&(r=e,e={});let s,i=[];function n(...e){const s=new t(...e);return new(h())((e=>{const i={$worker:null,$ipc:null,$channel:null,$moduleId:(0,v.A)(r),$stackPointer:0,$instance:s,$type:"class"},{proxy:n,revoke:a}=Proxy.revocable(i,{get(e,r,n){if(e[r])return i[r];if(r in t.prototype&&"function"==typeof t.prototype[r]){const t=function(...t){return s[r](...t)};t.transfer=function(...t){return{invoke:function(...t){return s[r](...t)}}},e[r]=t}return e[r]}});i[k]=a,e(n)}))}return s=(...s)=>{let n;if(m.Pc(r))n=r();else{let e;const s=_(r,"class");if(x.has(s))e=x.get(s).url,x.get(s).refCount++;else{const i=(0,f.A)(r,{varName:`__module_${t.name}__`,exportName:`__${t.name}__`,pointName:t.name,exportIsClass:!0}),n=`\n            self.CHEAP_DISABLE_THREAD = ${g.TK.CHEAP_DISABLE_THREAD}\n            self.CHEAP_HEAP_INITIAL = ${g.TK.CHEAP_HEAP_INITIAL}\n            self.CHEAP_HEAP_MAXIMUM = ${g.TK.CHEAP_HEAP_MAXIMUM}\n            ${g.TK.CHEAP_POLYFILL_URL?`self.CHEAP_POLYFILL_URL = '${g.TK.CHEAP_POLYFILL_URL}'`:""}\n            ${g.TK.CHEAP_POLYFILL_URL?`importScripts('${g.TK.CHEAP_POLYFILL_URL}');`:""}\n            ${i}\n            function run(params) {\n              params.unshift(null)\n              return new (Function.prototype.bind.apply(__module_${t.name}__.__${t.name}__, params))()\n            }\n            ${b}\n            init.default(run);\n          `;{const t=new Blob([n],{type:"text/javascript"});e=c().createObjectURL(t)}x.set(s,{url:e,refCount:1})}n=new w(e)}const a=new y;return new(h())(((o,c)=>{var u;const h=p.USE_THREADS?d.s_.alignedAlloc(p.STACK_ALIGNMENT,e.stackSize?(0,A.A)(e.stackSize,p.STACK_ALIGNMENT):p.STACK_SIZE):0;n.onmessage=e=>{const c=e.data,u=c.type;switch(c.data,u){case"ready":n.postMessage({type:"run",data:{port:a.port2,params:s}},[a.port2,...i]);break;case"running":!function(){const e=new l.Ay(a.port1),s={$worker:n,$ipc:e,$channel:a,$moduleId:(0,v.A)(r),$stackPointer:h,$type:"class"},{proxy:i,revoke:c}=Proxy.revocable(s,{get(r,i,n){if(r[i])return s[i];if(i in t.prototype&&"function"==typeof t.prototype[i]){const t=async function(...t){return e.request(i,{params:t})};t.transfer=function(...t){return{invoke:async function(...r){return e.request(i,{params:r},t)}}},r[i]=t}return r[i]}});s[k]=c,o(i)}()}},n.postMessage({type:"init",data:{memory:p.USE_THREADS?d.ce:null,name:e.name||t.name,stackPointer:h,stackSize:null!==(u=e.stackSize)&&void 0!==u?u:p.STACK_SIZE}})}))},{run:!p.USE_THREADS&&!e.dispatchToWorker||e.disableWorker?n:s,transfer:function(...t){return i=t,{run:!p.USE_THREADS&&!e.dispatchToWorker||e.disableWorker?n:s}}}}function P(t){if(t.$worker&&(t.$worker.terminate(),t.$worker=null),t.$moduleId){if(m.Yj(t.$moduleId)){const e=_(t.$moduleId,t.$type);x.has(e)&&(x.get(e).refCount--,0===x.get(e).refCount&&(c().revokeObjectURL(x.get(e).url),x.delete(e)))}t.$moduleId=null}if(t.$ipc&&(t.$ipc.destroy(),t.$ipc=null),t.$stackPointer&&(d.s_.free(t.$stackPointer),t.$stackPointer=0),t.$channel=null,t.$instance=null,t[k]){const e=t[k];t[k]=null,e()}}},6704:(t,e,r)=>{"use strict";r.d(e,{_:()=>i,i:()=>s});const s={2:1,3:1,4:1,5:1,6:2,7:2,8:4,9:4,10:8,11:1,12:1,13:2,14:2,15:4,16:4,17:8,18:4,19:8,20:4,0:4,1:4,22:8,21:8,23:1,24:1,25:4},i={2:0,3:0,4:0,5:0,6:1,7:1,8:2,9:2,10:4,11:0,12:0,13:1,14:1,15:2,16:2,17:4,18:2,19:4,20:2,1:2,0:2,22:4,21:4,23:0,24:0,25:2}},19094:(t,e,r)=>{"use strict";r.d(e,{A:()=>A});var s=r(49859),i=r(61240),n=r.n(i),a=r(48079),o=r.n(a),c=r(5496),u=r.n(c),h=r(11473),d=r(63939),l=r(50932),f=r(26429),p=r(14686),m=r(42518),g=r(73783),v=r(40046);class A{constructor(t,e,r){(0,s.A)(this,"count",void 0),(0,s.A)(this,"url",void 0),(0,s.A)(this,"childImportUrl",void 0),(0,s.A)(this,"childThreads",void 0),this.count=t,this.url=e,this.childImportUrl=r,this.childThreads=[]}async createTheadPoolEntry(t){return new(n())(((e,r)=>{const s=new Worker(this.url),i=h.s_.alignedAlloc(f.STACK_ALIGNMENT,f.STACK_SIZE),n=h.s_.malloc(8);(0,p.sO)(n,0,8),l.M[15](n+4,0),l.M[15](n,2|d.f[15](n));const a=(0,h.pv)();s.onmessage=t=>{if("ready"===t.data.type){const t=i;(0,p.sO)(t,0,20),g.Ts(t+16),m.Ts(t+12),s.postMessage({type:"wait"}),e({id:a,thread:{thread:0,worker:s,stackPointer:i,threadDescriptor:n},threadWait:t})}},this.childImportUrl&&s.postMessage({type:"import",data:{url:this.childImportUrl.href}}),s.postMessage({type:"ready",data:{cheap:{memory:h.ce,stackPointer:i,stackSize:f.STACK_SIZE,id:a},runner:{resource:{tableSize:t.tableSize,module:t.module,initFuncs:t.initFuncs},options:{memoryBase:t.memoryBase,tableBase:t.tableBase,threadDescriptor:n,childImports:t.childImports},imports:t.childImports}}})}))}async ready(t){var e,r;this.childThreads=await n().all(o()(e=u()(r=new Array(this.count)).call(r,0)).call(e,(()=>this.createTheadPoolEntry(t))))}hasFree(){for(let t=0;t<this.childThreads.length;t++)if(0===d.f[15](this.childThreads[t].thread.threadDescriptor+4))return!0;return!1}isPoolThread(t){for(let e=0;e<this.childThreads.length;e++)if(this.childThreads[e].thread.thread===t)return!0;return!1}createThread(t,e,r,s){for(let e=0;e<this.childThreads.length;e++)if(0===d.f[15](this.childThreads[e].thread.threadDescriptor+4))return l.M[15](this.childThreads[e].thread.threadDescriptor+4,1),this.childThreads[e].thread.thread=t,l.M[15](t+8,2|d.f[15](t+8)),g.s2(this.childThreads[e].threadWait+16),l.M[20](this.childThreads[e].threadWait,t),l.M[20](this.childThreads[e].threadWait+4,r),l.M[20](this.childThreads[e].threadWait+8,s),g.Tl(this.childThreads[e].threadWait+16),void m.vP(this.childThreads[e].threadWait+12)}joinThread(t,e){let r;for(let e=0;e<this.childThreads.length;e++)if(this.childThreads[e].thread.thread===t){r=this.childThreads[e];break}return r?(1&d.f[15](t+8)||(v.uk(t+12,1),0!==e&&l.M[20](e,d.f[20](t+4)),l.M[15](r.thread.threadDescriptor+4,0)),0):-1}detachThread(t){let e;for(let r=0;r<this.childThreads.length;r++)if(this.childThreads[r].thread.thread===t){e=this.childThreads[r];break}return e?(l.M[15](e.thread.threadDescriptor,1|d.f[15](e.thread.threadDescriptor)),l.M[15](t+8,1|d.f[15](t+8)),0):-1}destroy(){for(let t=0;t<this.childThreads.length;t++)h.s_.free(this.childThreads[t].thread.stackPointer),h.s_.free(this.childThreads[t].thread.threadDescriptor),this.childThreads[t].thread.worker.terminate();this.childThreads=[]}}},16030:(t,e,r)=>{"use strict";r.d(e,{A:()=>F});var s=r(49859),i=r(74707),n=r.n(i),a=r(96984),o=r.n(a),c=r(61240),u=r.n(c),h=r(86226),d=r.n(h),l=r(63939),f=r(50932),p=r(11473),m=r(95335),g=r(72739),v=r(4624),A=r(67672),w=r(14686),y=r(14621),b=r(1708),k=r(20357),x=r(77775),_=r(26429),I=r(40046),P=r(82854),M=r(80905),S=r(24565),E=r(19094),T=r(42518),B=r(73783),C=r(95797),U=(r(81999),r(10576)),D=r(61837);const R="src/cheap/webassembly/WebAssemblyRunner.ts";let L=U.TK.Worker;function $(){}let O=!1;class F{static getTable(){return p.XI}static mutexLock(t){B.s2(t)}static mutexUnlock(t){B.Tl(t)}static condWait(t,e){T.uk(t,e)}static readPointer(t){return l.f[20](t)}static writePointer(t,e){f.M[20](t,e)}constructor(t,e={}){var r,i;(0,s.A)(this,"resource",void 0),(0,s.A)(this,"instance",void 0),(0,s.A)(this,"options",void 0),(0,s.A)(this,"builtinMalloc",void 0),(0,s.A)(this,"memoryBase",void 0),(0,s.A)(this,"tableBase",void 0),(0,s.A)(this,"childImports",void 0),(0,s.A)(this,"childUrl",void 0),(0,s.A)(this,"childImportUrl",void 0),(0,s.A)(this,"childBlob",void 0),(0,s.A)(this,"childThreads",void 0),(0,s.A)(this,"imports",void 0),(0,s.A)(this,"childReadyPromises",void 0),(0,s.A)(this,"threadPool",void 0),(0,s.A)(this,"initCalling",void 0),(0,s.A)(this,"promisingMap",void 0),this.resource=t,this.builtinMalloc=[],this.initCalling=!1,this.childThreads=new(n()),this.childReadyPromises=[],this.promisingMap=new(n()),A.Yj(e.childImports)?this.childImports=e.childImports:A.Ik(e.childImports)&&e.childImports instanceof Blob&&(this.childImports=o().createObjectURL(e.childImports)),this.memoryBase=t.dataSize?p.s_.alignedAlloc(null!==(r=t.dataAlign)&&void 0!==r?r:8,t.dataSize):0,this.memoryBase&&t.bssSize&&(0,w.sO)(this.memoryBase+(t.dataSize-t.bssSize),0,t.bssSize),e.thread&&e.tableBase&&p.XI.getPointer()!==e.tableBase&&p.XI.alloc(e.tableBase-p.XI.getPointer()),this.tableBase=t.tableSize?p.XI.alloc(t.tableSize):0,this.options=e,this.imports={env:{memory:p.ce,__stack_pointer:p.GE,__indirect_function_table:p.XI.table,clock_time_get:y.WU,clock_res_get:y.Lq,random_get:y.Pp,abort:y.h2,proc_exit:function(t){v.z3(`wasm module exit, code: ${t}`,R,160)},__syscall_renameat:$,__syscall_unlinkat:$,environ_get:y.B,environ_sizes_get:y.CK,fd_close:$,fd_fdstat_get:y.LS,fd_read:$,fd_seek:$,fd_write:y.nK,emscripten_builtin_malloc:t=>{const e=p.s_.malloc(t);return this.builtinMalloc.push(e),e},emscripten_builtin_free:t=>{p.s_.free(t)},emscripten_builtin_memalign:(t,e,r)=>{const s=p.s_.alignedAlloc(e,r);return 0!==s?(f.M[20](t,s),this.builtinMalloc.push(s),0):-1},emscripten_memcpy_big:function(t,e,r){(0,w.Mr)(t,e,r)},__libc_malloc:function(t){return p.s_.malloc(t)},__libc_free:t=>{p.s_.free(t)},malloc:t=>{if(!0===this.initCalling){const e=p.s_.malloc(t);return this.builtinMalloc.push(e),e}return p.s_.malloc(t)},calloc:function(t,e){return p.s_.calloc(t,e)},realloc:function(t,e){return p.s_.realloc(t,e)},aligned_alloc:(t,e)=>p.s_.alignedAlloc(t,e),free:function(t){p.s_.free(t)},posix_memalign:function(t,e,r){const s=p.s_.alignedAlloc(e,r);return 0!==s?(f.M[20](t,s),0):-1},memalign:function(t,e){return p.s_.alignedAlloc(t,e)}},"GOT.func":{malloc:new WebAssembly.Global({mutable:!0,value:"i32"},2),calloc:new WebAssembly.Global({mutable:!0,value:"i32"},3),realloc:new WebAssembly.Global({mutable:!0,value:"i32"},4),aligned_alloc:new WebAssembly.Global({mutable:!0,value:"i32"},5),free:new WebAssembly.Global({mutable:!0,value:"i32"},1)}};{const t=(t,e,r,s)=>{if(this.threadPool&&this.threadPool.hasFree())return this.threadPool.createThread(t,e,r,s),0;this.childUrl||this.createChildUrl();const i=new L(this.childUrl);f.M[15](t,(0,p.pv)()),f.M[16](t+12,1),f.M[15](t+8,0),f.M[20](t+4,0);const n=p.s_.alignedAlloc(_.STACK_ALIGNMENT,_.STACK_SIZE),a=p.s_.malloc(8);let o;(0,w.sO)(a,0,8),this.childThreads.set(l.f[15](t),{thread:t,worker:i,stackPointer:n,threadDescriptor:a});const c=new(u())((t=>{o=t}));C.A.jspi||this.childReadyPromises.push(c);return i.onmessage=t=>{const e=t.data,r=e.type;e.data,"run"===r&&o(0)},this.childImportUrl&&i.postMessage({type:"import",data:{url:this.childImportUrl.href}}),i.postMessage({type:"run",data:{cheap:{memory:p.ce,stackPointer:n,stackSize:_.STACK_SIZE,id:l.f[15](t)},runner:{resource:{tableSize:this.resource.tableSize,module:this.resource.threadModule.module,initFuncs:this.resource.threadModule.initFuncs},options:{memoryBase:this.options.memoryBase||this.memoryBase,tableBase:this.tableBase,thread:t,threadDescriptor:a,childImports:this.childImports},func:r,args:s,imports:this.childImports,thread:t}}}),C.A.jspi?c:0};m.X$(this.imports.env,{wasm_pthread_create:C.A.jspi?new WebAssembly.Suspending(t):t,wasm_pthread_join2:(t,e)=>{if(this.threadPool&&this.threadPool.isPoolThread(t))return this.threadPool.joinThread(t,e),0;if(1&l.f[15](t+8))return this.childThreads.delete(l.f[15](t)),0;I.uk(t+12,1),0!==e&&f.M[20](e,l.f[20](t+4));const r=this.childThreads.get(l.f[15](t));return p.s_.free(r.stackPointer),p.s_.free(r.threadDescriptor),r.worker.terminate(),this.childThreads.delete(l.f[15](t)),(0,w.sO)(t,0,16),0},wasm_pthread_detach2:t=>{if(this.threadPool&&this.threadPool.isPoolThread(t))return this.threadPool.detachThread(t),0;const e=this.childThreads.get(l.f[15](t));f.M[15](e.threadDescriptor,1|l.f[15](e.threadDescriptor)),f.M[15](t+8,1|l.f[15](t+8))}}),m.X$(this.imports.env,b),m.X$(this.imports.env,k),m.X$(this.imports.env,x)}if(this.memoryBase?m.X$(this.imports.env,{__memory_base:this.memoryBase}):e.memoryBase&&m.X$(this.imports.env,{__memory_base:e.memoryBase}),this.tableBase&&m.X$(this.imports.env,{__table_base:this.tableBase}),null!==(i=e.imports)&&void 0!==i&&i.env&&(m.X$(this.imports.env,e.imports.env),e.envKey&&e.importMap)){const t={};m.__(this.imports.env,((r,s)=>{e.importMap[s]&&(t[e.importMap[s]]=r)})),this.imports[e.envKey]=t}this.imports.wasi_snapshot_preview1=this.imports.env}createChildUrl(){{let t="";{r(81999);const e=(0,D.A)(16030,{varName:"__WebAssemblyRunner__",exportName:"__WebAssemblyRunner__",pointName:F.name,exportIsClass:!0}),s=(0,D.A)(81999,{varName:"runThread"});let i="",n="";this.childImports&&(i=`importScripts('${this.childImports}');`),U.TK.CHEAP_POLYFILL_URL&&(n=`importScripts('${U.TK.CHEAP_POLYFILL_URL}');`),t=`\n          ${e}\n          ${s}\n          self.imports = {env:{}};\n          ${n}\n          ${i}\n          runThread.default();\n        `}this.childBlob=new Blob([t],{type:"text/javascript"}),this.childUrl=o().createObjectURL(this.childBlob)}}overrideAtomic(){b.override({atomic_add_i8:P.KJ.exports.add8,atomic_sub_i8:P.KJ.exports.sub8,atomic_and_i8:P.KJ.exports.and8,atomic_or_i8:P.KJ.exports.or8,atomic_xor_i8:P.KJ.exports.xor8,atomic_store_i8:P.KJ.exports.store8,atomic_load_i8:P.KJ.exports.load8,atomic_compare_exchange_i8:P.KJ.exports.compare_exchange8,atomic_exchange_i8:P.KJ.exports.exchange8,atomic_add_i16:P.KJ.exports.add16,atomic_sub_i16:P.KJ.exports.sub16,atomic_and_i16:P.KJ.exports.and16,atomic_or_i16:P.KJ.exports.or16,atomic_xor_i16:P.KJ.exports.xor16,atomic_store_i16:P.KJ.exports.store16,atomic_load_i16:P.KJ.exports.load16,atomic_compare_exchange_i16:P.KJ.exports.compare_exchange16,atomic_exchange_i16:P.KJ.exports.exchange16,atomic_add_i32:P.KJ.exports.add32,atomic_sub_i32:P.KJ.exports.sub32,atomic_and_i32:P.KJ.exports.and32,atomic_or_i32:P.KJ.exports.or32,atomic_xor_i32:P.KJ.exports.xor32,atomic_store_i32:P.KJ.exports.store32,atomic_load_i32:P.KJ.exports.load32,atomic_compare_exchange_i32:P.KJ.exports.compare_exchange32,atomic_exchange_i32:P.KJ.exports.exchange32,atomic_add_i64:P.KJ.exports.add64,atomic_sub_i64:P.KJ.exports.sub64,atomic_and_i64:P.KJ.exports.and64,atomic_or_i64:P.KJ.exports.or64,atomic_xor_i64:P.KJ.exports.xor64,atomic_store_i64:P.KJ.exports.store64,atomic_load_i64:P.KJ.exports.load64,atomic_compare_exchange_i64:P.KJ.exports.compare_exchange64,atomic_exchange_i64:P.KJ.exports.exchange64,atomics_notify:P.KJ.exports.notify,atomics_wait:P.KJ.exports.wait}),m.X$(this.imports.env,b)}async run(t,e){if(A.Ik(t)&&m.X$(this.options.imports,t),S.Ko()&&this.resource.threadModule&&(S.LK||S.Ts(p.ce,_.HEAP_INITIAL,_.HEAP_MAXIMUM,k.override),m.X$(this.imports.env,k)),!M.LK&&M.Ko()&&M.Ts(p.ce,_.HEAP_INITIAL,_.HEAP_MAXIMUM),!O&&P.Ko()&&(O=!0,this.overrideAtomic()),this.instance=await WebAssembly.instantiate(this.resource.module,this.imports),this.initRunTime(),this.resource.threadModule&&this.resource.enableThreadPool&&e>0&&!C.A.jspi){this.childUrl||this.createChildUrl();let t=e;this.resource.enableThreadCountRate&&(t*=this.resource.enableThreadCountRate),this.threadPool=new E.A(t,this.childUrl,this.childImportUrl),await this.threadPool.ready({tableSize:this.resource.tableSize,module:this.resource.threadModule.module,initFuncs:this.resource.threadModule.initFuncs,memoryBase:this.options.memoryBase||this.memoryBase,tableBase:this.tableBase,childImports:this.childImports})}}runAsChild(t){A.Ik(t)&&m.X$(this.options.imports,t),S.Ko()&&(S.LK||S.Ts(p.ce,_.HEAP_INITIAL,_.HEAP_MAXIMUM,k.override),m.X$(this.imports.env,k)),!O&&P.Ko()&&(O=!0,this.overrideAtomic()),this.instance=new WebAssembly.Instance(this.resource.module,this.imports),this.initRunTime()}async childThreadsReady(){if(!this.childReadyPromises.length)return;const t=this.childReadyPromises;this.childReadyPromises=[],await u().all(t)}initRunTime(){this.builtinMalloc=[],this.initCalling=!0,A.YO(this.resource.initFuncs)&&g.__(this.resource.initFuncs,(t=>{let e;if(this.asm[t]&&(e=this.asm[t]),e)return e()})),this.initCalling=!1}invoke(t,...e){if(!this.asm)return-1;let r;if(this.asm[t]?r=this.asm[t]:this.options.exportMap&&this.options.exportMap[t]&&this.asm[this.options.exportMap[t]]&&(r=this.asm[this.options.exportMap[t]]),r)return r.apply(null,e);v.z3(`the wasm module has not function ${t} to call`,R,693)}async invokeAsync(t,...e){if(!this.asm)return-1;if(!C.A.jspi)return this.invoke(t,...e);let r;if(this.promisingMap.has(t)?r=this.promisingMap.get(t):(this.asm[t]?r=this.asm[t]:this.options.exportMap&&this.options.exportMap[t]&&this.asm[this.options.exportMap[t]]&&(r=this.asm[this.options.exportMap[t]]),r=WebAssembly.promising(r),this.promisingMap.set(t,r)),r)return r.apply(null,e);v.z3(`the wasm module has not function ${t} to call`,R,734)}get asm(){return this.instance&&this.instance.exports}getInstance(){return this.instance}getChildThreadCount(){return this.childThreads.size}destroy(){var t,e;null!==(t=this.builtinMalloc)&&void 0!==t&&t.length&&(g.__(this.builtinMalloc,(t=>{p.s_.free(t)})),this.builtinMalloc.length=0),this.memoryBase&&(p.s_.free(this.memoryBase),this.memoryBase=null),this.tableBase&&(p.XI.free(this.tableBase),this.tableBase=0),this.childImports&&(o().revokeObjectURL(this.childImports),this.childImports=null),this.childUrl&&(A.Yj(this.childUrl)&&o().revokeObjectURL(this.childUrl),this.childUrl=null),this.childBlob=null,this.childImportUrl=null,this.childReadyPromises.length=0,this.childThreads.size&&d()(e=this.childThreads).call(e,((t,e)=>{1&l.f[15](t.threadDescriptor)||(v.R8("has child thread running, maybe resource leakage",R,790),t.worker.terminate(),f.M[16](t.thread+12,0),t.stackPointer&&p.s_.free(t.stackPointer),p.s_.free(t.threadDescriptor),this.childThreads.delete(e))})),this.builtinMalloc=null,this.instance=null,this.options.thread&&(this.options.threadDescriptor&&f.M[15](this.options.threadDescriptor+4,0),this.options.threadDescriptor&&(1&l.f[15](this.options.threadDescriptor)||4&l.f[15](this.options.thread+8))?2&l.f[15](this.options.threadDescriptor)||(p.wE&&p.s_.free(p.wE),p.s_.free(this.options.threadDescriptor),(0,w.sO)(this.options.thread,0,16),self.close()):(f.M[16](this.options.thread+12,0),I.me(this.options.thread+12,1))),this.threadPool&&this.threadPool.destroy(),this.threadPool=null,this.promisingMap&&(this.promisingMap.clear(),this.promisingMap=null)}}},76045:(t,e,r)=>{"use strict";r.d(e,{A:()=>A});var s=r(18979),i=r.n(s),n=r(61240),a=r.n(n),o=r(67672),c=r(24175),u=r(34531),h=r(88096),d=r(92647),l=r(95335),f=r(26429),p=r(86834),m=r(44690),g=r(729),v=r(4304);async function A(t,e={}){let r,s,n,A,w,y,b;if(e=l.X$({enableThread:f.USE_THREADS,initFuncs:e.child?[]:["__wasm_apply_data_relocs","_initialize"]},e),o.ai(t.dataSize)&&o.ai(t.tableSize))if(s=t.dataSize,A=t.dataSize,n=t.dataAlign,w=t.dataAlign,y=t.bssSize,o.Yj(t.source)){const e={method:"GET",headers:{},mode:"cors",cache:"default",referrerPolicy:"no-referrer-when-downgrade"};if(o.Pc(WebAssembly.compileStreaming))r=await WebAssembly.compileStreaming(fetch(t.source,e));else{const s=await fetch(t.source,e);b=await s.arrayBuffer(),r=await WebAssembly.compile(b)}}else r=await WebAssembly.compile(t.source),b=o.sv(t.source)?t.source:t.source.buffer;else{const l={ioReader:new c.A(1048576),ioWriter:new u.A(1048576),bufferEnded:!1,compileStopped:!1,error:"",abortController:null,pullResolve:null,bufferResolve:null,buffers:[],data:{},options:e},v=new Response(new ReadableStream({async start(e){if(o.Yj(t.source)){var r;"function"==typeof AbortController&&(l.abortController=new AbortController);const s={method:"GET",headers:{},mode:"cors",cache:"default",referrerPolicy:"no-referrer-when-downgrade",signal:null===(r=l.abortController)||void 0===r?void 0:r.signal},i=await fetch(t.source,s);let n;i.ok&&i.status>=200&&i.status<=299?n=i.body.getReader():e.error(`Http code invalid, ${i.status} ${i.statusText}`);const a=[];l.ioReader.onFlush=async t=>{let e=0;for(;a.length&&e<t.length;){const r=a.shift();r.length>t.length-e?(t.set(r.subarray(0,t.length-e),e),a.unshift(r.subarray(t.length-e)),e=t.length):(t.set(r,e),e+=r.length)}if(e>=t.length)return t.length;const{value:r,done:s}=await n.read();return s?e>0?e:-1048576:(l.buffers.push(r),r.length>t.length-e?(t.set(r.subarray(0,t.length-e),e),a.push(r.subarray(t.length-e)),t.length):(t.set(r,e),e+=r.length,e))}}else{let e=0,r=t.source.byteLength;const s=o.sv(t.source)?new Uint8Array(t.source):t.source;l.ioReader.onFlush=async t=>{if(e>=r)return-1048576;const i=Math.min(t.length,r-e);return t.set(s.subarray(e,e+i),0),e+=i,i}}l.ioWriter.onFlush=async t=>{if(l.pullResolve)return l.pullResolve(i()(t).call(t)),l.pullResolve=null,0;const e=await new(a())((t=>{l.bufferResolve=t}));return e.enqueue(i()(t).call(t)),l.bufferEnded&&e.close(),0},async function(t){try{for(await t.ioWriter.writeUint32(await t.ioReader.readUint32()),await t.ioWriter.writeUint32(await t.ioReader.readUint32());;){if(t.compileStopped){t.abortController&&t.abortController.abort();break}const e=await t.ioReader.readUint8();if(t.options.child&&11===e){await t.ioWriter.writeUint8(e),await(0,h.$z)(t.ioWriter,7),await(0,h.$z)(t.ioWriter,1),await(0,h.$z)(t.ioWriter,0),await t.ioWriter.writeUint8(65),await t.ioWriter.writeUint8(0),await t.ioWriter.writeUint8(11),await(0,h.$z)(t.ioWriter,1),await t.ioWriter.writeUint8(0);const r=await(0,h.GW)(t.ioReader);await t.ioReader.skip(r);continue}await t.ioWriter.writeUint8(e);const r=await(0,h.GW)(t.ioReader),s=t.ioReader.getPos();if(0===e){await(0,h.$z)(t.ioWriter,r);const e=t.ioReader.getPos(),s=await(0,h.GW)(t.ioReader),i=await t.ioReader.readString(s);if(await(0,h.$z)(t.ioWriter,s),await t.ioWriter.writeString(i),"dylink.0"===i){const s=t.ioReader.getPos()+(BigInt(Math.floor(r))-(t.ioReader.getPos()-e));for(;t.ioReader.getPos()<s;){const e=await t.ioReader.readUint8();await t.ioWriter.writeUint8(e);const r=await(0,h.GW)(t.ioReader);await(0,h.$z)(t.ioWriter,r),1===e?(t.data.dataSize=await(0,h.GW)(t.ioReader),t.data.dataAlign=await(0,h.GW)(t.ioReader),t.data.tableSize=await(0,h.GW)(t.ioReader),t.data.tableAlign=await(0,h.GW)(t.ioReader),await(0,h.$z)(t.ioWriter,t.data.dataSize),await(0,h.$z)(t.ioWriter,t.data.dataAlign),await(0,h.$z)(t.ioWriter,t.data.tableSize),await(0,h.$z)(t.ioWriter,t.data.tableAlign)):await t.ioWriter.writeBuffer(await t.ioReader.readBuffer(r))}}}else if(11===e){await(0,h.$z)(t.ioWriter,r);const e=await(0,h.GW)(t.ioReader);if(await(0,h.$z)(t.ioWriter,e),e){for(await(0,h.$z)(t.ioWriter,await(0,h.GW)(t.ioReader));;){const e=await t.ioReader.readUint8();if(await t.ioWriter.writeUint8(e),11===e)break}const e=await(0,h.GW)(t.ioReader);t.data.dataSize?t.data.bssSize=t.data.dataSize-e:t.data.dataSize=e,await(0,h.$z)(t.ioWriter,e)}}else if(2===e){const e=new g.A(new Uint8Array(r+100));let i=await(0,h.GW)(t.ioReader);(0,h.tt)(e,i);let n=0;for(;i--;){const r=await(0,h.GW)(t.ioReader);(0,h.tt)(e,r),e.writeBuffer(await t.ioReader.readBuffer(r));const s=await(0,h.GW)(t.ioReader);(0,h.tt)(e,s),e.writeBuffer(await t.ioReader.readBuffer(s));const i=await t.ioReader.readUint8();switch(e.writeUint8(i),i){case 0:(0,h.tt)(e,await(0,h.GW)(t.ioReader));break;case 3:(0,h.p2)(e,await(0,h.WP)(t.ioReader)),(0,h.tt)(e,await(0,h.GW)(t.ioReader));break;case 2:{let r=await(0,h.GW)(t.ioReader);t.options.enableThread?r|=2:r&=-3,(0,h.tt)(e,r);const s=await(0,h.GW)(t.ioReader);if((0,h.tt)(e,f.HEAP_INITIAL||s),1&r){let r=await(0,h.GW)(t.ioReader);m.A.ios&&!p.A.checkVersion(m.A.version,"17",!0)&&t.options.enableThread||(r=f.HEAP_MAXIMUM),(0,h.tt)(e,r)}n++;break}case 1:{(0,h.p2)(e,await(0,h.WP)(t.ioReader));const r=await(0,h.GW)(t.ioReader);(0,h.tt)(e,r);const s=await(0,h.GW)(t.ioReader);(0,h.tt)(e,s),t.data.tableSize=s,1&r&&(0,h.tt)(e,await(0,h.GW)(t.ioReader)),n++;break}}if(2===n)break}const a=e.getWroteBuffer(),o=r-Number(t.ioReader.getPos()-s);await(0,h.$z)(t.ioWriter,a.length+o),await t.ioWriter.writeBuffer(a)}else await(0,h.$z)(t.ioWriter,r);r-Number(t.ioReader.getPos()-s)&&await t.ioReader.pipe(t.ioWriter,r-Number(t.ioReader.getPos()-s))}}catch(e){-1048576===t.ioReader.error?t.bufferEnded=!0:t.error=e,t.ioReader.remainingLength()&&await t.ioWriter.writeBuffer(await t.ioReader.readBuffer(t.ioReader.remainingLength())),await t.ioWriter.flush()}}(l)},async pull(t){if(l.error)t.close();else{if(l.bufferResolve)return l.bufferResolve(t),void(l.bufferResolve=null);t.enqueue(await new(a())(((t,e)=>{l.pullResolve=t}))),l.bufferEnded?t.close():l.error&&t.error(l.error)}},cancel(t){l.compileStopped=!0}}),{headers:{"Content-Type":"application/wasm"}});r=o.Pc(WebAssembly.compileStreaming)?await WebAssembly.compileStreaming(v):await WebAssembly.compile(await v.arrayBuffer()),b=o.Yj(t.source)?(0,d.A)(Uint8Array,l.buffers).buffer:o.sv(t.source)?t.source:t.source.buffer,s=l.data.tableSize,A=l.data.dataSize,n=l.data.tableAlign,w=l.data.dataAlign,y=l.data.bssSize}return e.child?{module:r,initFuncs:e.initFuncs||[],tableSize:0,tableAlign:n||0,dataSize:1,dataAlign:w?Math.max((0,v.A)(w),8):8,bssSize:0,buffer:b}:{module:r,tableSize:s,tableAlign:n||0,dataSize:A,dataAlign:w?Math.max((0,v.A)(w),8):8,bssSize:y||0,initFuncs:e.initFuncs||[],buffer:b}}},81999:(t,e,r)=>{"use strict";function s(){let t;"object"==typeof __WebAssemblyRunner__?t=__WebAssemblyRunner__.__WebAssemblyRunner__:"object"==typeof __CHeap_WebAssemblyRunner__&&(t=__CHeap_WebAssemblyRunner__.default);let e,r,s=self,i=0;s.onmessage=n=>{const a=n.data,o=a.type,c=a.data;switch(o){case"run":s.postMessage({type:"run"}),self.CHeap&&self.CHeap.initThread&&self.CHeap.initThread(c.cheap).then((()=>{self.__SELF_THREAD__=c.runner.thread,c.runner.options.imports=self.imports,e=new t(c.runner.resource,c.runner.options),e.runAsChild(),t.getTable().get(c.runner.func)(c.runner.args),e.destroy()}));break;case"ready":r=c.runner,i=c.cheap.stackPointer,self.CHeap&&self.CHeap.initThread&&self.CHeap.initThread(c.cheap).then((()=>{s.postMessage({type:"ready"})}));break;case"wait":{async function u(){for(;;){for(t.mutexLock(i+16);0===t.readPointer(i);)t.condWait(i+12,i+16);self.__SELF_THREAD__=t.readPointer(i),r.options.thread=t.readPointer(i),r.thread=t.readPointer(i),r.func=t.readPointer(i+4),r.args=t.readPointer(i+8),e=new t(r.resource,r.options),e.runAsChild(),t.getTable().get(r.func)(r.args),e.destroy(),t.writePointer(i,0),t.mutexUnlock(i+16)}}r.options.imports=self.imports,u();break}}}}r.r(e),r.d(e,{default:()=>s})},91808:(t,e,r)=>{"use strict";r.d(e,{A:()=>s});const s="AGFzbQEAAAABEANgAX8Bf2ABfwBgAn9/AX8CWQYDZW52Bm1lbW9yeQIDAYCABANlbnYGbWFsbG9jAAADZW52BGZyZWUAAQNlbnYGY2FsbG9jAAIDZW52B3JlYWxsb2MAAgNlbnYNYWxpZ25lZF9hbGxvYwACAwYFAAECAgIHMwUGbWFsbG9jAAUEZnJlZQAGBmNhbGxvYwAHB3JlYWxsb2MACAxhbGlnbmVkQWxsb2MACQoqBQYAIAAQAAsGACAAEAELCAAgACABEAILCAAgACABEAMLCAAgACABEAML"},80905:(t,e,r)=>{"use strict";r.d(e,{Ko:()=>d,LK:()=>u,Ts:()=>l});var s=r(11473),i=r(4919),n=r(4624),a=r(91808),o=r(88096);const c="src/cheap/webassembly/runtime/asm/libc.ts";let u,h=!0;function d(){return h}function l(t,e,r){try{const n=o.bx((0,i.E_)(a.A),{shared:"function"==typeof SharedArrayBuffer&&t.buffer instanceof SharedArrayBuffer,initial:e,maximum:r});u=new WebAssembly.Instance(new WebAssembly.Module(n),{env:{memory:t,malloc:function(t){return s.s_.malloc(t)},calloc:function(t,e){return s.s_.calloc(t,e)},realloc:function(t,e){return s.s_.realloc(t,e)},aligned_alloc:(t,e)=>s.s_.alignedAlloc(t,e),free:function(t){s.s_.free(t)}}}),s.XI.set(2,u.exports.malloc),s.XI.set(1,u.exports.free),s.XI.set(3,u.exports.calloc),s.XI.set(4,u.exports.realloc),s.XI.set(5,u.exports.alignedAlloc)}catch(t){h=!1,n.R8("libc asm not support, cannot use asm thread function",c,60)}}},60:(t,e,r)=>{"use strict";r.d(e,{A:()=>s});const s="AGFzbQEAAAABEwNgAX8Bf2ACf38Bf2ADf39/AX8CEgEDZW52Bm1lbW9yeQIDAYCABAMIBwAAAAECAAAHQwcEbG9jawAAB3RyeWxvY2sAAQZ1bmxvY2sAAgR3YWl0AAMJdGltZWR3YWl0AAQGc2lnbmFsAAUJYnJvYWRjYXN0AAYKnAIHVgEBfyAAQQBBAf5IAgAhASABQQBHBEADQCABQQJGBH9BAQUgAEEBQQL+SAIAQQBHCwRAIABBAkJ//gECABoLIABBAEEC/kgCACEBIAFBAEcNAAsLQQALFwAgAEEAQQH+SAIAQQBGBH9BAAVBEAsLIwAgAEEB/iUCAEEBRwRAIABBAP4XAgAgAEEB/gACABoLQQALHQAgACAA/hACACABEAIaQn/+AQIAGiABEAAaQQALNwAgACAA/hACACABEAIaIAIpAwBCgJTr3AN+IAIoAgitfP4BAgAgARAAGkECRgR/QfAABUEACwsWACAAQQH+HgIAGiAAQQH+AAIAGkEACxoAIABBAf4eAgAaIABBgICAgAT+AAIAGkEACw=="},24565:(t,e,r)=>{"use strict";r.d(e,{Ko:()=>h,LK:()=>c,Ts:()=>d});var s=r(4919),i=r(4624),n=r(60),a=r(88096);const o="src/cheap/webassembly/runtime/asm/thread.ts";let c,u=!0;function h(){return u}function d(t,e,r,h){try{if(!("function"==typeof SharedArrayBuffer&&t.buffer instanceof SharedArrayBuffer))return void(u=!1);{const i=a.bx((0,s.E_)(n.A),{shared:!0,initial:e,maximum:r});c=new WebAssembly.Instance(new WebAssembly.Module(i),{env:{memory:t}})}h({wasm_pthread_mutex_lock:c.exports.lock,wasm_pthread_mutex_trylock:c.exports.trylock,wasm_pthread_mutex_unlock:c.exports.unlock,wasm_pthread_cond_wait:c.exports.wait,wasm_pthread_cond_timedwait:c.exports.timedwait,wasm_pthread_cond_signal:c.exports.signal,wasm_pthread_cond_broadcast:c.exports.broadcast})}catch(t){u=!1,i.R8("thread asm not support, cannot use asm thread function",o,69)}}},1708:(t,e,r)=>{"use strict";r.r(e),r.d(e,{atomic_add_i16:()=>p,atomic_add_i32:()=>x,atomic_add_i64:()=>C,atomic_add_i8:()=>n,atomic_and_i16:()=>g,atomic_and_i32:()=>I,atomic_and_i64:()=>D,atomic_and_i8:()=>o,atomic_compare_exchange_i16:()=>b,atomic_compare_exchange_i32:()=>T,atomic_compare_exchange_i64:()=>F,atomic_compare_exchange_i8:()=>l,atomic_exchange_i16:()=>k,atomic_exchange_i32:()=>B,atomic_exchange_i64:()=>z,atomic_exchange_i8:()=>f,atomic_load_i16:()=>y,atomic_load_i32:()=>E,atomic_load_i64:()=>O,atomic_load_i8:()=>d,atomic_or_i16:()=>v,atomic_or_i32:()=>P,atomic_or_i64:()=>R,atomic_or_i8:()=>c,atomic_store_i16:()=>w,atomic_store_i32:()=>S,atomic_store_i64:()=>$,atomic_store_i8:()=>h,atomic_sub_i16:()=>m,atomic_sub_i32:()=>_,atomic_sub_i64:()=>U,atomic_sub_i8:()=>a,atomic_xor_i16:()=>A,atomic_xor_i32:()=>M,atomic_xor_i64:()=>L,atomic_xor_i8:()=>u,atomics_notify:()=>N,atomics_wait:()=>V,atomics_wait_timeout:()=>W,override:()=>j});var s=r(40046),i=r(6704);let n=function(t,e){return s.WQ(t,e,12,i._[12])},a=function(t,e){return s.jb(t,e,12,i._[12])},o=function(t,e){return s.Uo(t,e,12,i._[12])},c=function(t,e){return s.or(t,e,12,i._[12])},u=function(t,e){return s.I8(t,e,12,i._[12])},h=function(t,e){return s.M_(t,e,12,i._[12])},d=function(t){return s.Hh(t,12,i._[12])},l=function(t,e,r){return s.p_(t,e,r,12,i._[12])},f=function(t,e){return s.cv(t,e,12,i._[12])},p=function(t,e){return s.WQ(t,e,14,i._[14])},m=function(t,e){return s.jb(t,e,14,i._[14])},g=function(t,e){return s.Uo(t,e,14,i._[14])},v=function(t,e){return s.or(t,e,14,i._[14])},A=function(t,e){return s.I8(t,e,14,i._[14])},w=function(t,e){return s.M_(t,e,14,i._[14])},y=function(t){return s.Hh(t,14,i._[14])},b=function(t,e,r){return s.p_(t,e,r,14,i._[14])},k=function(t,e){return s.cv(t,e,14,i._[14])},x=function(t,e){return s.WQ(t,e,16,i._[16])},_=function(t,e){return s.jb(t,e,16,i._[16])},I=function(t,e){return s.Uo(t,e,16,i._[16])},P=function(t,e){return s.or(t,e,16,i._[16])},M=function(t,e){return s.I8(t,e,16,i._[16])},S=function(t,e){return s.M_(t,e,16,i._[16])},E=function(t){return s.Hh(t,16,i._[16])},T=function(t,e,r){return s.p_(t,e,r,16,i._[16])},B=function(t,e){return s.cv(t,e,16,i._[16])},C=function(t,e){return s.WQ(t,e,21,i._[21])},U=function(t,e){return s.jb(t,e,21,i._[21])},D=function(t,e){return s.Uo(t,e,21,i._[21])},R=function(t,e){return s.or(t,e,21,i._[21])},L=function(t,e){return s.I8(t,e,21,i._[21])},$=function(t,e){return s.M_(t,e,21,i._[21])},O=function(t){return s.Hh(t,21,i._[21])},F=function(t,e,r){return s.p_(t,e,r,21,i._[21])},z=function(t,e){return s.cv(t,e,21,i._[21])},N=function(t,e){return s.me(t,e)},V=function(t,e){return s.uk(t,e)},W=function(t,e,r){return s.j4(t,e,Number(BigInt.asIntN(32,r)))};function j(t){t.atomic_add_i8&&(n=t.atomic_add_i8),t.atomic_sub_i8&&(a=t.atomic_sub_i8),t.atomic_and_i8&&(o=t.atomic_and_i8),t.atomic_or_i8&&(c=t.atomic_or_i8),t.atomic_xor_i8&&(u=t.atomic_xor_i8),t.atomic_store_i8&&(h=t.atomic_store_i8),t.atomic_load_i8&&(d=t.atomic_load_i8),t.atomic_compare_exchange_i8&&(l=t.atomic_compare_exchange_i8),t.atomic_exchange_i8&&(f=t.atomic_exchange_i8),t.atomic_add_i16&&(p=t.atomic_add_i16),t.atomic_sub_i16&&(m=t.atomic_sub_i16),t.atomic_and_i16&&(g=t.atomic_and_i16),t.atomic_or_i16&&(v=t.atomic_or_i16),t.atomic_xor_i16&&(A=t.atomic_xor_i16),t.atomic_store_i16&&(w=t.atomic_store_i16),t.atomic_load_i16&&(y=t.atomic_load_i16),t.atomic_compare_exchange_i16&&(b=t.atomic_compare_exchange_i16),t.atomic_exchange_i16&&(k=t.atomic_exchange_i16),t.atomic_add_i32&&(x=t.atomic_add_i32),t.atomic_sub_i32&&(_=t.atomic_sub_i32),t.atomic_and_i32&&(I=t.atomic_and_i32),t.atomic_or_i32&&(P=t.atomic_or_i32),t.atomic_xor_i32&&(M=t.atomic_xor_i32),t.atomic_store_i32&&(S=t.atomic_store_i32),t.atomic_load_i32&&(E=t.atomic_load_i32),t.atomic_compare_exchange_i32&&(T=t.atomic_compare_exchange_i32),t.atomic_exchange_i32&&(B=t.atomic_exchange_i32),t.atomic_add_i64&&(C=t.atomic_add_i64),t.atomic_sub_i64&&(U=t.atomic_sub_i64),t.atomic_and_i64&&(D=t.atomic_and_i64),t.atomic_or_i64&&(R=t.atomic_or_i64),t.atomic_xor_i64&&(L=t.atomic_xor_i64),t.atomic_store_i64&&($=t.atomic_store_i64),t.atomic_load_i64&&(O=t.atomic_load_i64),t.atomic_compare_exchange_i64&&(F=t.atomic_compare_exchange_i64),t.atomic_exchange_i64&&(z=t.atomic_exchange_i64),t.atomics_notify&&(N=t.atomics_notify),t.atomics_wait&&(V=t.atomics_wait),t.atomics_wait_timeout&&(W=t.atomics_wait_timeout)}},14621:(t,e,r)=>{"use strict";r.d(e,{B:()=>_,CK:()=>I,LS:()=>P,Lq:()=>C,Pp:()=>U,WU:()=>B,h2:()=>T,nK:()=>E});var s=r(49859),i=r(94870),n=r.n(i),a=r(86226),o=r.n(a),c=r(74707),u=r.n(c),h=r(61499),d=r(50932),l=r(12085),f=r(63939),p=r(14686),m=r(50011);const g=[null,[],[]],v=0,A=28;function w(t,e){const r=g[t];var s,i;0===e||10===e?((1===t?n()(s=console.log).call(s,console):n()(i=console.log).call(i,console))(m.decode(r)),r.length=0):r.push(e)}const y={};let b,k="./this.program";function x(){if(!b){const t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:k||"./this.program"};for(let e in y)t[e]=y[e];const e=[];for(let r in t)e.push(r+"="+t[r]);b=e}return b}function _(t,e){var r;let s=0;return o()(r=x()).call(r,(function(r,i){const n=e+s;d.M[20](t+4*i,n),function(t,e){for(let r=0;r<t.length;++r)d.M[4](e,t.charCodeAt(r)),e+=1;d.M[4](e,0)}(r,n),s+=r.length+1})),0}function I(t,e){const r=x();d.M[25](t,r.length);let s=0;return o()(r).call(r,(function(t){s+=t.length+1})),d.M[25](e,s),0}function P(t,e){let r=0;return 0==t?r=2:1!=t&&2!=t||(r=64),d.M[11](e,2),d.M[13](e+2,1),d.M[15](e+8,r),d.M[15](e+12,0),d.M[17](e+16,BigInt(0)),v}var M,S;function E(t,e,r,s){let i=0;for(let s=0;s<r;s++){let r=f.f[20](e),s=f.f[25](e+4);for(let e=0;e<s;e++)w(t,f.f[4](r+e));i+=s,e+=8}return d.M[25](s,i),v}function T(t){throw t=`abort(${t+=""}). Build with -s ASSERTIONS=1 for more info.`,new WebAssembly.RuntimeError(t)}function B(t,e,r){if(0!==t)return A;const s=(new Date).getTime();return d.M[10](r,BigInt(s)*BigInt(1e6)),v}function C(t,e){return 0!==t?A:(d.M[10](e,BigInt(1e6)),v)}function U(t,e){const r=(0,p.s3)(t,e);return crypto.getRandomValues(r),v}M=class{constructor(){(0,s.A)(this,"buf",void 0),(0,s.A)(this,"len",void 0)}}.prototype,(S=new(u())).set("buf",{0:1,1:1,2:1,3:0,4:0,5:0,6:0,7:0,8:0}),S.set("len",{0:25,1:0,2:0,3:0,4:0,5:0,6:0,7:4,8:0}),(0,l.A)(M,h.Og,!0),(0,l.A)(M,h.dc,4),(0,l.A)(M,h.g7,8),(0,l.A)(M,h.JY,S)},20357:(t,e,r)=>{"use strict";r.r(e),r.d(e,{override:()=>T,wasm_cpu_core_count:()=>S,wasm_pthread_cond_broadcast:()=>k,wasm_pthread_cond_destroy:()=>A,wasm_pthread_cond_init:()=>v,wasm_pthread_cond_signal:()=>b,wasm_pthread_cond_timedwait:()=>y,wasm_pthread_cond_wait:()=>w,wasm_pthread_equal2:()=>P,wasm_pthread_exit:()=>I,wasm_pthread_mutex_destroy:()=>f,wasm_pthread_mutex_init:()=>l,wasm_pthread_mutex_lock:()=>p,wasm_pthread_mutex_trylock:()=>m,wasm_pthread_mutex_unlock:()=>g,wasm_pthread_once:()=>x,wasm_pthread_self2:()=>_,wasm_pthread_support:()=>M,wasm_threw_error:()=>E});var s=r(63939),i=r(50932),n=r(73783),a=r(42518),o=r(26429),c=r(11473),u=r(40046),h=r(10576),d=r(14686);let l,f,p,m,g,v,A,w,y,b,k,x;function _(){return h.TK.__SELF_THREAD__}function I(t){const e=h.TK.__SELF_THREAD__;i.M[20](e+4,t),i.M[15](e+8,4|s.f[15](e+8))}function P(t,e){return s.f[15](t)===s.f[15](e)?1:0}function M(){return o.USE_THREADS?1:0}function S(){return navigator.hardwareConcurrency}function E(t,e){throw new Error((0,d.lH)(e))}function T(t){t.wasm_pthread_mutex_lock&&(p=t.wasm_pthread_mutex_lock),t.wasm_pthread_mutex_trylock&&(m=t.wasm_pthread_mutex_trylock),t.wasm_pthread_mutex_unlock&&(g=t.wasm_pthread_mutex_unlock),t.wasm_pthread_cond_wait&&(w=t.wasm_pthread_cond_wait),t.wasm_pthread_cond_timedwait&&(y=t.wasm_pthread_cond_timedwait),t.wasm_pthread_cond_signal&&(b=t.wasm_pthread_cond_signal),t.wasm_pthread_cond_broadcast&&(k=t.wasm_pthread_cond_broadcast)}l=function(t,e){return n.Ts(t)},f=function(t){return n.zr(t)},p=function(t){return n.s2(t)},m=function(t){return n.bh(t)},g=function(t){return n.Tl(t)},v=function(t,e){return a.Ts(t,e)},A=function(t){return a.zr(t)},w=function(t,e){return a.uk(t,e)},y=function(t,e,r){let i=1e3*Number(s.f[17](r))+s.f[15](r+8)/1e6;return a.XR(t,e,i)},b=function(t){return a.vP(t)},k=function(t){return a.mq(t)},x=function(t,e){return 0===u.WQ(t,1,16,2)&&c.XI.get(e)(),0}},77775:(t,e,r)=>{"use strict";r.r(e),r.d(e,{Timespec:()=>l,wasm_sem_destroy:()=>p,wasm_sem_init:()=>f,wasm_sem_post:()=>A,wasm_sem_timedwait:()=>v,wasm_sem_trywait:()=>g,wasm_sem_wait:()=>m});var s,i,n=r(49859),a=r(74707),o=r.n(a),c=r(61499),u=r(12085),h=r(63939),d=r(79490);class l{constructor(){(0,n.A)(this,"tvSec",void 0),(0,n.A)(this,"tvNSec",void 0)}}function f(t,e,r){return d.Ts(t,r)}function p(t){return d.zr(t)}function m(t){return d.uk(t)}function g(t){return d.Zr(t)}function v(t,e){let r=1e3*Number(h.f[17](e))+h.f[15](e+8)/1e6;return d.XR(t,r)}function A(t){return d.bE(t)}s=l.prototype,(i=new(o())).set("tvSec",{0:17,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0}),i.set("tvNSec",{0:15,1:0,2:0,3:0,4:0,5:0,6:0,7:8,8:0}),(0,u.A)(s,c.Og,!0),(0,u.A)(s,c.dc,8),(0,u.A)(s,c.g7,16),(0,u.A)(s,c.JY,i)},6331:(t,e,r)=>{"use strict";r.d(e,{A:()=>n});var s=r(49859),i=r(10576);class n{constructor(t,e){(0,s.A)(this,"type",void 0),(0,s.A)(this,"phase",void 0),(0,s.A)(this,"ns",void 0),(0,s.A)(this,"target",void 0),(0,s.A)(this,"originalEvent",void 0),(0,s.A)(this,"isPrevented",void 0),(0,s.A)(this,"isStopped",void 0),(0,s.A)(this,"listener",void 0),this.type=t,this.phase=n.PHASE_CURRENT,e&&(this.originalEvent=e)}preventDefault(){const t=this;if(!t.isPrevented){const{originalEvent:e}=t;e&&e.preventDefault(),t.isPrevented=i.rT}return t}stopPropagation(){const t=this;if(!t.isStopped){const{originalEvent:e}=t;e&&e.stopPropagation(),t.isStopped=i.rT}return t}prevent(){return this.preventDefault()}stop(){return this.stopPropagation()}}(0,s.A)(n,"PHASE_CURRENT",0),(0,s.A)(n,"PHASE_UPWARD",1),(0,s.A)(n,"PHASE_DOWNWARD",i.Cy)},96172:(t,e,r)=>{"use strict";r.d(e,{A:()=>f});var s=r(49859),i=r(385),n=r.n(i),a=r(67672),o=r(72739),c=r(6331),u=r(95335),h=r(20525),d=(r(4624),r(56401)),l=r(10576);class f{constructor(t){(0,s.A)(this,"ns",void 0),(0,s.A)(this,"listeners",void 0),(0,s.A)(this,"nativeListeners",void 0),this.ns=t||l.W8,this.listeners={}}fire(t,e,r){let s=this,i=a.Yj(t)?s.parse(t):t,n=s.listeners[i.type],h=l.rT;if(n){n=u.C(n);const t=e&&e[0]instanceof c.A?e[0]:l.ZH;o.__(n,(function(a){if(!g(i.ns,a,l.rT)||!o.zy(n,a)||r&&!r(i,e,a))return;t&&(t.listener=a.fn);let c=(0,d.A)(a.fn,a.ctx,e);return t&&(t.listener=l.ZH),a.num=a.num?a.num+1:1,a.num===a.max&&s.off(i,a.fn),t&&(c===l.W8?t.prevent().stop():t.isStopped&&(c=l.W8)),c===l.W8?h=l.W8:void 0}))}return h}on(t,e){const r=this,s=r.listeners,i=a.Pc(e)?{fn:e}:e;if(a.Ik(i)&&a.Pc(i.fn)){const e=a.Yj(t)?r.parse(t):t;i.ns=e.ns,o.VC(s[e.type]||(s[e.type]=[]),i)}return this}one(t,e){return a.Pc(e)?e={fn:e,max:1}:e.max=1,this.on(t,e)}off(t,e){const r=this,s=r.listeners;if(t){const i=a.Yj(t)?r.parse(t):t,c=i.type,h=i.ns,d=m(e),f=function(t,e){o.__(t,(function(e,r){d(e)&&n()(t).call(t,r,1)}),l.rT),t.length||delete s[e]},p=function(t,e){o.__(t,(function(e,r){g(h,e)&&n()(t).call(t,r,1)}),l.rT),t.length||delete s[e]};c?s[c]&&f(s[c],c):h&&u.__(s,p)}else r.listeners={}}has(t,e){let r=this.listeners,s=a.Yj(t)?this.parse(t):t,i=s.type,n=s.ns,c=l.rT,h=m(e);var d;return i?r[i]&&(d=r[i],o.__(d,(function(t){if(h(t))return c=l.W8}))):n&&u.__(r,(function(t){return o.__(t,(function(t){if(g(n,t))return c=l.W8})),c})),!c}parse(t){const e={type:t,ns:l.u1};if(this.ns){const r=h.qh(t,l.ZG);r>=0&&(e.type=h.di(t,0,r),e.ns=h.di(t,r+1))}return e}}function p(){return l.rT}function m(t){return a.Pc(t)?function(e){return t===e.fn}:p}function g(t,e,r){const{ns:s}=e;return s&&t?s===t:r?l.rT:l.W8}},84504:(t,e,r)=>{"use strict";r.d(e,{A:()=>i});var s=r(2148);function i(t,e,r=!1){const i=e.split("."),n=t.split(".");for(let t=0;t<n.length;t++){if(r&&t==n.length-1&&(0,s.A)(n[t])>=(0,s.A)(i[t]))return n.length>=i.length;if((0,s.A)(n[t])>(0,s.A)(i[t]))return!0;if((0,s.A)(n[t])<(0,s.A)(i[t]))return!1;if(t===i.length-1&&t===n.length-1)return r;if(t===i.length-1)return!0;if(t===n.length-1)return!1}return!0}},92647:(t,e,r)=>{"use strict";function s(t,e){if(!e.length)return null;if(1===e.length)return e[0];let r,s=0;for(r of e)s+=r.length;let i=new t(s),n=0;for(r of e)i.set(r,n),n+=r.length;return i}r.d(e,{A:()=>s})},78995:(t,e,r)=>{"use strict";r.d(e,{A:()=>c});var s=r(56255),i=r.n(s),n=r(56401),a=r(72739),o=r(10576);function c(t,e,r,s=!1){let c,u;return function(){let h=this;s&&(u=a.$r(arguments)),c||(s||(u=a.$r(arguments)),r&&(0,n.A)(t,h,u),c=i()((function(){c=o.ZH,r||(0,n.A)(t,h,u)}),e))}}},56401:(t,e,r)=>{"use strict";r.d(e,{A:()=>n});var s=r(67672),i=r(10576);function n(t,e,r){if(s.Pc(t))return s.YO(r)?t.apply(e,r):e!==i.ZH?t.call(e,r):r!==i.ZH?t(r):t()}},8284:(t,e,r)=>{"use strict";function s(){let t=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){let r=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?r:3&r|8).toString(16)}))}r.d(e,{A:()=>s})},86932:(t,e,r)=>{"use strict";r.d(e,{A:()=>n});var s=r(29550),i=r.n(s);function n(){return i()()}},54568:(t,e,r)=>{"use strict";function s(){return"function"==typeof registerProcessor&&"number"==typeof sampleRate&&"number"==typeof currentFrame&&"number"==typeof currentTime}r.d(e,{A:()=>s})},34677:(t,e,r)=>{"use strict";r.d(e,{A:()=>i});var s=r(10576);function i(t){return t!==s.ZH}},59135:(t,e,r)=>{"use strict";r.d(e,{A:()=>n});var s=r(34677);let i;function n(){if((0,s.A)(i))return i;const t=new ArrayBuffer(2);return new DataView(t).setInt16(0,256,!0),i=256===new Int16Array(t)[0],i}},20491:(t,e,r)=>{"use strict";r.d(e,{A:()=>a});var s=r(67672),i=r(62100),n=r(20525);function a(t){return s.Pc(t)&&n.zy((0,i.A)(t),"[native code]")}},39638:(t,e,r)=>{"use strict";r.d(e,{A:()=>n});var s=r(34677),i=r(54568);function n(){return!("object"==typeof window&&(0,s.A)(window.document)||(0,i.A)())}},7972:(t,e,r)=>{"use strict";r.d(e,{A:()=>h});var s=r(7189),i=r.n(s),n=r(56255),a=r.n(n),o=r(20491),c=r(10576);let u;typeof i()===c.s0&&(0,o.A)(i())&&(u=i()),u=typeof MessageChannel===c.s0&&(0,o.A)(MessageChannel)?function(t){const e=new MessageChannel;e.port1.onmessage=t,e.port2.postMessage(1)}:"function"==typeof a()?a():function(t){a()(t)};const h=u},61837:(t,e,r)=>{"use strict";r.d(e,{A:()=>b});var s=r(50697),i=r.n(s),n=r(73363),a=r.n(n),o=r(11393),c=r.n(o),u=r(85569),h=r.n(u),d=r(48079),l=r.n(d),f=r(18979),p=r.n(f);const m='\nfunction webpackBootstrapFunc (modules) {\n  var installedModules = {};\n  function __webpack_require__(moduleId) {\n    if(installedModules[moduleId])\n    return installedModules[moduleId].exports;\n    var module = installedModules[moduleId] = {\n      i: moduleId,\n      l: false,\n      exports: {}\n    };\n    if (!modules[moduleId]) {\n      console.error(\'can not found module:\', moduleId)\n    }\n    modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n    module.l = true;\n    return module.exports;\n  }\n  __webpack_require__.m = modules;\n  __webpack_require__.c = installedModules;\n  __webpack_require__.i = function(value) { return value; };\n  __webpack_require__.d = function(exports, definition, getter) {\n    if (typeof definition === \'string\') {\n      if(!__webpack_require__.o(exports, definition)) {\n        Object.defineProperty(exports, definition, {\n          enumerable: true,\n          get: getter\n        });\n      }\n    }\n    else {\n      for(var key in definition) {\n        if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n          Object.defineProperty(exports, key, {\n            enumerable: true,\n            get: definition[key]\n          });\n        }\n      }\n    }\n  };\n  __webpack_require__.r = function(exports) {\n    if(typeof Symbol !== \'undefined\' && Symbol.toStringTag) {\n    \tObject.defineProperty(exports, Symbol.toStringTag, { value: \'Module\' });\n    }\n    Object.defineProperty(exports, \'__esModule\', { value: true });\n  };\n  __webpack_require__.f = {};\n  __webpack_require__.e = function(chunkId) {\n    return Promise.all(Object.keys(__webpack_require__.f).reduce(function (promises, key) {\n      __webpack_require__.f[key](chunkId, promises);\n        return promises;\n    \t}, []));\n\t};\n  __webpack_require__.u = function(chunkId) {\n    return chunkId + "LIB_NAME";\n  };\n  __webpack_require__.n = function(module) {\n    var getter = module && module.__esModule ?\n      function getDefault() { return module[\'default\']; } :\n      function getModuleExports() { return module; };\n    __webpack_require__.d(getter, \'a\', getter);\n    return getter;\n  };\n  (function() {\n    var installedChunks = {\n      "main": 0\n    };\n    __webpack_require__.f.j = function(chunkId, promises) {\n      var installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n      if (installedChunkData !== 0) {\n        if(installedChunkData) {\n          promises.push(installedChunkData[2]);\n        } else {\n          if (true) {\n            var promise = new Promise(function(resolve, reject){installedChunkData = installedChunks[chunkId] = [resolve, reject]});\n            promises.push(installedChunkData[2] = promise);\n            var url = __webpack_require__.p + __webpack_require__.u(chunkId);\n            var error = new Error();\n            var loadingEnded = function(event) {\n              if(__webpack_require__.o(installedChunks, chunkId)) {\n                installedChunkData = installedChunks[chunkId];\n                if(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n                if(installedChunkData) {\n                  var errorType = event && (event.type === \'load\' ? \'missing\' : event.type);\n                  var realSrc = url;\n                  error.message = "Loading chunk " + chunkId + " failed.\\n(" + errorType + ": " + realSrc + ")";\n                  error.name = "ChunkLoadError";\n                  error.type = errorType;\n                  error.request = realSrc;\n                  installedChunkData[1](error);\n                }\n              }\n            };\n            __webpack_require__.l(url, loadingEnded);\n          }\n        }\n      }\n    };\n    var webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n    var [chunkIds, moreModules, runtime] = data;\n    var moduleId, chunkId, i = 0;\n    if (chunkIds.some(function(id){return installedChunks[id] !== 0})) {\n      for(moduleId in moreModules) {\n        if(__webpack_require__.o(moreModules, moduleId)) {\n          __webpack_require__.m[moduleId] = moreModules[moduleId];\n        }\n      }\n      if(runtime) runtime(__webpack_require__);\n    }\n    if (parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n      for (;i < chunkIds.length; i++) {\n        chunkId = chunkIds[i];\n        if (__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n          installedChunks[chunkId][0]();\n        }\n        installedChunks[chunkId] = 0;\n      }\n    }\n    var self = typeof globalThis !== undefined ? globalThis : self\n    var exportName = \'LIBRARY_EXPORT_NAME\'\n    var chunkLoadingGlobal = self["webpackChunk" + exportName] = self["webpackChunk" + exportName] || [];\n    chunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\n    chunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));\n  })();\n  (function() {\n    var inProgress = {};\n    __webpack_require__.l = function(url, done) {\n      if (inProgress[url]) { inProgress[url].push(done); return; }\n        inProgress[url] = [done];\n        var onComplete = function(event) {\n          clearTimeout(timeout);\n          var doneFns = inProgress[url];\n          delete inProgress[url];\n          doneFns && doneFns.forEach(function(fn){fn(event)});\n        }\n        var timeout = setTimeout(onComplete.bind(null, undefined, { type: "timeout" }), 120000);\n      if (typeof importScripts === \'function\') {\n        try {\n          importScripts(url);onComplete({type: "load"});\n        }\n        catch(e) {\n          onComplete({type: "missing"});\n        }\n      }\n      else {\n        import(url).then(function() {\n          onComplete({\n            type: "load"\n          });\n        }, function (error) {\n          onComplete({\n            type: "missing"\n          });\n        })\n      }\n    };\n  })();\n  __webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n  __webpack_require__.p = "ROOT_URL";\n  __webpack_require__.oe = function(err) { console.error(err); throw err; };\n  var f = __webpack_require__(__webpack_require__.s = ENTRY_MODULE);\n  return f;\n}\n',g="[\\.|\\-|\\+|\\w|/|@|!]+",v="\\(\\s*(/\\*.*?\\*/)?\\s*.*?("+g+").*?\\)";function A(t){return(t+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function w(t,e,s,n){const a={};a[s]=[];let o=e.toString();const c=o.match(/^(function)?\s?\w*\(\w+,\s*(\w+),\s*(\w+)\)/);if(!c)return a;const u=c[3];n.__webpack_exports_process__||(n.__webpack_require__=u,n.__webpack_exports__=c[2],n.__webpack_exports_process__=!0);let h,d=new RegExp("(\\\\n|\\W)"+A(u)+v,"g");for(;h=d.exec(o);)"dll-reference"!==h[3]&&a[s].push(h[3]);for(d=new RegExp("(\\\\n|\\W)"+A(u)+"\\.bind\\("+u+",\\s*(/\\*.*?\\*/)?\\s*.*?("+g+").*?\\)","g");h=d.exec(o);)"dll-reference"!==h[3]&&a[s].push(h[3]);for(d=new RegExp("\\("+A(u)+'\\("(dll-reference\\s('+g+'))"\\)\\)'+v,"g");h=d.exec(o);)t[h[2]]||(a[s].push(h[1]),t[h[2]]=r(h[1]).m),a[h[2]]=a[h[2]]||[],a[h[2]].push(h[4]);const l=i()(a);for(let t=0;t<l.length;t++)for(let e=0;e<a[l[t]].length;e++)f=+a[l[t]][e],isNaN(f)||(a[l[t]][e]=+a[l[t]][e]);var f;return a}function y(t){const e=i()(t);return a()(e).call(e,(function(e,r){return e||t[r].length>0}),!1)}function b(t,e){var s;const n={main:r.m},a=function(t,e){const r={main:[e]},s={main:[],__webpack_exports__:"__webpack_exports__",__webpack_require__:"__webpack_require__",__webpack_exports_process__:!1},n={main:{}};for(;y(r);){const e=i()(r);for(let o=0;o<e.length;o++){let u=e[o],h=r[u].pop();if(n[u]=n[u]||{},n[u][h]||!t[u][h])continue;n[u][h]=!0,s[u]=s[u]||[],s[u].push(h);let d=w(t,t[u][h],u,s),l=i()(d);for(let t=0;t<l.length;t++){var a;r[l[t]]=r[l[t]]||[],r[l[t]]=c()(a=r[l[t]]).call(a,d[l[t]])}}}return s}(n,t);let o=h()(t);return"var "+e.varName+"=("+m.replace("ENTRY_MODULE",o).replace("ROOT_URL",r.p||"").replace("LIBRARY_EXPORT_NAME","AVTranscoder").replace("LIB_NAME",r.u&&r.u("")||"")+")({"+l()(s=a.main).call(s,(function(t){const r=h()(t);let s=r+": "+n.main[t].toString();if(r===o&&e.exportName&&e.pointName){const t=`;${a.__webpack_require__}.d(\n          ${a.__webpack_exports__},\n          "${e.exportName}",\n          function() {\n            if (${e.exportIsClass}) {\n              for (var key in ${a.__webpack_exports__}) {\n                if (key === '${e.exportName}') {\n                  continue;\n                }\n                var v = ${a.__webpack_exports__}[key];\n                if (typeof v === 'function' && v.name === '${e.pointName}') {\n                  return v;\n                }\n              }\n            }\n            return ${e.pointName};\n          }\n        );`;s=p()(s).call(s,0,s.length-1)+t+"}"}return s})).join(",")+"});"}},6498:(t,e,r)=>{"use strict";r(11265),r(67672),r(72739)},2148:(t,e,r)=>{"use strict";r.d(e,{A:()=>n});var s=r(67672),i=r(10576);function n(t,e){return s.sH(t)?+t:e!==i.ZH?e:0}},62100:(t,e,r)=>{"use strict";r.d(e,{A:()=>i});var s=r(10576);function i(t,e){return t!=s.Cq&&t.toString?t.toString():e!==s.ZH?e:s.u1}},65196:(t,e,r)=>{"use strict";r.d(e,{A:()=>c});var s=r(49859),i=r(61240),n=r.n(i),a=r(67672),o=r(72739);class c{constructor(){(0,s.A)(this,"queue",void 0),this.queue=[]}async execute(t){try{const e=await t.task();t.resolve(e)}catch(e){t.reject(e)}}async next(){if(this.queue.length){const t=this.queue[0];t.error?t.reject(t.error):await this.execute(t),this.queue.shift(),this.queue.length&&this.next()}}async push(t){if(!a.Pc(t))throw new TypeError("task must be a function");return new(n())(((e,r)=>{const s={task:t,resolve:e,reject:r};this.queue.push(s),1===this.queue.length&&this.next()}))}clear(t){o.__(this.queue,(e=>{e.error=t||new Error("command queue clear")}))}clearPadding(){this.queue.length=0}get length(){return this.queue.length}}},61403:(t,e,r)=>{"use strict";r.d(e,{A:()=>n});var s=r(49859),i=r(67672);class n{constructor(){(0,s.A)(this,"proxy",void 0),this.proxy=new Proxy(this,{get:(t,e,r)=>i.sH(e)?t.getIndexValue(+e):t[e],set:(t,e,r,s)=>(i.sH(e)?t.setIndexValue(+e,r):t[e]=r,!0)})}}},37246:(t,e,r)=>{"use strict";r.d(e,{A:()=>n});var s=r(49859),i=r(4624);class n{constructor(t=1048576){(0,s.A)(this,"buffer",void 0),(0,s.A)(this,"pointer",void 0),(0,s.A)(this,"bitsLeft",void 0),(0,s.A)(this,"size",void 0),(0,s.A)(this,"endPointer",void 0),(0,s.A)(this,"pos",void 0),(0,s.A)(this,"error",void 0),(0,s.A)(this,"onFlush",void 0),this.pointer=0,this.bitsLeft=8,this.pos=BigInt(0),this.size=t,this.endPointer=0,this.error=0,this.buffer=new Uint8Array(this.size)}peekU1(){let t=0;(this.remainingLength()<1||1===this.remainingLength()&&0===this.bitsLeft)&&this.flush();let e=this.pointer,r=this.bitsLeft;return 0===r&&(e++,r=8),t=this.buffer[e]>>r-1&1,t}readU1(){let t=0;return(this.remainingLength()<1||1===this.remainingLength()&&0===this.bitsLeft)&&this.flush(),this.bitsLeft--,t=this.buffer[this.pointer]>>this.bitsLeft&1,0===this.bitsLeft&&(this.pointer++,this.bitsLeft=8,this.pos++),t}readU(t){let e=0;for(let r=0;r<t;r++)e|=this.readU1()<<t-r-1;return e}peekU(t){const e=this.pointer,r=this.bitsLeft,s=this.pos,i=this.readU(t);return this.pointer=e,this.bitsLeft=r,this.pos=s,i}remainingLength(){return this.endPointer-this.pointer}getBitLeft(){return this.bitsLeft}getPointer(){return this.pointer}setPointer(t){this.pointer=t}getPos(){return this.pos}skip(t){const e=(t-t%8)/8;this.pointer+=e,this.pos+=BigInt(e);const r=t%8;this.bitsLeft<=r?(this.pointer++,this.pos++,this.bitsLeft=8-(r-this.bitsLeft)):this.bitsLeft-=r}flush(){if(!this.onFlush)throw this.error=-1048574,Error("IOReader error, flush failed because of no flush callback");if(0===this.bitsLeft&&(this.pointer++,this.pos++),!(this.size-this.remainingLength()<=0))if(this.pointer<this.endPointer){this.buffer.set(this.buffer.subarray(this.pointer,this.endPointer),0);const t=this.onFlush(this.buffer.subarray(this.endPointer-this.pointer,this.size));if(t<0)throw this.error=t,Error("IOReader error, flush failed");this.endPointer=this.endPointer-this.pointer+t,this.pointer=0}else{const t=this.onFlush(this.buffer);if(this.endPointer=t,this.pointer=0,this.bitsLeft=8,t<0)throw this.error=t,Error("IOReader error, flush failed")}}getBuffer(){return this.buffer}appendBuffer(t){if(this.size-this.endPointer>=t.length)this.buffer.set(t,this.endPointer),this.endPointer+=t.length;else if(this.buffer.set(this.buffer.subarray(this.pointer,this.endPointer),0),this.endPointer=this.endPointer-this.pointer,this.pointer=0,this.size-this.endPointer>=t.length)this.buffer.set(t,this.endPointer),this.endPointer+=t.length;else{const e=Math.min(this.size-this.endPointer,t.length);this.buffer.set(t.subarray(0,e),this.endPointer),this.endPointer+=e,i.R8("BSReader, call appendBuffer but the buffer's size is lagger then the remaining size","src/common/io/BitReader.ts",257)}}reset(){this.pointer=this.endPointer=0,this.bitsLeft=8,this.error=0,this.pos=BigInt(0)}skipPadding(){this.bitsLeft<8&&(this.bitsLeft=8,this.pointer++,this.pos++)}}},83314:(t,e,r)=>{"use strict";r.d(e,{A:()=>a});var s=r(49859),i=r(18979),n=r.n(i);class a{constructor(t=1048576){(0,s.A)(this,"buffer",void 0),(0,s.A)(this,"pointer",void 0),(0,s.A)(this,"pos",void 0),(0,s.A)(this,"bitPointer",void 0),(0,s.A)(this,"size",void 0),(0,s.A)(this,"error",void 0),(0,s.A)(this,"onFlush",void 0),this.pointer=0,this.bitPointer=0,this.size=t,this.error=0,this.pos=BigInt(0),this.buffer=new Uint8Array(this.size)}writeU1(t){(this.remainingLength()<1||1===this.remainingLength()&&this.bitPointer>=8)&&this.flush(),1&t?this.buffer[this.pointer]|=1<<7-this.bitPointer:this.buffer[this.pointer]&=~(1<<7-this.bitPointer),this.bitPointer++,8===this.bitPointer&&(this.pointer++,this.pos++,this.bitPointer=0)}writeU(t,e){for(let r=0;r<t;r++)this.writeU1(e>>t-r-1&1)}remainingLength(){return this.size-this.pointer}flush(){if(!this.onFlush)throw this.error=-1048574,Error("BSWriter error, flush failed because of no flush callback");if(this.pointer)if(this.bitPointer&&this.pointer>0){var t;const e=this.onFlush(n()(t=this.buffer.subarray(0,this.pointer)).call(t));if(0!==e)throw this.error=e,Error("BSWriter error, flush failed");this.buffer[0]=this.buffer[this.pointer]}else if(0===this.bitPointer){const t=this.onFlush(this.buffer.subarray(0,this.pointer));if(0!==t)throw this.error=t,Error("BSWriter error, flush failed")}this.pointer=0}padding(){for(;0!==this.bitPointer;)this.writeU1(0)}reset(){this.pointer=0,this.bitPointer=0,this.error=0,this.pos=BigInt(0)}getBuffer(){return this.buffer}getPointer(){return this.pointer}getPos(){return this.pos}}},31865:(t,e,r)=>{"use strict";r.d(e,{A:()=>c});var s=r(49859),i=r(18979),n=r.n(i),a=r(92647),o=r(50011);class c{constructor(t,e=!0){(0,s.A)(this,"data",void 0),(0,s.A)(this,"buffer",void 0),(0,s.A)(this,"byteStart",void 0),(0,s.A)(this,"pos",void 0),(0,s.A)(this,"size",void 0),(0,s.A)(this,"littleEndian",void 0),this.buffer=t,this.data=t instanceof Uint8Array?new DataView(t.buffer):t.view,this.byteStart=t instanceof Uint8Array?t.byteOffset:0,this.pos=0,this.size=t.byteLength,this.littleEndian=!e}readUint8(){return this.data.getUint8(this.pos+++this.byteStart)}peekUint8(){return this.data.getUint8(this.pos+this.byteStart)}readUint16(){const t=this.data.getUint16(this.pos+this.byteStart,this.littleEndian);return this.pos+=2,t}peekUint16(){return this.data.getUint16(this.pos+this.byteStart,this.littleEndian)}readUint24(){const t=this.readUint16(),e=this.readUint8();return this.littleEndian?e<<16|t:t<<8|e}peekUint24(){const t=this.readUint16(),e=this.readUint8();return this.pos-=3,this.littleEndian?e<<16|t:t<<8|e}readUint32(){const t=this.data.getUint32(this.pos+this.byteStart,this.littleEndian);return this.pos+=4,t}peekUint32(){return this.data.getUint32(this.pos+this.byteStart,this.littleEndian)}readUint64(){const t=BigInt(this.readUint32()),e=BigInt(this.readUint32());return this.littleEndian?e<<BigInt(32)|t:t<<BigInt(32)|e}peekUint64(){const t=BigInt(this.readUint32()),e=BigInt(this.readUint32());return this.pos-=8,this.littleEndian?e<<BigInt(32)|t:t<<BigInt(32)|e}readInt8(){return this.data.getInt8(this.pos+++this.byteStart)}peekInt8(){return this.data.getInt8(this.pos+this.byteStart)}readInt16(){const t=this.data.getInt16(this.pos+this.byteStart,this.littleEndian);return this.pos+=2,t}peekInt16(){return this.data.getInt16(this.pos+this.byteStart,this.littleEndian)}readInt24(){const t=this.readUint24();return 8388608&t?t-16777216:t}peekInt24(){const t=this.peekUint24();return 8388608&t?t-16777216:t}readInt32(){const t=this.data.getInt32(this.pos+this.byteStart,this.littleEndian);return this.pos+=4,t}peekInt32(){return this.data.getInt32(this.pos+this.byteStart,this.littleEndian)}readInt64(){const t=BigInt(this.readInt32()),e=BigInt(this.readInt32());return this.littleEndian?e<<BigInt(32)|t:t<<BigInt(32)|e}peekInt64(){const t=BigInt(this.readInt32()),e=BigInt(this.readInt32());return this.pos-=8,this.littleEndian?e<<BigInt(32)|t:t<<BigInt(32)|e}readFloat(){const t=this.data.getFloat32(this.pos+this.byteStart,this.littleEndian);return this.pos+=4,t}peekFloat(){return this.data.getFloat32(this.pos+this.byteStart,this.littleEndian)}readDouble(){const t=this.data.getFloat64(this.pos+this.byteStart,this.littleEndian);return this.pos+=8,t}peekDouble(){return this.data.getFloat64(this.pos+this.byteStart,this.littleEndian)}readHex(t=1){let e="";for(let r=0;r<t;r++){const t=this.readUint8().toString(16);e+=1===t.length?"0"+t:t}return e}peekHex(t=1){const e=this.pos,r=this.readHex(t);return this.pos=e,r}readString(t=1){let e="";if(t){let r=this.pos;for(let e=0;e<t&&0===this.buffer[this.pos+e];e++)r++;e=o.decode(this.buffer.subarray(r,r+t))}return this.pos+=t,e}peekString(t=1){const e=this.pos,r=this.readString(t);return this.pos=e,r}readLine(){let t="";for(let e=this.pos;e<this.size;e++)if(10===this.buffer[e]||13===this.buffer[e]){t+=this.readString(e-this.pos);break}for(let t=this.pos;t<this.size&&(10===this.buffer[t]||13===this.buffer[t]);t++)this.readUint8();return t}peekLine(){const t=this.pos,e=this.readLine();return this.pos=t,e}getPos(){return BigInt(this.pos)}seek(t){t>this.size&&(t=this.size),this.pos=Math.max(0,t)}skip(t){this.seek(this.pos+t)}back(t){this.seek(this.pos-t)}remainingSize(){return this.size-this.pos}readBuffer(t){var e;t=Math.min(t,this.remainingSize());const r=n()(e=this.buffer).call(e,this.pos,this.pos+t);return this.pos+=t,r}appendBuffer(t){var e;this.buffer=(0,a.A)(Uint8Array,[n()(e=this.buffer).call(e),n()(t).call(t)]),this.data=new DataView(this.buffer.buffer),this.size+=t.byteLength,this.byteStart=0}resetBuffer(t,e=!0){this.buffer=t,this.data=t instanceof Uint8Array?new DataView(t.buffer):t.view,this.byteStart=t instanceof Uint8Array?t.byteOffset:0,this.pos=0,this.size=t.byteLength,this.littleEndian=!e}}},729:(t,e,r)=>{"use strict";r.d(e,{A:()=>a});var s=r(49859),i=r(4624),n=r(50011);class a{constructor(t,e=!0){(0,s.A)(this,"data",void 0),(0,s.A)(this,"buffer",void 0),(0,s.A)(this,"byteStart",void 0),(0,s.A)(this,"pos",void 0),(0,s.A)(this,"size",void 0),(0,s.A)(this,"littleEndian",void 0),this.buffer=t,this.data=t instanceof Uint8Array?new DataView(t.buffer):t.view,this.byteStart=t instanceof Uint8Array?t.byteOffset:0,this.pos=0,this.size=t.byteLength,this.littleEndian=!e}writeUint8(t){this.data.setUint8(this.pos+++this.byteStart,t)}writeUint16(t){this.data.setUint16(this.pos+this.byteStart,t,this.littleEndian),this.pos+=2}writeUint24(t){const e=3840&t,r=240&t,s=15&t;this.littleEndian?(this.writeUint8(s),this.writeUint8(r),this.writeUint8(e)):(this.writeUint8(e),this.writeUint8(r),this.writeUint8(s))}writeUint32(t){this.data.setUint32(this.pos+this.byteStart,t,this.littleEndian),this.pos+=4}writeUint64(t){this.data.setBigUint64(this.pos+this.byteStart,t,this.littleEndian),this.pos+=8}writeInt8(t){this.data.setInt8(this.pos+++this.byteStart,t)}writeInt16(t){this.data.setInt16(this.pos+this.byteStart,t,this.littleEndian),this.pos+=2}writeInt24(t){this.writeUint24(t<0?t+16777216:t)}writeInt32(t){this.data.setInt32(this.pos+this.byteStart,t,this.littleEndian),this.pos+=4}writeInt64(t){this.data.setBigInt64(this.pos+this.byteStart,t,this.littleEndian),this.pos+=8}writeFloat(t){this.data.setFloat32(this.pos+this.byteStart,t,this.littleEndian),this.pos+=4}writeDouble(t){this.data.setFloat64(this.pos+this.byteStart,t,this.littleEndian),this.pos+=8}getPos(){return this.pos}seek(t){t>this.size&&(t=this.size),this.pos=Math.max(0,t)}skip(t){this.seek(this.pos+t)}back(t){this.seek(this.pos-t)}remainingSize(){return this.size-this.pos}writeBuffer(t){let e=t.length;this.remainingSize()<e&&(e=this.remainingSize(),i.R8(`the remaining buffer size is smaller then the wrote buffer, hope set ${t.length}, but set ${e}`,"src/common/io/BufferWriter.ts",202)),this.buffer.set(t,this.pos),this.pos+=t.length}writeString(t){const e=n.encode(t);return this.writeBuffer(e),e.length}getWroteBuffer(){return this.buffer.subarray(0,this.pos)}resetBuffer(t,e=!0){this.buffer=t,this.data=t instanceof Uint8Array?new DataView(t.buffer):t.view,this.byteStart=t instanceof Uint8Array?t.byteOffset:0,this.pos=0,this.size=t.byteLength,this.littleEndian=!e}}},31830:(t,e,r)=>{"use strict";r.d(e,{A:()=>c});var s=r(49859),i=r(18979),n=r.n(i),a=r(61240),o=r.n(a);class c{constructor(t,e=!1){(0,s.A)(this,"handler",void 0),(0,s.A)(this,"file",void 0),(0,s.A)(this,"pos",void 0),(0,s.A)(this,"writer",void 0),(0,s.A)(this,"append",void 0),(0,s.A)(this,"reader",void 0),(0,s.A)(this,"size",void 0),(0,s.A)(this,"blobSlice",void 0),(0,s.A)(this,"readied",void 0),(0,s.A)(this,"readHold",void 0),this.handler=t,this.append=e,this.readied=!1}async ready(){this.readied||(this.file=await this.handler.getFile(),this.writer=await this.handler.createWritable(),this.pos=this.append?this.file.size:0,this.size=this.pos,this.reader=new FileReader,this.blobSlice=n()(File.prototype)||File.prototype.mozSlice||File.prototype.webkitSlice,this.reader.onloadend=t=>{this.readHold&&(this.readHold.resolve(t.target.result),this.readHold=null)},this.readied=!0)}async write_(t){await this.writer.write(t),this.pos+=t.byteLength,this.pos>this.size&&(this.size+=t.byteLength)}async write(t){await this.write_(t)}async seek_(t){await this.writer.seek(t),this.pos=t}async seek(t){await this.seek_(t)}async seekToEnd(){await this.seek_(this.size)}async resize_(t){t!==this.file.size&&(t<this.file.size&&(this.pos=this.file.size),await this.writer.truncate(t),this.size=t)}async resize(t){await this.resize_(t)}async read_(t,e){return new(o())(((r,s)=>{this.readHold={resolve:r,reject:s},this.reader.readAsArrayBuffer(this.blobSlice.call(this.file,t,e))}))}async read(t,e){return await this.read_(t,e)}async appendBufferByPosition(t,e){await this.writer.close(),this.file=await this.handler.getFile(),this.writer=await this.handler.createWritable({keepExistingData:!0});const r=this.file.size,s=t.byteLength;if(e>=this.file.size)await this.resize_(e+s),await this.seek_(e),await this.write_(t);else{let s=e;for(await this.seek_(e),await this.write_(t);s<r;){const t=await this.read_(s,Math.min(s+5242880,r));await this.write_(t),s+=t.byteLength}}}async close_(){this.readied&&(await this.writer.close(),this.file=await this.handler.getFile(),this.readied=!1)}async close(){await this.close_()}getFile(){return this.file}getHandle(){return this.handler}getPos(){return this.pos}getSize(){return this.size}async destroy(){await this.close_(),this.handler=null,this.file=null}}},24175:(t,e,r)=>{"use strict";r.d(e,{A:()=>h});var s=r(49859),i=r(61240),n=r.n(i),a=r(4624),o=r(50011),c=r(13724);const u="src/common/io/IOReader.ts";class h{constructor(t=1048576,e=!0,r){if((0,s.A)(this,"data",void 0),(0,s.A)(this,"buffer",void 0),(0,s.A)(this,"pointer",void 0),(0,s.A)(this,"endPointer",void 0),(0,s.A)(this,"pos",void 0),(0,s.A)(this,"size",void 0),(0,s.A)(this,"littleEndian",void 0),(0,s.A)(this,"fileSize_",void 0),(0,s.A)(this,"error",void 0),(0,s.A)(this,"onFlush",void 0),(0,s.A)(this,"onSeek",void 0),(0,s.A)(this,"onSize",void 0),(0,s.A)(this,"flags",void 0),(0,s.A)(this,"flushResolve",void 0),this.pos=BigInt(0),this.pointer=0,this.error=0,this.endPointer=0,this.littleEndian=!e,this.flags=0,r&&r.view)this.size=r.length,this.buffer=r,this.data=r.view;else if(r&&!r.byteOffset)this.size=r.length,this.buffer=r,this.data=new DataView(this.buffer.buffer);else{if(r)throw new Error("not support subarray of ArrayBuffer");this.size=Math.max(t,102400),this.buffer=new Uint8Array(this.size),this.data=new DataView(this.buffer.buffer)}}async readUint8(){this.remainingLength()<1&&await this.flush(1);const t=this.data.getUint8(this.pointer);return this.pointer++,this.pos++,t}async peekUint8(){return this.remainingLength()<1&&await this.flush(1),this.data.getUint8(this.pointer)}async readUint16(){this.remainingLength()<2&&await this.flush(2);const t=this.data.getUint16(this.pointer,this.littleEndian);return this.pointer+=2,this.pos+=BigInt(2),t}async peekUint16(){return this.remainingLength()<2&&await this.flush(2),this.data.getUint16(this.pointer,this.littleEndian)}async readUint24(){this.remainingLength()<3&&await this.flush(3);const t=await this.readUint16(),e=await this.readUint8();return this.littleEndian?e<<16|t:t<<8|e}async peekUint24(){this.remainingLength()<3&&await this.flush(3);const t=this.pointer,e=this.pos,r=await this.readUint16(),s=await this.readUint8(),i=this.littleEndian?s<<16|r:r<<8|s;return this.pointer=t,this.pos=e,i}async readUint32(){this.remainingLength()<4&&await this.flush(4);const t=this.data.getUint32(this.pointer,this.littleEndian);return this.pointer+=4,this.pos+=BigInt(4),t}async peekUint32(){return this.remainingLength()<4&&await this.flush(4),this.data.getUint32(this.pointer,this.littleEndian)}async readUint64(){this.remainingLength()<8&&await this.flush(8);const t=this.data.getBigUint64(this.pointer,this.littleEndian);return this.pointer+=8,this.pos+=BigInt(8),t}async peekUint64(){return this.remainingLength()<8&&await this.flush(8),this.data.getBigUint64(this.pointer,this.littleEndian)}async readInt8(){this.remainingLength()<1&&await this.flush(1);const t=this.data.getInt8(this.pointer);return this.pointer++,this.pos++,t}async peekInt8(){return this.remainingLength()<1&&await this.flush(1),this.data.getInt8(this.pointer)}async readInt16(){this.remainingLength()<2&&await this.flush(2);const t=this.data.getInt16(this.pointer,this.littleEndian);return this.pointer+=2,this.pos+=BigInt(2),t}async peekInt16(){return this.remainingLength()<2&&await this.flush(2),this.data.getInt16(this.pointer,this.littleEndian)}async readInt24(){const t=await this.readUint24();return 8388608&t?t-16777216:t}async peekInt24(){const t=await this.peekUint24();return 8388608&t?t-16777216:t}async readInt32(){this.remainingLength()<4&&await this.flush(4);const t=this.data.getInt32(this.pointer,this.littleEndian);return this.pointer+=4,this.pos+=BigInt(4),t}async peekInt32(){return this.remainingLength()<4&&await this.flush(4),this.data.getInt32(this.pointer,this.littleEndian)}async readInt64(){this.remainingLength()<8&&await this.flush(8);const t=this.data.getBigInt64(this.pointer,this.littleEndian);return this.pointer+=8,this.pos+=BigInt(8),t}async peekInt64(){return this.remainingLength()<8&&await this.flush(8),this.data.getBigInt64(this.pointer,this.littleEndian)}async readFloat(){this.remainingLength()<4&&await this.flush(4);const t=this.data.getFloat32(this.pointer,this.littleEndian);return this.pointer+=4,this.pos+=BigInt(4),t}async peekFloat(){return this.remainingLength()<4&&await this.flush(4),this.data.getFloat32(this.pointer,this.littleEndian)}async readDouble(){this.remainingLength()<8&&await this.flush(8);const t=this.data.getFloat64(this.pointer,this.littleEndian);return this.pointer+=8,this.pos+=BigInt(8),t}async peekDouble(){return this.remainingLength()<8&&await this.flush(8),this.data.getFloat64(this.pointer,this.littleEndian)}async readHex(t=1){let e="";for(let r=0;r<t;r++){const t=(await this.readUint8()).toString(16);e+=1===t.length?"0"+t:t}return e}async peekHex(t=1){t>this.size&&(this.error=-1048574,a.h2("peekHex, length too large",u,416)),this.remainingLength()<t&&await this.flush(t);const e=this.pointer,r=this.pos;let s="";for(let e=0;e<t;e++){const t=(await this.readUint8()).toString(16);s+=1===t.length?"0"+t:t}return this.pointer=e,this.pos=r,s}async readBuffer(t,e){if(e||(e=new Uint8Array(t)),this.remainingLength()<t){let r=0;if(this.remainingLength()>0){const s=this.remainingLength();e.set(this.buffer.subarray(this.pointer,this.pointer+s),r),r+=s,this.pointer+=s,this.pos+=BigInt(s),t-=s}for(;t>0;){await this.flush();const s=Math.min(this.endPointer-this.pointer,t);e.set(this.buffer.subarray(this.pointer,this.pointer+s),r),r+=s,this.pointer+=s,this.pos+=BigInt(s),t-=s}}else e.set(this.buffer.subarray(this.pointer,this.pointer+t),0),this.pointer+=t,this.pos+=BigInt(t);return e}async peekBuffer(t,e){return t>this.size&&(this.error=-1048574,a.h2("peekBuffer, length too large",u,501)),this.remainingLength()<t&&await this.flush(t),e||(e=new Uint8Array(t)),e.set(this.buffer.subarray(this.pointer,this.pointer+t),0),e}async readToBuffer(t,e){if(this.remainingLength()<t){let r=0;if(this.remainingLength()>0){const s=this.remainingLength();e.set(this.buffer.subarray(this.pointer,this.pointer+s),r),r+=s,this.pointer+=s,this.pos+=BigInt(s),t-=s}for(;t>0;){try{await this.flush()}catch(t){if(-1048576===this.error&&r)return r;throw t}const s=Math.min(this.endPointer-this.pointer,t);e.set(this.buffer.subarray(this.pointer,this.pointer+s),r),r+=s,this.pointer+=s,this.pos+=BigInt(s),t-=s}return r}return e.set(this.buffer.subarray(this.pointer,this.pointer+t),0),this.pointer+=t,this.pos+=BigInt(t),t}async readString(t=1){const e=await this.readBuffer(t);return o.decode(e)}async peekString(t=1){const e=await this.peekBuffer(t);return o.decode(e)}async readLine(){let t="";for(;;){let e=!1;for(let r=this.pointer;r<this.endPointer;r++)if(10===this.buffer[r]||13===this.buffer[r]){r!==this.pointer&&(t+=await this.readString(r-this.pointer)),e=!0;break}if(e)break;t+=await this.readString(this.remainingLength()),await this.flush()}let e=await this.peekUint8();return 10!==e&&13!==e||(this.pointer++,13===e&&(e=await this.peekUint8(),10===e&&this.pointer++)),t}async peekLine(){if(this.remainingLength()<this.size)try{await this.flush()}catch(t){if(-1048576!==this.error)throw t}let t="",e=!1;for(let r=this.pointer;r<this.endPointer;r++)if(10===this.buffer[r]||13===this.buffer[r]){t+=await this.peekString(r-this.pointer),e=!0;break}return e||(this.error=-1048574,a.h2("peekLine, out of buffer",u,659)),t}getPointer(){return this.pointer}getPos(){return this.pos}async skip(t){const e=t;for(;this.remainingLength()<t;)t-=this.remainingLength(),this.pointer=this.endPointer,await this.flush();this.remainingLength()>=t&&(this.pointer+=t),this.pos+=BigInt(e)}remainingLength(){return this.endPointer-this.pointer}async flush_(t){return new(n())((async e=>{for(this.flushResolve=e;;){const r=await this.onFlush(t);if(-1048575!==r){this.flushResolve=null,e(r);break}await new c.A(0)}}))}async flush(t=0){if(this.onFlush||(this.error=-1048574,a.h2("IOReader error, flush failed because of no flush callback",u,738)),!(this.size-this.remainingLength()<=0)){if(t=Math.min(t,this.size),this.pointer<this.endPointer?(this.buffer.set(this.buffer.subarray(this.pointer,this.endPointer),0),this.endPointer=this.endPointer-this.pointer):this.endPointer=0,this.pointer=0,t)for(;this.remainingLength()<t;){const t=await this.flush_(this.buffer.subarray(this.endPointer));if(t<0)throw this.error=t,new Error(`IOReader error, flush ${-1048576===t?"ended":"failed"}, ret: ${t}`);this.endPointer+=t}else{const t=await this.flush_(this.buffer.subarray(this.endPointer));if(t<0)throw this.error=t,new Error(`IOReader error, flush ${-1048576===t?"ended":"failed"}, ret: ${t}`);this.endPointer+=t}this.error=0}}async seek(t,e=!1,r=!0){if(!e){const e=Number(t-this.pos);if(e<0&&Math.abs(e)<=this.pointer)return this.pointer+=e,void(this.pos=t);if(e>0&&this.pointer+e<this.endPointer)return this.pointer+=e,void(this.pos=t);if(0===e)return}this.onSeek||(this.error=-1048574,a.h2("IOReader error, seek failed because of no seek callback",u,809)),this.pointer=this.endPointer=0,this.pos=t;const s=await this.onSeek(t);0!==s&&(this.error=s,a.h2("IOReader error, seek failed",u,818)),r&&await this.flush()}getBuffer(){return this.buffer}appendBuffer(t){if(this.size-this.endPointer>=t.length)this.buffer.set(t,this.endPointer),this.endPointer+=t.length;else if(this.buffer.set(this.buffer.subarray(this.pointer,this.endPointer),0),this.endPointer=this.endPointer-this.pointer,this.pointer=0,this.size-this.endPointer>=t.length)this.buffer.set(t,this.endPointer),this.endPointer+=t.length;else{const e=Math.min(this.size-this.endPointer,t.length);this.buffer.set(t.subarray(0,e),this.endPointer),this.endPointer+=e,a.R8("IOReader, call appendBuffer but the buffer's size is lagger then the remaining size",u,856)}}reset(){this.pointer=this.endPointer=0,this.pos=BigInt(0),this.error=0}setEndian(t){this.littleEndian=!t}isBigEndian(){return!this.littleEndian}async fileSize(){if(this.fileSize_)return this.fileSize_;if(!this.onSize)return a.R8("IOReader error, fileSize failed because of no onSize callback",u,898),BigInt(0);try{this.fileSize_=await this.onSize()}catch(t){a.R8(`IOReader error, call fileSize failed: ${t}`,u,905),this.fileSize_=BigInt(0)}return this.fileSize_}getBufferSize(){return this.size}async pipe(t,e){if(e)if(this.remainingLength()<e){if(this.remainingLength()>0){const r=this.remainingLength();await t.writeBuffer(this.buffer.subarray(this.pointer,this.pointer+r)),this.pointer+=r,this.pos+=BigInt(r),e-=r}for(;e>0;){await this.flush();const r=Math.min(this.remainingLength(),e);await t.writeBuffer(this.buffer.subarray(this.pointer,this.pointer+r)),this.pointer+=r,this.pos+=BigInt(r),e-=r}}else await t.writeBuffer(this.buffer.subarray(this.pointer,this.pointer+e)),this.pointer+=e,this.pos+=BigInt(e);else{if(this.remainingLength()>0){const e=this.remainingLength();await t.writeBuffer(this.buffer.subarray(this.pointer,this.pointer+e)),this.pointer+=e,this.pos+=BigInt(e)}for(;await this.flush_(this.buffer.subarray(0))>0;){const e=this.remainingLength();await t.writeBuffer(this.buffer.subarray(this.pointer,this.pointer+e)),this.pointer+=e,this.pos+=BigInt(e)}}}abort(){this.error=-1048572,this.flushResolve&&(this.flushResolve(-1048572),this.flushResolve=null)}}},34531:(t,e,r)=>{"use strict";r.d(e,{A:()=>n});var s=r(49859),i=r(50011);class n{constructor(t=1048576,e=!0,r){if((0,s.A)(this,"data",void 0),(0,s.A)(this,"buffer",void 0),(0,s.A)(this,"pointer",void 0),(0,s.A)(this,"pos",void 0),(0,s.A)(this,"size",void 0),(0,s.A)(this,"littleEndian",void 0),(0,s.A)(this,"error",void 0),(0,s.A)(this,"onFlush",void 0),(0,s.A)(this,"onSeek",void 0),this.pointer=0,this.pos=BigInt(0),this.size=t,this.littleEndian=!e,this.error=0,r&&r.view)this.size=r.length,this.buffer=r,this.data=r.view;else if(r&&!r.byteOffset)this.size=r.length,this.buffer=r,this.data=new DataView(this.buffer.buffer);else{if(r)throw new Error("not support subarray of ArrayBuffer");this.buffer=new Uint8Array(this.size),this.data=new DataView(this.buffer.buffer)}}async writeUint8(t){this.remainingLength()<1&&await this.flush(),this.data.setUint8(this.pointer,t),this.pointer++,this.pos++}async writeUint16(t){this.remainingLength()<2&&await this.flush(),this.data.setUint16(this.pointer,t,this.littleEndian),this.pointer+=2,this.pos+=BigInt(2)}async writeUint24(t){this.remainingLength()<3&&await this.flush();const e=(16711680&t)>>16,r=(65280&t)>>8,s=255&t;this.littleEndian?(await this.writeUint8(s),await this.writeUint8(r),await this.writeUint8(e)):(await this.writeUint8(e),await this.writeUint8(r),await this.writeUint8(s))}async writeUint32(t){this.remainingLength()<4&&await this.flush(),this.data.setUint32(this.pointer,t,this.littleEndian),this.pointer+=4,this.pos+=BigInt(4)}async writeUint64(t){this.remainingLength()<8&&await this.flush(),this.data.setBigUint64(this.pointer,t,this.littleEndian),this.pointer+=8,this.pos+=BigInt(8)}async writeInt8(t){this.remainingLength()<1&&await this.flush(),this.data.setInt8(this.pointer,t),this.pointer++,this.pos++}async writeInt16(t){this.remainingLength()<2&&await this.flush(),this.data.setInt16(this.pointer,t,this.littleEndian),this.pointer+=2,this.pos+=BigInt(2)}async writeInt24(t){await this.writeUint24(t<0?t+16777216:t)}async writeInt32(t){this.remainingLength()<4&&await this.flush(),this.data.setInt32(this.pointer,t,this.littleEndian),this.pointer+=4,this.pos+=BigInt(4)}async writeInt64(t){this.remainingLength()<8&&await this.flush(),this.data.setBigInt64(this.pointer,t,this.littleEndian),this.pointer+=8,this.pos+=BigInt(8)}async writeFloat(t){this.remainingLength()<4&&await this.flush(),this.data.setFloat32(this.pointer,t,this.littleEndian),this.pointer+=4,this.pos+=BigInt(4)}async writeDouble(t){this.remainingLength()<8&&await this.flush(),this.data.setFloat64(this.pointer,t,this.littleEndian),this.pointer+=8,this.pos+=BigInt(8)}getPointer(){return this.pointer}getPos(){return this.pos}remainingLength(){return this.size-this.pointer}async writeBuffer(t){if(!t.length)return;let e=t.length;if(this.remainingLength()<e){let r=0;for(;e>0;){await this.flush();const s=Math.min(this.size,e);this.buffer.set(t.subarray(r,r+s),this.pointer),this.pointer+=s,this.pos+=BigInt(s),r+=s,e-=s}}else this.buffer.set(t,this.pointer),this.pointer+=e,this.pos+=BigInt(e)}async writeString(t){const e=i.encode(t);return await this.writeBuffer(e),e.length}async flush(){if(!this.onFlush)throw this.error=-1048574,Error("IOWriter error, flush failed because of no flush callback");if(this.pointer){const t=await this.onFlush(this.buffer.subarray(0,this.pointer));if(0!==t)throw this.error=t,Error("IOWriter error, flush failed")}this.pointer=0}async flushToPos(t){if(!this.onFlush)throw this.error=-1048574,Error("IOWriter error, flush failed because of no flush callback");if(this.pointer){const e=await this.onFlush(this.buffer.subarray(0,this.pointer),t);if(0!==e)throw this.error=e,Error("IOWriter error, flush failed")}this.pointer=0}async seek(t){if(!this.onSeek)throw this.error=-1048574,Error("IOWriter error, seek failed because of no seek callback");await this.flush();const e=await this.onSeek(t);if(0!==e)throw this.error=e,Error("IOWriter error, seek failed");this.pos=t}seekInline(t){const e=this.pointer;this.pointer=Math.max(0,Math.min(this.size,t)),this.pos+=BigInt(this.pointer-e)}skip(t){const e=this.pointer;this.pointer=Math.min(this.size,this.pointer+t),this.pos+=BigInt(this.pointer-e)}back(t){const e=this.pointer;this.pointer=Math.max(0,this.pointer-t),this.pos+=BigInt(this.pointer-e)}getBuffer(){return this.buffer.subarray(0,this.pointer)}setEndian(t){this.littleEndian=!t}reset(){this.pointer=0,this.pos=BigInt(0),this.error=0}getBufferSize(){return this.size}}},35336:(t,e,r)=>{"use strict";r.d(e,{A:()=>n});var s=r(49859),i=r(50011);class n{constructor(t=1048576,e=!0,r){if((0,s.A)(this,"data",void 0),(0,s.A)(this,"buffer",void 0),(0,s.A)(this,"pointer",void 0),(0,s.A)(this,"pos",void 0),(0,s.A)(this,"size",void 0),(0,s.A)(this,"littleEndian",void 0),(0,s.A)(this,"error",void 0),(0,s.A)(this,"onFlush",void 0),(0,s.A)(this,"onSeek",void 0),this.pointer=0,this.pos=BigInt(0),this.size=t,this.littleEndian=!e,this.error=0,r&&r.view)this.size=r.length,this.buffer=r,this.data=r.view;else if(r&&!r.byteOffset)this.size=r.length,this.buffer=r,this.data=new DataView(this.buffer.buffer);else{if(r)throw new Error("not support subarray of ArrayBuffer");this.buffer=new Uint8Array(this.size),this.data=new DataView(this.buffer.buffer)}}writeUint8(t){this.remainingLength()<1&&this.flush(),this.data.setUint8(this.pointer,t),this.pointer++,this.pos++}writeUint16(t){this.remainingLength()<2&&this.flush(),this.data.setUint16(this.pointer,t,this.littleEndian),this.pointer+=2,this.pos+=BigInt(2)}writeUint24(t){this.remainingLength()<3&&this.flush();const e=(16711680&t)>>16,r=(65280&t)>>8,s=255&t;this.littleEndian?(this.writeUint8(s),this.writeUint8(r),this.writeUint8(e)):(this.writeUint8(e),this.writeUint8(r),this.writeUint8(s))}writeUint32(t){this.remainingLength()<4&&this.flush(),this.data.setUint32(this.pointer,t,this.littleEndian),this.pointer+=4,this.pos+=BigInt(4)}writeUint64(t){this.remainingLength()<8&&this.flush(),this.data.setBigUint64(this.pointer,t,this.littleEndian),this.pointer+=8,this.pos+=BigInt(8)}writeInt8(t){this.remainingLength()<1&&this.flush(),this.data.setInt8(this.pointer,t),this.pointer++,this.pos++}writeInt16(t){this.remainingLength()<2&&this.flush(),this.data.setInt16(this.pointer,t,this.littleEndian),this.pointer+=2,this.pos+=BigInt(2)}writeInt24(t){this.writeUint24(t<0?t+16777216:t)}writeInt32(t){this.remainingLength()<4&&this.flush(),this.data.setInt32(this.pointer,t,this.littleEndian),this.pointer+=4,this.pos+=BigInt(4)}writeInt64(t){this.remainingLength()<8&&this.flush(),this.data.setBigInt64(this.pointer,t,this.littleEndian),this.pointer+=8,this.pos+=BigInt(8)}writeFloat(t){this.remainingLength()<4&&this.flush(),this.data.setFloat32(this.pointer,t,this.littleEndian),this.pointer+=4,this.pos+=BigInt(4)}writeDouble(t){this.remainingLength()<8&&this.flush(),this.data.setFloat64(this.pointer,t,this.littleEndian),this.pointer+=8,this.pos+=BigInt(8)}getPointer(){return this.pointer}getPos(){return this.pos}remainingLength(){return this.size-this.pointer}writeBuffer(t){if(!t.length)return;let e=t.length;if(this.remainingLength()<e){let r=0;for(;e>0;){this.flush();const s=Math.min(this.size,e);this.buffer.set(t.subarray(r,r+s),this.pointer),this.pointer+=s,this.pos+=BigInt(s),r+=s,e-=s}}else this.buffer.set(t,this.pointer),this.pointer+=e,this.pos+=BigInt(e)}writeString(t){const e=i.encode(t);return this.writeBuffer(e),e.length}flush(){if(!this.onFlush)throw this.error=-1048574,Error("IOWriter error, flush failed because of no flush callback");if(this.pointer){const t=this.onFlush(this.buffer.subarray(0,this.pointer));if(0!==t)throw this.error=t,Error("IOWriter error, flush failed")}this.pointer=0}flushToPos(t){if(!this.onFlush)throw this.error=-1048574,Error("IOWriter error, flush failed because of no flush callback");if(this.pointer){const e=this.onFlush(this.buffer.subarray(0,this.pointer),t);if(0!==e)throw this.error=e,Error("IOWriter error, flush failed")}this.pointer=0}seek(t){if(!this.onSeek)throw this.error=-1048574,Error("IOWriter error, seek failed because of no seek callback");this.flush();const e=this.onSeek(t);if(0!==e)throw this.error=e,Error("IOWriter error, seek failed");this.pos=t}seekInline(t){const e=this.pointer;this.pointer=Math.max(0,Math.min(this.size,t)),this.pos+=BigInt(this.pointer-e)}skip(t){const e=this.pointer;this.pointer=Math.min(this.size,this.pointer+t),this.pos+=BigInt(this.pointer-e)}back(t){const e=this.pointer;this.pointer=Math.max(0,this.pointer-t),this.pos+=BigInt(this.pointer-e)}getBuffer(){return this.buffer.subarray(0,this.pointer)}setEndian(t){this.littleEndian=!t}reset(){this.pointer=0,this.pos=BigInt(0),this.error=0}getBufferSize(){return this.size}}},59475:(t,e,r)=>{"use strict";r.d(e,{A:()=>a});var s=r(49859),i=r(31830),n=r(65196);class a extends i.A{constructor(t,e=!1){super(t,e),(0,s.A)(this,"commandQueue",void 0),this.commandQueue=new n.A}async write(t){return this.commandQueue.push((async()=>super.write(t)))}async seek(t){return this.commandQueue.push((async()=>super.seek(t)))}async seekToEnd(){return this.commandQueue.push((async()=>super.seekToEnd()))}async resize(t){return this.commandQueue.push((async()=>super.resize(t)))}async read(t,e){return this.commandQueue.push((async()=>super.read(t,e)))}async appendBufferByPosition(t,e){return this.commandQueue.push((async()=>super.appendBufferByPosition(t,e)))}async close(){return this.commandQueue.push((async()=>super.close()))}async destroy(){await super.destroy(),this.commandQueue.clear(),this.commandQueue=null}get writeQueueSize(){var t,e;return null!==(t=null===(e=this.commandQueue)||void 0===e?void 0:e.length)&&void 0!==t?t:0}}},95073:(t,e,r)=>{"use strict";function s(t,e){return t+(e-1)&~(e-1)}r.d(e,{A:()=>s})},31658:(t,e,r)=>{"use strict";function s(t,e){for(;0!==e;)[t,e]=[e,t%e];return t}r.d(e,{A:()=>s})},4304:(t,e,r)=>{"use strict";r.d(e,{A:()=>n});var s=r(54810),i=r.n(s);function n(t){return t<=0?1:Math.pow(2,Math.ceil(i()(t)))}},42577:(t,e,r)=>{"use strict";r.d(e,{A:()=>n});var s=r(49859);class i extends EventTarget{constructor(...t){super(...t),(0,s.A)(this,"peer",void 0),(0,s.A)(this,"onmessage",void 0),(0,s.A)(this,"onmessageerror",void 0)}postMessage(t,e){var r;null!==(r=this.peer)&&void 0!==r&&r.onmessage&&this.peer.onmessage({data:t})}close(){this.peer=null}start(){}}class n{constructor(){(0,s.A)(this,"port1",void 0),(0,s.A)(this,"port2",void 0),this.port1=new i,this.port2=new i,this.port1.peer=this.port2,this.port2.peer=this.port1}}},84149:(t,e,r)=>{"use strict";r.d(e,{Ay:()=>g,S3:()=>m,Wo:()=>p});var s=r(49859),i=r(94870),n=r.n(i),a=r(74707),o=r.n(a),c=r(61240),u=r.n(c),h=r(86226),d=r.n(h),l=r(96172),f=r(34677);const p="notify",m="request";class g extends l.A{constructor(t){var e;super(!0),(0,s.A)(this,"port",void 0),(0,s.A)(this,"requestMap",void 0),(0,s.A)(this,"seq",void 0),(0,s.A)(this,"closed",void 0),this.port=t,this.port.onmessage=n()(e=this.handle).call(e,this),this.seq=0,this.requestMap=new(o()),this.port.start(),this.closed=!1}handle(t){const e=t.data,r=e.type,s=e.data;if("notify"===r)this.fire(p,s);else if("reply"===r){const t=this.requestMap.get(s.seq);t&&((0,f.A)(s.result)?t.resolve(s.result):s.error?t.reject(s.error):t.resolve(void 0),this.requestMap.delete(s.seq))}else"request"===r&&this.fire(m,s)}notify(t,e={},r=[]){this.port.postMessage({type:"notify",data:{method:t,params:e}},r)}async request(t,e={},r=[]){return new(u())(((s,i)=>{const n=this.seq++;this.requestMap.set(n,{resolve:s,reject:i}),this.port.postMessage({type:"request",data:{seq:n,method:t,params:e}},r)}))}reply(t,e,r,s=[]){const i={seq:t.seq};(0,f.A)(e)?i.result=e:r&&(i.error=r),null!=s&&s.length?this.port.postMessage({type:"reply",data:i},s):this.port.postMessage({type:"reply",data:i})}getPort(){return this.port}destroy(){var t;this.requestMap.size&&(d()(t=this.requestMap).call(t,(t=>{t.reject("ipc port close")})),this.requestMap.clear()),this.port&&(this.port.close(),this.port=null),this.closed=!0}}},55013:(t,e,r)=>{"use strict";r(94870),r(84149).Ay},6253:(t,e,r)=>{"use strict";r.d(e,{A:()=>p});var s=r(49859),i=r(56255),n=r.n(i),a=r(39638),o=r(86932),c=r(47222),u=r(78995);let h,d=0;function l(){return h?(d++,h):(h=new c.A,d=1,h)}function f(){0!==d&&(d--,0===d&&(h.destroy(),h=null))}class p{constructor(t,e=!0,r=!1){(0,s.A)(this,"messageChannel",void 0),(0,s.A)(this,"interval",void 0),(0,s.A)(this,"started",void 0),(0,s.A)(this,"timer",void 0),(0,s.A)(this,"workerTimer",void 0),(0,s.A)(this,"workerSetTimeout",void 0),(0,s.A)(this,"onClock",void 0),(0,s.A)(this,"nextTick",void 0),(0,s.A)(this,"a",void 0),(0,s.A)(this,"b",void 0),(0,s.A)(this,"beta",void 0),(0,s.A)(this,"alpha",void 0),(0,s.A)(this,"count",void 0),(0,s.A)(this,"equivalent",void 0),(0,s.A)(this,"timestamp",void 0),(0,s.A)(this,"onVisibilityChange",void 0),(0,s.A)(this,"timeoutNext",void 0),(0,s.A)(this,"running",void 0),(0,s.A)(this,"highPerformance",void 0),(0,s.A)(this,"forceWorker",void 0),this.started=!1,this.interval=t,this.highPerformance=e,this.forceWorker=r,this.a=.2,this.b=4,this.equivalent=50,this.timestamp=0,this.nextTick=()=>{if(this.started&&!this.running)if(this.running=!0,this.interval>=4||!this.highPerformance)this.timeoutTick();else if(this.interval<=0)this.messageChannel.port1.postMessage(null);else{const t=(0,o.A)();t-this.timestamp>this.equivalent&&(this.count=0,this.timestamp=t),this.count<this.beta?this.messageChannel.port1.postMessage(null):this.timeoutTick()}},this.compute(),this.messageChannel=new MessageChannel,this.handleEvent(),this.timeoutNext=t=>{t?this.workerTimer=null:this.timer=null,this.running=!1,this.count++,this.onClock?this.onClock(this.nextTick):this.nextTick()},(0,a.A)()||"hidden"!==document.visibilityState||(this.workerSetTimeout=l()),this.running=!1}compute(t=!0){this.interval>0&&(this.beta=Math.ceil(this.equivalent*(1-this.b/this.interval)/(this.a-this.b)),this.alpha=Math.floor(this.equivalent/this.interval-this.beta),t&&(this.count=0))}timeoutTick(){this.workerSetTimeout&&"hidden"===document.visibilityState&&(this.interval<1e3||this.forceWorker)?this.workerTimer=this.workerSetTimeout.setTimeout(this.timeoutNext,this.interval):this.timer=n()(this.timeoutNext,this.interval)}start(){this.started||(this.started=!0,this.timestamp=(0,o.A)(),this.nextTick())}stop(){this.started=!1,this.timer&&(clearTimeout(this.timer),this.timer=null),this.workerTimer&&this.workerSetTimeout&&this.workerSetTimeout.clearTimeout(this.workerTimer),this.running=!1}isStarted(){return this.started}setInterval(t){this.interval=Math.max(t,0),this.compute()}getInterval(){return this.interval}isZeroTimeout(){return this.interval<4}destroy(){this.stop(),this.workerSetTimeout&&(f(),this.workerSetTimeout=null),this.onVisibilityChange&&(document.removeEventListener("visibilitychange",this.onVisibilityChange),this.onVisibilityChange=null)}handleEvent(){this.messageChannel.port2.onmessage=()=>{this.started&&(this.running=!1,this.count++,this.onClock?this.onClock(this.nextTick):this.nextTick())},(0,a.A)()||(this.onVisibilityChange=(0,u.A)((t=>{"hidden"===document.visibilityState?(this.workerSetTimeout=l(),this.timer&&(clearTimeout(this.timer),this.timer=null,this.running=!1),this.nextTick()):(this.workerTimer&&(this.workerSetTimeout.clearTimeout(this.workerTimer),this.workerTimer=null,this.running=!1),this.timer&&(clearTimeout(this.timer),this.timer=null,this.running=!1),f(),this.workerSetTimeout=null,this.nextTick())}),20),document.addEventListener("visibilitychange",this.onVisibilityChange))}}},39148:(t,e,r)=>{"use strict";r.d(e,{A:()=>h});var s=r(49859),i=r(56255),n=r.n(i),a=r(61240),o=r.n(a),c=r(6253),u=r(86932);class h{constructor(t,e=0,r=0,i=!0,n=!0){(0,s.A)(this,"task",void 0),(0,s.A)(this,"count",void 0),(0,s.A)(this,"emptyCount",void 0),(0,s.A)(this,"started",void 0),(0,s.A)(this,"clock",void 0),(0,s.A)(this,"timestamp",void 0),(0,s.A)(this,"timeout",void 0),(0,s.A)(this,"interval",void 0),(0,s.A)(this,"startTimer",void 0),(0,s.A)(this,"autoInterval",void 0),(0,s.A)(this,"sync",void 0),(0,s.A)(this,"tickAfter",void 0),(0,s.A)(this,"processing",void 0),this.task=t,this.timeout=e,this.interval=r,this.autoInterval=i,this.sync=n,this.count=0,this.emptyCount=0,this.timestamp=0,this.started=!1,this.processing=!1,this.clock=new c.A(this.interval),this.clock.onClock=t=>{if(this.started)if(this.count++,this.sync)this.tickAfter&&(this.tickAfter(),this.tickAfter=null),!1===this.task()?this.stop():this.next(t);else{if(this.processing)return;this.processing=!0,this.task().then((e=>{this.processing=!1,this.tickAfter&&(this.tickAfter(),this.tickAfter=null),!1===e?this.stop():this.next(t)}))}}}next(t){if(!this.started)return;const e=(0,u.A)();if(this.autoInterval&&e-this.timestamp>50){const t=this.emptyCount/this.count;0===this.emptyCount?this.clock.setInterval(Math.max(this.clock.getInterval()>>1,this.interval)):t<.1?this.clock.setInterval(this.clock.getInterval()-1):t>.2?this.clock.setInterval(Math.min(this.clock.getInterval()+1,20)):t>.5&&this.clock.setInterval(this.clock.getInterval()<<1),this.count=0,this.emptyCount=0,this.timestamp=e}t()}start(){this.started=!0,this.timeout?this.startTimer=n()((()=>{this.count=0,this.emptyCount=0,this.timestamp=(0,u.A)(),this.clock.start(),this.startTimer=null}),this.timeout):(this.count=0,this.emptyCount=0,this.timestamp=(0,u.A)(),this.clock.start())}stop(){this.started=!1,this.processing=!1,this.startTimer&&(clearTimeout(this.startTimer),this.startTimer=null),this.clock.stop()}async stopBeforeNextTick(){if(this.startTimer&&(clearTimeout(this.startTimer),this.startTimer=null),this.clock.isStarted())return this.sync?(this.started=!1,this.processing=!1,void this.clock.stop()):new(o())((t=>{this.tickAfter=()=>{this.started=!1,this.processing=!1,this.clock.stop(),t()}}))}isStarted(){return this.started}emptyTask(){this.emptyCount++}isZeroTimeout(){var t;return null===(t=this.clock)||void 0===t?void 0:t.isZeroTimeout()}restart(){this.clock&&(this.stop(),this.clock.setInterval(this.interval),this.start())}resetInterval(){this.clock.setInterval(Math.max(this.clock.getInterval()>>1,this.interval)),this.emptyCount=0,this.count=0,this.timestamp=(0,u.A)()}destroy(){this.stop(),this.task=null,this.timeout=null,this.interval=null}}},13724:(t,e,r)=>{"use strict";r.d(e,{A:()=>c});var s=r(49859),i=r(29550),n=r.n(i),a=r(56255),o=r.n(a);class c{constructor(t){(0,s.A)(this,"timeout",void 0),(0,s.A)(this,"timer",void 0),(0,s.A)(this,"resolve",void 0),(0,s.A)(this,"reject",void 0),(0,s.A)(this,"startTime",void 0),this.timeout=t}then(t,e){this.resolve=t,this.reject=e,this.startTime=n()(),this.timer=o()((()=>{this.resolve(n()()-this.startTime),this.timer=null}),1e3*this.timeout)}stop(t=!0){this.timer&&(clearTimeout(this.timer),this.timer=null,this.resolve&&t?this.resolve(n()()-this.startTime):this.reject&&!t&&this.reject(n()()-this.startTime))}reset(t){t&&(this.timeout=t),this.timer&&(clearTimeout(this.timer),this.timer=o()((()=>{this.resolve(n()()-this.startTime),this.timer=null}),1e3*this.timeout))}}},54058:(t,e,r)=>{"use strict";r.d(e,{A:()=>a});var s=r(49859),i=r(56255),n=r.n(i);class a{constructor(t,e,r){(0,s.A)(this,"task",void 0),(0,s.A)(this,"timeout",void 0),(0,s.A)(this,"interval",void 0),(0,s.A)(this,"timer",void 0),this.task=t,this.timeout=e,this.interval=r}start(){const t=this;t.stop();let e=t.timeout;const r=t.interval,s=function(){!1!==t.task()&&t.timer?t.timer=n()(s,t.interval):t.stop()};null==e&&(e=r),t.timer=n()(s,e)}stop(){this.timer&&(clearTimeout(this.timer),this.timer=null)}updateInterval(t){this.interval=t}isStarted(){return!!this.timer}destroy(){this.stop(),this.task=this.timeout=this.interval=null}}},47222:(t,e,r)=>{"use strict";r.d(e,{A:()=>d});var s=r(49859),i=r(56255),n=r.n(i),a=r(74707),o=r.n(a),c=r(96984),u=r.n(c);function h(t){t.addEventListener("message",(e=>{var r;let s=e.data.data;n()((()=>{t.postMessage({type:"pong",id:s.id})}),Math.max(null!==(r=s.timeout)&&void 0!==r?r:0,4))}))}class d{constructor(){(0,s.A)(this,"worker",void 0),(0,s.A)(this,"workerUrl",void 0),(0,s.A)(this,"taskMap",void 0),(0,s.A)(this,"id",void 0),this.id=0,this.taskMap=new(o());const t=`\n      ${h.toString()}\n      ${h.name}(self)\n    `,e=new Blob([t],{type:"text/javascript"});this.workerUrl=u().createObjectURL(e),this.worker=new Worker(this.workerUrl),this.worker.addEventListener("message",(t=>{const e=t.data,r=e.type,s=e.id;if("pong"===r){const t=this.taskMap.get(s);t&&t(!0)}}))}setTimeout(t,e=0){const r=this.id++;return this.taskMap.set(r,t),this.worker.postMessage({type:"ping",data:{timeout:e,id:r}}),r}clearTimeout(t){this.taskMap.delete(t)}destroy(){this.worker&&(this.worker.terminate(),this.worker=null),this.workerUrl&&(u().revokeObjectURL(this.workerUrl),this.workerUrl=null),this.taskMap&&(this.taskMap.clear(),this.taskMap=null)}}},72739:(t,e,r)=>{"use strict";r.d(e,{$r:()=>m,El:()=>g,FB:()=>A,TF:()=>f,VC:()=>l,_:()=>v,__:()=>h,zy:()=>p});var s=r(385),i=r.n(s),n=r(18979),a=r.n(n),o=r(67672),c=r(10576),u=r(56401);function h(t,e,r){if(!t)return;const{length:s}=t;if(s)if(r)for(let r=s-1;r>=0&&e(t[r],r)!==c.W8;r--);else for(let r=0;r<s&&e(t[r],r)!==c.W8;r++);}function d(t,e){t[t.length]=e}function l(t,e){!function(t,e,r){o.YO(e)?h(e,(function(e){r(t,e)})):r(t,e)}(t,e,d)}function f(t,e,r){let s=0;return h(t,(function(n,a){(r===c.W8?n==e:n===e)&&(i()(t).call(t,a,1),s++)}),c.rT),s}function p(t,e,r){return function(t,e,r){let s=c.Cy;return h(t,(function(t,i){if(r===c.W8?t==e:t===e)return s=i,c.W8})),s}(t,e,r)>=0}function m(t){return o.YO(t)?t:(0,u.A)(a()(c.Ml),t)}function g(t,e){let r=0,s=t.length-1,i=-1;for(;r<=s;){let n=(r+s)/2>>>0;const a=e(t[n]);if(0===a){i=n;break}1===a?r=n+1:(s=n-1,i=n)}return i}function v(t,e,r){const s=g(t,r);s>-1?i()(t).call(t,s,0,e):t.push(e)}function A(t,e){if(t===e)return!0;if(!t||!e)return!1;if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}},90932:(t,e,r)=>{"use strict";r.d(e,{l:()=>i}),r(64007);const s="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567";function i(t,e=!0){const r=t.length;let i=0,n=0,a="";for(let e=0;e<r;e++)for(n=n<<8|t[e],i+=8;i>=5;)a+=s[n>>>i-5&31],i-=5;if(i>0&&(a+=s[n<<5-i&31]),e)for(;a.length%8!=0;)a+="=";return a}},4919:(t,e,r)=>{"use strict";r.d(e,{E_:()=>o});var s=r(64007),i=r.n(s),n=r(72739);const a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function o(t){const e="function"==typeof atob?atob(t):function(t){function e(t){const e=i()(a).call(a,t);return-1===e?0:e}let r="";for(let s=0;s<t.length;){const i=e(t[s++]),n=e(t[s++]),a=e(t[s++]),o=e(t[s++]),c=i<<2|n>>4,u=(15&n)<<4|a>>2,h=(3&a)<<6|o;r+=String.fromCharCode(c),64!==a&&(r+=String.fromCharCode(u)),64!==o&&(r+=String.fromCharCode(h))}return r}(t),r=new Uint8Array(e.length);for(let t=0;t<e.length;t++)r[t]=e.charCodeAt(t);return r}const c={};n.__(["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"],((t,e)=>{c[t]=e}))},43607:(t,e,r)=>{"use strict";function s(t){return t>0?t:-t}function i(t,e){return t>e?t:e}function n(t,e){return t>e?e:t}r.d(e,{T9:()=>i,jk:()=>n,tn:()=>s})},86834:(t,e,r)=>{"use strict";r.d(e,{A:()=>p});var s=r(36586),i=r.n(s),n=r(72739),a=r(67672),o=r(84504),c=r(44690);function u(t){return a.Yj(t)&&t.split(".").shift()||""}const h=[["alipay",/alipay/],["wechat",/micromessenger/],["dingtalk",/dingtalk[ \/]([\d_.]+)/],["baiduApp",/baiduboxapp/],["baidu",/baidubrowser/],["baidu",/bdbrowser/],["uc",/ucbrowser/],["uc",/ucweb/],["qq",/qqbrowser/],["qqApp",/qq/],["ie",/iemobile[ \/]([\d_.]+)/],["ie",/msie[ \/]([\d_.]+)/],["ie",/trident[ \/]([\d_.]+)/,4],["edge",/edge[ \/]([\d_.]+)/],["newEdge",/edg[ \/]([\d_.]+)/],["chrome",/chrome[ \/]([\d_.]+)/],["firefox",/firefox[ \/]([\d_.]+)/],["opera",/opera(?:.*version)?[ \/]([\d_.]+)/],["safari",/version[ \/]([\d_.]+) safari/],["safari",/version[ \/]([\d_.]+) \S* safari/],["safari",/safari/]],d={},l={},f=function(t){let e,r;return(0,n.__)(h,(s=>{let n=s[1].exec(t);if(n)return e=s[0],r=n[1],r&&(r=r.replace(/_/g,"."),s[2]&&(r=i()(r,10)+s[2]+".0")),!1})),"safari"!==e||r||(r=c.A.version),{name:e||"",version:r||"",majorVersion:(d[e]||u)(r),checkVersion:l[e]||o.A}}(("object"==typeof navigator&&navigator.userAgent||"").toLowerCase());f.name&&(f[f.name]=!0);const p=f},10576:(t,e,r)=>{"use strict";r.d(e,{Cq:()=>u,Cy:()=>d,M_:()=>g,Ml:()=>w,TK:()=>v,W8:()=>c,ZG:()=>p,ZH:()=>h,aV:()=>l,rT:()=>o,s0:()=>f,u1:()=>y,x7:()=>A});var s=r(72601),i=r.n(s),n=r(94474),a=r.n(n);const o=!0,c=!1,u=null,h=void 0,d=-1,l="undefined",f="function",p=".",m=typeof window!==l?window:h,g=(typeof document!==l&&document,typeof i()!==l?i():typeof r.g!==l?r.g:m),v=typeof self!==l?self:g,A=function(){},w=(a()({}),a()([])),y=""},67672:(t,e,r)=>{"use strict";r.d(e,{Ik:()=>h,Pc:()=>c,YO:()=>u,Yj:()=>d,ai:()=>l,o:()=>f,sH:()=>m,sv:()=>g,zM:()=>p});var s=r(66615),i=r.n(s),n=r(43981),a=r.n(n),o=r(10576);function c(t){return typeof t===o.s0}function u(t){return i()(t)}function h(t){return t!==o.Cq&&"object"==typeof t}function d(t){return"string"==typeof t}function l(t){return"number"==typeof t&&!isNaN(t)}function f(t){return"bigint"==typeof t}function p(t){return"boolean"==typeof t}function m(t){return l(t)||d(t)&&!isNaN(a()(t))&&isFinite(+t)}function g(t){return t instanceof ArrayBuffer}},10534:(t,e,r)=>{"use strict";r.d(e,{__:()=>n}),r(20525);var s=r(10576);const i={};function n(t,e){const r=i.hasOwnProperty(t)?i[t]:i[t]=t.split(s.ZG);for(let t=0,i=r.length-1;t<=i&&e(r[t],t===i)!==s.W8;t++);}},4624:(t,e,r)=>{"use strict";r.d(e,{R8:()=>y,V$:()=>v,Yz:()=>A,h2:()=>k,pq:()=>w,rD:()=>o,z3:()=>b});var s=r(10576),i=r(62100);const n=0,a=1,o=2,c=3,u=4,h=5,d=typeof console!==s.aV?console:s.Cq,l=/common/.test((0,i.A)(s.x7))?o:c,f=d?function(t,e){d.log(t,e)}:s.x7,p=d?function(t,e){d.warn(t,e)}:s.x7,m=d?function(t,e){d.error(t,e)}:s.x7;function g(){if(s.M_){const t=s.TK.COMMON_LOG_LEVEL;if(t>=n&&t<=h)return t}return l}function v(t){s.TK.COMMON_LOG_LEVEL=t}function A(t,e,r){g()<=a&&f(`[${arguments[1]}][line ${arguments[2]}] [debug]`,t)}function w(t,e,r){g()<=o&&f(`[${arguments[1]}][line ${arguments[2]}] [info]`,t)}function y(t,e,r){g()<=c&&p(`[${arguments[1]}][line ${arguments[2]}] [warn]`,t)}function b(t,e,r){g()<=u&&m(`[${arguments[1]}][line ${arguments[2]}] [error]`,t)}function k(t,e,r){if(g()<=h)throw b(t,e,r),new Error(`[${arguments[1]}][line ${arguments[2]}] [fatal]: ${t}`)}},95335:(t,e,r)=>{"use strict";r.d(e,{BE:()=>v,C:()=>m,HP:()=>d,X$:()=>p,__:()=>l,zy:()=>g});var s=r(50697),i=r.n(s),n=(r(129),r(18979)),a=r.n(n),o=r(67672),c=r(72739),u=r(10576),h=(r(10534),r(34677));function d(t){return(0,h.A)(t)?i()(t):[]}function l(t,e){for(let r in t)if(e(t[r],r)===u.W8)break}function f(t,e){return o.Ik(t)?o.Ik(e)?(l(e,(function(e,r){t[r]=e})),t):t:e}function p(t,e,r){return f(f(t,e),r)}function m(t,e){let r=t;return o.YO(t)?e?(r=[],c.__(t,(function(t,s){r[s]=m(t,e)}))):r=a()(t).call(t):o.Ik(t)&&(r={},l(t,(function(t,s){r[s]=e?m(t,e):t}))),r}function g(t,e){return t[e]!==u.ZH}function v(t){const e={};return l(t,((t,r)=>{e[t]=r})),e}},44690:(t,e,r)=>{"use strict";r.d(e,{A:()=>c});var s=r(64007),i=r.n(s),n=r(72739);const a=[["harmony",/harmonyos ([\d_.]+)/],["harmony",/openharmony ([\d_.]+)/],["iphone",/iphone os ([\d_.]+)/],["ipad",/ipad; cpu os ([\d_.]+)/],["itouch",/itouch; cpu os ([\d_.]+)/],["android",/android ([\d_.]+)/],["wp",/windows phone ([\d_.]+)/],["windows",/windows nt ([\d_.]+)/],["linux",/linux/],["mac",/mac os x ([\d_.]+)/]],o=function(t){let e,r;return(0,n.__)(a,(s=>{let i=s[1].exec(t);if(i)return e=s[0],r=i[1],r&&(r=r.replace(/_/g,".")),!1})),{name:e||"",version:r||"",mobile:i()(t).call(t,"mobile")>-1}}(("object"==typeof navigator&&navigator.userAgent||"").toLowerCase());o.name&&(o[o.name]=!0,{iphone:1,ipad:1,itouch:1}[o.name]&&(o.ios=!0));const c=o},20525:(t,e,r)=>{"use strict";r.d(e,{GP:()=>v,di:()=>p,qh:()=>m,zy:()=>g}),r(11265);var s=r(18979),i=r.n(s),n=r(64007),a=r.n(n),o=(r(56712),r(36586)),c=r.n(o),u=r(5496),h=r.n(u),d=r(67672),l=r(10576),f=r(62100);function p(t,e,r){return d.ai(r)?e===r?l.u1:i()(t).call(t,e,r):i()(t).call(t,e)}function m(t,e,r){return a()(t).call(t,e,r!==l.ZH?r:0)}function g(t,e){return m(t,e)>=0}function v(t,...e){let r=0;const s=e.length;return t.replace(/(%[sdvx%])|(%0(\d)+[dx])/g,(t=>{if(r>=s)return t;const i=e[r++];if(/%0(\d)+[dx]/g.test(t)){const e=c()(t.substring(1));let r="d"===t[t.length-1]?(0,f.A)(Number(i)):Number(i).toString(16);var n;return e>r.length&&(r=h()(n=new Array(e-r.length)).call(n,"0").join("")+r),r}switch(t){case"%%":return"%";case"%s":return String(i);case"%d":return(0,f.A)(Number(i));case"%v":return"";case"%x":return Number(i).toString(16)}return t}))}},95797:(t,e,r)=>{"use strict";r.d(e,{A:()=>u});var s=r(23398),i=r.n(s),n=r(54568),a=r(39638),o=r(86834),c=r(44690);const u=function(){let t="function"==typeof Blob,e="object"==typeof WebAssembly&&"function"==typeof WebAssembly.instantiate,r="function"==typeof fetch,s="object"==typeof document&&document.createElement("canvas"),u=s&&!!s.getContext("webgl"),h="function"==typeof OffscreenCanvas,d="function"==typeof Worker,l="function"==typeof ArrayBuffer,f="object"==typeof Atomics&&"Atomics"===Atomics[i()],p="function"==typeof AudioContext||"function"==typeof webkitAudioContext,m="function"==typeof AudioWorklet,g="function"==typeof VideoDecoder,v="function"==typeof VideoEncoder,A="function"==typeof AudioDecoder,w="function"==typeof AudioEncoder,y="function"==typeof SharedArrayBuffer,b="function"==typeof MediaSource||"function"==typeof ManagedMediaSource,k="function"==typeof Proxy,x=(d||(0,a.A)()||(0,n.A)())&&y&&f&&k,_="function"==typeof WebAssembly.Suspending&&"function"==typeof WebAssembly.promising;(o.A.safari&&!o.A.checkVersion(o.A.majorVersion,"11",!0)||c.A.ios&&!o.A.checkVersion(c.A.version,"11",!0))&&(e=!1),o.A.chrome&&!o.A.checkVersion(o.A.majorVersion,"94",!0)&&(g=!1,A=!1),(o.A.safari&&!o.A.checkVersion(o.A.majorVersion,"17",!0)||c.A.ios&&!o.A.checkVersion(c.A.version,"17",!0))&&(g=!1);let I="object"==typeof navigator&&"object"==typeof navigator.gpu,P="function"==typeof MediaSourceHandle,M=e&&"function"==typeof WebAssembly.Global,S="function"==typeof MediaStreamTrackGenerator;return{browser:o.A,blob:t,wasm:e,fetch:r,webgl:u,worker:d,mse:b,arrayBuffer:l,audioContext:p,audioWorklet:m,videoDecoder:g,videoEncoder:v,audioDecoder:A,audioEncoder:w,atomics:f,shareArrayBuffer:y,thread:x,webgpu:I,offscreenCanvas:h,workerMSE:P,webAssemblyGlobal:M,jspi:_,proxy:k,simd:(o.A.chrome||o.A.newEdge)&&o.A.checkVersion(o.A.majorVersion,"91",!0)||o.A.firefox&&o.A.checkVersion(o.A.majorVersion,"89",!0)||o.A.safari&&o.A.checkVersion(o.A.version,"16.4",!0)||c.A.ios&&o.A.checkVersion(c.A.version,"16.4",!0),wasmPlayerSupported:r&&e&&u&&p&&l&&M,wasmBaseSupported:e&&M&&l,trackGenerator:S}}()},50011:(t,e,r)=>{"use strict";r.r(e),r.d(e,{decode:()=>o,encode:()=>n});const s="function"==typeof TextEncoder?new TextEncoder:null,i="function"==typeof TextDecoder?new TextDecoder:null;function n(t){if(s)return s.encode(t);const e=[];for(let r=0;r<t.length;++r){let s=t.charCodeAt(r);s>=55296&&s<=57343&&(s=65536+((1023&s)<<10)|1023&t.charCodeAt(++r)),s<=127?e.push(s):s<=2047?(e.push(192|s>>6),e.push(128|63&s)):s<=65535?(e.push(224|s>>12),e.push(128|s>>6&63),e.push(128|63&s)):(e.push(240|s>>18),e.push(128|s>>12&63),e.push(128|s>>6&63),e.push(128|63&s))}return new Uint8Array(e)}function a(t){let e="";for(let r=0;r<t.length;){let s=t[r++>>>0];if(!(128&s)){e+=String.fromCharCode(s);continue}let i=63&t[r++>>>0];if(192==(224&s)){e+=String.fromCharCode((31&s)<<6|i);continue}let n=63&t[r++>>>0];if(s=224==(240&s)?(15&s)<<12|i<<6|n:(7&s)<<18|i<<12|n<<6|63&t[r++>>>0],s<65536)e+=String.fromCharCode(s);else{let t=s-65536;e+=String.fromCharCode(55296|t>>10,56320|1023&t)}}return e}function o(t){if(t instanceof Uint8Array&&i&&!("function"==typeof SharedArrayBuffer&&t.buffer instanceof SharedArrayBuffer))try{return i.decode(t)}catch(e){return a(t)}return a(t)}},8507:(t,e,r)=>{"use strict";r.d(e,{ll:()=>v,qg:()=>u}),r(64007);var s=r(11265),i=r.n(s),n=(r(85569),r(57855)),a=r.n(n),o=r(56712),c=r.n(o);function u(t){const e=t,r=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],s=/:\/\/([^\/@]*@?)\[(\S+)\]/;let i="";s.test(t)&&(t=t.replace(s,((t,e,r)=>(i=r,`://${e||""}a.b`))));const n={},a=/^(?:(?![^:@\/]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*)(?::([^:@\/]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(t);let o=14;for(;o--;){var c;n[r[o]]=null!==(c=a[o])&&void 0!==c?c:""}return i&&(n.host=i,n.source=e,n.authority=i+(n.port?":"+n.port:"")),{protocol:n.protocol,file:n.file,host:n.host,port:n.port,user:n.user,password:n.password,origin:`${n.protocol}://${n.authority}`,pathname:n.path,search:`?${n.query}`,hash:n.anchor?`#${n.anchor}`:""}}r(67672),r(6498),r(72739),r(95335);const h=/(?:\/|^)\.(?=\/)/g,d=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,l=/^(?=([^\/?#]*))\1([^]*)$/,f=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/;function p(t){return t.scheme+t.netLoc+t.path+t.params+t.query+t.fragment}function m(t){const e=f.exec(t);return e?{scheme:e[1]||"",netLoc:e[2]||"",path:e[3]||"",params:e[4]||"",query:e[5]||"",fragment:e[6]||""}:null}function g(t){var e,r;for(t=a()(e=t.split("")).call(e).join("").replace(h,"");t.length!==(t=t.replace(d,"")).length;);return a()(r=t.split("")).call(r).join("")}function v(t,e,r){if(r=r||{},t=i()(t).call(t),!(e=i()(e).call(e))){if(!r.alwaysNormalize)return t;let e=m(t);if(!e)throw new Error("Error trying to parse base URL.");return e.path=g(e.path),p(e)}let s=m(e);if(!s)throw new Error("Error trying to parse relative URL.");if(s.scheme)return r.alwaysNormalize?(s.path=g(s.path),p(s)):e;let n=m(t);if(!n)throw new Error("Error trying to parse base URL.");if(!n.netLoc&&n.path&&"/"!==n.path[0]){let t=l.exec(n.path);n.netLoc=t[1],n.path=t[2]}n.netLoc&&!n.path&&(n.path="/");const a={scheme:n.scheme,netLoc:s.netLoc,path:null,params:s.params,query:s.query,fragment:s.fragment};if(!s.netLoc&&(a.netLoc=n.netLoc,"/"!==s.path[0]))if(s.path){let t=n.path,e=t.substring(0,c()(t).call(t,"/")+1)+s.path;a.path=g(e)}else a.path=n.path,s.params||(a.params=n.params,s.query||(a.query=n.query));return null===a.path&&(a.path=r.alwaysNormalize?g(s.path):s.path),p(a)}},88096:(t,e,r)=>{"use strict";r.d(e,{$z:()=>f,GW:()=>c,WP:()=>h,bx:()=>p,p2:()=>d,tt:()=>l});var s=r(729),i=r(31865),n=r(86834),a=r(44690);function o(t){let e=0,r=0;for(;;){const s=t.readUint8();if(e|=(127&s)<<r,r+=7,!(128&s))break}return e}async function c(t){let e=0,r=0;for(;;){const s=await t.readUint8();if(e|=(127&s)<<r,r+=7,!(128&s))break}return e}function u(t){let e,r=0,s=0;for(;e=t.readUint8(),r|=(127&e)<<s,s+=7,128&e;);return 64&e&&(r|=-1<<s),r}async function h(t){let e,r=0,s=0;for(;e=await t.readUint8(),r|=(127&e)<<s,s+=7,128&e;);return 64&e&&(r|=-1<<s),r}function d(t,e){let r=!0;for(;r;){let s=127&e;0==(e>>=7)&&!(64&s)||-1===e&&64&s?r=!1:s|=128,t.writeUint8(s)}}function l(t,e){do{let r=127&e;0!=(e>>=7)&&(r|=128),t.writeUint8(r)}while(0!==e)}async function f(t,e){do{let r=127&e;0!=(e>>=7)&&(r|=128),await t.writeUint8(r)}while(0!==e)}function p(t,e){const r=new i.A(t,!0),c=new s.A(new Uint8Array(t.length+100),!0);for(c.writeBuffer(r.readBuffer(8));r.remainingSize();){const t=r.readUint8();c.writeUint8(t);const i=o(r);if(2===t){const t=new s.A(new Uint8Array(i+100));let h=o(r);for(l(t,h);h--;){const s=o(r);l(t,s),t.writeBuffer(r.readBuffer(s));const i=o(r);l(t,i),t.writeBuffer(r.readBuffer(i));const c=r.readUint8();switch(t.writeUint8(c),c){case 0:l(t,o(r));break;case 3:d(t,u(r)),l(t,o(r));break;case 2:{let s=o(r);e.shared?l(t,2|s):l(t,-3&s);const i=o(r);if(l(t,e.initial||i),1&s){let s=o(r);!e.maximum||a.A.ios&&!n.A.checkVersion(a.A.version,"17",!0)&&e.shared||(s=e.maximum),l(t,s)}break}case 1:{d(t,u(r));const e=o(r);l(t,e),l(t,o(r)),1&e&&l(t,o(r));break}}}const f=t.getWroteBuffer();l(c,f.length),c.writeBuffer(f)}else l(c,i),c.writeBuffer(r.readBuffer(i))}return c.getWroteBuffer()}},49804:(t,e,r)=>{"use strict";r.d(e,{A:()=>o});var s=r(49859),i=r(16030),n=r(4624),a=r(9705);class o{constructor(t){(0,s.A)(this,"scaler",void 0),(0,s.A)(this,"options",void 0),(0,s.A)(this,"inputParameters",void 0),(0,s.A)(this,"outputParameters",void 0),this.options=t,this.scaler=new i.A(this.options.resource)}async open(t,e,r=2,s=1){var i,o,c,u;this.inputParameters=t,this.outputParameters=e,await this.scaler.run(),this.scaler.invoke("scale_set_input_parameters",t.width,t.height,t.format),this.scaler.invoke("scale_set_output_parameters",e.width,e.height,e.format),this.scaler.invoke("scale_set_input_color",null!==(i=t.colorSpace)&&void 0!==i?i:2,null!==(o=t.colorRange)&&void 0!==o?o:0),this.scaler.invoke("scale_set_output_color",null!==(c=e.colorSpace)&&void 0!==c?c:2,null!==(u=e.colorRange)&&void 0!==u?u:0);let h=0;return h=s>1?await this.scaler.invokeAsync("scale_init",r,s):this.scaler.invoke("scale_init",r,s),h<0?(n.z3(`open scaler failed, ret: ${h}`,"src/videoscale/VideoScaler.ts",116),a.nr):0}scale(t,e){return this.scaler.invoke("scale_process",t,e)}close(){this.scaler.invoke("scale_destroy"),this.scaler.destroy()}getInputScaleParameters(){return this.inputParameters}getOutputScaleParameters(){return this.outputParameters}}},49763:(t,e,r)=>{t.exports=r(86450)},66615:(t,e,r)=>{t.exports=r(18402)},29550:(t,e,r)=>{t.exports=r(37867)},94870:(t,e,r)=>{t.exports=r(19709)},11393:(t,e,r)=>{t.exports=r(50530)},50314:(t,e,r)=>{t.exports=r(25619)},5496:(t,e,r)=>{t.exports=r(40587)},96319:(t,e,r)=>{t.exports=r(22616)},26327:(t,e,r)=>{t.exports=r(70228)},71426:(t,e,r)=>{t.exports=r(99617)},52730:(t,e,r)=>{t.exports=r(64055)},86226:(t,e,r)=>{t.exports=r(24525)},8628:(t,e,r)=>{t.exports=r(76343)},64007:(t,e,r)=>{t.exports=r(77852)},15413:(t,e,r)=>{t.exports=r(21618)},56712:(t,e,r)=>{t.exports=r(61785)},48079:(t,e,r)=>{t.exports=r(98894)},73363:(t,e,r)=>{t.exports=r(79528)},78010:(t,e,r)=>{t.exports=r(465)},57855:(t,e,r)=>{t.exports=r(14106)},18979:(t,e,r)=>{t.exports=r(6686)},31721:(t,e,r)=>{t.exports=r(82990)},129:(t,e,r)=>{t.exports=r(81086)},385:(t,e,r)=>{t.exports=r(40026)},11265:(t,e,r)=>{t.exports=r(34598)},85569:(t,e,r)=>{t.exports=r(76660)},74707:(t,e,r)=>{t.exports=r(60075)},54810:(t,e,r)=>{t.exports=r(18801)},53930:(t,e,r)=>{t.exports=r(68251)},94474:(t,e,r)=>{t.exports=r(56609)},7074:(t,e,r)=>{t.exports=r(49261)},50697:(t,e,r)=>{t.exports=r(76490)},12854:(t,e,r)=>{t.exports=r(27777)},43981:(t,e,r)=>{t.exports=r(86462)},36586:(t,e,r)=>{t.exports=r(91921)},61240:(t,e,r)=>{t.exports=r(45204)},7189:(t,e,r)=>{t.exports=r(89270)},56255:(t,e,r)=>{t.exports=r(70568)},16781:(t,e,r)=>{t.exports=r(24139)},23398:(t,e,r)=>{t.exports=r(40071)},96984:(t,e,r)=>{t.exports=r(49792)},72601:(t,e,r)=>{t.exports=r(34444)},17201:(t,e,r)=>{t.exports=r(53042)},23565:(t,e,r)=>{"use strict";var s=r(91960);t.exports=s},41829:(t,e,r)=>{"use strict";var s=r(92222);t.exports=s},26040:(t,e,r)=>{"use strict";var s=r(68251);t.exports=s},57264:(t,e,r)=>{"use strict";var s=r(24139);r(20768),r(8549),r(87152),r(11372),t.exports=s},59692:(t,e,r)=>{"use strict";var s=r(27045);t.exports=s},25663:(t,e,r)=>{"use strict";var s=r(10070);t.exports=s},93607:(t,e,r)=>{"use strict";r(7057),r(57277);var s=r(92046);t.exports=s.Array.from},13531:(t,e,r)=>{"use strict";r(92425);var s=r(92046);t.exports=s.Array.isArray},96275:(t,e,r)=>{"use strict";r(58545);var s=r(61747);t.exports=s("Array","concat")},1280:(t,e,r)=>{"use strict";r(58618);var s=r(61747);t.exports=s("Array","copyWithin")},25366:(t,e,r)=>{"use strict";r(36744);var s=r(61747);t.exports=s("Array","fill")},16177:(t,e,r)=>{"use strict";r(49295);var s=r(61747);t.exports=s("Array","filter")},60285:(t,e,r)=>{"use strict";r(79175);var s=r(61747);t.exports=s("Array","findIndex")},94668:(t,e,r)=>{"use strict";r(6290);var s=r(61747);t.exports=s("Array","find")},22092:(t,e,r)=>{"use strict";r(95650);var s=r(61747);t.exports=s("Array","forEach")},11362:(t,e,r)=>{"use strict";r(19748);var s=r(61747);t.exports=s("Array","includes")},83309:(t,e,r)=>{"use strict";r(66391);var s=r(61747);t.exports=s("Array","indexOf")},86535:(t,e,r)=>{"use strict";r(99363),r(86024);var s=r(61747);t.exports=s("Array","keys")},32342:(t,e,r)=>{"use strict";r(30328);var s=r(61747);t.exports=s("Array","lastIndexOf")},28253:(t,e,r)=>{"use strict";r(6687);var s=r(61747);t.exports=s("Array","map")},16693:(t,e,r)=>{"use strict";r(46339);var s=r(61747);t.exports=s("Array","reduce")},66429:(t,e,r)=>{"use strict";r(48559);var s=r(61747);t.exports=s("Array","reverse")},75265:(t,e,r)=>{"use strict";r(62099);var s=r(61747);t.exports=s("Array","slice")},55939:(t,e,r)=>{"use strict";r(10521);var s=r(61747);t.exports=s("Array","some")},11263:(t,e,r)=>{"use strict";r(26737);var s=r(61747);t.exports=s("Array","sort")},84923:(t,e,r)=>{"use strict";r(35953);var s=r(61747);t.exports=s("Array","splice")},5354:(t,e,r)=>{"use strict";r(95362);var s=r(92046);t.exports=s.Date.now},32567:(t,e,r)=>{"use strict";r(79307);var s=r(61747);t.exports=s("Function","bind")},22671:(t,e,r)=>{"use strict";r(12344),t.exports=r(45951)},23034:(t,e,r)=>{"use strict";var s=r(88280),i=r(32567),n=Function.prototype;t.exports=function(t){var e=t.bind;return t===n||s(n,t)&&e===n.bind?i:e}},45837:(t,e,r)=>{"use strict";var s=r(88280),i=r(96275),n=Array.prototype;t.exports=function(t){var e=t.concat;return t===n||s(n,t)&&e===n.concat?i:e}},44094:(t,e,r)=>{"use strict";var s=r(88280),i=r(1280),n=Array.prototype;t.exports=function(t){var e=t.copyWithin;return t===n||s(n,t)&&e===n.copyWithin?i:e}},22948:(t,e,r)=>{"use strict";var s=r(88280),i=r(25366),n=Array.prototype;t.exports=function(t){var e=t.fill;return t===n||s(n,t)&&e===n.fill?i:e}},33155:(t,e,r)=>{"use strict";var s=r(88280),i=r(16177),n=Array.prototype;t.exports=function(t){var e=t.filter;return t===n||s(n,t)&&e===n.filter?i:e}},9635:(t,e,r)=>{"use strict";var s=r(88280),i=r(60285),n=Array.prototype;t.exports=function(t){var e=t.findIndex;return t===n||s(n,t)&&e===n.findIndex?i:e}},63246:(t,e,r)=>{"use strict";var s=r(88280),i=r(94668),n=Array.prototype;t.exports=function(t){var e=t.find;return t===n||s(n,t)&&e===n.find?i:e}},60974:(t,e,r)=>{"use strict";var s=r(88280),i=r(48804),n=RegExp.prototype;t.exports=function(t){return t===n||s(n,t)?i(t):t.flags}},36880:(t,e,r)=>{"use strict";var s=r(88280),i=r(11362),n=r(44378),a=Array.prototype,o=String.prototype;t.exports=function(t){var e=t.includes;return t===a||s(a,t)&&e===a.includes?i:"string"==typeof t||t===o||s(o,t)&&e===o.includes?n:e}},44507:(t,e,r)=>{"use strict";var s=r(88280),i=r(83309),n=Array.prototype;t.exports=function(t){var e=t.indexOf;return t===n||s(n,t)&&e===n.indexOf?i:e}},12860:(t,e,r)=>{"use strict";var s=r(88280),i=r(32342),n=Array.prototype;t.exports=function(t){var e=t.lastIndexOf;return t===n||s(n,t)&&e===n.lastIndexOf?i:e}},39299:(t,e,r)=>{"use strict";var s=r(88280),i=r(28253),n=Array.prototype;t.exports=function(t){var e=t.map;return t===n||s(n,t)&&e===n.map?i:e}},28823:(t,e,r)=>{"use strict";var s=r(88280),i=r(16693),n=Array.prototype;t.exports=function(t){var e=t.reduce;return t===n||s(n,t)&&e===n.reduce?i:e}},7766:(t,e,r)=>{"use strict";var s=r(88280),i=r(69008),n=String.prototype;t.exports=function(t){var e=t.repeat;return"string"==typeof t||t===n||s(n,t)&&e===n.repeat?i:e}},86823:(t,e,r)=>{"use strict";var s=r(88280),i=r(52017),n=String.prototype;t.exports=function(t){var e=t.replaceAll;return"string"==typeof t||t===n||s(n,t)&&e===n.replaceAll?i:e}},98059:(t,e,r)=>{"use strict";var s=r(88280),i=r(66429),n=Array.prototype;t.exports=function(t){var e=t.reverse;return t===n||s(n,t)&&e===n.reverse?i:e}},40303:(t,e,r)=>{"use strict";var s=r(88280),i=r(75265),n=Array.prototype;t.exports=function(t){var e=t.slice;return t===n||s(n,t)&&e===n.slice?i:e}},69685:(t,e,r)=>{"use strict";var s=r(88280),i=r(55939),n=Array.prototype;t.exports=function(t){var e=t.some;return t===n||s(n,t)&&e===n.some?i:e}},12757:(t,e,r)=>{"use strict";var s=r(88280),i=r(11263),n=Array.prototype;t.exports=function(t){var e=t.sort;return t===n||s(n,t)&&e===n.sort?i:e}},95029:(t,e,r)=>{"use strict";var s=r(88280),i=r(84923),n=Array.prototype;t.exports=function(t){var e=t.splice;return t===n||s(n,t)&&e===n.splice?i:e}},8661:(t,e,r)=>{"use strict";var s=r(88280),i=r(77511),n=String.prototype;t.exports=function(t){var e=t.trim;return"string"==typeof t||t===n||s(n,t)&&e===n.trim?i:e}},10317:(t,e,r)=>{"use strict";r(56648),r(49721);var s=r(92046),i=r(76024);s.JSON||(s.JSON={stringify:JSON.stringify}),t.exports=function(t,e,r){return i(s.JSON.stringify,null,arguments)}},99968:(t,e,r)=>{"use strict";r(99363),r(14676),r(96835),r(86024),r(7057);var s=r(92046);t.exports=s.Map},1206:(t,e,r)=>{"use strict";r(73066);var s=r(92046);t.exports=s.Math.log2},21926:(t,e,r)=>{"use strict";r(46750);var s=r(92046).Object,i=t.exports=function(t,e,r){return s.defineProperty(t,e,r)};s.defineProperty.sham&&(i.sham=!0)},12118:(t,e,r)=>{"use strict";r(26750);var s=r(92046);t.exports=s.Object.freeze},56286:(t,e,r)=>{"use strict";r(38966);var s=r(92046);t.exports=s.Object.getPrototypeOf},19661:(t,e,r)=>{"use strict";r(83589);var s=r(92046);t.exports=s.Object.keys},61418:(t,e,r)=>{"use strict";r(91906);var s=r(92046);t.exports=s.Object.setPrototypeOf},99929:(t,e,r)=>{"use strict";r(9502);var s=r(92046);t.exports=s.parseFloat},84326:(t,e,r)=>{"use strict";r(42193);var s=r(92046);t.exports=s.parseInt},97027:(t,e,r)=>{"use strict";r(64502),r(99363),r(86024),r(65931),r(57450),r(36415),r(37380),r(25823),r(47714),r(7057);var s=r(92046);t.exports=s.Promise},48804:(t,e,r)=>{"use strict";r(9164);var s=r(40663);t.exports=s},44378:(t,e,r)=>{"use strict";r(19770);var s=r(61747);t.exports=s("String","includes")},69008:(t,e,r)=>{"use strict";r(8592);var s=r(61747);t.exports=s("String","repeat")},52017:(t,e,r)=>{"use strict";r(51398),r(21995),r(50929);var s=r(61747);t.exports=s("String","replaceAll")},77511:(t,e,r)=>{"use strict";r(50727);var s=r(61747);t.exports=s("String","trim")},83842:(t,e,r)=>{"use strict";r(58545),r(86024),r(94452),r(65546),r(3997),r(75084),r(32499),r(2596),r(5721),r(44954),r(44123),r(73377),r(72230),r(15344),r(51660),r(4610),r(33669),r(44810),r(93325),r(87024),r(38172),r(85205);var s=r(92046);t.exports=s.Symbol},1730:(t,e,r)=>{"use strict";r(99363),r(86024),r(7057),r(44954);var s=r(80560);t.exports=s.f("iterator")},31661:(t,e,r)=>{"use strict";r(98537),r(33669);var s=r(80560);t.exports=s.f("toPrimitive")},17458:(t,e,r)=>{"use strict";r(87024),r(38172),r(86024),r(85205),r(44810);var s=r(80560);t.exports=s.f("toStringTag")},34444:(t,e,r)=>{"use strict";t.exports=r(50214)},53042:(t,e,r)=>{"use strict";t.exports=r(49604)},50214:(t,e,r)=>{"use strict";r(60397);var s=r(23565);t.exports=s},49604:(t,e,r)=>{"use strict";r(36038);var s=r(41829);t.exports=s},84997:(t,e,r)=>{"use strict";var s=r(26040);t.exports=s},32321:(t,e,r)=>{"use strict";var s=r(57264);r(13939),r(21785),r(81697),r(84664),r(63422),r(70036),r(28703),r(86878),r(59671),r(50359),t.exports=s},22231:(t,e,r)=>{"use strict";var s=r(59692);t.exports=s},19280:(t,e,r)=>{"use strict";var s=r(25663);t.exports=s},82159:(t,e,r)=>{"use strict";var s=r(62250),i=r(4640),n=TypeError;t.exports=function(t){if(s(t))return t;throw new n(i(t)+" is not a function")}},82235:(t,e,r)=>{"use strict";var s=r(25468),i=r(4640),n=TypeError;t.exports=function(t){if(s(t))return t;throw new n(i(t)+" is not a constructor")}},10043:(t,e,r)=>{"use strict";var s=r(54018),i=String,n=TypeError;t.exports=function(t){if(s(t))return t;throw new n("Can't set "+i(t)+" as a prototype")}},42156:t=>{"use strict";t.exports=function(){}},59596:(t,e,r)=>{"use strict";var s=r(88280),i=TypeError;t.exports=function(t,e){if(s(e,t))return t;throw new i("Incorrect invocation")}},36624:(t,e,r)=>{"use strict";var s=r(46285),i=String,n=TypeError;t.exports=function(t){if(s(t))return t;throw new n(i(t)+" is not an object")}},26375:(t,e,r)=>{"use strict";var s=r(98828);t.exports=s((function(){if("function"==typeof ArrayBuffer){var t=new ArrayBuffer(8);Object.isExtensible(t)&&Object.defineProperty(t,"a",{value:8})}}))},4762:(t,e,r)=>{"use strict";var s=r(39298),i=r(34849),n=r(20575),a=r(74535),o=Math.min;t.exports=[].copyWithin||function(t,e){var r=s(this),c=n(r),u=i(t,c),h=i(e,c),d=arguments.length>2?arguments[2]:void 0,l=o((void 0===d?c:i(d,c))-h,c-u),f=1;for(h<u&&u<h+l&&(f=-1,h+=l-1,u+=l-1);l-- >0;)h in r?r[u]=r[h]:a(r,u),u+=f,h+=f;return r}},29832:(t,e,r)=>{"use strict";var s=r(39298),i=r(34849),n=r(20575);t.exports=function(t){for(var e=s(this),r=n(e),a=arguments.length,o=i(a>1?arguments[1]:void 0,r),c=a>2?arguments[2]:void 0,u=void 0===c?r:i(c,r);u>o;)e[o++]=t;return e}},22914:(t,e,r)=>{"use strict";var s=r(70726).forEach,i=r(77623)("forEach");t.exports=i?[].forEach:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}},11229:(t,e,r)=>{"use strict";var s=r(28311),i=r(13930),n=r(39298),a=r(26818),o=r(37812),c=r(25468),u=r(20575),h=r(5543),d=r(10300),l=r(73448),f=Array;t.exports=function(t){var e=n(t),r=c(this),p=arguments.length,m=p>1?arguments[1]:void 0,g=void 0!==m;g&&(m=s(m,p>2?arguments[2]:void 0));var v,A,w,y,b,k,x=l(e),_=0;if(!x||this===f&&o(x))for(v=u(e),A=r?new this(v):f(v);v>_;_++)k=g?m(e[_],_):e[_],h(A,_,k);else for(A=r?new this:[],b=(y=d(e,x)).next;!(w=i(b,y)).done;_++)k=g?a(y,m,[w.value,_],!0):w.value,h(A,_,k);return A.length=_,A}},74436:(t,e,r)=>{"use strict";var s=r(27374),i=r(34849),n=r(20575),a=function(t){return function(e,r,a){var o=s(e),c=n(o);if(0===c)return!t&&-1;var u,h=i(a,c);if(t&&r!=r){for(;c>h;)if((u=o[h++])!=u)return!0}else for(;c>h;h++)if((t||h in o)&&o[h]===r)return t||h||0;return!t&&-1}};t.exports={includes:a(!0),indexOf:a(!1)}},70726:(t,e,r)=>{"use strict";var s=r(28311),i=r(1907),n=r(16946),a=r(39298),o=r(20575),c=r(56968),u=i([].push),h=function(t){var e=1===t,r=2===t,i=3===t,h=4===t,d=6===t,l=7===t,f=5===t||d;return function(p,m,g,v){for(var A,w,y=a(p),b=n(y),k=o(b),x=s(m,g),_=0,I=v||c,P=e?I(p,k):r||l?I(p,0):void 0;k>_;_++)if((f||_ in b)&&(w=x(A=b[_],_,y),t))if(e)P[_]=w;else if(w)switch(t){case 3:return!0;case 5:return A;case 6:return _;case 2:u(P,A)}else switch(t){case 4:return!1;case 7:u(P,A)}return d?-1:i||h?h:P}};t.exports={forEach:h(0),map:h(1),filter:h(2),some:h(3),every:h(4),find:h(5),findIndex:h(6),filterReject:h(7)}},17144:(t,e,r)=>{"use strict";var s=r(76024),i=r(27374),n=r(65482),a=r(20575),o=r(77623),c=Math.min,u=[].lastIndexOf,h=!!u&&1/[1].lastIndexOf(1,-0)<0,d=o("lastIndexOf"),l=h||!d;t.exports=l?function(t){if(h)return s(u,this,arguments)||0;var e=i(this),r=a(e);if(0===r)return-1;var o=r-1;for(arguments.length>1&&(o=c(o,n(arguments[1]))),o<0&&(o=r+o);o>=0;o--)if(o in e&&e[o]===t)return o||0;return-1}:u},59552:(t,e,r)=>{"use strict";var s=r(98828),i=r(76264),n=r(20798),a=i("species");t.exports=function(t){return n>=51||!s((function(){var e=[];return(e.constructor={})[a]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},77623:(t,e,r)=>{"use strict";var s=r(98828);t.exports=function(t,e){var r=[][t];return!!r&&s((function(){r.call(null,e||function(){return 1},1)}))}},35043:(t,e,r)=>{"use strict";var s=r(82159),i=r(39298),n=r(16946),a=r(20575),o=TypeError,c="Reduce of empty array with no initial value",u=function(t){return function(e,r,u,h){var d=i(e),l=n(d),f=a(d);if(s(r),0===f&&u<2)throw new o(c);var p=t?f-1:0,m=t?-1:1;if(u<2)for(;;){if(p in l){h=l[p],p+=m;break}if(p+=m,t?p<0:f<=p)throw new o(c)}for(;t?p>=0:f>p;p+=m)p in l&&(h=r(h,l[p],p,d));return h}};t.exports={left:u(!1),right:u(!0)}},3130:(t,e,r)=>{"use strict";var s=r(39447),i=r(11793),n=TypeError,a=Object.getOwnPropertyDescriptor,o=s&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}();t.exports=o?function(t,e){if(i(t)&&!a(t,"length").writable)throw new n("Cannot set read only .length");return t.length=e}:function(t,e){return t.length=e}},93427:(t,e,r)=>{"use strict";var s=r(1907);t.exports=s([].slice)},34321:(t,e,r)=>{"use strict";var s=r(93427),i=Math.floor,n=function(t,e){var r=t.length;if(r<8)for(var a,o,c=1;c<r;){for(o=c,a=t[c];o&&e(t[o-1],a)>0;)t[o]=t[--o];o!==c++&&(t[o]=a)}else for(var u=i(r/2),h=n(s(t,0,u),e),d=n(s(t,u),e),l=h.length,f=d.length,p=0,m=0;p<l||m<f;)t[p+m]=p<l&&m<f?e(h[p],d[m])<=0?h[p++]:d[m++]:p<l?h[p++]:d[m++];return t};t.exports=n},64010:(t,e,r)=>{"use strict";var s=r(11793),i=r(25468),n=r(46285),a=r(76264)("species"),o=Array;t.exports=function(t){var e;return s(t)&&(e=t.constructor,(i(e)&&(e===o||s(e.prototype))||n(e)&&null===(e=e[a]))&&(e=void 0)),void 0===e?o:e}},56968:(t,e,r)=>{"use strict";var s=r(64010);t.exports=function(t,e){return new(s(t))(0===e?0:e)}},26818:(t,e,r)=>{"use strict";var s=r(36624),i=r(40154);t.exports=function(t,e,r,n){try{return n?e(s(r)[0],r[1]):e(r)}catch(e){i(t,"throw",e)}}},62222:t=>{"use strict";t.exports=function(t,e){return 1===e?function(e,r){return e[t](r)}:function(e,r,s){return e[t](r,s)}}},70473:(t,e,r)=>{"use strict";var s=r(76264)("iterator"),i=!1;try{var n=0,a={next:function(){return{done:!!n++}},return:function(){i=!0}};a[s]=function(){return this},Array.from(a,(function(){throw 2}))}catch(t){}t.exports=function(t,e){try{if(!e&&!i)return!1}catch(t){return!1}var r=!1;try{var n={};n[s]=function(){return{next:function(){return{done:r=!0}}}},t(n)}catch(t){}return r}},45807:(t,e,r)=>{"use strict";var s=r(1907),i=s({}.toString),n=s("".slice);t.exports=function(t){return n(i(t),8,-1)}},73948:(t,e,r)=>{"use strict";var s=r(52623),i=r(62250),n=r(45807),a=r(76264)("toStringTag"),o=Object,c="Arguments"===n(function(){return arguments}());t.exports=s?n:function(t){var e,r,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,e){try{return t[e]}catch(t){}}(e=o(t),a))?r:c?n(e):"Object"===(s=n(e))&&i(e.callee)?"Arguments":s}},30217:(t,e,r)=>{"use strict";var s=r(58075),i=r(89251),n=r(12802),a=r(28311),o=r(59596),c=r(87136),u=r(24823),h=r(60183),d=r(59550),l=r(47118),f=r(39447),p=r(61548).fastKey,m=r(64932),g=m.set,v=m.getterFor;t.exports={getConstructor:function(t,e,r,h){var d=t((function(t,i){o(t,l),g(t,{type:e,index:s(null),first:null,last:null,size:0}),f||(t.size=0),c(i)||u(i,t[h],{that:t,AS_ENTRIES:r})})),l=d.prototype,m=v(e),A=function(t,e,r){var s,i,n=m(t),a=w(t,e);return a?a.value=r:(n.last=a={index:i=p(e,!0),key:e,value:r,previous:s=n.last,next:null,removed:!1},n.first||(n.first=a),s&&(s.next=a),f?n.size++:t.size++,"F"!==i&&(n.index[i]=a)),t},w=function(t,e){var r,s=m(t),i=p(e);if("F"!==i)return s.index[i];for(r=s.first;r;r=r.next)if(r.key===e)return r};return n(l,{clear:function(){for(var t=m(this),e=t.first;e;)e.removed=!0,e.previous&&(e.previous=e.previous.next=null),e=e.next;t.first=t.last=null,t.index=s(null),f?t.size=0:this.size=0},delete:function(t){var e=this,r=m(e),s=w(e,t);if(s){var i=s.next,n=s.previous;delete r.index[s.index],s.removed=!0,n&&(n.next=i),i&&(i.previous=n),r.first===s&&(r.first=i),r.last===s&&(r.last=n),f?r.size--:e.size--}return!!s},forEach:function(t){for(var e,r=m(this),s=a(t,arguments.length>1?arguments[1]:void 0);e=e?e.next:r.first;)for(s(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!w(this,t)}}),n(l,r?{get:function(t){var e=w(this,t);return e&&e.value},set:function(t,e){return A(this,0===t?0:t,e)}}:{add:function(t){return A(this,t=0===t?0:t,t)}}),f&&i(l,"size",{configurable:!0,get:function(){return m(this).size}}),d},setStrong:function(t,e,r){var s=e+" Iterator",i=v(e),n=v(s);h(t,e,(function(t,e){g(this,{type:s,target:t,state:i(t),kind:e,last:null})}),(function(){for(var t=n(this),e=t.kind,r=t.last;r&&r.removed;)r=r.previous;return t.target&&(t.last=r=r?r.next:t.state.first)?d("keys"===e?r.key:"values"===e?r.value:[r.key,r.value],!1):(t.target=null,d(void 0,!0))}),r?"entries":"values",!r,!0),l(e)}}},17081:(t,e,r)=>{"use strict";var s=r(11091),i=r(45951),n=r(61548),a=r(98828),o=r(61626),c=r(24823),u=r(59596),h=r(62250),d=r(46285),l=r(87136),f=r(14840),p=r(74284).f,m=r(70726).forEach,g=r(39447),v=r(64932),A=v.set,w=v.getterFor;t.exports=function(t,e,r){var v,y=-1!==t.indexOf("Map"),b=-1!==t.indexOf("Weak"),k=y?"set":"add",x=i[t],_=x&&x.prototype,I={};if(g&&h(x)&&(b||_.forEach&&!a((function(){(new x).entries().next()})))){var P=(v=e((function(e,r){A(u(e,P),{type:t,collection:new x}),l(r)||c(r,e[k],{that:e,AS_ENTRIES:y})}))).prototype,M=w(t);m(["add","clear","delete","forEach","get","has","set","keys","values","entries"],(function(t){var e="add"===t||"set"===t;!(t in _)||b&&"clear"===t||o(P,t,(function(r,s){var i=M(this).collection;if(!e&&b&&!d(r))return"get"===t&&void 0;var n=i[t](0===r?0:r,s);return e?this:n}))})),b||p(P,"size",{configurable:!0,get:function(){return M(this).collection.size}})}else v=r.getConstructor(e,t,y,k),n.enable();return f(v,t,!1,!0),I[t]=v,s({global:!0,forced:!0},I),b||r.setStrong(v,t,y),v}},19595:(t,e,r)=>{"use strict";var s=r(49724),i=r(11042),n=r(13846),a=r(74284);t.exports=function(t,e,r){for(var o=i(e),c=a.f,u=n.f,h=0;h<o.length;h++){var d=o[h];s(t,d)||r&&s(r,d)||c(t,d,u(e,d))}}},25735:(t,e,r)=>{"use strict";var s=r(76264)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(r){try{return e[s]=!1,"/./"[t](e)}catch(t){}}return!1}},57382:(t,e,r)=>{"use strict";var s=r(98828);t.exports=!s((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},59550:t=>{"use strict";t.exports=function(t,e){return{value:t,done:e}}},61626:(t,e,r)=>{"use strict";var s=r(39447),i=r(74284),n=r(75817);t.exports=s?function(t,e,r){return i.f(t,e,n(1,r))}:function(t,e,r){return t[e]=r,t}},75817:t=>{"use strict";t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},5543:(t,e,r)=>{"use strict";var s=r(39447),i=r(74284),n=r(75817);t.exports=function(t,e,r){s?i.f(t,e,n(0,r)):t[e]=r}},3701:(t,e,r)=>{"use strict";var s=r(1907),i=r(98828),n=r(81164).start,a=RangeError,o=isFinite,c=Math.abs,u=Date.prototype,h=u.toISOString,d=s(u.getTime),l=s(u.getUTCDate),f=s(u.getUTCFullYear),p=s(u.getUTCHours),m=s(u.getUTCMilliseconds),g=s(u.getUTCMinutes),v=s(u.getUTCMonth),A=s(u.getUTCSeconds);t.exports=i((function(){return"0385-07-25T07:06:39.999Z"!==h.call(new Date(-50000000000001))}))||!i((function(){h.call(new Date(NaN))}))?function(){if(!o(d(this)))throw new a("Invalid time value");var t=this,e=f(t),r=m(t),s=e<0?"-":e>9999?"+":"";return s+n(c(e),s?6:4,0)+"-"+n(v(t)+1,2,0)+"-"+n(l(t),2,0)+"T"+n(p(t),2,0)+":"+n(g(t),2,0)+":"+n(A(t),2,0)+"."+n(r,3,0)+"Z"}:h},89251:(t,e,r)=>{"use strict";var s=r(74284);t.exports=function(t,e,r){return s.f(t,e,r)}},68055:(t,e,r)=>{"use strict";var s=r(61626);t.exports=function(t,e,r,i){return i&&i.enumerable?t[e]=r:s(t,e,r),t}},12802:(t,e,r)=>{"use strict";var s=r(68055);t.exports=function(t,e,r){for(var i in e)r&&r.unsafe&&t[i]?t[i]=e[i]:s(t,i,e[i],r);return t}},2532:(t,e,r)=>{"use strict";var s=r(45951),i=Object.defineProperty;t.exports=function(t,e){try{i(s,t,{value:e,configurable:!0,writable:!0})}catch(r){s[t]=e}return e}},74535:(t,e,r)=>{"use strict";var s=r(4640),i=TypeError;t.exports=function(t,e){if(!delete t[e])throw new i("Cannot delete property "+s(e)+" of "+s(t))}},39447:(t,e,r)=>{"use strict";var s=r(98828);t.exports=!s((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}))},49552:(t,e,r)=>{"use strict";var s=r(45951),i=r(46285),n=s.document,a=i(n)&&i(n.createElement);t.exports=function(t){return a?n.createElement(t):{}}},88024:t=>{"use strict";var e=TypeError;t.exports=function(t){if(t>9007199254740991)throw e("Maximum allowed index exceeded");return t}},19287:t=>{"use strict";t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},80376:t=>{"use strict";t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},93440:(t,e,r)=>{"use strict";var s=r(96794).match(/firefox\/(\d+)/i);t.exports=!!s&&+s[1]},24328:(t,e,r)=>{"use strict";var s=r(96794);t.exports=/MSIE|Trident/.test(s)},58606:(t,e,r)=>{"use strict";var s=r(96794);t.exports=/ipad|iphone|ipod/i.test(s)&&"undefined"!=typeof Pebble},71829:(t,e,r)=>{"use strict";var s=r(96794);t.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(s)},47586:(t,e,r)=>{"use strict";var s=r(42832);t.exports="NODE"===s},59291:(t,e,r)=>{"use strict";var s=r(96794);t.exports=/web0s(?!.*chrome)/i.test(s)},96794:(t,e,r)=>{"use strict";var s=r(45951).navigator,i=s&&s.userAgent;t.exports=i?String(i):""},20798:(t,e,r)=>{"use strict";var s,i,n=r(45951),a=r(96794),o=n.process,c=n.Deno,u=o&&o.versions||c&&c.version,h=u&&u.v8;h&&(i=(s=h.split("."))[0]>0&&s[0]<4?1:+(s[0]+s[1])),!i&&a&&(!(s=a.match(/Edge\/(\d+)/))||s[1]>=74)&&(s=a.match(/Chrome\/(\d+)/))&&(i=+s[1]),t.exports=i},3786:(t,e,r)=>{"use strict";var s=r(96794).match(/AppleWebKit\/(\d+)\./);t.exports=!!s&&+s[1]},42832:(t,e,r)=>{"use strict";var s=r(45951),i=r(96794),n=r(45807),a=function(t){return i.slice(0,t.length)===t};t.exports=a("Bun/")?"BUN":a("Cloudflare-Workers")?"CLOUDFLARE":a("Deno/")?"DENO":a("Node.js/")?"NODE":s.Bun&&"string"==typeof Bun.version?"BUN":s.Deno&&"object"==typeof Deno.version?"DENO":"process"===n(s.process)?"NODE":s.window&&s.document?"BROWSER":"REST"},85762:(t,e,r)=>{"use strict";var s=r(1907),i=Error,n=s("".replace),a=String(new i("zxcasd").stack),o=/\n\s*at [^:]*:[^\n]*/,c=o.test(a);t.exports=function(t,e){if(c&&"string"==typeof t&&!i.prepareStackTrace)for(;e--;)t=n(t,o,"");return t}},85884:(t,e,r)=>{"use strict";var s=r(61626),i=r(85762),n=r(23888),a=Error.captureStackTrace;t.exports=function(t,e,r,o){n&&(a?a(t,e):s(t,"stack",i(r,o)))}},23888:(t,e,r)=>{"use strict";var s=r(98828),i=r(75817);t.exports=!s((function(){var t=new Error("a");return!("stack"in t)||(Object.defineProperty(t,"stack",i(1,7)),7!==t.stack)}))},11091:(t,e,r)=>{"use strict";var s=r(45951),i=r(76024),n=r(92361),a=r(62250),o=r(13846).f,c=r(7463),u=r(92046),h=r(28311),d=r(61626),l=r(49724);r(36128);var f=function(t){var e=function(r,s,n){if(this instanceof e){switch(arguments.length){case 0:return new t;case 1:return new t(r);case 2:return new t(r,s)}return new t(r,s,n)}return i(t,this,arguments)};return e.prototype=t.prototype,e};t.exports=function(t,e){var r,i,p,m,g,v,A,w,y,b=t.target,k=t.global,x=t.stat,_=t.proto,I=k?s:x?s[b]:s[b]&&s[b].prototype,P=k?u:u[b]||d(u,b,{})[b],M=P.prototype;for(m in e)i=!(r=c(k?m:b+(x?".":"#")+m,t.forced))&&I&&l(I,m),v=P[m],i&&(A=t.dontCallGetSet?(y=o(I,m))&&y.value:I[m]),g=i&&A?A:e[m],(r||_||typeof v!=typeof g)&&(w=t.bind&&i?h(g,s):t.wrap&&i?f(g):_&&a(g)?n(g):g,(t.sham||g&&g.sham||v&&v.sham)&&d(w,"sham",!0),d(P,m,w),_&&(l(u,p=b+"Prototype")||d(u,p,{}),d(u[p],m,g),t.real&&M&&(r||!M[m])&&d(M,m,g)))}},98828:t=>{"use strict";t.exports=function(t){try{return!!t()}catch(t){return!0}}},75681:(t,e,r)=>{"use strict";var s=r(98828);t.exports=!s((function(){return Object.isExtensible(Object.preventExtensions({}))}))},76024:(t,e,r)=>{"use strict";var s=r(41505),i=Function.prototype,n=i.apply,a=i.call;t.exports="object"==typeof Reflect&&Reflect.apply||(s?a.bind(n):function(){return a.apply(n,arguments)})},28311:(t,e,r)=>{"use strict";var s=r(92361),i=r(82159),n=r(41505),a=s(s.bind);t.exports=function(t,e){return i(t),void 0===e?t:n?a(t,e):function(){return t.apply(e,arguments)}}},41505:(t,e,r)=>{"use strict";var s=r(98828);t.exports=!s((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))},44673:(t,e,r)=>{"use strict";var s=r(1907),i=r(82159),n=r(46285),a=r(49724),o=r(93427),c=r(41505),u=Function,h=s([].concat),d=s([].join),l={};t.exports=c?u.bind:function(t){var e=i(this),r=e.prototype,s=o(arguments,1),c=function(){var r=h(s,o(arguments));return this instanceof c?function(t,e,r){if(!a(l,e)){for(var s=[],i=0;i<e;i++)s[i]="a["+i+"]";l[e]=u("C,a","return new C("+d(s,",")+")")}return l[e](t,r)}(e,r.length,r):e.apply(t,r)};return n(r)&&(c.prototype=r),c}},13930:(t,e,r)=>{"use strict";var s=r(41505),i=Function.prototype.call;t.exports=s?i.bind(i):function(){return i.apply(i,arguments)}},36833:(t,e,r)=>{"use strict";var s=r(39447),i=r(49724),n=Function.prototype,a=s&&Object.getOwnPropertyDescriptor,o=i(n,"name"),c=o&&"something"===function(){}.name,u=o&&(!s||s&&a(n,"name").configurable);t.exports={EXISTS:o,PROPER:c,CONFIGURABLE:u}},51871:(t,e,r)=>{"use strict";var s=r(1907),i=r(82159);t.exports=function(t,e,r){try{return s(i(Object.getOwnPropertyDescriptor(t,e)[r]))}catch(t){}}},92361:(t,e,r)=>{"use strict";var s=r(45807),i=r(1907);t.exports=function(t){if("Function"===s(t))return i(t)}},1907:(t,e,r)=>{"use strict";var s=r(41505),i=Function.prototype,n=i.call,a=s&&i.bind.bind(n,n);t.exports=s?a:function(t){return function(){return n.apply(t,arguments)}}},61747:(t,e,r)=>{"use strict";var s=r(45951),i=r(92046);t.exports=function(t,e){var r=i[t+"Prototype"],n=r&&r[e];if(n)return n;var a=s[t],o=a&&a.prototype;return o&&o[e]}},85582:(t,e,r)=>{"use strict";var s=r(92046),i=r(45951),n=r(62250),a=function(t){return n(t)?t:void 0};t.exports=function(t,e){return arguments.length<2?a(s[t])||a(i[t]):s[t]&&s[t][e]||i[t]&&i[t][e]}},73448:(t,e,r)=>{"use strict";var s=r(73948),i=r(29367),n=r(87136),a=r(93742),o=r(76264)("iterator");t.exports=function(t){if(!n(t))return i(t,o)||i(t,"@@iterator")||a[s(t)]}},10300:(t,e,r)=>{"use strict";var s=r(13930),i=r(82159),n=r(36624),a=r(4640),o=r(73448),c=TypeError;t.exports=function(t,e){var r=arguments.length<2?o(t):e;if(i(r))return n(s(r,t));throw new c(a(t)+" is not iterable")}},96656:(t,e,r)=>{"use strict";var s=r(1907),i=r(11793),n=r(62250),a=r(45807),o=r(90160),c=s([].push);t.exports=function(t){if(n(t))return t;if(i(t)){for(var e=t.length,r=[],s=0;s<e;s++){var u=t[s];"string"==typeof u?c(r,u):"number"!=typeof u&&"Number"!==a(u)&&"String"!==a(u)||c(r,o(u))}var h=r.length,d=!0;return function(t,e){if(d)return d=!1,e;if(i(this))return e;for(var s=0;s<h;s++)if(r[s]===t)return e}}}},29367:(t,e,r)=>{"use strict";var s=r(82159),i=r(87136);t.exports=function(t,e){var r=t[e];return i(r)?void 0:s(r)}},67703:(t,e,r)=>{"use strict";var s=r(1907),i=r(39298),n=Math.floor,a=s("".charAt),o=s("".replace),c=s("".slice),u=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,h=/\$([$&'`]|\d{1,2})/g;t.exports=function(t,e,r,s,d,l){var f=r+t.length,p=s.length,m=h;return void 0!==d&&(d=i(d),m=u),o(l,m,(function(i,o){var u;switch(a(o,0)){case"$":return"$";case"&":return t;case"`":return c(e,0,r);case"'":return c(e,f);case"<":u=d[c(o,1,-1)];break;default:var h=+o;if(0===h)return i;if(h>p){var l=n(h/10);return 0===l?i:l<=p?void 0===s[l-1]?a(o,1):s[l-1]+a(o,1):i}u=s[h-1]}return void 0===u?"":u}))}},45951:function(t,e,r){"use strict";var s=function(t){return t&&t.Math===Math&&t};t.exports=s("object"==typeof globalThis&&globalThis)||s("object"==typeof window&&window)||s("object"==typeof self&&self)||s("object"==typeof r.g&&r.g)||s("object"==typeof this&&this)||function(){return this}()||Function("return this")()},49724:(t,e,r)=>{"use strict";var s=r(1907),i=r(39298),n=s({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return n(i(t),e)}},38530:t=>{"use strict";t.exports={}},73904:t=>{"use strict";t.exports=function(t,e){try{1===arguments.length?console.error(t):console.error(t,e)}catch(t){}}},62416:(t,e,r)=>{"use strict";var s=r(85582);t.exports=s("document","documentElement")},73648:(t,e,r)=>{"use strict";var s=r(39447),i=r(98828),n=r(49552);t.exports=!s&&!i((function(){return 7!==Object.defineProperty(n("div"),"a",{get:function(){return 7}}).a}))},16946:(t,e,r)=>{"use strict";var s=r(1907),i=r(98828),n=r(45807),a=Object,o=s("".split);t.exports=i((function(){return!a("z").propertyIsEnumerable(0)}))?function(t){return"String"===n(t)?o(t,""):a(t)}:a},12647:(t,e,r)=>{"use strict";var s=r(1907),i=r(62250),n=r(36128),a=s(Function.toString);i(n.inspectSource)||(n.inspectSource=function(t){return a(t)}),t.exports=n.inspectSource},39259:(t,e,r)=>{"use strict";var s=r(46285),i=r(61626);t.exports=function(t,e){s(e)&&"cause"in e&&i(t,"cause",e.cause)}},61548:(t,e,r)=>{"use strict";var s=r(11091),i=r(1907),n=r(38530),a=r(46285),o=r(49724),c=r(74284).f,u=r(24443),h=r(25407),d=r(57005),l=r(6499),f=r(75681),p=!1,m=l("meta"),g=0,v=function(t){c(t,m,{value:{objectID:"O"+g++,weakData:{}}})},A=t.exports={enable:function(){A.enable=function(){},p=!0;var t=u.f,e=i([].splice),r={};r[m]=1,t(r).length&&(u.f=function(r){for(var s=t(r),i=0,n=s.length;i<n;i++)if(s[i]===m){e(s,i,1);break}return s},s({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:h.f}))},fastKey:function(t,e){if(!a(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,m)){if(!d(t))return"F";if(!e)return"E";v(t)}return t[m].objectID},getWeakData:function(t,e){if(!o(t,m)){if(!d(t))return!0;if(!e)return!1;v(t)}return t[m].weakData},onFreeze:function(t){return f&&p&&d(t)&&!o(t,m)&&v(t),t}};n[m]=!0},64932:(t,e,r)=>{"use strict";var s,i,n,a=r(40551),o=r(45951),c=r(46285),u=r(61626),h=r(49724),d=r(36128),l=r(92522),f=r(38530),p="Object already initialized",m=o.TypeError,g=o.WeakMap;if(a||d.state){var v=d.state||(d.state=new g);v.get=v.get,v.has=v.has,v.set=v.set,s=function(t,e){if(v.has(t))throw new m(p);return e.facade=t,v.set(t,e),e},i=function(t){return v.get(t)||{}},n=function(t){return v.has(t)}}else{var A=l("state");f[A]=!0,s=function(t,e){if(h(t,A))throw new m(p);return e.facade=t,u(t,A,e),e},i=function(t){return h(t,A)?t[A]:{}},n=function(t){return h(t,A)}}t.exports={set:s,get:i,has:n,enforce:function(t){return n(t)?i(t):s(t,{})},getterFor:function(t){return function(e){var r;if(!c(e)||(r=i(e)).type!==t)throw new m("Incompatible receiver, "+t+" required");return r}}}},37812:(t,e,r)=>{"use strict";var s=r(76264),i=r(93742),n=s("iterator"),a=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||a[n]===t)}},11793:(t,e,r)=>{"use strict";var s=r(45807);t.exports=Array.isArray||function(t){return"Array"===s(t)}},62250:t=>{"use strict";var e="object"==typeof document&&document.all;t.exports=void 0===e&&void 0!==e?function(t){return"function"==typeof t||t===e}:function(t){return"function"==typeof t}},25468:(t,e,r)=>{"use strict";var s=r(1907),i=r(98828),n=r(62250),a=r(73948),o=r(85582),c=r(12647),u=function(){},h=o("Reflect","construct"),d=/^\s*(?:class|function)\b/,l=s(d.exec),f=!d.test(u),p=function(t){if(!n(t))return!1;try{return h(u,[],t),!0}catch(t){return!1}},m=function(t){if(!n(t))return!1;switch(a(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return f||!!l(d,c(t))}catch(t){return!0}};m.sham=!0,t.exports=!h||i((function(){var t;return p(p.call)||!p(Object)||!p((function(){t=!0}))||t}))?m:p},7463:(t,e,r)=>{"use strict";var s=r(98828),i=r(62250),n=/#|\.prototype\./,a=function(t,e){var r=c[o(t)];return r===h||r!==u&&(i(e)?s(e):!!e)},o=a.normalize=function(t){return String(t).replace(n,".").toLowerCase()},c=a.data={},u=a.NATIVE="N",h=a.POLYFILL="P";t.exports=a},87136:t=>{"use strict";t.exports=function(t){return null==t}},46285:(t,e,r)=>{"use strict";var s=r(62250);t.exports=function(t){return"object"==typeof t?null!==t:s(t)}},54018:(t,e,r)=>{"use strict";var s=r(46285);t.exports=function(t){return s(t)||null===t}},7376:t=>{"use strict";t.exports=!0},72087:(t,e,r)=>{"use strict";var s=r(46285),i=r(45807),n=r(76264)("match");t.exports=function(t){var e;return s(t)&&(void 0!==(e=t[n])?!!e:"RegExp"===i(t))}},25594:(t,e,r)=>{"use strict";var s=r(85582),i=r(62250),n=r(88280),a=r(51175),o=Object;t.exports=a?function(t){return"symbol"==typeof t}:function(t){var e=s("Symbol");return i(e)&&n(e.prototype,o(t))}},24823:(t,e,r)=>{"use strict";var s=r(28311),i=r(13930),n=r(36624),a=r(4640),o=r(37812),c=r(20575),u=r(88280),h=r(10300),d=r(73448),l=r(40154),f=TypeError,p=function(t,e){this.stopped=t,this.result=e},m=p.prototype;t.exports=function(t,e,r){var g,v,A,w,y,b,k,x=r&&r.that,_=!(!r||!r.AS_ENTRIES),I=!(!r||!r.IS_RECORD),P=!(!r||!r.IS_ITERATOR),M=!(!r||!r.INTERRUPTED),S=s(e,x),E=function(t){return g&&l(g,"normal"),new p(!0,t)},T=function(t){return _?(n(t),M?S(t[0],t[1],E):S(t[0],t[1])):M?S(t,E):S(t)};if(I)g=t.iterator;else if(P)g=t;else{if(!(v=d(t)))throw new f(a(t)+" is not iterable");if(o(v)){for(A=0,w=c(t);w>A;A++)if((y=T(t[A]))&&u(m,y))return y;return new p(!1)}g=h(t,v)}for(b=I?t.next:g.next;!(k=i(b,g)).done;){try{y=T(k.value)}catch(t){l(g,"throw",t)}if("object"==typeof y&&y&&u(m,y))return y}return new p(!1)}},40154:(t,e,r)=>{"use strict";var s=r(13930),i=r(36624),n=r(29367);t.exports=function(t,e,r){var a,o;i(t);try{if(!(a=n(t,"return"))){if("throw"===e)throw r;return r}a=s(a,t)}catch(t){o=!0,a=t}if("throw"===e)throw r;if(o)throw a;return i(a),r}},47181:(t,e,r)=>{"use strict";var s=r(95116).IteratorPrototype,i=r(58075),n=r(75817),a=r(14840),o=r(93742),c=function(){return this};t.exports=function(t,e,r,u){var h=e+" Iterator";return t.prototype=i(s,{next:n(+!u,r)}),a(t,h,!1,!0),o[h]=c,t}},60183:(t,e,r)=>{"use strict";var s=r(11091),i=r(13930),n=r(7376),a=r(36833),o=r(62250),c=r(47181),u=r(15972),h=r(79192),d=r(14840),l=r(61626),f=r(68055),p=r(76264),m=r(93742),g=r(95116),v=a.PROPER,A=a.CONFIGURABLE,w=g.IteratorPrototype,y=g.BUGGY_SAFARI_ITERATORS,b=p("iterator"),k="keys",x="values",_="entries",I=function(){return this};t.exports=function(t,e,r,a,p,g,P){c(r,e,a);var M,S,E,T=function(t){if(t===p&&R)return R;if(!y&&t&&t in U)return U[t];switch(t){case k:case x:case _:return function(){return new r(this,t)}}return function(){return new r(this)}},B=e+" Iterator",C=!1,U=t.prototype,D=U[b]||U["@@iterator"]||p&&U[p],R=!y&&D||T(p),L="Array"===e&&U.entries||D;if(L&&(M=u(L.call(new t)))!==Object.prototype&&M.next&&(n||u(M)===w||(h?h(M,w):o(M[b])||f(M,b,I)),d(M,B,!0,!0),n&&(m[B]=I)),v&&p===x&&D&&D.name!==x&&(!n&&A?l(U,"name",x):(C=!0,R=function(){return i(D,this)})),p)if(S={values:T(x),keys:g?R:T(k),entries:T(_)},P)for(E in S)(y||C||!(E in U))&&f(U,E,S[E]);else s({target:e,proto:!0,forced:y||C},S);return n&&!P||U[b]===R||f(U,b,R,{name:p}),m[e]=R,S}},95116:(t,e,r)=>{"use strict";var s,i,n,a=r(98828),o=r(62250),c=r(46285),u=r(58075),h=r(15972),d=r(68055),l=r(76264),f=r(7376),p=l("iterator"),m=!1;[].keys&&("next"in(n=[].keys())?(i=h(h(n)))!==Object.prototype&&(s=i):m=!0),!c(s)||a((function(){var t={};return s[p].call(t)!==t}))?s={}:f&&(s=u(s)),o(s[p])||d(s,p,(function(){return this})),t.exports={IteratorPrototype:s,BUGGY_SAFARI_ITERATORS:m}},93742:t=>{"use strict";t.exports={}},20575:(t,e,r)=>{"use strict";var s=r(3121);t.exports=function(t){return s(t.length)}},15703:(t,e,r)=>{"use strict";var s=r(85582),i=r(62222),n=s("Map");t.exports={Map:n,set:i("set",2),get:i("get",1),has:i("has",1),remove:i("delete",1),proto:n.prototype}},54744:t=>{"use strict";var e=Math.log,r=Math.LN2;t.exports=Math.log2||function(t){return e(t)/r}},41176:t=>{"use strict";var e=Math.ceil,r=Math.floor;t.exports=Math.trunc||function(t){var s=+t;return(s>0?r:e)(s)}},52292:(t,e,r)=>{"use strict";var s,i,n,a,o,c=r(45951),u=r(52098),h=r(28311),d=r(49472).set,l=r(1626),f=r(71829),p=r(58606),m=r(59291),g=r(47586),v=c.MutationObserver||c.WebKitMutationObserver,A=c.document,w=c.process,y=c.Promise,b=u("queueMicrotask");if(!b){var k=new l,x=function(){var t,e;for(g&&(t=w.domain)&&t.exit();e=k.get();)try{e()}catch(t){throw k.head&&s(),t}t&&t.enter()};f||g||m||!v||!A?!p&&y&&y.resolve?((a=y.resolve(void 0)).constructor=y,o=h(a.then,a),s=function(){o(x)}):g?s=function(){w.nextTick(x)}:(d=h(d,c),s=function(){d(x)}):(i=!0,n=A.createTextNode(""),new v(x).observe(n,{characterData:!0}),s=function(){n.data=i=!i}),b=function(t){k.head||s(),k.add(t)}}t.exports=b},56254:(t,e,r)=>{"use strict";var s=r(82159),i=TypeError,n=function(t){var e,r;this.promise=new t((function(t,s){if(void 0!==e||void 0!==r)throw new i("Bad Promise constructor");e=t,r=s})),this.resolve=s(e),this.reject=s(r)};t.exports.f=function(t){return new n(t)}},32096:(t,e,r)=>{"use strict";var s=r(90160);t.exports=function(t,e){return void 0===t?arguments.length<2?"":e:s(t)}},12074:(t,e,r)=>{"use strict";var s=r(72087),i=TypeError;t.exports=function(t){if(s(t))throw new i("The method doesn't accept regular expressions");return t}},27213:(t,e,r)=>{"use strict";var s=r(45951),i=r(98828),n=r(1907),a=r(90160),o=r(65993).trim,c=r(86395),u=n("".charAt),h=s.parseFloat,d=s.Symbol,l=d&&d.iterator,f=1/h(c+"-0")!=-1/0||l&&!i((function(){h(Object(l))}));t.exports=f?function(t){var e=o(a(t)),r=h(e);return 0===r&&"-"===u(e,0)?-0:r}:h},72778:(t,e,r)=>{"use strict";var s=r(45951),i=r(98828),n=r(1907),a=r(90160),o=r(65993).trim,c=r(86395),u=s.parseInt,h=s.Symbol,d=h&&h.iterator,l=/^[+-]?0x/i,f=n(l.exec),p=8!==u(c+"08")||22!==u(c+"0x16")||d&&!i((function(){u(Object(d))}));t.exports=p?function(t,e){var r=o(a(t));return u(r,e>>>0||(f(l,r)?16:10))}:u},29538:(t,e,r)=>{"use strict";var s=r(39447),i=r(1907),n=r(13930),a=r(98828),o=r(2875),c=r(87170),u=r(22574),h=r(39298),d=r(16946),l=Object.assign,f=Object.defineProperty,p=i([].concat);t.exports=!l||a((function(){if(s&&1!==l({b:1},l(f({},"a",{enumerable:!0,get:function(){f(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},r=Symbol("assign detection"),i="abcdefghijklmnopqrst";return t[r]=7,i.split("").forEach((function(t){e[t]=t})),7!==l({},t)[r]||o(l({},e)).join("")!==i}))?function(t,e){for(var r=h(t),i=arguments.length,a=1,l=c.f,f=u.f;i>a;)for(var m,g=d(arguments[a++]),v=l?p(o(g),l(g)):o(g),A=v.length,w=0;A>w;)m=v[w++],s&&!n(f,g,m)||(r[m]=g[m]);return r}:l},58075:(t,e,r)=>{"use strict";var s,i=r(36624),n=r(42220),a=r(80376),o=r(38530),c=r(62416),u=r(49552),h=r(92522),d="prototype",l="script",f=h("IE_PROTO"),p=function(){},m=function(t){return"<"+l+">"+t+"</"+l+">"},g=function(t){t.write(m("")),t.close();var e=t.parentWindow.Object;return t=null,e},v=function(){try{s=new ActiveXObject("htmlfile")}catch(t){}var t,e,r;v="undefined"!=typeof document?document.domain&&s?g(s):(e=u("iframe"),r="java"+l+":",e.style.display="none",c.appendChild(e),e.src=String(r),(t=e.contentWindow.document).open(),t.write(m("document.F=Object")),t.close(),t.F):g(s);for(var i=a.length;i--;)delete v[d][a[i]];return v()};o[f]=!0,t.exports=Object.create||function(t,e){var r;return null!==t?(p[d]=i(t),r=new p,p[d]=null,r[f]=t):r=v(),void 0===e?r:n.f(r,e)}},42220:(t,e,r)=>{"use strict";var s=r(39447),i=r(58661),n=r(74284),a=r(36624),o=r(27374),c=r(2875);e.f=s&&!i?Object.defineProperties:function(t,e){a(t);for(var r,s=o(e),i=c(e),u=i.length,h=0;u>h;)n.f(t,r=i[h++],s[r]);return t}},74284:(t,e,r)=>{"use strict";var s=r(39447),i=r(73648),n=r(58661),a=r(36624),o=r(70470),c=TypeError,u=Object.defineProperty,h=Object.getOwnPropertyDescriptor,d="enumerable",l="configurable",f="writable";e.f=s?n?function(t,e,r){if(a(t),e=o(e),a(r),"function"==typeof t&&"prototype"===e&&"value"in r&&f in r&&!r[f]){var s=h(t,e);s&&s[f]&&(t[e]=r.value,r={configurable:l in r?r[l]:s[l],enumerable:d in r?r[d]:s[d],writable:!1})}return u(t,e,r)}:u:function(t,e,r){if(a(t),e=o(e),a(r),i)try{return u(t,e,r)}catch(t){}if("get"in r||"set"in r)throw new c("Accessors not supported");return"value"in r&&(t[e]=r.value),t}},13846:(t,e,r)=>{"use strict";var s=r(39447),i=r(13930),n=r(22574),a=r(75817),o=r(27374),c=r(70470),u=r(49724),h=r(73648),d=Object.getOwnPropertyDescriptor;e.f=s?d:function(t,e){if(t=o(t),e=c(e),h)try{return d(t,e)}catch(t){}if(u(t,e))return a(!i(n.f,t,e),t[e])}},25407:(t,e,r)=>{"use strict";var s=r(45807),i=r(27374),n=r(24443).f,a=r(93427),o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return o&&"Window"===s(t)?function(t){try{return n(t)}catch(t){return a(o)}}(t):n(i(t))}},24443:(t,e,r)=>{"use strict";var s=r(23045),i=r(80376).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return s(t,i)}},87170:(t,e)=>{"use strict";e.f=Object.getOwnPropertySymbols},15972:(t,e,r)=>{"use strict";var s=r(49724),i=r(62250),n=r(39298),a=r(92522),o=r(57382),c=a("IE_PROTO"),u=Object,h=u.prototype;t.exports=o?u.getPrototypeOf:function(t){var e=n(t);if(s(e,c))return e[c];var r=e.constructor;return i(r)&&e instanceof r?r.prototype:e instanceof u?h:null}},57005:(t,e,r)=>{"use strict";var s=r(98828),i=r(46285),n=r(45807),a=r(26375),o=Object.isExtensible,c=s((function(){o(1)}));t.exports=c||a?function(t){return!!i(t)&&(!a||"ArrayBuffer"!==n(t))&&(!o||o(t))}:o},88280:(t,e,r)=>{"use strict";var s=r(1907);t.exports=s({}.isPrototypeOf)},23045:(t,e,r)=>{"use strict";var s=r(1907),i=r(49724),n=r(27374),a=r(74436).indexOf,o=r(38530),c=s([].push);t.exports=function(t,e){var r,s=n(t),u=0,h=[];for(r in s)!i(o,r)&&i(s,r)&&c(h,r);for(;e.length>u;)i(s,r=e[u++])&&(~a(h,r)||c(h,r));return h}},2875:(t,e,r)=>{"use strict";var s=r(23045),i=r(80376);t.exports=Object.keys||function(t){return s(t,i)}},22574:(t,e)=>{"use strict";var r={}.propertyIsEnumerable,s=Object.getOwnPropertyDescriptor,i=s&&!r.call({1:2},1);e.f=i?function(t){var e=s(this,t);return!!e&&e.enumerable}:r},79192:(t,e,r)=>{"use strict";var s=r(51871),i=r(46285),n=r(74239),a=r(10043);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,r={};try{(t=s(Object.prototype,"__proto__","set"))(r,[]),e=r instanceof Array}catch(t){}return function(r,s){return n(r),a(s),i(r)?(e?t(r,s):r.__proto__=s,r):r}}():void 0)},54878:(t,e,r)=>{"use strict";var s=r(52623),i=r(73948);t.exports=s?{}.toString:function(){return"[object "+i(this)+"]"}},60581:(t,e,r)=>{"use strict";var s=r(13930),i=r(62250),n=r(46285),a=TypeError;t.exports=function(t,e){var r,o;if("string"===e&&i(r=t.toString)&&!n(o=s(r,t)))return o;if(i(r=t.valueOf)&&!n(o=s(r,t)))return o;if("string"!==e&&i(r=t.toString)&&!n(o=s(r,t)))return o;throw new a("Can't convert object to primitive value")}},11042:(t,e,r)=>{"use strict";var s=r(85582),i=r(1907),n=r(24443),a=r(87170),o=r(36624),c=i([].concat);t.exports=s("Reflect","ownKeys")||function(t){var e=n.f(o(t)),r=a.f;return r?c(e,r(t)):e}},92046:t=>{"use strict";t.exports={}},94420:t=>{"use strict";t.exports=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}},1759:(t,e,r)=>{"use strict";var s=r(45951),i=r(55463),n=r(62250),a=r(7463),o=r(12647),c=r(76264),u=r(42832),h=r(7376),d=r(20798),l=i&&i.prototype,f=c("species"),p=!1,m=n(s.PromiseRejectionEvent),g=a("Promise",(function(){var t=o(i),e=t!==String(i);if(!e&&66===d)return!0;if(h&&(!l.catch||!l.finally))return!0;if(!d||d<51||!/native code/.test(t)){var r=new i((function(t){t(1)})),s=function(t){t((function(){}),(function(){}))};if((r.constructor={})[f]=s,!(p=r.then((function(){}))instanceof s))return!0}return!(e||"BROWSER"!==u&&"DENO"!==u||m)}));t.exports={CONSTRUCTOR:g,REJECTION_EVENT:m,SUBCLASSING:p}},55463:(t,e,r)=>{"use strict";var s=r(45951);t.exports=s.Promise},83569:(t,e,r)=>{"use strict";var s=r(36624),i=r(46285),n=r(56254);t.exports=function(t,e){if(s(t),i(e)&&e.constructor===t)return e;var r=n.f(t);return(0,r.resolve)(e),r.promise}},3282:(t,e,r)=>{"use strict";var s=r(55463),i=r(70473),n=r(1759).CONSTRUCTOR;t.exports=n||!i((function(t){s.all(t).then(void 0,(function(){}))}))},1626:t=>{"use strict";var e=function(){this.head=null,this.tail=null};e.prototype={add:function(t){var e={item:t,next:null},r=this.tail;r?r.next=e:this.head=e,this.tail=e},get:function(){var t=this.head;if(t)return null===(this.head=t.next)&&(this.tail=null),t.item}},t.exports=e},1816:(t,e,r)=>{"use strict";var s=r(45951),i=r(98828),n=s.RegExp,a=!i((function(){var t=!0;try{n(".","d")}catch(e){t=!1}var e={},r="",s=t?"dgimsy":"gimsy",i=function(t,s){Object.defineProperty(e,t,{get:function(){return r+=s,!0}})},a={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};for(var o in t&&(a.hasIndices="d"),a)i(o,a[o]);return Object.getOwnPropertyDescriptor(n.prototype,"flags").get.call(e)!==s||r!==s}));t.exports={correct:a}},85606:(t,e,r)=>{"use strict";var s=r(36624);t.exports=function(){var t=s(this),e="";return t.hasIndices&&(e+="d"),t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.unicodeSets&&(e+="v"),t.sticky&&(e+="y"),e}},40663:(t,e,r)=>{"use strict";var s=r(13930),i=r(49724),n=r(88280),a=r(1816),o=r(85606),c=RegExp.prototype;t.exports=a.correct?function(t){return t.flags}:function(t){return a.correct||!n(c,t)||i(t,"flags")?t.flags:s(o,t)}},74239:(t,e,r)=>{"use strict";var s=r(87136),i=TypeError;t.exports=function(t){if(s(t))throw new i("Can't call method on "+t);return t}},52098:(t,e,r)=>{"use strict";var s=r(45951),i=r(39447),n=Object.getOwnPropertyDescriptor;t.exports=function(t){if(!i)return s[t];var e=n(s,t);return e&&e.value}},70485:(t,e,r)=>{"use strict";var s,i=r(45951),n=r(76024),a=r(62250),o=r(42832),c=r(96794),u=r(93427),h=r(24787),d=i.Function,l=/MSIE .\./.test(c)||"BUN"===o&&((s=i.Bun.version.split(".")).length<3||"0"===s[0]&&(s[1]<3||"3"===s[1]&&"0"===s[2]));t.exports=function(t,e){var r=e?2:1;return l?function(s,i){var o=h(arguments.length,1)>r,c=a(s)?s:d(s),l=o?u(arguments,r):[],f=o?function(){n(c,this,l)}:c;return e?t(f,i):t(f)}:t}},47118:(t,e,r)=>{"use strict";var s=r(85582),i=r(89251),n=r(76264),a=r(39447),o=n("species");t.exports=function(t){var e=s(t);a&&e&&!e[o]&&i(e,o,{configurable:!0,get:function(){return this}})}},14840:(t,e,r)=>{"use strict";var s=r(52623),i=r(74284).f,n=r(61626),a=r(49724),o=r(54878),c=r(76264)("toStringTag");t.exports=function(t,e,r,u){var h=r?t:t&&t.prototype;h&&(a(h,c)||i(h,c,{configurable:!0,value:e}),u&&!s&&n(h,"toString",o))}},92522:(t,e,r)=>{"use strict";var s=r(85816),i=r(6499),n=s("keys");t.exports=function(t){return n[t]||(n[t]=i(t))}},36128:(t,e,r)=>{"use strict";var s=r(7376),i=r(45951),n=r(2532),a="__core-js_shared__",o=t.exports=i[a]||n(a,{});(o.versions||(o.versions=[])).push({version:"3.46.0",mode:s?"pure":"global",copyright:" 2014-2025 Denis Pushkarev (zloirock.ru), 2025 CoreJS Company (core-js.io)",license:"https://github.com/zloirock/core-js/blob/v3.46.0/LICENSE",source:"https://github.com/zloirock/core-js"})},85816:(t,e,r)=>{"use strict";var s=r(36128);t.exports=function(t,e){return s[t]||(s[t]=e||{})}},28450:(t,e,r)=>{"use strict";var s=r(36624),i=r(82235),n=r(87136),a=r(76264)("species");t.exports=function(t,e){var r,o=s(t).constructor;return void 0===o||n(r=s(o)[a])?e:i(r)}},11470:(t,e,r)=>{"use strict";var s=r(1907),i=r(65482),n=r(90160),a=r(74239),o=s("".charAt),c=s("".charCodeAt),u=s("".slice),h=function(t){return function(e,r){var s,h,d=n(a(e)),l=i(r),f=d.length;return l<0||l>=f?t?"":void 0:(s=c(d,l))<55296||s>56319||l+1===f||(h=c(d,l+1))<56320||h>57343?t?o(d,l):s:t?u(d,l,l+2):h-56320+(s-55296<<10)+65536}};t.exports={codeAt:h(!1),charAt:h(!0)}},81164:(t,e,r)=>{"use strict";var s=r(1907),i=r(3121),n=r(90160),a=r(69314),o=r(74239),c=s(a),u=s("".slice),h=Math.ceil,d=function(t){return function(e,r,s){var a,d,l=n(o(e)),f=i(r),p=l.length,m=void 0===s?" ":n(s);return f<=p||""===m?l:((d=c(m,h((a=f-p)/m.length))).length>a&&(d=u(d,0,a)),t?l+d:d+l)}};t.exports={start:d(!1),end:d(!0)}},79156:(t,e,r)=>{"use strict";var s=r(1907),i=2147483647,n=/[^\0-\u007E]/,a=/[.\u3002\uFF0E\uFF61]/g,o="Overflow: input needs wider integers to process",c=RangeError,u=s(a.exec),h=Math.floor,d=String.fromCharCode,l=s("".charCodeAt),f=s([].join),p=s([].push),m=s("".replace),g=s("".split),v=s("".toLowerCase),A=function(t){return t+22+75*(t<26)},w=function(t,e,r){var s=0;for(t=r?h(t/700):t>>1,t+=h(t/e);t>455;)t=h(t/35),s+=36;return h(s+36*t/(t+38))},y=function(t){var e=[];t=function(t){for(var e=[],r=0,s=t.length;r<s;){var i=l(t,r++);if(i>=55296&&i<=56319&&r<s){var n=l(t,r++);56320==(64512&n)?p(e,((1023&i)<<10)+(1023&n)+65536):(p(e,i),r--)}else p(e,i)}return e}(t);var r,s,n=t.length,a=128,u=0,m=72;for(r=0;r<t.length;r++)(s=t[r])<128&&p(e,d(s));var g=e.length,v=g;for(g&&p(e,"-");v<n;){var y=i;for(r=0;r<t.length;r++)(s=t[r])>=a&&s<y&&(y=s);var b=v+1;if(y-a>h((i-u)/b))throw new c(o);for(u+=(y-a)*b,a=y,r=0;r<t.length;r++){if((s=t[r])<a&&++u>i)throw new c(o);if(s===a){for(var k=u,x=36;;){var _=x<=m?1:x>=m+26?26:x-m;if(k<_)break;var I=k-_,P=36-_;p(e,d(A(_+I%P))),k=h(I/P),x+=36}p(e,d(A(k))),m=w(u,b,v===g),u=0,v++}}u++,a++}return f(e,"")};t.exports=function(t){var e,r,s=[],i=g(m(v(t),a,"."),".");for(e=0;e<i.length;e++)r=i[e],p(s,u(n,r)?"xn--"+y(r):r);return f(s,".")}},69314:(t,e,r)=>{"use strict";var s=r(65482),i=r(90160),n=r(74239),a=RangeError;t.exports=function(t){var e=i(n(this)),r="",o=s(t);if(o<0||o===1/0)throw new a("Wrong number of repetitions");for(;o>0;(o>>>=1)&&(e+=e))1&o&&(r+=e);return r}},95819:(t,e,r)=>{"use strict";var s=r(36833).PROPER,i=r(98828),n=r(86395);t.exports=function(t){return i((function(){return!!n[t]()||""!==""[t]()||s&&n[t].name!==t}))}},65993:(t,e,r)=>{"use strict";var s=r(1907),i=r(74239),n=r(90160),a=r(86395),o=s("".replace),c=RegExp("^["+a+"]+"),u=RegExp("(^|[^"+a+"])["+a+"]+$"),h=function(t){return function(e){var r=n(i(e));return 1&t&&(r=o(r,c,"")),2&t&&(r=o(r,u,"$1")),r}};t.exports={start:h(1),end:h(2),trim:h(3)}},19846:(t,e,r)=>{"use strict";var s=r(20798),i=r(98828),n=r(45951).String;t.exports=!!Object.getOwnPropertySymbols&&!i((function(){var t=Symbol("symbol detection");return!n(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&s&&s<41}))},83467:(t,e,r)=>{"use strict";var s=r(13930),i=r(85582),n=r(76264),a=r(68055);t.exports=function(){var t=i("Symbol"),e=t&&t.prototype,r=e&&e.valueOf,o=n("toPrimitive");e&&!e[o]&&a(e,o,(function(t){return s(r,this)}),{arity:1})}},12595:(t,e,r)=>{"use strict";var s=r(85582),i=r(1907),n=s("Symbol"),a=n.keyFor,o=i(n.prototype.valueOf);t.exports=n.isRegisteredSymbol||function(t){try{return void 0!==a(o(t))}catch(t){return!1}}},69197:(t,e,r)=>{"use strict";for(var s=r(85816),i=r(85582),n=r(1907),a=r(25594),o=r(76264),c=i("Symbol"),u=c.isWellKnownSymbol,h=i("Object","getOwnPropertyNames"),d=n(c.prototype.valueOf),l=s("wks"),f=0,p=h(c),m=p.length;f<m;f++)try{var g=p[f];a(c[g])&&o(g)}catch(t){}t.exports=function(t){if(u&&u(t))return!0;try{for(var e=d(t),r=0,s=h(l),i=s.length;r<i;r++)if(l[s[r]]==e)return!0}catch(t){}return!1}},84411:(t,e,r)=>{"use strict";var s=r(19846);t.exports=s&&!!Symbol.for&&!!Symbol.keyFor},49472:(t,e,r)=>{"use strict";var s,i,n,a,o=r(45951),c=r(76024),u=r(28311),h=r(62250),d=r(49724),l=r(98828),f=r(62416),p=r(93427),m=r(49552),g=r(24787),v=r(71829),A=r(47586),w=o.setImmediate,y=o.clearImmediate,b=o.process,k=o.Dispatch,x=o.Function,_=o.MessageChannel,I=o.String,P=0,M={},S="onreadystatechange";l((function(){s=o.location}));var E=function(t){if(d(M,t)){var e=M[t];delete M[t],e()}},T=function(t){return function(){E(t)}},B=function(t){E(t.data)},C=function(t){o.postMessage(I(t),s.protocol+"//"+s.host)};w&&y||(w=function(t){g(arguments.length,1);var e=h(t)?t:x(t),r=p(arguments,1);return M[++P]=function(){c(e,void 0,r)},i(P),P},y=function(t){delete M[t]},A?i=function(t){b.nextTick(T(t))}:k&&k.now?i=function(t){k.now(T(t))}:_&&!v?(a=(n=new _).port2,n.port1.onmessage=B,i=u(a.postMessage,a)):o.addEventListener&&h(o.postMessage)&&!o.importScripts&&s&&"file:"!==s.protocol&&!l(C)?(i=C,o.addEventListener("message",B,!1)):i=S in m("script")?function(t){f.appendChild(m("script"))[S]=function(){f.removeChild(this),E(t)}}:function(t){setTimeout(T(t),0)}),t.exports={set:w,clear:y}},34849:(t,e,r)=>{"use strict";var s=r(65482),i=Math.max,n=Math.min;t.exports=function(t,e){var r=s(t);return r<0?i(r+e,0):n(r,e)}},27374:(t,e,r)=>{"use strict";var s=r(16946),i=r(74239);t.exports=function(t){return s(i(t))}},65482:(t,e,r)=>{"use strict";var s=r(41176);t.exports=function(t){var e=+t;return e!=e||0===e?0:s(e)}},3121:(t,e,r)=>{"use strict";var s=r(65482),i=Math.min;t.exports=function(t){var e=s(t);return e>0?i(e,9007199254740991):0}},39298:(t,e,r)=>{"use strict";var s=r(74239),i=Object;t.exports=function(t){return i(s(t))}},46028:(t,e,r)=>{"use strict";var s=r(13930),i=r(46285),n=r(25594),a=r(29367),o=r(60581),c=r(76264),u=TypeError,h=c("toPrimitive");t.exports=function(t,e){if(!i(t)||n(t))return t;var r,c=a(t,h);if(c){if(void 0===e&&(e="default"),r=s(c,t,e),!i(r)||n(r))return r;throw new u("Can't convert object to primitive value")}return void 0===e&&(e="number"),o(t,e)}},70470:(t,e,r)=>{"use strict";var s=r(46028),i=r(25594);t.exports=function(t){var e=s(t,"string");return i(e)?e:e+""}},52623:(t,e,r)=>{"use strict";var s={};s[r(76264)("toStringTag")]="z",t.exports="[object z]"===String(s)},90160:(t,e,r)=>{"use strict";var s=r(73948),i=String;t.exports=function(t){if("Symbol"===s(t))throw new TypeError("Cannot convert a Symbol value to a string");return i(t)}},4640:t=>{"use strict";var e=String;t.exports=function(t){try{return e(t)}catch(t){return"Object"}}},6499:(t,e,r)=>{"use strict";var s=r(1907),i=0,n=Math.random(),a=s(1.1.toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+a(++i+n,36)}},34791:(t,e,r)=>{"use strict";var s=r(98828),i=r(76264),n=r(39447),a=r(7376),o=i("iterator");t.exports=!s((function(){var t=new URL("b?a=1&b=2&c=3","https://a"),e=t.searchParams,r=new URLSearchParams("a=1&a=2&b=3"),s="";return t.pathname="c%20d",e.forEach((function(t,r){e.delete("b"),s+=r+t})),r.delete("a",2),r.delete("b",void 0),a&&(!t.toJSON||!r.has("a",1)||r.has("a",2)||!r.has("a",void 0)||r.has("b"))||!e.size&&(a||!n)||!e.sort||"https://a/c%20d?a=1&c=3"!==t.href||"3"!==e.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!e[o]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("https://").host||"#%D0%B1"!==new URL("https://a#").hash||"a1c3"!==s||"x"!==new URL("https://x",void 0).host}))},51175:(t,e,r)=>{"use strict";var s=r(19846);t.exports=s&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},58661:(t,e,r)=>{"use strict";var s=r(39447),i=r(98828);t.exports=s&&i((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},24787:t=>{"use strict";var e=TypeError;t.exports=function(t,r){if(t<r)throw new e("Not enough arguments");return t}},40551:(t,e,r)=>{"use strict";var s=r(45951),i=r(62250),n=s.WeakMap;t.exports=i(n)&&/native code/.test(String(n))},20366:(t,e,r)=>{"use strict";var s=r(92046),i=r(49724),n=r(80560),a=r(74284).f;t.exports=function(t){var e=s.Symbol||(s.Symbol={});i(e,t)||a(e,t,{value:n.f(t)})}},80560:(t,e,r)=>{"use strict";var s=r(76264);e.f=s},76264:(t,e,r)=>{"use strict";var s=r(45951),i=r(85816),n=r(49724),a=r(6499),o=r(19846),c=r(51175),u=s.Symbol,h=i("wks"),d=c?u.for||u:u&&u.withoutSetter||a;t.exports=function(t){return n(h,t)||(h[t]=o&&n(u,t)?u[t]:d("Symbol."+t)),h[t]}},86395:t=>{"use strict";t.exports="\t\n\v\f\r \u2028\u2029\ufeff"},82048:(t,e,r)=>{"use strict";var s=r(11091),i=r(88280),n=r(15972),a=r(79192),o=r(19595),c=r(58075),u=r(61626),h=r(75817),d=r(39259),l=r(85884),f=r(24823),p=r(32096),m=r(76264)("toStringTag"),g=Error,v=[].push,A=function(t,e){var r,s=i(w,this);a?r=a(new g,s?n(this):w):(r=s?this:c(w),u(r,m,"Error")),void 0!==e&&u(r,"message",p(e)),l(r,A,r.stack,1),arguments.length>2&&d(r,arguments[2]);var o=[];return f(t,v,{that:o}),u(r,"errors",o),r};a?a(A,g):o(A,g,{name:!0});var w=A.prototype=c(g.prototype,{constructor:h(1,A),message:h(1,""),name:h(1,"AggregateError")});s({global:!0,constructor:!0,arity:2},{AggregateError:A})},64502:(t,e,r)=>{"use strict";r(82048)},58545:(t,e,r)=>{"use strict";var s=r(11091),i=r(98828),n=r(11793),a=r(46285),o=r(39298),c=r(20575),u=r(88024),h=r(5543),d=r(56968),l=r(59552),f=r(76264),p=r(20798),m=f("isConcatSpreadable"),g=p>=51||!i((function(){var t=[];return t[m]=!1,t.concat()[0]!==t})),v=function(t){if(!a(t))return!1;var e=t[m];return void 0!==e?!!e:n(t)};s({target:"Array",proto:!0,arity:1,forced:!g||!l("concat")},{concat:function(t){var e,r,s,i,n,a=o(this),l=d(a,0),f=0;for(e=-1,s=arguments.length;e<s;e++)if(v(n=-1===e?a:arguments[e]))for(i=c(n),u(f+i),r=0;r<i;r++,f++)r in n&&h(l,f,n[r]);else u(f+1),h(l,f++,n);return l.length=f,l}})},58618:(t,e,r)=>{"use strict";var s=r(11091),i=r(4762),n=r(42156);s({target:"Array",proto:!0},{copyWithin:i}),n("copyWithin")},36744:(t,e,r)=>{"use strict";var s=r(11091),i=r(29832),n=r(42156);s({target:"Array",proto:!0},{fill:i}),n("fill")},49295:(t,e,r)=>{"use strict";var s=r(11091),i=r(70726).filter;s({target:"Array",proto:!0,forced:!r(59552)("filter")},{filter:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},79175:(t,e,r)=>{"use strict";var s=r(11091),i=r(70726).findIndex,n=r(42156),a="findIndex",o=!0;a in[]&&Array(1)[a]((function(){o=!1})),s({target:"Array",proto:!0,forced:o},{findIndex:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),n(a)},6290:(t,e,r)=>{"use strict";var s=r(11091),i=r(70726).find,n=r(42156),a="find",o=!0;a in[]&&Array(1)[a]((function(){o=!1})),s({target:"Array",proto:!0,forced:o},{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),n(a)},95650:(t,e,r)=>{"use strict";var s=r(11091),i=r(22914);s({target:"Array",proto:!0,forced:[].forEach!==i},{forEach:i})},57277:(t,e,r)=>{"use strict";var s=r(11091),i=r(11229);s({target:"Array",stat:!0,forced:!r(70473)((function(t){Array.from(t)}))},{from:i})},19748:(t,e,r)=>{"use strict";var s=r(11091),i=r(74436).includes,n=r(98828),a=r(42156);s({target:"Array",proto:!0,forced:n((function(){return!Array(1).includes()}))},{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),a("includes")},66391:(t,e,r)=>{"use strict";var s=r(11091),i=r(92361),n=r(74436).indexOf,a=r(77623),o=i([].indexOf),c=!!o&&1/o([1],1,-0)<0;s({target:"Array",proto:!0,forced:c||!a("indexOf")},{indexOf:function(t){var e=arguments.length>1?arguments[1]:void 0;return c?o(this,t,e)||0:n(this,t,e)}})},92425:(t,e,r)=>{"use strict";r(11091)({target:"Array",stat:!0},{isArray:r(11793)})},99363:(t,e,r)=>{"use strict";var s=r(27374),i=r(42156),n=r(93742),a=r(64932),o=r(74284).f,c=r(60183),u=r(59550),h=r(7376),d=r(39447),l="Array Iterator",f=a.set,p=a.getterFor(l);t.exports=c(Array,"Array",(function(t,e){f(this,{type:l,target:s(t),index:0,kind:e})}),(function(){var t=p(this),e=t.target,r=t.index++;if(!e||r>=e.length)return t.target=null,u(void 0,!0);switch(t.kind){case"keys":return u(r,!1);case"values":return u(e[r],!1)}return u([r,e[r]],!1)}),"values");var m=n.Arguments=n.Array;if(i("keys"),i("values"),i("entries"),!h&&d&&"values"!==m.name)try{o(m,"name",{value:"values"})}catch(t){}},30328:(t,e,r)=>{"use strict";var s=r(11091),i=r(17144);s({target:"Array",proto:!0,forced:i!==[].lastIndexOf},{lastIndexOf:i})},6687:(t,e,r)=>{"use strict";var s=r(11091),i=r(70726).map;s({target:"Array",proto:!0,forced:!r(59552)("map")},{map:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},46339:(t,e,r)=>{"use strict";var s=r(11091),i=r(35043).left,n=r(77623),a=r(20798);s({target:"Array",proto:!0,forced:!r(47586)&&a>79&&a<83||!n("reduce")},{reduce:function(t){var e=arguments.length;return i(this,t,e,e>1?arguments[1]:void 0)}})},48559:(t,e,r)=>{"use strict";var s=r(11091),i=r(1907),n=r(11793),a=i([].reverse),o=[1,2];s({target:"Array",proto:!0,forced:String(o)===String(o.reverse())},{reverse:function(){return n(this)&&(this.length=this.length),a(this)}})},62099:(t,e,r)=>{"use strict";var s=r(11091),i=r(11793),n=r(25468),a=r(46285),o=r(34849),c=r(20575),u=r(27374),h=r(5543),d=r(76264),l=r(59552),f=r(93427),p=l("slice"),m=d("species"),g=Array,v=Math.max;s({target:"Array",proto:!0,forced:!p},{slice:function(t,e){var r,s,d,l=u(this),p=c(l),A=o(t,p),w=o(void 0===e?p:e,p);if(i(l)&&(r=l.constructor,(n(r)&&(r===g||i(r.prototype))||a(r)&&null===(r=r[m]))&&(r=void 0),r===g||void 0===r))return f(l,A,w);for(s=new(void 0===r?g:r)(v(w-A,0)),d=0;A<w;A++,d++)A in l&&h(s,d,l[A]);return s.length=d,s}})},10521:(t,e,r)=>{"use strict";var s=r(11091),i=r(70726).some;s({target:"Array",proto:!0,forced:!r(77623)("some")},{some:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},26737:(t,e,r)=>{"use strict";var s=r(11091),i=r(1907),n=r(82159),a=r(39298),o=r(20575),c=r(74535),u=r(90160),h=r(98828),d=r(34321),l=r(77623),f=r(93440),p=r(24328),m=r(20798),g=r(3786),v=[],A=i(v.sort),w=i(v.push),y=h((function(){v.sort(void 0)})),b=h((function(){v.sort(null)})),k=l("sort"),x=!h((function(){if(m)return m<70;if(!(f&&f>3)){if(p)return!0;if(g)return g<603;var t,e,r,s,i="";for(t=65;t<76;t++){switch(e=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:r=3;break;case 68:case 71:r=4;break;default:r=2}for(s=0;s<47;s++)v.push({k:e+s,v:r})}for(v.sort((function(t,e){return e.v-t.v})),s=0;s<v.length;s++)e=v[s].k.charAt(0),i.charAt(i.length-1)!==e&&(i+=e);return"DGBEFHACIJK"!==i}}));s({target:"Array",proto:!0,forced:y||!b||!k||!x},{sort:function(t){void 0!==t&&n(t);var e=a(this);if(x)return void 0===t?A(e):A(e,t);var r,s,i=[],h=o(e);for(s=0;s<h;s++)s in e&&w(i,e[s]);for(d(i,function(t){return function(e,r){return void 0===r?-1:void 0===e?1:void 0!==t?+t(e,r)||0:u(e)>u(r)?1:-1}}(t)),r=o(i),s=0;s<r;)e[s]=i[s++];for(;s<h;)c(e,s++);return e}})},35953:(t,e,r)=>{"use strict";var s=r(11091),i=r(39298),n=r(34849),a=r(65482),o=r(20575),c=r(3130),u=r(88024),h=r(56968),d=r(5543),l=r(74535),f=r(59552)("splice"),p=Math.max,m=Math.min;s({target:"Array",proto:!0,forced:!f},{splice:function(t,e){var r,s,f,g,v,A,w=i(this),y=o(w),b=n(t,y),k=arguments.length;for(0===k?r=s=0:1===k?(r=0,s=y-b):(r=k-2,s=m(p(a(e),0),y-b)),u(y+r-s),f=h(w,s),g=0;g<s;g++)(v=b+g)in w&&d(f,g,w[v]);if(f.length=s,r<s){for(g=b;g<y-s;g++)A=g+r,(v=g+s)in w?w[A]=w[v]:l(w,A);for(g=y;g>y-s+r;g--)l(w,g-1)}else if(r>s)for(g=y-s;g>b;g--)A=g+r-1,(v=g+s-1)in w?w[A]=w[v]:l(w,A);for(g=0;g<r;g++)w[g+b]=arguments[g+2];return c(w,y-s+r),f}})},95362:(t,e,r)=>{"use strict";var s=r(11091),i=r(1907),n=Date,a=i(n.prototype.getTime);s({target:"Date",stat:!0},{now:function(){return a(new n)}})},56648:(t,e,r)=>{"use strict";var s=r(11091),i=r(13930),n=r(39298),a=r(46028),o=r(3701),c=r(45807);s({target:"Date",proto:!0,forced:r(98828)((function(){return null!==new Date(NaN).toJSON()||1!==i(Date.prototype.toJSON,{toISOString:function(){return 1}})}))},{toJSON:function(t){var e=n(this),r=a(e,"number");return"number"!=typeof r||isFinite(r)?"toISOString"in e||"Date"!==c(e)?e.toISOString():i(o,e):null}})},98537:()=>{},79307:(t,e,r)=>{"use strict";var s=r(11091),i=r(44673);s({target:"Function",proto:!0,forced:Function.bind!==i},{bind:i})},12344:(t,e,r)=>{"use strict";var s=r(11091),i=r(45951);s({global:!0,forced:i.globalThis!==i},{globalThis:i})},49721:(t,e,r)=>{"use strict";var s=r(11091),i=r(85582),n=r(76024),a=r(13930),o=r(1907),c=r(98828),u=r(62250),h=r(25594),d=r(93427),l=r(96656),f=r(19846),p=String,m=i("JSON","stringify"),g=o(/./.exec),v=o("".charAt),A=o("".charCodeAt),w=o("".replace),y=o(1.1.toString),b=/[\uD800-\uDFFF]/g,k=/^[\uD800-\uDBFF]$/,x=/^[\uDC00-\uDFFF]$/,_=!f||c((function(){var t=i("Symbol")("stringify detection");return"[null]"!==m([t])||"{}"!==m({a:t})||"{}"!==m(Object(t))})),I=c((function(){return'"\\udf06\\ud834"'!==m("\udf06\ud834")||'"\\udead"'!==m("\udead")})),P=function(t,e){var r=d(arguments),s=l(e);if(u(s)||void 0!==t&&!h(t))return r[1]=function(t,e){if(u(s)&&(e=a(s,this,p(t),e)),!h(e))return e},n(m,null,r)},M=function(t,e,r){var s=v(r,e-1),i=v(r,e+1);return g(k,t)&&!g(x,i)||g(x,t)&&!g(k,s)?"\\u"+y(A(t,0),16):t};m&&s({target:"JSON",stat:!0,arity:3,forced:_||I},{stringify:function(t,e,r){var s=d(arguments),i=n(_?P:m,null,s);return I&&"string"==typeof i?w(i,b,M):i}})},87024:(t,e,r)=>{"use strict";var s=r(45951);r(14840)(s.JSON,"JSON",!0)},68154:(t,e,r)=>{"use strict";r(17081)("Map",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),r(30217))},96835:(t,e,r)=>{"use strict";var s=r(11091),i=r(1907),n=r(82159),a=r(74239),o=r(24823),c=r(15703),u=r(7376),h=r(98828),d=c.Map,l=c.has,f=c.get,p=c.set,m=i([].push),g=u||h((function(){return 1!==d.groupBy("ab",(function(t){return t})).get("a").length}));s({target:"Map",stat:!0,forced:u||g},{groupBy:function(t,e){a(t),n(e);var r=new d,s=0;return o(t,(function(t){var i=e(t,s++);l(r,i)?m(f(r,i),t):p(r,i,[t])})),r}})},14676:(t,e,r)=>{"use strict";r(68154)},73066:(t,e,r)=>{"use strict";r(11091)({target:"Math",stat:!0},{log2:r(54744)})},38172:()=>{},46750:(t,e,r)=>{"use strict";var s=r(11091),i=r(39447),n=r(74284).f;s({target:"Object",stat:!0,forced:Object.defineProperty!==n,sham:!i},{defineProperty:n})},26750:(t,e,r)=>{"use strict";var s=r(11091),i=r(75681),n=r(98828),a=r(46285),o=r(61548).onFreeze,c=Object.freeze;s({target:"Object",stat:!0,forced:n((function(){c(1)})),sham:!i},{freeze:function(t){return c&&a(t)?c(o(t)):t}})},55264:(t,e,r)=>{"use strict";var s=r(11091),i=r(19846),n=r(98828),a=r(87170),o=r(39298);s({target:"Object",stat:!0,forced:!i||n((function(){a.f(1)}))},{getOwnPropertySymbols:function(t){var e=a.f;return e?e(o(t)):[]}})},38966:(t,e,r)=>{"use strict";var s=r(11091),i=r(98828),n=r(39298),a=r(15972),o=r(57382);s({target:"Object",stat:!0,forced:i((function(){a(1)})),sham:!o},{getPrototypeOf:function(t){return a(n(t))}})},83589:(t,e,r)=>{"use strict";var s=r(11091),i=r(39298),n=r(2875);s({target:"Object",stat:!0,forced:r(98828)((function(){n(1)}))},{keys:function(t){return n(i(t))}})},91906:(t,e,r)=>{"use strict";r(11091)({target:"Object",stat:!0},{setPrototypeOf:r(79192)})},86024:()=>{},9502:(t,e,r)=>{"use strict";var s=r(11091),i=r(27213);s({global:!0,forced:parseFloat!==i},{parseFloat:i})},42193:(t,e,r)=>{"use strict";var s=r(11091),i=r(72778);s({global:!0,forced:parseInt!==i},{parseInt:i})},57450:(t,e,r)=>{"use strict";var s=r(11091),i=r(13930),n=r(82159),a=r(56254),o=r(94420),c=r(24823);s({target:"Promise",stat:!0,forced:r(3282)},{allSettled:function(t){var e=this,r=a.f(e),s=r.resolve,u=r.reject,h=o((function(){var r=n(e.resolve),a=[],o=0,u=1;c(t,(function(t){var n=o++,c=!1;u++,i(r,e,t).then((function(t){c||(c=!0,a[n]={status:"fulfilled",value:t},--u||s(a))}),(function(t){c||(c=!0,a[n]={status:"rejected",reason:t},--u||s(a))}))})),--u||s(a)}));return h.error&&u(h.value),r.promise}})},6630:(t,e,r)=>{"use strict";var s=r(11091),i=r(13930),n=r(82159),a=r(56254),o=r(94420),c=r(24823);s({target:"Promise",stat:!0,forced:r(3282)},{all:function(t){var e=this,r=a.f(e),s=r.resolve,u=r.reject,h=o((function(){var r=n(e.resolve),a=[],o=0,h=1;c(t,(function(t){var n=o++,c=!1;h++,i(r,e,t).then((function(t){c||(c=!0,a[n]=t,--h||s(a))}),u)})),--h||s(a)}));return h.error&&u(h.value),r.promise}})},36415:(t,e,r)=>{"use strict";var s=r(11091),i=r(13930),n=r(82159),a=r(85582),o=r(56254),c=r(94420),u=r(24823),h=r(3282),d="No one promise resolved";s({target:"Promise",stat:!0,forced:h},{any:function(t){var e=this,r=a("AggregateError"),s=o.f(e),h=s.resolve,l=s.reject,f=c((function(){var s=n(e.resolve),a=[],o=0,c=1,f=!1;u(t,(function(t){var n=o++,u=!1;c++,i(s,e,t).then((function(t){u||f||(f=!0,h(t))}),(function(t){u||f||(u=!0,a[n]=t,--c||l(new r(a,d)))}))})),--c||l(new r(a,d))}));return f.error&&l(f.value),s.promise}})},91866:(t,e,r)=>{"use strict";var s=r(11091),i=r(7376),n=r(1759).CONSTRUCTOR,a=r(55463),o=r(85582),c=r(62250),u=r(68055),h=a&&a.prototype;if(s({target:"Promise",proto:!0,forced:n,real:!0},{catch:function(t){return this.then(void 0,t)}}),!i&&c(a)){var d=o("Promise").prototype.catch;h.catch!==d&&u(h,"catch",d,{unsafe:!0})}},3825:(t,e,r)=>{"use strict";var s,i,n,a,o=r(11091),c=r(7376),u=r(47586),h=r(45951),d=r(92046),l=r(13930),f=r(68055),p=r(79192),m=r(14840),g=r(47118),v=r(82159),A=r(62250),w=r(46285),y=r(59596),b=r(28450),k=r(49472).set,x=r(52292),_=r(73904),I=r(94420),P=r(1626),M=r(64932),S=r(55463),E=r(1759),T=r(56254),B="Promise",C=E.CONSTRUCTOR,U=E.REJECTION_EVENT,D=E.SUBCLASSING,R=M.getterFor(B),L=M.set,$=S&&S.prototype,O=S,F=$,z=h.TypeError,N=h.document,V=h.process,W=T.f,j=W,H=!!(N&&N.createEvent&&h.dispatchEvent),G="unhandledrejection",Q=function(t){var e;return!(!w(t)||!A(e=t.then))&&e},q=function(t,e){var r,s,i,n=e.value,a=1===e.state,o=a?t.ok:t.fail,c=t.resolve,u=t.reject,h=t.domain;try{o?(a||(2===e.rejection&&Z(e),e.rejection=1),!0===o?r=n:(h&&h.enter(),r=o(n),h&&(h.exit(),i=!0)),r===t.promise?u(new z("Promise-chain cycle")):(s=Q(r))?l(s,r,c,u):c(r)):u(n)}catch(t){h&&!i&&h.exit(),u(t)}},Y=function(t,e){t.notified||(t.notified=!0,x((function(){for(var r,s=t.reactions;r=s.get();)q(r,t);t.notified=!1,e&&!t.rejection&&X(t)})))},K=function(t,e,r){var s,i;H?((s=N.createEvent("Event")).promise=e,s.reason=r,s.initEvent(t,!1,!0),h.dispatchEvent(s)):s={promise:e,reason:r},!U&&(i=h["on"+t])?i(s):t===G&&_("Unhandled promise rejection",r)},X=function(t){l(k,h,(function(){var e,r=t.facade,s=t.value;if(J(t)&&(e=I((function(){u?V.emit("unhandledRejection",s,r):K(G,r,s)})),t.rejection=u||J(t)?2:1,e.error))throw e.value}))},J=function(t){return 1!==t.rejection&&!t.parent},Z=function(t){l(k,h,(function(){var e=t.facade;u?V.emit("rejectionHandled",e):K("rejectionhandled",e,t.value)}))},tt=function(t,e,r){return function(s){t(e,s,r)}},et=function(t,e,r){t.done||(t.done=!0,r&&(t=r),t.value=e,t.state=2,Y(t,!0))},rt=function(t,e,r){if(!t.done){t.done=!0,r&&(t=r);try{if(t.facade===e)throw new z("Promise can't be resolved itself");var s=Q(e);s?x((function(){var r={done:!1};try{l(s,e,tt(rt,r,t),tt(et,r,t))}catch(e){et(r,e,t)}})):(t.value=e,t.state=1,Y(t,!1))}catch(e){et({done:!1},e,t)}}};if(C&&(F=(O=function(t){y(this,F),v(t),l(s,this);var e=R(this);try{t(tt(rt,e),tt(et,e))}catch(t){et(e,t)}}).prototype,(s=function(t){L(this,{type:B,done:!1,notified:!1,parent:!1,reactions:new P,rejection:!1,state:0,value:null})}).prototype=f(F,"then",(function(t,e){var r=R(this),s=W(b(this,O));return r.parent=!0,s.ok=!A(t)||t,s.fail=A(e)&&e,s.domain=u?V.domain:void 0,0===r.state?r.reactions.add(s):x((function(){q(s,r)})),s.promise})),i=function(){var t=new s,e=R(t);this.promise=t,this.resolve=tt(rt,e),this.reject=tt(et,e)},T.f=W=function(t){return t===O||t===n?new i(t):j(t)},!c&&A(S)&&$!==Object.prototype)){a=$.then,D||f($,"then",(function(t,e){var r=this;return new O((function(t,e){l(a,r,t,e)})).then(t,e)}),{unsafe:!0});try{delete $.constructor}catch(t){}p&&p($,F)}o({global:!0,constructor:!0,wrap:!0,forced:C},{Promise:O}),n=d.Promise,m(O,B,!1,!0),g(B)},47714:(t,e,r)=>{"use strict";var s=r(11091),i=r(7376),n=r(55463),a=r(98828),o=r(85582),c=r(62250),u=r(28450),h=r(83569),d=r(68055),l=n&&n.prototype;if(s({target:"Promise",proto:!0,real:!0,forced:!!n&&a((function(){l.finally.call({then:function(){}},(function(){}))}))},{finally:function(t){var e=u(this,o("Promise")),r=c(t);return this.then(r?function(r){return h(e,t()).then((function(){return r}))}:t,r?function(r){return h(e,t()).then((function(){throw r}))}:t)}}),!i&&c(n)){var f=o("Promise").prototype.finally;l.finally!==f&&d(l,"finally",f,{unsafe:!0})}},65931:(t,e,r)=>{"use strict";r(3825),r(6630),r(91866),r(72736),r(17286),r(16761)},72736:(t,e,r)=>{"use strict";var s=r(11091),i=r(13930),n=r(82159),a=r(56254),o=r(94420),c=r(24823);s({target:"Promise",stat:!0,forced:r(3282)},{race:function(t){var e=this,r=a.f(e),s=r.reject,u=o((function(){var a=n(e.resolve);c(t,(function(t){i(a,e,t).then(r.resolve,s)}))}));return u.error&&s(u.value),r.promise}})},17286:(t,e,r)=>{"use strict";var s=r(11091),i=r(56254);s({target:"Promise",stat:!0,forced:r(1759).CONSTRUCTOR},{reject:function(t){var e=i.f(this);return(0,e.reject)(t),e.promise}})},16761:(t,e,r)=>{"use strict";var s=r(11091),i=r(85582),n=r(7376),a=r(55463),o=r(1759).CONSTRUCTOR,c=r(83569),u=i("Promise"),h=n&&!o;s({target:"Promise",stat:!0,forced:n||o},{resolve:function(t){return c(h&&this===u?a:this,t)}})},37380:(t,e,r)=>{"use strict";var s=r(11091),i=r(45951),n=r(76024),a=r(93427),o=r(56254),c=r(82159),u=r(94420),h=i.Promise,d=!1;s({target:"Promise",stat:!0,forced:!h||!h.try||u((function(){h.try((function(t){d=8===t}),8)})).error||!d},{try:function(t){var e=arguments.length>1?a(arguments,1):[],r=o.f(this),s=u((function(){return n(c(t),void 0,e)}));return(s.error?r.reject:r.resolve)(s.value),r.promise}})},25823:(t,e,r)=>{"use strict";var s=r(11091),i=r(56254);s({target:"Promise",stat:!0},{withResolvers:function(){var t=i.f(this);return{promise:t.promise,resolve:t.resolve,reject:t.reject}}})},85205:()=>{},51398:()=>{},9164:()=>{},71074:(t,e,r)=>{"use strict";var s=r(11091),i=r(1907),n=r(34849),a=RangeError,o=String.fromCharCode,c=String.fromCodePoint,u=i([].join);s({target:"String",stat:!0,arity:1,forced:!!c&&1!==c.length},{fromCodePoint:function(t){for(var e,r=[],s=arguments.length,i=0;s>i;){if(e=+arguments[i++],n(e,1114111)!==e)throw new a(e+" is not a valid code point");r[i]=e<65536?o(e):o(55296+((e-=65536)>>10),e%1024+56320)}return u(r,"")}})},19770:(t,e,r)=>{"use strict";var s=r(11091),i=r(1907),n=r(12074),a=r(74239),o=r(90160),c=r(25735),u=i("".indexOf);s({target:"String",proto:!0,forced:!c("includes")},{includes:function(t){return!!~u(o(a(this)),o(n(t)),arguments.length>1?arguments[1]:void 0)}})},7057:(t,e,r)=>{"use strict";var s=r(11470).charAt,i=r(90160),n=r(64932),a=r(60183),o=r(59550),c="String Iterator",u=n.set,h=n.getterFor(c);a(String,"String",(function(t){u(this,{type:c,string:i(t),index:0})}),(function(){var t,e=h(this),r=e.string,i=e.index;return i>=r.length?o(void 0,!0):(t=s(r,i),e.index+=t.length,o(t,!1))}))},8592:(t,e,r)=>{"use strict";r(11091)({target:"String",proto:!0},{repeat:r(69314)})},50929:(t,e,r)=>{"use strict";var s=r(11091),i=r(13930),n=r(1907),a=r(74239),o=r(62250),c=r(46285),u=r(72087),h=r(90160),d=r(29367),l=r(40663),f=r(67703),p=r(76264),m=r(7376),g=p("replace"),v=TypeError,A=n("".indexOf),w=n("".replace),y=n("".slice),b=Math.max;s({target:"String",proto:!0},{replaceAll:function(t,e){var r,s,n,p,k,x,_,I,P,M,S=a(this),E=0,T="";if(c(t)){if((r=u(t))&&(s=h(a(l(t))),!~A(s,"g")))throw new v("`.replaceAll` does not allow non-global regexes");if(n=d(t,g))return i(n,t,S,e);if(m&&r)return w(h(S),t,e)}for(p=h(S),k=h(t),(x=o(e))||(e=h(e)),_=k.length,I=b(1,_),P=A(p,k);-1!==P;)M=x?h(e(k,P,p)):f(k,p,P,[],void 0,e),T+=y(p,E,P)+M,E=P+_,P=P+I>p.length?-1:A(p,k,P+I);return E<p.length&&(T+=y(p,E)),T}})},21995:()=>{},50727:(t,e,r)=>{"use strict";var s=r(11091),i=r(65993).trim;s({target:"String",proto:!0,forced:r(95819)("trim")},{trim:function(){return i(this)}})},65546:(t,e,r)=>{"use strict";r(20366)("asyncDispose")},3997:(t,e,r)=>{"use strict";r(20366)("asyncIterator")},23674:(t,e,r)=>{"use strict";var s=r(11091),i=r(45951),n=r(13930),a=r(1907),o=r(7376),c=r(39447),u=r(19846),h=r(98828),d=r(49724),l=r(88280),f=r(36624),p=r(27374),m=r(70470),g=r(90160),v=r(75817),A=r(58075),w=r(2875),y=r(24443),b=r(25407),k=r(87170),x=r(13846),_=r(74284),I=r(42220),P=r(22574),M=r(68055),S=r(89251),E=r(85816),T=r(92522),B=r(38530),C=r(6499),U=r(76264),D=r(80560),R=r(20366),L=r(83467),$=r(14840),O=r(64932),F=r(70726).forEach,z=T("hidden"),N="Symbol",V="prototype",W=O.set,j=O.getterFor(N),H=Object[V],G=i.Symbol,Q=G&&G[V],q=i.RangeError,Y=i.TypeError,K=i.QObject,X=x.f,J=_.f,Z=b.f,tt=P.f,et=a([].push),rt=E("symbols"),st=E("op-symbols"),it=E("wks"),nt=!K||!K[V]||!K[V].findChild,at=function(t,e,r){var s=X(H,e);s&&delete H[e],J(t,e,r),s&&t!==H&&J(H,e,s)},ot=c&&h((function(){return 7!==A(J({},"a",{get:function(){return J(this,"a",{value:7}).a}})).a}))?at:J,ct=function(t,e){var r=rt[t]=A(Q);return W(r,{type:N,tag:t,description:e}),c||(r.description=e),r},ut=function(t,e,r){t===H&&ut(st,e,r),f(t);var s=m(e);return f(r),d(rt,s)?(r.enumerable?(d(t,z)&&t[z][s]&&(t[z][s]=!1),r=A(r,{enumerable:v(0,!1)})):(d(t,z)||J(t,z,v(1,A(null))),t[z][s]=!0),ot(t,s,r)):J(t,s,r)},ht=function(t,e){f(t);var r=p(e),s=w(r).concat(pt(r));return F(s,(function(e){c&&!n(dt,r,e)||ut(t,e,r[e])})),t},dt=function(t){var e=m(t),r=n(tt,this,e);return!(this===H&&d(rt,e)&&!d(st,e))&&(!(r||!d(this,e)||!d(rt,e)||d(this,z)&&this[z][e])||r)},lt=function(t,e){var r=p(t),s=m(e);if(r!==H||!d(rt,s)||d(st,s)){var i=X(r,s);return!i||!d(rt,s)||d(r,z)&&r[z][s]||(i.enumerable=!0),i}},ft=function(t){var e=Z(p(t)),r=[];return F(e,(function(t){d(rt,t)||d(B,t)||et(r,t)})),r},pt=function(t){var e=t===H,r=Z(e?st:p(t)),s=[];return F(r,(function(t){!d(rt,t)||e&&!d(H,t)||et(s,rt[t])})),s};u||(M(Q=(G=function(){if(l(Q,this))throw new Y("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?g(arguments[0]):void 0,e=C(t),r=function(t){var s=void 0===this?i:this;s===H&&n(r,st,t),d(s,z)&&d(s[z],e)&&(s[z][e]=!1);var a=v(1,t);try{ot(s,e,a)}catch(t){if(!(t instanceof q))throw t;at(s,e,a)}};return c&&nt&&ot(H,e,{configurable:!0,set:r}),ct(e,t)})[V],"toString",(function(){return j(this).tag})),M(G,"withoutSetter",(function(t){return ct(C(t),t)})),P.f=dt,_.f=ut,I.f=ht,x.f=lt,y.f=b.f=ft,k.f=pt,D.f=function(t){return ct(U(t),t)},c&&(S(Q,"description",{configurable:!0,get:function(){return j(this).description}}),o||M(H,"propertyIsEnumerable",dt,{unsafe:!0}))),s({global:!0,constructor:!0,wrap:!0,forced:!u,sham:!u},{Symbol:G}),F(w(it),(function(t){R(t)})),s({target:N,stat:!0,forced:!u},{useSetter:function(){nt=!0},useSimple:function(){nt=!1}}),s({target:"Object",stat:!0,forced:!u,sham:!c},{create:function(t,e){return void 0===e?A(t):ht(A(t),e)},defineProperty:ut,defineProperties:ht,getOwnPropertyDescriptor:lt}),s({target:"Object",stat:!0,forced:!u},{getOwnPropertyNames:ft}),L(),$(G,N),B[z]=!0},75084:()=>{},32499:(t,e,r)=>{"use strict";r(20366)("dispose")},13313:(t,e,r)=>{"use strict";var s=r(11091),i=r(85582),n=r(49724),a=r(90160),o=r(85816),c=r(84411),u=o("string-to-symbol-registry"),h=o("symbol-to-string-registry");s({target:"Symbol",stat:!0,forced:!c},{for:function(t){var e=a(t);if(n(u,e))return u[e];var r=i("Symbol")(e);return u[e]=r,h[r]=e,r}})},2596:(t,e,r)=>{"use strict";r(20366)("hasInstance")},5721:(t,e,r)=>{"use strict";r(20366)("isConcatSpreadable")},44954:(t,e,r)=>{"use strict";r(20366)("iterator")},94452:(t,e,r)=>{"use strict";r(23674),r(13313),r(10751),r(49721),r(55264)},10751:(t,e,r)=>{"use strict";var s=r(11091),i=r(49724),n=r(25594),a=r(4640),o=r(85816),c=r(84411),u=o("symbol-to-string-registry");s({target:"Symbol",stat:!0,forced:!c},{keyFor:function(t){if(!n(t))throw new TypeError(a(t)+" is not a symbol");if(i(u,t))return u[t]}})},73377:(t,e,r)=>{"use strict";r(20366)("matchAll")},44123:(t,e,r)=>{"use strict";r(20366)("match")},72230:(t,e,r)=>{"use strict";r(20366)("replace")},15344:(t,e,r)=>{"use strict";r(20366)("search")},51660:(t,e,r)=>{"use strict";r(20366)("species")},4610:(t,e,r)=>{"use strict";r(20366)("split")},33669:(t,e,r)=>{"use strict";var s=r(20366),i=r(83467);s("toPrimitive"),i()},44810:(t,e,r)=>{"use strict";var s=r(85582),i=r(20366),n=r(14840);i("toStringTag"),n(s("Symbol"),"Symbol")},93325:(t,e,r)=>{"use strict";r(20366)("unscopables")},20768:(t,e,r)=>{"use strict";var s=r(76264),i=r(74284).f,n=s("metadata"),a=Function.prototype;void 0===a[n]&&i(a,n,{value:null})},60397:(t,e,r)=>{"use strict";r(12344)},36038:(t,e,r)=>{"use strict";r(50929)},8549:(t,e,r)=>{"use strict";r(65546)},81697:(t,e,r)=>{"use strict";r(20366)("customMatcher")},87152:(t,e,r)=>{"use strict";r(32499)},13939:(t,e,r)=>{"use strict";r(11091)({target:"Symbol",stat:!0},{isRegisteredSymbol:r(12595)})},63422:(t,e,r)=>{"use strict";r(11091)({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:r(12595)})},21785:(t,e,r)=>{"use strict";r(11091)({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:r(69197)})},70036:(t,e,r)=>{"use strict";r(11091)({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:r(69197)})},28703:(t,e,r)=>{"use strict";r(20366)("matcher")},86878:(t,e,r)=>{"use strict";r(20366)("metadataKey")},11372:(t,e,r)=>{"use strict";r(20366)("metadata")},84664:(t,e,r)=>{"use strict";r(20366)("observable")},59671:(t,e,r)=>{"use strict";r(20366)("patternMatch")},50359:(t,e,r)=>{"use strict";r(20366)("replaceAll")},3871:(t,e,r)=>{"use strict";var s=r(11091),i=r(45951),n=r(49472).clear;s({global:!0,bind:!0,enumerable:!0,forced:i.clearImmediate!==n},{clearImmediate:n})},60237:()=>{},12560:(t,e,r)=>{"use strict";r(99363);var s=r(19287),i=r(45951),n=r(14840),a=r(93742);for(var o in s)n(i[o],o),a[o]=a.Array},34351:(t,e,r)=>{"use strict";r(3871),r(22910)},22910:(t,e,r)=>{"use strict";var s=r(11091),i=r(45951),n=r(49472).set,a=r(70485),o=i.setImmediate?a(n,!1):n;s({global:!0,bind:!0,enumerable:!0,forced:i.setImmediate!==o},{setImmediate:o})},21978:(t,e,r)=>{"use strict";var s=r(11091),i=r(45951),n=r(70485)(i.setInterval,!0);s({global:!0,bind:!0,forced:i.setInterval!==n},{setInterval:n})},66496:(t,e,r)=>{"use strict";var s=r(11091),i=r(45951),n=r(70485)(i.setTimeout,!0);s({global:!0,bind:!0,forced:i.setTimeout!==n},{setTimeout:n})},73342:(t,e,r)=>{"use strict";r(21978),r(66496)},67105:(t,e,r)=>{"use strict";r(99363),r(71074);var s=r(11091),i=r(45951),n=r(52098),a=r(85582),o=r(13930),c=r(1907),u=r(39447),h=r(34791),d=r(68055),l=r(89251),f=r(12802),p=r(14840),m=r(47181),g=r(64932),v=r(59596),A=r(62250),w=r(49724),y=r(28311),b=r(73948),k=r(36624),x=r(46285),_=r(90160),I=r(58075),P=r(75817),M=r(10300),S=r(73448),E=r(59550),T=r(24787),B=r(76264),C=r(34321),U=B("iterator"),D="URLSearchParams",R=D+"Iterator",L=g.set,$=g.getterFor(D),O=g.getterFor(R),F=n("fetch"),z=n("Request"),N=n("Headers"),V=z&&z.prototype,W=N&&N.prototype,j=i.TypeError,H=i.encodeURIComponent,G=String.fromCharCode,Q=a("String","fromCodePoint"),q=parseInt,Y=c("".charAt),K=c([].join),X=c([].push),J=c("".replace),Z=c([].shift),tt=c([].splice),et=c("".split),rt=c("".slice),st=c(/./.exec),it=/\+/g,nt=/^[0-9a-f]+$/i,at=function(t,e){var r=rt(t,e,e+2);return st(nt,r)?q(r,16):NaN},ot=function(t){for(var e=0,r=128;r>0&&t&r;r>>=1)e++;return e},ct=function(t){var e=null;switch(t.length){case 1:e=t[0];break;case 2:e=(31&t[0])<<6|63&t[1];break;case 3:e=(15&t[0])<<12|(63&t[1])<<6|63&t[2];break;case 4:e=(7&t[0])<<18|(63&t[1])<<12|(63&t[2])<<6|63&t[3]}return e>1114111?null:e},ut=function(t){for(var e=(t=J(t,it," ")).length,r="",s=0;s<e;){var i=Y(t,s);if("%"===i){if("%"===Y(t,s+1)||s+3>e){r+="%",s++;continue}var n=at(t,s+1);if(n!=n){r+=i,s++;continue}s+=2;var a=ot(n);if(0===a)i=G(n);else{if(1===a||a>4){r+="",s++;continue}for(var o=[n],c=1;c<a&&!(3+ ++s>e||"%"!==Y(t,s));){var u=at(t,s+1);if(u!=u){s+=3;break}if(u>191||u<128)break;X(o,u),s+=2,c++}if(o.length!==a){r+="";continue}var h=ct(o);null===h?r+="":i=Q(h)}}r+=i,s++}return r},ht=/[!'()~]|%20/g,dt={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},lt=function(t){return dt[t]},ft=function(t){return J(H(t),ht,lt)},pt=m((function(t,e){L(this,{type:R,target:$(t).entries,index:0,kind:e})}),D,(function(){var t=O(this),e=t.target,r=t.index++;if(!e||r>=e.length)return t.target=null,E(void 0,!0);var s=e[r];switch(t.kind){case"keys":return E(s.key,!1);case"values":return E(s.value,!1)}return E([s.key,s.value],!1)}),!0),mt=function(t){this.entries=[],this.url=null,void 0!==t&&(x(t)?this.parseObject(t):this.parseQuery("string"==typeof t?"?"===Y(t,0)?rt(t,1):t:_(t)))};mt.prototype={type:D,bindURL:function(t){this.url=t,this.update()},parseObject:function(t){var e,r,s,i,n,a,c,u=this.entries,h=S(t);if(h)for(r=(e=M(t,h)).next;!(s=o(r,e)).done;){if(n=(i=M(k(s.value))).next,(a=o(n,i)).done||(c=o(n,i)).done||!o(n,i).done)throw new j("Expected sequence with length 2");X(u,{key:_(a.value),value:_(c.value)})}else for(var d in t)w(t,d)&&X(u,{key:d,value:_(t[d])})},parseQuery:function(t){if(t)for(var e,r,s=this.entries,i=et(t,"&"),n=0;n<i.length;)(e=i[n++]).length&&(r=et(e,"="),X(s,{key:ut(Z(r)),value:ut(K(r,"="))}))},serialize:function(){for(var t,e=this.entries,r=[],s=0;s<e.length;)t=e[s++],X(r,ft(t.key)+"="+ft(t.value));return K(r,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var gt=function(){v(this,vt);var t=L(this,new mt(arguments.length>0?arguments[0]:void 0));u||(this.size=t.entries.length)},vt=gt.prototype;if(f(vt,{append:function(t,e){var r=$(this);T(arguments.length,2),X(r.entries,{key:_(t),value:_(e)}),u||this.length++,r.updateURL()},delete:function(t){for(var e=$(this),r=T(arguments.length,1),s=e.entries,i=_(t),n=r<2?void 0:arguments[1],a=void 0===n?n:_(n),o=0;o<s.length;){var c=s[o];if(c.key!==i||void 0!==a&&c.value!==a)o++;else if(tt(s,o,1),void 0!==a)break}u||(this.size=s.length),e.updateURL()},get:function(t){var e=$(this).entries;T(arguments.length,1);for(var r=_(t),s=0;s<e.length;s++)if(e[s].key===r)return e[s].value;return null},getAll:function(t){var e=$(this).entries;T(arguments.length,1);for(var r=_(t),s=[],i=0;i<e.length;i++)e[i].key===r&&X(s,e[i].value);return s},has:function(t){for(var e=$(this).entries,r=T(arguments.length,1),s=_(t),i=r<2?void 0:arguments[1],n=void 0===i?i:_(i),a=0;a<e.length;){var o=e[a++];if(o.key===s&&(void 0===n||o.value===n))return!0}return!1},set:function(t,e){var r=$(this);T(arguments.length,1);for(var s,i=r.entries,n=!1,a=_(t),o=_(e),c=0;c<i.length;c++)(s=i[c]).key===a&&(n?tt(i,c--,1):(n=!0,s.value=o));n||X(i,{key:a,value:o}),u||(this.size=i.length),r.updateURL()},sort:function(){var t=$(this);C(t.entries,(function(t,e){return t.key>e.key?1:-1})),t.updateURL()},forEach:function(t){for(var e,r=$(this).entries,s=y(t,arguments.length>1?arguments[1]:void 0),i=0;i<r.length;)s((e=r[i++]).value,e.key,this)},keys:function(){return new pt(this,"keys")},values:function(){return new pt(this,"values")},entries:function(){return new pt(this,"entries")}},{enumerable:!0}),d(vt,U,vt.entries,{name:"entries"}),d(vt,"toString",(function(){return $(this).serialize()}),{enumerable:!0}),u&&l(vt,"size",{get:function(){return $(this).entries.length},configurable:!0,enumerable:!0}),p(gt,D),s({global:!0,constructor:!0,forced:!h},{URLSearchParams:gt}),!h&&A(N)){var At=c(W.has),wt=c(W.set),yt=function(t){if(x(t)){var e,r=t.body;if(b(r)===D)return e=t.headers?new N(t.headers):new N,At(e,"content-type")||wt(e,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),I(t,{body:P(0,_(r)),headers:P(0,e)})}return t};if(A(F)&&s({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(t){return F(t,arguments.length>1?yt(arguments[1]):{})}}),A(z)){var bt=function(t){return v(this,V),new z(t,arguments.length>1?yt(arguments[1]):{})};V.constructor=bt,bt.prototype=V,s({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:bt})}}t.exports={URLSearchParams:gt,getState:$}},75042:()=>{},17649:()=>{},66299:(t,e,r)=>{"use strict";r(67105)},83604:()=>{},28669:(t,e,r)=>{"use strict";var s=r(11091),i=r(85582),n=r(98828),a=r(24787),o=r(90160),c=r(34791),u=i("URL"),h=c&&n((function(){u.canParse()})),d=n((function(){return 1!==u.canParse.length}));s({target:"URL",stat:!0,forced:!h||d},{canParse:function(t){var e=a(arguments.length,1),r=o(t),s=e<2||void 0===arguments[1]?void 0:o(arguments[1]);try{return!!new u(r,s)}catch(t){return!1}}})},56909:(t,e,r)=>{"use strict";r(7057);var s,i=r(11091),n=r(39447),a=r(34791),o=r(45951),c=r(28311),u=r(1907),h=r(68055),d=r(89251),l=r(59596),f=r(49724),p=r(29538),m=r(11229),g=r(93427),v=r(11470).codeAt,A=r(79156),w=r(90160),y=r(14840),b=r(24787),k=r(67105),x=r(64932),_=x.set,I=x.getterFor("URL"),P=k.URLSearchParams,M=k.getState,S=o.URL,E=o.TypeError,T=o.parseInt,B=Math.floor,C=Math.pow,U=u("".charAt),D=u(/./.exec),R=u([].join),L=u(1.1.toString),$=u([].pop),O=u([].push),F=u("".replace),z=u([].shift),N=u("".split),V=u("".slice),W=u("".toLowerCase),j=u([].unshift),H="Invalid scheme",G="Invalid host",Q="Invalid port",q=/[a-z]/i,Y=/[\d+-.a-z]/i,K=/\d/,X=/^0x/i,J=/^[0-7]+$/,Z=/^\d+$/,tt=/^[\da-f]+$/i,et=/[\0\t\n\r #%/:<>?@[\\\]^|]/,rt=/[\0\t\n\r #/:<>?@[\\\]^|]/,st=/^[\u0000-\u0020]+/,it=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,nt=/[\t\n\r]/g,at=function(t){var e,r,s,i;if("number"==typeof t){for(e=[],r=0;r<4;r++)j(e,t%256),t=B(t/256);return R(e,".")}if("object"==typeof t){for(e="",s=function(t){for(var e=null,r=1,s=null,i=0,n=0;n<8;n++)0!==t[n]?(i>r&&(e=s,r=i),s=null,i=0):(null===s&&(s=n),++i);return i>r?s:e}(t),r=0;r<8;r++)i&&0===t[r]||(i&&(i=!1),s===r?(e+=r?":":"::",i=!0):(e+=L(t[r],16),r<7&&(e+=":")));return"["+e+"]"}return t},ot={},ct=p({},ot,{" ":1,'"':1,"<":1,">":1,"`":1}),ut=p({},ct,{"#":1,"?":1,"{":1,"}":1}),ht=p({},ut,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),dt=function(t,e){var r=v(t,0);return r>32&&r<127&&!f(e,t)?t:encodeURIComponent(t)},lt={ftp:21,file:null,http:80,https:443,ws:80,wss:443},ft=function(t,e){var r;return 2===t.length&&D(q,U(t,0))&&(":"===(r=U(t,1))||!e&&"|"===r)},pt=function(t){var e;return t.length>1&&ft(V(t,0,2))&&(2===t.length||"/"===(e=U(t,2))||"\\"===e||"?"===e||"#"===e)},mt=function(t){return"."===t||"%2e"===W(t)},gt={},vt={},At={},wt={},yt={},bt={},kt={},xt={},_t={},It={},Pt={},Mt={},St={},Et={},Tt={},Bt={},Ct={},Ut={},Dt={},Rt={},Lt={},$t=function(t,e,r){var s,i,n,a=w(t);if(e){if(i=this.parse(a))throw new E(i);this.searchParams=null}else{if(void 0!==r&&(s=new $t(r,!0)),i=this.parse(a,null,s))throw new E(i);(n=M(new P)).bindURL(this),this.searchParams=n}};$t.prototype={type:"URL",parse:function(t,e,r){var i,n,a,o,c,u=this,h=e||gt,d=0,l="",p=!1,v=!1,A=!1;for(t=w(t),e||(u.scheme="",u.username="",u.password="",u.host=null,u.port=null,u.path=[],u.query=null,u.fragment=null,u.cannotBeABaseURL=!1,t=F(t,st,""),t=F(t,it,"$1")),t=F(t,nt,""),i=m(t);d<=i.length;){switch(n=i[d],h){case gt:if(!n||!D(q,n)){if(e)return H;h=At;continue}l+=W(n),h=vt;break;case vt:if(n&&(D(Y,n)||"+"===n||"-"===n||"."===n))l+=W(n);else{if(":"!==n){if(e)return H;l="",h=At,d=0;continue}if(e&&(u.isSpecial()!==f(lt,l)||"file"===l&&(u.includesCredentials()||null!==u.port)||"file"===u.scheme&&!u.host))return;if(u.scheme=l,e)return void(u.isSpecial()&&lt[u.scheme]===u.port&&(u.port=null));l="","file"===u.scheme?h=Et:u.isSpecial()&&r&&r.scheme===u.scheme?h=wt:u.isSpecial()?h=xt:"/"===i[d+1]?(h=yt,d++):(u.cannotBeABaseURL=!0,O(u.path,""),h=Dt)}break;case At:if(!r||r.cannotBeABaseURL&&"#"!==n)return H;if(r.cannotBeABaseURL&&"#"===n){u.scheme=r.scheme,u.path=g(r.path),u.query=r.query,u.fragment="",u.cannotBeABaseURL=!0,h=Lt;break}h="file"===r.scheme?Et:bt;continue;case wt:if("/"!==n||"/"!==i[d+1]){h=bt;continue}h=_t,d++;break;case yt:if("/"===n){h=It;break}h=Ut;continue;case bt:if(u.scheme=r.scheme,n===s)u.username=r.username,u.password=r.password,u.host=r.host,u.port=r.port,u.path=g(r.path),u.query=r.query;else if("/"===n||"\\"===n&&u.isSpecial())h=kt;else if("?"===n)u.username=r.username,u.password=r.password,u.host=r.host,u.port=r.port,u.path=g(r.path),u.query="",h=Rt;else{if("#"!==n){u.username=r.username,u.password=r.password,u.host=r.host,u.port=r.port,u.path=g(r.path),u.path.length--,h=Ut;continue}u.username=r.username,u.password=r.password,u.host=r.host,u.port=r.port,u.path=g(r.path),u.query=r.query,u.fragment="",h=Lt}break;case kt:if(!u.isSpecial()||"/"!==n&&"\\"!==n){if("/"!==n){u.username=r.username,u.password=r.password,u.host=r.host,u.port=r.port,h=Ut;continue}h=It}else h=_t;break;case xt:if(h=_t,"/"!==n||"/"!==U(l,d+1))continue;d++;break;case _t:if("/"!==n&&"\\"!==n){h=It;continue}break;case It:if("@"===n){p&&(l="%40"+l),p=!0,a=m(l);for(var y=0;y<a.length;y++){var b=a[y];if(":"!==b||A){var k=dt(b,ht);A?u.password+=k:u.username+=k}else A=!0}l=""}else if(n===s||"/"===n||"?"===n||"#"===n||"\\"===n&&u.isSpecial()){if(p&&""===l)return"Invalid authority";d-=m(l).length+1,l="",h=Pt}else l+=n;break;case Pt:case Mt:if(e&&"file"===u.scheme){h=Bt;continue}if(":"!==n||v){if(n===s||"/"===n||"?"===n||"#"===n||"\\"===n&&u.isSpecial()){if(u.isSpecial()&&""===l)return G;if(e&&""===l&&(u.includesCredentials()||null!==u.port))return;if(o=u.parseHost(l))return o;if(l="",h=Ct,e)return;continue}"["===n?v=!0:"]"===n&&(v=!1),l+=n}else{if(""===l)return G;if(o=u.parseHost(l))return o;if(l="",h=St,e===Mt)return}break;case St:if(!D(K,n)){if(n===s||"/"===n||"?"===n||"#"===n||"\\"===n&&u.isSpecial()||e){if(""!==l){var x=T(l,10);if(x>65535)return Q;u.port=u.isSpecial()&&x===lt[u.scheme]?null:x,l=""}if(e)return;h=Ct;continue}return Q}l+=n;break;case Et:if(u.scheme="file","/"===n||"\\"===n)h=Tt;else{if(!r||"file"!==r.scheme){h=Ut;continue}switch(n){case s:u.host=r.host,u.path=g(r.path),u.query=r.query;break;case"?":u.host=r.host,u.path=g(r.path),u.query="",h=Rt;break;case"#":u.host=r.host,u.path=g(r.path),u.query=r.query,u.fragment="",h=Lt;break;default:pt(R(g(i,d),""))||(u.host=r.host,u.path=g(r.path),u.shortenPath()),h=Ut;continue}}break;case Tt:if("/"===n||"\\"===n){h=Bt;break}r&&"file"===r.scheme&&!pt(R(g(i,d),""))&&(ft(r.path[0],!0)?O(u.path,r.path[0]):u.host=r.host),h=Ut;continue;case Bt:if(n===s||"/"===n||"\\"===n||"?"===n||"#"===n){if(!e&&ft(l))h=Ut;else if(""===l){if(u.host="",e)return;h=Ct}else{if(o=u.parseHost(l))return o;if("localhost"===u.host&&(u.host=""),e)return;l="",h=Ct}continue}l+=n;break;case Ct:if(u.isSpecial()){if(h=Ut,"/"!==n&&"\\"!==n)continue}else if(e||"?"!==n)if(e||"#"!==n){if(n!==s&&(h=Ut,"/"!==n))continue}else u.fragment="",h=Lt;else u.query="",h=Rt;break;case Ut:if(n===s||"/"===n||"\\"===n&&u.isSpecial()||!e&&("?"===n||"#"===n)){if(".."===(c=W(c=l))||"%2e."===c||".%2e"===c||"%2e%2e"===c?(u.shortenPath(),"/"===n||"\\"===n&&u.isSpecial()||O(u.path,"")):mt(l)?"/"===n||"\\"===n&&u.isSpecial()||O(u.path,""):("file"===u.scheme&&!u.path.length&&ft(l)&&(u.host&&(u.host=""),l=U(l,0)+":"),O(u.path,l)),l="","file"===u.scheme&&(n===s||"?"===n||"#"===n))for(;u.path.length>1&&""===u.path[0];)z(u.path);"?"===n?(u.query="",h=Rt):"#"===n&&(u.fragment="",h=Lt)}else l+=dt(n,ut);break;case Dt:"?"===n?(u.query="",h=Rt):"#"===n?(u.fragment="",h=Lt):n!==s&&(u.path[0]+=dt(n,ot));break;case Rt:e||"#"!==n?n!==s&&("'"===n&&u.isSpecial()?u.query+="%27":u.query+="#"===n?"%23":dt(n,ot)):(u.fragment="",h=Lt);break;case Lt:n!==s&&(u.fragment+=dt(n,ct))}d++}},parseHost:function(t){var e,r,s;if("["===U(t,0)){if("]"!==U(t,t.length-1))return G;if(e=function(t){var e,r,s,i,n,a,o,c=[0,0,0,0,0,0,0,0],u=0,h=null,d=0,l=function(){return U(t,d)};if(":"===l()){if(":"!==U(t,1))return;d+=2,h=++u}for(;l();){if(8===u)return;if(":"!==l()){for(e=r=0;r<4&&D(tt,l());)e=16*e+T(l(),16),d++,r++;if("."===l()){if(0===r)return;if(d-=r,u>6)return;for(s=0;l();){if(i=null,s>0){if(!("."===l()&&s<4))return;d++}if(!D(K,l()))return;for(;D(K,l());){if(n=T(l(),10),null===i)i=n;else{if(0===i)return;i=10*i+n}if(i>255)return;d++}c[u]=256*c[u]+i,2!=++s&&4!==s||u++}if(4!==s)return;break}if(":"===l()){if(d++,!l())return}else if(l())return;c[u++]=e}else{if(null!==h)return;d++,h=++u}}if(null!==h)for(a=u-h,u=7;0!==u&&a>0;)o=c[u],c[u--]=c[h+a-1],c[h+--a]=o;else if(8!==u)return;return c}(V(t,1,-1)),!e)return G;this.host=e}else if(this.isSpecial()){if(t=A(t),D(et,t))return G;if(e=function(t){var e,r,s,i,n,a,o,c=N(t,".");if(c.length&&""===c[c.length-1]&&c.length--,(e=c.length)>4)return t;for(r=[],s=0;s<e;s++){if(""===(i=c[s]))return t;if(n=10,i.length>1&&"0"===U(i,0)&&(n=D(X,i)?16:8,i=V(i,8===n?1:2)),""===i)a=0;else{if(!D(10===n?Z:8===n?J:tt,i))return t;a=T(i,n)}O(r,a)}for(s=0;s<e;s++)if(a=r[s],s===e-1){if(a>=C(256,5-e))return null}else if(a>255)return null;for(o=$(r),s=0;s<r.length;s++)o+=r[s]*C(256,3-s);return o}(t),null===e)return G;this.host=e}else{if(D(rt,t))return G;for(e="",r=m(t),s=0;s<r.length;s++)e+=dt(r[s],ot);this.host=e}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"===this.scheme},includesCredentials:function(){return""!==this.username||""!==this.password},isSpecial:function(){return f(lt,this.scheme)},shortenPath:function(){var t=this.path,e=t.length;!e||"file"===this.scheme&&1===e&&ft(t[0],!0)||t.length--},serialize:function(){var t=this,e=t.scheme,r=t.username,s=t.password,i=t.host,n=t.port,a=t.path,o=t.query,c=t.fragment,u=e+":";return null!==i?(u+="//",t.includesCredentials()&&(u+=r+(s?":"+s:"")+"@"),u+=at(i),null!==n&&(u+=":"+n)):"file"===e&&(u+="//"),u+=t.cannotBeABaseURL?a[0]:a.length?"/"+R(a,"/"):"",null!==o&&(u+="?"+o),null!==c&&(u+="#"+c),u},setHref:function(t){var e=this.parse(t);if(e)throw new E(e);this.searchParams.update()},getOrigin:function(){var t=this.scheme,e=this.port;if("blob"===t)try{return new Ot(t.path[0]).origin}catch(t){return"null"}return"file"!==t&&this.isSpecial()?t+"://"+at(this.host)+(null!==e?":"+e:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(t){this.parse(w(t)+":",gt)},getUsername:function(){return this.username},setUsername:function(t){var e=m(w(t));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var r=0;r<e.length;r++)this.username+=dt(e[r],ht)}},getPassword:function(){return this.password},setPassword:function(t){var e=m(w(t));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var r=0;r<e.length;r++)this.password+=dt(e[r],ht)}},getHost:function(){var t=this.host,e=this.port;return null===t?"":null===e?at(t):at(t)+":"+e},setHost:function(t){this.cannotBeABaseURL||this.parse(t,Pt)},getHostname:function(){var t=this.host;return null===t?"":at(t)},setHostname:function(t){this.cannotBeABaseURL||this.parse(t,Mt)},getPort:function(){var t=this.port;return null===t?"":w(t)},setPort:function(t){this.cannotHaveUsernamePasswordPort()||(""===(t=w(t))?this.port=null:this.parse(t,St))},getPathname:function(){var t=this.path;return this.cannotBeABaseURL?t[0]:t.length?"/"+R(t,"/"):""},setPathname:function(t){this.cannotBeABaseURL||(this.path=[],this.parse(t,Ct))},getSearch:function(){var t=this.query;return t?"?"+t:""},setSearch:function(t){""===(t=w(t))?this.query=null:("?"===U(t,0)&&(t=V(t,1)),this.query="",this.parse(t,Rt)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var t=this.fragment;return t?"#"+t:""},setHash:function(t){""!==(t=w(t))?("#"===U(t,0)&&(t=V(t,1)),this.fragment="",this.parse(t,Lt)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var Ot=function(t){var e=l(this,Ft),r=b(arguments.length,1)>1?arguments[1]:void 0,s=_(e,new $t(t,!1,r));n||(e.href=s.serialize(),e.origin=s.getOrigin(),e.protocol=s.getProtocol(),e.username=s.getUsername(),e.password=s.getPassword(),e.host=s.getHost(),e.hostname=s.getHostname(),e.port=s.getPort(),e.pathname=s.getPathname(),e.search=s.getSearch(),e.searchParams=s.getSearchParams(),e.hash=s.getHash())},Ft=Ot.prototype,zt=function(t,e){return{get:function(){return I(this)[t]()},set:e&&function(t){return I(this)[e](t)},configurable:!0,enumerable:!0}};if(n&&(d(Ft,"href",zt("serialize","setHref")),d(Ft,"origin",zt("getOrigin")),d(Ft,"protocol",zt("getProtocol","setProtocol")),d(Ft,"username",zt("getUsername","setUsername")),d(Ft,"password",zt("getPassword","setPassword")),d(Ft,"host",zt("getHost","setHost")),d(Ft,"hostname",zt("getHostname","setHostname")),d(Ft,"port",zt("getPort","setPort")),d(Ft,"pathname",zt("getPathname","setPathname")),d(Ft,"search",zt("getSearch","setSearch")),d(Ft,"searchParams",zt("getSearchParams")),d(Ft,"hash",zt("getHash","setHash"))),h(Ft,"toJSON",(function(){return I(this).serialize()}),{enumerable:!0}),h(Ft,"toString",(function(){return I(this).serialize()}),{enumerable:!0}),S){var Nt=S.createObjectURL,Vt=S.revokeObjectURL;Nt&&h(Ot,"createObjectURL",c(Nt,S)),Vt&&h(Ot,"revokeObjectURL",c(Vt,S))}y(Ot,"URL"),i({global:!0,constructor:!0,forced:!a,sham:!n},{URL:Ot})},33487:(t,e,r)=>{"use strict";r(56909)},58670:(t,e,r)=>{"use strict";var s=r(11091),i=r(85582),n=r(24787),a=r(90160),o=r(34791),c=i("URL");s({target:"URL",stat:!0,forced:!o},{parse:function(t){var e=n(arguments.length,1),r=a(t),s=e<2||void 0===arguments[1]?void 0:a(arguments[1]);try{return new c(r,s)}catch(t){return null}}})},94783:()=>{},86450:(t,e,r)=>{"use strict";var s=r(93607);t.exports=s},18402:(t,e,r)=>{"use strict";var s=r(13531);t.exports=s},41969:(t,e,r)=>{"use strict";var s=r(22092);t.exports=s},41374:(t,e,r)=>{"use strict";var s=r(86535);t.exports=s},37867:(t,e,r)=>{"use strict";var s=r(5354);t.exports=s},91960:(t,e,r)=>{"use strict";var s=r(22671);t.exports=s},19709:(t,e,r)=>{"use strict";var s=r(23034);t.exports=s},50530:(t,e,r)=>{"use strict";var s=r(45837);t.exports=s},25619:(t,e,r)=>{"use strict";var s=r(44094);t.exports=s},40587:(t,e,r)=>{"use strict";var s=r(22948);t.exports=s},22616:(t,e,r)=>{"use strict";var s=r(33155);t.exports=s},70228:(t,e,r)=>{"use strict";var s=r(9635);t.exports=s},99617:(t,e,r)=>{"use strict";var s=r(63246);t.exports=s},64055:(t,e,r)=>{"use strict";var s=r(60974);t.exports=s},24525:(t,e,r)=>{"use strict";var s=r(73948),i=r(49724),n=r(88280),a=r(41969);r(60237);var o=Array.prototype,c={DOMTokenList:!0,NodeList:!0};t.exports=function(t){var e=t.forEach;return t===o||n(o,t)&&e===o.forEach||i(c,s(t))?a:e}},76343:(t,e,r)=>{"use strict";var s=r(36880);t.exports=s},77852:(t,e,r)=>{"use strict";var s=r(44507);t.exports=s},21618:(t,e,r)=>{"use strict";r(12560);var s=r(73948),i=r(49724),n=r(88280),a=r(41374),o=Array.prototype,c={DOMTokenList:!0,NodeList:!0};t.exports=function(t){var e=t.keys;return t===o||n(o,t)&&e===o.keys||i(c,s(t))?a:e}},61785:(t,e,r)=>{"use strict";var s=r(12860);t.exports=s},98894:(t,e,r)=>{"use strict";var s=r(39299);t.exports=s},79528:(t,e,r)=>{"use strict";var s=r(28823);t.exports=s},465:(t,e,r)=>{"use strict";var s=r(7766);t.exports=s},92222:(t,e,r)=>{"use strict";var s=r(86823);t.exports=s},14106:(t,e,r)=>{"use strict";var s=r(98059);t.exports=s},6686:(t,e,r)=>{"use strict";var s=r(40303);t.exports=s},82990:(t,e,r)=>{"use strict";var s=r(69685);t.exports=s},81086:(t,e,r)=>{"use strict";var s=r(12757);t.exports=s},40026:(t,e,r)=>{"use strict";var s=r(95029);t.exports=s},34598:(t,e,r)=>{"use strict";var s=r(8661);t.exports=s},76660:(t,e,r)=>{"use strict";var s=r(10317);t.exports=s},60075:(t,e,r)=>{"use strict";var s=r(99968);r(12560),t.exports=s},18801:(t,e,r)=>{"use strict";var s=r(1206);t.exports=s},68251:(t,e,r)=>{"use strict";var s=r(21926);t.exports=s},56609:(t,e,r)=>{"use strict";var s=r(12118);t.exports=s},49261:(t,e,r)=>{"use strict";var s=r(56286);t.exports=s},76490:(t,e,r)=>{"use strict";var s=r(19661);t.exports=s},27777:(t,e,r)=>{"use strict";var s=r(61418);t.exports=s},86462:(t,e,r)=>{"use strict";var s=r(99929);t.exports=s},91921:(t,e,r)=>{"use strict";var s=r(84326);t.exports=s},45204:(t,e,r)=>{"use strict";var s=r(97027);r(12560),t.exports=s},89270:(t,e,r)=>{"use strict";r(34351);var s=r(92046);t.exports=s.setImmediate},70568:(t,e,r)=>{"use strict";r(73342);var s=r(92046);t.exports=s.setTimeout},24139:(t,e,r)=>{"use strict";var s=r(83842);r(12560),t.exports=s},27045:(t,e,r)=>{"use strict";var s=r(1730);r(12560),t.exports=s},10070:(t,e,r)=>{"use strict";var s=r(31661);t.exports=s},40071:(t,e,r)=>{"use strict";var s=r(17458);t.exports=s},49792:(t,e,r)=>{"use strict";var s=r(56908);t.exports=s},59076:(t,e,r)=>{"use strict";r(66299),r(75042),r(17649),r(83604);var s=r(92046);t.exports=s.URLSearchParams},56908:(t,e,r)=>{"use strict";r(59076),r(33487),r(28669),r(58670),r(94783);var s=r(92046);t.exports=s.URL},49859:(t,e,r)=>{"use strict";r.d(e,{A:()=>n});var s=r(84997),i=r(94290);function n(t,e,r){return(e=(0,i.A)(e))in t?s(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}},49399:(t,e,r)=>{"use strict";r.d(e,{A:()=>n});var s=r(22204),i=r(19280);function n(t,e){if("object"!=(0,s.A)(t)||!t)return t;var r=t[i];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=(0,s.A)(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}},94290:(t,e,r)=>{"use strict";r.d(e,{A:()=>n});var s=r(22204),i=r(49399);function n(t){var e=(0,i.A)(t,"string");return"symbol"==(0,s.A)(e)?e:e+""}},22204:(t,e,r)=>{"use strict";r.d(e,{A:()=>n});var s=r(32321),i=r(22231);function n(t){return n="function"==typeof s&&"symbol"==typeof i?function(t){return typeof t}:function(t){return t&&"function"==typeof s&&t.constructor===s&&t!==s.prototype?"symbol":typeof t},n(t)}}},s={};function i(t){var e=s[t];if(void 0!==e)return e.exports;var n=s[t]={exports:{}};return r[t].call(n.exports,n,n.exports,i),n.exports}i.m=r,i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var r in e)i.o(e,r)&&!i.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},i.f={},i.e=t=>Promise.all(Object.keys(i.f).reduce(((e,r)=>(i.f[r](t,e),e)),[])),i.u=t=>t+".avtranscoder.js",i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),t={},e="AVTranscoder:",i.l=(r,s,n,a)=>{if(t[r])t[r].push(s);else{var o,c;if(void 0!==n)for(var u=document.getElementsByTagName("script"),h=0;h<u.length;h++){var d=u[h];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==e+n){o=d;break}}o||(c=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,i.nc&&o.setAttribute("nonce",i.nc),o.setAttribute("data-webpack",e+n),o.src=r),t[r]=[s];var l=(e,s)=>{o.onerror=o.onload=null,clearTimeout(f);var i=t[r];if(delete t[r],o.parentNode&&o.parentNode.removeChild(o),i&&i.forEach((t=>t(s))),e)return e(s)},f=setTimeout(l.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=l.bind(null,o.onerror),o.onload=l.bind(null,o.onload),c&&document.head.appendChild(o)}},i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;i.g.importScripts&&(t=i.g.location+"");var e=i.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var r=e.getElementsByTagName("script");if(r.length)for(var s=r.length-1;s>-1&&(!t||!/^http(s?):/.test(t));)t=r[s--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=t})(),(()=>{var t={792:0};i.f.j=(e,r)=>{var s=i.o(t,e)?t[e]:void 0;if(0!==s)if(s)r.push(s[2]);else{var n=new Promise(((r,i)=>s=t[e]=[r,i]));r.push(s[2]=n);var a=i.p+i.u(e),o=new Error;i.l(a,(r=>{if(i.o(t,e)&&(0!==(s=t[e])&&(t[e]=void 0),s)){var n=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;o.message="Loading chunk "+e+" failed.\n("+n+": "+a+")",o.name="ChunkLoadError",o.type=n,o.request=a,s[1](o)}}),"chunk-"+e,e)}};var e=(e,r)=>{var s,n,[a,o,c]=r,u=0;if(a.some((e=>0!==t[e]))){for(s in o)i.o(o,s)&&(i.m[s]=o[s]);c&&c(i)}for(e&&e(r);u<a.length;u++)n=a[u],i.o(t,n)&&t[n]&&t[n][0](),t[n]=0},r=self.webpackChunkAVTranscoder=self.webpackChunkAVTranscoder||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))})();var n=i(51170);return n.default})()));