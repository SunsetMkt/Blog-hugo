"use strict";(self.webpackChunkAVTranscoder=self.webpackChunkAVTranscoder||[]).push([[70],{85947:(t,e,n)=>{n.d(e,{A:()=>s});var i=n(49859);class s{constructor(){(0,i.A)(this,"type",-1),(0,i.A)(this,"onStreamAdd",void 0)}async destroy(t){}}},78070:(t,e,n)=>{n.r(e),n.d(e,{default:()=>x});var i=n(49859),s=n(11265),r=n.n(s),a=n(71426),c=n.n(a),l=n(50932),u=n(4624),h=n(9705),o=n(85947),d=n(14686),g=n(37837),f=n(71517),B=n(72739),I=n(50011),p=n(54825);class x extends o.A{constructor(){super(),(0,i.A)(this,"type",19),(0,i.A)(this,"queue",void 0),(0,i.A)(this,"index",void 0)}init(t){this.queue=[]}async readChunk(t){let e="";const n=t.ioReader.getPos();for(;;){const n=await t.ioReader.readLine();if(""===n)break;e+=n+"\n"}return{chunk:r()(e).call(e),pos:n}}async readHeader(t){const e=t.createStream();e.codecpar.codecId=94225,e.codecpar.codecType=3,e.timeBase.den=1e3,e.timeBase.num=1,this.index=0;let n=BigInt(0);try{for(;;){var i,s;const{chunk:a,pos:c}=await this.readChunk(t);if(""===a)continue;const l=a.split("\n");let u=r()(i=l.shift()).call(i),h=l.shift().split(/--?>/);const o=(0,p.t)(h[0]),d=(0,p.t)(h[1]);if(d<=o)continue;const g=r()(s=l.join("\n")).call(s);if(!g)continue;e.nbFrames++,e.duration=d;const f={identifier:u,context:g,startTs:o,endTs:d,pos:c};o>=n?(this.queue.push(f),n=o):B._(this.queue,f,(t=>t.startTs<f.startTs?1:-1))}}catch(t){return 0}}async readAVPacket(t,e){var n;if(!this.queue.length)return h.LR;if(this.index>=this.queue.length)return-1048576;const i=c()(n=t.streams).call(n,(t=>3===t.codecpar.codecType)),s=this.queue[this.index++];if(l.M[15](e+32,i.index),l.M[15](e+76,i.timeBase.den),l.M[15](e+72,i.timeBase.num),l.M[17](e+16,s.startTs),l.M[17](e+8,s.startTs),l.M[17](e+48,s.endTs-s.startTs),s.identifier){const t=I.encode(s.identifier),n=(0,g.sY)(t.length);(0,d.lW)(n,t.length,t),(0,f.Ow)(e,16,n,t.length)}const r=I.encode(s.context),a=(0,g.sY)(r.length);return(0,d.lW)(a,r.length,r),(0,f.NX)(e,a,r.length),0}async seek(t,e,n,i){if(2&i)return BigInt(h.E$);if(n<=BigInt(0))return this.index=0,BigInt(0);const s=B.El(this.queue,(t=>t.startTs>n?-1:1));if(s>=0){for(u.Yz(`seek in cues, found index: ${s}, pts: ${this.queue[s].startTs}, pos: ${this.queue[s].pos}`,"src/avformat/formats/ISubRipFormat.ts",201),this.index=Math.max(s-1,0);this.index>0&&(this.queue[this.index-1].startTs===this.queue[this.index].startTs||this.queue[this.index-1].endTs>n);)this.index--;return BigInt(0)}return BigInt(h.LR)}getAnalyzeStreamsCount(){return 1}}},54825:(t,e,n)=>{n.d(e,{j:()=>r,t:()=>a});var i=n(11265),s=n.n(i);function r(t){var e,n,i;if(!t)return-BigInt(1);let r=(t=s()(t).call(t)).split(":"),a=BigInt(0);var c;if(3===r.length&&(a+=BigInt(+s()(c=r.shift()).call(c))*BigInt(36e5)),a+=BigInt(+s()(e=r.shift()).call(e))*BigInt(6e4),r=s()(n=r.shift()).call(n).split("."),a+=BigInt(+s()(i=r.shift()).call(i))*BigInt(1e3),r.length){var l,u;let t=s()(l=r[0]).call(l).length,e=BigInt(+s()(u=r.shift()).call(u));1===t?e*=BigInt(100):2===t&&(e*=BigInt(10)),a+=e}return a}function a(t){var e,n,i;if(!t)return-BigInt(1);let r=(t=s()(t).call(t)).split(":"),a=BigInt(0);var c;if(3===r.length&&(a+=BigInt(+s()(c=r.shift()).call(c))*BigInt(36e5)),a+=BigInt(+s()(e=r.shift()).call(e))*BigInt(6e4),r=s()(n=r.shift()).call(n).split(","),a+=BigInt(+s()(i=r.shift()).call(i))*BigInt(1e3),r.length){var l,u;let t=s()(l=r[0]).call(l).length,e=BigInt(+s()(u=r.shift()).call(u));1===t?e*=BigInt(100):2===t&&(e*=BigInt(10)),a+=e}return a}}}]);