"use strict";(self.webpackChunkAVTranscoder=self.webpackChunkAVTranscoder||[]).push([[945],{117:(e,t,i)=>{i.d(t,{LV:()=>w,ML:()=>I,nF:()=>m,yr:()=>g});var a=i(7127),r=i(9983),s=i(2320),n=i(7890),o=i(3674),c=i(9906),d=i(3270),h=i(449),f=i(495),p=i(1755),l=i(2171);const u="packages/avformat/src/formats/riff/iriff.ts";function A(e,t){let i=n.gi[e];return i?(65541===i?i=d.uU(t,!1,!1,-2):65557===i&&(i=d.uU(t,!0,!1,0)),69633===i&&8===t&&(i=69676),i):0}async function g(e,t,i){if(i<14)return c.z3("wav format size < 14",u,51),f.LR;s.M[15](t,1);const a=await e.readUint16();let n=await e.readUint16();const d=await e.readUint32();let h=8*await e.readUint32();const g=await e.readUint16();if(s.M[15](t+136,d),s.M[15](t+140,g),14===i?s.M[15](t+40,8):s.M[15](t+40,await e.readUint16()),65534===a?s.M[8](t+8,0):(s.M[8](t+8,a),s.M[15](t+4,A(a,r.f[15](t+40)))),i>=18&&357!==a){let n=await e.readUint16();i-=18,n=Math.min(i,n),n>=22&&65534===a&&(await e.skip(22),n-=22,i-=22),n>0&&(s.M[20](t+12,(0,p.sY)(n)),s.M[15](t+16,n),await e.readBuffer(n,(0,o.JW)(r.f[20](t+12),n)),i-=n),i>0&&await e.skip(i)}else if(357===a&&i>=32){i-=4,s.M[20](t+12,(0,p.sY)(i)),s.M[15](t+16,i),await e.readBuffer(i,(0,o.JW)(r.f[20](t+12),i));const a=l.E3(r.f[20](t+12)+4);if(s.M[15](t+136,l.Y0(r.f[20](t+12)+12)),n=0,h=0,i<8+20*a)return f.LR;for(let e=0;e<a;e++)n+=r.f[2](r.f[20](t+12)+(8+20*e+17))}return s.M[17](t+32,BigInt(h)),r.f[15](t+136)<0?(c.z3(`Invalid sample rate: ${r.f[15](t+136)}`,u,131),f.LR):(86065===r.f[15](t+4)&&(n=0,s.M[15](t+136,0)),69643==r.f[15](t+4)&&r.f[15](t+136)&&s.M[15](t+40,Number(BigInt.asIntN(32,r.f[17](t+32)))/r.f[15](t+136)),n!=r.f[15](t+116)&&(s.M[15](t+112,0),s.M[15](t+116,n)),0)}async function w(e,t,i){const a=e.getPos()+t;for(;e.getPos()<a;){const t=await e.readString(4),a=await e.readUint32(),r=await e.readString(a);i[t]=r,a%2&&await e.skip(1)}}async function m(e,t){const i=await e.readUint32();return t.codecpar.width=await e.readUint32(),t.codecpar.height=await e.readUint32(),await e.skip(2),t.codecpar.bitsPerCodedSample=await e.readUint16(),t.codecpar.codecTag=await e.readUint32(),await e.skip(20),i}async function I(e,t,i){if(i<14)return c.z3("wav header size < 14",u,199),f.LR;let s,d,g;if(h.bl(t.codecpar[a.o9]+112),s=await e.readUint16(),(357!==s||e.isBigEndian())&&(d=await e.readUint16(),t.codecpar.sampleRate=await e.readUint32(),g=8*await e.readUint32(),t.codecpar.blockAlign=await e.readUint16()),t.codecpar.bitsPerCodedSample=14===i?8:await e.readUint16(),65534===s?t.codecpar.codecTag=0:(t.codecpar.codecTag=s,t.codecpar.codecId=A(s,t.codecpar.bitsPerCodedSample)),i>=18&&357!=s){let r=await e.readUint16();if(e.isBigEndian())return c.z3("WAVEFORMATEX support for RIFX files",u,231),f.LR;i-=18,r=Math.min(r,i),r>=22&&65534==s&&(await async function(e,t){const i=await e.readUint16();i&&(t.codecpar.bitsPerCodedSample=i);const r=await e.readUint32();h.ML(t.codecpar[a.o9]+112,BigInt(r));const s=(await e.readHex(16)).toLocaleUpperCase();var o;s.slice(4)===n.IC||s.slice(4)===n.mO||s.slice(4)===n.dd?(t.codecpar.codecTag=await e.readUint32(),t.codecpar.codecId=A(t.codecpar.codecTag,t.codecpar.bitsPerCodedSample)):(t.codecpar.codecId=(o=s,n.t6[o.toLocaleUpperCase()]||0),t.codecpar.codecId||c.R8(`unknown subformat: ${s}`,u,192))}(e,t),r-=22,i-=22),r>0&&(t.codecpar.extradata&&(0,p.Eb)(t.codecpar.extradata),t.codecpar.extradataSize=r,t.codecpar.extradata=(0,p.sY)(r),await e.readBuffer(r,(0,o.JW)(t.codecpar.extradata,r)),i-=r),i>0&&await e.skip(i)}else if(357==s&&i>=32){i-=4,t.codecpar.extradata&&(0,p.Eb)(t.codecpar.extradata),t.codecpar.extradataSize=i,t.codecpar.extradata=(0,p.sY)(i),await e.readBuffer(i,(0,o.JW)(t.codecpar.extradata,i));const a=l.E3(t.codecpar.extradata+4);if(t.codecpar.sampleRate=l.Y0(t.codecpar.extradata+12),i<8+20*a)return f.LR;for(let e=0;e<a;e++)d+=r.f[2](t.codecpar.extradata+(8+20*e+17))}return t.codecpar.bitrate=BigInt(0|g),t.codecpar.sampleRate<0?(c.z3(`Invalid sample rate ${t.codecpar.sampleRate}`,u,274),f.LR):(86065===t.codecpar.codecId&&(d=0,t.codecpar.sampleRate=0),69643===t.codecpar.codecId&&t.codecpar.sampleRate&&(t.codecpar.bitsPerCodedSample=Number(t.codecpar.bitrate)/t.codecpar.sampleRate),d!==t.codecpar.chLayout.nbChannels&&(h.bl(t.codecpar[a.o9]+112),t.codecpar.chLayout.order=0,t.codecpar.chLayout.nbChannels=d),0)}},1945:(e,t,i)=>{i.d(t,{A:()=>r});var a=i(4467);class r{constructor(){(0,a.A)(this,"type",-1),(0,a.A)(this,"onStreamAdd",void 0)}async destroy(e){}}},2945:(e,t,i)=>{i.r(t),i.d(t,{default:()=>w});var a=i(4467),r=i(7127),s=i(9983),n=i(2320),o=i(1945),c=i(117),d=i(4906),h=i(3674),f=i(495),p=i(4187),l=i(1755),u=i(3270),A=i(9906);const g="packages/avformat/src/formats/IWavFormat.ts";class w extends o.A{constructor(){super(),(0,a.A)(this,"type",16),(0,a.A)(this,"dataSize",void 0),(0,a.A)(this,"sampleCount",void 0),(0,a.A)(this,"pcmStartPos",void 0),(0,a.A)(this,"currentPts",void 0)}init(e){e.ioReader.setEndian(!1)}async readHeader(e){const t=await e.ioReader.readString(4);switch(t){case"RIFF":case"RF64":case"BW64":break;case"RIFX":e.ioReader.setEndian(!0);break;default:return A.z3("the file format is not wav",g,89),f.LR}await e.ioReader.skip(4);const i=await e.ioReader.readString(4);if("WAVE"!==i)return A.z3(`invalid start code ${i} in RIFF header`,g,99),f.LR;if("RF64"===t||"BW64"===t){if("ds64"!==await e.ioReader.readString(4))return f.LR;const t=await e.ioReader.readUint32();if(t<24)return f.LR;if(await e.ioReader.skip(8),this.dataSize=await e.ioReader.readUint64(),this.sampleCount=await e.ioReader.readUint64(),this.dataSize<0||this.sampleCount<0)return A.z3("negative data_size and/or sample_count in ds64",g,119),f.LR;await e.ioReader.skip(t-24)}const a=e.createStream(),s=await e.ioReader.fileSize();for(;e.ioReader.getPos()<s;){const t=await e.ioReader.readString(4),i=await e.ioReader.readUint32();if("fmt "===t){let t=await(0,c.yr)(e.ioReader,a.codecpar[r.o9],i);if(t<0)return t}else if("data"===t){if(this.pcmStartPos=e.ioReader.getPos(),this.dataSize||(this.dataSize=BigInt(Math.floor(i))),this.pcmStartPos+this.dataSize===s)break;await e.ioReader.seek(this.pcmStartPos+this.dataSize)}else if("ID3 "===t||"id3 "===t){await e.ioReader.skip(3);const t={version:0,revision:0,flags:0};t.version=await e.ioReader.readUint8(),t.revision=await e.ioReader.readUint8(),t.flags=await e.ioReader.readUint8();const a=(127&await e.ioReader.readUint8())<<21|(127&await e.ioReader.readUint8())<<14|(127&await e.ioReader.readUint8())<<7|127&await e.ioReader.readUint8();e.ioReader.setEndian(!0),await d.qg(e.ioReader,a,t,e.metadata),e.metadata.apic&&(d.hm(e,e.metadata.apic,t),delete e.metadata.apic),e.ioReader.setEndian(!1),a+10<i&&await e.ioReader.skip(i-10-a)}else{if(e.ioReader.getPos()+BigInt(Math.floor(i))===s)break;await e.ioReader.seek(e.ioReader.getPos()+BigInt(Math.floor(i)))}}return this.sampleCount||(this.sampleCount=(this.dataSize<<BigInt(3))/BigInt(a.codecpar.chLayout.nbChannels*u.MZ(a.codecpar.codecId))),a.timeBase.den=a.codecpar.sampleRate,a.timeBase.num=1,this.sampleCount&&(a.duration=this.sampleCount),this.currentPts=BigInt(0),await e.ioReader.seek(this.pcmStartPos),0}async readAVPacket(e,t){if(e.ioReader.getPos()>=this.pcmStartPos+this.dataSize)return-1048576;const i=e.streams.find((e=>e.codecpar.codecType=1));try{let a=1024*i.codecpar.chLayout.nbChannels*u.MZ(i.codecpar.codecId)>>>3;const r=this.pcmStartPos+this.dataSize-e.ioReader.getPos();a>r&&(a=Number(r));const o=(0,l.sY)(a);(0,p.NX)(t,o,a),n.M[17](t+16,this.currentPts),n.M[17](t+8,this.currentPts),n.M[17](t+56,e.ioReader.getPos()),await e.ioReader.readBuffer(a,(0,h.JW)(o,a)),n.M[15](t+32,i.index),n.M[15](t+76,i.timeBase.den),n.M[15](t+72,i.timeBase.num);const c=(a<<3)/i.codecpar.chLayout.nbChannels/u.MZ(i.codecpar.codecId)>>>0;return n.M[17](t+48,BigInt(c)),this.currentPts+=s.f[17](t+48),0}catch(t){return-1048576!==e.ioReader.error&&-1048572!==e.ioReader.error?(A.z3(`read packet error, ${t}`,g,250),f.LR):e.ioReader.error}}async seek(e,t,i,a){const r=e.ioReader.getPos();if(2&a){const s=await e.ioReader.fileSize();return s<=BigInt(0)?BigInt(f.E$):(i<BigInt(0)?i=BigInt(0):i>s&&(i=s),await e.ioReader.seek(i),4&a||(this.currentPts=(i-this.pcmStartPos<<BigInt(3))/BigInt(t.codecpar.chLayout.nbChannels*u.MZ(t.codecpar.codecId))),r)}{const a=this.pcmStartPos+(i*BigInt(t.codecpar.chLayout.nbChannels*u.MZ(t.codecpar.codecId))>>BigInt(3));return await e.ioReader.seek(a),this.currentPts=i,r}}getAnalyzeStreamsCount(){return 1}}},3270:(e,t,i)=>{function a(e,t,i,a){if(e<=0||e>64)return 0;if(t)switch(e){case 32:return i?65556:65557;case 64:return i?65558:65559;default:return 0}else if(e+=7,a&1<<(e>>>=3)-1)switch(e){case 1:return 65540;case 2:return i?65537:65536;case 3:return i?65549:65548;case 4:return i?65545:65544;case 8:return i?65568:65567;default:return 0}else switch(e){case 1:return 65541;case 2:return i?65539:65538;case 3:return i?65551:65550;case 4:return i?65547:65546;default:return 0}}function r(e){switch(e){case 69649:return 2;case 69648:return 3;case 69647:case 69633:case 69632:case 69645:case 69638:return 4;default:return function(e){switch(e){case 86070:case 86071:case 69674:case 69644:case 69678:case 69651:case 69661:case 69677:case 69655:case 69664:case 69636:case 69675:case 69660:case 69646:case 69670:return 4;case 86089:case 86090:case 86091:case 86092:case 65543:case 65542:case 65571:case 65540:case 65563:case 65572:case 65541:case 81924:case 81926:return 8;case 65537:case 65566:case 65536:case 65554:case 65539:case 65538:return 16;case 65552:case 65549:case 65548:case 65564:case 65551:case 65550:return 24;case 65545:case 65544:case 65565:case 65547:case 65546:case 65556:case 65557:case 65570:case 65569:return 32;case 65558:case 65559:case 65568:case 65567:return 64;default:return 0}}(e)}}i.d(t,{MZ:()=>r,uU:()=>a})},4906:(e,t,i)=>{i.d(t,{In:()=>g,M9:()=>S,VO:()=>U,fz:()=>w,hm:()=>B,qg:()=>b});var a=i(9983),r=i(2320),s=i(3674),n=i(4187),o=i(1755),c=i(3321),d=i(665),h=i(9906),f=i(4405),p=i(3737),l=i(8370),u=i(5815);const A="packages/avformat/src/formats/mp3/id3v2.ts",g={JPG:7,PNG:61,"image/gif":97,"image/jpeg":7,"image/jpg":7,"image/png":61,"image/tiff":96,"image/bmp":78,"image/webp":171},w=["Other","32x32 pixels 'file icon'","Other file icon","Cover (front)","Cover (back)","Leaflet page","Media (e.g. label side of CD)","Lead artist/lead performer/soloist","Artist/performer","Conductor","Band/Orchestra","Composer","Lyricist/text writer","Recording Location","During recording","During performance","Movie/video screen capture","A bright coloured fish","Illustration","Band/artist logotype","Publisher/Studio logotype"];function m(e,t){e.writeUint8(t>>21&127),e.writeUint8(t>>14&127),e.writeUint8(t>>7&127),e.writeUint8(127&t)}function I(e,t){let i="utf-8";return 0===e?i="iso-8859-1":1===e?i="utf-16":2===e&&(i="utf-16be"),new TextDecoder(i).decode(t)}function P(e){return(127&e)+((32512&e)>>1)+((8323072&e)>>2)+((2130706432&e)>>3)}async function M(e,t){await e.seek(t);const i=await e.readString(4);return/^[A-Z0-9]+$/.test(i)}async function b(e,t,i,a){const r=2!==i.version,s=r?10:6;let n=e.getPos()+BigInt(0|t);async function o(){await e.skip(Number(BigInt.asIntN(32,n-e.getPos())))}if(r&&64&i.flags){let a=await async function(e,t){let i=0;for(;t--;)i=(i<<7)+(127&await e.readUint8());return i}(e,4);if(4===i.version&&(a-=4),a<0)return h.z3("invalid extended header length",A,149),await o();if(await e.skip(a),(t-=a+4)<0)return h.z3("extended header too long",A,155),await o()}for(;t>s;){let n,o;if(r){if(n=await e.readString(4),o=await e.readUint32(),!o){h.z3("invalid frame size",A,168);break}if(4===i.version&&o>127)if(o<t){await e.flush();const t=e.getPos();if(!(1&e.flags||6+o<e.remainingLength()))break;if(await M(e,t+BigInt(2)+BigInt(P(o))))o=P(o);else if(!await M(e,t+BigInt(2)+BigInt(o)))break;await e.seek(t)}else o=P(o);await e.readUint16()}else n=await e.readString(3),o=await e.readUint24();if("APIC"===n)a.apic||(a.apic=[]),a.apic.push(await e.readBuffer(o));else if("USLT"===n){const t=await e.readUint8(),i=await e.readString(3),r=await e.readBuffer(o-4);a.lyrics=`${i} ${I(t,r)}`}else if("COMM"===n||"COM"===n){const t=await e.readUint8(),i=await e.readString(3),r=await e.readBuffer(o-4);a.comment=`${i} ${I(t,r)}`}else if("PRIV"===n){const t=e.getPos(),i=[];for(;;){const t=await e.readUint8();if(0===t)break;i.push(t)}const r=f.decode(new Uint8Array(i));let s;s="com.apple.streaming.transportStreamTimestamp"===r?await e.readUint64():await e.readBuffer(o-Number(e.getPos()-t)),a[r]=s}else{let t;switch(t="T"===n[0]?I(await e.readUint8(),await e.readBuffer(o-1)):await e.readBuffer(o),n){case"TIT2":case"TT2":a.title=t;break;case"TPE1":case"TP1":a.artist=t;break;case"TPE2":case"TP2":a.albumArtist=t;break;case"TPOS":a.disc=t;break;case"TCOP":a.copyright=t;break;case"TALB":case"TAL":a.album=t;break;case"TRCK":case"TRK":a.track=t;break;case"TYER":case"TDRL":case"TDRC":a.date=t;break;case"COMM":case"COM":a.comment=t;break;case"TCON":case"TCO":a.genre=t;break;case"TSSE":case"TEN":a.encoder=t;break;case"TCOM":a.composer=t;break;case"TENC":a.vendor=t;break;case"TLAN":a.language=t;break;case"TPE3":case"TP3":a.performer=t;break;case"TPUB":a.publisher=t;break;case"TCMP":case"TCP":a.compilation=t;break;case"TDEN":a.creationTime=t;break;case"TSOA":a.albumSort=t;break;case"TSOP":a.artistSort=t;break;case"TSOT":a.titleSort=t;break;case"TIT1":a.grouping=t;break;default:a[n]=t}}t-=o+s}4==i.version&&16&i.flags&&(n+=BigInt(10)),await e.skip(Number(BigInt.asIntN(32,n-e.getPos())))}function B(e,t,i){const d=2!==i.version;t.forEach((t=>{const i=new u.A(t),h=i.readUint8();let f;function p(){let e=Number(i.getPos());for(;e<t.length&&t[e];)e++;return e}if(d?(f=i.readString(p()-Number(i.getPos())),i.skip(1)):f=i.readString(3),!g[f])return;const l=i.readUint8();let A;const m=p()-Number(i.getPos());m&&(A=I(h,i.readBuffer(m))),i.skip(1);const P=e.createStream();P.codecpar.codecId=g[f],P.codecpar.codecType=0,P.disposition|=1024,P.attachedPic=(0,n._5)(),r.M[15](P.attachedPic+32,P.index);const M=i.remainingSize(),b=(0,o.sY)(M),B=i.readBuffer(M);(0,s.lW)(b,M,B),B.length>=8&&c.FB(B.subarray(0,8),new Uint8Array([137,80,78,71,13,10,26,10]))&&(P.codecpar.codecId=61),(0,n.NX)(P.attachedPic,b,M),r.M[15](P.attachedPic+36,1|a.f[15](P.attachedPic+36)),P.metadata.comment=w[l],A&&(P.metadata.title=A)}))}function S(e,t,i,a){let r=e.getPos();e.writeString("ID3"),e.writeUint8(t),e.writeUint16(0);const s=e.getPos();function n(i,a){const r=f.encode(a);e.writeString(i),4===t?m(e,r.length+1):e.writeUint32(r.length+1),e.writeUint16(0),e.writeUint8(3),e.writeBuffer(r)}function o(i,a){e.writeString(i),4===t?m(e,a.length):e.writeUint32(a.length),e.writeUint16(0),e.writeBuffer(a)}if(e.writeUint32(0),a.poster&&o("APIC",a.poster),a.apic&&a.apic.forEach((e=>{o("APIC",e)})),a.title&&n("TIT2",a.title),a.artist&&n("TPE1",a.artist),a.albumArtist&&n("TPE2","albumArtist"),a.disc&&n("TPOS",a.disc),a.copyright&&n("TCOP",a.copyright),a.album&&n("TALB",a.album),a.track&&n("TRCK",a.track),a.date&&n("TDRC",a.date),a.comment){let e=a.comment;" "===e[3]&&(e=e.slice(0,3)+e.slice(4)),n("COMM",e)}if(a.lyrics){let e=a.lyrics;" "===e[3]&&(e=e.slice(0,3)+e.slice(4)),n("USLT",e)}a.genre&&n("TCON",a.genre+""),a.encoder&&n("TSSE",a.encoder),a.composer&&n("TCOM",a.composer),a.vendor&&n("TENC",a.vendor),a.language&&n("TLAN",a.language),a.performer&&n("TPE3",a.performer),a.publisher&&n("TPUB",a.publisher),a.compilation&&n("TCMP",a.compilation),a.creationTime&&n("TDEN",a.creationTime),a.albumSort&&n("TSOA",a.albumSort),a.artistSort&&n("TSOP",a.artistSort),a.titleSort&&n("TSOT",a.titleSort),a.grouping&&n("TIT1",a.grouping),i<10&&(i=10);const c=Number(BigInt.asIntN(32,e.getPos()-r));i>268435455-c&&(i=268435455-c),e.writeBuffer(new Uint8Array(i).fill(0)),r=e.getPos(),e.seek(s),m(e,c),e.seek(r)}function U(e,t){const i=[],a=new l.A,r=[];a.onFlush=e=>(r.push(e.slice()),0);const s=2!==t;return e.streams.forEach((e=>{if(1024&e.disposition&&(s&&(7===e.codecpar.codecId||61===e.codecpar.codecId||96===e.codecpar.codecId||97===e.codecpar.codecId||171===e.codecpar.codecId||78===e.codecpar.codecId)||!s&&(61===e.codecpar.codecId||7===e.codecpar.codecId))&&e.attachedPic){r.length=0,a.writeUint8(3),s?(a.writeString(d.BE(g)[e.codecpar.codecId]),a.writeUint8(0)):61===e.codecpar.codecId?a.writeString("PNG"):a.writeString("JPG");let t=0;e.metadata.comment&&w.indexOf(e.metadata.comment)>-1&&(t=w.indexOf(e.metadata.comment)),a.writeUint8(t),e.metadata.description&&a.writeString(e.metadata.description),a.writeUint8(0),a.writeBuffer((0,n.iI)(e.attachedPic)),a.flush(),i.push((0,p.A)(Uint8Array,r))}})),i}},7890:(e,t,i)=>{i.d(t,{IC:()=>o,dd:()=>n,gi:()=>r,mO:()=>c,nz:()=>s,t6:()=>d});var a=i(8308);const r={1:65541,2:69638,3:65557,6:65543,7:65542,10:86052,16:69664,17:69633,23:69664,32:69646,34:86037,49:86046,50:86046,56:73728,66:86068,69:69643,20:69643,64:69643,80:86016,85:86017,87:73728,88:73729,97:69635,98:69634,100:69643,105:69633,117:86079,131:86069,255:86018,273:86068,304:86057,309:86106,352:86023,353:86024,354:86053,355:86054,357:86095,358:86096,384:86116,512:69644,533:86022,534:86022,624:86047,654:86111,655:69660,848:86114,1025:86043,1026:86074,1280:86081,1281:86081,5376:86046,5377:86037,5632:86018,5634:86065,8192:86019,8193:86020,8264:86085,8738:86069,27765:65542,28781:86018,16707:86018,16768:86116,22858:81922,29338:86069,33152:86116,41216:86068,41222:86018,41225:86051,61868:86028,65534:86112,21318:69645,22127:86021},s={[(0,a.A)("H261")]:3,[(0,a.A)("H263")]:4,[(0,a.A)("X263")]:4,[(0,a.A)("T263")]:4,[(0,a.A)("L263")]:4,[(0,a.A)("VX1K")]:4,[(0,a.A)("ZyGo")]:4,[(0,a.A)("M263")]:4,[(0,a.A)("lsvm")]:4,[(0,a.A)("I263")]:20,[(0,a.A)("U263")]:4,[(0,a.A)("VSM4")]:4,[(0,a.A)("H264")]:27,[(0,a.A)("h264")]:27,[(0,a.A)("X264")]:27,[(0,a.A)("x264")]:27,[(0,a.A)("avc1")]:27,[(0,a.A)("DAVC")]:27,[(0,a.A)("SMV2")]:27,[(0,a.A)("VSSH")]:27,[(0,a.A)("Q264")]:27,[(0,a.A)("V264")]:27,[(0,a.A)("GAVC")]:27,[(0,a.A)("UMSV")]:27,[(0,a.A)("tshd")]:27,[(0,a.A)("INMC")]:27,[(0,a.A)("FMP4")]:12,[(0,a.A)("DIVX")]:12,[(0,a.A)("DX50")]:12,[(0,a.A)("XVID")]:12,[(0,a.A)("MP4S")]:12,[(0,a.A)("M4S2")]:12,[(0,a.A)("DIVX")]:12,4:12,[(0,a.A)("ZMP4")]:12,[(0,a.A)("DIV1")]:12,[(0,a.A)("BLZ0")]:12,[(0,a.A)("mp4v")]:12,[(0,a.A)("UMP4")]:12,[(0,a.A)("WV1F")]:12,[(0,a.A)("SEDG")]:12,[(0,a.A)("RMP4")]:12,[(0,a.A)("3IV2")]:12,[(0,a.A)("WAWV")]:12,[(0,a.A)("FFDS")]:12,[(0,a.A)("FVFW")]:12,[(0,a.A)("DCOD")]:12,[(0,a.A)("MVXM")]:12,[(0,a.A)("PM4V")]:12,[(0,a.A)("SMP4")]:12,[(0,a.A)("DXGM")]:12,[(0,a.A)("VIDM")]:12,[(0,a.A)("M4T3")]:12,[(0,a.A)("GEOX")]:12,[(0,a.A)("G264")]:12,[(0,a.A)("HDX4")]:12,[(0,a.A)("DM4V")]:12,[(0,a.A)("DMK2")]:12,[(0,a.A)("DYM4")]:12,[(0,a.A)("DIGI")]:12,[(0,a.A)("EPHV")]:12,[(0,a.A)("EM4A")]:12,[(0,a.A)("M4CC")]:12,[(0,a.A)("SN40")]:12,[(0,a.A)("VSPX")]:12,[(0,a.A)("ULDX")]:12,[(0,a.A)("GEOV")]:12,[(0,a.A)("SIPP")]:12,[(0,a.A)("SM4V")]:12,[(0,a.A)("XVIX")]:12,[(0,a.A)("DreX")]:12,[(0,a.A)("QMP4")]:12,[(0,a.A)("PLV1")]:12,[(0,a.A)("GLV4")]:12,[(0,a.A)("GMP4")]:12,[(0,a.A)("MNM4")]:12,[(0,a.A)("GTM4")]:12,[(0,a.A)("MPG4")]:14,[(0,a.A)("MP41")]:14,[(0,a.A)("MP42")]:15,[(0,a.A)("DIV2")]:15,[(0,a.A)("MP43")]:16,[(0,a.A)("DIV3")]:16,[(0,a.A)("MPG3")]:16,[(0,a.A)("DIV5")]:16,[(0,a.A)("DIV6")]:16,[(0,a.A)("DIV4")]:16,[(0,a.A)("DVX3")]:16,[(0,a.A)("AP41")]:16,[(0,a.A)("COL1")]:16,[(0,a.A)("COL0")]:16,[(0,a.A)("WMV1")]:17,[(0,a.A)("WMV2")]:18,[(0,a.A)("GXVE")]:18,[(0,a.A)("dvsd")]:24,[(0,a.A)("dvhd")]:24,[(0,a.A)("dvh1")]:24,[(0,a.A)("dvsl")]:24,[(0,a.A)("dv25")]:24,[(0,a.A)("dv50")]:24,[(0,a.A)("cdvc")]:24,[(0,a.A)("CDVH")]:24,[(0,a.A)("CDV5")]:24,[(0,a.A)("dvc ")]:24,[(0,a.A)("dvcs")]:24,[(0,a.A)("dvh1")]:24,[(0,a.A)("dvis")]:24,[(0,a.A)("pdvc")]:24,[(0,a.A)("SL25")]:24,[(0,a.A)("SLDV")]:24,[(0,a.A)("AVd1")]:24,[(0,a.A)("mpg1")]:2,[(0,a.A)("mpg2")]:2,[(0,a.A)("MPEG")]:2,[(0,a.A)("PIM1")]:2,[(0,a.A)("PIM2")]:2,[(0,a.A)("VCR2")]:2,268435457:2,268435458:2,268435460:2,[(0,a.A)("DVR ")]:2,[(0,a.A)("MMES")]:2,[(0,a.A)("LMP2")]:2,[(0,a.A)("slif")]:2,[(0,a.A)("EM2V")]:2,[(0,a.A)("M701")]:2,[(0,a.A)("M702")]:2,[(0,a.A)("M703")]:2,[(0,a.A)("M704")]:2,[(0,a.A)("M705")]:2,[(0,a.A)("mpgv")]:2,[(0,a.A)("BW10")]:2,[(0,a.A)("XMPG")]:2,[(0,a.A)("MJPG")]:7,[(0,a.A)("RV40")]:69,[(0,a.A)("AV01")]:225,[(0,a.A)("VP80")]:139,[(0,a.A)("VP90")]:167,[(0,a.A)("HEVC")]:173,[(0,a.A)("H265")]:173},n="00001000800000AA00389B71",o="2107D3118644C8C1CA000000",c="0000000000001000800000AA",d={"2C806DE046DBCF11B4D100805F6CBBEA":86019,BFAA23E958CB7144A119FFFA01E4CE62:86055,D242E147BA368D4D88FC61654F8C836C:86104,AF87FBA7022DFB42A4D405CD93843BDD:86056,"2B806DE046DBCF11B4D100805F6CBBEA":86016,"82EC1F6ACADB1945BDE756D3B3EF981D":69673,"3AC1FA38811D4361A40DCE53CA607CD1":86112}},8308:(e,t,i)=>{i.d(t,{A:()=>s});var a=i(9906);const r="packages/avformat/src/function/mktagle.ts";function s(e){4!==e.length&&a.R8(`tag length is not 4, tag: ${e}`,r,30);let t=0;for(let i=3;i>=0;i--)t=t<<8|e.charCodeAt(i);return t}},8370:(e,t,i)=>{i.d(t,{A:()=>s});var a=i(4467),r=i(4405);class s{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1048576,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2?arguments[2]:void 0;if((0,a.A)(this,"data",void 0),(0,a.A)(this,"buffer",void 0),(0,a.A)(this,"pointer",void 0),(0,a.A)(this,"pos",void 0),(0,a.A)(this,"size",void 0),(0,a.A)(this,"littleEndian",void 0),(0,a.A)(this,"error",void 0),(0,a.A)(this,"onFlush",void 0),(0,a.A)(this,"onSeek",void 0),this.pointer=0,this.pos=BigInt(0),this.size=e,this.littleEndian=!t,this.error=0,i&&i.view)this.size=i.length,this.buffer=i,this.data=i.view;else if(i&&!i.byteOffset)this.size=i.length,this.buffer=i,this.data=new DataView(this.buffer.buffer);else{if(i)throw new Error("not support subarray of ArrayBuffer");this.buffer=new Uint8Array(this.size),this.data=new DataView(this.buffer.buffer)}}writeUint8(e){this.remainingLength()<1&&this.flush(),this.data.setUint8(this.pointer,e),this.pointer++,this.pos++}writeUint16(e){this.remainingLength()<2&&this.flush(),this.data.setUint16(this.pointer,e,this.littleEndian),this.pointer+=2,this.pos+=BigInt(2)}writeUint24(e){this.remainingLength()<3&&this.flush();const t=(16711680&e)>>16,i=(65280&e)>>8,a=255&e;this.littleEndian?(this.writeUint8(a),this.writeUint8(i),this.writeUint8(t)):(this.writeUint8(t),this.writeUint8(i),this.writeUint8(a))}writeUint32(e){this.remainingLength()<4&&this.flush(),this.data.setUint32(this.pointer,e,this.littleEndian),this.pointer+=4,this.pos+=BigInt(4)}writeUint64(e){this.remainingLength()<8&&this.flush(),this.data.setBigUint64(this.pointer,e,this.littleEndian),this.pointer+=8,this.pos+=BigInt(8)}writeInt8(e){this.remainingLength()<1&&this.flush(),this.data.setInt8(this.pointer,e),this.pointer++,this.pos++}writeInt16(e){this.remainingLength()<2&&this.flush(),this.data.setInt16(this.pointer,e,this.littleEndian),this.pointer+=2,this.pos+=BigInt(2)}writeInt24(e){this.writeUint24(e<0?e+16777216:e)}writeInt32(e){this.remainingLength()<4&&this.flush(),this.data.setInt32(this.pointer,e,this.littleEndian),this.pointer+=4,this.pos+=BigInt(4)}writeInt64(e){this.remainingLength()<8&&this.flush(),this.data.setBigInt64(this.pointer,e,this.littleEndian),this.pointer+=8,this.pos+=BigInt(8)}writeFloat(e){this.remainingLength()<4&&this.flush(),this.data.setFloat32(this.pointer,e,this.littleEndian),this.pointer+=4,this.pos+=BigInt(4)}writeDouble(e){this.remainingLength()<8&&this.flush(),this.data.setFloat64(this.pointer,e,this.littleEndian),this.pointer+=8,this.pos+=BigInt(8)}getPointer(){return this.pointer}getPos(){return this.pos}remainingLength(){return this.size-this.pointer}writeBuffer(e){if(!e.length)return;let t=e.length;if(this.remainingLength()<t){let i=0;for(;t>0;){this.flush();const a=Math.min(this.size,t);this.buffer.set(e.subarray(i,i+a),this.pointer),this.pointer+=a,this.pos+=BigInt(a),i+=a,t-=a}}else this.buffer.set(e,this.pointer),this.pointer+=t,this.pos+=BigInt(t)}writeString(e){const t=r.encode(e);return this.writeBuffer(t),t.length}flush(){if(!this.onFlush)throw this.error=-1048574,Error("IOWriter error, flush failed because of no flush callback");if(this.pointer){const e=this.onFlush(this.buffer.subarray(0,this.pointer));if(0!==e)throw this.error=e,Error("IOWriter error, flush failed")}this.pointer=0}flushToPos(e){if(!this.onFlush)throw this.error=-1048574,Error("IOWriter error, flush failed because of no flush callback");if(this.pointer){const t=this.onFlush(this.buffer.subarray(0,this.pointer),e);if(0!==t)throw this.error=t,Error("IOWriter error, flush failed")}this.pointer=0}seek(e){if(!this.onSeek)throw this.error=-1048574,Error("IOWriter error, seek failed because of no seek callback");this.flush();const t=this.onSeek(e);if(0!==t)throw this.error=t,Error("IOWriter error, seek failed");this.pos=e}seekInline(e){const t=this.pointer;this.pointer=Math.max(0,Math.min(this.size,e)),this.pos+=BigInt(this.pointer-t)}skip(e){const t=this.pointer;this.pointer=Math.min(this.size,this.pointer+e),this.pos+=BigInt(this.pointer-t)}back(e){const t=this.pointer;this.pointer=Math.max(0,this.pointer-e),this.pos+=BigInt(this.pointer-t)}getBuffer(){return this.buffer.subarray(0,this.pointer)}setEndian(e){this.littleEndian=!e}reset(){this.pointer=0,this.pos=BigInt(0),this.error=0}getBufferSize(){return this.size}}}}]);