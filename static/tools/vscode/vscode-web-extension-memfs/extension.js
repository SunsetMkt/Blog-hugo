(()=>{var dt=[,(Y=>{"use strict";Y.exports=require("vscode")}),((Y,P,r)=>{"use strict";var h=r(3);function f(E){if(typeof E!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(E))}function v(E,u){for(var o="",p=0,t=-1,n=0,c,i=0;i<=E.length;++i){if(i<E.length)c=E.charCodeAt(i);else{if(c===47)break;c=47}if(c===47){if(!(t===i-1||n===1))if(t!==i-1&&n===2){if(o.length<2||p!==2||o.charCodeAt(o.length-1)!==46||o.charCodeAt(o.length-2)!==46){if(o.length>2){var d=o.lastIndexOf("/");if(d!==o.length-1){d===-1?(o="",p=0):(o=o.slice(0,d),p=o.length-1-o.lastIndexOf("/")),t=i,n=0;continue}}else if(o.length===2||o.length===1){o="",p=0,t=i,n=0;continue}}u&&(o.length>0?o+="/..":o="..",p=2)}else o.length>0?o+="/"+E.slice(t+1,i):o=E.slice(t+1,i),p=i-t-1;t=i,n=0}else c===46&&n!==-1?++n:n=-1}return o}function l(E,u){var o=u.dir||u.root,p=u.base||(u.name||"")+(u.ext||"");return o?o===u.root?o+p:o+E+p:p}var g={resolve:function(){for(var u="",o=!1,p,t=arguments.length-1;t>=-1&&!o;t--){var n;t>=0?n=arguments[t]:(p===void 0&&(p=h.cwd()),n=p),f(n),n.length!==0&&(u=n+"/"+u,o=n.charCodeAt(0)===47)}return u=v(u,!o),o?u.length>0?"/"+u:"/":u.length>0?u:"."},normalize:function(u){if(f(u),u.length===0)return".";var o=u.charCodeAt(0)===47,p=u.charCodeAt(u.length-1)===47;return u=v(u,!o),u.length===0&&!o&&(u="."),u.length>0&&p&&(u+="/"),o?"/"+u:u},isAbsolute:function(u){return f(u),u.length>0&&u.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var u,o=0;o<arguments.length;++o){var p=arguments[o];f(p),p.length>0&&(u===void 0?u=p:u+="/"+p)}return u===void 0?".":g.normalize(u)},relative:function(u,o){if(f(u),f(o),u===o||(u=g.resolve(u),o=g.resolve(o),u===o))return"";for(var p=1;p<u.length&&u.charCodeAt(p)===47;++p);for(var t=u.length,n=t-p,c=1;c<o.length&&o.charCodeAt(c)===47;++c);for(var i=o.length,d=i-c,w=n<d?n:d,b=-1,m=0;m<=w;++m){if(m===w){if(d>w){if(o.charCodeAt(c+m)===47)return o.slice(c+m+1);if(m===0)return o.slice(c+m)}else n>w&&(u.charCodeAt(p+m)===47?b=m:m===0&&(b=0));break}var e=u.charCodeAt(p+m),s=o.charCodeAt(c+m);if(e!==s)break;e===47&&(b=m)}var y="";for(m=p+b+1;m<=t;++m)(m===t||u.charCodeAt(m)===47)&&(y.length===0?y+="..":y+="/..");return y.length>0?y+o.slice(c+b):(c+=b,o.charCodeAt(c)===47&&++c,o.slice(c))},_makeLong:function(u){return u},dirname:function(u){if(f(u),u.length===0)return".";for(var o=u.charCodeAt(0),p=o===47,t=-1,n=!0,c=u.length-1;c>=1;--c)if(o=u.charCodeAt(c),o===47){if(!n){t=c;break}}else n=!1;return t===-1?p?"/":".":p&&t===1?"//":u.slice(0,t)},basename:function(u,o){if(o!==void 0&&typeof o!="string")throw new TypeError('"ext" argument must be a string');f(u);var p=0,t=-1,n=!0,c;if(o!==void 0&&o.length>0&&o.length<=u.length){if(o.length===u.length&&o===u)return"";var i=o.length-1,d=-1;for(c=u.length-1;c>=0;--c){var w=u.charCodeAt(c);if(w===47){if(!n){p=c+1;break}}else d===-1&&(n=!1,d=c+1),i>=0&&(w===o.charCodeAt(i)?--i===-1&&(t=c):(i=-1,t=d))}return p===t?t=d:t===-1&&(t=u.length),u.slice(p,t)}else{for(c=u.length-1;c>=0;--c)if(u.charCodeAt(c)===47){if(!n){p=c+1;break}}else t===-1&&(n=!1,t=c+1);return t===-1?"":u.slice(p,t)}},extname:function(u){f(u);for(var o=-1,p=0,t=-1,n=!0,c=0,i=u.length-1;i>=0;--i){var d=u.charCodeAt(i);if(d===47){if(!n){p=i+1;break}continue}t===-1&&(n=!1,t=i+1),d===46?o===-1?o=i:c!==1&&(c=1):o!==-1&&(c=-1)}return o===-1||t===-1||c===0||c===1&&o===t-1&&o===p+1?"":u.slice(o,t)},format:function(u){if(u===null||typeof u!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof u);return l("/",u)},parse:function(u){f(u);var o={root:"",dir:"",base:"",ext:"",name:""};if(u.length===0)return o;var p=u.charCodeAt(0),t=p===47,n;t?(o.root="/",n=1):n=0;for(var c=-1,i=0,d=-1,w=!0,b=u.length-1,m=0;b>=n;--b){if(p=u.charCodeAt(b),p===47){if(!w){i=b+1;break}continue}d===-1&&(w=!1,d=b+1),p===46?c===-1?c=b:m!==1&&(m=1):c!==-1&&(m=-1)}return c===-1||d===-1||m===0||m===1&&c===d-1&&c===i+1?d!==-1&&(i===0&&t?o.base=o.name=u.slice(1,d):o.base=o.name=u.slice(i,d)):(i===0&&t?(o.name=u.slice(1,c),o.base=u.slice(1,d)):(o.name=u.slice(i,c),o.base=u.slice(i,d)),o.ext=u.slice(c,d)),i>0?o.dir=u.slice(0,i-1):t&&(o.dir="/"),o},sep:"/",delimiter:":",win32:null,posix:null};g.posix=g,Y.exports=g}),(Y=>{var P=Y.exports={},r,h;function f(){throw new Error("setTimeout has not been defined")}function v(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?r=setTimeout:r=f}catch{r=f}try{typeof clearTimeout=="function"?h=clearTimeout:h=v}catch{h=v}})();function l(d){if(r===setTimeout)return setTimeout(d,0);if((r===f||!r)&&setTimeout)return r=setTimeout,setTimeout(d,0);try{return r(d,0)}catch{try{return r.call(null,d,0)}catch{return r.call(this,d,0)}}}function g(d){if(h===clearTimeout)return clearTimeout(d);if((h===v||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(d);try{return h(d)}catch{try{return h.call(null,d)}catch{return h.call(this,d)}}}var E=[],u=!1,o,p=-1;function t(){!u||!o||(u=!1,o.length?E=o.concat(E):p=-1,E.length&&n())}function n(){if(!u){var d=l(t);u=!0;for(var w=E.length;w;){for(o=E,E=[];++p<w;)o&&o[p].run();p=-1,w=E.length}o=null,u=!1,g(d)}}P.nextTick=function(d){var w=new Array(arguments.length-1);if(arguments.length>1)for(var b=1;b<arguments.length;b++)w[b-1]=arguments[b];E.push(new c(d,w)),E.length===1&&!u&&l(n)};function c(d,w){this.fun=d,this.array=w}c.prototype.run=function(){this.fun.apply(null,this.array)},P.title="browser",P.browser=!0,P.env={},P.argv=[],P.version="",P.versions={};function i(){}P.on=i,P.addListener=i,P.once=i,P.off=i,P.removeListener=i,P.removeAllListeners=i,P.emit=i,P.prependListener=i,P.prependOnceListener=i,P.listeners=function(d){return[]},P.binding=function(d){throw new Error("process.binding is not supported")},P.cwd=function(){return"/"},P.chdir=function(d){throw new Error("process.chdir is not supported")},P.umask=function(){return 0}}),((Y,P,r)=>{"use strict";const h=r(5),f=r(6),v=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;P.Buffer=u,P.SlowBuffer=e,P.INSPECT_MAX_BYTES=50;const l=2147483647;P.kMaxLength=l,u.TYPED_ARRAY_SUPPORT=g(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function g(){try{const O=new Uint8Array(1),a={foo:function(){return 42}};return Object.setPrototypeOf(a,Uint8Array.prototype),Object.setPrototypeOf(O,a),O.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function E(O){if(O>l)throw new RangeError('The value "'+O+'" is invalid for option "size"');const a=new Uint8Array(O);return Object.setPrototypeOf(a,u.prototype),a}function u(O,a,_){if(typeof O=="number"){if(typeof a=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return n(O)}return o(O,a,_)}u.poolSize=8192;function o(O,a,_){if(typeof O=="string")return c(O,a);if(ArrayBuffer.isView(O))return d(O);if(O==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof O);if($(O,ArrayBuffer)||O&&$(O.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&($(O,SharedArrayBuffer)||O&&$(O.buffer,SharedArrayBuffer)))return w(O,a,_);if(typeof O=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const I=O.valueOf&&O.valueOf();if(I!=null&&I!==O)return u.from(I,a,_);const U=b(O);if(U)return U;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof O[Symbol.toPrimitive]=="function")return u.from(O[Symbol.toPrimitive]("string"),a,_);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof O)}u.from=function(O,a,_){return o(O,a,_)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array);function p(O){if(typeof O!="number")throw new TypeError('"size" argument must be of type number');if(O<0)throw new RangeError('The value "'+O+'" is invalid for option "size"')}function t(O,a,_){return p(O),O<=0?E(O):a!==void 0?typeof _=="string"?E(O).fill(a,_):E(O).fill(a):E(O)}u.alloc=function(O,a,_){return t(O,a,_)};function n(O){return p(O),E(O<0?0:m(O)|0)}u.allocUnsafe=function(O){return n(O)},u.allocUnsafeSlow=function(O){return n(O)};function c(O,a){if((typeof a!="string"||a==="")&&(a="utf8"),!u.isEncoding(a))throw new TypeError("Unknown encoding: "+a);const _=s(O,a)|0;let I=E(_);const U=I.write(O,a);return U!==_&&(I=I.slice(0,U)),I}function i(O){const a=O.length<0?0:m(O.length)|0,_=E(a);for(let I=0;I<a;I+=1)_[I]=O[I]&255;return _}function d(O){if($(O,Uint8Array)){const a=new Uint8Array(O);return w(a.buffer,a.byteOffset,a.byteLength)}return i(O)}function w(O,a,_){if(a<0||O.byteLength<a)throw new RangeError('"offset" is outside of buffer bounds');if(O.byteLength<a+(_||0))throw new RangeError('"length" is outside of buffer bounds');let I;return a===void 0&&_===void 0?I=new Uint8Array(O):_===void 0?I=new Uint8Array(O,a):I=new Uint8Array(O,a,_),Object.setPrototypeOf(I,u.prototype),I}function b(O){if(u.isBuffer(O)){const a=m(O.length)|0,_=E(a);return _.length===0||O.copy(_,0,0,a),_}if(O.length!==void 0)return typeof O.length!="number"||H(O.length)?E(0):i(O);if(O.type==="Buffer"&&Array.isArray(O.data))return i(O.data)}function m(O){if(O>=l)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+l.toString(16)+" bytes");return O|0}function e(O){return+O!=O&&(O=0),u.alloc(+O)}u.isBuffer=function(a){return a!=null&&a._isBuffer===!0&&a!==u.prototype},u.compare=function(a,_){if($(a,Uint8Array)&&(a=u.from(a,a.offset,a.byteLength)),$(_,Uint8Array)&&(_=u.from(_,_.offset,_.byteLength)),!u.isBuffer(a)||!u.isBuffer(_))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(a===_)return 0;let I=a.length,U=_.length;for(let G=0,te=Math.min(I,U);G<te;++G)if(a[G]!==_[G]){I=a[G],U=_[G];break}return I<U?-1:U<I?1:0},u.isEncoding=function(a){switch(String(a).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(a,_){if(!Array.isArray(a))throw new TypeError('"list" argument must be an Array of Buffers');if(a.length===0)return u.alloc(0);let I;if(_===void 0)for(_=0,I=0;I<a.length;++I)_+=a[I].length;const U=u.allocUnsafe(_);let G=0;for(I=0;I<a.length;++I){let te=a[I];if($(te,Uint8Array))G+te.length>U.length?(u.isBuffer(te)||(te=u.from(te)),te.copy(U,G)):Uint8Array.prototype.set.call(U,te,G);else if(u.isBuffer(te))te.copy(U,G);else throw new TypeError('"list" argument must be an Array of Buffers');G+=te.length}return U};function s(O,a){if(u.isBuffer(O))return O.length;if(ArrayBuffer.isView(O)||$(O,ArrayBuffer))return O.byteLength;if(typeof O!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof O);const _=O.length,I=arguments.length>2&&arguments[2]===!0;if(!I&&_===0)return 0;let U=!1;for(;;)switch(a){case"ascii":case"latin1":case"binary":return _;case"utf8":case"utf-8":return Ee(O).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _*2;case"hex":return _>>>1;case"base64":return M(O).length;default:if(U)return I?-1:Ee(O).length;a=(""+a).toLowerCase(),U=!0}}u.byteLength=s;function y(O,a,_){let I=!1;if((a===void 0||a<0)&&(a=0),a>this.length||((_===void 0||_>this.length)&&(_=this.length),_<=0)||(_>>>=0,a>>>=0,_<=a))return"";for(O||(O="utf8");;)switch(O){case"hex":return Q(this,a,_);case"utf8":case"utf-8":return C(this,a,_);case"ascii":return q(this,a,_);case"latin1":case"binary":return ae(this,a,_);case"base64":return V(this,a,_);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ue(this,a,_);default:if(I)throw new TypeError("Unknown encoding: "+O);O=(O+"").toLowerCase(),I=!0}}u.prototype._isBuffer=!0;function S(O,a,_){const I=O[a];O[a]=O[_],O[_]=I}u.prototype.swap16=function(){const a=this.length;if(a%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let _=0;_<a;_+=2)S(this,_,_+1);return this},u.prototype.swap32=function(){const a=this.length;if(a%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let _=0;_<a;_+=4)S(this,_,_+3),S(this,_+1,_+2);return this},u.prototype.swap64=function(){const a=this.length;if(a%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let _=0;_<a;_+=8)S(this,_,_+7),S(this,_+1,_+6),S(this,_+2,_+5),S(this,_+3,_+4);return this},u.prototype.toString=function(){const a=this.length;return a===0?"":arguments.length===0?C(this,0,a):y.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(a){if(!u.isBuffer(a))throw new TypeError("Argument must be a Buffer");return this===a?!0:u.compare(this,a)===0},u.prototype.inspect=function(){let a="";const _=P.INSPECT_MAX_BYTES;return a=this.toString("hex",0,_).replace(/(.{2})/g,"$1 ").trim(),this.length>_&&(a+=" ... "),"<Buffer "+a+">"},v&&(u.prototype[v]=u.prototype.inspect),u.prototype.compare=function(a,_,I,U,G){if($(a,Uint8Array)&&(a=u.from(a,a.offset,a.byteLength)),!u.isBuffer(a))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof a);if(_===void 0&&(_=0),I===void 0&&(I=a?a.length:0),U===void 0&&(U=0),G===void 0&&(G=this.length),_<0||I>a.length||U<0||G>this.length)throw new RangeError("out of range index");if(U>=G&&_>=I)return 0;if(U>=G)return-1;if(_>=I)return 1;if(_>>>=0,I>>>=0,U>>>=0,G>>>=0,this===a)return 0;let te=G-U,Oe=I-_;const Ie=Math.min(te,Oe),Re=this.slice(U,G),Te=a.slice(_,I);for(let Ae=0;Ae<Ie;++Ae)if(Re[Ae]!==Te[Ae]){te=Re[Ae],Oe=Te[Ae];break}return te<Oe?-1:Oe<te?1:0};function D(O,a,_,I,U){if(O.length===0)return-1;if(typeof _=="string"?(I=_,_=0):_>2147483647?_=2147483647:_<-2147483648&&(_=-2147483648),_=+_,H(_)&&(_=U?0:O.length-1),_<0&&(_=O.length+_),_>=O.length){if(U)return-1;_=O.length-1}else if(_<0)if(U)_=0;else return-1;if(typeof a=="string"&&(a=u.from(a,I)),u.isBuffer(a))return a.length===0?-1:R(O,a,_,I,U);if(typeof a=="number")return a=a&255,typeof Uint8Array.prototype.indexOf=="function"?U?Uint8Array.prototype.indexOf.call(O,a,_):Uint8Array.prototype.lastIndexOf.call(O,a,_):R(O,[a],_,I,U);throw new TypeError("val must be string, number or Buffer")}function R(O,a,_,I,U){let G=1,te=O.length,Oe=a.length;if(I!==void 0&&(I=String(I).toLowerCase(),I==="ucs2"||I==="ucs-2"||I==="utf16le"||I==="utf-16le")){if(O.length<2||a.length<2)return-1;G=2,te/=2,Oe/=2,_/=2}function Ie(Te,Ae){return G===1?Te[Ae]:Te.readUInt16BE(Ae*G)}let Re;if(U){let Te=-1;for(Re=_;Re<te;Re++)if(Ie(O,Re)===Ie(a,Te===-1?0:Re-Te)){if(Te===-1&&(Te=Re),Re-Te+1===Oe)return Te*G}else Te!==-1&&(Re-=Re-Te),Te=-1}else for(_+Oe>te&&(_=te-Oe),Re=_;Re>=0;Re--){let Te=!0;for(let Ae=0;Ae<Oe;Ae++)if(Ie(O,Re+Ae)!==Ie(a,Ae)){Te=!1;break}if(Te)return Re}return-1}u.prototype.includes=function(a,_,I){return this.indexOf(a,_,I)!==-1},u.prototype.indexOf=function(a,_,I){return D(this,a,_,I,!0)},u.prototype.lastIndexOf=function(a,_,I){return D(this,a,_,I,!1)};function T(O,a,_,I){_=Number(_)||0;const U=O.length-_;I?(I=Number(I),I>U&&(I=U)):I=U;const G=a.length;I>G/2&&(I=G/2);let te;for(te=0;te<I;++te){const Oe=parseInt(a.substr(te*2,2),16);if(H(Oe))return te;O[_+te]=Oe}return te}function A(O,a,_,I){return W(Ee(a,O.length-_),O,_,I)}function k(O,a,_,I){return W(he(a),O,_,I)}function N(O,a,_,I){return W(M(a),O,_,I)}function K(O,a,_,I){return W(z(a,O.length-_),O,_,I)}u.prototype.write=function(a,_,I,U){if(_===void 0)U="utf8",I=this.length,_=0;else if(I===void 0&&typeof _=="string")U=_,I=this.length,_=0;else if(isFinite(_))_=_>>>0,isFinite(I)?(I=I>>>0,U===void 0&&(U="utf8")):(U=I,I=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const G=this.length-_;if((I===void 0||I>G)&&(I=G),a.length>0&&(I<0||_<0)||_>this.length)throw new RangeError("Attempt to write outside buffer bounds");U||(U="utf8");let te=!1;for(;;)switch(U){case"hex":return T(this,a,_,I);case"utf8":case"utf-8":return A(this,a,_,I);case"ascii":case"latin1":case"binary":return k(this,a,_,I);case"base64":return N(this,a,_,I);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return K(this,a,_,I);default:if(te)throw new TypeError("Unknown encoding: "+U);U=(""+U).toLowerCase(),te=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function V(O,a,_){return a===0&&_===O.length?h.fromByteArray(O):h.fromByteArray(O.slice(a,_))}function C(O,a,_){_=Math.min(O.length,_);const I=[];let U=a;for(;U<_;){const G=O[U];let te=null,Oe=G>239?4:G>223?3:G>191?2:1;if(U+Oe<=_){let Ie,Re,Te,Ae;switch(Oe){case 1:G<128&&(te=G);break;case 2:Ie=O[U+1],(Ie&192)===128&&(Ae=(G&31)<<6|Ie&63,Ae>127&&(te=Ae));break;case 3:Ie=O[U+1],Re=O[U+2],(Ie&192)===128&&(Re&192)===128&&(Ae=(G&15)<<12|(Ie&63)<<6|Re&63,Ae>2047&&(Ae<55296||Ae>57343)&&(te=Ae));break;case 4:Ie=O[U+1],Re=O[U+2],Te=O[U+3],(Ie&192)===128&&(Re&192)===128&&(Te&192)===128&&(Ae=(G&15)<<18|(Ie&63)<<12|(Re&63)<<6|Te&63,Ae>65535&&Ae<1114112&&(te=Ae))}}te===null?(te=65533,Oe=1):te>65535&&(te-=65536,I.push(te>>>10&1023|55296),te=56320|te&1023),I.push(te),U+=Oe}return j(I)}const B=4096;function j(O){const a=O.length;if(a<=B)return String.fromCharCode.apply(String,O);let _="",I=0;for(;I<a;)_+=String.fromCharCode.apply(String,O.slice(I,I+=B));return _}function q(O,a,_){let I="";_=Math.min(O.length,_);for(let U=a;U<_;++U)I+=String.fromCharCode(O[U]&127);return I}function ae(O,a,_){let I="";_=Math.min(O.length,_);for(let U=a;U<_;++U)I+=String.fromCharCode(O[U]);return I}function Q(O,a,_){const I=O.length;(!a||a<0)&&(a=0),(!_||_<0||_>I)&&(_=I);let U="";for(let G=a;G<_;++G)U+=Se[O[G]];return U}function ue(O,a,_){const I=O.slice(a,_);let U="";for(let G=0;G<I.length-1;G+=2)U+=String.fromCharCode(I[G]+I[G+1]*256);return U}u.prototype.slice=function(a,_){const I=this.length;a=~~a,_=_===void 0?I:~~_,a<0?(a+=I,a<0&&(a=0)):a>I&&(a=I),_<0?(_+=I,_<0&&(_=0)):_>I&&(_=I),_<a&&(_=a);const U=this.subarray(a,_);return Object.setPrototypeOf(U,u.prototype),U};function F(O,a,_){if(O%1!==0||O<0)throw new RangeError("offset is not uint");if(O+a>_)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(a,_,I){a=a>>>0,_=_>>>0,I||F(a,_,this.length);let U=this[a],G=1,te=0;for(;++te<_&&(G*=256);)U+=this[a+te]*G;return U},u.prototype.readUintBE=u.prototype.readUIntBE=function(a,_,I){a=a>>>0,_=_>>>0,I||F(a,_,this.length);let U=this[a+--_],G=1;for(;_>0&&(G*=256);)U+=this[a+--_]*G;return U},u.prototype.readUint8=u.prototype.readUInt8=function(a,_){return a=a>>>0,_||F(a,1,this.length),this[a]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(a,_){return a=a>>>0,_||F(a,2,this.length),this[a]|this[a+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(a,_){return a=a>>>0,_||F(a,2,this.length),this[a]<<8|this[a+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(a,_){return a=a>>>0,_||F(a,4,this.length),(this[a]|this[a+1]<<8|this[a+2]<<16)+this[a+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(a,_){return a=a>>>0,_||F(a,4,this.length),this[a]*16777216+(this[a+1]<<16|this[a+2]<<8|this[a+3])},u.prototype.readBigUInt64LE=se(function(a){a=a>>>0,be(a,"offset");const _=this[a],I=this[a+7];(_===void 0||I===void 0)&&J(a,this.length-8);const U=_+this[++a]*2**8+this[++a]*2**16+this[++a]*2**24,G=this[++a]+this[++a]*2**8+this[++a]*2**16+I*2**24;return BigInt(U)+(BigInt(G)<<BigInt(32))}),u.prototype.readBigUInt64BE=se(function(a){a=a>>>0,be(a,"offset");const _=this[a],I=this[a+7];(_===void 0||I===void 0)&&J(a,this.length-8);const U=_*2**24+this[++a]*2**16+this[++a]*2**8+this[++a],G=this[++a]*2**24+this[++a]*2**16+this[++a]*2**8+I;return(BigInt(U)<<BigInt(32))+BigInt(G)}),u.prototype.readIntLE=function(a,_,I){a=a>>>0,_=_>>>0,I||F(a,_,this.length);let U=this[a],G=1,te=0;for(;++te<_&&(G*=256);)U+=this[a+te]*G;return G*=128,U>=G&&(U-=Math.pow(2,8*_)),U},u.prototype.readIntBE=function(a,_,I){a=a>>>0,_=_>>>0,I||F(a,_,this.length);let U=_,G=1,te=this[a+--U];for(;U>0&&(G*=256);)te+=this[a+--U]*G;return G*=128,te>=G&&(te-=Math.pow(2,8*_)),te},u.prototype.readInt8=function(a,_){return a=a>>>0,_||F(a,1,this.length),this[a]&128?(255-this[a]+1)*-1:this[a]},u.prototype.readInt16LE=function(a,_){a=a>>>0,_||F(a,2,this.length);const I=this[a]|this[a+1]<<8;return I&32768?I|4294901760:I},u.prototype.readInt16BE=function(a,_){a=a>>>0,_||F(a,2,this.length);const I=this[a+1]|this[a]<<8;return I&32768?I|4294901760:I},u.prototype.readInt32LE=function(a,_){return a=a>>>0,_||F(a,4,this.length),this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24},u.prototype.readInt32BE=function(a,_){return a=a>>>0,_||F(a,4,this.length),this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]},u.prototype.readBigInt64LE=se(function(a){a=a>>>0,be(a,"offset");const _=this[a],I=this[a+7];(_===void 0||I===void 0)&&J(a,this.length-8);const U=this[a+4]+this[a+5]*2**8+this[a+6]*2**16+(I<<24);return(BigInt(U)<<BigInt(32))+BigInt(_+this[++a]*256+this[++a]*65536+this[++a]*16777216)}),u.prototype.readBigInt64BE=se(function(a){a=a>>>0,be(a,"offset");const _=this[a],I=this[a+7];(_===void 0||I===void 0)&&J(a,this.length-8);const U=(_<<24)+this[++a]*2**16+this[++a]*2**8+this[++a];return(BigInt(U)<<BigInt(32))+BigInt(this[++a]*16777216+this[++a]*65536+this[++a]*256+I)}),u.prototype.readFloatLE=function(a,_){return a=a>>>0,_||F(a,4,this.length),f.read(this,a,!0,23,4)},u.prototype.readFloatBE=function(a,_){return a=a>>>0,_||F(a,4,this.length),f.read(this,a,!1,23,4)},u.prototype.readDoubleLE=function(a,_){return a=a>>>0,_||F(a,8,this.length),f.read(this,a,!0,52,8)},u.prototype.readDoubleBE=function(a,_){return a=a>>>0,_||F(a,8,this.length),f.read(this,a,!1,52,8)};function ie(O,a,_,I,U,G){if(!u.isBuffer(O))throw new TypeError('"buffer" argument must be a Buffer instance');if(a>U||a<G)throw new RangeError('"value" argument is out of bounds');if(_+I>O.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(a,_,I,U){if(a=+a,_=_>>>0,I=I>>>0,!U){const Oe=Math.pow(2,8*I)-1;ie(this,a,_,I,Oe,0)}let G=1,te=0;for(this[_]=a&255;++te<I&&(G*=256);)this[_+te]=a/G&255;return _+I},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(a,_,I,U){if(a=+a,_=_>>>0,I=I>>>0,!U){const Oe=Math.pow(2,8*I)-1;ie(this,a,_,I,Oe,0)}let G=I-1,te=1;for(this[_+G]=a&255;--G>=0&&(te*=256);)this[_+G]=a/te&255;return _+I},u.prototype.writeUint8=u.prototype.writeUInt8=function(a,_,I){return a=+a,_=_>>>0,I||ie(this,a,_,1,255,0),this[_]=a&255,_+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(a,_,I){return a=+a,_=_>>>0,I||ie(this,a,_,2,65535,0),this[_]=a&255,this[_+1]=a>>>8,_+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(a,_,I){return a=+a,_=_>>>0,I||ie(this,a,_,2,65535,0),this[_]=a>>>8,this[_+1]=a&255,_+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(a,_,I){return a=+a,_=_>>>0,I||ie(this,a,_,4,4294967295,0),this[_+3]=a>>>24,this[_+2]=a>>>16,this[_+1]=a>>>8,this[_]=a&255,_+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(a,_,I){return a=+a,_=_>>>0,I||ie(this,a,_,4,4294967295,0),this[_]=a>>>24,this[_+1]=a>>>16,this[_+2]=a>>>8,this[_+3]=a&255,_+4};function me(O,a,_,I,U){de(a,I,U,O,_,7);let G=Number(a&BigInt(4294967295));O[_++]=G,G=G>>8,O[_++]=G,G=G>>8,O[_++]=G,G=G>>8,O[_++]=G;let te=Number(a>>BigInt(32)&BigInt(4294967295));return O[_++]=te,te=te>>8,O[_++]=te,te=te>>8,O[_++]=te,te=te>>8,O[_++]=te,_}function oe(O,a,_,I,U){de(a,I,U,O,_,7);let G=Number(a&BigInt(4294967295));O[_+7]=G,G=G>>8,O[_+6]=G,G=G>>8,O[_+5]=G,G=G>>8,O[_+4]=G;let te=Number(a>>BigInt(32)&BigInt(4294967295));return O[_+3]=te,te=te>>8,O[_+2]=te,te=te>>8,O[_+1]=te,te=te>>8,O[_]=te,_+8}u.prototype.writeBigUInt64LE=se(function(a,_=0){return me(this,a,_,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=se(function(a,_=0){return oe(this,a,_,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(a,_,I,U){if(a=+a,_=_>>>0,!U){const Ie=Math.pow(2,8*I-1);ie(this,a,_,I,Ie-1,-Ie)}let G=0,te=1,Oe=0;for(this[_]=a&255;++G<I&&(te*=256);)a<0&&Oe===0&&this[_+G-1]!==0&&(Oe=1),this[_+G]=(a/te>>0)-Oe&255;return _+I},u.prototype.writeIntBE=function(a,_,I,U){if(a=+a,_=_>>>0,!U){const Ie=Math.pow(2,8*I-1);ie(this,a,_,I,Ie-1,-Ie)}let G=I-1,te=1,Oe=0;for(this[_+G]=a&255;--G>=0&&(te*=256);)a<0&&Oe===0&&this[_+G+1]!==0&&(Oe=1),this[_+G]=(a/te>>0)-Oe&255;return _+I},u.prototype.writeInt8=function(a,_,I){return a=+a,_=_>>>0,I||ie(this,a,_,1,127,-128),a<0&&(a=255+a+1),this[_]=a&255,_+1},u.prototype.writeInt16LE=function(a,_,I){return a=+a,_=_>>>0,I||ie(this,a,_,2,32767,-32768),this[_]=a&255,this[_+1]=a>>>8,_+2},u.prototype.writeInt16BE=function(a,_,I){return a=+a,_=_>>>0,I||ie(this,a,_,2,32767,-32768),this[_]=a>>>8,this[_+1]=a&255,_+2},u.prototype.writeInt32LE=function(a,_,I){return a=+a,_=_>>>0,I||ie(this,a,_,4,2147483647,-2147483648),this[_]=a&255,this[_+1]=a>>>8,this[_+2]=a>>>16,this[_+3]=a>>>24,_+4},u.prototype.writeInt32BE=function(a,_,I){return a=+a,_=_>>>0,I||ie(this,a,_,4,2147483647,-2147483648),a<0&&(a=4294967295+a+1),this[_]=a>>>24,this[_+1]=a>>>16,this[_+2]=a>>>8,this[_+3]=a&255,_+4},u.prototype.writeBigInt64LE=se(function(a,_=0){return me(this,a,_,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=se(function(a,_=0){return oe(this,a,_,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function fe(O,a,_,I,U,G){if(_+I>O.length)throw new RangeError("Index out of range");if(_<0)throw new RangeError("Index out of range")}function le(O,a,_,I,U){return a=+a,_=_>>>0,U||fe(O,a,_,4,34028234663852886e22,-34028234663852886e22),f.write(O,a,_,I,23,4),_+4}u.prototype.writeFloatLE=function(a,_,I){return le(this,a,_,!0,I)},u.prototype.writeFloatBE=function(a,_,I){return le(this,a,_,!1,I)};function we(O,a,_,I,U){return a=+a,_=_>>>0,U||fe(O,a,_,8,17976931348623157e292,-17976931348623157e292),f.write(O,a,_,I,52,8),_+8}u.prototype.writeDoubleLE=function(a,_,I){return we(this,a,_,!0,I)},u.prototype.writeDoubleBE=function(a,_,I){return we(this,a,_,!1,I)},u.prototype.copy=function(a,_,I,U){if(!u.isBuffer(a))throw new TypeError("argument should be a Buffer");if(I||(I=0),!U&&U!==0&&(U=this.length),_>=a.length&&(_=a.length),_||(_=0),U>0&&U<I&&(U=I),U===I||a.length===0||this.length===0)return 0;if(_<0)throw new RangeError("targetStart out of bounds");if(I<0||I>=this.length)throw new RangeError("Index out of range");if(U<0)throw new RangeError("sourceEnd out of bounds");U>this.length&&(U=this.length),a.length-_<U-I&&(U=a.length-_+I);const G=U-I;return this===a&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(_,I,U):Uint8Array.prototype.set.call(a,this.subarray(I,U),_),G},u.prototype.fill=function(a,_,I,U){if(typeof a=="string"){if(typeof _=="string"?(U=_,_=0,I=this.length):typeof I=="string"&&(U=I,I=this.length),U!==void 0&&typeof U!="string")throw new TypeError("encoding must be a string");if(typeof U=="string"&&!u.isEncoding(U))throw new TypeError("Unknown encoding: "+U);if(a.length===1){const te=a.charCodeAt(0);(U==="utf8"&&te<128||U==="latin1")&&(a=te)}}else typeof a=="number"?a=a&255:typeof a=="boolean"&&(a=Number(a));if(_<0||this.length<_||this.length<I)throw new RangeError("Out of range index");if(I<=_)return this;_=_>>>0,I=I===void 0?this.length:I>>>0,a||(a=0);let G;if(typeof a=="number")for(G=_;G<I;++G)this[G]=a;else{const te=u.isBuffer(a)?a:u.from(a,U),Oe=te.length;if(Oe===0)throw new TypeError('The value "'+a+'" is invalid for argument "value"');for(G=0;G<I-_;++G)this[G+_]=te[G%Oe]}return this};const ge={};function ee(O,a,_){ge[O]=class extends _{constructor(){super(),Object.defineProperty(this,"message",{value:a.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${O}]`,this.stack,delete this.name}get code(){return O}set code(U){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:U,writable:!0})}toString(){return`${this.name} [${O}]: ${this.message}`}}}ee("ERR_BUFFER_OUT_OF_BOUNDS",function(O){return O?`${O} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ee("ERR_INVALID_ARG_TYPE",function(O,a){return`The "${O}" argument must be of type number. Received type ${typeof a}`},TypeError),ee("ERR_OUT_OF_RANGE",function(O,a,_){let I=`The value of "${O}" is out of range.`,U=_;return Number.isInteger(_)&&Math.abs(_)>4294967296?U=ne(String(_)):typeof _=="bigint"&&(U=String(_),(_>BigInt(2)**BigInt(32)||_<-(BigInt(2)**BigInt(32)))&&(U=ne(U)),U+="n"),I+=` It must be ${a}. Received ${U}`,I},RangeError);function ne(O){let a="",_=O.length;const I=O[0]==="-"?1:0;for(;_>=I+4;_-=3)a=`_${O.slice(_-3,_)}${a}`;return`${O.slice(0,_)}${a}`}function ce(O,a,_){be(a,"offset"),(O[a]===void 0||O[a+_]===void 0)&&J(a,O.length-(_+1))}function de(O,a,_,I,U,G){if(O>_||O<a){const te=typeof a=="bigint"?"n":"";let Oe;throw G>3?a===0||a===BigInt(0)?Oe=`>= 0${te} and < 2${te} ** ${(G+1)*8}${te}`:Oe=`>= -(2${te} ** ${(G+1)*8-1}${te}) and < 2 ** ${(G+1)*8-1}${te}`:Oe=`>= ${a}${te} and <= ${_}${te}`,new ge.ERR_OUT_OF_RANGE("value",Oe,O)}ce(I,U,G)}function be(O,a){if(typeof O!="number")throw new ge.ERR_INVALID_ARG_TYPE(a,"number",O)}function J(O,a,_){throw Math.floor(O)!==O?(be(O,_),new ge.ERR_OUT_OF_RANGE(_||"offset","an integer",O)):a<0?new ge.ERR_BUFFER_OUT_OF_BOUNDS:new ge.ERR_OUT_OF_RANGE(_||"offset",`>= ${_?1:0} and <= ${a}`,O)}const Z=/[^+/0-9A-Za-z-_]/g;function re(O){if(O=O.split("=")[0],O=O.trim().replace(Z,""),O.length<2)return"";for(;O.length%4!==0;)O=O+"=";return O}function Ee(O,a){a=a||1/0;let _;const I=O.length;let U=null;const G=[];for(let te=0;te<I;++te){if(_=O.charCodeAt(te),_>55295&&_<57344){if(!U){if(_>56319){(a-=3)>-1&&G.push(239,191,189);continue}else if(te+1===I){(a-=3)>-1&&G.push(239,191,189);continue}U=_;continue}if(_<56320){(a-=3)>-1&&G.push(239,191,189),U=_;continue}_=(U-55296<<10|_-56320)+65536}else U&&(a-=3)>-1&&G.push(239,191,189);if(U=null,_<128){if((a-=1)<0)break;G.push(_)}else if(_<2048){if((a-=2)<0)break;G.push(_>>6|192,_&63|128)}else if(_<65536){if((a-=3)<0)break;G.push(_>>12|224,_>>6&63|128,_&63|128)}else if(_<1114112){if((a-=4)<0)break;G.push(_>>18|240,_>>12&63|128,_>>6&63|128,_&63|128)}else throw new Error("Invalid code point")}return G}function he(O){const a=[];for(let _=0;_<O.length;++_)a.push(O.charCodeAt(_)&255);return a}function z(O,a){let _,I,U;const G=[];for(let te=0;te<O.length&&!((a-=2)<0);++te)_=O.charCodeAt(te),I=_>>8,U=_%256,G.push(U),G.push(I);return G}function M(O){return h.toByteArray(re(O))}function W(O,a,_,I){let U;for(U=0;U<I&&!(U+_>=a.length||U>=O.length);++U)a[U+_]=O[U];return U}function $(O,a){return O instanceof a||O!=null&&O.constructor!=null&&O.constructor.name!=null&&O.constructor.name===a.name}function H(O){return O!==O}const Se=(function(){const O="0123456789abcdef",a=new Array(256);for(let _=0;_<16;++_){const I=_*16;for(let U=0;U<16;++U)a[I+U]=O[_]+O[U]}return a})();function se(O){return typeof BigInt>"u"?X:O}function X(){throw new Error("BigInt not supported")}}),((Y,P)=>{"use strict";P.byteLength=u,P.toByteArray=p,P.fromByteArray=c;for(var r=[],h=[],f=typeof Uint8Array<"u"?Uint8Array:Array,v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=0,g=v.length;l<g;++l)r[l]=v[l],h[v.charCodeAt(l)]=l;h[45]=62,h[95]=63;function E(i){var d=i.length;if(d%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var w=i.indexOf("=");w===-1&&(w=d);var b=w===d?0:4-w%4;return[w,b]}function u(i){var d=E(i),w=d[0],b=d[1];return(w+b)*3/4-b}function o(i,d,w){return(d+w)*3/4-w}function p(i){var d,w=E(i),b=w[0],m=w[1],e=new f(o(i,b,m)),s=0,y=m>0?b-4:b,S;for(S=0;S<y;S+=4)d=h[i.charCodeAt(S)]<<18|h[i.charCodeAt(S+1)]<<12|h[i.charCodeAt(S+2)]<<6|h[i.charCodeAt(S+3)],e[s++]=d>>16&255,e[s++]=d>>8&255,e[s++]=d&255;return m===2&&(d=h[i.charCodeAt(S)]<<2|h[i.charCodeAt(S+1)]>>4,e[s++]=d&255),m===1&&(d=h[i.charCodeAt(S)]<<10|h[i.charCodeAt(S+1)]<<4|h[i.charCodeAt(S+2)]>>2,e[s++]=d>>8&255,e[s++]=d&255),e}function t(i){return r[i>>18&63]+r[i>>12&63]+r[i>>6&63]+r[i&63]}function n(i,d,w){for(var b,m=[],e=d;e<w;e+=3)b=(i[e]<<16&16711680)+(i[e+1]<<8&65280)+(i[e+2]&255),m.push(t(b));return m.join("")}function c(i){for(var d,w=i.length,b=w%3,m=[],e=16383,s=0,y=w-b;s<y;s+=e)m.push(n(i,s,s+e>y?y:s+e));return b===1?(d=i[w-1],m.push(r[d>>2]+r[d<<4&63]+"==")):b===2&&(d=(i[w-2]<<8)+i[w-1],m.push(r[d>>10]+r[d>>4&63]+r[d<<2&63]+"=")),m.join("")}}),((Y,P)=>{P.read=function(r,h,f,v,l){var g,E,u=l*8-v-1,o=(1<<u)-1,p=o>>1,t=-7,n=f?l-1:0,c=f?-1:1,i=r[h+n];for(n+=c,g=i&(1<<-t)-1,i>>=-t,t+=u;t>0;g=g*256+r[h+n],n+=c,t-=8);for(E=g&(1<<-t)-1,g>>=-t,t+=v;t>0;E=E*256+r[h+n],n+=c,t-=8);if(g===0)g=1-p;else{if(g===o)return E?NaN:(i?-1:1)*(1/0);E=E+Math.pow(2,v),g=g-p}return(i?-1:1)*E*Math.pow(2,g-v)},P.write=function(r,h,f,v,l,g){var E,u,o,p=g*8-l-1,t=(1<<p)-1,n=t>>1,c=l===23?Math.pow(2,-24)-Math.pow(2,-77):0,i=v?0:g-1,d=v?1:-1,w=h<0||h===0&&1/h<0?1:0;for(h=Math.abs(h),isNaN(h)||h===1/0?(u=isNaN(h)?1:0,E=t):(E=Math.floor(Math.log(h)/Math.LN2),h*(o=Math.pow(2,-E))<1&&(E--,o*=2),E+n>=1?h+=c/o:h+=c*Math.pow(2,1-n),h*o>=2&&(E++,o/=2),E+n>=t?(u=0,E=t):E+n>=1?(u=(h*o-1)*Math.pow(2,l),E=E+n):(u=h*Math.pow(2,n-1)*Math.pow(2,l),E=0));l>=8;r[f+i]=u&255,i+=d,u/=256,l-=8);for(E=E<<l|u,p+=l;p>0;r[f+i]=E&255,i+=d,E/=256,p-=8);r[f+i-d]|=w*128}}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{Async:()=>g.Async,AsyncMapTransaction:()=>h.AsyncMapTransaction,AsyncTransaction:()=>h.AsyncTransaction,Attributes:()=>l.Attributes,BigIntStatsFs:()=>o.BigIntStatsFs,CopyOnWrite:()=>h.CopyOnWrite,CopyOnWriteFS:()=>h.CopyOnWriteFS,DeviceFS:()=>l.DeviceFS,Dir:()=>o.Dir,Dirent:()=>o.Dirent,ErrnoError:()=>l.ErrnoError,Fetch:()=>h.Fetch,FetchFS:()=>h.FetchFS,FileSystem:()=>l.FileSystem,IOC:()=>o.IOC,IOC32:()=>o.IOC32,InMemory:()=>h.InMemory,InMemoryStore:()=>h.InMemoryStore,Index:()=>l.Index,IndexFS:()=>l.IndexFS,Inode:()=>l.Inode,InodeFlags:()=>l.InodeFlags,Journal:()=>h.Journal,MetadataBlock:()=>h.MetadataBlock,MutexLock:()=>g.MutexLock,Mutexed:()=>g.Mutexed,Passthrough:()=>h.Passthrough,PassthroughFS:()=>h.PassthroughFS,Port:()=>h.Port,PortFS:()=>h.PortFS,RPC:()=>h.RPC,ReadStream:()=>o.ReadStream,Readonly:()=>g.Readonly,SingleBuffer:()=>h.SingleBuffer,SingleBufferStore:()=>h.SingleBufferStore,Stats:()=>o.Stats,StatsFs:()=>o.StatsFs,StoreFS:()=>h.StoreFS,SuperBlock:()=>h.SuperBlock,Sync:()=>g.Sync,SyncMapTransaction:()=>h.SyncMapTransaction,SyncTransaction:()=>h.SyncTransaction,Transaction:()=>h.Transaction,WrappedTransaction:()=>h.WrappedTransaction,WriteStream:()=>o.WriteStream,_MutexedFS:()=>g._MutexedFS,_asyncFSKeys:()=>g._asyncFSKeys,_chown:()=>l._chown,_fnOpt:()=>h._fnOpt,_inode_fields:()=>l._inode_fields,_inode_version:()=>l._inode_version,_tempDirName:()=>E._tempDirName,access:()=>o.access,accessSync:()=>o.accessSync,addDevice:()=>f.addDevice,appendFile:()=>o.appendFile,appendFileSync:()=>o.appendFileSync,attachFS:()=>h.attachFS,bindContext:()=>v.bindContext,boundContexts:()=>v.boundContexts,checkOptions:()=>h.checkOptions,chmod:()=>o.chmod,chmodSync:()=>o.chmodSync,chown:()=>o.chown,chownSync:()=>o.chownSync,chroot:()=>o.chroot,close:()=>o.close,closeSync:()=>o.closeSync,configure:()=>f.configure,configureFileSystem:()=>f.configureFileSystem,configureSingle:()=>f.configureSingle,constants:()=>o.constants,contextOf:()=>l.contextOf,copyFile:()=>o.copyFile,copyFileSync:()=>o.copyFileSync,cp:()=>o.cp,cpSync:()=>o.cpSync,createChildContext:()=>l.createChildContext,createCredentials:()=>l.createCredentials,createReadStream:()=>o.createReadStream,createWriteStream:()=>o.createWriteStream,credentialsAllowRoot:()=>l.credentialsAllowRoot,decodeDirListing:()=>E.decodeDirListing,default:()=>n,defaultContext:()=>l.defaultContext,detachFS:()=>h.detachFS,devices:()=>l.devices,encodeDirListing:()=>E.encodeDirListing,exists:()=>o.exists,existsSync:()=>o.existsSync,fchmod:()=>o.fchmod,fchmodSync:()=>o.fchmodSync,fchown:()=>o.fchown,fchownSync:()=>o.fchownSync,fdatasync:()=>o.fdatasync,fdatasyncSync:()=>o.fdatasyncSync,fs:()=>o,fstat:()=>o.fstat,fstatSync:()=>o.fstatSync,fsync:()=>o.fsync,fsyncSync:()=>o.fsyncSync,ftruncate:()=>o.ftruncate,ftruncateSync:()=>o.ftruncateSync,fullDevice:()=>l.fullDevice,futimes:()=>o.futimes,futimesSync:()=>o.futimesSync,glob:()=>o.glob,globSync:()=>o.globSync,globToRegex:()=>E.globToRegex,hasAccess:()=>l.hasAccess,ioctl:()=>o.ioctl,ioctlSync:()=>o.ioctlSync,isBackend:()=>h.isBackend,isBackendConfig:()=>h.isBackendConfig,isBlockDevice:()=>l.isBlockDevice,isCharacterDevice:()=>l.isCharacterDevice,isDirectory:()=>l.isDirectory,isFIFO:()=>l.isFIFO,isFile:()=>l.isFile,isSocket:()=>l.isSocket,isSymbolicLink:()=>l.isSymbolicLink,lchmod:()=>o.lchmod,lchmodSync:()=>o.lchmodSync,lchown:()=>o.lchown,lchownSync:()=>o.lchownSync,link:()=>o.link,linkSync:()=>o.linkSync,log:()=>l.log,lopenSync:()=>o.lopenSync,lstat:()=>o.lstat,lstatSync:()=>o.lstatSync,lutimes:()=>o.lutimes,lutimesSync:()=>o.lutimesSync,mkdir:()=>o.mkdir,mkdirSync:()=>o.mkdirSync,mkdtemp:()=>o.mkdtemp,mkdtempDisposableSync:()=>o.mkdtempDisposableSync,mkdtempSync:()=>o.mkdtempSync,mount:()=>o.mount,mounts:()=>u.mounts,normalizeMode:()=>E.normalizeMode,normalizeOptions:()=>E.normalizeOptions,normalizePath:()=>E.normalizePath,normalizeTime:()=>E.normalizeTime,nullDevice:()=>l.nullDevice,open:()=>o.open,openAsBlob:()=>o.openAsBlob,openSync:()=>o.openSync,opendir:()=>o.opendir,opendirSync:()=>o.opendirSync,promises:()=>o.promises,randomDevice:()=>l.randomDevice,read:()=>o.read,readFile:()=>o.readFile,readFileSync:()=>o.readFileSync,readSync:()=>o.readSync,readdir:()=>o.readdir,readdirSync:()=>o.readdirSync,readlink:()=>o.readlink,readlinkSync:()=>o.readlinkSync,readv:()=>o.readv,readvSync:()=>o.readvSync,realpath:()=>o.realpath,realpathSync:()=>o.realpathSync,rename:()=>o.rename,renameSync:()=>o.renameSync,resolveMountConfig:()=>f.resolveMountConfig,resolveRemoteMount:()=>h.resolveRemoteMount,rm:()=>o.rm,rmSync:()=>o.rmSync,rmdir:()=>o.rmdir,rmdirSync:()=>o.rmdirSync,rootIno:()=>l.rootIno,stat:()=>o.stat,statSync:()=>o.statSync,statfs:()=>o.statfs,statfsSync:()=>o.statfsSync,symlink:()=>o.symlink,symlinkSync:()=>o.symlinkSync,sync:()=>f.sync,truncate:()=>o.truncate,truncateSync:()=>o.truncateSync,umount:()=>o.umount,unlink:()=>o.unlink,unlinkSync:()=>o.unlinkSync,unwatchFile:()=>o.unwatchFile,userModifiableFlags:()=>l.userModifiableFlags,userVisibleFlags:()=>l.userVisibleFlags,utimes:()=>o.utimes,utimesSync:()=>o.utimesSync,version:()=>l.version,vfs:()=>p,waitOnline:()=>E.waitOnline,watch:()=>o.watch,watchFile:()=>o.watchFile,withExceptionContext:()=>l.withExceptionContext,withPath:()=>l.withPath,wrap:()=>l.wrap,write:()=>o.write,writeFile:()=>o.writeFile,writeFileSync:()=>o.writeFileSync,writeSync:()=>o.writeSync,writev:()=>o.writev,writevSync:()=>o.writevSync,xattr:()=>o.xattr,zeroDevice:()=>l.zeroDevice});var h=r(8),f=r(26),v=r(107),l=r(111),g=r(112),E=r(46),u=r(60),o=r(116),p=r(118),t=r(119);const n=o;globalThis.__zenfs__=Object.assign(Object.create(o),{_version:t.version})}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{AsyncMapTransaction:()=>p.AsyncMapTransaction,AsyncTransaction:()=>t.AsyncTransaction,CopyOnWrite:()=>f.CopyOnWrite,CopyOnWriteFS:()=>f.CopyOnWriteFS,Fetch:()=>v.Fetch,FetchFS:()=>v.FetchFS,InMemory:()=>l.InMemory,InMemoryStore:()=>l.InMemoryStore,Journal:()=>f.Journal,MetadataBlock:()=>u.MetadataBlock,Passthrough:()=>g.Passthrough,PassthroughFS:()=>g.PassthroughFS,Port:()=>E.Port,PortFS:()=>E.PortFS,RPC:()=>E.RPC,SingleBuffer:()=>u.SingleBuffer,SingleBufferStore:()=>u.SingleBufferStore,StoreFS:()=>o.StoreFS,SuperBlock:()=>u.SuperBlock,SyncMapTransaction:()=>p.SyncMapTransaction,SyncTransaction:()=>t.SyncTransaction,Transaction:()=>t.Transaction,WrappedTransaction:()=>t.WrappedTransaction,_fnOpt:()=>h._fnOpt,attachFS:()=>E.attachFS,checkOptions:()=>h.checkOptions,detachFS:()=>E.detachFS,isBackend:()=>h.isBackend,isBackendConfig:()=>h.isBackendConfig,resolveRemoteMount:()=>E.resolveRemoteMount});var h=r(9),f=r(25),v=r(97),l=r(30),g=r(100),E=r(101),u=r(105),o=r(32),p=r(53),t=r(50)}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{_fnOpt:()=>l,checkOptions:()=>E,isBackend:()=>v,isBackendConfig:()=>u});var h=r(10),f=r(24);function v(o){return o!=null&&typeof o=="object"&&"create"in o&&typeof o.create=="function"}function l(o,p){return Object.defineProperty(p,"prototype",{value:void 0}),o&&Object.defineProperty(p,"name",{value:o}),p}function g(o){return!(o&&o.constructor===Function)||o.prototype===void 0?!1:Function.prototype!==Object.getPrototypeOf(o)?!0:Object.getOwnPropertyNames(o.prototype).length>1}function E(o,p){if(typeof p!="object"||p===null)throw(0,f.err)((0,h.withErrno)("EINVAL","Invalid options"));for(const[t,n]of Object.entries(o.options)){const c=p?.[t];if(c==null){if(!n.required){(0,f.debug)("Using default for option: "+t);continue}throw(0,f.err)((0,h.withErrno)("EINVAL","Missing required option: "+t))}const i=(m,e=c)=>typeof m=="function"?g(m)?c instanceof m:m(c):typeof c===m||c?.constructor?.name===m;if(Array.isArray(n.type)?n.type.some(m=>i(m)):i(n.type))continue;const d=typeof c=="object"&&"constructor"in c?c.constructor.name:typeof c,w=m=>typeof m=="function"?m.name!="type"?m.name:m.toString():m,b=Array.isArray(n.type)?`one of ${n.type.map(w).join(", ")}`:w(n.type);throw(0,f.err)((0,h.withErrno)("EINVAL",`Incorrect type for "${t}": ${d} (expected ${b})`))}}function u(o){return o!=null&&typeof o=="object"&&"backend"in o&&v(o.backend)}}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{Errno:()=>h.Errno,Exception:()=>h.Exception,UV:()=>h.UV,log:()=>f,rethrow:()=>h.rethrow,setUVMessage:()=>h.setUVMessage,strerror:()=>h.strerror,withErrno:()=>h.withErrno});var h=r(11),f=r(24)}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{Errno:()=>f,Exception:()=>E,UV:()=>u,rethrow:()=>p,setUVMessage:()=>g,strerror:()=>l,withErrno:()=>o});var h=r(12),f;(function(t){t[t.EPERM=1]="EPERM",t[t.ENOENT=2]="ENOENT",t[t.ESRCH=3]="ESRCH",t[t.EINTR=4]="EINTR",t[t.EIO=5]="EIO",t[t.ENXIO=6]="ENXIO",t[t.E2BIG=7]="E2BIG",t[t.ENOEXEC=8]="ENOEXEC",t[t.EBADF=9]="EBADF",t[t.ECHILD=10]="ECHILD",t[t.EAGAIN=11]="EAGAIN",t[t.ENOMEM=12]="ENOMEM",t[t.EACCES=13]="EACCES",t[t.EFAULT=14]="EFAULT",t[t.ENOTBLK=15]="ENOTBLK",t[t.EBUSY=16]="EBUSY",t[t.EEXIST=17]="EEXIST",t[t.EXDEV=18]="EXDEV",t[t.ENODEV=19]="ENODEV",t[t.ENOTDIR=20]="ENOTDIR",t[t.EISDIR=21]="EISDIR",t[t.EINVAL=22]="EINVAL",t[t.ENFILE=23]="ENFILE",t[t.EMFILE=24]="EMFILE",t[t.ETXTBSY=26]="ETXTBSY",t[t.EFBIG=27]="EFBIG",t[t.ENOSPC=28]="ENOSPC",t[t.ESPIPE=29]="ESPIPE",t[t.EROFS=30]="EROFS",t[t.EMLINK=31]="EMLINK",t[t.EPIPE=32]="EPIPE",t[t.EDOM=33]="EDOM",t[t.ERANGE=34]="ERANGE",t[t.EDEADLK=35]="EDEADLK",t[t.ENAMETOOLONG=36]="ENAMETOOLONG",t[t.ENOLCK=37]="ENOLCK",t[t.ENOSYS=38]="ENOSYS",t[t.ENOTEMPTY=39]="ENOTEMPTY",t[t.ELOOP=40]="ELOOP",t[t.ENOMSG=42]="ENOMSG",t[t.EIDRM=43]="EIDRM",t[t.ECHRNG=44]="ECHRNG",t[t.EL2NSYNC=45]="EL2NSYNC",t[t.EL3HLT=46]="EL3HLT",t[t.EL3RST=47]="EL3RST",t[t.ENRNG=48]="ENRNG",t[t.EUNATCH=49]="EUNATCH",t[t.ECSI=50]="ECSI",t[t.EL2HLT=51]="EL2HLT",t[t.EBADE=52]="EBADE",t[t.EBADR=53]="EBADR",t[t.EXFULL=54]="EXFULL",t[t.ENOANO=55]="ENOANO",t[t.EBADRQC=56]="EBADRQC",t[t.EBADSLT=57]="EBADSLT",t[t.EBFONT=59]="EBFONT",t[t.ENOSTR=60]="ENOSTR",t[t.ENODATA=61]="ENODATA",t[t.ETIME=62]="ETIME",t[t.ENOSR=63]="ENOSR",t[t.ENONET=64]="ENONET",t[t.ENOPKG=65]="ENOPKG",t[t.EREMOTE=66]="EREMOTE",t[t.ENOLINK=67]="ENOLINK",t[t.EADV=68]="EADV",t[t.ESRMNT=69]="ESRMNT",t[t.ECOMM=70]="ECOMM",t[t.EPROTO=71]="EPROTO",t[t.EMULTIHOP=72]="EMULTIHOP",t[t.EDOTDOT=73]="EDOTDOT",t[t.EBADMSG=74]="EBADMSG",t[t.EOVERFLOW=75]="EOVERFLOW",t[t.ENOTUNIQ=76]="ENOTUNIQ",t[t.EBADFD=77]="EBADFD",t[t.EREMCHG=78]="EREMCHG",t[t.ELIBACC=79]="ELIBACC",t[t.ELIBBAD=80]="ELIBBAD",t[t.ELIBSCN=81]="ELIBSCN",t[t.ELIBMAX=82]="ELIBMAX",t[t.ELIBEXEC=83]="ELIBEXEC",t[t.EILSEQ=84]="EILSEQ",t[t.ERESTART=85]="ERESTART",t[t.ESTRPIPE=86]="ESTRPIPE",t[t.EUSERS=87]="EUSERS",t[t.ENOTSOCK=88]="ENOTSOCK",t[t.EDESTADDRREQ=89]="EDESTADDRREQ",t[t.EMSGSIZE=90]="EMSGSIZE",t[t.EPROTOTYPE=91]="EPROTOTYPE",t[t.ENOPROTOOPT=92]="ENOPROTOOPT",t[t.EPROTONOSUPPORT=93]="EPROTONOSUPPORT",t[t.ESOCKTNOSUPPORT=94]="ESOCKTNOSUPPORT",t[t.ENOTSUP=95]="ENOTSUP",t[t.EPFNOSUPPORT=96]="EPFNOSUPPORT",t[t.EAFNOSUPPORT=97]="EAFNOSUPPORT",t[t.EADDRINUSE=98]="EADDRINUSE",t[t.EADDRNOTAVAIL=99]="EADDRNOTAVAIL",t[t.ENETDOWN=100]="ENETDOWN",t[t.ENETUNREACH=101]="ENETUNREACH",t[t.ENETRESET=102]="ENETRESET",t[t.ECONNABORTED=103]="ECONNABORTED",t[t.ECONNRESET=104]="ECONNRESET",t[t.ENOBUFS=105]="ENOBUFS",t[t.EISCONN=106]="EISCONN",t[t.ENOTCONN=107]="ENOTCONN",t[t.ESHUTDOWN=108]="ESHUTDOWN",t[t.ETOOMANYREFS=109]="ETOOMANYREFS",t[t.ETIMEDOUT=110]="ETIMEDOUT",t[t.ECONNREFUSED=111]="ECONNREFUSED",t[t.EHOSTDOWN=112]="EHOSTDOWN",t[t.EHOSTUNREACH=113]="EHOSTUNREACH",t[t.EALREADY=114]="EALREADY",t[t.EINPROGRESS=115]="EINPROGRESS",t[t.ESTALE=116]="ESTALE",t[t.EEUCLEAN=117]="EEUCLEAN",t[t.ENOTNAM=118]="ENOTNAM",t[t.ENAVAIL=119]="ENAVAIL",t[t.EISNAM=120]="EISNAM",t[t.EREMOTEIO=121]="EREMOTEIO",t[t.EDQUOT=122]="EDQUOT",t[t.ENOMEDIUM=123]="ENOMEDIUM",t[t.EMEDIUMTYPE=124]="EMEDIUMTYPE",t[t.ECANCELED=125]="ECANCELED",t[t.ENOKEY=126]="ENOKEY",t[t.EKEYEXPIRED=127]="EKEYEXPIRED",t[t.EKEYREVOKED=128]="EKEYREVOKED",t[t.EKEYREJECTED=129]="EKEYREJECTED",t[t.EOWNERDEAD=130]="EOWNERDEAD",t[t.ENOTRECOVERABLE=131]="ENOTRECOVERABLE",t[t.ERFKILL=132]="ERFKILL",t[t.EHWPOISON=133]="EHWPOISON"})(f||(f={}));const v={[f.EPERM]:"Operation not permitted",[f.ENOENT]:"No such file or directory",[f.ESRCH]:"No such process",[f.EINTR]:"Interrupted system call",[f.EIO]:"Input/output error",[f.ENXIO]:"No such device or address",[f.E2BIG]:"Argument list too long",[f.ENOEXEC]:"Exec format error",[f.EBADF]:"Bad file descriptor",[f.ECHILD]:"No child processes",[f.EAGAIN]:"Resource temporarily unavailable",[f.ENOMEM]:"Out of memory",[f.EACCES]:"Permission denied",[f.EFAULT]:"Bad address",[f.ENOTBLK]:"Block device required",[f.EBUSY]:"Resource busy or locked",[f.EEXIST]:"File exists",[f.EXDEV]:"Invalid cross-device link",[f.ENODEV]:"No such device",[f.ENOTDIR]:"File is not a directory",[f.EISDIR]:"File is a directory",[f.EINVAL]:"Invalid argument",[f.ENFILE]:"Too many open files in system",[f.EMFILE]:"Too many open files",[f.ETXTBSY]:"Text file busy",[f.EFBIG]:"File is too big",[f.ENOSPC]:"No space left on disk",[f.ESPIPE]:"Illegal seek",[f.EROFS]:"Cannot modify a read-only file system",[f.EMLINK]:"Too many links",[f.EPIPE]:"Broken pipe",[f.EDOM]:"Numerical argument out of domain",[f.ERANGE]:"Numerical result out of range",[f.EDEADLK]:"Resource deadlock would occur",[f.ENAMETOOLONG]:"File name too long",[f.ENOLCK]:"No locks available",[f.ENOSYS]:"Function not implemented",[f.ENOTEMPTY]:"Directory is not empty",[f.ELOOP]:"Too many levels of symbolic links",[f.ENOMSG]:"No message of desired type",[f.EIDRM]:"Identifier removed",[f.ECHRNG]:"Channel number out of range",[f.EL2NSYNC]:"Level 2 not synchronized",[f.EL3HLT]:"Level 3 halted",[f.EL3RST]:"Level 3 reset",[f.ENRNG]:"Link number out of range",[f.EUNATCH]:"Protocol driver not attached",[f.ECSI]:"No CSI structure available",[f.EL2HLT]:"Level 2 halted",[f.EBADE]:"Invalid exchange",[f.EBADR]:"Invalid request descriptor",[f.EXFULL]:"Exchange full",[f.ENOANO]:"No anode",[f.EBADRQC]:"Invalid request code",[f.EBADSLT]:"Invalid slot",[f.EBFONT]:"Bad font file format",[f.ENOSTR]:"Device not a stream",[f.ENODATA]:"No data available",[f.ETIME]:"Timer expired",[f.ENOSR]:"Out of streams resources",[f.ENONET]:"Machine is not on the network",[f.ENOPKG]:"Package not installed",[f.EREMOTE]:"Object is remote",[f.ENOLINK]:"Link has been severed",[f.EADV]:"Advertise error",[f.ESRMNT]:"Srmount error",[f.ECOMM]:"Communication error on send",[f.EPROTO]:"Protocol error",[f.EMULTIHOP]:"Multihop attempted",[f.EDOTDOT]:"RFS specific error",[f.EBADMSG]:"Bad message",[f.EOVERFLOW]:"Value too large for defined data type",[f.ENOTUNIQ]:"Name not unique on network",[f.EBADFD]:"File descriptor in bad state",[f.EREMCHG]:"Remote address changed",[f.ELIBACC]:"Can not access a needed shared library",[f.ELIBBAD]:"Accessing a corrupted shared library",[f.ELIBSCN]:".lib section in a.out corrupted",[f.ELIBMAX]:"Attempting to link in too many shared libraries",[f.ELIBEXEC]:"Cannot exec a shared library directly",[f.EILSEQ]:"Invalid or incomplete multibyte or wide character",[f.ERESTART]:"Interrupted system call should be restarted",[f.ESTRPIPE]:"Streams pipe error",[f.EUSERS]:"Too many users",[f.ENOTSOCK]:"Socket operation on non-socket",[f.EDESTADDRREQ]:"Destination address required",[f.EMSGSIZE]:"Message too long",[f.EPROTOTYPE]:"Protocol wrong type for socket",[f.ENOPROTOOPT]:"Protocol not available",[f.EPROTONOSUPPORT]:"Protocol not supported",[f.ESOCKTNOSUPPORT]:"Socket type not supported",[f.ENOTSUP]:"Operation is not supported",[f.EPFNOSUPPORT]:"Protocol family not supported",[f.EAFNOSUPPORT]:"Address family not supported by protocol",[f.EADDRINUSE]:"Address already in use",[f.EADDRNOTAVAIL]:"Cannot assign requested address",[f.ENETDOWN]:"Network is down",[f.ENETUNREACH]:"Network is unreachable",[f.ENETRESET]:"Network dropped connection on reset",[f.ECONNABORTED]:"Software caused connection abort",[f.ECONNRESET]:"Connection reset by peer",[f.ENOBUFS]:"No buffer space available",[f.EISCONN]:"Transport endpoint is already connected",[f.ENOTCONN]:"Transport endpoint is not connected",[f.ESHUTDOWN]:"Cannot send after transport endpoint shutdown",[f.ETOOMANYREFS]:"Too many references: cannot splice",[f.ETIMEDOUT]:"Connection timed out",[f.ECONNREFUSED]:"Connection refused",[f.EHOSTDOWN]:"Host is down",[f.EHOSTUNREACH]:"No route to host",[f.EALREADY]:"Operation already in progress",[f.EINPROGRESS]:"Operation now in progress",[f.ESTALE]:"Stale file handle",[f.EEUCLEAN]:"Structure needs cleaning",[f.ENOTNAM]:"Not a XENIX named type file",[f.ENAVAIL]:"No XENIX semaphores available",[f.EISNAM]:"Is a named type file",[f.EREMOTEIO]:"Remote I/O error",[f.EDQUOT]:"Disk quota exceeded",[f.ENOMEDIUM]:"No medium found",[f.EMEDIUMTYPE]:"Wrong medium type",[f.ECANCELED]:"Operation canceled",[f.ENOKEY]:"Required key not available",[f.EKEYEXPIRED]:"Key has expired",[f.EKEYREVOKED]:"Key has been revoked",[f.EKEYREJECTED]:"Key was rejected by service",[f.EOWNERDEAD]:"Owner died",[f.ENOTRECOVERABLE]:"State not recoverable",[f.ERFKILL]:"Operation not possible due to RF-kill",[f.EHWPOISON]:"Memory page has hardware error"};function l(t){const n=typeof t=="string"?f[t]:t;return n in v?v[n]:""}function g(t){let n=`${t.code}: ${v[t.errno]}, ${t.syscall}`;return t.path&&(n+=` '${t.path}'`),t.dest&&(n+=` -> '${t.dest}'`),t.message&&!t.message.startsWith(v[t.errno])&&(n+=` (${t.message})`),t.message=n,t}class E extends Error{errno;code;path;dest;syscall;constructor(n,c,i={}){const d=f[n];super(c||""),this.errno=n,this.code=d,Object.assign(this,(0,h.omit)(i,"message")),c||g(this),Error.captureStackTrace?.(this,this.constructor)}toString(){return this.message}toJSON(){const n={errno:this.errno,code:this.code,stack:this.stack,message:this.message};return this.path&&(n.path=this.path),this.dest&&(n.dest=this.dest),this.syscall&&(n.syscall=this.syscall),n}static fromJSON(n){const c=n.syscall?new E(n.errno,!1,n):new E(n.errno,n.message);return c.stack=n.stack,c}}function u(t,n,c,i){typeof n=="string"&&(n={syscall:n,path:c,dest:i});const d=new E(f[t],!1,n??{});return Error.captureStackTrace?.(d,u),d}function o(t,n){const c=new E(f[t],n??v[f[t]]);return Error.captureStackTrace?.(c,o),c}function p(t,n,c){const i=typeof t=="string"?{syscall:t}:t;return n&&(i.path=n),c&&(i.dest=c),function(d){throw Object.assign(d,i),g(d),d}}}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{List:()=>h.List,_throw:()=>f._throw,assignWithDefaults:()=>l.assignWithDefaults,bindFunctions:()=>l.bindFunctions,canary:()=>f.canary,capitalize:()=>E.capitalize,decodeASCII:()=>E.decodeASCII,decodeUTF8:()=>E.decodeUTF8,decodeUUID:()=>E.decodeUUID,deepAssign:()=>l.deepAssign,encodeASCII:()=>E.encodeASCII,encodeUTF8:()=>E.encodeUTF8,encodeUUID:()=>E.encodeUUID,filterObject:()=>l.filterObject,formatCompact:()=>v.formatCompact,getAllPrototypes:()=>l.getAllPrototypes,getByString:()=>l.getByString,getRandomIntWithRecursiveProbability:()=>g.getRandomIntWithRecursiveProbability,greekLetterNames:()=>f.greekLetterNames,isHex:()=>f.isHex,isJSON:()=>l.isJSON,isObject:()=>l.isObject,map:()=>l.map,memoize:()=>f.memoize,omit:()=>l.omit,parseUUID:()=>E.parseUUID,pick:()=>l.pick,randomBinaryString:()=>g.randomBinaryString,randomBoolean:()=>g.randomBoolean,randomFloat:()=>g.randomFloat,randomHex:()=>g.randomHex,randomInt:()=>g.randomInt,range:()=>v.range,resolveConstructors:()=>l.resolveConstructors,setByString:()=>l.setByString,stringifyUUID:()=>E.stringifyUUID,toDegrees:()=>v.toDegrees,toRadians:()=>v.toRadians,uncapitalize:()=>E.uncapitalize,version:()=>p,wait:()=>f.wait});var h=r(13),f=r(16),v=r(18),l=r(17),g=r(19),E=r(20),u=r(21),o=r(22),p=r(23)}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{List:()=>f});var h=r(14);class f extends h.EventEmitter{[Symbol.toStringTag]="List";constructor(l){super(),l&&this.push(...l)}data=new Set;toSet(){return new Set(this.data)}toArray(){return Array.from(this.data)}toJSON(){return Array.from(this.data)}toString(){return this.join(",")}_set(l,g,E=!1){if(Math.abs(l)>this.data.size)throw new ReferenceError("Can not set an element outside the bounds of the list");const u=Array.from(this.data);u.splice(l,+E,g),this.data=new Set(u),this.emit("update")}set(l,g){this._set(l,g,!0)}deleteAt(l){if(Math.abs(l)>this.data.size)throw new ReferenceError("Can not delete an element outside the bounds of the list");this.delete(Array.from(this.data).at(l))}insert(l,g=this.data.size){this._set(g,l,!1)}at(l){if(Math.abs(l)>this.data.size)throw new ReferenceError("Can not access an element outside the bounds of the list");return Array.from(this.data).at(l)}pop(){const l=Array.from(this.data).pop();return l!==void 0&&this.delete(l),l}push(...l){for(const g of l)this.add(g);return this.data.size}join(l){return Array.from(this.data).join(l)}splice(l,g,...E){if(Math.abs(l)>this.data.size)throw new ReferenceError("Can not splice elements outside the bounds of the list");const u=Array.from(this.data),o=u.splice(l,g,...E);return this.data=new Set(u),this.emit("update"),o}add(l){return this.data.add(l),this.emit("update"),this.emit("add",l),this}clear(){this.data.clear(),this.emit("update")}delete(l){const g=this.data.delete(l);return this.emit("update"),g}has(l){return this.data.has(l)}get size(){return this.data.size}entries(){return this.toArray().entries()}keys(){return this.toArray().keys()}values(){return this.data.values()}[Symbol.iterator](){return this.data[Symbol.iterator]()}}}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{EventEmitter:()=>h,default:()=>f});var h=r(15);const f=h}),(Y=>{"use strict";var P=Object.prototype.hasOwnProperty,r="~";function h(){}Object.create&&(h.prototype=Object.create(null),new h().__proto__||(r=!1));function f(E,u,o){this.fn=E,this.context=u,this.once=o||!1}function v(E,u,o,p,t){if(typeof o!="function")throw new TypeError("The listener must be a function");var n=new f(o,p||E,t),c=r?r+u:u;return E._events[c]?E._events[c].fn?E._events[c]=[E._events[c],n]:E._events[c].push(n):(E._events[c]=n,E._eventsCount++),E}function l(E,u){--E._eventsCount===0?E._events=new h:delete E._events[u]}function g(){this._events=new h,this._eventsCount=0}g.prototype.eventNames=function(){var u=[],o,p;if(this._eventsCount===0)return u;for(p in o=this._events)P.call(o,p)&&u.push(r?p.slice(1):p);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(o)):u},g.prototype.listeners=function(u){var o=r?r+u:u,p=this._events[o];if(!p)return[];if(p.fn)return[p.fn];for(var t=0,n=p.length,c=new Array(n);t<n;t++)c[t]=p[t].fn;return c},g.prototype.listenerCount=function(u){var o=r?r+u:u,p=this._events[o];return p?p.fn?1:p.length:0},g.prototype.emit=function(u,o,p,t,n,c){var i=r?r+u:u;if(!this._events[i])return!1;var d=this._events[i],w=arguments.length,b,m;if(d.fn){switch(d.once&&this.removeListener(u,d.fn,void 0,!0),w){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,o),!0;case 3:return d.fn.call(d.context,o,p),!0;case 4:return d.fn.call(d.context,o,p,t),!0;case 5:return d.fn.call(d.context,o,p,t,n),!0;case 6:return d.fn.call(d.context,o,p,t,n,c),!0}for(m=1,b=new Array(w-1);m<w;m++)b[m-1]=arguments[m];d.fn.apply(d.context,b)}else{var e=d.length,s;for(m=0;m<e;m++)switch(d[m].once&&this.removeListener(u,d[m].fn,void 0,!0),w){case 1:d[m].fn.call(d[m].context);break;case 2:d[m].fn.call(d[m].context,o);break;case 3:d[m].fn.call(d[m].context,o,p);break;case 4:d[m].fn.call(d[m].context,o,p,t);break;default:if(!b)for(s=1,b=new Array(w-1);s<w;s++)b[s-1]=arguments[s];d[m].fn.apply(d[m].context,b)}}return!0},g.prototype.on=function(u,o,p){return v(this,u,o,p,!1)},g.prototype.once=function(u,o,p){return v(this,u,o,p,!0)},g.prototype.removeListener=function(u,o,p,t){var n=r?r+u:u;if(!this._events[n])return this;if(!o)return l(this,n),this;var c=this._events[n];if(c.fn)c.fn===o&&(!t||c.once)&&(!p||c.context===p)&&l(this,n);else{for(var i=0,d=[],w=c.length;i<w;i++)(c[i].fn!==o||t&&!c[i].once||p&&c[i].context!==p)&&d.push(c[i]);d.length?this._events[n]=d.length===1?d[0]:d:l(this,n)}return this},g.prototype.removeAllListeners=function(u){var o;return u?(o=r?r+u:u,this._events[o]&&l(this,o)):(this._events=new h,this._eventsCount=0),this},g.prototype.off=g.prototype.removeListener,g.prototype.addListener=g.prototype.on,g.prefixed=r,g.EventEmitter=g,Y.exports=g}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{_throw:()=>u,canary:()=>E,greekLetterNames:()=>v,isHex:()=>g,memoize:()=>o,wait:()=>f});var h=r(17);function f(p){return new Promise(t=>setTimeout(t,p))}const v=["Alpha","Beta","Gamma","Delta","Epsilon","Zeta","Eta","Theta","Iota","Kappa","Lambda","Mu","Nu","Xi","Omicron","Pi","Rho","Sigma","Tau","Upsilon","Phi","Chi","Psi","Omega"],l=/^[0-9a-f-.]+$/;function g(p){return l.test(p)}function E(p=new Error){const t=setTimeout(()=>{throw p},5e3);return()=>clearTimeout(t)}function u(p){throw p&&typeof p=="object"&&(0,h.resolveConstructors)(p).includes("Error")&&Error?.captureStackTrace(p,u),p}function o(p,t){if(t.kind!="getter")throw new Error("@memoize can only be used on getters");return function(){t.metadata??={};const{memoized:n={}}=t.metadata;return t.name in n?(console.log("Using cached value for",t.name,JSON.stringify(n[t.name])),n[t.name]):(n[t.name]=p.call(this),n[t.name])}}}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{assignWithDefaults:()=>l,bindFunctions:()=>i,deepAssign:()=>E,filterObject:()=>h,getAllPrototypes:()=>p,getByString:()=>n,isJSON:()=>u,isObject:()=>g,map:()=>t,omit:()=>v,pick:()=>f,resolveConstructors:()=>o,setByString:()=>c});function h(d,w){const b=Object.entries(d);return Object.fromEntries(b.filter(([m,e])=>w(m,e)))}function f(d,...w){const b={};for(const m of w.flat())b[m]=d[m];return b}function v(d,...w){return h(d,b=>!w.flat().includes(b))}function l(d,w,b=d){const m=new Set([...Object.keys(d),...Object.keys(w)]);for(const e of m)try{d[e]=w[e]??b[e]??d[e]}catch{}}function g(d){return Object(d)===d}function E(d,w){const b=new Set([...Object.keys(d),...Object.keys(w)]);for(const m of b){if(!(m in w))continue;const e=w[m];if(!(m in d)){d[m]=e;continue}if(!g(d[m])&&Object(e)!==e){d[m]=e;continue}if(g(d[m])&&Object(e)===e){E(d[m],e);continue}throw new TypeError(g(d[m])?"Can not deeply assign a primitive to an object":"Can not deeply assign an object to a primitive")}return d}function u(d){try{return JSON.parse(d),!0}catch{return!1}}function o(d){const w=[];for(let b=d;b&&!["Function","Object"].includes(b.constructor.name);b=Object.getPrototypeOf(b))w.push(b.constructor.name);return w}function*p(d){for(let w=d;w;w=Object.getPrototypeOf(w))yield w}function t(d){return new Map(Object.entries(d))}function n(d,w,b=/[.[\]'"]/){return w.split(b).filter(m=>m&&m!="__proto__").reduce((m,e)=>m?.[e],d)}function c(d,w,b,m=/[.[\]'"]/){return w.split(m).filter(e=>e&&e!="__proto__").reduce((e,s,y)=>e[s]=w.split(m).filter(S=>S).length===++y?b:e[s]||{},d)}function i(d,w){return Object.fromEntries(Object.entries(d).map(([b,m])=>[b,typeof m=="function"?m.bind(w):m]))}}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{formatCompact:()=>g,range:()=>h,toDegrees:()=>f,toRadians:()=>v});function h(E,u){const o=[];for(let p=E;p<u;p++)o.push(p);return o}function f(E){return E*180/Math.PI}function v(E){return E/180*Math.PI}const l=Intl.NumberFormat("en",{notation:"compact"}),g=l.format.bind(l)}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{getRandomIntWithRecursiveProbability:()=>E,randomBinaryString:()=>l,randomBoolean:()=>v,randomFloat:()=>h,randomHex:()=>f,randomInt:()=>g});function h(u=0,o=1){return Math.random()*(o-u)+u}function f(u=1){let o="";for(let p=0;p<u;p++)o+=Math.floor(Math.random()*16).toString(16);return o}function v(){return!!Math.round(Math.random())}function l(u=1){let o="";for(let p=0;p<u;p++)o+=Math.round(Math.random());return o}function g(u=0,o=1){return Math.round(Math.random()*(o-u)+u)}function E(u=.5){return-Math.floor(Math.log(Math.random())/Math.log(1/u))}}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{capitalize:()=>h,decodeASCII:()=>o,decodeUTF8:()=>E,decodeUUID:()=>p,encodeASCII:()=>u,encodeUTF8:()=>l,encodeUUID:()=>t,parseUUID:()=>c,stringifyUUID:()=>n,uncapitalize:()=>f});function h(i){return i.at(0).toUpperCase()+i.slice(1)}function f(i){return i.at(0).toLowerCase()+i.slice(1)}const v=new TextEncoder;function l(i){return v.encode(i)}const g=new TextDecoder;function E(i){if(!i)return"";if(i.buffer instanceof ArrayBuffer&&!i.buffer.resizable)return g.decode(i);const d=new Uint8Array(i.byteLength);return d.set(i),g.decode(d)}function u(i){const d=new Uint8Array(i.length);for(let w=0;w<i.length;w++)d[w]=i.charCodeAt(w);return d}function o(i){let d="";for(let w=0;w<i.length;w++)d+=String.fromCharCode(i[w]);return d}function p(i){const d=Array.from(i).map(w=>w.toString(16).padStart(2,"0")).join("");return`${d.slice(0,8)}-${d.slice(8,12)}-${d.slice(12,16)}-${d.slice(16,20)}-${d.slice(20)}`}function t(i){const d=i.replace(/-/g,""),w=new Uint8Array(16);for(let b=0;b<16;b++)w[b]=parseInt(d.slice(b*2,b*2+2),16);return w}function n(i){const d=i.toString(16).padStart(32,"0");return`${d.slice(0,8)}-${d.slice(8,12)}-${d.slice(12,16)}-${d.slice(16,20)}-${d.slice(20)}`}function c(i){return BigInt(`0x${i.replace(/-/g,"")}`)}}),((Y,P,r)=>{"use strict";r.r(P)}),((Y,P,r)=>{"use strict";r.r(P)}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{parse:()=>v,regex:()=>f});var h=r(20);const f=/^(?<core>\d+\.\d+\.\d+)(?:[-_](?<type>[^-_.]+)[-_.](?<pre>\d*(?:\.\d+)*))?/;function v(l,g){const{type:E,pre:u,core:o}=f.exec(l).groups,p=E?`${g&&o=="1.0.0"?"":o+" "}${(0,h.capitalize)(E)}${u?` ${u}`:""}`:o;return{full:l,core:o,pre:u,type:E,display:p}}}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{Level:()=>f,alert:()=>p,configure:()=>V,crit:()=>t,debug:()=>w,deprecated:()=>b,emerg:()=>o,entries:()=>g,err:()=>n,fancy:()=>S,format:()=>R,info:()=>d,isEnabled:()=>K,levelOf:()=>l,levels:()=>v,log:()=>E,notice:()=>i,warn:()=>c});var h=r(12),f;(function(C){C[C.EMERG=0]="EMERG",C[C.ALERT=1]="ALERT",C[C.CRIT=2]="CRIT",C[C.ERR=3]="ERR",C[C.WARN=4]="WARN",C[C.NOTICE=5]="NOTICE",C[C.INFO=6]="INFO",C[C.DEBUG=7]="DEBUG"})(f||(f={}));const v=["emergency","alert","critical","error","warning","notice","info","debug"];function l(C){return v.indexOf(C)}const g=new h.List;function E(C,B){if(!K)return;const j={level:C,message:B,timestamp:new Date,elapsedMs:performance.now()};g.add(j),A(j)}function u(C){return function(B){return E(C,B.toString()),B}}const o=u(f.EMERG),p=u(f.ALERT),t=u(f.CRIT),n=u(f.ERR),c=u(f.WARN),i=u(f.NOTICE),d=u(f.INFO),w=u(f.DEBUG);function b(C){E(f.WARN,C+" is deprecated and should not be used.")}function m(C,B){return`\x1B[${B}m${C}\x1B[0m`}function e(C){return"["+(C.elapsedMs/1e3).toFixed(3).padStart(10)+"] "}const s={ansi:{[f.EMERG]:"1;4;37;41",[f.ALERT]:"1;37;41",[f.CRIT]:"1;35",[f.ERR]:"1;31",[f.WARN]:"1;33",[f.NOTICE]:"1;36",[f.INFO]:"1;37",[f.DEBUG]:"0;2;37"},css:{[f.EMERG]:"font-weight: bold; text-decoration: underline; color: white; background-color: red;",[f.ALERT]:"font-weight: bold; color: white; background-color: red;",[f.CRIT]:"font-weight: bold; color: magenta;",[f.ERR]:"font-weight: bold; color: red;",[f.WARN]:"font-weight: bold; color: yellow;",[f.NOTICE]:"font-weight: bold; color: cyan;",[f.INFO]:"font-weight: bold; color: white;",[f.DEBUG]:"opacity: 0.8; color: white;"}},y={ansi:{[f.EMERG]:"1;31",[f.ALERT]:"1;31",[f.CRIT]:"1;31",[f.ERR]:"31",[f.WARN]:"33",[f.NOTICE]:"1;37",[f.INFO]:"37",[f.DEBUG]:"2;37"},css:{[f.EMERG]:"font-weight: bold; color: red;",[f.ALERT]:"font-weight: bold; color: red;",[f.CRIT]:"font-weight: bold; color: red;",[f.ERR]:"color: red;",[f.WARN]:"color: yellow;",[f.NOTICE]:"font-weight: bold; color: white;",[f.INFO]:"color: white;",[f.DEBUG]:"opacity: 0.8; color: white;"}};function S({style:C,colorize:B}){return function*(j){C=="css"&&(yield B=="level"?"%c%s %c%s":"%c%s %c%s%s %c%s"),yield*C=="ansi"?[m(e(j),"2;37")]:["opacity: 0.8; color: white;",e(j)];const q=C=="ansi"?[m(v[j.level].toUpperCase(),s.ansi[j.level])]:[s.css[j.level],v[j.level].toUpperCase()];if(B=="level"){yield*q,yield j.message;return}j.level<f.CRIT&&(yield*q),C=="ansi"?yield m(j.message,y.ansi[j.level]):yield*[y.css[j.level],j.message]}}let D=C=>[e(C),C.message];function R(C){const B=D(C);return typeof B=="string"?[B]:Array.from(B)}let T=console.error;function A(C){C.level>k||T(...R(C))}let k=f.ALERT,N=!1,K=!0;function V(C){if(D=C.format??D,T=C.output??T,k=typeof C.level=="string"?l(C.level):C.level??k,K=C.enabled??K,N=C.stack??N,!!C.dumpBacklog)for(const B of g)A(B)}}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{CopyOnWrite:()=>b,CopyOnWriteFS:()=>d,Journal:()=>i});var h=r(14),f=r(10),v=r(24),l=r(12),g=r(26),E=r(49),u=r(47),o=r(45);const p=["delete"];function t(m){return p.includes(m)}const n=Math.max(...p.map(m=>m.length)),c=`#journal@v0
`;class i extends h.EventEmitter{entries=[];toString(){return c+this.entries.map(e=>`${e.op.padEnd(n)} ${e.path}`).join(`
`)}fromString(e){if(!e.startsWith(c))throw(0,v.err)((0,f.withErrno)("EINVAL","Invalid journal contents, refusing to parse"));for(const s of e.split(`
`)){if(s.startsWith("#"))continue;const[y,S]=s.split(/\s+/);if(!t(y)){(0,v.warn)("Unknown operation in journal (skipping): "+y);continue}this.entries.push({op:y,path:S})}return this}add(e,s){this.entries.push({op:e,path:s}),this.emit("update",e,s),this.emit(e,s)}has(e,s){const y=JSON.stringify({op:e,path:s});for(const S of this.entries)if(JSON.stringify(S)===y)return!0;return!1}isDeleted(e){let s=!1;for(const y of this.entries)if(y.path==e)switch(y.op){case"delete":s=!0}return s}}class d extends E.FileSystem{readable;writable;journal;async ready(){await this.readable.ready(),await this.writable.ready()}constructor(e,s,y=new i){if(super(1651862636,e.name),this.readable=e,this.writable=s,this.journal=y,s.attributes.has("no_write"))throw(0,v.err)((0,f.withErrno)("EINVAL","Writable file system can not be written to"));e.attributes.set("no_write")}isDeleted(e){return this.journal.isDeleted(e)}usage(){return this.readable.usage()}async sync(){await this.writable.sync()}syncSync(){this.writable.syncSync()}async read(e,s,y,S){return await this.writable.exists(e)?await this.writable.read(e,s,y,S):await this.readable.read(e,s,y,S)}readSync(e,s,y,S){return this.writable.existsSync(e)?this.writable.readSync(e,s,y,S):this.readable.readSync(e,s,y,S)}async write(e,s,y){return await this.copyForWrite(e),await this.writable.write(e,s,y)}writeSync(e,s,y){return this.copyForWriteSync(e),this.writable.writeSync(e,s,y)}async rename(e,s){await this.copyForWrite(e);try{await this.writable.rename(e,s)}catch{if(this.isDeleted(e))throw(0,f.withErrno)("ENOENT")}}renameSync(e,s){this.copyForWriteSync(e);try{this.writable.renameSync(e,s)}catch{if(this.isDeleted(e))throw(0,f.withErrno)("ENOENT")}}async stat(e){try{return await this.writable.stat(e)}catch{if(this.isDeleted(e))throw(0,f.withErrno)("ENOENT");return await this.readable.stat(e)}}statSync(e){try{return this.writable.statSync(e)}catch{if(this.isDeleted(e))throw(0,f.withErrno)("ENOENT");return this.readable.statSync(e)}}async touch(e,s){await this.copyForWrite(e),await this.writable.touch(e,s)}touchSync(e,s){this.copyForWriteSync(e),this.writable.touchSync(e,s)}async createFile(e,s){return await this.createParentDirectories(e),await this.writable.createFile(e,s)}createFileSync(e,s){return this.createParentDirectoriesSync(e),this.writable.createFileSync(e,s)}async link(e,s){await this.copyForWrite(e),await this.writable.link(e,s)}linkSync(e,s){this.copyForWriteSync(e),this.writable.linkSync(e,s)}async unlink(e){if(!await this.exists(e))throw(0,f.withErrno)("ENOENT");await this.writable.exists(e)&&await this.writable.unlink(e),await this.exists(e)&&this.journal.add("delete",e)}unlinkSync(e){if(!this.existsSync(e))throw(0,f.withErrno)("ENOENT");this.writable.existsSync(e)&&this.writable.unlinkSync(e),this.existsSync(e)&&this.journal.add("delete",e)}async rmdir(e){if(!await this.exists(e))throw(0,f.withErrno)("ENOENT");if(await this.writable.exists(e)&&await this.writable.rmdir(e),!!await this.exists(e)){if((await this.readdir(e)).length)throw(0,f.withErrno)("ENOTEMPTY");this.journal.add("delete",e)}}rmdirSync(e){if(!this.existsSync(e))throw(0,f.withErrno)("ENOENT");if(this.writable.existsSync(e)&&this.writable.rmdirSync(e),!!this.existsSync(e)){if(this.readdirSync(e).length)throw(0,f.withErrno)("ENOTEMPTY");this.journal.add("delete",e)}}async mkdir(e,s){if(await this.exists(e))throw(0,f.withErrno)("EEXIST");return await this.createParentDirectories(e),await this.writable.mkdir(e,s)}mkdirSync(e,s){if(this.existsSync(e))throw(0,f.withErrno)("EEXIST");return this.createParentDirectoriesSync(e),this.writable.mkdirSync(e,s)}async readdir(e){if(this.isDeleted(e)||!await this.exists(e))throw(0,f.withErrno)("ENOENT");const s=await this.readable.exists(e)?await this.readable.readdir(e):[];if(await this.writable.exists(e))for(const y of await this.writable.readdir(e))s.includes(y)||s.push(y);return s.filter(y=>!this.isDeleted((0,o.join)(e,y)))}readdirSync(e){if(this.isDeleted(e)||!this.existsSync(e))throw(0,f.withErrno)("ENOENT");const s=this.readable.existsSync(e)?this.readable.readdirSync(e):[];if(this.writable.existsSync(e))for(const y of this.writable.readdirSync(e))s.includes(y)||s.push(y);return s.filter(y=>!this.isDeleted((0,o.join)(e,y)))}streamRead(e,s){return this.writable.existsSync(e)?this.writable.streamRead(e,s):this.readable.streamRead(e,s)}streamWrite(e,s){return this.copyForWriteSync(e),this.writable.streamWrite(e,s)}createParentDirectoriesSync(e){const s=[],y=(0,l.canary)((0,f.withErrno)("EDEADLK"));for(let S=(0,o.dirname)(e);!this.writable.existsSync(S);S=(0,o.dirname)(S))s.push(S);y(),s.length&&(0,v.debug)("COW: Creating parent directories: "+s.join(", "));for(const S of s.reverse())this.writable.mkdirSync(S,this.statSync(S))}async createParentDirectories(e){const s=[],y=(0,l.canary)((0,f.withErrno)("EDEADLK",e));for(let S=(0,o.dirname)(e);!await this.writable.exists(S);S=(0,o.dirname)(S))s.push(S);y(),s.length&&(0,v.debug)("COW: Creating parent directories: "+s.join(", "));for(const S of s.reverse())await this.writable.mkdir(S,await this.stat(S))}copyForWriteSync(e){if(!this.existsSync(e))throw(0,f.withErrno)("ENOENT");this.writable.existsSync((0,o.dirname)(e))||this.createParentDirectoriesSync(e),this.writable.existsSync(e)||this.copyToWritableSync(e)}async copyForWrite(e){if(!await this.exists(e))throw(0,f.withErrno)("ENOENT");if(await this.writable.exists((0,o.dirname)(e))||await this.createParentDirectories(e),!await this.writable.exists(e))return this.copyToWritable(e)}copyToWritableSync(e){const s=this.readable.statSync(e);if((0,u.isDirectory)(s)){this.writable.mkdirSync(e,s);for(const S of this.readable.readdirSync(e))this.copyToWritableSync((0,o.join)(e,S));return}const y=new Uint8Array(s.size);this.readable.readSync(e,y,0,y.byteLength),this.writable.createFileSync(e,s),this.writable.touchSync(e,s),this.writable.writeSync(e,y,0)}async copyToWritable(e){const s=await this.readable.stat(e);if((0,u.isDirectory)(s)){await this.writable.mkdir(e,s);for(const S of await this.readable.readdir(e))await this.copyToWritable((0,o.join)(e,S));return}const y=new Uint8Array(s.size);await this.readable.read(e,y,0,s.size),await this.writable.createFile(e,s),await this.writable.touch(e,s),await this.writable.write(e,y,0)}}const b={name:"CopyOnWrite",options:{writable:{type:"object",required:!0},readable:{type:"object",required:!0},journal:{type:"object",required:!1}},async create(m){const e=await(0,g.resolveMountConfig)(m.readable),s=await(0,g.resolveMountConfig)(m.writable);return new d(e,s,m.journal)}}}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{addDevice:()=>w,configure:()=>m,configureFileSystem:()=>t,configureSingle:()=>i,resolveMountConfig:()=>c,sync:()=>e});var h=r(10),f=r(9),v=r(27),l=r(28),g=r(29),E=r(49),u=r(54),o=r(56),p=r(60);function t(s,y){y.disableAsyncCache&&s.attributes.set("no_async_preload"),y.caseFold&&s.attributes.set("case_fold",y.caseFold)}function n(s){return(0,f.isBackendConfig)(s)||(0,f.isBackend)(s)||s instanceof E.FileSystem}async function c(s,y=0){if(typeof s!="object"||s==null)throw h.log.err((0,h.withErrno)("EINVAL","Invalid options on mount configuration"));if(!n(s))throw h.log.err((0,h.withErrno)("EINVAL","Invalid mount configuration"));if(s instanceof E.FileSystem)return await s.ready(),s;(0,f.isBackend)(s)&&(s={backend:s});for(const[R,T]of Object.entries(s))if(R!="backend"&&n(T)){if(h.log.info("Resolving nested mount configuration: "+R),y>10)throw h.log.err((0,h.withErrno)("EINVAL","Invalid configuration, too deep and possibly infinite"));s[R]=await c(T,++y)}const{backend:S}=s;if(typeof S.isAvailable=="function"&&!await S.isAvailable(s))throw h.log.err((0,h.withErrno)("EPERM","Backend not available: "+S.name));(0,f.checkOptions)(S,s);const D=await S.create(s);return t(D,s),await D.ready(),D}async function i(s){if(!n(s))throw new TypeError("Invalid single mount point configuration");const y=await c(s);(0,p.umount)("/"),(0,p.mount)("/",y)}async function d(s,y){if(s=="/"){(0,p.mount)(s,y);return}const S=await(0,u.stat)(s).catch(()=>null);if(!S)await(0,u.mkdir)(s,{recursive:!0});else if(!S.isDirectory())throw(0,h.withErrno)("ENOTDIR","Missing directory at mount point: "+s);(0,p.mount)(s,y)}function w(s,y){const S=p.mounts.get("/dev");if(!(S instanceof g.DeviceFS))throw h.log.crit((0,h.withErrno)("ENOTSUP","/dev does not exist or is not a device file system"));return S._createDevice(s,y)}const b=["/tmp","/var","/etc"];async function m(s){if(Object.assign(v.defaultContext.credentials,(0,l.createCredentials)({uid:s.uid||0,gid:s.gid||0})),(0,o._setAccessChecks)(!s.disableAccessChecks),s.log&&h.log.configure(s.log),s.mounts)for(const[y,S]of Object.entries(s.mounts).sort(([D],[R])=>D.length>R.length?1:-1)){const D=y.startsWith("/")?y:"/"+y;(0,f.isBackendConfig)(S)&&(S.disableAsyncCache??=s.disableAsyncCache||!1,S.caseFold??=s.caseFold),D=="/"&&(0,p.umount)("/"),await d(D,await c(S))}for(const y of p.mounts.values())t(y,s);if(s.addDevices&&!p.mounts.has("/dev")){const y=new g.DeviceFS;y.addDefaults(),await y.ready(),await d("/dev",y)}if(s.defaultDirectories)for(const y of b)await(0,u.exists)(y)?(await(0,u.stat)(y)).isDirectory()||h.log.warn("Default directory exists but is not a directory: "+y):await(0,u.mkdir)(y)}async function e(){for(const s of p.mounts.values())await s.sync()}}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{contextOf:()=>l,createChildContext:()=>E,defaultContext:()=>v});var h=r(28);const f=Symbol("ZenFSContext"),v={[f]:!0,id:0,root:"/",pwd:"/",credentials:(0,h.createCredentials)({uid:0,gid:0}),descriptors:new Map,parent:null,children:[]};function l(u){return typeof u=="object"&&u!==null&&f in u?u:v}let g=1;function E(u,o={}){const{root:p=u.root,pwd:t=u.pwd,credentials:n=structuredClone(u.credentials)}=o,c={[f]:!0,id:g++,root:p,pwd:t,credentials:(0,h.createCredentials)(n),descriptors:new Map,parent:u,children:[]};return Object.defineProperties(c,{id:{configurable:!1,writable:!1},credentials:{configurable:!1,writable:!1},descriptors:{configurable:!1,writable:!1},parent:{configurable:!1,writable:!1},children:{configurable:!1,writable:!1}}),c}}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{createCredentials:()=>h,credentialsAllowRoot:()=>f});function h(v){return{suid:v.uid,sgid:v.gid,euid:v.uid,egid:v.gid,groups:[],...v}}function f(v){return v?!v.uid||!v.gid||!v.euid||!v.egid||v.groups.some(l=>!l):!1}}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{DeviceFS:()=>p,devices:()=>b,fullDevice:()=>i,nullDevice:()=>n,randomDevice:()=>d,zeroDevice:()=>c});var h=r(10),f=r(24),v=r(12),l=r(30),g=r(32),E=r(45),u=r(31),o=r(47);class p extends g.StoreFS{devices=new Map;devicesWithDriver(e,s){if(s&&typeof e=="string")throw(0,f.err)((0,h.withErrno)("EINVAL","Can not fetch devices using only a driver name"));const y=[];for(const S of this.devices.values()){if(s&&S.driver!=e)continue;(typeof e=="string"?e:e.name)==S.driver.name&&y.push(S)}return y}_createDevice(e,s={}){let y=1;const S=Array.from(this.devices.values()).at(-1);for(;this.store.has(y)||S?.inode.ino==y;)y++;const D=e.init?.(y,s),R={data:{},minor:0,major:0,...(0,v.omit)(D??{},"metadata"),driver:e,inode:new o.Inode({mode:u.S_IFCHR|438,...D?.metadata})},T="/"+(R.name||e.name)+(e.singleton?"":this.devicesWithDriver(e).length);if(this.existsSync(T))throw(0,h.withErrno)("EEXIST");return this.devices.set(T,R),(0,f.info)("Initialized device: "+this._mountPoint+T),R}addDefaults(){this._createDevice(n),this._createDevice(c),this._createDevice(i),this._createDevice(d),this._createDevice(w),(0,f.debug)("Added default devices")}constructor(){super(new l.InMemoryStore(16777216,"devfs"))}async rename(e,s){if(this.devices.has(e))throw(0,h.withErrno)("EPERM");if(this.devices.has(s))throw(0,h.withErrno)("EEXIST");return super.rename(e,s)}renameSync(e,s){if(this.devices.has(e))throw(0,h.withErrno)("EPERM");if(this.devices.has(s))throw(0,h.withErrno)("EEXIST");return super.renameSync(e,s)}async stat(e){const s=this.devices.get(e);return s?s.inode:super.stat(e)}statSync(e){const s=this.devices.get(e);return s?s.inode:super.statSync(e)}async touch(e,s){const y=this.devices.get(e);y?y.inode.update(s):await super.touch(e,s)}touchSync(e,s){const y=this.devices.get(e);y?y.inode.update(s):super.touchSync(e,s)}async createFile(e,s){if(this.devices.has(e))throw(0,h.withErrno)("EEXIST");return super.createFile(e,s)}createFileSync(e,s){if(this.devices.has(e))throw(0,h.withErrno)("EEXIST");return super.createFileSync(e,s)}async unlink(e){if(this.devices.has(e))throw(0,h.withErrno)("EPERM");return super.unlink(e)}unlinkSync(e){if(this.devices.has(e))throw(0,h.withErrno)("EPERM");return super.unlinkSync(e)}async rmdir(e){return super.rmdir(e)}rmdirSync(e){return super.rmdirSync(e)}async mkdir(e,s){if(this.devices.has(e))throw(0,h.withErrno)("EEXIST");return super.mkdir(e,s)}mkdirSync(e,s){if(this.devices.has(e))throw(0,h.withErrno)("EEXIST");return super.mkdirSync(e,s)}async readdir(e){const s=await super.readdir(e);for(const y of this.devices.keys())(0,E.dirname)(y)==e&&s.push((0,E.basename)(y));return s}readdirSync(e){const s=super.readdirSync(e);for(const y of this.devices.keys())(0,E.dirname)(y)==e&&s.push((0,E.basename)(y));return s}async link(e,s){if(this.devices.has(e))throw(0,h.withErrno)("EPERM");if(this.devices.has(s))throw(0,h.withErrno)("EEXIST");return super.link(e,s)}linkSync(e,s){if(this.devices.has(e))throw(0,h.withErrno)("EPERM");if(this.devices.has(s))throw(0,h.withErrno)("EEXIST");return super.linkSync(e,s)}async sync(){for(const e of this.devices.values())e.driver.sync?.(e);return super.sync()}syncSync(){for(const e of this.devices.values())e.driver.sync?.(e);return super.syncSync()}async read(e,s,y,S){const D=this.devices.get(e);if(!D){await super.read(e,s,y,S);return}D.driver.read(D,s,y,S)}readSync(e,s,y,S){const D=this.devices.get(e);if(!D){super.readSync(e,s,y,S);return}D.driver.read(D,s,y,S)}async write(e,s,y){const S=this.devices.get(e);if(!S)return await super.write(e,s,y);S.driver.write(S,s,y)}writeSync(e,s,y){const S=this.devices.get(e);if(!S)return super.writeSync(e,s,y);S.driver.write(S,s,y)}}const t=new Uint8Array,n={name:"null",singleton:!0,init(){return{major:1,minor:3}},read(){return t},write(){}},c={name:"zero",singleton:!0,init(){return{major:1,minor:5}},read(m,e,s,y){e.fill(0,s,y)},write(){}},i={name:"full",singleton:!0,init(){return{major:1,minor:7}},read(m,e,s,y){e.fill(0,s,y)},write(){throw(0,h.withErrno)("ENOSPC")}},d={name:"random",singleton:!0,init(){return{major:1,minor:8}},read(m,e){for(let s=0;s<e.length;s++)e[s]=Math.floor(Math.random()*256)},write(){}},w={name:"console",singleton:!0,init(m,{output:e=s=>console.log(s)}={}){return{major:5,minor:1,data:{output:e}}},read(){return t},write(m,e,s){const y=(0,v.decodeUTF8)(e);m.data.output(y,s)}},b={null:n,zero:c,full:i,random:d,console:w}}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{InMemory:()=>E,InMemoryStore:()=>l});var h=r(31),f=r(32),v=r(53);class l extends Map{maxSize;label;flags=[];name="tmpfs";constructor(o=h.size_max,p){super(),this.maxSize=o,this.label=p}async sync(){}transaction(){return new v.SyncMapTransaction(this)}get bytes(){let o=this.size*4;for(const p of this.values())o+=p.byteLength;return o}usage(){return{totalSpace:this.maxSize,freeSpace:this.maxSize-this.bytes}}}const E={name:"InMemory",options:{maxSize:{type:"number",required:!1},label:{type:"string",required:!1}},create({maxSize:u,label:o}){const p=new f.StoreFS(new l(u,o));return p.checkRootSync(),p}}}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{COPYFILE_EXCL:()=>g,COPYFILE_FICLONE:()=>E,COPYFILE_FICLONE_FORCE:()=>u,F_OK:()=>h,O_APPEND:()=>w,O_CREAT:()=>n,O_DIRECT:()=>D,O_DIRECTORY:()=>b,O_DSYNC:()=>y,O_EXCL:()=>c,O_NOATIME:()=>m,O_NOCTTY:()=>i,O_NOFOLLOW:()=>e,O_NONBLOCK:()=>R,O_RDONLY:()=>o,O_RDWR:()=>t,O_SYMLINK:()=>S,O_SYNC:()=>s,O_TRUNC:()=>d,O_WRONLY:()=>p,R_OK:()=>f,S_IFBLK:()=>K,S_IFCHR:()=>C,S_IFDIR:()=>V,S_IFIFO:()=>B,S_IFLNK:()=>k,S_IFMT:()=>T,S_IFREG:()=>N,S_IFSOCK:()=>A,S_IRGRP:()=>oe,S_IROTH:()=>ge,S_IRUSR:()=>ue,S_IRWXG:()=>me,S_IRWXO:()=>we,S_IRWXU:()=>Q,S_ISGID:()=>q,S_ISUID:()=>j,S_ISVTX:()=>ae,S_IWGRP:()=>fe,S_IWOTH:()=>ee,S_IWUSR:()=>F,S_IXGRP:()=>le,S_IXOTH:()=>ne,S_IXUSR:()=>ie,UV_FS_O_FILEMAP:()=>ce,W_OK:()=>v,X_OK:()=>l,size_max:()=>de});const h=0,f=4,v=2,l=1,g=1,E=2,u=4,o=0,p=1,t=2,n=64,c=128,i=256,d=512,w=1024,b=65536,m=262144,e=131072,s=1052672,y=4096,S=32768,D=16384,R=2048,T=61440,A=49152,k=40960,N=32768,K=24576,V=16384,C=8192,B=4096,j=2048,q=1024,ae=512,Q=448,ue=256,F=128,ie=64,me=56,oe=32,fe=16,le=8,we=7,ge=4,ee=2,ne=1,ce=0,de=4294967295}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{StoreFS:()=>w});var h=r(10),f=r(24),v=r(33),l=r(12),g=r(43),E=r(44),u=r(49),o=r(47),p=r(45),t=r(46),n=r(31),c=r(50),i=function(b,m,e){if(m!=null){if(typeof m!="object"&&typeof m!="function")throw new TypeError("Object expected.");var s,y;if(e){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");s=m[Symbol.asyncDispose]}if(s===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");s=m[Symbol.dispose],e&&(y=s)}if(typeof s!="function")throw new TypeError("Object not disposable.");y&&(s=function(){try{y.call(this)}catch(S){return Promise.reject(S)}}),b.stack.push({value:m,dispose:s,async:e})}else e&&b.stack.push({async:!0});return m},d=(function(b){return function(m){function e(D){m.error=m.hasError?new b(D,m.error,"An error was suppressed during disposal."):D,m.hasError=!0}var s,y=0;function S(){for(;s=m.stack.pop();)try{if(!s.async&&y===1)return y=0,m.stack.push(s),Promise.resolve().then(S);if(s.dispose){var D=s.dispose.call(s.value);if(s.async)return y|=2,Promise.resolve(D).then(S,function(R){return e(R),S()})}else y|=1}catch(R){e(R)}if(y===1)return m.hasError?Promise.reject(m.error):Promise.resolve();if(m.hasError)throw m.error}return S()}})(typeof SuppressedError=="function"?SuppressedError:function(b,m,e){var s=new Error(e);return s.name="SuppressedError",s.error=b,s.suppressed=m,s});class w extends u.FileSystem{store;_ids=new Map([["/",0]]);_paths=new Map([[0,new Set("/")]]);_path(m){const[e]=this._paths.get(m)??[];return e}_add(m,e){this._paths.has(m)||this._paths.set(m,new Set),this._paths.get(m).add(e),this._ids.set(e,m)}_remove(m){for(const e of this._paths.get(m)??[])this._ids.delete(e);this._paths.delete(m)}_move(m,e){const s=[];for(const[y,S]of this._ids){const D=(0,p.relative)(m,y);if(D.startsWith(".."))continue;let R=(0,p.join)(e,D);R.endsWith("/")&&(R=R.slice(0,-1)),s.push({oldKey:y,newKey:R,ino:S})}for(const{oldKey:y,newKey:S,ino:D}of s){this._ids.delete(y),this._ids.set(S,D);const R=this._paths.get(D);if(!R){(0,f.warn)("Missing paths in table for ino "+D);continue}R.delete(y),R.add(S)}}_initialized=!1;async ready(){this._initialized||(this.attributes.has("no_async_preload")||this.checkRootSync(),await this.checkRoot(),await this._populate(),this._initialized=!0)}constructor(m){super(m.type??1802921587,m.name),this.store=m,m.fs=this,this._uuid=m.uuid??this.uuid,this.label=m.label,(0,f.debug)(this.name+": supports features: "+this.store.flags?.join(", "))}usage(){return this.store.usage?.()||{totalSpace:0,freeSpace:0}}async loadIndex(m){const e={stack:[],error:void 0,hasError:!1};try{const s=i(e,this.transaction(),!0),y=m.directories();for(const[S,D]of m)this._add(D.ino,S),await s.set(D.ino,D),y.has(S)&&await s.set(D.data,(0,t.encodeDirListing)(y.get(S)));await s.commit()}catch(s){e.error=s,e.hasError=!0}finally{const s=d(e);s&&await s}}loadIndexSync(m){const e={stack:[],error:void 0,hasError:!1};try{const s=i(e,this.transaction(),!1),y=m.directories();for(const[S,D]of m)this._add(D.ino,S),s.setSync(D.ino,D),y.has(S)&&s.setSync(D.data,(0,t.encodeDirListing)(y.get(S)));s.commitSync()}catch(s){e.error=s,e.hasError=!0}finally{d(e)}}async createIndex(){const m={stack:[],error:void 0,hasError:!1};try{const e=new E.Index,s=i(m,this.transaction(),!0),y=[["/",0]],S=(0,l.canary)((0,h.withErrno)("EDEADLK"));for(;y.length;){const[D,R]=y.shift(),T=new o.Inode(await s.get(R));if(e.set(D,T),T.mode&n.S_IFDIR){const A=(0,t.decodeDirListing)(await s.get(T.data)??(0,l._throw)((0,h.withErrno)("ENODATA")));for(const[k,N]of Object.entries(A))y.push([(0,p.join)(D,k),N])}}return S(),e}catch(e){m.error=e,m.hasError=!0}finally{const e=d(m);e&&await e}}createIndexSync(){const m={stack:[],error:void 0,hasError:!1};try{const e=new E.Index,s=i(m,this.transaction(),!1),y=[["/",0]],S=(0,l.canary)((0,h.withErrno)("EDEADLK"));for(;y.length;){const[D,R]=y.shift(),T=new o.Inode(s.getSync(R));if(e.set(D,T),T.mode&n.S_IFDIR){const A=(0,t.decodeDirListing)(s.getSync(T.data)??(0,l._throw)((0,h.withErrno)("ENODATA")));for(const[k,N]of Object.entries(A))y.push([(0,p.join)(D,k),N])}}return S(),e}catch(e){m.error=e,m.hasError=!0}finally{d(m)}}async rename(m,e){const s={stack:[],error:void 0,hasError:!1};try{const y=i(s,this.transaction(),!0),S=(0,p.parse)(m),D=(0,p.parse)(e),R=await this.findInode(y,S.dir),T=(0,t.decodeDirListing)(await y.get(R.data)??(0,l._throw)((0,h.withErrno)("ENODATA")));if(!T[S.base])throw(0,h.withErrno)("ENOENT");const A=T[S.base];if(A!=this._ids.get(m)&&(0,f.err)(`Ino mismatch while renaming ${m} to ${e}`),delete T[S.base],(D.dir+"/").startsWith(m+"/"))throw(0,h.withErrno)("EBUSY");const k=D.dir==S.dir,N=k?R:await this.findInode(y,D.dir),K=k?T:(0,t.decodeDirListing)(await y.get(N.data)??(0,l._throw)((0,h.withErrno)("ENODATA")));if(K[D.base]){const V=new o.Inode(await y.get(K[D.base])??(0,l._throw)((0,h.withErrno)("ENOENT")));if(!(0,o.isFile)(V))throw(0,h.withErrno)("EISDIR");await y.remove(V.data),await y.remove(K[D.base])}K[D.base]=A,await y.set(R.data,(0,t.encodeDirListing)(T)),await y.set(N.data,(0,t.encodeDirListing)(K)),await y.commit(),this._move(m,e)}catch(y){s.error=y,s.hasError=!0}finally{const y=d(s);y&&await y}}renameSync(m,e){const s={stack:[],error:void 0,hasError:!1};try{const y=i(s,this.transaction(),!1),S=(0,p.parse)(m),D=(0,p.parse)(e),R=this.findInodeSync(y,S.dir),T=(0,t.decodeDirListing)(y.getSync(R.data)??(0,l._throw)((0,h.withErrno)("ENODATA")));if(!T[S.base])throw(0,h.withErrno)("ENOENT");const A=T[S.base];if(A!=this._ids.get(m)&&(0,f.err)(`Ino mismatch while renaming ${m} to ${e}`),delete T[S.base],(D.dir+"/").startsWith(m+"/"))throw(0,h.withErrno)("EBUSY");const k=D.dir===S.dir,N=k?R:this.findInodeSync(y,D.dir),K=k?T:(0,t.decodeDirListing)(y.getSync(N.data)??(0,l._throw)((0,h.withErrno)("ENODATA")));if(K[D.base]){const V=new o.Inode(y.getSync(K[D.base])??(0,l._throw)((0,h.withErrno)("ENOENT")));if(!(0,o.isFile)(V))throw(0,h.withErrno)("EISDIR");y.removeSync(V.data),y.removeSync(K[D.base])}K[D.base]=A,y.setSync(R.data,(0,t.encodeDirListing)(T)),y.setSync(N.data,(0,t.encodeDirListing)(K)),y.commitSync(),this._move(m,e)}catch(y){s.error=y,s.hasError=!0}finally{d(s)}}async stat(m){const e={stack:[],error:void 0,hasError:!1};try{const s=i(e,this.transaction(),!0);return await this.findInode(s,m)}catch(s){e.error=s,e.hasError=!0}finally{const s=d(e);s&&await s}}statSync(m){const e={stack:[],error:void 0,hasError:!1};try{const s=i(e,this.transaction(),!1);return this.findInodeSync(s,m)}catch(s){e.error=s,e.hasError=!0}finally{d(e)}}async touch(m,e){const s={stack:[],error:void 0,hasError:!1};try{const y=i(s,this.transaction(),!0),S=await this.findInode(y,m);S.update(e)&&(this._add(S.ino,m),y.setSync(S.ino,S)),await y.commit()}catch(y){s.error=y,s.hasError=!0}finally{const y=d(s);y&&await y}}touchSync(m,e){const s={stack:[],error:void 0,hasError:!1};try{const y=i(s,this.transaction(),!1),S=this.findInodeSync(y,m);S.update(e)&&(this._add(S.ino,m),y.setSync(S.ino,S)),y.commitSync()}catch(y){s.error=y,s.hasError=!0}finally{d(s)}}async createFile(m,e){return e.mode|=n.S_IFREG,await this.commitNew(m,e,new Uint8Array)}createFileSync(m,e){return e.mode|=n.S_IFREG,this.commitNewSync(m,e,new Uint8Array)}async unlink(m){return this.remove(m,!1)}unlinkSync(m){this.removeSync(m,!1)}async rmdir(m){if((await this.readdir(m)).length)throw(0,h.withErrno)("ENOTEMPTY");await this.remove(m,!0)}rmdirSync(m){if(this.readdirSync(m).length)throw(0,h.withErrno)("ENOTEMPTY");this.removeSync(m,!0)}async mkdir(m,e){return e.mode|=n.S_IFDIR,await this.commitNew(m,e,(0,l.encodeUTF8)("{}"))}mkdirSync(m,e){return e.mode|=n.S_IFDIR,this.commitNewSync(m,e,(0,l.encodeUTF8)("{}"))}async readdir(m){const e={stack:[],error:void 0,hasError:!1};try{const s=i(e,this.transaction(),!0),y=await this.findInode(s,m);return Object.keys((0,t.decodeDirListing)(await s.get(y.data)??(0,l._throw)((0,h.withErrno)("ENOENT"))))}catch(s){e.error=s,e.hasError=!0}finally{const s=d(e);s&&await s}}readdirSync(m){const e={stack:[],error:void 0,hasError:!1};try{const s=i(e,this.transaction(),!1),y=this.findInodeSync(s,m);return Object.keys((0,t.decodeDirListing)(s.getSync(y.data)??(0,l._throw)((0,h.withErrno)("ENOENT"))))}catch(s){e.error=s,e.hasError=!0}finally{d(e)}}async sync(){}syncSync(){}async link(m,e){const s={stack:[],error:void 0,hasError:!1};try{const y=i(s,this.transaction(),!0),S=(0,p.dirname)(e),D=await this.findInode(y,S),R=(0,t.decodeDirListing)(await y.get(D.data)??(0,l._throw)((0,h.withErrno)("ENOENT"))),T=await this.findInode(y,m);T.nlink++,R[(0,p.basename)(e)]=T.ino,this._add(T.ino,e),await y.set(T.ino,T),await y.set(D.data,(0,t.encodeDirListing)(R)),await y.commit()}catch(y){s.error=y,s.hasError=!0}finally{const y=d(s);y&&await y}}linkSync(m,e){const s={stack:[],error:void 0,hasError:!1};try{const y=i(s,this.transaction(),!1),S=(0,p.dirname)(e),D=this.findInodeSync(y,S),R=(0,t.decodeDirListing)(y.getSync(D.data)??(0,l._throw)((0,h.withErrno)("ENOENT"))),T=this.findInodeSync(y,m);T.nlink++,R[(0,p.basename)(e)]=T.ino,this._add(T.ino,e),y.setSync(T.ino,T),y.setSync(D.data,(0,t.encodeDirListing)(R)),y.commitSync()}catch(y){s.error=y,s.hasError=!0}finally{d(s)}}async read(m,e,s,y){const S={stack:[],error:void 0,hasError:!1};try{const D=i(S,this.transaction(),!0),R=await this.findInode(D,m);if(R.size==0)return;const T=await D.get(R.data,s,y)??(0,l._throw)((0,h.withErrno)("ENODATA")),A=D.flag("partial")?T:T.subarray(s,y);A.byteLength>e.byteLength&&(0,f.err)(`Trying to place ${A.byteLength} bytes into a ${e.byteLength} byte buffer on read`),e.set(A)}catch(D){S.error=D,S.hasError=!0}finally{const D=d(S);D&&await D}}readSync(m,e,s,y){const S={stack:[],error:void 0,hasError:!1};try{const D=i(S,this.transaction(),!1),R=this.findInodeSync(D,m);if(R.size==0)return;const T=D.getSync(R.data,s,y)??(0,l._throw)((0,h.withErrno)("ENODATA")),A=D.flag("partial")?T:T.subarray(s,y);A.byteLength>e.byteLength&&(0,f.err)(`Trying to place ${A.byteLength} bytes into a ${e.byteLength} byte buffer on read`),e.set(A)}catch(D){S.error=D,S.hasError=!0}finally{d(S)}}async write(m,e,s){const y={stack:[],error:void 0,hasError:!1};try{const S=i(y,this.transaction(),!0),D=await this.findInode(S,m);let R=e;S.flag("partial")||(R=(0,g.extendBuffer)(await S.get(D.data)??new Uint8Array,s+e.byteLength),R.set(e,s),s=0),await S.set(D.data,R,s),this._add(D.ino,m),await S.commit()}catch(S){y.error=S,y.hasError=!0}finally{const S=d(y);S&&await S}}writeSync(m,e,s){const y={stack:[],error:void 0,hasError:!1};try{const S=i(y,this.transaction(),!1),D=this.findInodeSync(S,m);let R=e;S.flag("partial")||(R=(0,g.extendBuffer)(S.getSync(D.data)??new Uint8Array,s+e.byteLength),R.set(e,s),s=0),S.setSync(D.data,R,s),this._add(D.ino,m),S.commitSync()}catch(S){y.error=S,y.hasError=!0}finally{d(y)}}transaction(){return new c.WrappedTransaction(this.store.transaction(),this)}async checkRoot(){const m={stack:[],error:void 0,hasError:!1};try{const e=i(m,this.transaction(),!0);if(await e.get(o.rootIno))return;const s=new o.Inode({ino:o.rootIno,data:1,mode:511|n.S_IFDIR});await e.set(s.data,(0,l.encodeUTF8)("{}")),this._add(o.rootIno,"/"),await e.set(o.rootIno,s),await e.commit()}catch(e){m.error=e,m.hasError=!0}finally{const e=d(m);e&&await e}}checkRootSync(){const m={stack:[],error:void 0,hasError:!1};try{const e=i(m,this.transaction(),!1);if(e.getSync(o.rootIno))return;const s=new o.Inode({ino:o.rootIno,data:1,mode:511|n.S_IFDIR});e.setSync(s.data,(0,l.encodeUTF8)("{}")),this._add(o.rootIno,"/"),e.setSync(o.rootIno,s),e.commitSync()}catch(e){m.error=e,m.hasError=!0}finally{d(m)}}async _populate(){const m={stack:[],error:void 0,hasError:!1};try{if(this._initialized){(0,f.warn)("Attempted to populate tables after initialization");return}(0,f.debug)("Populating tables with existing store metadata");const e=i(m,this.transaction(),!0),s=await e.get(o.rootIno);if(!s){(0,f.notice)("Store does not have a root inode");const R=new o.Inode({ino:o.rootIno,data:1,mode:511|n.S_IFDIR});await e.set(R.data,(0,l.encodeUTF8)("{}")),this._add(o.rootIno,"/"),await e.set(o.rootIno,R),await e.commit();return}if(s.length<(0,v.sizeof)(o.Inode)){(0,f.crit)("Store contains an invalid root inode. Refusing to populate tables");return}const y=new Set;let S=0;const D=[["/",o.rootIno]];for(;D.length>0;){S++;const[R,T]=D.shift();this._add(T,R);const A=await e.get(T);if(!A){(0,f.warn)("Store is missing data for inode: "+T);continue}if(A.length<(0,v.sizeof)(o.Inode)){(0,f.warn)(`Invalid inode size for ino ${T}: ${A.length}`);continue}const k=new o.Inode(A);if((k.mode&n.S_IFDIR)!=n.S_IFDIR||y.has(T))continue;y.add(T);const N=await e.get(k.data);if(!N){(0,f.warn)("Store is missing directory data: "+k.data);continue}const K=(0,t.decodeDirListing)(N);for(const[V,C]of Object.entries(K))D.push([(0,p.join)(R,V),C])}(0,f.debug)(`Added ${S} existing inode(s) from store`)}catch(e){m.error=e,m.hasError=!0}finally{const e=d(m);e&&await e}}async _findInode(m,e,s=new Set){if(s.has(e))throw(0,f.crit)((0,h.withErrno)("EIO","Infinite loop detected while finding inode"));if(s.add(e),e=="/")return new o.Inode(await m.get(o.rootIno)??(0,l._throw)((0,h.withErrno)("ENODATA")));const{dir:y,base:S}=(0,p.parse)(e),D=await this._findInode(m,y,s),R=(0,t.decodeDirListing)(await m.get(D.data)??(0,l._throw)((0,h.withErrno)("ENODATA")));if(!(S in R))throw(0,h.withErrno)("ENOENT");return new o.Inode(await m.get(R[S])??(0,l._throw)((0,h.withErrno)("ENODATA")))}_findInodeSync(m,e,s=new Set){if(s.has(e))throw(0,f.crit)((0,h.withErrno)("EIO","Infinite loop detected while finding inode"));if(s.add(e),e=="/")return new o.Inode(m.getSync(o.rootIno)??(0,l._throw)((0,h.withErrno)("ENOENT")));const{dir:y,base:S}=(0,p.parse)(e),D=this._findInodeSync(m,y,s),R=(0,t.decodeDirListing)(m.getSync(D.data)??(0,l._throw)((0,h.withErrno)("ENODATA")));if(!(S in R))throw(0,h.withErrno)("ENOENT");return new o.Inode(m.getSync(R[S])??(0,l._throw)((0,h.withErrno)("ENODATA")))}async findInode(m,e){if(this.attributes.has("no_id_tables"))return await this._findInode(m,e);const s=this._ids.get(e);if(s===void 0)throw(0,h.withErrno)("ENOENT");return new o.Inode(await m.get(s)??(0,l._throw)((0,h.withErrno)("ENOENT")))}findInodeSync(m,e){if(this.attributes.has("no_id_tables"))return this._findInodeSync(m,e);const s=this._ids.get(e);if(s===void 0)throw(0,h.withErrno)("ENOENT");return new o.Inode(m.getSync(s)??(0,l._throw)((0,h.withErrno)("ENOENT")))}_lastID;allocNew(m){this._lastID??=Math.max(...this._paths.keys()),this._lastID+=2;const e=this._lastID;if(e>n.size_max)throw(0,f.err)((0,h.withErrno)("ENOSPC","No IDs available"));return this._add(e,m),e}async commitNew(m,e,s){const y={stack:[],error:void 0,hasError:!1};try{if(m=="/")throw(0,h.withErrno)("EEXIST");const S=i(y,this.transaction(),!0),{dir:D,base:R}=(0,p.parse)(m),T=await this.findInode(S,D),A=(0,t.decodeDirListing)(await S.get(T.data)??(0,l._throw)((0,h.withErrno)("ENOENT")));if(A[R])throw(0,h.withErrno)("EEXIST");const k=this.allocNew(m),N=new o.Inode({...e,ino:k,data:k+1,size:s.byteLength,nlink:1});return await S.set(N.ino,N),await S.set(N.data,s),A[R]=N.ino,await S.set(T.data,(0,t.encodeDirListing)(A)),await S.commit(),N}catch(S){y.error=S,y.hasError=!0}finally{const S=d(y);S&&await S}}commitNewSync(m,e,s){const y={stack:[],error:void 0,hasError:!1};try{if(m=="/")throw(0,h.withErrno)("EEXIST");const S=i(y,this.transaction(),!1),{dir:D,base:R}=(0,p.parse)(m),T=this.findInodeSync(S,D),A=(0,t.decodeDirListing)(S.getSync(T.data)??(0,l._throw)((0,h.withErrno)("ENOENT")));if(A[R])throw(0,h.withErrno)("EEXIST");const k=this.allocNew(m),N=new o.Inode({...e,ino:k,data:k+1,size:s.byteLength,nlink:1});return S.setSync(N.ino,N),S.setSync(N.data,s),A[R]=N.ino,S.setSync(T.data,(0,t.encodeDirListing)(A)),S.commitSync(),N}catch(S){y.error=S,y.hasError=!0}finally{d(y)}}async remove(m,e){const s={stack:[],error:void 0,hasError:!1};try{const y=i(s,this.transaction(),!0),{dir:S,base:D}=(0,p.parse)(m),R=await this.findInode(y,S),T=(0,t.decodeDirListing)(await y.get(R.data)??(0,l._throw)((0,h.withErrno)("ENOENT")));if(!T[D])throw(0,h.withErrno)("ENOENT");const A=T[D],k=new o.Inode(await y.get(A)??(0,l._throw)((0,h.withErrno)("ENOENT")));if(delete T[D],!e&&(0,o.isDirectory)(k))throw(0,h.withErrno)("EISDIR");await y.set(R.data,(0,t.encodeDirListing)(T)),k.nlink>1?(k.update({nlink:k.nlink-1}),await y.set(k.ino,k)):(await y.remove(k.data),await y.remove(A),this._remove(A)),await y.commit()}catch(y){s.error=y,s.hasError=!0}finally{const y=d(s);y&&await y}}removeSync(m,e){const s={stack:[],error:void 0,hasError:!1};try{const y=i(s,this.transaction(),!1),{dir:S,base:D}=(0,p.parse)(m),R=this.findInodeSync(y,S),T=(0,t.decodeDirListing)(y.getSync(R.data)??(0,l._throw)((0,h.withErrno)("ENOENT"))),A=T[D];if(!A)throw(0,h.withErrno)("ENOENT");const k=new o.Inode(y.getSync(A)??(0,l._throw)((0,h.withErrno)("ENOENT")));if(delete T[D],!e&&(0,o.isDirectory)(k))throw(0,h.withErrno)("EISDIR");y.setSync(R.data,(0,t.encodeDirListing)(T)),k.nlink>1?(k.update({nlink:k.nlink-1}),y.setSync(k.ino,k)):(y.removeSync(k.data),y.removeSync(A),this._remove(A)),y.commitSync()}catch(y){s.error=y,s.hasError=!0}finally{d(s)}}}}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{ArrayType:()=>h.ArrayType,FieldBuilder:()=>l.FieldBuilder,MemoryError:()=>g.MemoryError,StructArray:()=>h.StructArray,Void:()=>o.Void,align:()=>f.align,array:()=>l.array,assertType:()=>o.assertType,decorators:()=>v,isStructConstructor:()=>u.isStructConstructor,isType:()=>o.isType,offsetof:()=>g.offsetof,packed:()=>f.packed,parseFieldConfig:()=>l.parseFieldConfig,primitive:()=>E,registerType:()=>o.registerType,resolveType:()=>o.resolveType,sizeof:()=>g.sizeof,struct:()=>u.struct,types:()=>u.types,union:()=>u.union});var h=r(34),f=r(35),v=r(36),l=r(38),g=r(41),E=r(40),u=r(42),o=r(39)}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{ArrayType:()=>v,StructArray:()=>f});var h=r(10);function f(l){class g extends DataView{length;type=l;*[Symbol.iterator](){for(let u=0;u<this.length;u++)yield this[u]}constructor(u,o,p){const t=typeof u=="object"?u:new ArrayBuffer((u??0)*l.size);return super(t,o,p),this.length=typeof u=="number"?u:Math.floor(this.byteLength/l.size),new Proxy(this,{get(n,c){if(c in n)return n[c];const i=parseInt(c.toString());if(!Number.isSafeInteger(i))throw(0,h.withErrno)("EINVAL","Invalid index: "+c.toString());return l.get(n.buffer,n.byteOffset+i*l.size)},set(n,c,i){const d=parseInt(c.toString());if(!Number.isSafeInteger(d))throw(0,h.withErrno)("EINVAL","Invalid index: "+c.toString());return l.set(n.buffer,n.byteOffset+d*l.size,i),!0}})}}for(const E of Object.getOwnPropertyNames(DataView.prototype))!E.startsWith("get")&&!E.startsWith("set")||Object.defineProperty(g.prototype,E,{enumerable:!1,configurable:!1,writable:!1,value:void 0});return g}class v{type;length;name;size;__arrayType;constructor(g,E){this.type=g,this.length=E,this.name=`${g.name}[${E}]`,this.size=g.size*E,this.array=f(this),this.__arrayType=g.array?g.array:f(g)}get=(g,E)=>new this.__arrayType(g,E,this.size);set=(g,E,u)=>{for(let o=0;o<this.length;o++)this.type.set(g,E+o*this.type.size,u[o])};array}}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{align:()=>f,packed:()=>h});const h={isPacked:!0};function f(v){return{alignment:v}}}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{$from:()=>i,field:()=>t,struct:()=>o,types:()=>c,union:()=>p});var h=r(10),f=r(16),v=r(34),l=r(37),g=r(40),E=r(39);Symbol.metadata??=Symbol.for("Symbol.metadata");function u(d){d.metadata??={};const w=d.metadata.structInit??{};return d.metadata.structInit={fields:[...w.fields??[]]},d.metadata.structInit}function o(d,...w){const b=w.reduce((m,e)=>({...m,...e}),{});return typeof this=="object"&&Object.assign(b,this),function(e,s){const y=u(s);let S=1;const D={};let R=0;const T=N=>{R=Math.ceil(R/N)*N};for(const N of y.fields)b.isPacked||T(N.alignment),b.isUnion?R=Math.max(R,N.type.size):(N.offset=R,R+=N.type.size),D[N.name]=N,S=Math.max(S,N.alignment);b.alignment??=S,b.isPacked||T(b.alignment),s.metadata.struct={fields:D,size:R,alignment:b.isPacked?1:b.alignment,isUnion:b.isUnion??!1};class A extends e{constructor(...K){K.length||(K=[new ArrayBuffer(R),0,R]),super(...K);for(const V of Object.values(D))Object.defineProperty(this,V.name,{enumerable:!0,configurable:!0,get(){return(0,l.__fieldGet)(this,V)},set(C){(0,l.__fieldSet)(this,V,C)}})}}const k=N=>({writable:!1,enumerable:!1,configurable:!1,value:N});return Object.defineProperties(A,{name:k(d),size:k(R),alignment:k(b.alignment),isUnion:k(!!b.isUnion),fields:k(D),get:k((N,K)=>new A(N,K)),set:k((N,K,V)=>{const C=new Uint8Array(V.buffer,V.byteOffset,R),B=new Uint8Array(N,K,R);if(!(V.buffer===N&&V.byteOffset===K))for(let j=0;j<R;j++)B[j]=C[j]}),[Symbol.toStringTag]:k(`[struct ${d}]`)}),(0,E.registerType)(A),A}}o.packed=o.bind({isPacked:!0}),o.align=function(d){return o.bind({alignment:d})};function p(d,w={}){return o(d,{...w,isUnion:!0})}function t(d,w={}){return function(m,e){if(e.kind!="accessor")throw(0,h.withErrno)("EINVAL","Field must be an accessor");const s=u(e),y=(0,l.__fieldInit)(e.name,d,w);return s.fields.push(y),{get(){return(0,l.__fieldGet)(this,y)},set(S){(0,l.__fieldSet)(this,y,S)}}}}function n(d){const w=g.types[g.normalize(d)];function b(m,e){return typeof m=="number"?t(new v.ArrayType(w,m),{typeName:d,...e}):t(w,{typeName:d})(m,e&&"name"in e?e:(0,f._throw)((0,h.withErrno)("EINVAL","Invalid decorator context object")))}return b}const c=Object.fromEntries(g.validNames.map(d=>[d,n(d)]));function i(d){return d}i.typed=function(d){return d}}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{__fieldGet:()=>o,__fieldInit:()=>g,__fieldSet:()=>u});var h=r(10),f=r(34),v=r(38),l=r(39);function g(p,t,n={}){if(!p)throw(0,h.withErrno)("EINVAL","Invalid name for struct field");typeof p=="symbol"&&console.warn("Symbol used for struct field name will be coerced to string: "+p.toString());const c=p.toString(),i=Object.assign((0,v.parseFieldConfig)(t),n);if(!(0,l.isType)(i.type))throw(0,h.withErrno)("EINVAL",`Invalid type for struct field "${c}"`);return{name:c,offset:0,type:i.type,countedBy:i.countedBy,alignment:i.align??i.type.size,decl:i.type instanceof f.ArrayType?`${i.typeName??i.type.type.name} ${c}[${i.type.length}]${i.countedBy?` counted_by(${i.countedBy})`:""}`:`${i.typeName??i.type.name} ${c}`,littleEndian:!i.bigEndian}}function E(p){throw p.message!=="offset is outside the bounds of the DataView"?p:(0,h.withErrno)("EFAULT","Segmentation fault")}function u(p,t,n,c){try{typeof n=="string"&&(n=n.charCodeAt(0));const i=p.byteOffset+t.offset+(c??0)*t.type.size;t.type.set(p.buffer,i,n);return}catch(i){E(i)}}function o(p,t){try{return t.type.get(p.buffer,p.byteOffset+t.offset)}catch(n){E(n)}}}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{FieldBuilder:()=>l,array:()=>g,parseFieldConfig:()=>v});var h=r(34),f=r(39);function v(E){return(0,f.isType)(E)?{type:E}:E instanceof l?E.toInit():E}class l{type;init;constructor(u,o){this.type=u,this.init=o;const p=(t=>new l(new h.ArrayType(u,t),o));return Object.setPrototypeOf(p,new.target.prototype),Object.assign(p,{type:u,init:o}),p}align(u){return new l(this.type,{...this.init,align:u})}countedBy(u){return new l(this.type,{...this.init,countedBy:u})}bigEndian(){return new l(this.type,{...this.init,bigEndian:!0})}toInit(){return{type:this.type,...this.init}}$type(){return new l(this.type,this.init)}}function g(E,u=0){return new l(new h.ArrayType(E,u),{})}}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{Void:()=>u,assertType:()=>v,isType:()=>f,registerType:()=>E,resolveType:()=>g});var h=r(34);function f(o){return typeof o!="object"&&typeof o!="function"||o===null||o===void 0?!1:o instanceof h.ArrayType?f(o.type):"name"in o&&"size"in o&&"get"in o&&"set"in o&&typeof o.name=="string"&&typeof o.size=="number"&&typeof o.get=="function"&&typeof o.set=="function"&&l.has(o.name)&&l.get(o.name)?.name===o.name}function v(o){if(!f(o))throw new TypeError(String(o)+" is not a type")}const l=new Map;function g(o){return l.get(o)}function E(o){if(l.has(o.name))throw new ReferenceError(`Type is already registered: ${o.name}`);l.set(o.name,o)}const u={name:"void",size:0,get(){},set(){}}}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{__view:()=>g,checkValid:()=>D,isTypeName:()=>e,isValid:()=>S,normalize:()=>R,rawTypes:()=>s,typeNames:()=>m,types:()=>b,validNames:()=>y});var h=r(10),f=r(20),v=r(39);const l=Symbol("DataView");function g(T){return T[l]??=new DataView(T),T[l]}const E={name:"int8",size:1,array:Int8Array,get:(T,A)=>g(T).getInt8(A),set:(T,A,k)=>g(T).setInt8(A,k)},u={name:"uint8",size:1,array:Uint8Array,get:(T,A)=>g(T).getUint8(A),set:(T,A,k)=>g(T).setUint8(A,k)},b={int8:E,uint8:u,int16:{name:"int16",size:2,array:Int16Array,get:(T,A)=>g(T).getInt16(A,!0),set:(T,A,k)=>g(T).setInt16(A,k,!0)},uint16:{name:"uint16",size:2,array:Uint16Array,get:(T,A)=>g(T).getUint16(A,!0),set:(T,A,k)=>g(T).setUint16(A,k,!0)},int32:{name:"int32",size:4,array:Int32Array,get:(T,A)=>g(T).getInt32(A,!0),set:(T,A,k)=>g(T).setInt32(A,k,!0)},uint32:{name:"uint32",size:4,array:Uint32Array,get:(T,A)=>g(T).getUint32(A,!0),set:(T,A,k)=>g(T).setUint32(A,k,!0)},int64:{name:"int64",size:8,array:BigInt64Array,get:(T,A)=>g(T).getBigInt64(A,!0),set:(T,A,k)=>g(T).setBigInt64(A,k,!0)},uint64:{name:"uint64",size:8,array:BigUint64Array,get:(T,A)=>g(T).getBigUint64(A,!0),set:(T,A,k)=>g(T).setBigUint64(A,k,!0)},float32:{name:"float32",size:4,array:Float32Array,get:(T,A)=>g(T).getFloat32(A,!0),set:(T,A,k)=>g(T).setFloat32(A,k,!0)},float64:{name:"float64",size:8,array:Float64Array,get:(T,A)=>g(T).getFloat64(A,!0),set:(T,A,k)=>g(T).setFloat64(A,k,!0)}},m=Object.keys(b);for(const T of Object.values(b))(0,v.registerType)(T);function e(T){return m.includes(T.toString())}const s={...b,...Object.fromEntries(m.map(T=>[(0,f.capitalize)(T),b[T]])),char:u},y=Object.keys(s);function S(T){return y.includes(T.toString())}function D(T){if(!S(T))throw(0,h.withErrno)("EINVAL","Not a valid primitive type: "+T)}function R(T){return T=="char"?"uint8":T.toLowerCase()}}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{MemoryError:()=>u,offsetof:()=>E,sizeof:()=>g});var h=r(10),f=r(40),v=r(42),l=r(39);function g(o){if((0,l.isType)(o))return o.size;if(o==null)return 0;if(typeof o=="object"&&(0,l.isType)(o.constructor))return o.constructor.size;if(Array.isArray(o)){let p=0;for(let t=0;t<o.length;t++)p+=g(o[t]);return p}if(typeof o=="string")return f.checkValid(o),f.types[f.normalize(o)].size;throw new TypeError(`Unable to resolve size of \`${o.toString()}\``)}function E(o,p){let t;if((0,v.isStructConstructor)(o))t=o;else if((0,v.isStructConstructor)(o.constructor))t=o.constructor;else throw(0,h.withErrno)("EINVAL","Type is not a struct or struct constructor");const{fields:n}=t;if(!(p in n))throw(0,h.withErrno)("EINVAL","Struct does not have field: "+p);return n[p].offset}class u extends h.Exception{address;constructor(p,t){super(h.Errno[p]),this.address=t}}}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{isStructConstructor:()=>g,struct:()=>E,types:()=>o,union:()=>u});var h=r(37),f=r(38),v=r(40),l=r(39);function g(p){return typeof p=="function"&&"prototype"in p&&"fields"in p&&typeof p.fields=="object"&&(0,l.isType)(p)}function E(p,t,...n){const c=n.reduce((y,S)=>({...y,...S}),{});typeof this=="object"&&Object.assign(c,this);let i=1,d=0;const w=y=>{d=Math.ceil(d/y)*y},b=Object.create(null);for(const[y,S]of Object.entries(t)){if(typeof y=="number")throw new TypeError("Field names can not be numbers");const D=(0,h.__fieldInit)(y,S);c.isPacked||w(D.alignment),c.isUnion?d=Math.max(d,D.type.size):(D.offset=d,d+=D.type.size),b[D.name]=D,i=Math.max(i,D.alignment)}c.alignment??=i,c.isPacked||w(c.alignment);class m extends DataView{static name=p;constructor(S=new ArrayBuffer(d),D,R){super(S,D,R??d);for(const T of Object.values(b))Object.defineProperty(this,T.name,{enumerable:!0,configurable:!0,get(){return(0,h.__fieldGet)(this,T)},set(A){(0,h.__fieldSet)(this,T,A)}})}}for(const y of Object.getOwnPropertyNames(DataView.prototype))!y.startsWith("get")&&!y.startsWith("set")||Object.defineProperty(m.prototype,y,{enumerable:!1,configurable:!1,writable:!1,value:void 0});const e=m,s=y=>({writable:!1,enumerable:!1,configurable:!1,value:y});return Object.defineProperties(e,{size:s(d),alignment:s(c.alignment),isUnion:s(!!c.isUnion),fields:s(b),get:s((y,S)=>new e(y,S)),set:s((y,S,D)=>{const R=new Uint8Array(D.buffer,D.byteOffset,d),T=new Uint8Array(y,S,d);if(!(D.buffer===y&&D.byteOffset===S))for(let A=0;A<d;A++)T[A]=R[A]}),[Symbol.toStringTag]:s(`[struct ${p}]`)}),(0,l.registerType)(e),e}E.extend=function(p,t,n,...c){return E(t,{...p.fields,...n},...c)},E.packed=E.bind({isPacked:!0}),E.align=function(p){return E.bind({alignment:p})};function u(p,t,...n){return E(p,t,...n,{isUnion:!0})}const o=Object.fromEntries(Object.entries(v.rawTypes).map(([p,t])=>[p,new f.FieldBuilder(t,{typeName:p})]))}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{BufferView:()=>l,BufferViewArray:()=>g,extendBuffer:()=>h,initView:()=>v,toUint8Array:()=>f});function h(E,u){if(E.byteLength>=u)return E;if(ArrayBuffer.isView(E)){const p=h(E.buffer,u);return new E.constructor(p,E.byteOffset,u)}const o=typeof SharedArrayBuffer<"u"&&E instanceof SharedArrayBuffer;if(E.maxByteLength>u)return o?E.grow(u):E.resize(u),E;if(o){const p=new SharedArrayBuffer(u);return new Uint8Array(p).set(new Uint8Array(E)),p}try{return E.transfer(u)}catch{const p=new ArrayBuffer(u);return new Uint8Array(p).set(new Uint8Array(E)),p}}function f(E){return E instanceof Uint8Array?E:ArrayBuffer.isView(E)?new Uint8Array(E.buffer,E.byteOffset,E.byteLength):new Uint8Array(E)}function v(E,u,o,p){if(typeof u=="number"){E.buffer=new ArrayBuffer(u),E.byteOffset=0,E.byteLength=u;return}if(!u||u instanceof ArrayBuffer||globalThis.SharedArrayBuffer&&u instanceof SharedArrayBuffer){const n=p??E.constructor?.size??u?.byteLength??0;E.buffer=u??new ArrayBuffer(n),E.byteOffset=o??0,E.byteLength=n;return}if(ArrayBuffer.isView(u)){E.buffer=u.buffer,E.byteOffset=u.byteOffset,E.byteLength=u.byteLength;return}const t=new Uint8Array(u.length);E.buffer=t.buffer,E.byteOffset=0,E.byteLength=t.length;for(let n=0;n<t.length;n++)t[n]=u[n]}class l extends DataView{constructor(u,o,p){const{buffer:t,byteOffset:n,byteLength:c}=new Uint8Array(u,o,p);super(t,n,c)}}for(const E of Object.getOwnPropertyNames(DataView.prototype))!E.startsWith("get")&&!E.startsWith("set")||Object.defineProperty(l.prototype,E,{value:()=>{throw new ReferenceError("Do not use DataView methods on a BufferView.")},writable:!1,enumerable:!1,configurable:!1});function g(E,u){return class extends Array{BYTES_PER_ELEMENT=u;constructor(p,t,n){const{buffer:c,byteOffset:i,byteLength:d}=new Uint8Array(p,t,n),w=(d??u)/u;if(!Number.isSafeInteger(w))throw new Error("Invalid array length: "+w);super(w),Object.assign(this,{buffer:c,byteOffset:i,byteLength:d});for(let b=0;b<w;b++)this[b]=new E(this.buffer,this.byteOffset+b*u,u)}}}}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{Index:()=>o,version:()=>u});var h=r(10),f=r(33),v=r(12),l=r(45),g=r(31),E=r(47);const u=1;class o extends Map{maxSize=g.size_max;toJSON(){return{version:u,maxSize:this.maxSize,entries:Object.fromEntries([...this].map(([t,n])=>[t,n.toJSON()]))}}toString(){return JSON.stringify(this.toJSON())}get byteSize(){let t=this.size*(0,f.sizeof)(E.Inode);for(const n of this.values())t+=n.size;return t}usage(){return{totalSpace:this.maxSize,freeSpace:this.maxSize-this.byteSize}}pathOf(t){for(const[n,c]of this)if(c.ino==t||c.data==t)return n}getByID(t){return this.entryByID(t)?.inode}entryByID(t){for(const[n,c]of this)if(c.ino==t||c.data==t)return{path:n,inode:c}}directoryEntries(t){const n=this.get(t);if(!n)throw(0,h.withErrno)("ENOENT");if((n.mode&g.S_IFMT)!=g.S_IFDIR)throw(0,h.withErrno)("ENOTDIR");const c={};for(const i of this.keys())(0,l.dirname)(i)==t&&i!=t&&(c[(0,l.basename)(i)]=this.get(i).ino);return c}_alloc(){return Math.max(...[...this.values()].flatMap(t=>[t.ino,t.data]))+1}directories(){const t=new Map;for(const[n,c]of this){if((c.mode&g.S_IFMT)!=g.S_IFDIR)continue;const i={};for(const d of this.keys())(0,l.dirname)(d)==n&&d!=n&&(i[(0,l.basename)(d)]=this.get(d).ino);t.set(n,i)}return t}fromJSON(t){if(t.version!=u)throw(0,h.withErrno)("EINVAL","Index version mismatch");this.clear();for(const[n,c]of Object.entries(t.entries))c.data??=(0,v.randomInt)(1,g.size_max),n=="/"&&(c.ino=0),this.set(n,new E.Inode(c));return this}static parse(t){if(!(0,v.isJSON)(t))throw(0,h.withErrno)("EINVAL","Invalid JSON");const n=JSON.parse(t),c=new o;return c.fromJSON(n),c}}}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{basename:()=>i,dirname:()=>c,extname:()=>d,format:()=>w,formatExt:()=>E,isAbsolute:()=>p,join:()=>t,matchesGlob:()=>m,normalize:()=>o,normalizeString:()=>g,parse:()=>b,relative:()=>n,resolve:()=>u,sep:()=>v});var h=r(27),f=r(46);const v="/";function l(e,s){if(typeof e!="object")throw new TypeError(`"${s}" is not an object`)}function g(e,s){let y="",S=0,D=-1,R=0,T="\0";for(let A=0;A<=e.length;++A){if(A<e.length)T=e[A];else{if(T=="/")break;T="/"}if(T=="/"){if(!(D===A-1||R===1))if(R===2){if(y.length<2||S!==2||y.at(-1)!=="."||y.at(-2)!=="."){if(y.length>2){const k=y.lastIndexOf("/");k===-1?(y="",S=0):(y=y.slice(0,k),S=y.length-1-y.lastIndexOf("/")),D=A,R=0;continue}else if(y.length!==0){y="",S=0,D=A,R=0;continue}}s&&(y+=y.length>0?"/..":"..",S=2)}else y.length>0?y+="/"+e.slice(D+1,A):y=e.slice(D+1,A),S=A-D-1;D=A,R=0}else T==="."&&R!==-1?++R:R=-1}return y}function E(e){return e?`${e[0]==="."?"":"."}${e}`:""}function u(...e){let s="";for(const S of[...e.reverse(),(0,h.contextOf)(this).pwd])if(S?.length&&(s=`${S}/${s}`,S.startsWith("/")))break;const y=s.startsWith("/");return s=g(s,!y),y?`/${s}`:s.length?s:"/"}function o(e){if(!e.length)return".";const s=e[0]==="/",y=e.at(-1)==="/";return e=g(e,!s),e.length?(y&&(e+="/"),s?`/${e}`:e):s?"/":y?"./":"."}function p(e){return e.startsWith("/")}function t(...e){if(!e.length)return".";const s=e.filter(y=>y).join("/");return s?.length?o(s):"."}function n(e,s){if(e===s||(e=u.call(this,e),s=u.call(this,s),e===s))return"";const y=1,S=e.length,D=S-y,R=1,T=s.length-R,A=D<T?D:T;let k=-1,N=0;for(;N<A;N++){const V=e[y+N];if(V!==s[R+N])break;V==="/"&&(k=N)}if(N===A)if(T>A){if(s[R+N]==="/")return s.slice(R+N+1);if(N===0)return s.slice(R+N)}else D>A&&(e[y+N]==="/"?k=N:N===0&&(k=0));let K="";for(N=y+k+1;N<=S;++N)(N===S||e[N]==="/")&&(K+=K.length===0?"..":"/..");return`${K}${s.slice(R+k)}`}function c(e){if(e.length===0)return".";const s=e[0]==="/";let y=-1,S=!0;for(let D=e.length-1;D>=1;--D)if(e[D]==="/"){if(!S){y=D;break}}else S=!1;return y===-1?s?"/":".":s&&y===1?"//":e.slice(0,y)}function i(e,s){let y=0,S=-1,D=!0;if(s!==void 0&&s.length>0&&s.length<=e.length){if(s===e)return"";let R=s.length-1,T=-1;for(let A=e.length-1;A>=0;--A)if(e[A]==="/"){if(!D){y=A+1;break}}else T===-1&&(D=!1,T=A+1),R>=0&&(e[A]===s[R]?--R===-1&&(S=A):(R=-1,S=T));return y===S?S=T:S===-1&&(S=e.length),e.slice(y,S)}for(let R=e.length-1;R>=0;--R)if(e[R]==="/"){if(!D){y=R+1;break}}else S===-1&&(D=!1,S=R+1);return S===-1?"":e.slice(y,S)}function d(e){let s=-1,y=0,S=-1,D=!0,R=0;for(let T=e.length-1;T>=0;--T){if(e[T]==="/"){if(!D){y=T+1;break}continue}S===-1&&(D=!1,S=T+1),e[T]==="."?s===-1?s=T:R!==1&&(R=1):s!==-1&&(R=-1)}return s===-1||S===-1||R===0||R===1&&s===S-1&&s===y+1?"":e.slice(s,S)}function w(e){l(e,"pathObject");const s=e.dir||e.root,y=e.base||`${e.name||""}${E(e.ext)}`;return s?s===e.root?`${s}${y}`:`${s}/${y}`:y}function b(e){const s=e[0]==="/",y={root:s?"/":"",dir:"",base:"",ext:"",name:""};if(e.length===0)return y;const S=s?1:0;let D=-1,R=0,T=-1,A=!0,k=e.length-1,N=0;for(;k>=S;--k){if(e[k]==="/"){if(!A){R=k+1;break}continue}T===-1&&(A=!1,T=k+1),e[k]==="."?D===-1?D=k:N!==1&&(N=1):D!==-1&&(N=-1)}if(T!==-1){const K=R===0&&s?1:R;D===-1||N===0||N===1&&D===T-1&&D===R+1?y.base=y.name=e.slice(K,T):(y.name=e.slice(K,D),y.base=e.slice(K,T),y.ext=e.slice(D,T))}return R>0?y.dir=e.slice(0,R-1):s&&(y.dir="/"),y}function m(e,s){return(0,f.globToRegex)(e).test(s)}}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{_tempDirName:()=>c,decodeDirListing:()=>l,encodeDirListing:()=>g,globToRegex:()=>t,normalizeMode:()=>E,normalizeOptions:()=>p,normalizePath:()=>o,normalizeTime:()=>u,waitOnline:()=>n});var h=r(10),f=r(12),v=r(45);function l(i){return JSON.parse((0,f.decodeUTF8)(i),(d,w)=>d==""?w:typeof w=="string"?BigInt(w).toString(16).slice(0,Math.min(w.length,8)):w)}function g(i){return(0,f.encodeUTF8)(JSON.stringify(i))}function E(i,d){if(typeof i=="number")return i;if(typeof i=="string"){const w=parseInt(i,8);if(!isNaN(w))return w}if(typeof d=="number")return d;throw(0,h.withErrno)("EINVAL","Invalid mode: "+i?.toString())}function u(i){if(i instanceof Date)return i.getTime();try{return Number(i)}catch{throw(0,h.withErrno)("EINVAL","Invalid time.")}}function o(i,d=!1){if(i instanceof URL){if(i.protocol!="file:")throw(0,h.withErrno)("EINVAL","URLs must use the file: protocol");i=i.pathname}if(i=i.toString(),i.startsWith("file://")&&(i=i.slice(7)),i.includes("\0"))throw(0,h.withErrno)("EINVAL","Path can not contain null character");if(i.length==0)throw(0,h.withErrno)("EINVAL","Path can not be empty");return i=i.replaceAll(/[/\\]+/g,"/"),d?i:v.resolve.call(this,i)}function p(i,d="utf8",w,b=0){return typeof i!="object"||i===null?{encoding:typeof i=="string"?i:d??null,flag:w,mode:b}:{encoding:typeof i?.encoding=="string"?i.encoding:d??null,flag:typeof i?.flag=="string"?i.flag:w,mode:E("mode"in i?i?.mode:null,b)}}function t(i){return i=i.replace(/([.?+^$(){}|[\]/])/g,"$1").replace(/\*\*/g,".*").replace(/\*/g,"[^/]*").replace(/\?/g,"."),new RegExp(`^${i}$`)}async function n(i){const d=Promise.withResolvers();setTimeout(()=>d.reject((0,h.withErrno)("ETIMEDOUT")),500),i.on("online",d.resolve),await d.promise}function c(i){return`/tmp/${o(i,!0)}${Date.now()}-${Math.random().toString(36).slice(2)}`}}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{Attributes:()=>w,Inode:()=>S,InodeFlags:()=>e,_chown:()=>C,_inode_fields:()=>b,_inode_version:()=>m,hasAccess:()=>V,isBlockDevice:()=>k,isCharacterDevice:()=>N,isDirectory:()=>R,isFIFO:()=>K,isFile:()=>D,isSocket:()=>A,isSymbolicLink:()=>T,rootIno:()=>c,userModifiableFlags:()=>y,userVisibleFlags:()=>s});var h=r(10),f=r(24),v=r(33),l=r(36),g=r(12),E=r(43),u=r(31),o=r(48),p=r(27),t=function(B,j,q,ae,Q,ue){function F(de){if(de!==void 0&&typeof de!="function")throw new TypeError("Function expected");return de}for(var ie=ae.kind,me=ie==="getter"?"get":ie==="setter"?"set":"value",oe=!j&&B?ae.static?B:B.prototype:null,fe=j||(oe?Object.getOwnPropertyDescriptor(oe,ae.name):{}),le,we=!1,ge=q.length-1;ge>=0;ge--){var ee={};for(var ne in ae)ee[ne]=ne==="access"?{}:ae[ne];for(var ne in ae.access)ee.access[ne]=ae.access[ne];ee.addInitializer=function(de){if(we)throw new TypeError("Cannot add initializers after decoration has completed");ue.push(F(de||null))};var ce=(0,q[ge])(ie==="accessor"?{get:fe.get,set:fe.set}:fe[me],ee);if(ie==="accessor"){if(ce===void 0)continue;if(ce===null||typeof ce!="object")throw new TypeError("Object expected");(le=F(ce.get))&&(fe.get=le),(le=F(ce.set))&&(fe.set=le),(le=F(ce.init))&&Q.unshift(le)}else(le=F(ce))&&(ie==="field"?Q.unshift(le):fe[me]=le)}oe&&Object.defineProperty(oe,ae.name,fe),we=!0},n=function(B,j,q){for(var ae=arguments.length>2,Q=0;Q<j.length;Q++)q=ae?j[Q].call(B,q):j[Q].call(B);return ae?q:void 0};const c=0,i=3968;let d=(()=>{var B,j;let q=[l.struct.packed("Attribute")],ae,Q=[],ue,F=l.$from.typed(Uint8Array),ie,me=[],oe=[],fe,le=[],we=[];var ge=class extends F{static{ue=this}static{const ee=typeof Symbol=="function"&&Symbol.metadata?Object.create(F[Symbol.metadata]??null):void 0;ie=[(B=l.types).uint32.bind(B)],fe=[(j=l.types).uint32.bind(j)],t(this,null,ie,{kind:"accessor",name:"keySize",static:!1,private:!1,access:{has:ne=>"keySize"in ne,get:ne=>ne.keySize,set:(ne,ce)=>{ne.keySize=ce}},metadata:ee},me,oe),t(this,null,fe,{kind:"accessor",name:"valueSize",static:!1,private:!1,access:{has:ne=>"valueSize"in ne,get:ne=>ne.valueSize,set:(ne,ce)=>{ne.valueSize=ce}},metadata:ee},le,we),t(null,ae={value:ue},q,{kind:"class",name:ue.name,metadata:ee},null,Q),ge=ue=ae.value,ee&&Object.defineProperty(ue,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:ee}),n(ue,Q)}#e=n(this,me,void 0);get keySize(){return this.#e}set keySize(ee){this.#e=ee}#t=(n(this,oe),n(this,le,void 0));get valueSize(){return this.#t}set valueSize(ee){this.#t=ee}get name(){return(0,g.decodeUTF8)(this.subarray(8,8+this.keySize))}set name(ee){const ne=(0,g.encodeUTF8)(ee);if(8+ne.length+this.valueSize>i)throw(0,h.withErrno)("EOVERFLOW");this.set(ne,8),this.keySize=ne.length}get value(){return this.subarray(8+this.keySize,this.size)}set value(ee){if(8+this.keySize+ee.length>i)throw(0,h.withErrno)("EOVERFLOW");this.valueSize=ee.length,this.set(ee,8+this.keySize)}get size(){return 8+this.keySize+this.valueSize}constructor(){super(...arguments),n(this,we)}};return ge=ue})(),w=(()=>{var B;let j=[l.struct.packed("Attributes")],q,ae=[],Q,ue=(0,l.$from)(E.BufferView),F,ie=[],me=[];var oe=class extends ue{static{Q=this}static{const fe=typeof Symbol=="function"&&Symbol.metadata?Object.create(ue[Symbol.metadata]??null):void 0;F=[(B=l.types).uint32.bind(B)],t(this,null,F,{kind:"accessor",name:"size",static:!1,private:!1,access:{has:le=>"size"in le,get:le=>le.size,set:(le,we)=>{le.size=we}},metadata:fe},ie,me),t(null,q={value:Q},j,{kind:"class",name:Q.name,metadata:fe},null,ae),oe=Q=q.value,fe&&Object.defineProperty(Q,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:fe}),n(Q,ae)}#e=n(this,ie,void 0);get size(){return this.#e}set size(fe){this.#e=fe}get byteSize(){let fe=this.byteOffset+(0,v.sizeof)(this);for(let le=0;le<this.size;le++){const we=new d(this.buffer,fe);fe+=we.size}return fe}has(fe){let le=this.byteOffset+(0,v.sizeof)(this);for(let we=0;we<this.size;we++){const ge=new d(this.buffer,le);if(ge.name==fe)return!0;le+=ge.size}return!1}get(fe){let le=this.byteOffset+(0,v.sizeof)(this);for(let we=0;we<this.size;we++){const ge=new d(this.buffer,le);if(ge.name==fe)return ge.value;le+=ge.size}}set(fe,le){let we=this.byteOffset+(0,v.sizeof)(this),ge;for(let ce=0;ce<this.size;ce++){const de=new d(this.buffer,we);de.name==fe&&(ge=[we,de.size]),we+=de.size}const ee=new Uint8Array(this.buffer);if(ge){const[ce,de]=ge;we-=de,ee.copyWithin(ce,ce+de,we+de),ee.fill(0,we,we+de),this.size--}const ne=new d(this.buffer,we);ne.name=fe,ne.value=le,this.size++}remove(fe){let le=this.byteOffset+(0,v.sizeof)(this),we;for(let ce=0;ce<this.size;ce++){const de=new d(this.buffer,le);de.name==fe&&(we=[le,de.size]),le+=de.size}if(!we)return!1;const[ge,ee]=we,ne=new Uint8Array(this.buffer);return ne.copyWithin(ge,ge+ee,le),ne.fill(0,le-ee,le),this.size--,!0}copyFrom(fe){const{byteSize:le}=fe;new Uint8Array(this.buffer,this.byteOffset,le).set(new Uint8Array(fe.buffer,fe.byteOffset,le))}*keys(){let fe=this.byteOffset+(0,v.sizeof)(this);for(let le=0;le<this.size;le++){const we=new d(this.buffer,fe);yield we.name,fe+=we.size}}*values(){let fe=this.byteOffset+(0,v.sizeof)(this);for(let le=0;le<this.size;le++){const we=new d(this.buffer,fe);yield we.value,fe+=we.size}}*entries(){let fe=this.byteOffset+(0,v.sizeof)(this);for(let le=0;le<this.size;le++){const we=new d(this.buffer,fe);yield[we.name,we.value],fe+=we.size}}constructor(){super(...arguments),n(this,me)}};return oe=Q})();const b=["ino","data","size","mode","flags","nlink","uid","gid","atimeMs","birthtimeMs","mtimeMs","ctimeMs","version"],m=5;var e;(function(B){B[B.Sync=1]="Sync",B[B.NoAtime=2]="NoAtime",B[B.Append=4]="Append",B[B.Immutable=8]="Immutable",B[B.Dead=16]="Dead",B[B.NoQuota=32]="NoQuota",B[B.Dirsync=64]="Dirsync",B[B.NoCMtime=128]="NoCMtime",B[B.SwapFile=256]="SwapFile",B[B.Private=512]="Private",B[B.IMA=1024]="IMA",B[B.AutoMount=2048]="AutoMount",B[B.NoSec=4096]="NoSec",B[B.DAX=8192]="DAX",B[B.Encrypted=16384]="Encrypted",B[B.CaseFold=32768]="CaseFold",B[B.Verity=65536]="Verity",B[B.KernelFile=131072]="KernelFile"})(e||(e={}));const s=253951,y=229631;let S=(()=>{var B,j,q,ae,Q,ue,F,ie,me,oe,fe,le,we,ge,ee,ne;let ce=[l.struct.packed("Inode")],de,be=[],J,Z=(0,l.$from)(E.BufferView),re,Ee=[],he=[],z,M=[],W=[],$,H=[],Se=[],se,X=[],O=[],a,_=[],I=[],U,G=[],te=[],Oe,Ie=[],Re=[],Te,Ae=[],xe=[],Ue,Ve=[],ze=[],We,$e=[],Ge=[],je,Be=[],x=[],L,ye=[],pe=[],De,Pe=[],Le=[],Qe,Fe=[],Ze=[],tt,qe=[],et=[],He,Ye=[],Xe=[],Ke,ke=[],Ne=[],ot,at=[],ct=[],lt,ft=[],ut=[];var nt=class extends Z{static{J=this}static{const ve=typeof Symbol=="function"&&Symbol.metadata?Object.create(Z[Symbol.metadata]??null):void 0;re=[(B=l.types).uint32.bind(B)],z=[(j=l.types).uint32.bind(j)],$=[(q=l.types).uint32.bind(q)],se=[(ae=l.types).uint16.bind(ae)],a=[(Q=l.types).uint32.bind(Q)],U=[(ue=l.types).uint32.bind(ue)],Oe=[(F=l.types).uint32.bind(F)],Te=[(ie=l.types).float64.bind(ie)],Ue=[(me=l.types).float64.bind(me)],We=[(oe=l.types).float64.bind(oe)],je=[(fe=l.types).float64.bind(fe)],L=[(le=l.types).uint32.bind(le)],De=[(we=l.types).uint32.bind(we)],Qe=[(ge=l.types).uint32.bind(ge)],tt=[(ee=l.types).uint16.bind(ee)],He=[(ne=l.types).uint32.bind(ne)],Ke=[l.types.uint8(48)],ot=[(0,l.field)(w)],lt=[l.types.uint8(i)],t(this,null,re,{kind:"accessor",name:"data",static:!1,private:!1,access:{has:_e=>"data"in _e,get:_e=>_e.data,set:(_e,Me)=>{_e.data=Me}},metadata:ve},Ee,he),t(this,null,z,{kind:"accessor",name:"__data_old",static:!1,private:!1,access:{has:_e=>"__data_old"in _e,get:_e=>_e.__data_old,set:(_e,Me)=>{_e.__data_old=Me}},metadata:ve},M,W),t(this,null,$,{kind:"accessor",name:"size",static:!1,private:!1,access:{has:_e=>"size"in _e,get:_e=>_e.size,set:(_e,Me)=>{_e.size=Me}},metadata:ve},H,Se),t(this,null,se,{kind:"accessor",name:"mode",static:!1,private:!1,access:{has:_e=>"mode"in _e,get:_e=>_e.mode,set:(_e,Me)=>{_e.mode=Me}},metadata:ve},X,O),t(this,null,a,{kind:"accessor",name:"nlink",static:!1,private:!1,access:{has:_e=>"nlink"in _e,get:_e=>_e.nlink,set:(_e,Me)=>{_e.nlink=Me}},metadata:ve},_,I),t(this,null,U,{kind:"accessor",name:"uid",static:!1,private:!1,access:{has:_e=>"uid"in _e,get:_e=>_e.uid,set:(_e,Me)=>{_e.uid=Me}},metadata:ve},G,te),t(this,null,Oe,{kind:"accessor",name:"gid",static:!1,private:!1,access:{has:_e=>"gid"in _e,get:_e=>_e.gid,set:(_e,Me)=>{_e.gid=Me}},metadata:ve},Ie,Re),t(this,null,Te,{kind:"accessor",name:"atimeMs",static:!1,private:!1,access:{has:_e=>"atimeMs"in _e,get:_e=>_e.atimeMs,set:(_e,Me)=>{_e.atimeMs=Me}},metadata:ve},Ae,xe),t(this,null,Ue,{kind:"accessor",name:"birthtimeMs",static:!1,private:!1,access:{has:_e=>"birthtimeMs"in _e,get:_e=>_e.birthtimeMs,set:(_e,Me)=>{_e.birthtimeMs=Me}},metadata:ve},Ve,ze),t(this,null,We,{kind:"accessor",name:"mtimeMs",static:!1,private:!1,access:{has:_e=>"mtimeMs"in _e,get:_e=>_e.mtimeMs,set:(_e,Me)=>{_e.mtimeMs=Me}},metadata:ve},$e,Ge),t(this,null,je,{kind:"accessor",name:"ctimeMs",static:!1,private:!1,access:{has:_e=>"ctimeMs"in _e,get:_e=>_e.ctimeMs,set:(_e,Me)=>{_e.ctimeMs=Me}},metadata:ve},Be,x),t(this,null,L,{kind:"accessor",name:"ino",static:!1,private:!1,access:{has:_e=>"ino"in _e,get:_e=>_e.ino,set:(_e,Me)=>{_e.ino=Me}},metadata:ve},ye,pe),t(this,null,De,{kind:"accessor",name:"__ino_old",static:!1,private:!1,access:{has:_e=>"__ino_old"in _e,get:_e=>_e.__ino_old,set:(_e,Me)=>{_e.__ino_old=Me}},metadata:ve},Pe,Le),t(this,null,Qe,{kind:"accessor",name:"flags",static:!1,private:!1,access:{has:_e=>"flags"in _e,get:_e=>_e.flags,set:(_e,Me)=>{_e.flags=Me}},metadata:ve},Fe,Ze),t(this,null,tt,{kind:"accessor",name:"__after_flags",static:!1,private:!1,access:{has:_e=>"__after_flags"in _e,get:_e=>_e.__after_flags,set:(_e,Me)=>{_e.__after_flags=Me}},metadata:ve},qe,et),t(this,null,He,{kind:"accessor",name:"version",static:!1,private:!1,access:{has:_e=>"version"in _e,get:_e=>_e.version,set:(_e,Me)=>{_e.version=Me}},metadata:ve},Ye,Xe),t(this,null,Ke,{kind:"accessor",name:"__padding",static:!1,private:!1,access:{has:_e=>"__padding"in _e,get:_e=>_e.__padding,set:(_e,Me)=>{_e.__padding=Me}},metadata:ve},ke,Ne),t(this,null,ot,{kind:"accessor",name:"attributes",static:!1,private:!1,access:{has:_e=>"attributes"in _e,get:_e=>_e.attributes,set:(_e,Me)=>{_e.attributes=Me}},metadata:ve},at,ct),t(this,null,lt,{kind:"accessor",name:"__data",static:!1,private:!1,access:{has:_e=>"__data"in _e,get:_e=>_e.__data,set:(_e,Me)=>{_e.__data=Me}},metadata:ve},ft,ut),t(null,de={value:J},ce,{kind:"class",name:J.name,metadata:ve},null,be),nt=J=de.value,ve&&Object.defineProperty(J,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:ve}),n(J,be)}constructor(...ve){let _e={};if(typeof ve[0]=="object"&&ve[0]!==null&&!ArrayBuffer.isView(ve[0])&&(_e=ve[0],ve=[(0,v.sizeof)(nt)]),super(...ve),n(this,ut),this.byteLength<(0,v.sizeof)(nt))throw(0,f.crit)((0,h.withErrno)("EIO",`Buffer is too small to create an inode (${this.byteLength} bytes)`));Object.assign(this,_e),this.atimeMs||=Date.now(),this.mtimeMs||=Date.now(),this.ctimeMs||=Date.now(),this.birthtimeMs||=Date.now(),this.ino&&!this.nlink&&(0,f.warn)(`Inode ${this.ino} has an nlink of 0`)}#e=n(this,Ee,void 0);get data(){return this.#e}set data(ve){this.#e=ve}#t=(n(this,he),n(this,M,void 0));get __data_old(){return this.#t}set __data_old(ve){this.#t=ve}#n=(n(this,W),n(this,H,void 0));get size(){return this.#n}set size(ve){this.#n=ve}#r=(n(this,Se),n(this,X,void 0));get mode(){return this.#r}set mode(ve){this.#r=ve}#i=(n(this,O),n(this,_,void 0));get nlink(){return this.#i}set nlink(ve){this.#i=ve}#s=(n(this,I),n(this,G,void 0));get uid(){return this.#s}set uid(ve){this.#s=ve}#o=(n(this,te),n(this,Ie,void 0));get gid(){return this.#o}set gid(ve){this.#o=ve}#a=(n(this,Re),n(this,Ae,void 0));get atimeMs(){return this.#a}set atimeMs(ve){this.#a=ve}#c=(n(this,xe),n(this,Ve,void 0));get birthtimeMs(){return this.#c}set birthtimeMs(ve){this.#c=ve}#l=(n(this,ze),n(this,$e,void 0));get mtimeMs(){return this.#l}set mtimeMs(ve){this.#l=ve}#f=(n(this,Ge),n(this,Be,void 0));get ctimeMs(){return this.#f}set ctimeMs(ve){this.#f=ve}#u=(n(this,x),n(this,ye,void 0));get ino(){return this.#u}set ino(ve){this.#u=ve}#d=(n(this,pe),n(this,Pe,void 0));get __ino_old(){return this.#d}set __ino_old(ve){this.#d=ve}#h=(n(this,Le),n(this,Fe,void 0));get flags(){return this.#h}set flags(ve){this.#h=ve}#y=(n(this,Ze),n(this,qe,void 0));get __after_flags(){return this.#y}set __after_flags(ve){this.#y=ve}#m=(n(this,et),n(this,Ye,void 0));get version(){return this.#m}set version(ve){this.#m=ve}#_=(n(this,Xe),n(this,ke,void 0));get __padding(){return this.#_}set __padding(ve){this.#_=ve}#E=(n(this,Ne),n(this,at,void 0));get attributes(){return this.#E}set attributes(ve){this.#E=ve}#S=(n(this,ct),n(this,ft,void 0));get __data(){return this.#S}set __data(ve){this.#S=ve}toString(){return`<Inode ${this.ino}>`}toJSON(){return{...(0,g.pick)(this,b),attributes:this.attributes}}toStats(){return new o.Stats(this)}update(ve){if(!ve)return!1;let _e=!1;for(const Me of b)ve[Me]!==void 0&&(Me=="ino"||Me=="data"||this[Me]!==ve[Me]&&(Me=="atimeMs"&&this.flags&e.NoAtime||(this[Me]=ve[Me],_e=!0)));return ve.attributes&&(this.attributes.copyFrom(ve.attributes),_e=!0),_e&&(this.ctimeMs=Date.now()),_e}};return nt=J})();function D(B){return(B.mode&u.S_IFMT)===u.S_IFREG}function R(B){return(B.mode&u.S_IFMT)===u.S_IFDIR}function T(B){return(B.mode&u.S_IFMT)===u.S_IFLNK}function A(B){return(B.mode&u.S_IFMT)===u.S_IFSOCK}function k(B){return(B.mode&u.S_IFMT)===u.S_IFBLK}function N(B){return(B.mode&u.S_IFMT)===u.S_IFCHR}function K(B){return(B.mode&u.S_IFMT)===u.S_IFIFO}function V(B,j,q){const{credentials:ae}=(0,p.contextOf)(B);if(T(j)||ae.euid===0||ae.egid===0)return!0;let Q=0;return ae.uid===j.uid&&(j.mode&u.S_IRUSR&&(Q|=u.R_OK),j.mode&u.S_IWUSR&&(Q|=u.W_OK),j.mode&u.S_IXUSR&&(Q|=u.X_OK)),(ae.gid===j.gid||ae.groups.includes(Number(j.gid)))&&(j.mode&u.S_IRGRP&&(Q|=u.R_OK),j.mode&u.S_IWGRP&&(Q|=u.W_OK),j.mode&u.S_IXGRP&&(Q|=u.X_OK)),j.mode&u.S_IROTH&&(Q|=u.R_OK),j.mode&u.S_IWOTH&&(Q|=u.W_OK),j.mode&u.S_IXOTH&&(Q|=u.X_OK),(Q&q)===q}function C(B,j,q){let ae=!0;return!isNaN(j)&&j>=0&&j<u.size_max?B.uid=j:ae=!1,!isNaN(q)&&q>=0&&q<u.size_max?B.gid=q:ae=!1,ae}}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{BigIntStats:()=>u,BigIntStatsFs:()=>n,Stats:()=>E,StatsCommon:()=>g,StatsFs:()=>t,ZenFsType:()=>p,isStatsEqual:()=>o});var h=r(12),f=r(47),v=r(31);const l=BigInt(1e3);class g{_convert(i){return this._isBigint?BigInt(i):Number(i)}get blocks(){return this._convert(Math.ceil(Number(this.size)/512))}set blocks(i){}mode;dev=this._convert(0);ino=this._convert(0);rdev=this._convert(0);nlink=this._convert(1);blksize=this._convert(4096);uid=this._convert(0);gid=this._convert(0);atimeMs;get atime(){return new Date(Number(this.atimeMs))}set atime(i){this.atimeMs=this._convert(i.getTime())}mtimeMs;get mtime(){return new Date(Number(this.mtimeMs))}set mtime(i){this.mtimeMs=this._convert(i.getTime())}ctimeMs;get ctime(){return new Date(Number(this.ctimeMs))}set ctime(i){this.ctimeMs=this._convert(i.getTime())}birthtimeMs;get birthtime(){return new Date(Number(this.birthtimeMs))}set birthtime(i){this.birthtimeMs=this._convert(i.getTime())}size;data;flags;version;constructor({atimeMs:i,mtimeMs:d,ctimeMs:w,birthtimeMs:b,uid:m,gid:e,size:s,mode:y,ino:S,...D}={}){const R=Date.now();this.atimeMs=this._convert(i??R),this.mtimeMs=this._convert(d??R),this.ctimeMs=this._convert(w??R),this.birthtimeMs=this._convert(b??R),this.uid=this._convert(m??0),this.gid=this._convert(e??0),this.size=this._convert(s??0),this.ino=this._convert(S??0),this.mode=this._convert(y??420&v.S_IFREG),(this.mode&v.S_IFMT)==0&&(this.mode=this.mode|this._convert(v.S_IFREG)),Object.assign(this,D)}isFile(){return(this.mode&v.S_IFMT)===v.S_IFREG}isDirectory(){return(this.mode&v.S_IFMT)===v.S_IFDIR}isSymbolicLink(){return(this.mode&v.S_IFMT)===v.S_IFLNK}isSocket(){return(this.mode&v.S_IFMT)===v.S_IFSOCK}isBlockDevice(){return(this.mode&v.S_IFMT)===v.S_IFBLK}isCharacterDevice(){return(this.mode&v.S_IFMT)===v.S_IFCHR}isFIFO(){return(this.mode&v.S_IFMT)===v.S_IFIFO}toJSON(){return(0,h.pick)(this,f._inode_fields)}hasAccess(i,d){return(0,f.hasAccess)(d,this._isBigint?new E(this):this,i)}get atimeNs(){return BigInt(this.atimeMs)*l}get mtimeNs(){return BigInt(this.mtimeMs)*l}get ctimeNs(){return BigInt(this.ctimeMs)*l}get birthtimeNs(){return BigInt(this.birthtimeMs)*l}}class E extends g{_isBigint=!1}class u extends g{_isBigint=!0}function o(c,i){return c.size==i.size&&+c.atime==+i.atime&&+c.mtime==+i.mtime&&+c.ctime==+i.ctime&&c.mode==i.mode}const p=525687744115;class t{type=525687744115;bsize=4096;blocks=0;bfree=0;bavail=0;files=v.size_max;ffree=v.size_max}class n{type=BigInt("0x7a656e6673");bsize=BigInt(4096);blocks=BigInt(0);bfree=BigInt(0);bavail=BigInt(0);files=BigInt(v.size_max);ffree=BigInt(v.size_max)}}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{FileSystem:()=>f});const h=4096;class f{type;name;label;_mountPoint;_uuid=crypto.randomUUID();get uuid(){return this._uuid}attributes=new Map;constructor(l,g){this.type=l,this.name=g,this.streamRead===f.prototype.streamRead&&this.attributes.set("default_stream_read"),this.streamWrite===f.prototype.streamWrite&&this.attributes.set("default_stream_write")}toString(){return`${this.name} ${this.label?JSON.stringify(this.label):""} (${this._mountPoint?"mounted on "+this._mountPoint:"unmounted"})`}usage(){return{totalSpace:0,freeSpace:0}}async ready(){}async exists(l){try{return await this.stat(l),!0}catch(g){return g.code!="ENOENT"}}existsSync(l){try{return this.statSync(l),!0}catch(g){return g.code!="ENOENT"}}streamRead(l,g){return new ReadableStream({start:async E=>{const{size:u}=await this.stat(l),{start:o=0,end:p=u}=g;for(let t=o;t<p;t+=h){const n=t+h>p?p-t:h,c=new Uint8Array(n);await this.read(l,c,t,t+n).catch(E.error.bind(E)),E.enqueue(c)}E.close()},type:"bytes"})}streamWrite(l,g){let E=g.start??0;return new WritableStream({write:async(u,o)=>{let p=!1;const t=c=>{p=!0,o.error(c)},{size:n}=await this.stat(l);await this.write(l,u,E).catch(t),!p&&(E+=u.byteLength,await this.touch(l,{mtimeMs:Date.now(),size:Math.max(n,E)}).catch(t))}})}}}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{AsyncTransaction:()=>u,SyncTransaction:()=>E,Transaction:()=>g,WrappedTransaction:()=>o});var h=r(10),f=r(24),v=r(51),l=r(52);class g{store;constructor(t){this.store=t}}class E extends g{async get(t,n,c){return this.getSync(t,n,c)}async set(t,n,c){return this.setSync(t,n,c)}async remove(t){return this.removeSync(t)}}class u extends g{asyncDone=Promise.resolve();async(t){this.asyncDone=this.asyncDone.then(()=>t)}_cached(t,n){this.store.cache??=new Map;const c=this.store.cache.get(t);return c?(n&&(c.size=n.size),c):n?new v.Resource(t,n.size,{},this.store.cache):void 0}getSync(t,n,c){const i=this._cached(t);if(!i)return;c??=i.size;const d=i.missing(n,c);for(const{start:b,end:m}of d)this.async(this.get(t,b,m));if(d.length)throw(0,h.withErrno)("EAGAIN");const w=i.regionAt(n);if(!w){(0,f.warn)("Missing cache region for "+t);return}return w.data.subarray(n-w.offset,c-w.offset)}setSync(t,n,c){this.async(this.set(t,n,c))}removeSync(t){this.async(this.remove(t)),this.store.cache?.delete(t)}}class o{raw;fs;done=!1;flag(t){return this.raw.store.flags?.includes(t)??!1}constructor(t,n){this.raw=t,this.fs=n}originalData=new Map;modifiedKeys=new Set;keys(){return this.raw.keys()}async get(t,n=0,c){const i=await this.raw.get(t,n,c);return this.stash(t),i}getSync(t,n=0,c){const i=this.raw.getSync(t,n,c);return this.stash(t),i}async set(t,n,c=0){await this.markModified(t,c,n.byteLength);const i=n instanceof Uint8Array?n:new Uint8Array(n.buffer,n.byteOffset,n.byteLength);await this.raw.set(t,i,c)}setSync(t,n,c=0){this.markModifiedSync(t,c,n.byteLength);const i=n instanceof Uint8Array?n:new Uint8Array(n.buffer,n.byteOffset,n.byteLength);this.raw.setSync(t,i,c)}async remove(t){await this.markModified(t,0,void 0),await this.raw.remove(t)}removeSync(t){this.markModifiedSync(t,0,void 0),this.raw.removeSync(t)}commit(){return this.done=!0,Promise.resolve()}commitSync(){this.done=!0}async abort(){if(!this.done){for(const[t,n]of this.originalData)if(this.modifiedKeys.has(t)){if(n.some(c=>!c.data)){await this.raw.remove(t),this.fs._remove(t);continue}for(const c of n.reverse())await this.raw.set(t,c.data,c.offset)}this.done=!0}}abortSync(){if(!this.done){for(const[t,n]of this.originalData)if(this.modifiedKeys.has(t)){if(n.some(c=>!c.data)){this.raw.removeSync(t),this.fs._remove(t);continue}for(const c of n.reverse())this.raw.setSync(t,c.data,c.offset)}this.done=!0}}async[Symbol.asyncDispose](){this.done||await this.abort()}[Symbol.dispose](){this.done||this.abortSync()}stash(t,n,c=0){this.originalData.has(t)||this.originalData.set(t,[]),this.originalData.get(t).push({data:n,offset:c})}async markModified(t,n,c){this.modifiedKeys.add(t);const i=c?n+c:void 0;try{this.stash(t,await this.raw.get(t,n,i),n)}catch(d){if(!(this.raw instanceof u))throw d;const b=this.raw._cached(t);if(!b)throw d;for(const m of b.cached(n,i??n))this.stash(t,await this.raw.get(t,m.start,m.end),m.start)}}markModifiedSync(t,n,c){this.modifiedKeys.add(t);const i=c?n+c:void 0;try{this.stash(t,this.raw.getSync(t,n,i),n)}catch(d){if(!(this.raw instanceof u))throw d;const b=this.raw._cached(t);if(!b)throw d;for(const m of b.cached(n,i??n))this.stash(t,this.raw.getSync(t,m.start,m.end),m.start)}}}}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{Resource:()=>f});var h=r(43);class f{id;_size;options;regions=[];get size(){return this._size}set size(l){if(l>=this._size){this._size=l;return}this._size=l;for(let g=this.regions.length-1;g>=0;g--){const E=this.regions[g];if(E.offset>=l){this.regions.splice(g,1);continue}const u=l-E.offset;E.data.byteLength>u&&(E.data=E.data.subarray(0,u)),E.ranges=E.ranges.filter(o=>o.start<l).map(o=>o.end>l?{start:o.start,end:l}:o)}}constructor(l,g,E,u){this.id=l,this._size=g,this.options=E,E.sparse??=!0,E.sparse||this.regions.push({offset:0,data:new Uint8Array(g),ranges:[]}),u?.set(l,this)}collect(){if(!this.options.sparse)return;const{regionGapThreshold:l=4095}=this.options;for(let g=0;g<this.regions.length-1;){const E=this.regions[g],u=this.regions[g+1];if(u.offset-(E.offset+E.data.byteLength)>l){g++;continue}E.ranges.push(...u.ranges),E.ranges.sort((o,p)=>o.start-p.start),E.ranges=E.ranges.reduce((o,p)=>(!o.length||o.at(-1).end<p.start?o.push(p):o.at(-1).end=Math.max(o.at(-1).end,p.end),o),[]),E.data=(0,h.extendBuffer)(E.data,u.offset+u.data.byteLength),E.data.set(u.data,u.offset-E.offset),this.regions.splice(g+1,1)}}missing(l,g){const E=[];for(const u of this.regions){if(u.offset>=g)break;for(const o of u.ranges)if(!(o.end<=l)&&(o.start>=g||(o.start>l&&E.push({start:l,end:Math.min(o.start,g)}),o.end>l&&(l=Math.max(l,o.end)),l>=g)))break;if(l>=g)break}return l<g&&E.push({start:l,end:g}),E}cached(l,g){const E=[];for(const o of this.regions){if(o.offset>=g)break;for(const p of o.ranges)if(!(p.end<=l)){if(p.start>=g)break;E.push({start:Math.max(l,p.start),end:Math.min(g,p.end)})}}E.sort((o,p)=>o.start-p.start);const u=[];for(const o of E){const p=u.at(-1);p&&o.start<=p.end?p.end=Math.max(p.end,o.end):u.push(o)}return u}regionAt(l){if(this.regions.length)for(const g of this.regions){if(g.offset>l)break;if(l>=g.offset&&l<g.offset+g.data.byteLength)return g}}add(l,g){const E=g+l.byteLength,u=this.regionAt(g);if(u)return u.data=(0,h.extendBuffer)(u.data,E),u.data.set(l,g),u.ranges.push({start:g,end:E}),u.ranges.sort((t,n)=>t.start-n.start),this.collect(),this;const o={data:l,offset:g,ranges:[{start:g,end:E}]},p=this.regions.findIndex(t=>t.offset>g);return p==-1?this.regions.push(o):this.regions.splice(p,0,o),this.collect(),this}}}),((Y,P,r)=>{"use strict";r.r(P);var h=r(24);Promise.withResolvers??=((0,h.warn)("Using a polyfill of Promise.withResolvers"),function(){let f,v;return{promise:new Promise((g,E)=>{f=g,v=E}),resolve:f,reject:v}}),Symbol.dispose??=((0,h.warn)("Using a polyfill of Symbol.dispose"),Symbol("Symbol.dispose")),Symbol.asyncDispose??=((0,h.warn)("Using a polyfill of Symbol.asyncDispose"),Symbol("Symbol.asyncDispose")),globalThis.crypto.randomUUID??=((0,h.warn)("Using a polyfill of crypto.randomUUID"),function(){const v=crypto.getRandomValues(new Uint8Array(16));v[6]=v[6]&15|64,v[8]=v[8]&63|128;const l=[...v].map(g=>g.toString(16).padStart(2,"0")).join("");return`${l.slice(0,8)}-${l.slice(8,12)}-${l.slice(12,16)}-${l.slice(16,20)}-${l.slice(20)}`}),Uint8Array.prototype.toBase64??=((0,h.warn)("Using a polyfill of Uint8Array.prototype.toBase64"),function(){return btoa(String.fromCharCode(...this))}),Uint8Array.fromBase64??=((0,h.warn)("Using a polyfill of Uint8Array.fromBase64"),function(v){const l=atob(v),g=new Uint8Array(l.length);for(let E=0;E<l.length;E++)g[E]=l.charCodeAt(E);return g}),Uint8Array.prototype.toHex??=((0,h.warn)("Using a polyfill of Uint8Array.prototype.toHex"),function(){return[...this].map(v=>v.toString(16).padStart(2,"0")).join("")}),Uint8Array.fromHex??=((0,h.warn)("Using a polyfill of Uint8Array.fromHex"),function(v){const l=new Uint8Array(v.length/2);for(let g=0;g<v.length;g+=2)l[g/2]=parseInt(v.slice(g,g+2),16);return l})}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{AsyncMapTransaction:()=>v,SyncMapTransaction:()=>f});var h=r(50);class f extends h.SyncTransaction{async keys(){return this.store.keys()}async get(g){return await(this.store.getAsync?.(g)??this.store.get(g))}getSync(g){return this.store.get(g)}setSync(g,E){this.store.set(g,E)}removeSync(g){this.store.delete(g)}}class v extends h.AsyncTransaction{async keys(){return await this.asyncDone,this.store.keys()}async get(g,E,u){return await this.asyncDone,await this.store.get(g,E,u)}getSync(g,E,u){return this.store.cached(g,E,u)}async set(g,E,u=0){await this.asyncDone,await this.store.set(g,E,u)}async remove(g){await this.asyncDone,await this.store.delete(g)}}}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{FileHandle:()=>S,access:()=>ne,appendFile:()=>B,chmod:()=>oe,chown:()=>ie,constants:()=>l,copyFile:()=>J,cp:()=>re,exists:()=>R,glob:()=>he,lchmod:()=>fe,lchown:()=>me,link:()=>Q,lstat:()=>A,lutimes:()=>we,mkdir:()=>q,mkdtemp:()=>de,mkdtempDisposable:()=>be,open:()=>K,opendir:()=>Z,readFile:()=>V,readdir:()=>ae,readlink:()=>F,realpath:()=>ge,rename:()=>D,rm:()=>ce,rmdir:()=>j,stat:()=>T,statfs:()=>Ee,symlink:()=>ue,truncate:()=>k,unlink:()=>N,utimes:()=>le,watch:()=>ee,writeFile:()=>C});var h=r(4),f=r(10),v=r(12),l=r(31),g=r(47),E=r(45),u=r(52),o=r(46),p=r(55),t=r(56),n=r(58),c=r(59),i=r(60),d=r(62),w=r(65),b=r(66),m=r(48),e=r(67),s=function(z,M,W){if(M!=null){if(typeof M!="object"&&typeof M!="function")throw new TypeError("Object expected.");var $,H;if(W){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");$=M[Symbol.asyncDispose]}if($===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");$=M[Symbol.dispose],W&&(H=$)}if(typeof $!="function")throw new TypeError("Object not disposable.");H&&($=function(){try{H.call(this)}catch(Se){return Promise.reject(Se)}}),z.stack.push({value:M,dispose:$,async:W})}else W&&z.stack.push({async:!0});return M},y=(function(z){return function(M){function W(se){M.error=M.hasError?new z(se,M.error,"An error was suppressed during disposal."):se,M.hasError=!0}var $,H=0;function Se(){for(;$=M.stack.pop();)try{if(!$.async&&H===1)return H=0,M.stack.push($),Promise.resolve().then(Se);if($.dispose){var se=$.dispose.call($.value);if($.async)return H|=2,Promise.resolve(se).then(Se,function(X){return W(X),Se()})}else H|=1}catch(X){W(X)}if(H===1)return M.hasError?Promise.reject(M.error):Promise.resolve();if(M.hasError)throw M.error}return Se()}})(typeof SuppressedError=="function"?SuppressedError:function(z,M,W){var $=new Error(W);return $.name="SuppressedError",$.error=z,$.suppressed=M,$});class S{context;fd;vfs;constructor(M,W){this.context=M,this.fd=W,this.vfs=(0,n.fromFD)(M,W)}_emitChange(){(0,d.emitChange)(this.context,"change",this.vfs.path)}async chown(M,W){await this.vfs.chown(M,W),this._emitChange()}async chmod(M){const W=(0,o.normalizeMode)(M,-1);if(W<0)throw(0,f.UV)("EINVAL","chmod",this.vfs.path);await this.vfs.chmod(W),this._emitChange()}datasync(){return this.sync()}async sync(){await this.vfs.sync()}async truncate(M=0){await this.vfs.truncate(M),this._emitChange()}async utimes(M,W){M=(0,o.normalizeTime)(M),W=(0,o.normalizeTime)(W),await this.vfs.utimes(M,W),this._emitChange()}async appendFile(M,W={}){const $=(0,o.normalizeOptions)(W,"utf8","a",420);if(!(c.parse($.flag)&l.O_APPEND))throw(0,f.UV)("EBADF","write",this.vfs.path);const Se=typeof M=="string"?h.Buffer.from(M,$.encoding):M;await this.vfs.write(Se,0,Se.length),this._emitChange()}async read(M,W,$,H){if(typeof W=="object"&&W!=null&&(H=W.position,$=W.length,W=W.offset),!ArrayBuffer.isView(M)&&typeof M=="object"&&(H=M.position,$=M.length,W=M.offset,M=M.buffer),H&&H>Number.MAX_SAFE_INTEGER)throw(0,f.UV)("EINVAL");return typeof H=="bigint"&&(H=Number(H)),H=Number.isSafeInteger(H)?H:this.vfs.position,M||=new Uint8Array(this.vfs.inode.size),W??=0,{bytesRead:await this.vfs.read(M,W,$??M.byteLength-W,H),buffer:M}}async readFile(M){const W=(0,o.normalizeOptions)(M,null,"r",292);if(c.parse(W.flag)&l.O_WRONLY)throw(0,f.UV)("EBADF","read",this.vfs.path);const{size:H}=await this.stat(),Se=new Uint8Array(H);await this.vfs.read(Se,0,H,0);const se=h.Buffer.from(Se);return W.encoding?se.toString(W.encoding):se}readableWebStream(M={}){if(this.vfs.isClosed)throw(0,f.UV)("EBADF","readableWebStream",this.vfs.path);return this.vfs.fs.streamRead(this.vfs.internalPath,M)}writableWebStream(M={}){if(this.vfs.isClosed)throw(0,f.UV)("EBADF","writableWebStream",this.vfs.path);if(this.vfs.inode.flags&g.InodeFlags.Immutable)throw(0,f.UV)("EPERM","writableWebStream",this.vfs.path);return this.vfs.fs.streamWrite(this.vfs.internalPath,M)}readLines(M){if(this.vfs.isClosed||this.vfs.flag&l.O_WRONLY)throw(0,f.UV)("EBADF","read",this.vfs.path);return(0,b.createInterface)({input:this.createReadStream(M),crlfDelay:1/0})}[Symbol.asyncDispose](){return this.close()}async stat(M){if(this.vfs.isClosed)throw(0,f.UV)("EBADF","stat",this.vfs.path);if(t.checkAccess&&!(0,g.hasAccess)(this.context,this.vfs.inode,l.R_OK))throw(0,f.UV)("EACCES","stat",this.vfs.path);return M?.bigint?new m.BigIntStats(this.vfs.inode):new m.Stats(this.vfs.inode)}async write(M,W,$,H){let Se,se,X;typeof W=="object"&&W!=null&&($=W.length,H=W.position,W=W.offset),typeof M=="string"?(H=typeof W=="number"?W:null,se=0,Se=h.Buffer.from(M,typeof $=="string"?$:"utf8"),X=Se.length):(Se=new Uint8Array(M.buffer,M.byteOffset,M.byteLength),se=W??0,X=typeof $=="number"?$:Se.byteLength,H=typeof H=="number"?H:null),H??=this.vfs.position;const O=await this.vfs.write(Se,se,X,H);return this._emitChange(),{buffer:M,bytesWritten:O}}async writeFile(M,W={}){const $=(0,o.normalizeOptions)(W,"utf8","w",420),H=c.parse($.flag);if(!(H&l.O_WRONLY||H&l.O_RDWR))throw(0,f.UV)("EBADF","writeFile",this.vfs.path);const Se=typeof M=="string"?h.Buffer.from(M,$.encoding):M;await this.vfs.write(Se,0,Se.length,0),this._emitChange()}async close(){await this.vfs.close(),(0,n.deleteFD)(this.context,this.fd)}async writev(M,W){typeof W=="number"&&(this.vfs.position=W);let $=0;for(const H of M)$+=(await this.write(H)).bytesWritten;return{bytesWritten:$,buffers:M}}async readv(M,W){typeof W=="number"&&(this.vfs.position=W);let $=0;for(const H of M)$+=(await this.read(H)).bytesRead;return{bytesRead:$,buffers:M}}createReadStream(M={}){if(this.vfs.isClosed||this.vfs.flag&l.O_WRONLY)throw(0,f.UV)("EBADF","createReadStream",this.vfs.path);return new e.ReadStream(M,this)}createWriteStream(M={}){if(this.vfs.isClosed)throw(0,f.UV)("EBADF","createWriteStream",this.vfs.path);if(this.vfs.inode.flags&g.InodeFlags.Immutable)throw(0,f.UV)("EPERM","createWriteStream",this.vfs.path);if(this.vfs.fs.attributes.has("readonly"))throw(0,f.UV)("EROFS","createWriteStream",this.vfs.path);return new e.WriteStream(M,this)}}async function D(z,M){await p.rename.call(this,z,M)}async function R(z){z=(0,o.normalizePath)(z);try{const{fs:M,path:W}=await p.resolve(this,z);return await M.exists(W)}catch(M){if(M instanceof f.Exception&&M.code=="ENOENT")return!1;throw M}}async function T(z,M){z=(0,o.normalizePath)(z);const{fs:W,path:$}=await p.resolve(this,z),H={syscall:"stat",path:z},Se=await W.stat($).catch((0,f.rethrow)(H));if(t.checkAccess&&!(0,g.hasAccess)(this,Se,l.R_OK))throw(0,f.UV)("EACCES",H);return M?.bigint?new m.BigIntStats(Se):new m.Stats(Se)}async function A(z,M){z=(0,o.normalizePath)(z);const W={syscall:"lstat",path:z},{base:$,dir:H}=(0,E.parse)(z),{fs:Se,path:se}=await p.resolve(this,H),X=await Se.stat($?(0,E.join)(se,$):se).catch((0,f.rethrow)(W));if(t.checkAccess&&!(0,g.hasAccess)(this,X,l.R_OK))throw(0,f.UV)("EACCES",W);return M?.bigint?new m.BigIntStats(X):new m.Stats(X)}async function k(z,M=0){const W={stack:[],error:void 0,hasError:!1};try{await s(W,await K.call(this,z,"r+"),!0).truncate(M)}catch($){W.error=$,W.hasError=!0}finally{const $=y(W);$&&await $}}async function N(z){z=(0,o.normalizePath)(z);const{fs:M,path:W}=(0,i.resolveMount)(z,this),$={syscall:"unlink",path:z},H=await M.stat(W).catch((0,f.rethrow)($));if(t.checkAccess&&!(0,g.hasAccess)(this,H,l.W_OK))throw(0,f.UV)("EACCES",$);await M.unlink(W).catch((0,f.rethrow)($)),(0,d.emitChange)(this,"rename",z.toString())}async function K(z,M="r",W=420){const $=await p.open(this,z,{flag:M,mode:W});return new S(this,(0,n.toFD)($))}async function V(z,M){const W={stack:[],error:void 0,hasError:!1};try{const $=(0,o.normalizeOptions)(M,null,"r",292);return await s(W,typeof z=="object"&&"fd"in z?z:await K.call(this,z,$.flag,$.mode),!0).readFile($)}catch($){W.error=$,W.hasError=!0}finally{const $=y(W);$&&await $}}async function C(z,M,W){const $={stack:[],error:void 0,hasError:!1};try{const H=(0,o.normalizeOptions)(W,"utf8","w+",420),Se=s($,z instanceof S?z:await K.call(this,z.toString(),H.flag,H.mode),!0),se=typeof M=="string"?M:M instanceof DataView?new Uint8Array(M.buffer,M.byteOffset,M.byteLength):M;if(typeof se!="string"&&!(se instanceof Uint8Array))throw new TypeError('The "data" argument must be of type string or an instance of Buffer, TypedArray, or DataView. Received '+typeof M);await Se.writeFile(se,H)}catch(H){$.error=H,$.hasError=!0}finally{const H=y($);H&&await H}}async function B(z,M,W){const $={stack:[],error:void 0,hasError:!1};try{const H=(0,o.normalizeOptions)(W,"utf8","a",420),Se=c.parse(H.flag),se={syscall:"write",path:z instanceof S?z.vfs.path:z.toString()};if(!(Se&l.O_APPEND))throw(0,f.UV)("EBADF",se);const X=typeof M=="string"?h.Buffer.from(M,H.encoding):new Uint8Array(M.buffer,M.byteOffset,M.byteLength);await s($,typeof z=="object"&&"fd"in z?z:await K.call(this,z,H.flag,H.mode),!0).appendFile(X,H)}catch(H){$.error=H,$.hasError=!0}finally{const H=y($);H&&await H}}async function j(z){z=(0,o.normalizePath)(z);const{fs:M,path:W}=await p.resolve(this,z),$={syscall:"rmdir",path:z},H=await M.stat(W).catch((0,f.rethrow)($));if(!H)throw(0,f.UV)("ENOENT",$);if(!(0,g.isDirectory)(H))throw(0,f.UV)("ENOTDIR",$);if(t.checkAccess&&!(0,g.hasAccess)(this,H,l.W_OK))throw(0,f.UV)("EACCES",$);await M.rmdir(W).catch((0,f.rethrow)($)),(0,d.emitChange)(this,"rename",z.toString())}async function q(z,M){M=typeof M=="object"?M:{mode:M};const W=(0,o.normalizeMode)(M?.mode,511);return await p.mkdir.call(this,z,{...M,mode:W})}async function ae(z,M){z=(0,o.normalizePath)(z);const W=typeof M=="object"&&M!=null?M:{encoding:M,withFileTypes:!1,recursive:!1},$=await p.readdir.call(this,z,W),H=[];for(const Se of $)W.withFileTypes?H.push(w.Dirent.from(Se,W.encoding)):W.encoding=="buffer"?H.push(h.Buffer.from(Se.path)):H.push(Se.path);return H}async function Q(z,M){return await p.link.call(this,z,M)}async function ue(z,M,W="file"){const $={stack:[],error:void 0,hasError:!1};try{if(!["file","dir","junction"].includes(W))throw new TypeError("Invalid symlink type: "+W);if(M=(0,o.normalizePath)(M),await R.call(this,M))throw(0,f.UV)("EEXIST","symlink",M);const H=s($,await p.open(this,M,{flag:"w+",mode:420,preserveSymlinks:!0}),!0),Se=(0,v.encodeUTF8)((0,o.normalizePath)(z,!0));await H.write(Se,0,Se.length,0),await H.chmod(l.S_IFLNK)}catch(H){$.error=H,$.hasError=!0}finally{const H=y($);H&&await H}}async function F(z,M){z=(0,o.normalizePath)(z);const W=h.Buffer.from(await p.readlink.call(this,z),"utf-8"),$=typeof M=="object"?M?.encoding:M;return $=="buffer"?W:W.toString($??"utf-8")}async function ie(z,M,W){const $={stack:[],error:void 0,hasError:!1};try{await s($,await K.call(this,z,"r+"),!0).chown(M,W)}catch(H){$.error=H,$.hasError=!0}finally{const H=y($);H&&await H}}async function me(z,M,W){const $={stack:[],error:void 0,hasError:!1};try{await s($,await p.open(this,z,{flag:"r+",mode:420,preserveSymlinks:!0,allowDirectory:!0}),!0).chown(M,W)}catch(H){$.error=H,$.hasError=!0}finally{const H=y($);H&&await H}}async function oe(z,M){const W={stack:[],error:void 0,hasError:!1};try{await s(W,await K.call(this,z,"r+"),!0).chmod(M)}catch($){W.error=$,W.hasError=!0}finally{const $=y(W);$&&await $}}async function fe(z,M){const W={stack:[],error:void 0,hasError:!1};try{M=(0,o.normalizeMode)(M),await s(W,await p.open(this,z,{flag:"r+",mode:420,preserveSymlinks:!0,allowDirectory:!0}),!0).chmod(M)}catch($){W.error=$,W.hasError=!0}finally{const $=y(W);$&&await $}}async function le(z,M,W){const $={stack:[],error:void 0,hasError:!1};try{await s($,await p.open(this,z,{flag:"r+",allowDirectory:!0}),!0).utimes((0,o.normalizeTime)(M),(0,o.normalizeTime)(W))}catch(H){$.error=H,$.hasError=!0}finally{const H=y($);H&&await H}}async function we(z,M,W){const $={stack:[],error:void 0,hasError:!1};try{await s($,await p.open(this,z,{flag:"r+",mode:420,preserveSymlinks:!0,allowDirectory:!0}),!0).utimes((0,o.normalizeTime)(M),(0,o.normalizeTime)(W))}catch(H){$.error=H,$.hasError=!0}finally{const H=y($);H&&await H}}async function ge(z,M){const W=typeof M=="string"?M:M?.encoding??"utf8";z=(0,o.normalizePath)(z);const{fullPath:$}=await p.resolve(this,z);if(W=="utf8"||W=="utf-8")return $;const H=h.Buffer.from($,"utf-8");return W=="buffer"?H:H.toString(W)}function ee(z,M={}){const W=new d.FSWatcher(this,z.toString(),typeof M!="string"?M:{encoding:M}),$=[];let H=!1;W.on("change",(se,X)=>{$.shift()?.({value:{eventType:se,filename:X},done:!1})});function Se(){H=!0,W.close();for(const se of $)se({value:null,done:H});return $.length=0,Promise.resolve({value:void 0,done:!0})}return{async next(){if(H)return Promise.resolve({value:void 0,done:H});const{promise:se,resolve:X}=Promise.withResolvers();return $.push(X),se},return:Se,throw:Se,async[Symbol.asyncDispose](){await Se()},[Symbol.asyncIterator](){return this}}}async function ne(z,M=l.F_OK){if(!t.checkAccess)return;if(!(await T.call(this,z)).hasAccess(M,this))throw(0,f.UV)("EACCES","access",z.toString())}async function ce(z,M){z=(0,o.normalizePath)(z);const W=await A.call(this,z).catch($=>{if(!($.code=="ENOENT"&&M?.force))throw $});if(W)switch(W.mode&l.S_IFMT){case l.S_IFDIR:if(M?.recursive)for(const $ of await ae.call(this,z))await ce.call(this,(0,E.join)(z,$),M);await j.call(this,z);break;case l.S_IFREG:case l.S_IFLNK:case l.S_IFBLK:case l.S_IFCHR:await N.call(this,z);break;case l.S_IFIFO:case l.S_IFSOCK:default:throw(0,f.UV)("ENOSYS","rm",z)}}async function de(z,M){const W=typeof M=="object"?M?.encoding:M||"utf8",$=(0,o._tempDirName)(z);return await q.call(this,$),W=="buffer"?h.Buffer.from($):$}async function be(z,M){const W=(0,o._tempDirName)(z);await q.call(this,W);const $=()=>ce(W,{recursive:!0,force:!0});return{path:W,remove:$,[Symbol.asyncDispose]:$}}async function J(z,M,W){if(z=(0,o.normalizePath)(z),M=(0,o.normalizePath)(M),W&&W&l.COPYFILE_EXCL&&await R.call(this,M))throw(0,f.UV)("EEXIST","copyFile",M);await C.call(this,M,await V.call(this,z)),(0,d.emitChange)(this,"rename",M.toString())}function Z(z,M){return z=(0,o.normalizePath)(z),Promise.resolve(new w.Dir(z,this))}async function re(z,M,W){z=(0,o.normalizePath)(z),M=(0,o.normalizePath)(M);const $=await A.call(this,z);if(W?.errorOnExist&&await R.call(this,M))throw(0,f.UV)("EEXIST","cp",M);switch($.mode&l.S_IFMT){case l.S_IFDIR:{if(!W?.recursive)throw(0,f.UV)("EISDIR","cp",z);const[H]=await Promise.all([ae.call(this,z,{withFileTypes:!0}),q.call(this,M,{recursive:!0})]),Se=async se=>{W.filter&&!W.filter((0,E.join)(z,se.name),(0,E.join)(M,se.name))||await re.call(this,(0,E.join)(z,se.name),(0,E.join)(M,se.name),W)};await Promise.all(H.map(Se));break}case l.S_IFREG:case l.S_IFLNK:await J.call(this,z,M);break;case l.S_IFBLK:case l.S_IFCHR:case l.S_IFIFO:case l.S_IFSOCK:default:throw(0,f.UV)("ENOSYS","cp",z)}W?.preserveTimestamps&&await le.call(this,M,$.atime,$.mtime)}async function Ee(z,M){z=(0,o.normalizePath)(z);const{fs:W}=(0,i.resolveMount)(z,this);return Promise.resolve((0,i._statfs)(W,M?.bigint))}function he(z,M){z=Array.isArray(z)?z:[z];const{cwd:W="/",withFileTypes:$=!1,exclude:H=()=>!1}=M||{},Se=z.map(o.globToRegex);async function*se(X){const O=await ae(X,{withFileTypes:$,encoding:"utf8"});for(const a of O){const _=$?(0,E.join)(a.parentPath,a.name):X+"/"+a;(typeof H!="function"?H.some(I=>(0,E.matchesGlob)(I,_)):H($?a:_))||((await T(_)).isDirectory()&&Se.some(I=>I.source.includes(".*"))&&(yield*se(_)),Se.some(I=>I.test(_.replace(/^\/+/g,"")))&&(yield $?a:_.replace(/^\/+/g,"")))}}return se(W)}}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{link:()=>y,mkdir:()=>m,open:()=>w,readdir:()=>e,readlink:()=>b,rename:()=>s,resolve:()=>d});var h=r(10),f=r(12),v=r(31),l=r(27),g=r(47),E=r(45),u=r(46),o=r(56),p=r(57),t=r(58),n=r(59),c=r(60),i=r(62);async function d(S,D,R,T){if(D=E.resolve.call(S,D),R){const j=(0,c.resolveMount)(D,S,T),q=await j.fs.stat(j.path).catch(()=>{});return{...j,fullPath:D,stats:q}}try{const j=(0,c.resolveMount)(D,S),q=await j.fs.stat(j.path);if(!(0,g.isSymbolicLink)(q))return{...j,fullPath:D,stats:q};const ae=E.resolve.call(S,(0,E.dirname)(D),await b.call(S,D));return await d(S,ae,R,T)}catch{}const{base:A,dir:k}=(0,E.parse)(D),N=k=="/"?"/":(await d(S,k,!1,T)).fullPath,K=(0,E.join)(N,A),V=(0,c.resolveMount)(K,S),C=await V.fs.stat(V.path).catch(j=>{if(j.code!="ENOENT")throw(0,h.setUVMessage)(Object.assign(j,{syscall:"stat",path:K}))});if(!C)return{...V,fullPath:D};if(!(0,g.isSymbolicLink)(C))return{...V,fullPath:K,stats:C};const B=E.resolve.call(S,N,await b.call(S,K));return await d(S,B,!1,T)}async function w(S,D,R){D=(0,u.normalizePath)(D);const T=(0,u.normalizeMode)(R.mode,420),A=n.parse(R.flag),k={syscall:"open",path:D},{fs:N,path:K,stats:V}=await d(S,D,R.preserveSymlinks,k);if(!V){if(!(A&v.O_CREAT))throw(0,h.UV)("ENOENT",k);const B=await N.stat((0,E.dirname)(K));if(o.checkAccess&&!(0,g.hasAccess)(S,B,v.W_OK))throw(0,h.UV)("EACCES","open",(0,E.dirname)(D));if(!(0,g.isDirectory)(B))throw(0,h.UV)("ENOTDIR","open",(0,E.dirname)(D));if(!R.allowDirectory&&T&v.S_IFDIR)throw(0,h.UV)("EISDIR","open",D);const{euid:j,egid:q}=(0,l.contextOf)(S).credentials,ae=await N.createFile(K,{mode:T,uid:B.mode&v.S_ISUID?B.uid:j,gid:B.mode&v.S_ISGID?B.gid:q});return new t.Handle(S,D,N,K,A,ae)}if(o.checkAccess&&!(0,g.hasAccess)(S,V,n.toMode(A)))throw(0,h.UV)("EACCES",k);if(A&v.O_EXCL)throw(0,h.UV)("EEXIST",k);const C=new t.Handle(S,D,N,K,A,V);if(!R.allowDirectory&&T&v.S_IFDIR)throw(0,h.UV)("EISDIR","open",D);return A&v.O_TRUNC&&await C.truncate(0),C}async function b(S){S=(0,u.normalizePath)(S);const D={syscall:"readlink",path:S},{fs:R,stats:T,path:A}=await d(this,S,!0,D);if(!T)throw(0,h.UV)("ENOENT",D);if(o.checkAccess&&!(0,g.hasAccess)(this,T,v.R_OK))throw(0,h.UV)("EACCES",D);if(!(0,g.isSymbolicLink)(T))throw(0,h.UV)("EINVAL",D);const k=T.size,N=new Uint8Array(k);return await R.read(A,N,0,k),(0,f.decodeUTF8)(N)}async function m(S,D={}){S=(0,u.normalizePath)(S);const{euid:R,egid:T}=(0,l.contextOf)(this).credentials,{mode:A=511,recursive:k}=D,{fs:N,path:K}=(0,c.resolveMount)(S,this,{syscall:"mkdir"}),V=async(q,ae,Q)=>{if(o.checkAccess&&!(0,g.hasAccess)(this,Q,v.W_OK))throw(0,h.UV)("EACCES","mkdir",q);const ue=await N.mkdir(ae,{mode:A,uid:Q.mode&v.S_ISUID?Q.uid:R,gid:Q.mode&v.S_ISGID?Q.gid:T});return(0,i.emitChange)(this,"rename",q),ue};if(!k){await V(S,K,await N.stat((0,E.dirname)(K)));return}const C=[];let B=S;for(let q=K;!await N.exists(q);q=(0,E.dirname)(q),B=(0,E.dirname)(B))C.unshift([B,q]);if(!C.length)return;const j=[await N.stat((0,E.dirname)(C[0][1]))];for(const[q,[ae,Q]]of C.entries())j.push(await V(ae,Q,j[q]));return C[0][0]}async function e(S,D={}){S=(0,u.normalizePath)(S);const R={syscall:"readdir",path:S},{fs:T,path:A,stats:k}=await d(this,S,!1,R);if(!k)throw(0,h.UV)("ENOENT",R);if(o.checkAccess&&!(0,g.hasAccess)(this,k,v.R_OK))throw(0,h.UV)("EACCES",R);if(!(0,g.isDirectory)(k))throw(0,h.UV)("ENOTDIR",R);const N=await T.readdir(A),K=[],V=async C=>{const B=await T.stat((0,E.join)(A,C)).catch(ae=>{if(ae.code!="ENOENT")throw ae});if(!B)return;const j=new p.Dirent;if(j.ino=B.ino,j.type=(0,p.ifToDt)(B.mode),j.path=C,j.name=(0,E.basename)(C),K.push(j),!D.recursive||!(0,g.isDirectory)(B))return;const q=await T.readdir((0,E.join)(A,C));for(const ae of q)await V((0,E.join)(C,ae))};return await Promise.all(N.map(V)),K}async function s(S,D){S=(0,u.normalizePath)(S),D=(0,u.normalizePath)(D);const R={syscall:"rename",path:S,dest:D},T=await d(this,S,!0,R),A=(0,c.resolveMount)(D,this,R);if(T.fs.uuid!==A.fs.uuid)throw(0,h.UV)("EXDEV",R);if(A.path.startsWith(T.path+"/"))throw(0,h.UV)("EBUSY",R);if(!T.stats)throw(0,h.UV)("ENOENT",R);const k=T.fs,N=await k.stat((0,E.dirname)(T.path)),K=await k.stat((0,E.dirname)(A.path)),V=await k.stat(A.path).catch(C=>{if(C.code=="ENOENT")return null;throw C});if(o.checkAccess&&(!(0,g.hasAccess)(this,N,v.R_OK)||!(0,g.hasAccess)(this,K,v.W_OK)))throw(0,h.UV)("EACCES",R);if(V&&!(0,g.isDirectory)(T.stats)&&(0,g.isDirectory)(V))throw(0,h.UV)("EISDIR",R);if(V&&(0,g.isDirectory)(T.stats)&&!(0,g.isDirectory)(V))throw(0,h.UV)("ENOTDIR",R);await T.fs.rename(T.path,A.path),(0,i.emitChange)(this,"rename",S),(0,i.emitChange)(this,"change",D)}async function y(S,D){S=(0,u.normalizePath)(S),D=(0,u.normalizePath)(D);const R={syscall:"link",path:D,dest:S},{fs:T,path:A}=(0,c.resolveMount)(S,this,R),k=(0,c.resolveMount)(D,this,R);if(T.uuid!=k.fs.uuid)throw(0,h.UV)("EXDEV",R);const N=await T.stat(A);if(o.checkAccess){if(!(0,g.hasAccess)(this,N,v.R_OK))throw(0,h.UV)("EACCES",R);const K=await T.stat((0,E.dirname)(A));if(!(0,g.hasAccess)(this,K,v.R_OK))throw(0,h.UV)("EACCES",R);const V=await T.stat((0,E.dirname)(k.path));if(!(0,g.hasAccess)(this,V,v.W_OK))throw(0,h.UV)("EACCES",R)}return await T.link(A,k.path)}}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{_setAccessChecks:()=>f,checkAccess:()=>h});let h=!0;function f(v){h=v}}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{DirType:()=>h,Dirent:()=>l,dtToIf:()=>v,ifToDt:()=>f});var h;(function(g){g[g.UNKNOWN=0]="UNKNOWN",g[g.FIFO=1]="FIFO",g[g.CHR=2]="CHR",g[g.DIR=4]="DIR",g[g.BLK=6]="BLK",g[g.REG=8]="REG",g[g.LNK=10]="LNK",g[g.SOCK=12]="SOCK",g[g.WHT=14]="WHT"})(h||(h={}));function f(g){return(g&61440)>>12}function v(g){return g<<12}class l{ino;type;path;name}}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{Handle:()=>E,deleteFD:()=>p,fromFD:()=>o,toFD:()=>u});var h=r(10),f=r(31),v=r(27),l=r(47),g=r(52);class E{context;path;fs;internalPath;flag;inode;_buffer;_position=0;get position(){return this.flag&f.O_APPEND?this.inode.size:this._position}set position(n){this._position=n}dirty=!1;closed=!1;get isClosed(){return this.closed}constructor(n,c,i,d,w,b){this.context=n,this.path=c,this.fs=i,this.internalPath=d,this.flag=w,this.inode=b}get _isSync(){return!!(this.flag&f.O_SYNC||this.inode.flags&l.InodeFlags.Sync||this.fs.attributes.has("sync"))}[Symbol.dispose](){this.closeSync()}syncSync(){if(this.closed)throw(0,h.UV)("EBADF","sync",this.path);this.dirty&&(this.fs.attributes.has("no_write")||this.fs.touchSync(this.internalPath,this.inode),this.dirty=!1)}datasyncSync(){return this.syncSync()}closeSync(){if(this.closed)throw(0,h.UV)("EBADF","close",this.path);this.syncSync(),this.disposeSync()}disposeSync(n){if(this.closed)throw(0,h.UV)("EBADF","close",this.path);if(this.dirty&&!n)throw(0,h.UV)("EBUSY","close",this.path);this.closed=!0}truncateSync(n){if(n<0)throw(0,h.UV)("EINVAL","truncate",this.path);if(this.closed)throw(0,h.UV)("EBADF","truncate",this.path);if(!(this.flag&f.O_WRONLY||this.flag&f.O_RDWR))throw(0,h.UV)("EBADF","truncate",this.path);if(this.fs.attributes.has("readonly"))throw(0,h.UV)("EROFS","truncate",this.path);if(this.inode.flags&l.InodeFlags.Immutable)throw(0,h.UV)("EPERM","truncate",this.path);this.dirty=!0,this.inode.mtimeMs=Date.now(),this.inode.size=n,this.inode.ctimeMs=Date.now(),this._isSync&&this.syncSync()}writeSync(n,c=0,i=n.byteLength-c,d=this.position){if(this.closed)throw(0,h.UV)("EBADF","write",this.path);if(!(this.flag&f.O_WRONLY||this.flag&f.O_RDWR))throw(0,h.UV)("EBADF","write",this.path);if(this.fs.attributes.has("readonly"))throw(0,h.UV)("EROFS","write",this.path);if(this.inode.flags&l.InodeFlags.Immutable)throw(0,h.UV)("EPERM","write",this.path);this.dirty=!0;const w=d+i,b=n.subarray(c,c+i);return!(0,l.isCharacterDevice)(this.inode)&&!(0,l.isBlockDevice)(this.inode)&&w>this.inode.size&&(this.inode.size=w),this.inode.mtimeMs=Date.now(),this.inode.ctimeMs=Date.now(),this._position=d+b.byteLength,this.fs.writeSync(this.internalPath,b,d),this._isSync&&this.syncSync(),b.byteLength}readSync(n,c=0,i=n.byteLength-c,d=this.position){if(this.closed)throw(0,h.UV)("EBADF","read",this.path);if(this.flag&f.O_WRONLY)throw(0,h.UV)("EBADF","read",this.path);!(this.inode.flags&l.InodeFlags.NoAtime)&&!this.fs.attributes.has("no_atime")&&(this.dirty=!0,this.inode.atimeMs=Date.now());let w=d+i;!(0,l.isCharacterDevice)(this.inode)&&!(0,l.isBlockDevice)(this.inode)&&w>this.inode.size&&(w=d+Math.max(this.inode.size-d,0)),this._position=w;const b=new Uint8Array(n.buffer,n.byteOffset,n.byteLength);return this.fs.readSync(this.internalPath,b.subarray(c,c+i),d,w),this._isSync&&this.syncSync(),w-d}chmodSync(n){if(this.closed)throw(0,h.UV)("EBADF","chmod",this.path);this.dirty=!0,this.inode.mode=this.inode.mode&(n>f.S_IFMT?~f.S_IFMT:f.S_IFMT)|n,(this._isSync||n>f.S_IFMT)&&this.syncSync()}chownSync(n,c){if(this.closed)throw(0,h.UV)("EBADF","chmod",this.path);this.dirty=!0,(0,l._chown)(this.inode,n,c),this._isSync&&this.syncSync()}utimesSync(n,c){if(this.closed)throw(0,h.UV)("EBADF","utimes",this.path);this.dirty=!0,this.inode.atimeMs=n,this.inode.mtimeMs=c,this._isSync&&this.syncSync()}async[Symbol.asyncDispose](){await this.close()}async sync(){if(this.closed)throw(0,h.UV)("EBADF","sync",this.path);this.dirty&&(this.fs.attributes.has("no_write")||await this.fs.touch(this.internalPath,this.inode),this.dirty=!1)}datasync(){return this.sync()}async close(){if(this.closed)throw(0,h.UV)("EBADF","close",this.path);await this.sync(),this.dispose()}dispose(n){if(this.closed)throw(0,h.UV)("EBADF","close",this.path);if(this.dirty&&!n)throw(0,h.UV)("EBUSY","close",this.path);this.closed=!0}stat(){if(this.closed)throw(0,h.UV)("EBADF","stat",this.path);return this.inode}async truncate(n){if(n<0)throw(0,h.UV)("EINVAL","truncate",this.path);if(this.closed)throw(0,h.UV)("EBADF","truncate",this.path);if(!(this.flag&f.O_WRONLY||this.flag&f.O_RDWR))throw(0,h.UV)("EBADF","truncate",this.path);if(this.fs.attributes.has("readonly"))throw(0,h.UV)("EROFS","truncate",this.path);if(this.inode.flags&l.InodeFlags.Immutable)throw(0,h.UV)("EPERM","truncate",this.path);this.dirty=!0,this.inode.mtimeMs=Date.now(),this.inode.size=n,this.inode.ctimeMs=Date.now(),this._isSync&&await this.sync()}async write(n,c=0,i=n.byteLength-c,d=this.position){if(this.closed)throw(0,h.UV)("EBADF","write",this.path);if(!(this.flag&f.O_WRONLY||this.flag&f.O_RDWR))throw(0,h.UV)("EBADF","write",this.path);if(this.fs.attributes.has("readonly"))throw(0,h.UV)("EROFS","write",this.path);if(this.inode.flags&l.InodeFlags.Immutable)throw(0,h.UV)("EPERM","write",this.path);this.dirty=!0;const w=d+i,b=n.subarray(c,c+i);return!(0,l.isCharacterDevice)(this.inode)&&!(0,l.isBlockDevice)(this.inode)&&w>this.inode.size&&(this.inode.size=w),this.inode.mtimeMs=Date.now(),this.inode.ctimeMs=Date.now(),this._position=d+b.byteLength,await this.fs.write(this.internalPath,b,d),this._isSync&&await this.sync(),b.byteLength}async read(n,c=0,i=n.byteLength-c,d=this.position){if(this.closed)throw(0,h.UV)("EBADF","read",this.path);if(this.flag&f.O_WRONLY)throw(0,h.UV)("EBADF","read",this.path);!(this.inode.flags&l.InodeFlags.NoAtime)&&!this.fs.attributes.has("no_atime")&&(this.dirty=!0,this.inode.atimeMs=Date.now());let w=d+i;!(0,l.isCharacterDevice)(this.inode)&&!(0,l.isBlockDevice)(this.inode)&&w>this.inode.size&&(w=d+Math.max(this.inode.size-d,0)),this._position=w;const b=new Uint8Array(n.buffer,n.byteOffset,n.byteLength);return await this.fs.read(this.internalPath,b.subarray(c,c+i),d,w),this._isSync&&await this.sync(),w-d}async chmod(n){if(this.closed)throw(0,h.UV)("EBADF","chmod",this.path);this.dirty=!0,this.inode.mode=this.inode.mode&(n>f.S_IFMT?~f.S_IFMT:f.S_IFMT)|n,(this._isSync||n>f.S_IFMT)&&await this.sync()}async chown(n,c){if(this.closed)throw(0,h.UV)("EBADF","chown",this.path);this.dirty=!0,(0,l._chown)(this.inode,n,c),this._isSync&&await this.sync()}async utimes(n,c){if(this.closed)throw(0,h.UV)("EBADF","utimes",this.path);this.dirty=!0,this.inode.atimeMs=n,this.inode.mtimeMs=c,this._isSync&&await this.sync()}streamRead(n){if(this.closed)throw(0,h.UV)("EBADF","streamRead",this.path);return this.fs.streamRead(this.internalPath,n)}streamWrite(n){if(this.closed)throw(0,h.UV)("EBADF","write",this.path);if(this.inode.flags&l.InodeFlags.Immutable)throw(0,h.UV)("EPERM","write",this.path);if(this.fs.attributes.has("readonly"))throw(0,h.UV)("EROFS","write",this.path);return this.fs.streamWrite(this.internalPath,n)}}function u(t){const n=(0,v.contextOf)(t.context).descriptors,c=Math.max(n.size?Math.max(...n.keys())+1:0,4);return n.set(c,t),c}function o(t,n){const i=(0,v.contextOf)(t).descriptors.get(n);if(!i)throw(0,h.withErrno)("EBADF");return i}function p(t,n){return(0,v.contextOf)(t).descriptors.delete(n)}}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{parse:()=>l,pattern:()=>v,toMode:()=>u,toNumber:()=>E,toString:()=>g});var h=r(10),f=r(31);const v=/[rwasx]{1,2}\+?/;function l(o){if(typeof o=="number")return o;if(!v.test(o))throw(0,h.withErrno)("EINVAL","Invalid flag string: "+o);return E(o)}function g(o){let p=o&f.O_RDONLY?"r":o&f.O_APPEND?"a":o&f.O_TRUNC?"w":"";return o&f.O_SYNC&&(p+="s"),o&f.O_EXCL&&(p+="x"),o&f.O_RDWR&&(p+="+"),p}function E(o){if(!o.includes("r")&&!o.includes("w")&&!o.includes("a"))throw(0,h.withErrno)("EINVAL","Invalid flag string: "+o);let p=o.includes("r")?f.O_RDONLY:f.O_CREAT;return o.includes("w")&&(p|=f.O_TRUNC),o.includes("a")&&(p|=f.O_APPEND),o.includes("+")?p|=f.O_RDWR:o.includes("r")||(p|=f.O_WRONLY),o.includes("s")&&(p|=f.O_SYNC),o.includes("x")&&(p|=f.O_EXCL),p}function u(o){let p=0;return o&f.O_WRONLY||(p|=f.R_OK),(o&f.O_WRONLY||o&f.O_RDWR)&&(p|=f.W_OK),p}}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{_statfs:()=>d,chroot:()=>w,mount:()=>n,mounts:()=>t,resolveMount:()=>i,umount:()=>c});var h=r(10),f=r(24),v=r(30),l=r(31),g=r(27),E=r(28),u=r(61),o=r(45),p=r(46);const t=new Map;n("/",v.InMemory.create({label:"root"}));function n(m,e){if(m[0]!="/"&&(m="/"+m),m=o.resolve.call(this,m),t.has(m))throw(0,f.err)((0,h.withErrno)("EINVAL","Mount point is already in use: "+m));e._mountPoint=m,t.set(m,e),(0,f.info)(`Mounted ${e.name} on ${m}`),(0,f.debug)(`${e.name} attributes: ${[...e.attributes].map(([s,y])=>y!=null?s+"="+y:s).join(", ")}`)}function c(m){if(m[0]!="/"&&(m="/"+m),m=o.resolve.call(this,m),!t.has(m)){(0,f.warn)(m+" is already unmounted");return}t.delete(m),(0,f.notice)("Unmounted "+m)}function i(m,e,s){const{root:y}=(0,g.contextOf)(e),S={path:m,...s};m=(0,p.normalizePath)((0,o.join)(y,m),!0),m=o.resolve.call(e,m);const D=[...t].sort((R,T)=>R[0].length>T[0].length?-1:1);for(const[R,T]of D){if(!b(R,m))continue;m=m.slice(R.length>1?R.length:0),m===""&&(m="/");const A=T.attributes.get("case_fold");return A==="lower"&&(m=m.toLowerCase()),A==="upper"&&(m=m.toUpperCase()),{fs:(0,u.withExceptionContext)(T,S),path:m,mountPoint:R,root:y}}throw(0,f.alert)(new h.Exception(h.Errno.EIO,"No file system for "+m))}function d(m,e){const s=m.usage(),y=s.blockSize||4096;return{type:(e?BigInt:Number)(m.type),bsize:(e?BigInt:Number)(y),ffree:(e?BigInt:Number)(s.freeNodes||l.size_max),files:(e?BigInt:Number)(s.totalNodes||l.size_max),bavail:(e?BigInt:Number)(s.freeSpace/y),bfree:(e?BigInt:Number)(s.freeSpace/y),blocks:(e?BigInt:Number)(s.totalSpace/y)}}function w(m){const e=(0,g.contextOf)(this);if(!(0,E.credentialsAllowRoot)(e.credentials))throw(0,h.withErrno)("EPERM","Can not chroot() as non-root user");e.root??="/";const s=(0,o.join)(e.root,m);for(const y of e.descriptors?.values()??[]){if(!y.path.startsWith(e.root))throw(0,h.UV)("EBUSY","chroot",y.path);y.path=y.path.slice(e.root.length)}if(s.length>e.root.length)throw(0,h.withErrno)("EPERM","Can not chroot() outside of current root");e.root=s}function b(m,e){return m==="/"||m===e?!0:(m.endsWith("/")||(m+="/"),e.startsWith(m))}}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{ErrnoError:()=>f,withExceptionContext:()=>g,withPath:()=>v,wrap:()=>l});var h=r(10);const f=h.Exception;function v(E,u){return E.path=u,E}function l(E,u,o,p){const t=typeof o=="string"?{path:o,dest:p,syscall:u.endsWith("Sync")?u.slice(0,-4):u}:o,n=E[u];if(typeof n!="function")throw new TypeError(`${u} is not a function`);return function(...c){try{return n.call(E,...c)}catch(i){throw(0,h.setUVMessage)(Object.assign(i,t))}}}function g(E,u){return new Proxy(E,{get(o,p){const t=Reflect.get(o,p);return typeof t!="function"?t:function n(...c){try{const i=t.apply(o,c);return i instanceof Promise?i.catch(d=>{if("code"in d)throw(0,h.setUVMessage)(Object.assign(d,u));if(d in h.Errno){const w=(0,h.UV)(d,u);Error.captureStackTrace(w,n)}throw d}):i}catch(i){throw(0,h.setUVMessage)(Object.assign(i,u))}}}})}}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{FSWatcher:()=>p,StatWatcher:()=>t,addWatcher:()=>c,emitChange:()=>d,removeWatcher:()=>i});var h=r(14),f=r(10),v=r(27),l=r(48),g=r(63),E=r(45),u=r(46);class o extends h.EventEmitter{_context;path;off(b,m,e,s){return super.off(b,m,e,s)}removeListener(b,m,e,s){return super.removeListener(b,m,e,s)}constructor(b,m){super(),this._context=b,this.path=m}setMaxListeners(){throw(0,f.UV)("ENOSYS","Watcher.setMaxListeners")}getMaxListeners(){throw(0,f.UV)("ENOSYS","Watcher.getMaxListeners")}prependListener(){throw(0,f.UV)("ENOSYS","Watcher.prependListener")}prependOnceListener(){throw(0,f.UV)("ENOSYS","Watcher.prependOnceListener")}rawListeners(){throw(0,f.UV)("ENOSYS","Watcher.rawListeners")}ref(){return this}unref(){return this}}class p extends o{options;realpath;constructor(b,m,e){const s=(0,v.contextOf)(b);super(s,m),this.options=e,this.realpath=(0,E.join)(s.root,m),c(this.realpath,this)}close(){super.emit("close"),i(this.realpath,this)}[Symbol.dispose](){this.close()}}class t extends o{options;intervalId;previous;constructor(b,m,e){super(b,m),this.options=e,this.start()}onInterval(){try{const b=(0,g.statSync)(this.path);(0,l.isStatsEqual)(this.previous,b)||(this.emit("change",b,this.previous),this.previous=b)}catch(b){this.emit("error",b)}}start(){const b=this.options.interval||5e3;try{this.previous=(0,g.statSync)(this.path)}catch(m){this.emit("error",m);return}this.intervalId=setInterval(this.onInterval.bind(this),b),!this.options.persistent&&typeof this.intervalId=="object"&&this.intervalId.unref()}stop(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=void 0),this.removeAllListeners()}}const n=new Map;function c(w,b){const m=(0,u.normalizePath)(w);n.has(m)||n.set(m,new Set),n.get(m).add(b)}function i(w,b){const m=(0,u.normalizePath)(w);n.has(m)&&(n.get(m).delete(b),n.get(m).size===0&&n.delete(m))}function d(w,b,m){const e=(0,v.contextOf)(w);e&&(m=(0,E.join)(e.root??"/",m)),m=(0,u.normalizePath)(m);for(let s=m;s!="/";s=(0,E.dirname)(s)){const y=n.get(s);if(y)for(const S of y)S.emit("change",b,E.relative.call(S._context,s,m)||(0,E.basename)(m))}}}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{accessSync:()=>Ee,appendFileSync:()=>V,chmodSync:()=>de,chownSync:()=>ne,closeSync:()=>B,copyFileSync:()=>W,cpSync:()=>se,existsSync:()=>y,fchmodSync:()=>ie,fchownSync:()=>F,fdatasyncSync:()=>ae,fstatSync:()=>C,fsyncSync:()=>q,ftruncateSync:()=>j,futimesSync:()=>me,globSync:()=>O,lchmodSync:()=>be,lchownSync:()=>ce,linkSync:()=>we,lopenSync:()=>k,lstatSync:()=>D,lutimesSync:()=>Z,mkdirSync:()=>fe,mkdtempDisposableSync:()=>M,mkdtempSync:()=>z,openSync:()=>A,opendirSync:()=>Se,readFileSync:()=>N,readSync:()=>ue,readdirSync:()=>le,readlinkSync:()=>ee,readvSync:()=>$,realpathSync:()=>re,renameSync:()=>s,rmSync:()=>he,rmdirSync:()=>oe,statSync:()=>S,statfsSync:()=>X,symlinkSync:()=>ge,truncateSync:()=>R,unlinkSync:()=>T,utimesSync:()=>J,writeFileSync:()=>K,writeSync:()=>Q,writevSync:()=>H});var h=r(4),f=r(10),v=r(12),l=r(31),g=r(61),E=r(47),u=r(45),o=r(46),p=r(56),t=r(58),n=r(59),c=r(60),i=r(64),d=r(62),w=r(65),b=r(48),m=function(a,_,I){if(_!=null){if(typeof _!="object"&&typeof _!="function")throw new TypeError("Object expected.");var U,G;if(I){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");U=_[Symbol.asyncDispose]}if(U===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");U=_[Symbol.dispose],I&&(G=U)}if(typeof U!="function")throw new TypeError("Object not disposable.");G&&(U=function(){try{G.call(this)}catch(te){return Promise.reject(te)}}),a.stack.push({value:_,dispose:U,async:I})}else I&&a.stack.push({async:!0});return _},e=(function(a){return function(_){function I(Oe){_.error=_.hasError?new a(Oe,_.error,"An error was suppressed during disposal."):Oe,_.hasError=!0}var U,G=0;function te(){for(;U=_.stack.pop();)try{if(!U.async&&G===1)return G=0,_.stack.push(U),Promise.resolve().then(te);if(U.dispose){var Oe=U.dispose.call(U.value);if(U.async)return G|=2,Promise.resolve(Oe).then(te,function(Ie){return I(Ie),te()})}else G|=1}catch(Ie){I(Ie)}if(G===1)return _.hasError?Promise.reject(_.error):Promise.resolve();if(_.hasError)throw _.error}return te()}})(typeof SuppressedError=="function"?SuppressedError:function(a,_,I){var U=new Error(I);return U.name="SuppressedError",U.error=a,U.suppressed=_,U});function s(a,_){return i.rename.call(this,a,_)}function y(a){a=(0,o.normalizePath)(a);try{const{fs:_,path:I}=i.resolve(this,a);return _.existsSync(I)}catch(_){if(_.errno==f.Errno.ENOENT)return!1;throw _}}function S(a,_){a=(0,o.normalizePath)(a);const{fs:I,path:U}=i.resolve(this,a);let G;try{G=I.statSync(U)}catch(te){throw(0,f.setUVMessage)(Object.assign(te,{path:a}))}if(p.checkAccess&&!(0,E.hasAccess)(this,G,l.R_OK))throw(0,f.UV)("EACCES",{syscall:"stat",path:a});return _?.bigint?new b.BigIntStats(G):new b.Stats(G)}function D(a,_){a=(0,o.normalizePath)(a);const{base:I,dir:U}=(0,u.parse)(a),{fs:G,path:te}=i.resolve(this,U),Oe=(0,g.wrap)(G,"statSync",a)(I?(0,u.join)(te,I):te);if(p.checkAccess&&!(0,E.hasAccess)(this,Oe,l.R_OK))throw(0,f.UV)("EACCES",{syscall:"lstat",path:a});return _?.bigint?new b.BigIntStats(Oe):new b.Stats(Oe)}function R(a,_=0){const I={stack:[],error:void 0,hasError:!1};try{const U=m(I,i.open.call(this,a,{flag:"r+"}),!1);if(_||=0,_<0)throw(0,f.UV)("EINVAL","truncate",a.toString());U.truncateSync(_)}catch(U){I.error=U,I.hasError=!0}finally{e(I)}}function T(a){a=(0,o.normalizePath)(a);const{fs:_,path:I}=(0,c.resolveMount)(a,this);try{if(p.checkAccess&&!(0,E.hasAccess)(this,_.statSync(I),l.W_OK))throw(0,f.UV)("EACCES","unlink");_.unlinkSync(I)}catch(U){throw(0,f.setUVMessage)(Object.assign(U,{path:a}))}(0,d.emitChange)(this,"rename",a.toString())}function A(a,_,I=l.F_OK){return(0,t.toFD)(i.open.call(this,a,{flag:_,mode:I}))}function k(a,_,I){return(0,t.toFD)(i.open.call(this,a,{flag:_,mode:I,preserveSymlinks:!0}))}function N(a,_={}){const I={stack:[],error:void 0,hasError:!1};try{const U=(0,o.normalizeOptions)(_,null,"r",420);if(n.parse(U.flag)&l.O_WRONLY)throw(0,f.UV)("EBADF","read",a.toString());const te=m(I,typeof a=="number"?(0,t.fromFD)(this,a):i.open.call(this,a.toString(),{flag:U.flag,mode:420,preserveSymlinks:!1}),!1),{size:Oe}=te.stat(),Ie=h.Buffer.alloc(Oe);return te.readSync(Ie,0,Oe,0),U.encoding?Ie.toString(U.encoding):Ie}catch(U){I.error=U,I.hasError=!0}finally{e(I)}}function K(a,_,I={}){const U={stack:[],error:void 0,hasError:!1};try{const G=(0,o.normalizeOptions)(I,"utf8","w+",420),te=n.parse(G.flag);if(!(te&l.O_WRONLY||te&l.O_RDWR))throw new f.Exception(f.Errno.EINVAL,"Flag passed to writeFile must allow for writing");if(typeof _!="string"&&!G.encoding)throw new f.Exception(f.Errno.EINVAL,"Encoding not specified");const Oe=typeof _=="string"?h.Buffer.from(_,G.encoding):new Uint8Array(_.buffer,_.byteOffset,_.byteLength);if(!Oe)throw new f.Exception(f.Errno.EINVAL,"Data not specified");m(U,typeof a=="number"?(0,t.fromFD)(this,a):i.open.call(this,a.toString(),{flag:te,mode:G.mode,preserveSymlinks:!0}),!1).writeSync(Oe,0,Oe.byteLength,0),(0,d.emitChange)(this,"change",a.toString())}catch(G){U.error=G,U.hasError=!0}finally{e(U)}}function V(a,_,I={}){const U=(0,o.normalizeOptions)(I,"utf8","a+",420),G=n.parse(U.flag);if(!(G&l.O_APPEND))throw new f.Exception(f.Errno.EINVAL,"Flag passed to appendFile must allow for appending");if(typeof _!="string"&&!U.encoding)throw new f.Exception(f.Errno.EINVAL,"Encoding not specified");const te=typeof _=="string"?h.Buffer.from(_,U.encoding):new Uint8Array(_.buffer,_.byteOffset,_.byteLength),Oe=typeof a=="number"?(0,t.fromFD)(this,a):i.open.call(this,(0,o.normalizePath)(a),{flag:G,mode:U.mode,preserveSymlinks:!0});Oe.writeSync(te,0,te.byteLength),typeof Oe!="number"&&Oe.closeSync()}function C(a,_){const I=(0,t.fromFD)(this,a).stat();return _?.bigint?new b.BigIntStats(I):new b.Stats(I)}function B(a){(0,t.fromFD)(this,a).closeSync(),(0,t.deleteFD)(this,a)}function j(a,_=0){if(_||=0,_<0)throw new f.Exception(f.Errno.EINVAL);(0,t.fromFD)(this,a).truncateSync(_)}function q(a){(0,t.fromFD)(this,a).syncSync()}function ae(a){(0,t.fromFD)(this,a).datasyncSync()}function Q(a,_,I,U,G){let te,Oe,Ie,Re;if(typeof _=="string"){Re=typeof I=="number"?I:null;const xe=typeof U=="string"?U:"utf8";Oe=0,te=h.Buffer.from(_,xe),Ie=te.byteLength}else te=new Uint8Array(_.buffer,_.byteOffset,_.byteLength),Oe=I,Ie=U,Re=typeof G=="number"?G:null;const Te=(0,t.fromFD)(this,a);Re??=Te.position;const Ae=Te.writeSync(te,Oe,Ie,Re);return(0,d.emitChange)(this,"change",Te.path),Ae}function ue(a,_,I,U,G){const te=(0,t.fromFD)(this,a),Oe=typeof I=="object"?I.offset:I;if(typeof I=="object"&&(U=I.length,G=I.position),G&&G>Number.MAX_SAFE_INTEGER)throw(0,f.UV)("EINVAL");return typeof G=="bigint"&&(G=Number(G)),G=Number.isSafeInteger(G)?G:te.position,te.readSync(_,Oe,U,G)}function F(a,_,I){(0,t.fromFD)(this,a).chownSync(_,I)}function ie(a,_){const I=(0,o.normalizeMode)(_,-1);if(I<0)throw new f.Exception(f.Errno.EINVAL,"Invalid mode.");(0,t.fromFD)(this,a).chmodSync(I)}function me(a,_,I){(0,t.fromFD)(this,a).utimesSync((0,o.normalizeTime)(_),(0,o.normalizeTime)(I))}function oe(a){a=(0,o.normalizePath)(a);const{fs:_,path:I}=i.resolve(this,a),U=(0,g.wrap)(_,"statSync",a)(I);if(!(0,E.isDirectory)(U))throw(0,f.UV)("ENOTDIR","rmdir",a);if(p.checkAccess&&!(0,E.hasAccess)(this,U,l.W_OK))throw(0,f.UV)("EACCES","rmdir",a);(0,g.wrap)(_,"rmdirSync",a)(I),(0,d.emitChange)(this,"rename",a.toString())}function fe(a,_){_=typeof _=="object"?_:{mode:_};const I=(0,o.normalizeMode)(_?.mode,511);return i.mkdir.call(this,a,{..._,mode:I})}function le(a,_){_=typeof _=="object"?_:{encoding:_},a=(0,o.normalizePath)(a);const I=[],U=i.readdir.call(this,a,_??void 0);for(const G of U)_?.withFileTypes?I.push(w.Dirent.from(G,_.encoding)):_?.encoding=="buffer"?I.push(h.Buffer.from(G.path)):I.push(G.path);return I}function we(a,_){return i.link.call(this,a,_)}function ge(a,_,I="file"){const U={stack:[],error:void 0,hasError:!1};try{if(!["file","dir","junction"].includes(I))throw new TypeError("Invalid symlink type: "+I);_=(0,o.normalizePath)(_);const G=m(U,i.open.call(this,_,{flag:"wx",mode:420}),!1);G.writeSync((0,v.encodeUTF8)((0,o.normalizePath)(a,!0))),G.chmodSync(l.S_IFLNK)}catch(G){U.error=G,U.hasError=!0}finally{e(U)}}function ee(a,_){const I=h.Buffer.from(i.readlink.call(this,a)),U=typeof _=="object"?_?.encoding:_;return U=="buffer"?I:I.toString(U??"utf-8")}function ne(a,_,I){const U={stack:[],error:void 0,hasError:!1};try{m(U,i.open.call(this,a,{flag:"r+",mode:l.F_OK}),!1).chownSync(_,I)}catch(G){U.error=G,U.hasError=!0}finally{e(U)}}function ce(a,_,I){const U=k.call(this,a,"r+");F.call(this,U,_,I),B.call(this,U)}function de(a,_){const I=A.call(this,a,"r+");ie.call(this,I,_),B.call(this,I)}function be(a,_){const I=k.call(this,a,"r+");ie.call(this,I,_),B.call(this,I)}function J(a,_,I){const U=A.call(this,a,"r+");me.call(this,U,_,I),B.call(this,U)}function Z(a,_,I){const U=k.call(this,a,"r+");me.call(this,U,_,I),B.call(this,U)}function re(a,_){const I=typeof _=="string"?_:_?.encoding??"utf8";a=(0,o.normalizePath)(a,!0);const{fullPath:U}=i.resolve(this,a);if(I=="utf8"||I=="utf-8")return U;const G=h.Buffer.from(U,"utf-8");return I=="buffer"?G:G.toString(I)}function Ee(a,_=384){if(p.checkAccess&&!(0,E.hasAccess)(this,S.call(this,a),_))throw new f.Exception(f.Errno.EACCES)}function he(a,_){a=(0,o.normalizePath)(a);let I;try{I=D.bind(this)(a)}catch(U){if(U.code!="ENOENT"||!_?.force)throw U}if(I)switch(I.mode&l.S_IFMT){case l.S_IFDIR:if(_?.recursive)for(const U of le.call(this,a))he.call(this,(0,u.join)(a,U),_);oe.call(this,a);break;case l.S_IFREG:case l.S_IFLNK:case l.S_IFBLK:case l.S_IFCHR:T.call(this,a);break;case l.S_IFIFO:case l.S_IFSOCK:default:throw(0,f.UV)("ENOSYS","rm",a)}}function z(a,_){const I=typeof _=="object"?_?.encoding:_||"utf8",U=(0,o._tempDirName)(a);return fe.call(this,U),I=="buffer"?h.Buffer.from(U):U}function M(a,_){const I=(0,o._tempDirName)(a);fe.call(this,I);const U=()=>he(I,{recursive:!0,force:!0});return{path:I,remove:U,[Symbol.dispose]:U}}function W(a,_,I){if(a=(0,o.normalizePath)(a),_=(0,o.normalizePath)(_),I&&I&l.COPYFILE_EXCL&&y(_))throw(0,f.UV)("EEXIST","copyFile",_);K.call(this,_,N(a)),(0,d.emitChange)(this,"rename",_.toString())}function $(a,_,I){const U=(0,t.fromFD)(this,a);let G=0;for(const te of _)G+=U.readSync(te,0,te.byteLength,I+G);return G}function H(a,_,I){const U=(0,t.fromFD)(this,a);let G=0;for(const te of _)G+=U.writeSync(new Uint8Array(te.buffer),0,te.byteLength,I+G);return G}function Se(a,_){return a=(0,o.normalizePath)(a),new w.Dir(a,this)}function se(a,_,I){a=(0,o.normalizePath)(a),_=(0,o.normalizePath)(_);const U=D.call(this,a);if(I?.errorOnExist&&y.call(this,_))throw(0,f.UV)("EEXIST","cp",_);switch(U.mode&l.S_IFMT){case l.S_IFDIR:if(!I?.recursive)throw(0,f.UV)("EISDIR","cp",a);fe.call(this,_,{recursive:!0});for(const G of le.call(this,a,{withFileTypes:!0}))I.filter&&!I.filter((0,u.join)(a,G.name),(0,u.join)(_,G.name))||se.call(this,(0,u.join)(a,G.name),(0,u.join)(_,G.name),I);break;case l.S_IFREG:case l.S_IFLNK:W.call(this,a,_);break;case l.S_IFBLK:case l.S_IFCHR:case l.S_IFIFO:case l.S_IFSOCK:default:throw(0,f.UV)("ENOSYS","cp",a)}I?.preserveTimestamps&&J.call(this,_,U.atime,U.mtime)}function X(a,_){a=(0,o.normalizePath)(a);const{fs:I}=(0,c.resolveMount)(a,this);return(0,c._statfs)(I,_?.bigint)}function O(a,_={}){a=Array.isArray(a)?a:[a];const{cwd:I="/",withFileTypes:U=!1,exclude:G=()=>!1}=_,te=a.map(o.globToRegex),Oe=[];function Ie(Re){const Te=le(Re,{withFileTypes:U,encoding:"utf8"});for(const Ae of Te){const xe=U?(0,u.join)(Ae.parentPath,Ae.name):Re+"/"+Ae;(typeof G!="function"?G.some(Ue=>(0,u.matchesGlob)(Ue,xe)):G(U?Ae:xe))||(S(xe).isDirectory()&&te.some(Ue=>Ue.source.includes(".*"))&&Ie(xe),te.some(Ue=>Ue.test(xe.replace(/^\/+/g,"")))&&Oe.push(U?Ae:xe.replace(/^\/+/g,"")))}}return Ie(I),Oe}}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{link:()=>y,mkdir:()=>m,open:()=>w,readdir:()=>e,readlink:()=>b,rename:()=>s,resolve:()=>d});var h=r(10),f=r(12),v=r(31),l=r(27),g=r(47),E=r(45),u=r(46),o=r(56),p=r(57),t=r(58),n=r(59),c=r(60),i=r(62);function d(S,D,R,T){D=E.resolve.call(S,D);try{const j=(0,c.resolveMount)(D,S),q=j.fs.statSync(j.path);if(!(0,g.isSymbolicLink)(q)||R)return{...j,fullPath:D,stats:q};const ae=E.resolve.call(S,(0,E.dirname)(D),b.call(S,D));return d(S,ae,R,T)}catch(j){if((0,h.setUVMessage)(Object.assign(j,{syscall:"stat",path:D})),R)throw j}const{base:A,dir:k}=(0,E.parse)(D),N=k=="/"?"/":d(S,k,!1,T).fullPath,K=(0,E.join)(N,A),V=(0,c.resolveMount)(K,S);let C;try{C=V.fs.statSync(V.path)}catch(j){if(j.code==="ENOENT")return{...V,fullPath:D};throw(0,h.setUVMessage)(Object.assign(j,{syscall:"stat",path:K}))}if(!(0,g.isSymbolicLink)(C))return{...V,fullPath:K,stats:C};const B=E.resolve.call(S,N,b.call(S,K));return d(S,B,!1,T)}function w(S,D){S=(0,u.normalizePath)(S);const R=(0,u.normalizeMode)(D.mode,420),T=n.parse(D.flag);S=D.preserveSymlinks?S:d(this,S).fullPath;const{fs:A,path:k}=(0,c.resolveMount)(S,this);let N;try{N=A.statSync(k)}catch{}if(!N){if(!(T&v.O_CREAT))throw(0,h.UV)("ENOENT","open",S);const V=A.statSync((0,E.dirname)(k));if(o.checkAccess&&!(0,g.hasAccess)(this,V,v.W_OK))throw(0,h.UV)("EACCES","open",S);if(!(0,g.isDirectory)(V))throw(0,h.UV)("ENOTDIR","open",S);if(!D.allowDirectory&&R&v.S_IFDIR)throw(0,h.UV)("EISDIR","open",S);if(o.checkAccess&&!(0,g.hasAccess)(this,V,v.W_OK))throw(0,h.UV)("EACCES","open",S);const{euid:C,egid:B}=(0,l.contextOf)(this).credentials,j=A.createFileSync(k,{mode:R,uid:V.mode&v.S_ISUID?V.uid:C,gid:V.mode&v.S_ISGID?V.gid:B});return new t.Handle(this,S,A,k,T,j)}if(o.checkAccess&&(!(0,g.hasAccess)(this,N,R)||!(0,g.hasAccess)(this,N,n.toMode(T))))throw(0,h.UV)("EACCES","open",S);if(T&v.O_EXCL)throw(0,h.UV)("EEXIST","open",S);const K=new t.Handle(this,S,A,k,T,N);if(!D.allowDirectory&&N.mode&v.S_IFDIR)throw(0,h.UV)("EISDIR","open",S);return T&v.O_TRUNC&&K.truncateSync(0),K}function b(S){S=(0,u.normalizePath)(S);const{fs:D,stats:R,path:T}=d(this,S,!0);if(!R)throw(0,h.UV)("ENOENT","readlink",S);if(o.checkAccess&&!(0,g.hasAccess)(this,R,v.R_OK))throw(0,h.UV)("EACCES","readlink",S);if(!(0,g.isSymbolicLink)(R))throw(0,h.UV)("EINVAL","readlink",S);const A=R.size,k=new Uint8Array(A);return D.readSync(T,k,0,A),(0,f.decodeUTF8)(k)}function m(S,D={}){S=(0,u.normalizePath)(S);const{fs:R,path:T}=d(this,S),{euid:A,egid:k}=(0,l.contextOf)(this).credentials,{mode:N=511,recursive:K}=D,V=(j,q,ae)=>{if(o.checkAccess&&!(0,g.hasAccess)(this,ae,v.W_OK))throw(0,h.UV)("EACCES","mkdir",(0,E.dirname)(j));const Q=R.mkdirSync(q,{mode:N,uid:ae.mode&v.S_ISUID?ae.uid:A,gid:ae.mode&v.S_ISGID?ae.gid:k});return(0,i.emitChange)(this,"rename",j),Q};if(!K){V(S,T,R.statSync((0,E.dirname)(T)));return}const C=[];for(let j=T,q=S;!R.existsSync(j);j=(0,E.dirname)(j),q=(0,E.dirname)(q))C.unshift({resolved:j,original:q});if(!C.length)return;const B=[R.statSync((0,E.dirname)(C[0].resolved))];for(const[j,q]of C.entries())B.push(V(q.original,q.resolved,B[j]));return C[0].original}function e(S,D={}){S=(0,u.normalizePath)(S);const{fs:R,path:T}=d(this,S),A=R.statSync(T);if(o.checkAccess&&!(0,g.hasAccess)(this,A,v.R_OK))throw(0,h.UV)("EACCES","readdir",S);if(!(0,g.isDirectory)(A))throw(0,h.UV)("ENOTDIR","readdir",S);const k=R.readdirSync(T),N=[],K=V=>{let C;try{C=R.statSync((0,E.join)(T,V))}catch(q){if(q.code=="ENOENT")return;throw q}const B=new p.Dirent;if(B.ino=C.ino,B.type=(0,p.ifToDt)(C.mode),B.path=V,B.name=(0,E.basename)(V),N.push(B),!(0,g.isDirectory)(C)||!D?.recursive)return;const j=R.readdirSync((0,E.join)(T,V));for(const q of j)K((0,E.join)(V,q))};for(const V of k)K(V);return N}function s(S,D){S=(0,u.normalizePath)(S),D=(0,u.normalizePath)(D);const R={syscall:"rename",path:S,dest:D},T=d(this,S,!0,R),A=(0,c.resolveMount)(D,this,R);if(T.fs.uuid!==A.fs.uuid)throw(0,h.UV)("EXDEV",R);if(A.path.startsWith(T.path+"/"))throw(0,h.UV)("EBUSY",R);if(!T.stats)throw(0,h.UV)("ENOENT",R);const k=T.fs,N=k.statSync((0,E.dirname)(T.path)),K=k.statSync((0,E.dirname)(A.path));let V;try{V=k.statSync(A.path)}catch(C){if(C.code!="ENOENT")throw C}if(o.checkAccess&&(!(0,g.hasAccess)(this,N,v.R_OK)||!(0,g.hasAccess)(this,K,v.W_OK)))throw(0,h.UV)("EACCES",R);if(V&&!(0,g.isDirectory)(T.stats)&&(0,g.isDirectory)(V))throw(0,h.UV)("EISDIR",R);if(V&&(0,g.isDirectory)(T.stats)&&!(0,g.isDirectory)(V))throw(0,h.UV)("ENOTDIR",R);T.fs.renameSync(T.path,A.path),(0,i.emitChange)(this,"rename",S),(0,i.emitChange)(this,"change",D)}function y(S,D){S=(0,u.normalizePath)(S),D=(0,u.normalizePath)(D);const R={syscall:"link",path:D,dest:S},{fs:T,path:A}=(0,c.resolveMount)(S,this,R),k=(0,c.resolveMount)(D,this,R);if(T.uuid!==k.fs.uuid)throw(0,h.UV)("EXDEV",R);const N=T.statSync(A);if(o.checkAccess){if(!(0,g.hasAccess)(this,N,v.R_OK))throw(0,h.UV)("EACCES",R);const K=T.statSync((0,E.dirname)(A));if(!(0,g.hasAccess)(this,K,v.R_OK))throw(0,h.UV)("EACCES",R);const V=T.statSync((0,E.dirname)(k.path));if(!(0,g.hasAccess)(this,V,v.W_OK))throw(0,h.UV)("EACCES",R)}return T.linkSync(A,k.path)}}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{Dir:()=>p,Dirent:()=>o});var h=r(4),f=r(10),v=r(24),l=r(45),g=r(57),E=r(54),u=r(63);class o{ino;type;_name;get name(){const n=h.Buffer.from(this._name);return this._encoding=="buffer"?n:n.toString(this._encoding)}_encoding;_parentPath;get parentPath(){return this._parentPath}get path(){return(0,v.warn)("Dirent.path was removed in Node v24, use parentPath instead"),this._parentPath}static from(n,c){const i=new o,{base:d,dir:w}=(0,l.parse)(n.path);return i._parentPath=w||".",i._name=d,i.ino=n.ino,i.type=n.type,i._encoding=c,i}isFile(){return this.type===g.DirType.REG}isDirectory(){return this.type===g.DirType.DIR}isBlockDevice(){return this.type===g.DirType.BLK}isCharacterDevice(){return this.type===g.DirType.CHR}isSymbolicLink(){return this.type===g.DirType.LNK}isFIFO(){return this.type===g.DirType.FIFO}isSocket(){return this.type===g.DirType.SOCK}}class p{path;context;closed=!1;checkClosed(){if(this.closed)throw(0,f.withErrno)("EBADF","Can not use closed Dir")}_entries;constructor(n,c){this.path=n,this.context=c}close(n){if(this.closed=!0,!n)return Promise.resolve();n(null)}closeSync(){this.closed=!0}async _read(){return this.checkClosed(),this._entries??=await E.readdir.call(this.context,this.path,{withFileTypes:!0}),this._entries.length?this._entries.shift()??null:null}read(n){if(!n)return this._read();this._read().then(c=>n(null,c))}readSync(){return this.checkClosed(),this._entries??=u.readdirSync.call(this.context,this.path,{withFileTypes:!0}),this._entries.length?this._entries.shift()??null:null}async next(){const n=await this._read();return n?{done:!1,value:n}:(await this.close(),{done:!0,value:void 0})}[Symbol.asyncIterator](){return this}[Symbol.dispose](){this.closed||this.closeSync()}async[Symbol.asyncDispose](){this.closed||await this.close()}}}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{Interface:()=>v,clearLine:()=>g,clearScreenDown:()=>E,createInterface:()=>l,emitKeypressEvents:()=>n,moveCursor:()=>u});var h=r(14),f=r(24);class v extends h.EventEmitter{input;output;terminal;line="";_cursor=0;get cursor(){return this._cursor}_buffer="";_closed=!1;_paused=!1;_prompt="";_history=[];_historyIndex=-1;_currentLine="";constructor(i,d,w,b=!1){super(),this.input=i,this.output=d,this.terminal=b,this.input.on("data",this._onData),this.input.on("end",this.close.bind(this)),this.input.on("close",this.close.bind(this))}_onData=i=>{if(!(this._paused||this._closed)){this._buffer+=typeof i=="string"?i:i.toString("utf8");for(let d=this._buffer.indexOf(`
`);d>=0;d=this._buffer.indexOf(`
`)){let w=this._buffer.substring(0,d);w.endsWith("\r")&&(w=w.substring(0,w.length-1)),this._buffer=this._buffer.substring(d+1),this.line=w,w.trim()&&!w.trim().match(/^\s*$/)&&this._history.at(-1)!=w&&(this._history.push(w),this._historyIndex=this._history.length,this.emit("history",this._history)),this.emit("line",w)}}};close(){if(!this._closed){if(this._closed=!0,this.input?.removeAllListeners?.(),this._buffer.length){const i=this._buffer;this._buffer="",this.line=i,this.emit("line",i)}this.emit("history",this._history),this.emit("close"),this.removeAllListeners()}}pause(){return this._paused?this:(this._paused=!0,"pause"in this.input&&this.input.pause(),this.emit("pause"),this)}resume(){return this._paused?(this._paused=!1,"resume"in this.input&&this.input.resume(),this.emit("resume"),this):this}setPrompt(i){this._prompt=i}getPrompt(){return this._prompt}prompt(i){if(!this.output)return;if(!i){this.output.write(this._prompt);return}const{cols:d}=this.getCursorPos();this.output.write(this._prompt),this._cursor=d}write(i,d){if(!this._closed){if(i){const w=typeof i=="string"?i:i.toString("utf8");this._onData(w)}if(!(!d||!this.terminal))switch((d.ctrl?"^":"")+d.name){case"^c":this.emit("SIGINT");break;case"^z":this.emit("SIGTSTP");break;case"^q":this.emit("SIGCONT");break;case"home":case"^a":if(!this.output)return;u(this.output,-this._cursor,0),this._cursor=0,this._cursor=0;break;case"^e":case"end":{if(!this.output)return;const w=this.line.length-this._cursor;if(!w)return;u(this.output,w,0),this._cursor=this.line.length,this._cursor=this.line.length;break}case"^k":{if(!this.output||this._cursor>=this.line.length)return;const w=this.line.slice(0,this._cursor);g(this.output,1),this.line=w;break}case"^u":{if(!this.output||!this._cursor)return;const w=this.line.slice(this._cursor);g(this.output,0),u(this.output,0,0),this.output.write(this._prompt+w),this.line=w,this._cursor=0,this._cursor=0;break}case"^w":{if(!this.output||!this._cursor)return;let w=this._cursor-1;for(;w>=0&&this.line[w]===" ";)w--;for(;w>=0&&this.line[w]!==" ";)w--;const b=this.line.slice(0,w+1)+this.line.slice(this._cursor),m=w+1;this._renderLine(b),this._cursor=m,this._cursor=m,u(this.output,-b.length,0),u(this.output,m,0);break}case"^return":case"^enter":this._onData(`
`);break;case"return":case"enter":this._onData((i?typeof i=="string"?i:i.toString("utf8"):"")+`
`);break;case"up":case"down":{if(!this.output||!this._history.length)return;if(this._historyIndex===this._history.length&&(this._currentLine=this.line||""),d.name=="up"&&this._historyIndex>0)this._historyIndex--;else if(d.name=="down"&&this._historyIndex<this._history.length-1)this._historyIndex++;else if(d.name=="down"&&this._historyIndex==this._history.length-1){this._historyIndex=this._history.length,this._renderLine(this._currentLine);return}else return;const w=this._history[this._historyIndex];this._renderLine(w);break}case"left":case"right":{const w=d.name=="left"?-1:1;if(!this.output)return;const b=Math.max(0,Math.min(this.line.length,this._cursor+w));if(b==this._cursor)return;u(this.output,w,0),this._cursor=b,this._cursor=b;break}case"backspace":{if(!this.output||!this._cursor)return;const w=this.line.slice(0,this._cursor-1)+this.line.slice(this._cursor);this._renderLine(w),this._cursor=--this._cursor,this._cursor>0&&(u(this.output,-this._cursor,0),u(this.output,this._cursor,0));break}case"delete":{if(!this.output||this._cursor>=this.line.length)return;const w=this.line.slice(0,this._cursor)+this.line.slice(this._cursor+1);g(this.output,0),u(this.output,0,0),this.output.write(this._prompt+w),this.line=w,u(this.output,-w.length,0),u(this.output,this._cursor,0);break}}}}_renderLine(i){this.output&&(g(this.output,0),u(this.output,0,0),this.output.write(this._prompt+i),this.line=i,this._cursor=i.length,this._cursor=i.length)}question(i,d,w){const b=typeof d=="function"?d:w;if(this._closed||!this.output){b("");return}this.output.write(i),this.once("line",b)}getCursorPos(){return{rows:0,cols:this.cursor}}prependListener(i,d){const w=this.listeners(i);return this.removeAllListeners(i),this.on(i,d),w.forEach(this.on.bind(this,i)),this}prependOnceListener(i,d){const w=this.listeners(i);return this.removeAllListeners(i),this.once(i,d),w.forEach(this.on.bind(this,i)),this}setMaxListeners(){return(0,f.warn)("Interface.prototype.setMaxListeners is not supported"),this}getMaxListeners(){return(0,f.warn)("Interface.prototype.getMaxListeners is not supported"),10}[Symbol.asyncIterator](){let i=!1;return{next:async()=>{if(i)return{done:i,value:void 0};const{resolve:d,promise:w}=Promise.withResolvers();return this.once("line",b=>d({value:b,done:!1})),this.once("close",()=>{i=!0,d({value:void 0,done:i})}),w},return:async d=>i?{done:i,value:d}:(i=!0,this.close(),{done:i,value:d}),throw:async d=>{throw i||(i=!0,this.close()),d},[Symbol.asyncIterator](){return this},[Symbol.asyncDispose]:async()=>{i||(i=!0,this.close())}}}[Symbol.dispose](){this.close()}async[Symbol.asyncDispose](){if(this._closed)return;const{resolve:i,promise:d}=Promise.withResolvers();this.once("close",()=>i()),this.close(),await d}rawListeners(i){return this.listeners(i)}}function l(c,i,d,w){return"input"in c?new v(c.input,c.output,c.completer,c.terminal):new v(c,i,d,w)}function g(c,i){return c.write(i>=0?"\r\x1B[K":"\x1B[K"),!0}function E(c){return c.write?(c.write("\x1B[J"),!0):!1}function u(c,i,d){if(!c.write)return!1;let w="";return i<0?w+=`\x1B[${-i}D`:i>0&&(w+=`\x1B[${i}C`),d<0?w+=`\x1B[${-d}A`:d>0&&(w+=`\x1B[${d}B`),w&&c.write(w),!0}const o={"\r":"return","\n":"enter","	":"tab","\b":"backspace","\x7F":"backspace","\x1B":"escape"," ":"space"},p={"[A":{name:"up"},"[B":{name:"down"},"[C":{name:"right"},"[D":{name:"left"},"[E":{name:"clear"},"[F":{name:"end"},"[H":{name:"home"},"[P":{name:"f1"},"[Q":{name:"f2"},"[R":{name:"f3"},"[S":{name:"f4"},OA:{name:"up"},OB:{name:"down"},OC:{name:"right"},OD:{name:"left"},OE:{name:"clear"},OF:{name:"end"},OH:{name:"home"},OP:{name:"f1"},OQ:{name:"f2"},OR:{name:"f3"},OS:{name:"f4"},"[1~":{name:"home"},"[2~":{name:"insert"},"[3~":{name:"delete"},"[4~":{name:"end"},"[5~":{name:"pageup"},"[6~":{name:"pagedown"},"[7~":{name:"home"},"[8~":{name:"end"},"[11~":{name:"f1"},"[12~":{name:"f2"},"[13~":{name:"f3"},"[14~":{name:"f4"},"[15~":{name:"f5"},"[17~":{name:"f6"},"[18~":{name:"f7"},"[19~":{name:"f8"},"[20~":{name:"f9"},"[21~":{name:"f10"},"[23~":{name:"f11"},"[24~":{name:"f12"},"[200~":{name:"paste-start"},"[201~":{name:"paste-end"},"[a":{name:"up",shift:!0},"[b":{name:"down",shift:!0},"[c":{name:"right",shift:!0},"[d":{name:"left",shift:!0},"[e":{name:"clear",shift:!0},"[[A":{name:"f1"},"[[B":{name:"f2"},"[[C":{name:"f3"},"[[D":{name:"f4"},"[[E":{name:"f5"},"[[5~":{name:"pageup"},"[[6~":{name:"pagedown"},"[2$":{name:"insert",shift:!0},"[3$":{name:"delete",shift:!0},"[5$":{name:"pageup",shift:!0},"[6$":{name:"pagedown",shift:!0},"[7$":{name:"home",shift:!0},"[8$":{name:"end",shift:!0},Oa:{name:"up",ctrl:!0},Ob:{name:"down",ctrl:!0},Oc:{name:"right",ctrl:!0},Od:{name:"left",ctrl:!0},Oe:{name:"clear",ctrl:!0},"[2^":{name:"insert",ctrl:!0},"[3^":{name:"delete",ctrl:!0},"[5^":{name:"pageup",ctrl:!0},"[6^":{name:"pagedown",ctrl:!0},"[7^":{name:"home",ctrl:!0},"[8^":{name:"end",ctrl:!0},"[Z":{name:"tab",shift:!0},undefined:{name:"undefined"}};function t(c){const i={sequence:c,name:void 0,ctrl:!1,meta:!1,shift:!1};if(c in o)return i.name=o[c],i.meta=c.startsWith("\x1B"),i;if(c.length==1&&c.charCodeAt(0)>=32)return i.name=c.toLowerCase(),i.shift=c>="A"&&c<="Z",i;if(c.length==1)return i.ctrl=!0,i.name=String.fromCharCode(c.charCodeAt(0)+64).toLowerCase(),i;if(c.length==2&&c[0]=="\x1B"&&c[1]>=" ")return i.meta=!0,i.name=c[1].toLowerCase(),i.shift=c[1]>="A"&&c[1]<="Z",i;if(!c.startsWith("\x1B"))return i;const d=c.slice(1);if(d in p)return Object.assign(i,p[d]),i;if(!d.startsWith("[")&&!d.startsWith("O")||!d.length)return i.meta=!0,i;const w=/^\[((\d+)?(;\d+)?([~^$A-Za-z]))\]?$/.exec(d);if(w){const m=w[3]?parseInt(w[3].slice(1),10):1,e="["+(w[2]||"")+w[4];if(e in p)return Object.assign(i,p[e]),i.shift=!!(m&1),i.meta=!!(m&2)||!!(m&8),i.ctrl=!!(m&4),i}const[,b]=/^\[(\d{3})~$/.exec(d)||[];if(b){const m=`[${b}~`;if(m in p)return Object.assign(i,p[m]),i}return i.meta=!0,i}function n(c,i){c.on("data",d=>{const w=d.toString("utf8");c.emit("keypress",w,t(w))}),i&&c.on("data",d=>{d.toString("utf8").includes("")&&i.emit("SIGINT")})}}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{ReadStream:()=>l,WriteStream:()=>g});var h=r(10),f=r(24),v=r(68);class l extends v.Readable{pending=!0;_path="<unknown>";_bytesRead=0;reader;ready;constructor(u={},o){super({...u,encoding:u.encoding??void 0}),this.ready=Promise.resolve(o).then(p=>{this._path=p.vfs.path;const t=p.readableWebStream({start:u.start,end:u.end});this.reader=t.getReader(),this.pending=!1}).catch(p=>{this.destroy(p)})}async _read(){try{if(await this.ready,!this.reader)return;const{done:u,value:o}=await this.reader.read();if(u){this.push(null);return}this._bytesRead+=o.byteLength,this.push(o)}catch(u){this.destroy(new h.Exception(h.Errno.EIO,u.toString()))}}close(u=()=>null){try{this.destroy(),this.emit("close"),u(null)}catch(o){u(new h.Exception(h.Errno.EIO,o.toString()))}}get path(){return this._path}get bytesRead(){return this._bytesRead}wrap(u){return super.wrap(u),this}}class g extends v.Writable{pending=!0;_path="<unknown>";_bytesWritten=0;writer;ready;constructor(u={},o){super(u),this.ready=Promise.resolve(o).then(p=>{this._path=p.vfs.path;const t=p.writableWebStream({start:u.start});this.writer=t.getWriter(),this.pending=!1}).catch(p=>this.destroy(p))}async _write(u,o,p){if(await this.ready,!this.writer)return p((0,f.warn)((0,h.UV)("EAGAIN","write",this._path)));if(o!="buffer")return p((0,f.warn)((0,h.UV)("ENOTSUP","write",this._path)));const t=new Uint8Array(u.buffer,u.byteOffset,u.byteLength);try{await this.writer.write(t),this._bytesWritten+=u.byteLength,p()}catch(n){p(new h.Exception(h.Errno.EIO,n.toString()))}}async _final(u){if(await this.ready,!this.writer)return u();try{await this.writer.close(),u()}catch(o){u(new h.Exception(h.Errno.EIO,o.toString()))}}close(u=()=>null){try{this.destroy(),this.emit("close"),u(null)}catch(o){u(new h.Exception(h.Errno.EIO,o.toString()))}}get path(){return this._path}get bytesWritten(){return this._bytesWritten}}}),((Y,P,r)=>{"use strict";const h=r(69),f=r(96),v=h.Readable.destroy;Y.exports=h.Readable,Y.exports._uint8ArrayToBuffer=h._uint8ArrayToBuffer,Y.exports._isUint8Array=h._isUint8Array,Y.exports.isDisturbed=h.isDisturbed,Y.exports.isErrored=h.isErrored,Y.exports.isReadable=h.isReadable,Y.exports.Readable=h.Readable,Y.exports.Writable=h.Writable,Y.exports.Duplex=h.Duplex,Y.exports.Transform=h.Transform,Y.exports.PassThrough=h.PassThrough,Y.exports.addAbortSignal=h.addAbortSignal,Y.exports.finished=h.finished,Y.exports.destroy=h.destroy,Y.exports.destroy=v,Y.exports.pipeline=h.pipeline,Y.exports.compose=h.compose,Object.defineProperty(h,"promises",{configurable:!0,enumerable:!0,get(){return f}}),Y.exports.Stream=h.Stream,Y.exports.default=Y.exports}),((Y,P,r)=>{"use strict";const{Buffer:h}=r(4),{ObjectDefineProperty:f,ObjectKeys:v,ReflectApply:l}=r(70),{promisify:{custom:g}}=r(71),{streamReturningOperators:E,promiseReturningOperators:u}=r(76),{codes:{ERR_ILLEGAL_CONSTRUCTOR:o}}=r(73),p=r(80),{setDefaultHighWaterMark:t,getDefaultHighWaterMark:n}=r(88),{pipeline:c}=r(81),{destroyer:i}=r(82),d=r(78),w={},b=r(96),m=r(79),e=Y.exports=r(85).Stream;e.isDestroyed=m.isDestroyed,e.isDisturbed=m.isDisturbed,e.isErrored=m.isErrored,e.isReadable=m.isReadable,e.isWritable=m.isWritable,e.Readable=r(84);for(const y of v(E)){let D=function(...R){if(new.target)throw o();return e.Readable.from(l(S,this,R))};const S=E[y];f(D,"name",{__proto__:null,value:S.name}),f(D,"length",{__proto__:null,value:S.length}),f(e.Readable.prototype,y,{__proto__:null,value:D,enumerable:!1,configurable:!0,writable:!0})}for(const y of v(u)){let D=function(...R){if(new.target)throw o();return l(S,this,R)};const S=u[y];f(D,"name",{__proto__:null,value:S.name}),f(D,"length",{__proto__:null,value:S.length}),f(e.Readable.prototype,y,{__proto__:null,value:D,enumerable:!1,configurable:!0,writable:!0})}e.Writable=r(92),e.Duplex=r(83),e.Transform=r(95),e.PassThrough=r(94),e.pipeline=c;const{addAbortSignal:s}=r(86);e.addAbortSignal=s,e.finished=d,e.destroy=i,e.compose=p,e.setDefaultHighWaterMark=t,e.getDefaultHighWaterMark=n,f(e,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return b}}),f(c,g,{__proto__:null,enumerable:!0,get(){return b.pipeline}}),f(d,g,{__proto__:null,enumerable:!0,get(){return b.finished}}),e.Stream=e,e._isUint8Array=function(S){return S instanceof Uint8Array},e._uint8ArrayToBuffer=function(S){return h.from(S.buffer,S.byteOffset,S.byteLength)}}),(Y=>{"use strict";class P extends Error{constructor(h){if(!Array.isArray(h))throw new TypeError(`Expected input to be an Array, got ${typeof h}`);let f="";for(let v=0;v<h.length;v++)f+=`    ${h[v].stack}
`;super(f),this.name="AggregateError",this.errors=h}}Y.exports={AggregateError:P,ArrayIsArray(r){return Array.isArray(r)},ArrayPrototypeIncludes(r,h){return r.includes(h)},ArrayPrototypeIndexOf(r,h){return r.indexOf(h)},ArrayPrototypeJoin(r,h){return r.join(h)},ArrayPrototypeMap(r,h){return r.map(h)},ArrayPrototypePop(r,h){return r.pop(h)},ArrayPrototypePush(r,h){return r.push(h)},ArrayPrototypeSlice(r,h,f){return r.slice(h,f)},Error,FunctionPrototypeCall(r,h,...f){return r.call(h,...f)},FunctionPrototypeSymbolHasInstance(r,h){return Function.prototype[Symbol.hasInstance].call(r,h)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(r,h){return Object.defineProperties(r,h)},ObjectDefineProperty(r,h,f){return Object.defineProperty(r,h,f)},ObjectGetOwnPropertyDescriptor(r,h){return Object.getOwnPropertyDescriptor(r,h)},ObjectKeys(r){return Object.keys(r)},ObjectSetPrototypeOf(r,h){return Object.setPrototypeOf(r,h)},Promise,PromisePrototypeCatch(r,h){return r.catch(h)},PromisePrototypeThen(r,h,f){return r.then(h,f)},PromiseReject(r){return Promise.reject(r)},PromiseResolve(r){return Promise.resolve(r)},ReflectApply:Reflect.apply,RegExpPrototypeTest(r,h){return r.test(h)},SafeSet:Set,String,StringPrototypeSlice(r,h,f){return r.slice(h,f)},StringPrototypeToLowerCase(r){return r.toLowerCase()},StringPrototypeToUpperCase(r){return r.toUpperCase()},StringPrototypeTrim(r){return r.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(r,h,f){return r.set(h,f)},Boolean,Uint8Array}}),((Y,P,r)=>{"use strict";const h=r(4),{format:f,inspect:v}=r(72),{codes:{ERR_INVALID_ARG_TYPE:l}}=r(73),{kResistStopPropagation:g,AggregateError:E,SymbolDispose:u}=r(70),o=globalThis.AbortSignal||r(74).AbortSignal,p=globalThis.AbortController||r(74).AbortController,t=Object.getPrototypeOf(async function(){}).constructor,n=globalThis.Blob||h.Blob,c=typeof n<"u"?function(b){return b instanceof n}:function(b){return!1},i=(w,b)=>{if(w!==void 0&&(w===null||typeof w!="object"||!("aborted"in w)))throw new l(b,"AbortSignal",w)},d=(w,b)=>{if(typeof w!="function")throw new l(b,"Function",w)};Y.exports={AggregateError:E,kEmptyObject:Object.freeze({}),once(w){let b=!1;return function(...m){b||(b=!0,w.apply(this,m))}},createDeferredPromise:function(){let w,b;return{promise:new Promise((e,s)=>{w=e,b=s}),resolve:w,reject:b}},promisify(w){return new Promise((b,m)=>{w((e,...s)=>e?m(e):b(...s))})},debuglog(){return function(){}},format:f,inspect:v,types:{isAsyncFunction(w){return w instanceof t},isArrayBufferView(w){return ArrayBuffer.isView(w)}},isBlob:c,deprecate(w,b){return w},addAbortListener:r(75).addAbortListener||function(b,m){if(b===void 0)throw new l("signal","AbortSignal",b);i(b,"signal"),d(m,"listener");let e;return b.aborted?queueMicrotask(()=>m()):(b.addEventListener("abort",m,{__proto__:null,once:!0,[g]:!0}),e=()=>{b.removeEventListener("abort",m)}),{__proto__:null,[u](){var s;(s=e)===null||s===void 0||s()}}},AbortSignalAny:o.any||function(b){if(b.length===1)return b[0];const m=new p,e=()=>m.abort();return b.forEach(s=>{i(s,"signals"),s.addEventListener("abort",e,{once:!0})}),m.signal.addEventListener("abort",()=>{b.forEach(s=>s.removeEventListener("abort",e))},{once:!0}),m.signal}},Y.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}),(Y=>{"use strict";Y.exports={format(P,...r){return P.replace(/%([sdifj])/g,function(...[h,f]){const v=r.shift();return f==="f"?v.toFixed(6):f==="j"?JSON.stringify(v):f==="s"&&typeof v=="object"?`${v.constructor!==Object?v.constructor.name:""} {}`.trim():v.toString()})},inspect(P){switch(typeof P){case"string":if(P.includes("'"))if(P.includes('"')){if(!P.includes("`")&&!P.includes("${"))return`\`${P}\``}else return`"${P}"`;return`'${P}'`;case"number":return isNaN(P)?"NaN":Object.is(P,-0)?String(P):P;case"bigint":return`${String(P)}n`;case"boolean":case"undefined":return String(P);case"object":return"{}"}}}}),((Y,P,r)=>{"use strict";const{format:h,inspect:f}=r(72),{AggregateError:v}=r(70),l=globalThis.AggregateError||v,g=Symbol("kIsNodeError"),E=["string","function","number","object","Function","Object","boolean","bigint","symbol"],u=/^([A-Z][a-z0-9]*)+$/,o="__node_internal_",p={};function t(m,e){if(!m)throw new p.ERR_INTERNAL_ASSERTION(e)}function n(m){let e="",s=m.length;const y=m[0]==="-"?1:0;for(;s>=y+4;s-=3)e=`_${m.slice(s-3,s)}${e}`;return`${m.slice(0,s)}${e}`}function c(m,e,s){if(typeof e=="function")return t(e.length<=s.length,`Code: ${m}; The provided arguments length (${s.length}) does not match the required ones (${e.length}).`),e(...s);const y=(e.match(/%[dfijoOs]/g)||[]).length;return t(y===s.length,`Code: ${m}; The provided arguments length (${s.length}) does not match the required ones (${y}).`),s.length===0?e:h(e,...s)}function i(m,e,s){s||(s=Error);class y extends s{constructor(...D){super(c(m,e,D))}toString(){return`${this.name} [${m}]: ${this.message}`}}Object.defineProperties(y.prototype,{name:{value:s.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${m}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),y.prototype.code=m,y.prototype[g]=!0,p[m]=y}function d(m){const e=o+m.name;return Object.defineProperty(m,"name",{value:e}),m}function w(m,e){if(m&&e&&m!==e){if(Array.isArray(e.errors))return e.errors.push(m),e;const s=new l([e,m],e.message);return s.code=e.code,s}return m||e}class b extends Error{constructor(e="The operation was aborted",s=void 0){if(s!==void 0&&typeof s!="object")throw new p.ERR_INVALID_ARG_TYPE("options","Object",s);super(e,s),this.code="ABORT_ERR",this.name="AbortError"}}i("ERR_ASSERTION","%s",Error),i("ERR_INVALID_ARG_TYPE",(m,e,s)=>{t(typeof m=="string","'name' must be a string"),Array.isArray(e)||(e=[e]);let y="The ";m.endsWith(" argument")?y+=`${m} `:y+=`"${m}" ${m.includes(".")?"property":"argument"} `,y+="must be ";const S=[],D=[],R=[];for(const A of e)t(typeof A=="string","All expected entries have to be of type string"),E.includes(A)?S.push(A.toLowerCase()):u.test(A)?D.push(A):(t(A!=="object",'The value "object" should be written as "Object"'),R.push(A));if(D.length>0){const A=S.indexOf("object");A!==-1&&(S.splice(S,A,1),D.push("Object"))}if(S.length>0){switch(S.length){case 1:y+=`of type ${S[0]}`;break;case 2:y+=`one of type ${S[0]} or ${S[1]}`;break;default:{const A=S.pop();y+=`one of type ${S.join(", ")}, or ${A}`}}(D.length>0||R.length>0)&&(y+=" or ")}if(D.length>0){switch(D.length){case 1:y+=`an instance of ${D[0]}`;break;case 2:y+=`an instance of ${D[0]} or ${D[1]}`;break;default:{const A=D.pop();y+=`an instance of ${D.join(", ")}, or ${A}`}}R.length>0&&(y+=" or ")}switch(R.length){case 0:break;case 1:R[0].toLowerCase()!==R[0]&&(y+="an "),y+=`${R[0]}`;break;case 2:y+=`one of ${R[0]} or ${R[1]}`;break;default:{const A=R.pop();y+=`one of ${R.join(", ")}, or ${A}`}}if(s==null)y+=`. Received ${s}`;else if(typeof s=="function"&&s.name)y+=`. Received function ${s.name}`;else if(typeof s=="object"){var T;if((T=s.constructor)!==null&&T!==void 0&&T.name)y+=`. Received an instance of ${s.constructor.name}`;else{const A=f(s,{depth:-1});y+=`. Received ${A}`}}else{let A=f(s,{colors:!1});A.length>25&&(A=`${A.slice(0,25)}...`),y+=`. Received type ${typeof s} (${A})`}return y},TypeError),i("ERR_INVALID_ARG_VALUE",(m,e,s="is invalid")=>{let y=f(e);return y.length>128&&(y=y.slice(0,128)+"..."),`The ${m.includes(".")?"property":"argument"} '${m}' ${s}. Received ${y}`},TypeError),i("ERR_INVALID_RETURN_VALUE",(m,e,s)=>{var y;const S=s!=null&&(y=s.constructor)!==null&&y!==void 0&&y.name?`instance of ${s.constructor.name}`:`type ${typeof s}`;return`Expected ${m} to be returned from the "${e}" function but got ${S}.`},TypeError),i("ERR_MISSING_ARGS",(...m)=>{t(m.length>0,"At least one arg needs to be specified");let e;const s=m.length;switch(m=(Array.isArray(m)?m:[m]).map(y=>`"${y}"`).join(" or "),s){case 1:e+=`The ${m[0]} argument`;break;case 2:e+=`The ${m[0]} and ${m[1]} arguments`;break;default:{const y=m.pop();e+=`The ${m.join(", ")}, and ${y} arguments`}break}return`${e} must be specified`},TypeError),i("ERR_OUT_OF_RANGE",(m,e,s)=>{t(e,'Missing "range" argument');let y;if(Number.isInteger(s)&&Math.abs(s)>4294967296)y=n(String(s));else if(typeof s=="bigint"){y=String(s);const S=BigInt(2)**BigInt(32);(s>S||s<-S)&&(y=n(y)),y+="n"}else y=f(s);return`The value of "${m}" is out of range. It must be ${e}. Received ${y}`},RangeError),i("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),i("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),i("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),i("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),i("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),i("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),i("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),i("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),i("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),i("ERR_STREAM_WRITE_AFTER_END","write after end",Error),i("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),Y.exports={AbortError:b,aggregateTwoErrors:d(w),hideStackFrames:d,codes:p}}),(Y=>{"use strict";const{AbortController:P,AbortSignal:r}=typeof self<"u"?self:typeof window<"u"?window:void 0;Y.exports=P,Y.exports.AbortSignal=r,Y.exports.default=P}),(Y=>{"use strict";var P=typeof Reflect=="object"?Reflect:null,r=P&&typeof P.apply=="function"?P.apply:function(y,S,D){return Function.prototype.apply.call(y,S,D)},h;P&&typeof P.ownKeys=="function"?h=P.ownKeys:Object.getOwnPropertySymbols?h=function(y){return Object.getOwnPropertyNames(y).concat(Object.getOwnPropertySymbols(y))}:h=function(y){return Object.getOwnPropertyNames(y)};function f(s){console&&console.warn&&console.warn(s)}var v=Number.isNaN||function(y){return y!==y};function l(){l.init.call(this)}Y.exports=l,Y.exports.once=b,l.EventEmitter=l,l.prototype._events=void 0,l.prototype._eventsCount=0,l.prototype._maxListeners=void 0;var g=10;function E(s){if(typeof s!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof s)}Object.defineProperty(l,"defaultMaxListeners",{enumerable:!0,get:function(){return g},set:function(s){if(typeof s!="number"||s<0||v(s))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+s+".");g=s}}),l.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},l.prototype.setMaxListeners=function(y){if(typeof y!="number"||y<0||v(y))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+y+".");return this._maxListeners=y,this};function u(s){return s._maxListeners===void 0?l.defaultMaxListeners:s._maxListeners}l.prototype.getMaxListeners=function(){return u(this)},l.prototype.emit=function(y){for(var S=[],D=1;D<arguments.length;D++)S.push(arguments[D]);var R=y==="error",T=this._events;if(T!==void 0)R=R&&T.error===void 0;else if(!R)return!1;if(R){var A;if(S.length>0&&(A=S[0]),A instanceof Error)throw A;var k=new Error("Unhandled error."+(A?" ("+A.message+")":""));throw k.context=A,k}var N=T[y];if(N===void 0)return!1;if(typeof N=="function")r(N,this,S);else for(var K=N.length,V=i(N,K),D=0;D<K;++D)r(V[D],this,S);return!0};function o(s,y,S,D){var R,T,A;if(E(S),T=s._events,T===void 0?(T=s._events=Object.create(null),s._eventsCount=0):(T.newListener!==void 0&&(s.emit("newListener",y,S.listener?S.listener:S),T=s._events),A=T[y]),A===void 0)A=T[y]=S,++s._eventsCount;else if(typeof A=="function"?A=T[y]=D?[S,A]:[A,S]:D?A.unshift(S):A.push(S),R=u(s),R>0&&A.length>R&&!A.warned){A.warned=!0;var k=new Error("Possible EventEmitter memory leak detected. "+A.length+" "+String(y)+" listeners added. Use emitter.setMaxListeners() to increase limit");k.name="MaxListenersExceededWarning",k.emitter=s,k.type=y,k.count=A.length,f(k)}return s}l.prototype.addListener=function(y,S){return o(this,y,S,!1)},l.prototype.on=l.prototype.addListener,l.prototype.prependListener=function(y,S){return o(this,y,S,!0)};function p(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function t(s,y,S){var D={fired:!1,wrapFn:void 0,target:s,type:y,listener:S},R=p.bind(D);return R.listener=S,D.wrapFn=R,R}l.prototype.once=function(y,S){return E(S),this.on(y,t(this,y,S)),this},l.prototype.prependOnceListener=function(y,S){return E(S),this.prependListener(y,t(this,y,S)),this},l.prototype.removeListener=function(y,S){var D,R,T,A,k;if(E(S),R=this._events,R===void 0)return this;if(D=R[y],D===void 0)return this;if(D===S||D.listener===S)--this._eventsCount===0?this._events=Object.create(null):(delete R[y],R.removeListener&&this.emit("removeListener",y,D.listener||S));else if(typeof D!="function"){for(T=-1,A=D.length-1;A>=0;A--)if(D[A]===S||D[A].listener===S){k=D[A].listener,T=A;break}if(T<0)return this;T===0?D.shift():d(D,T),D.length===1&&(R[y]=D[0]),R.removeListener!==void 0&&this.emit("removeListener",y,k||S)}return this},l.prototype.off=l.prototype.removeListener,l.prototype.removeAllListeners=function(y){var S,D,R;if(D=this._events,D===void 0)return this;if(D.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):D[y]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete D[y]),this;if(arguments.length===0){var T=Object.keys(D),A;for(R=0;R<T.length;++R)A=T[R],A!=="removeListener"&&this.removeAllListeners(A);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(S=D[y],typeof S=="function")this.removeListener(y,S);else if(S!==void 0)for(R=S.length-1;R>=0;R--)this.removeListener(y,S[R]);return this};function n(s,y,S){var D=s._events;if(D===void 0)return[];var R=D[y];return R===void 0?[]:typeof R=="function"?S?[R.listener||R]:[R]:S?w(R):i(R,R.length)}l.prototype.listeners=function(y){return n(this,y,!0)},l.prototype.rawListeners=function(y){return n(this,y,!1)},l.listenerCount=function(s,y){return typeof s.listenerCount=="function"?s.listenerCount(y):c.call(s,y)},l.prototype.listenerCount=c;function c(s){var y=this._events;if(y!==void 0){var S=y[s];if(typeof S=="function")return 1;if(S!==void 0)return S.length}return 0}l.prototype.eventNames=function(){return this._eventsCount>0?h(this._events):[]};function i(s,y){for(var S=new Array(y),D=0;D<y;++D)S[D]=s[D];return S}function d(s,y){for(;y+1<s.length;y++)s[y]=s[y+1];s.pop()}function w(s){for(var y=new Array(s.length),S=0;S<y.length;++S)y[S]=s[S].listener||s[S];return y}function b(s,y){return new Promise(function(S,D){function R(A){s.removeListener(y,T),D(A)}function T(){typeof s.removeListener=="function"&&s.removeListener("error",R),S([].slice.call(arguments))}e(s,y,T,{once:!0}),y!=="error"&&m(s,R,{once:!0})})}function m(s,y,S){typeof s.on=="function"&&e(s,"error",y,S)}function e(s,y,S,D){if(typeof s.on=="function")D.once?s.once(y,S):s.on(y,S);else if(typeof s.addEventListener=="function")s.addEventListener(y,function R(T){D.once&&s.removeEventListener(y,R),S(T)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof s)}}),((Y,P,r)=>{"use strict";const h=globalThis.AbortController||r(74).AbortController,{codes:{ERR_INVALID_ARG_VALUE:f,ERR_INVALID_ARG_TYPE:v,ERR_MISSING_ARGS:l,ERR_OUT_OF_RANGE:g},AbortError:E}=r(73),{validateAbortSignal:u,validateInteger:o,validateObject:p}=r(77),t=r(70).Symbol("kWeak"),n=r(70).Symbol("kResistStopPropagation"),{finished:c}=r(78),i=r(80),{addAbortSignalNoValidate:d}=r(86),{isWritable:w,isNodeStream:b}=r(79),{deprecate:m}=r(71),{ArrayPrototypePush:e,Boolean:s,MathFloor:y,Number:S,NumberIsNaN:D,Promise:R,PromiseReject:T,PromiseResolve:A,PromisePrototypeThen:k,Symbol:N}=r(70),K=N("kEmpty"),V=N("kEof");function C(ee,ne){if(ne!=null&&p(ne,"options"),ne?.signal!=null&&u(ne.signal,"options.signal"),b(ee)&&!w(ee))throw new f("stream",ee,"must be writable");const ce=i(this,ee);return ne!=null&&ne.signal&&d(ne.signal,ce),ce}function B(ee,ne){if(typeof ee!="function")throw new v("fn",["Function","AsyncFunction"],ee);ne!=null&&p(ne,"options"),ne?.signal!=null&&u(ne.signal,"options.signal");let ce=1;ne?.concurrency!=null&&(ce=y(ne.concurrency));let de=ce-1;return ne?.highWaterMark!=null&&(de=y(ne.highWaterMark)),o(ce,"options.concurrency",1),o(de,"options.highWaterMark",0),de+=ce,async function*(){const J=r(71).AbortSignalAny([ne?.signal].filter(s)),Z=this,re=[],Ee={signal:J};let he,z,M=!1,W=0;function $(){M=!0,H()}function H(){W-=1,Se()}function Se(){z&&!M&&W<ce&&re.length<de&&(z(),z=null)}async function se(){try{for await(let X of Z){if(M)return;if(J.aborted)throw new E;try{if(X=ee(X,Ee),X===K)continue;X=A(X)}catch(O){X=T(O)}W+=1,k(X,H,$),re.push(X),he&&(he(),he=null),!M&&(re.length>=de||W>=ce)&&await new R(O=>{z=O})}re.push(V)}catch(X){const O=T(X);k(O,H,$),re.push(O)}finally{M=!0,he&&(he(),he=null)}}se();try{for(;;){for(;re.length>0;){const X=await re[0];if(X===V)return;if(J.aborted)throw new E;X!==K&&(yield X),re.shift(),Se()}await new R(X=>{he=X})}}finally{M=!0,z&&(z(),z=null)}}.call(this)}function j(ee=void 0){return ee!=null&&p(ee,"options"),ee?.signal!=null&&u(ee.signal,"options.signal"),async function*(){let ce=0;for await(const be of this){var de;if(ee!=null&&(de=ee.signal)!==null&&de!==void 0&&de.aborted)throw new E({cause:ee.signal.reason});yield[ce++,be]}}.call(this)}async function q(ee,ne=void 0){for await(const ce of F.call(this,ee,ne))return!0;return!1}async function ae(ee,ne=void 0){if(typeof ee!="function")throw new v("fn",["Function","AsyncFunction"],ee);return!await q.call(this,async(...ce)=>!await ee(...ce),ne)}async function Q(ee,ne){for await(const ce of F.call(this,ee,ne))return ce}async function ue(ee,ne){if(typeof ee!="function")throw new v("fn",["Function","AsyncFunction"],ee);async function ce(de,be){return await ee(de,be),K}for await(const de of B.call(this,ce,ne));}function F(ee,ne){if(typeof ee!="function")throw new v("fn",["Function","AsyncFunction"],ee);async function ce(de,be){return await ee(de,be)?de:K}return B.call(this,ce,ne)}class ie extends l{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function me(ee,ne,ce){var de;if(typeof ee!="function")throw new v("reducer",["Function","AsyncFunction"],ee);ce!=null&&p(ce,"options"),ce?.signal!=null&&u(ce.signal,"options.signal");let be=arguments.length>1;if(ce!=null&&(de=ce.signal)!==null&&de!==void 0&&de.aborted){const he=new E(void 0,{cause:ce.signal.reason});throw this.once("error",()=>{}),await c(this.destroy(he)),he}const J=new h,Z=J.signal;if(ce!=null&&ce.signal){const he={once:!0,[t]:this,[n]:!0};ce.signal.addEventListener("abort",()=>J.abort(),he)}let re=!1;try{for await(const he of this){var Ee;if(re=!0,ce!=null&&(Ee=ce.signal)!==null&&Ee!==void 0&&Ee.aborted)throw new E;be?ne=await ee(ne,he,{signal:Z}):(ne=he,be=!0)}if(!re&&!be)throw new ie}finally{J.abort()}return ne}async function oe(ee){ee!=null&&p(ee,"options"),ee?.signal!=null&&u(ee.signal,"options.signal");const ne=[];for await(const de of this){var ce;if(ee!=null&&(ce=ee.signal)!==null&&ce!==void 0&&ce.aborted)throw new E(void 0,{cause:ee.signal.reason});e(ne,de)}return ne}function fe(ee,ne){const ce=B.call(this,ee,ne);return async function*(){for await(const be of ce)yield*be}.call(this)}function le(ee){if(ee=S(ee),D(ee))return 0;if(ee<0)throw new g("number",">= 0",ee);return ee}function we(ee,ne=void 0){return ne!=null&&p(ne,"options"),ne?.signal!=null&&u(ne.signal,"options.signal"),ee=le(ee),async function*(){var de;if(ne!=null&&(de=ne.signal)!==null&&de!==void 0&&de.aborted)throw new E;for await(const J of this){var be;if(ne!=null&&(be=ne.signal)!==null&&be!==void 0&&be.aborted)throw new E;ee--<=0&&(yield J)}}.call(this)}function ge(ee,ne=void 0){return ne!=null&&p(ne,"options"),ne?.signal!=null&&u(ne.signal,"options.signal"),ee=le(ee),async function*(){var de;if(ne!=null&&(de=ne.signal)!==null&&de!==void 0&&de.aborted)throw new E;for await(const J of this){var be;if(ne!=null&&(be=ne.signal)!==null&&be!==void 0&&be.aborted)throw new E;if(ee-- >0&&(yield J),ee<=0)return}}.call(this)}Y.exports.streamReturningOperators={asIndexedPairs:m(j,"readable.asIndexedPairs will be removed in a future version."),drop:we,filter:F,flatMap:fe,map:B,take:ge,compose:C},Y.exports.promiseReturningOperators={every:ae,forEach:ue,reduce:me,toArray:oe,some:q,find:Q}}),((Y,P,r)=>{"use strict";const{ArrayIsArray:h,ArrayPrototypeIncludes:f,ArrayPrototypeJoin:v,ArrayPrototypeMap:l,NumberIsInteger:g,NumberIsNaN:E,NumberMAX_SAFE_INTEGER:u,NumberMIN_SAFE_INTEGER:o,NumberParseInt:p,ObjectPrototypeHasOwnProperty:t,RegExpPrototypeExec:n,String:c,StringPrototypeToUpperCase:i,StringPrototypeTrim:d}=r(70),{hideStackFrames:w,codes:{ERR_SOCKET_BAD_PORT:b,ERR_INVALID_ARG_TYPE:m,ERR_INVALID_ARG_VALUE:e,ERR_OUT_OF_RANGE:s,ERR_UNKNOWN_SIGNAL:y}}=r(73),{normalizeEncoding:S}=r(71),{isAsyncFunction:D,isArrayBufferView:R}=r(71).types,T={};function A(M){return M===(M|0)}function k(M){return M===M>>>0}const N=/^[0-7]+$/,K="must be a 32-bit unsigned integer or an octal string";function V(M,W,$){if(typeof M>"u"&&(M=$),typeof M=="string"){if(n(N,M)===null)throw new e(W,M,K);M=p(M,8)}return j(M,W),M}const C=w((M,W,$=o,H=u)=>{if(typeof M!="number")throw new m(W,"number",M);if(!g(M))throw new s(W,"an integer",M);if(M<$||M>H)throw new s(W,`>= ${$} && <= ${H}`,M)}),B=w((M,W,$=-2147483648,H=2147483647)=>{if(typeof M!="number")throw new m(W,"number",M);if(!g(M))throw new s(W,"an integer",M);if(M<$||M>H)throw new s(W,`>= ${$} && <= ${H}`,M)}),j=w((M,W,$=!1)=>{if(typeof M!="number")throw new m(W,"number",M);if(!g(M))throw new s(W,"an integer",M);const H=$?1:0,Se=4294967295;if(M<H||M>Se)throw new s(W,`>= ${H} && <= ${Se}`,M)});function q(M,W){if(typeof M!="string")throw new m(W,"string",M)}function ae(M,W,$=void 0,H){if(typeof M!="number")throw new m(W,"number",M);if($!=null&&M<$||H!=null&&M>H||($!=null||H!=null)&&E(M))throw new s(W,`${$!=null?`>= ${$}`:""}${$!=null&&H!=null?" && ":""}${H!=null?`<= ${H}`:""}`,M)}const Q=w((M,W,$)=>{if(!f($,M)){const Se="must be one of: "+v(l($,se=>typeof se=="string"?`'${se}'`:c(se)),", ");throw new e(W,M,Se)}});function ue(M,W){if(typeof M!="boolean")throw new m(W,"boolean",M)}function F(M,W,$){return M==null||!t(M,W)?$:M[W]}const ie=w((M,W,$=null)=>{const H=F($,"allowArray",!1),Se=F($,"allowFunction",!1);if(!F($,"nullable",!1)&&M===null||!H&&h(M)||typeof M!="object"&&(!Se||typeof M!="function"))throw new m(W,"Object",M)}),me=w((M,W)=>{if(M!=null&&typeof M!="object"&&typeof M!="function")throw new m(W,"a dictionary",M)}),oe=w((M,W,$=0)=>{if(!h(M))throw new m(W,"Array",M);if(M.length<$){const H=`must be longer than ${$}`;throw new e(W,M,H)}});function fe(M,W){oe(M,W);for(let $=0;$<M.length;$++)q(M[$],`${W}[${$}]`)}function le(M,W){oe(M,W);for(let $=0;$<M.length;$++)ue(M[$],`${W}[${$}]`)}function we(M,W){oe(M,W);for(let $=0;$<M.length;$++){const H=M[$],Se=`${W}[${$}]`;if(H==null)throw new m(Se,"AbortSignal",H);de(H,Se)}}function ge(M,W="signal"){if(q(M,W),T[M]===void 0)throw T[i(M)]!==void 0?new y(M+" (signals must use all capital letters)"):new y(M)}const ee=w((M,W="buffer")=>{if(!R(M))throw new m(W,["Buffer","TypedArray","DataView"],M)});function ne(M,W){const $=S(W),H=M.length;if($==="hex"&&H%2!==0)throw new e("encoding",W,`is invalid for data of length ${H}`)}function ce(M,W="Port",$=!0){if(typeof M!="number"&&typeof M!="string"||typeof M=="string"&&d(M).length===0||+M!==+M>>>0||M>65535||M===0&&!$)throw new b(W,M,$);return M|0}const de=w((M,W)=>{if(M!==void 0&&(M===null||typeof M!="object"||!("aborted"in M)))throw new m(W,"AbortSignal",M)}),be=w((M,W)=>{if(typeof M!="function")throw new m(W,"Function",M)}),J=w((M,W)=>{if(typeof M!="function"||D(M))throw new m(W,"Function",M)}),Z=w((M,W)=>{if(M!==void 0)throw new m(W,"undefined",M)});function re(M,W,$){if(!f($,M))throw new m(W,`('${v($,"|")}')`,M)}const Ee=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function he(M,W){if(typeof M>"u"||!n(Ee,M))throw new e(W,M,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function z(M){if(typeof M=="string")return he(M,"hints"),M;if(h(M)){const W=M.length;let $="";if(W===0)return $;for(let H=0;H<W;H++){const Se=M[H];he(Se,"hints"),$+=Se,H!==W-1&&($+=", ")}return $}throw new e("hints",M,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}Y.exports={isInt32:A,isUint32:k,parseFileMode:V,validateArray:oe,validateStringArray:fe,validateBooleanArray:le,validateAbortSignalArray:we,validateBoolean:ue,validateBuffer:ee,validateDictionary:me,validateEncoding:ne,validateFunction:be,validateInt32:B,validateInteger:C,validateNumber:ae,validateObject:ie,validateOneOf:Q,validatePlainFunction:J,validatePort:ce,validateSignalName:ge,validateString:q,validateUint32:j,validateUndefined:Z,validateUnion:re,validateAbortSignal:de,validateLinkHeaderValue:z}}),((Y,P,r)=>{"use strict";const h=r(3),{AbortError:f,codes:v}=r(73),{ERR_INVALID_ARG_TYPE:l,ERR_STREAM_PREMATURE_CLOSE:g}=v,{kEmptyObject:E,once:u}=r(71),{validateAbortSignal:o,validateFunction:p,validateObject:t,validateBoolean:n}=r(77),{Promise:c,PromisePrototypeThen:i,SymbolDispose:d}=r(70),{isClosed:w,isReadable:b,isReadableNodeStream:m,isReadableStream:e,isReadableFinished:s,isReadableErrored:y,isWritable:S,isWritableNodeStream:D,isWritableStream:R,isWritableFinished:T,isWritableErrored:A,isNodeStream:k,willEmitClose:N,kIsClosedPromise:K}=r(79);let V;function C(Q){return Q.setHeader&&typeof Q.abort=="function"}const B=()=>{};function j(Q,ue,F){var ie,me;if(arguments.length===2?(F=ue,ue=E):ue==null?ue=E:t(ue,"options"),p(F,"callback"),o(ue.signal,"options.signal"),F=u(F),e(Q)||R(Q))return q(Q,ue,F);if(!k(Q))throw new l("stream",["ReadableStream","WritableStream","Stream"],Q);const oe=(ie=ue.readable)!==null&&ie!==void 0?ie:m(Q),fe=(me=ue.writable)!==null&&me!==void 0?me:D(Q),le=Q._writableState,we=Q._readableState,ge=()=>{Q.writable||ce()};let ee=N(Q)&&m(Q)===oe&&D(Q)===fe,ne=T(Q,!1);const ce=()=>{ne=!0,Q.destroyed&&(ee=!1),!(ee&&(!Q.readable||oe))&&(!oe||de)&&F.call(Q)};let de=s(Q,!1);const be=()=>{de=!0,Q.destroyed&&(ee=!1),!(ee&&(!Q.writable||fe))&&(!fe||ne)&&F.call(Q)},J=M=>{F.call(Q,M)};let Z=w(Q);const re=()=>{Z=!0;const M=A(Q)||y(Q);if(M&&typeof M!="boolean")return F.call(Q,M);if(oe&&!de&&m(Q,!0)&&!s(Q,!1))return F.call(Q,new g);if(fe&&!ne&&!T(Q,!1))return F.call(Q,new g);F.call(Q)},Ee=()=>{Z=!0;const M=A(Q)||y(Q);if(M&&typeof M!="boolean")return F.call(Q,M);F.call(Q)},he=()=>{Q.req.on("finish",ce)};C(Q)?(Q.on("complete",ce),ee||Q.on("abort",re),Q.req?he():Q.on("request",he)):fe&&!le&&(Q.on("end",ge),Q.on("close",ge)),!ee&&typeof Q.aborted=="boolean"&&Q.on("aborted",re),Q.on("end",be),Q.on("finish",ce),ue.error!==!1&&Q.on("error",J),Q.on("close",re),Z?h.nextTick(re):le!=null&&le.errorEmitted||we!=null&&we.errorEmitted?ee||h.nextTick(Ee):(!oe&&(!ee||b(Q))&&(ne||S(Q)===!1)||!fe&&(!ee||S(Q))&&(de||b(Q)===!1)||we&&Q.req&&Q.aborted)&&h.nextTick(Ee);const z=()=>{F=B,Q.removeListener("aborted",re),Q.removeListener("complete",ce),Q.removeListener("abort",re),Q.removeListener("request",he),Q.req&&Q.req.removeListener("finish",ce),Q.removeListener("end",ge),Q.removeListener("close",ge),Q.removeListener("finish",ce),Q.removeListener("end",be),Q.removeListener("error",J),Q.removeListener("close",re)};if(ue.signal&&!Z){const M=()=>{const W=F;z(),W.call(Q,new f(void 0,{cause:ue.signal.reason}))};if(ue.signal.aborted)h.nextTick(M);else{V=V||r(71).addAbortListener;const W=V(ue.signal,M),$=F;F=u((...H)=>{W[d](),$.apply(Q,H)})}}return z}function q(Q,ue,F){let ie=!1,me=B;if(ue.signal)if(me=()=>{ie=!0,F.call(Q,new f(void 0,{cause:ue.signal.reason}))},ue.signal.aborted)h.nextTick(me);else{V=V||r(71).addAbortListener;const fe=V(ue.signal,me),le=F;F=u((...we)=>{fe[d](),le.apply(Q,we)})}const oe=(...fe)=>{ie||h.nextTick(()=>F.apply(Q,fe))};return i(Q[K].promise,oe,oe),B}function ae(Q,ue){var F;let ie=!1;return ue===null&&(ue=E),(F=ue)!==null&&F!==void 0&&F.cleanup&&(n(ue.cleanup,"cleanup"),ie=ue.cleanup),new c((me,oe)=>{const fe=j(Q,ue,le=>{ie&&fe(),le?oe(le):me()})})}Y.exports=j,Y.exports.finished=ae}),((Y,P,r)=>{"use strict";const{SymbolAsyncIterator:h,SymbolIterator:f,SymbolFor:v}=r(70),l=v("nodejs.stream.destroyed"),g=v("nodejs.stream.errored"),E=v("nodejs.stream.readable"),u=v("nodejs.stream.writable"),o=v("nodejs.stream.disturbed"),p=v("nodejs.webstream.isClosedPromise"),t=v("nodejs.webstream.controllerErrorFunction");function n(F,ie=!1){var me;return!!(F&&typeof F.pipe=="function"&&typeof F.on=="function"&&(!ie||typeof F.pause=="function"&&typeof F.resume=="function")&&(!F._writableState||((me=F._readableState)===null||me===void 0?void 0:me.readable)!==!1)&&(!F._writableState||F._readableState))}function c(F){var ie;return!!(F&&typeof F.write=="function"&&typeof F.on=="function"&&(!F._readableState||((ie=F._writableState)===null||ie===void 0?void 0:ie.writable)!==!1))}function i(F){return!!(F&&typeof F.pipe=="function"&&F._readableState&&typeof F.on=="function"&&typeof F.write=="function")}function d(F){return F&&(F._readableState||F._writableState||typeof F.write=="function"&&typeof F.on=="function"||typeof F.pipe=="function"&&typeof F.on=="function")}function w(F){return!!(F&&!d(F)&&typeof F.pipeThrough=="function"&&typeof F.getReader=="function"&&typeof F.cancel=="function")}function b(F){return!!(F&&!d(F)&&typeof F.getWriter=="function"&&typeof F.abort=="function")}function m(F){return!!(F&&!d(F)&&typeof F.readable=="object"&&typeof F.writable=="object")}function e(F){return w(F)||b(F)||m(F)}function s(F,ie){return F==null?!1:ie===!0?typeof F[h]=="function":ie===!1?typeof F[f]=="function":typeof F[h]=="function"||typeof F[f]=="function"}function y(F){if(!d(F))return null;const ie=F._writableState,me=F._readableState,oe=ie||me;return!!(F.destroyed||F[l]||oe!=null&&oe.destroyed)}function S(F){if(!c(F))return null;if(F.writableEnded===!0)return!0;const ie=F._writableState;return ie!=null&&ie.errored?!1:typeof ie?.ended!="boolean"?null:ie.ended}function D(F,ie){if(!c(F))return null;if(F.writableFinished===!0)return!0;const me=F._writableState;return me!=null&&me.errored?!1:typeof me?.finished!="boolean"?null:!!(me.finished||ie===!1&&me.ended===!0&&me.length===0)}function R(F){if(!n(F))return null;if(F.readableEnded===!0)return!0;const ie=F._readableState;return!ie||ie.errored?!1:typeof ie?.ended!="boolean"?null:ie.ended}function T(F,ie){if(!n(F))return null;const me=F._readableState;return me!=null&&me.errored?!1:typeof me?.endEmitted!="boolean"?null:!!(me.endEmitted||ie===!1&&me.ended===!0&&me.length===0)}function A(F){return F&&F[E]!=null?F[E]:typeof F?.readable!="boolean"?null:y(F)?!1:n(F)&&F.readable&&!T(F)}function k(F){return F&&F[u]!=null?F[u]:typeof F?.writable!="boolean"?null:y(F)?!1:c(F)&&F.writable&&!S(F)}function N(F,ie){return d(F)?y(F)?!0:!(ie?.readable!==!1&&A(F)||ie?.writable!==!1&&k(F)):null}function K(F){var ie,me;return d(F)?F.writableErrored?F.writableErrored:(ie=(me=F._writableState)===null||me===void 0?void 0:me.errored)!==null&&ie!==void 0?ie:null:null}function V(F){var ie,me;return d(F)?F.readableErrored?F.readableErrored:(ie=(me=F._readableState)===null||me===void 0?void 0:me.errored)!==null&&ie!==void 0?ie:null:null}function C(F){if(!d(F))return null;if(typeof F.closed=="boolean")return F.closed;const ie=F._writableState,me=F._readableState;return typeof ie?.closed=="boolean"||typeof me?.closed=="boolean"?ie?.closed||me?.closed:typeof F._closed=="boolean"&&B(F)?F._closed:null}function B(F){return typeof F._closed=="boolean"&&typeof F._defaultKeepAlive=="boolean"&&typeof F._removedConnection=="boolean"&&typeof F._removedContLen=="boolean"}function j(F){return typeof F._sent100=="boolean"&&B(F)}function q(F){var ie;return typeof F._consuming=="boolean"&&typeof F._dumped=="boolean"&&((ie=F.req)===null||ie===void 0?void 0:ie.upgradeOrConnect)===void 0}function ae(F){if(!d(F))return null;const ie=F._writableState,me=F._readableState,oe=ie||me;return!oe&&j(F)||!!(oe&&oe.autoDestroy&&oe.emitClose&&oe.closed===!1)}function Q(F){var ie;return!!(F&&((ie=F[o])!==null&&ie!==void 0?ie:F.readableDidRead||F.readableAborted))}function ue(F){var ie,me,oe,fe,le,we,ge,ee,ne,ce;return!!(F&&((ie=(me=(oe=(fe=(le=(we=F[g])!==null&&we!==void 0?we:F.readableErrored)!==null&&le!==void 0?le:F.writableErrored)!==null&&fe!==void 0?fe:(ge=F._readableState)===null||ge===void 0?void 0:ge.errorEmitted)!==null&&oe!==void 0?oe:(ee=F._writableState)===null||ee===void 0?void 0:ee.errorEmitted)!==null&&me!==void 0?me:(ne=F._readableState)===null||ne===void 0?void 0:ne.errored)!==null&&ie!==void 0?ie:!((ce=F._writableState)===null||ce===void 0)&&ce.errored))}Y.exports={isDestroyed:y,kIsDestroyed:l,isDisturbed:Q,kIsDisturbed:o,isErrored:ue,kIsErrored:g,isReadable:A,kIsReadable:E,kIsClosedPromise:p,kControllerErrorFunction:t,kIsWritable:u,isClosed:C,isDuplexNodeStream:i,isFinished:N,isIterable:s,isReadableNodeStream:n,isReadableStream:w,isReadableEnded:R,isReadableFinished:T,isReadableErrored:V,isNodeStream:d,isWebStream:e,isWritable:k,isWritableNodeStream:c,isWritableStream:b,isWritableEnded:S,isWritableFinished:D,isWritableErrored:K,isServerRequest:q,isServerResponse:j,willEmitClose:ae,isTransformStream:m}}),((Y,P,r)=>{"use strict";const{pipeline:h}=r(81),f=r(83),{destroyer:v}=r(82),{isNodeStream:l,isReadable:g,isWritable:E,isWebStream:u,isTransformStream:o,isWritableStream:p,isReadableStream:t}=r(79),{AbortError:n,codes:{ERR_INVALID_ARG_VALUE:c,ERR_MISSING_ARGS:i}}=r(73),d=r(78);Y.exports=function(...b){if(b.length===0)throw new i("streams");if(b.length===1)return f.from(b[0]);const m=[...b];if(typeof b[0]=="function"&&(b[0]=f.from(b[0])),typeof b[b.length-1]=="function"){const K=b.length-1;b[K]=f.from(b[K])}for(let K=0;K<b.length;++K)if(!(!l(b[K])&&!u(b[K]))){if(K<b.length-1&&!(g(b[K])||t(b[K])||o(b[K])))throw new c(`streams[${K}]`,m[K],"must be readable");if(K>0&&!(E(b[K])||p(b[K])||o(b[K])))throw new c(`streams[${K}]`,m[K],"must be writable")}let e,s,y,S,D;function R(K){const V=S;S=null,V?V(K):K?D.destroy(K):!N&&!k&&D.destroy()}const T=b[0],A=h(b,R),k=!!(E(T)||p(T)||o(T)),N=!!(g(A)||t(A)||o(A));if(D=new f({writableObjectMode:!!(T!=null&&T.writableObjectMode),readableObjectMode:!!(A!=null&&A.readableObjectMode),writable:k,readable:N}),k){if(l(T))D._write=function(V,C,B){T.write(V,C)?B():e=B},D._final=function(V){T.end(),s=V},T.on("drain",function(){if(e){const V=e;e=null,V()}});else if(u(T)){const C=(o(T)?T.writable:T).getWriter();D._write=async function(B,j,q){try{await C.ready,C.write(B).catch(()=>{}),q()}catch(ae){q(ae)}},D._final=async function(B){try{await C.ready,C.close().catch(()=>{}),s=B}catch(j){B(j)}}}const K=o(A)?A.readable:A;d(K,()=>{if(s){const V=s;s=null,V()}})}if(N){if(l(A))A.on("readable",function(){if(y){const K=y;y=null,K()}}),A.on("end",function(){D.push(null)}),D._read=function(){for(;;){const K=A.read();if(K===null){y=D._read;return}if(!D.push(K))return}};else if(u(A)){const V=(o(A)?A.readable:A).getReader();D._read=async function(){for(;;)try{const{value:C,done:B}=await V.read();if(!D.push(C))return;if(B){D.push(null);return}}catch{return}}}}return D._destroy=function(K,V){!K&&S!==null&&(K=new n),y=null,e=null,s=null,S===null?V(K):(S=V,l(A)&&v(A,K))},D}}),((Y,P,r)=>{const h=r(3),{ArrayIsArray:f,Promise:v,SymbolAsyncIterator:l,SymbolDispose:g}=r(70),E=r(78),{once:u}=r(71),o=r(82),p=r(83),{aggregateTwoErrors:t,codes:{ERR_INVALID_ARG_TYPE:n,ERR_INVALID_RETURN_VALUE:c,ERR_MISSING_ARGS:i,ERR_STREAM_DESTROYED:d,ERR_STREAM_PREMATURE_CLOSE:w},AbortError:b}=r(73),{validateFunction:m,validateAbortSignal:e}=r(77),{isIterable:s,isReadable:y,isReadableNodeStream:S,isNodeStream:D,isTransformStream:R,isWebStream:T,isReadableStream:A,isReadableFinished:k}=r(79),N=globalThis.AbortController||r(74).AbortController;let K,V,C;function B(oe,fe,le){let we=!1;oe.on("close",()=>{we=!0});const ge=E(oe,{readable:fe,writable:le},ee=>{we=!ee});return{destroy:ee=>{we||(we=!0,o.destroyer(oe,ee||new d("pipe")))},cleanup:ge}}function j(oe){return m(oe[oe.length-1],"streams[stream.length - 1]"),oe.pop()}function q(oe){if(s(oe))return oe;if(S(oe))return ae(oe);throw new n("val",["Readable","Iterable","AsyncIterable"],oe)}async function*ae(oe){V||(V=r(84)),yield*V.prototype[l].call(oe)}async function Q(oe,fe,le,{end:we}){let ge,ee=null;const ne=be=>{if(be&&(ge=be),ee){const J=ee;ee=null,J()}},ce=()=>new v((be,J)=>{ge?J(ge):ee=()=>{ge?J(ge):be()}});fe.on("drain",ne);const de=E(fe,{readable:!1},ne);try{fe.writableNeedDrain&&await ce();for await(const be of oe)fe.write(be)||await ce();we&&(fe.end(),await ce()),le()}catch(be){le(ge!==be?t(ge,be):be)}finally{de(),fe.off("drain",ne)}}async function ue(oe,fe,le,{end:we}){R(fe)&&(fe=fe.writable);const ge=fe.getWriter();try{for await(const ee of oe)await ge.ready,ge.write(ee).catch(()=>{});await ge.ready,we&&await ge.close(),le()}catch(ee){try{await ge.abort(ee),le(ee)}catch(ne){le(ne)}}}function F(...oe){return ie(oe,u(j(oe)))}function ie(oe,fe,le){if(oe.length===1&&f(oe[0])&&(oe=oe[0]),oe.length<2)throw new i("streams");const we=new N,ge=we.signal,ee=le?.signal,ne=[];e(ee,"options.signal");function ce(){he(new b)}C=C||r(71).addAbortListener;let de;ee&&(de=C(ee,ce));let be,J;const Z=[];let re=0;function Ee(H){he(H,--re===0)}function he(H,Se){var se;if(H&&(!be||be.code==="ERR_STREAM_PREMATURE_CLOSE")&&(be=H),!(!be&&!Se)){for(;Z.length;)Z.shift()(be);(se=de)===null||se===void 0||se[g](),we.abort(),Se&&(be||ne.forEach(X=>X()),h.nextTick(fe,be,J))}}let z;for(let H=0;H<oe.length;H++){const Se=oe[H],se=H<oe.length-1,X=H>0,O=se||le?.end!==!1,a=H===oe.length-1;if(D(Se)){let _=function(I){I&&I.name!=="AbortError"&&I.code!=="ERR_STREAM_PREMATURE_CLOSE"&&Ee(I)};var $=_;if(O){const{destroy:I,cleanup:U}=B(Se,se,X);Z.push(I),y(Se)&&a&&ne.push(U)}Se.on("error",_),y(Se)&&a&&ne.push(()=>{Se.removeListener("error",_)})}if(H===0)if(typeof Se=="function"){if(z=Se({signal:ge}),!s(z))throw new c("Iterable, AsyncIterable or Stream","source",z)}else s(Se)||S(Se)||R(Se)?z=Se:z=p.from(Se);else if(typeof Se=="function"){if(R(z)){var M;z=q((M=z)===null||M===void 0?void 0:M.readable)}else z=q(z);if(z=Se(z,{signal:ge}),se){if(!s(z,!0))throw new c("AsyncIterable",`transform[${H-1}]`,z)}else{var W;K||(K=r(94));const _=new K({objectMode:!0}),I=(W=z)===null||W===void 0?void 0:W.then;if(typeof I=="function")re++,I.call(z,te=>{J=te,te!=null&&_.write(te),O&&_.end(),h.nextTick(Ee)},te=>{_.destroy(te),h.nextTick(Ee,te)});else if(s(z,!0))re++,Q(z,_,Ee,{end:O});else if(A(z)||R(z)){const te=z.readable||z;re++,Q(te,_,Ee,{end:O})}else throw new c("AsyncIterable or Promise","destination",z);z=_;const{destroy:U,cleanup:G}=B(z,!1,!0);Z.push(U),a&&ne.push(G)}}else if(D(Se)){if(S(z)){re+=2;const _=me(z,Se,Ee,{end:O});y(Se)&&a&&ne.push(_)}else if(R(z)||A(z)){const _=z.readable||z;re++,Q(_,Se,Ee,{end:O})}else if(s(z))re++,Q(z,Se,Ee,{end:O});else throw new n("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],z);z=Se}else if(T(Se)){if(S(z))re++,ue(q(z),Se,Ee,{end:O});else if(A(z)||s(z))re++,ue(z,Se,Ee,{end:O});else if(R(z))re++,ue(z.readable,Se,Ee,{end:O});else throw new n("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],z);z=Se}else z=p.from(Se)}return(ge!=null&&ge.aborted||ee!=null&&ee.aborted)&&h.nextTick(ce),z}function me(oe,fe,le,{end:we}){let ge=!1;if(fe.on("close",()=>{ge||le(new w)}),oe.pipe(fe,{end:!1}),we){let ne=function(){ge=!0,fe.end()};var ee=ne;k(oe)?h.nextTick(ne):oe.once("end",ne)}else le();return E(oe,{readable:!0,writable:!1},ne=>{const ce=oe._readableState;ne&&ne.code==="ERR_STREAM_PREMATURE_CLOSE"&&ce&&ce.ended&&!ce.errored&&!ce.errorEmitted?oe.once("end",le).once("error",le):le(ne)}),E(fe,{readable:!1,writable:!0},le)}Y.exports={pipelineImpl:ie,pipeline:F}}),((Y,P,r)=>{"use strict";const h=r(3),{aggregateTwoErrors:f,codes:{ERR_MULTIPLE_CALLBACK:v},AbortError:l}=r(73),{Symbol:g}=r(70),{kIsDestroyed:E,isDestroyed:u,isFinished:o,isServerRequest:p}=r(79),t=g("kDestroy"),n=g("kConstruct");function c(N,K,V){N&&(N.stack,K&&!K.errored&&(K.errored=N),V&&!V.errored&&(V.errored=N))}function i(N,K){const V=this._readableState,C=this._writableState,B=C||V;return C!=null&&C.destroyed||V!=null&&V.destroyed?(typeof K=="function"&&K(),this):(c(N,C,V),C&&(C.destroyed=!0),V&&(V.destroyed=!0),B.constructed?d(this,N,K):this.once(t,function(j){d(this,f(j,N),K)}),this)}function d(N,K,V){let C=!1;function B(j){if(C)return;C=!0;const q=N._readableState,ae=N._writableState;c(j,ae,q),ae&&(ae.closed=!0),q&&(q.closed=!0),typeof V=="function"&&V(j),j?h.nextTick(w,N,j):h.nextTick(b,N)}try{N._destroy(K||null,B)}catch(j){B(j)}}function w(N,K){m(N,K),b(N)}function b(N){const K=N._readableState,V=N._writableState;V&&(V.closeEmitted=!0),K&&(K.closeEmitted=!0),(V!=null&&V.emitClose||K!=null&&K.emitClose)&&N.emit("close")}function m(N,K){const V=N._readableState,C=N._writableState;C!=null&&C.errorEmitted||V!=null&&V.errorEmitted||(C&&(C.errorEmitted=!0),V&&(V.errorEmitted=!0),N.emit("error",K))}function e(){const N=this._readableState,K=this._writableState;N&&(N.constructed=!0,N.closed=!1,N.closeEmitted=!1,N.destroyed=!1,N.errored=null,N.errorEmitted=!1,N.reading=!1,N.ended=N.readable===!1,N.endEmitted=N.readable===!1),K&&(K.constructed=!0,K.destroyed=!1,K.closed=!1,K.closeEmitted=!1,K.errored=null,K.errorEmitted=!1,K.finalCalled=!1,K.prefinished=!1,K.ended=K.writable===!1,K.ending=K.writable===!1,K.finished=K.writable===!1)}function s(N,K,V){const C=N._readableState,B=N._writableState;if(B!=null&&B.destroyed||C!=null&&C.destroyed)return this;C!=null&&C.autoDestroy||B!=null&&B.autoDestroy?N.destroy(K):K&&(K.stack,B&&!B.errored&&(B.errored=K),C&&!C.errored&&(C.errored=K),V?h.nextTick(m,N,K):m(N,K))}function y(N,K){if(typeof N._construct!="function")return;const V=N._readableState,C=N._writableState;V&&(V.constructed=!1),C&&(C.constructed=!1),N.once(n,K),!(N.listenerCount(n)>1)&&h.nextTick(S,N)}function S(N){let K=!1;function V(C){if(K){s(N,C??new v);return}K=!0;const B=N._readableState,j=N._writableState,q=j||B;B&&(B.constructed=!0),j&&(j.constructed=!0),q.destroyed?N.emit(t,C):C?s(N,C,!0):h.nextTick(D,N)}try{N._construct(C=>{h.nextTick(V,C)})}catch(C){h.nextTick(V,C)}}function D(N){N.emit(n)}function R(N){return N?.setHeader&&typeof N.abort=="function"}function T(N){N.emit("close")}function A(N,K){N.emit("error",K),h.nextTick(T,N)}function k(N,K){!N||u(N)||(!K&&!o(N)&&(K=new l),p(N)?(N.socket=null,N.destroy(K)):R(N)?N.abort():R(N.req)?N.req.abort():typeof N.destroy=="function"?N.destroy(K):typeof N.close=="function"?N.close():K?h.nextTick(A,N,K):h.nextTick(T,N),N.destroyed||(N[E]=!0))}Y.exports={construct:y,destroyer:k,destroy:i,undestroy:e,errorOrDestroy:s}}),((Y,P,r)=>{"use strict";const{ObjectDefineProperties:h,ObjectGetOwnPropertyDescriptor:f,ObjectKeys:v,ObjectSetPrototypeOf:l}=r(70);Y.exports=u;const g=r(84),E=r(92);l(u.prototype,g.prototype),l(u,g);{const n=v(E.prototype);for(let c=0;c<n.length;c++){const i=n[c];u.prototype[i]||(u.prototype[i]=E.prototype[i])}}function u(n){if(!(this instanceof u))return new u(n);g.call(this,n),E.call(this,n),n?(this.allowHalfOpen=n.allowHalfOpen!==!1,n.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),n.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}h(u.prototype,{writable:{__proto__:null,...f(E.prototype,"writable")},writableHighWaterMark:{__proto__:null,...f(E.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...f(E.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...f(E.prototype,"writableBuffer")},writableLength:{__proto__:null,...f(E.prototype,"writableLength")},writableFinished:{__proto__:null,...f(E.prototype,"writableFinished")},writableCorked:{__proto__:null,...f(E.prototype,"writableCorked")},writableEnded:{__proto__:null,...f(E.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...f(E.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(n){this._readableState&&this._writableState&&(this._readableState.destroyed=n,this._writableState.destroyed=n)}}});let o;function p(){return o===void 0&&(o={}),o}u.fromWeb=function(n,c){return p().newStreamDuplexFromReadableWritablePair(n,c)},u.toWeb=function(n){return p().newReadableWritablePairFromDuplex(n)};let t;u.from=function(n){return t||(t=r(93)),t(n,"body")}}),((Y,P,r)=>{"use strict";const h=r(3),{ArrayPrototypeIndexOf:f,NumberIsInteger:v,NumberIsNaN:l,NumberParseInt:g,ObjectDefineProperties:E,ObjectKeys:u,ObjectSetPrototypeOf:o,Promise:p,SafeSet:t,SymbolAsyncDispose:n,SymbolAsyncIterator:c,Symbol:i}=r(70);Y.exports=H,H.ReadableState=$;const{EventEmitter:d}=r(75),{Stream:w,prependListener:b}=r(85),{Buffer:m}=r(4),{addAbortSignal:e}=r(86),s=r(78);let y=r(71).debuglog("stream",x=>{y=x});const S=r(87),D=r(82),{getHighWaterMark:R,getDefaultHighWaterMark:T}=r(88),{aggregateTwoErrors:A,codes:{ERR_INVALID_ARG_TYPE:k,ERR_METHOD_NOT_IMPLEMENTED:N,ERR_OUT_OF_RANGE:K,ERR_STREAM_PUSH_AFTER_EOF:V,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:C},AbortError:B}=r(73),{validateObject:j}=r(77),q=i("kPaused"),{StringDecoder:ae}=r(89),Q=r(91);o(H.prototype,w.prototype),o(H,w);const ue=()=>{},{errorOrDestroy:F}=D,ie=1,me=2,oe=4,fe=8,le=16,we=32,ge=64,ee=128,ne=256,ce=512,de=1024,be=2048,J=4096,Z=8192,re=16384,Ee=32768,he=65536,z=1<<17,M=1<<18;function W(x){return{enumerable:!1,get(){return(this.state&x)!==0},set(L){L?this.state|=x:this.state&=~x}}}E($.prototype,{objectMode:W(ie),ended:W(me),endEmitted:W(oe),reading:W(fe),constructed:W(le),sync:W(we),needReadable:W(ge),emittedReadable:W(ee),readableListening:W(ne),resumeScheduled:W(ce),errorEmitted:W(de),emitClose:W(be),autoDestroy:W(J),destroyed:W(Z),closed:W(re),closeEmitted:W(Ee),multiAwaitDrain:W(he),readingMore:W(z),dataEmitted:W(M)});function $(x,L,ye){typeof ye!="boolean"&&(ye=L instanceof r(83)),this.state=be|J|le|we,x&&x.objectMode&&(this.state|=ie),ye&&x&&x.readableObjectMode&&(this.state|=ie),this.highWaterMark=x?R(this,x,"readableHighWaterMark",ye):T(!1),this.buffer=new S,this.length=0,this.pipes=[],this.flowing=null,this[q]=null,x&&x.emitClose===!1&&(this.state&=~be),x&&x.autoDestroy===!1&&(this.state&=~J),this.errored=null,this.defaultEncoding=x&&x.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,x&&x.encoding&&(this.decoder=new ae(x.encoding),this.encoding=x.encoding)}function H(x){if(!(this instanceof H))return new H(x);const L=this instanceof r(83);this._readableState=new $(x,this,L),x&&(typeof x.read=="function"&&(this._read=x.read),typeof x.destroy=="function"&&(this._destroy=x.destroy),typeof x.construct=="function"&&(this._construct=x.construct),x.signal&&!L&&e(x.signal,this)),w.call(this,x),D.construct(this,()=>{this._readableState.needReadable&&G(this,this._readableState)})}H.prototype.destroy=D.destroy,H.prototype._undestroy=D.undestroy,H.prototype._destroy=function(x,L){L(x)},H.prototype[d.captureRejectionSymbol]=function(x){this.destroy(x)},H.prototype[n]=function(){let x;return this.destroyed||(x=this.readableEnded?null:new B,this.destroy(x)),new p((L,ye)=>s(this,pe=>pe&&pe!==x?ye(pe):L(null)))},H.prototype.push=function(x,L){return Se(this,x,L,!1)},H.prototype.unshift=function(x,L){return Se(this,x,L,!0)};function Se(x,L,ye,pe){y("readableAddChunk",L);const De=x._readableState;let Pe;if((De.state&ie)===0&&(typeof L=="string"?(ye=ye||De.defaultEncoding,De.encoding!==ye&&(pe&&De.encoding?L=m.from(L,ye).toString(De.encoding):(L=m.from(L,ye),ye=""))):L instanceof m?ye="":w._isUint8Array(L)?(L=w._uint8ArrayToBuffer(L),ye=""):L!=null&&(Pe=new k("chunk",["string","Buffer","Uint8Array"],L))),Pe)F(x,Pe);else if(L===null)De.state&=~fe,_(x,De);else if((De.state&ie)!==0||L&&L.length>0)if(pe)if((De.state&oe)!==0)F(x,new C);else{if(De.destroyed||De.errored)return!1;se(x,De,L,!0)}else if(De.ended)F(x,new V);else{if(De.destroyed||De.errored)return!1;De.state&=~fe,De.decoder&&!ye?(L=De.decoder.write(L),De.objectMode||L.length!==0?se(x,De,L,!1):G(x,De)):se(x,De,L,!1)}else pe||(De.state&=~fe,G(x,De));return!De.ended&&(De.length<De.highWaterMark||De.length===0)}function se(x,L,ye,pe){L.flowing&&L.length===0&&!L.sync&&x.listenerCount("data")>0?((L.state&he)!==0?L.awaitDrainWriters.clear():L.awaitDrainWriters=null,L.dataEmitted=!0,x.emit("data",ye)):(L.length+=L.objectMode?1:ye.length,pe?L.buffer.unshift(ye):L.buffer.push(ye),(L.state&ge)!==0&&I(x)),G(x,L)}H.prototype.isPaused=function(){const x=this._readableState;return x[q]===!0||x.flowing===!1},H.prototype.setEncoding=function(x){const L=new ae(x);this._readableState.decoder=L,this._readableState.encoding=this._readableState.decoder.encoding;const ye=this._readableState.buffer;let pe="";for(const De of ye)pe+=L.write(De);return ye.clear(),pe!==""&&ye.push(pe),this._readableState.length=pe.length,this};const X=1073741824;function O(x){if(x>X)throw new K("size","<= 1GiB",x);return x--,x|=x>>>1,x|=x>>>2,x|=x>>>4,x|=x>>>8,x|=x>>>16,x++,x}function a(x,L){return x<=0||L.length===0&&L.ended?0:(L.state&ie)!==0?1:l(x)?L.flowing&&L.length?L.buffer.first().length:L.length:x<=L.length?x:L.ended?L.length:0}H.prototype.read=function(x){y("read",x),x===void 0?x=NaN:v(x)||(x=g(x,10));const L=this._readableState,ye=x;if(x>L.highWaterMark&&(L.highWaterMark=O(x)),x!==0&&(L.state&=~ee),x===0&&L.needReadable&&((L.highWaterMark!==0?L.length>=L.highWaterMark:L.length>0)||L.ended))return y("read: emitReadable",L.length,L.ended),L.length===0&&L.ended?We(this):I(this),null;if(x=a(x,L),x===0&&L.ended)return L.length===0&&We(this),null;let pe=(L.state&ge)!==0;if(y("need readable",pe),(L.length===0||L.length-x<L.highWaterMark)&&(pe=!0,y("length less than watermark",pe)),L.ended||L.reading||L.destroyed||L.errored||!L.constructed)pe=!1,y("reading, ended or constructing",pe);else if(pe){y("do read"),L.state|=fe|we,L.length===0&&(L.state|=ge);try{this._read(L.highWaterMark)}catch(Pe){F(this,Pe)}L.state&=~we,L.reading||(x=a(ye,L))}let De;return x>0?De=ze(x,L):De=null,De===null?(L.needReadable=L.length<=L.highWaterMark,x=0):(L.length-=x,L.multiAwaitDrain?L.awaitDrainWriters.clear():L.awaitDrainWriters=null),L.length===0&&(L.ended||(L.needReadable=!0),ye!==x&&L.ended&&We(this)),De!==null&&!L.errorEmitted&&!L.closeEmitted&&(L.dataEmitted=!0,this.emit("data",De)),De};function _(x,L){if(y("onEofChunk"),!L.ended){if(L.decoder){const ye=L.decoder.end();ye&&ye.length&&(L.buffer.push(ye),L.length+=L.objectMode?1:ye.length)}L.ended=!0,L.sync?I(x):(L.needReadable=!1,L.emittedReadable=!0,U(x))}}function I(x){const L=x._readableState;y("emitReadable",L.needReadable,L.emittedReadable),L.needReadable=!1,L.emittedReadable||(y("emitReadable",L.flowing),L.emittedReadable=!0,h.nextTick(U,x))}function U(x){const L=x._readableState;y("emitReadable_",L.destroyed,L.length,L.ended),!L.destroyed&&!L.errored&&(L.length||L.ended)&&(x.emit("readable"),L.emittedReadable=!1),L.needReadable=!L.flowing&&!L.ended&&L.length<=L.highWaterMark,xe(x)}function G(x,L){!L.readingMore&&L.constructed&&(L.readingMore=!0,h.nextTick(te,x,L))}function te(x,L){for(;!L.reading&&!L.ended&&(L.length<L.highWaterMark||L.flowing&&L.length===0);){const ye=L.length;if(y("maybeReadMore read 0"),x.read(0),ye===L.length)break}L.readingMore=!1}H.prototype._read=function(x){throw new N("_read()")},H.prototype.pipe=function(x,L){const ye=this,pe=this._readableState;pe.pipes.length===1&&(pe.multiAwaitDrain||(pe.multiAwaitDrain=!0,pe.awaitDrainWriters=new t(pe.awaitDrainWriters?[pe.awaitDrainWriters]:[]))),pe.pipes.push(x),y("pipe count=%d opts=%j",pe.pipes.length,L);const Pe=(!L||L.end!==!1)&&x!==h.stdout&&x!==h.stderr?Qe:Ke;pe.endEmitted?h.nextTick(Pe):ye.once("end",Pe),x.on("unpipe",Le);function Le(ke,Ne){y("onunpipe"),ke===ye&&Ne&&Ne.hasUnpiped===!1&&(Ne.hasUnpiped=!0,tt())}function Qe(){y("onend"),x.end()}let Fe,Ze=!1;function tt(){y("cleanup"),x.removeListener("close",Ye),x.removeListener("finish",Xe),Fe&&x.removeListener("drain",Fe),x.removeListener("error",He),x.removeListener("unpipe",Le),ye.removeListener("end",Qe),ye.removeListener("end",Ke),ye.removeListener("data",et),Ze=!0,Fe&&pe.awaitDrainWriters&&(!x._writableState||x._writableState.needDrain)&&Fe()}function qe(){Ze||(pe.pipes.length===1&&pe.pipes[0]===x?(y("false write response, pause",0),pe.awaitDrainWriters=x,pe.multiAwaitDrain=!1):pe.pipes.length>1&&pe.pipes.includes(x)&&(y("false write response, pause",pe.awaitDrainWriters.size),pe.awaitDrainWriters.add(x)),ye.pause()),Fe||(Fe=Oe(ye,x),x.on("drain",Fe))}ye.on("data",et);function et(ke){y("ondata");const Ne=x.write(ke);y("dest.write",Ne),Ne===!1&&qe()}function He(ke){if(y("onerror",ke),Ke(),x.removeListener("error",He),x.listenerCount("error")===0){const Ne=x._writableState||x._readableState;Ne&&!Ne.errorEmitted?F(x,ke):x.emit("error",ke)}}b(x,"error",He);function Ye(){x.removeListener("finish",Xe),Ke()}x.once("close",Ye);function Xe(){y("onfinish"),x.removeListener("close",Ye),Ke()}x.once("finish",Xe);function Ke(){y("unpipe"),ye.unpipe(x)}return x.emit("pipe",ye),x.writableNeedDrain===!0?qe():pe.flowing||(y("pipe resume"),ye.resume()),x};function Oe(x,L){return function(){const pe=x._readableState;pe.awaitDrainWriters===L?(y("pipeOnDrain",1),pe.awaitDrainWriters=null):pe.multiAwaitDrain&&(y("pipeOnDrain",pe.awaitDrainWriters.size),pe.awaitDrainWriters.delete(L)),(!pe.awaitDrainWriters||pe.awaitDrainWriters.size===0)&&x.listenerCount("data")&&x.resume()}}H.prototype.unpipe=function(x){const L=this._readableState,ye={hasUnpiped:!1};if(L.pipes.length===0)return this;if(!x){const De=L.pipes;L.pipes=[],this.pause();for(let Pe=0;Pe<De.length;Pe++)De[Pe].emit("unpipe",this,{hasUnpiped:!1});return this}const pe=f(L.pipes,x);return pe===-1?this:(L.pipes.splice(pe,1),L.pipes.length===0&&this.pause(),x.emit("unpipe",this,ye),this)},H.prototype.on=function(x,L){const ye=w.prototype.on.call(this,x,L),pe=this._readableState;return x==="data"?(pe.readableListening=this.listenerCount("readable")>0,pe.flowing!==!1&&this.resume()):x==="readable"&&!pe.endEmitted&&!pe.readableListening&&(pe.readableListening=pe.needReadable=!0,pe.flowing=!1,pe.emittedReadable=!1,y("on readable",pe.length,pe.reading),pe.length?I(this):pe.reading||h.nextTick(Re,this)),ye},H.prototype.addListener=H.prototype.on,H.prototype.removeListener=function(x,L){const ye=w.prototype.removeListener.call(this,x,L);return x==="readable"&&h.nextTick(Ie,this),ye},H.prototype.off=H.prototype.removeListener,H.prototype.removeAllListeners=function(x){const L=w.prototype.removeAllListeners.apply(this,arguments);return(x==="readable"||x===void 0)&&h.nextTick(Ie,this),L};function Ie(x){const L=x._readableState;L.readableListening=x.listenerCount("readable")>0,L.resumeScheduled&&L[q]===!1?L.flowing=!0:x.listenerCount("data")>0?x.resume():L.readableListening||(L.flowing=null)}function Re(x){y("readable nexttick read 0"),x.read(0)}H.prototype.resume=function(){const x=this._readableState;return x.flowing||(y("resume"),x.flowing=!x.readableListening,Te(this,x)),x[q]=!1,this};function Te(x,L){L.resumeScheduled||(L.resumeScheduled=!0,h.nextTick(Ae,x,L))}function Ae(x,L){y("resume",L.reading),L.reading||x.read(0),L.resumeScheduled=!1,x.emit("resume"),xe(x),L.flowing&&!L.reading&&x.read(0)}H.prototype.pause=function(){return y("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(y("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[q]=!0,this};function xe(x){const L=x._readableState;for(y("flow",L.flowing);L.flowing&&x.read()!==null;);}H.prototype.wrap=function(x){let L=!1;x.on("data",pe=>{!this.push(pe)&&x.pause&&(L=!0,x.pause())}),x.on("end",()=>{this.push(null)}),x.on("error",pe=>{F(this,pe)}),x.on("close",()=>{this.destroy()}),x.on("destroy",()=>{this.destroy()}),this._read=()=>{L&&x.resume&&(L=!1,x.resume())};const ye=u(x);for(let pe=1;pe<ye.length;pe++){const De=ye[pe];this[De]===void 0&&typeof x[De]=="function"&&(this[De]=x[De].bind(x))}return this},H.prototype[c]=function(){return Ue(this)},H.prototype.iterator=function(x){return x!==void 0&&j(x,"options"),Ue(this,x)};function Ue(x,L){typeof x.read!="function"&&(x=H.wrap(x,{objectMode:!0}));const ye=Ve(x,L);return ye.stream=x,ye}async function*Ve(x,L){let ye=ue;function pe(Le){this===x?(ye(),ye=ue):ye=Le}x.on("readable",pe);let De;const Pe=s(x,{writable:!1},Le=>{De=Le?A(De,Le):null,ye(),ye=ue});try{for(;;){const Le=x.destroyed?null:x.read();if(Le!==null)yield Le;else{if(De)throw De;if(De===null)return;await new p(pe)}}}catch(Le){throw De=A(De,Le),De}finally{(De||L?.destroyOnReturn!==!1)&&(De===void 0||x._readableState.autoDestroy)?D.destroyer(x,null):(x.off("readable",pe),Pe())}}E(H.prototype,{readable:{__proto__:null,get(){const x=this._readableState;return!!x&&x.readable!==!1&&!x.destroyed&&!x.errorEmitted&&!x.endEmitted},set(x){this._readableState&&(this._readableState.readable=!!x)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(x){this._readableState&&(this._readableState.flowing=x)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(x){this._readableState&&(this._readableState.destroyed=x)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),E($.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[q]!==!1},set(x){this[q]=!!x}}}),H._fromList=ze;function ze(x,L){if(L.length===0)return null;let ye;return L.objectMode?ye=L.buffer.shift():!x||x>=L.length?(L.decoder?ye=L.buffer.join(""):L.buffer.length===1?ye=L.buffer.first():ye=L.buffer.concat(L.length),L.buffer.clear()):ye=L.buffer.consume(x,L.decoder),ye}function We(x){const L=x._readableState;y("endReadable",L.endEmitted),L.endEmitted||(L.ended=!0,h.nextTick($e,L,x))}function $e(x,L){if(y("endReadableNT",x.endEmitted,x.length),!x.errored&&!x.closeEmitted&&!x.endEmitted&&x.length===0){if(x.endEmitted=!0,L.emit("end"),L.writable&&L.allowHalfOpen===!1)h.nextTick(Ge,L);else if(x.autoDestroy){const ye=L._writableState;(!ye||ye.autoDestroy&&(ye.finished||ye.writable===!1))&&L.destroy()}}}function Ge(x){x.writable&&!x.writableEnded&&!x.destroyed&&x.end()}H.from=function(x,L){return Q(H,x,L)};let je;function Be(){return je===void 0&&(je={}),je}H.fromWeb=function(x,L){return Be().newStreamReadableFromReadableStream(x,L)},H.toWeb=function(x,L){return Be().newReadableStreamFromStreamReadable(x,L)},H.wrap=function(x,L){var ye,pe;return new H({objectMode:(ye=(pe=x.readableObjectMode)!==null&&pe!==void 0?pe:x.objectMode)!==null&&ye!==void 0?ye:!0,...L,destroy(De,Pe){D.destroyer(x,De),Pe(De)}}).wrap(x)}}),((Y,P,r)=>{"use strict";const{ArrayIsArray:h,ObjectSetPrototypeOf:f}=r(70),{EventEmitter:v}=r(75);function l(E){v.call(this,E)}f(l.prototype,v.prototype),f(l,v),l.prototype.pipe=function(E,u){const o=this;function p(b){E.writable&&E.write(b)===!1&&o.pause&&o.pause()}o.on("data",p);function t(){o.readable&&o.resume&&o.resume()}E.on("drain",t),!E._isStdio&&(!u||u.end!==!1)&&(o.on("end",c),o.on("close",i));let n=!1;function c(){n||(n=!0,E.end())}function i(){n||(n=!0,typeof E.destroy=="function"&&E.destroy())}function d(b){w(),v.listenerCount(this,"error")===0&&this.emit("error",b)}g(o,"error",d),g(E,"error",d);function w(){o.removeListener("data",p),E.removeListener("drain",t),o.removeListener("end",c),o.removeListener("close",i),o.removeListener("error",d),E.removeListener("error",d),o.removeListener("end",w),o.removeListener("close",w),E.removeListener("close",w)}return o.on("end",w),o.on("close",w),E.on("close",w),E.emit("pipe",o),E};function g(E,u,o){if(typeof E.prependListener=="function")return E.prependListener(u,o);!E._events||!E._events[u]?E.on(u,o):h(E._events[u])?E._events[u].unshift(o):E._events[u]=[o,E._events[u]]}Y.exports={Stream:l,prependListener:g}}),((Y,P,r)=>{"use strict";const{SymbolDispose:h}=r(70),{AbortError:f,codes:v}=r(73),{isNodeStream:l,isWebStream:g,kControllerErrorFunction:E}=r(79),u=r(78),{ERR_INVALID_ARG_TYPE:o}=v;let p;const t=(n,c)=>{if(typeof n!="object"||!("aborted"in n))throw new o(c,"AbortSignal",n)};Y.exports.addAbortSignal=function(c,i){if(t(c,"signal"),!l(i)&&!g(i))throw new o("stream",["ReadableStream","WritableStream","Stream"],i);return Y.exports.addAbortSignalNoValidate(c,i)},Y.exports.addAbortSignalNoValidate=function(n,c){if(typeof n!="object"||!("aborted"in n))return c;const i=l(c)?()=>{c.destroy(new f(void 0,{cause:n.reason}))}:()=>{c[E](new f(void 0,{cause:n.reason}))};if(n.aborted)i();else{p=p||r(71).addAbortListener;const d=p(n,i);u(c,d[h])}return c}}),((Y,P,r)=>{"use strict";const{StringPrototypeSlice:h,SymbolIterator:f,TypedArrayPrototypeSet:v,Uint8Array:l}=r(70),{Buffer:g}=r(4),{inspect:E}=r(71);Y.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(o){const p={data:o,next:null};this.length>0?this.tail.next=p:this.head=p,this.tail=p,++this.length}unshift(o){const p={data:o,next:this.head};this.length===0&&(this.tail=p),this.head=p,++this.length}shift(){if(this.length===0)return;const o=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,o}clear(){this.head=this.tail=null,this.length=0}join(o){if(this.length===0)return"";let p=this.head,t=""+p.data;for(;(p=p.next)!==null;)t+=o+p.data;return t}concat(o){if(this.length===0)return g.alloc(0);const p=g.allocUnsafe(o>>>0);let t=this.head,n=0;for(;t;)v(p,t.data,n),n+=t.data.length,t=t.next;return p}consume(o,p){const t=this.head.data;if(o<t.length){const n=t.slice(0,o);return this.head.data=t.slice(o),n}return o===t.length?this.shift():p?this._getString(o):this._getBuffer(o)}first(){return this.head.data}*[f](){for(let o=this.head;o;o=o.next)yield o.data}_getString(o){let p="",t=this.head,n=0;do{const c=t.data;if(o>c.length)p+=c,o-=c.length;else{o===c.length?(p+=c,++n,t.next?this.head=t.next:this.head=this.tail=null):(p+=h(c,0,o),this.head=t,t.data=h(c,o));break}++n}while((t=t.next)!==null);return this.length-=n,p}_getBuffer(o){const p=g.allocUnsafe(o),t=o;let n=this.head,c=0;do{const i=n.data;if(o>i.length)v(p,i,t-o),o-=i.length;else{o===i.length?(v(p,i,t-o),++c,n.next?this.head=n.next:this.head=this.tail=null):(v(p,new l(i.buffer,i.byteOffset,o),t-o),this.head=n,n.data=i.slice(o));break}++c}while((n=n.next)!==null);return this.length-=c,p}[Symbol.for("nodejs.util.inspect.custom")](o,p){return E(this,{...p,depth:0,customInspect:!1})}}}),((Y,P,r)=>{"use strict";const{MathFloor:h,NumberIsInteger:f}=r(70),{validateInteger:v}=r(77),{ERR_INVALID_ARG_VALUE:l}=r(73).codes;let g=16*1024,E=16;function u(n,c,i){return n.highWaterMark!=null?n.highWaterMark:c?n[i]:null}function o(n){return n?E:g}function p(n,c){v(c,"value",0),n?E=c:g=c}function t(n,c,i,d){const w=u(c,d,i);if(w!=null){if(!f(w)||w<0){const b=d?`options.${i}`:"options.highWaterMark";throw new l(b,w)}return h(w)}return o(n.objectMode)}Y.exports={getHighWaterMark:t,getDefaultHighWaterMark:o,setDefaultHighWaterMark:p}}),((Y,P,r)=>{"use strict";var h=r(90).Buffer,f=h.isEncoding||function(e){switch(e=""+e,e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function v(e){if(!e)return"utf8";for(var s;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(s)return;e=(""+e).toLowerCase(),s=!0}}function l(e){var s=v(e);if(typeof s!="string"&&(h.isEncoding===f||!f(e)))throw new Error("Unknown encoding: "+e);return s||e}P.StringDecoder=g;function g(e){this.encoding=l(e);var s;switch(this.encoding){case"utf16le":this.text=c,this.end=i,s=4;break;case"utf8":this.fillLast=p,s=4;break;case"base64":this.text=d,this.end=w,s=3;break;default:this.write=b,this.end=m;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=h.allocUnsafe(s)}g.prototype.write=function(e){if(e.length===0)return"";var s,y;if(this.lastNeed){if(s=this.fillLast(e),s===void 0)return"";y=this.lastNeed,this.lastNeed=0}else y=0;return y<e.length?s?s+this.text(e,y):this.text(e,y):s||""},g.prototype.end=n,g.prototype.text=t,g.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length};function E(e){return e<=127?0:e>>5===6?2:e>>4===14?3:e>>3===30?4:e>>6===2?-1:-2}function u(e,s,y){var S=s.length-1;if(S<y)return 0;var D=E(s[S]);return D>=0?(D>0&&(e.lastNeed=D-1),D):--S<y||D===-2?0:(D=E(s[S]),D>=0?(D>0&&(e.lastNeed=D-2),D):--S<y||D===-2?0:(D=E(s[S]),D>=0?(D>0&&(D===2?D=0:e.lastNeed=D-3),D):0))}function o(e,s,y){if((s[0]&192)!==128)return e.lastNeed=0,"\uFFFD";if(e.lastNeed>1&&s.length>1){if((s[1]&192)!==128)return e.lastNeed=1,"\uFFFD";if(e.lastNeed>2&&s.length>2&&(s[2]&192)!==128)return e.lastNeed=2,"\uFFFD"}}function p(e){var s=this.lastTotal-this.lastNeed,y=o(this,e,s);if(y!==void 0)return y;if(this.lastNeed<=e.length)return e.copy(this.lastChar,s,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,s,0,e.length),this.lastNeed-=e.length}function t(e,s){var y=u(this,e,s);if(!this.lastNeed)return e.toString("utf8",s);this.lastTotal=y;var S=e.length-(y-this.lastNeed);return e.copy(this.lastChar,0,S),e.toString("utf8",s,S)}function n(e){var s=e&&e.length?this.write(e):"";return this.lastNeed?s+"\uFFFD":s}function c(e,s){if((e.length-s)%2===0){var y=e.toString("utf16le",s);if(y){var S=y.charCodeAt(y.length-1);if(S>=55296&&S<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],y.slice(0,-1)}return y}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",s,e.length-1)}function i(e){var s=e&&e.length?this.write(e):"";if(this.lastNeed){var y=this.lastTotal-this.lastNeed;return s+this.lastChar.toString("utf16le",0,y)}return s}function d(e,s){var y=(e.length-s)%3;return y===0?e.toString("base64",s):(this.lastNeed=3-y,this.lastTotal=3,y===1?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",s,e.length-y))}function w(e){var s=e&&e.length?this.write(e):"";return this.lastNeed?s+this.lastChar.toString("base64",0,3-this.lastNeed):s}function b(e){return e.toString(this.encoding)}function m(e){return e&&e.length?this.write(e):""}}),((Y,P,r)=>{var h=r(4),f=h.Buffer;function v(g,E){for(var u in g)E[u]=g[u]}f.from&&f.alloc&&f.allocUnsafe&&f.allocUnsafeSlow?Y.exports=h:(v(h,P),P.Buffer=l);function l(g,E,u){return f(g,E,u)}l.prototype=Object.create(f.prototype),v(f,l),l.from=function(g,E,u){if(typeof g=="number")throw new TypeError("Argument must not be a number");return f(g,E,u)},l.alloc=function(g,E,u){if(typeof g!="number")throw new TypeError("Argument must be a number");var o=f(g);return E!==void 0?typeof u=="string"?o.fill(E,u):o.fill(E):o.fill(0),o},l.allocUnsafe=function(g){if(typeof g!="number")throw new TypeError("Argument must be a number");return f(g)},l.allocUnsafeSlow=function(g){if(typeof g!="number")throw new TypeError("Argument must be a number");return h.SlowBuffer(g)}}),((Y,P,r)=>{"use strict";const h=r(3),{PromisePrototypeThen:f,SymbolAsyncIterator:v,SymbolIterator:l}=r(70),{Buffer:g}=r(4),{ERR_INVALID_ARG_TYPE:E,ERR_STREAM_NULL_VALUES:u}=r(73).codes;function o(p,t,n){let c;if(typeof t=="string"||t instanceof g)return new p({objectMode:!0,...n,read(){this.push(t),this.push(null)}});let i;if(t&&t[v])i=!0,c=t[v]();else if(t&&t[l])i=!1,c=t[l]();else throw new E("iterable",["Iterable"],t);const d=new p({objectMode:!0,highWaterMark:1,...n});let w=!1;d._read=function(){w||(w=!0,m())},d._destroy=function(e,s){f(b(e),()=>h.nextTick(s,e),y=>h.nextTick(s,y||e))};async function b(e){const s=e!=null,y=typeof c.throw=="function";if(s&&y){const{value:S,done:D}=await c.throw(e);if(await S,D)return}if(typeof c.return=="function"){const{value:S}=await c.return();await S}}async function m(){for(;;){try{const{value:e,done:s}=i?await c.next():c.next();if(s)d.push(null);else{const y=e&&typeof e.then=="function"?await e:e;if(y===null)throw w=!1,new u;if(d.push(y))continue;w=!1}}catch(e){d.destroy(e)}break}}return d}Y.exports=o}),((Y,P,r)=>{"use strict";const h=r(3),{ArrayPrototypeSlice:f,Error:v,FunctionPrototypeSymbolHasInstance:l,ObjectDefineProperty:g,ObjectDefineProperties:E,ObjectSetPrototypeOf:u,StringPrototypeToLowerCase:o,Symbol:p,SymbolHasInstance:t}=r(70);Y.exports=j,j.WritableState=C;const{EventEmitter:n}=r(75),c=r(85).Stream,{Buffer:i}=r(4),d=r(82),{addAbortSignal:w}=r(86),{getHighWaterMark:b,getDefaultHighWaterMark:m}=r(88),{ERR_INVALID_ARG_TYPE:e,ERR_METHOD_NOT_IMPLEMENTED:s,ERR_MULTIPLE_CALLBACK:y,ERR_STREAM_CANNOT_PIPE:S,ERR_STREAM_DESTROYED:D,ERR_STREAM_ALREADY_FINISHED:R,ERR_STREAM_NULL_VALUES:T,ERR_STREAM_WRITE_AFTER_END:A,ERR_UNKNOWN_ENCODING:k}=r(73).codes,{errorOrDestroy:N}=d;u(j.prototype,c.prototype),u(j,c);function K(){}const V=p("kOnFinished");function C(J,Z,re){typeof re!="boolean"&&(re=Z instanceof r(83)),this.objectMode=!!(J&&J.objectMode),re&&(this.objectMode=this.objectMode||!!(J&&J.writableObjectMode)),this.highWaterMark=J?b(this,J,"writableHighWaterMark",re):m(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const Ee=!!(J&&J.decodeStrings===!1);this.decodeStrings=!Ee,this.defaultEncoding=J&&J.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=F.bind(void 0,Z),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,B(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!J||J.emitClose!==!1,this.autoDestroy=!J||J.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[V]=[]}function B(J){J.buffered=[],J.bufferedIndex=0,J.allBuffers=!0,J.allNoop=!0}C.prototype.getBuffer=function(){return f(this.buffered,this.bufferedIndex)},g(C.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function j(J){const Z=this instanceof r(83);if(!Z&&!l(j,this))return new j(J);this._writableState=new C(J,this,Z),J&&(typeof J.write=="function"&&(this._write=J.write),typeof J.writev=="function"&&(this._writev=J.writev),typeof J.destroy=="function"&&(this._destroy=J.destroy),typeof J.final=="function"&&(this._final=J.final),typeof J.construct=="function"&&(this._construct=J.construct),J.signal&&w(J.signal,this)),c.call(this,J),d.construct(this,()=>{const re=this._writableState;re.writing||fe(this,re),ee(this,re)})}g(j,t,{__proto__:null,value:function(J){return l(this,J)?!0:this!==j?!1:J&&J._writableState instanceof C}}),j.prototype.pipe=function(){N(this,new S)};function q(J,Z,re,Ee){const he=J._writableState;if(typeof re=="function")Ee=re,re=he.defaultEncoding;else{if(!re)re=he.defaultEncoding;else if(re!=="buffer"&&!i.isEncoding(re))throw new k(re);typeof Ee!="function"&&(Ee=K)}if(Z===null)throw new T;if(!he.objectMode)if(typeof Z=="string")he.decodeStrings!==!1&&(Z=i.from(Z,re),re="buffer");else if(Z instanceof i)re="buffer";else if(c._isUint8Array(Z))Z=c._uint8ArrayToBuffer(Z),re="buffer";else throw new e("chunk",["string","Buffer","Uint8Array"],Z);let z;return he.ending?z=new A:he.destroyed&&(z=new D("write")),z?(h.nextTick(Ee,z),N(J,z,!0),z):(he.pendingcb++,ae(J,he,Z,re,Ee))}j.prototype.write=function(J,Z,re){return q(this,J,Z,re)===!0},j.prototype.cork=function(){this._writableState.corked++},j.prototype.uncork=function(){const J=this._writableState;J.corked&&(J.corked--,J.writing||fe(this,J))},j.prototype.setDefaultEncoding=function(Z){if(typeof Z=="string"&&(Z=o(Z)),!i.isEncoding(Z))throw new k(Z);return this._writableState.defaultEncoding=Z,this};function ae(J,Z,re,Ee,he){const z=Z.objectMode?1:re.length;Z.length+=z;const M=Z.length<Z.highWaterMark;return M||(Z.needDrain=!0),Z.writing||Z.corked||Z.errored||!Z.constructed?(Z.buffered.push({chunk:re,encoding:Ee,callback:he}),Z.allBuffers&&Ee!=="buffer"&&(Z.allBuffers=!1),Z.allNoop&&he!==K&&(Z.allNoop=!1)):(Z.writelen=z,Z.writecb=he,Z.writing=!0,Z.sync=!0,J._write(re,Ee,Z.onwrite),Z.sync=!1),M&&!Z.errored&&!Z.destroyed}function Q(J,Z,re,Ee,he,z,M){Z.writelen=Ee,Z.writecb=M,Z.writing=!0,Z.sync=!0,Z.destroyed?Z.onwrite(new D("write")):re?J._writev(he,Z.onwrite):J._write(he,z,Z.onwrite),Z.sync=!1}function ue(J,Z,re,Ee){--Z.pendingcb,Ee(re),oe(Z),N(J,re)}function F(J,Z){const re=J._writableState,Ee=re.sync,he=re.writecb;if(typeof he!="function"){N(J,new y);return}re.writing=!1,re.writecb=null,re.length-=re.writelen,re.writelen=0,Z?(Z.stack,re.errored||(re.errored=Z),J._readableState&&!J._readableState.errored&&(J._readableState.errored=Z),Ee?h.nextTick(ue,J,re,Z,he):ue(J,re,Z,he)):(re.buffered.length>re.bufferedIndex&&fe(J,re),Ee?re.afterWriteTickInfo!==null&&re.afterWriteTickInfo.cb===he?re.afterWriteTickInfo.count++:(re.afterWriteTickInfo={count:1,cb:he,stream:J,state:re},h.nextTick(ie,re.afterWriteTickInfo)):me(J,re,1,he))}function ie({stream:J,state:Z,count:re,cb:Ee}){return Z.afterWriteTickInfo=null,me(J,Z,re,Ee)}function me(J,Z,re,Ee){for(!Z.ending&&!J.destroyed&&Z.length===0&&Z.needDrain&&(Z.needDrain=!1,J.emit("drain"));re-- >0;)Z.pendingcb--,Ee();Z.destroyed&&oe(Z),ee(J,Z)}function oe(J){if(J.writing)return;for(let he=J.bufferedIndex;he<J.buffered.length;++he){var Z;const{chunk:z,callback:M}=J.buffered[he],W=J.objectMode?1:z.length;J.length-=W,M((Z=J.errored)!==null&&Z!==void 0?Z:new D("write"))}const re=J[V].splice(0);for(let he=0;he<re.length;he++){var Ee;re[he]((Ee=J.errored)!==null&&Ee!==void 0?Ee:new D("end"))}B(J)}function fe(J,Z){if(Z.corked||Z.bufferProcessing||Z.destroyed||!Z.constructed)return;const{buffered:re,bufferedIndex:Ee,objectMode:he}=Z,z=re.length-Ee;if(!z)return;let M=Ee;if(Z.bufferProcessing=!0,z>1&&J._writev){Z.pendingcb-=z-1;const W=Z.allNoop?K:H=>{for(let Se=M;Se<re.length;++Se)re[Se].callback(H)},$=Z.allNoop&&M===0?re:f(re,M);$.allBuffers=Z.allBuffers,Q(J,Z,!0,Z.length,$,"",W),B(Z)}else{do{const{chunk:W,encoding:$,callback:H}=re[M];re[M++]=null;const Se=he?1:W.length;Q(J,Z,!1,Se,W,$,H)}while(M<re.length&&!Z.writing);M===re.length?B(Z):M>256?(re.splice(0,M),Z.bufferedIndex=0):Z.bufferedIndex=M}Z.bufferProcessing=!1}j.prototype._write=function(J,Z,re){if(this._writev)this._writev([{chunk:J,encoding:Z}],re);else throw new s("_write()")},j.prototype._writev=null,j.prototype.end=function(J,Z,re){const Ee=this._writableState;typeof J=="function"?(re=J,J=null,Z=null):typeof Z=="function"&&(re=Z,Z=null);let he;if(J!=null){const z=q(this,J,Z);z instanceof v&&(he=z)}return Ee.corked&&(Ee.corked=1,this.uncork()),he||(!Ee.errored&&!Ee.ending?(Ee.ending=!0,ee(this,Ee,!0),Ee.ended=!0):Ee.finished?he=new R("end"):Ee.destroyed&&(he=new D("end"))),typeof re=="function"&&(he||Ee.finished?h.nextTick(re,he):Ee[V].push(re)),this};function le(J){return J.ending&&!J.destroyed&&J.constructed&&J.length===0&&!J.errored&&J.buffered.length===0&&!J.finished&&!J.writing&&!J.errorEmitted&&!J.closeEmitted}function we(J,Z){let re=!1;function Ee(he){if(re){N(J,he??y());return}if(re=!0,Z.pendingcb--,he){const z=Z[V].splice(0);for(let M=0;M<z.length;M++)z[M](he);N(J,he,Z.sync)}else le(Z)&&(Z.prefinished=!0,J.emit("prefinish"),Z.pendingcb++,h.nextTick(ne,J,Z))}Z.sync=!0,Z.pendingcb++;try{J._final(Ee)}catch(he){Ee(he)}Z.sync=!1}function ge(J,Z){!Z.prefinished&&!Z.finalCalled&&(typeof J._final=="function"&&!Z.destroyed?(Z.finalCalled=!0,we(J,Z)):(Z.prefinished=!0,J.emit("prefinish")))}function ee(J,Z,re){le(Z)&&(ge(J,Z),Z.pendingcb===0&&(re?(Z.pendingcb++,h.nextTick((Ee,he)=>{le(he)?ne(Ee,he):he.pendingcb--},J,Z)):le(Z)&&(Z.pendingcb++,ne(J,Z))))}function ne(J,Z){Z.pendingcb--,Z.finished=!0;const re=Z[V].splice(0);for(let Ee=0;Ee<re.length;Ee++)re[Ee]();if(J.emit("finish"),Z.autoDestroy){const Ee=J._readableState;(!Ee||Ee.autoDestroy&&(Ee.endEmitted||Ee.readable===!1))&&J.destroy()}}E(j.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(J){this._writableState&&(this._writableState.destroyed=J)}},writable:{__proto__:null,get(){const J=this._writableState;return!!J&&J.writable!==!1&&!J.destroyed&&!J.errored&&!J.ending&&!J.ended},set(J){this._writableState&&(this._writableState.writable=!!J)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const J=this._writableState;return J?!J.destroyed&&!J.ending&&J.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const ce=d.destroy;j.prototype.destroy=function(J,Z){const re=this._writableState;return!re.destroyed&&(re.bufferedIndex<re.buffered.length||re[V].length)&&h.nextTick(oe,re),ce.call(this,J,Z),this},j.prototype._undestroy=d.undestroy,j.prototype._destroy=function(J,Z){Z(J)},j.prototype[n.captureRejectionSymbol]=function(J){this.destroy(J)};let de;function be(){return de===void 0&&(de={}),de}j.fromWeb=function(J,Z){return be().newStreamWritableFromWritableStream(J,Z)},j.toWeb=function(J){return be().newWritableStreamFromStreamWritable(J)}}),((Y,P,r)=>{const h=r(3),f=r(4),{isReadable:v,isWritable:l,isIterable:g,isNodeStream:E,isReadableNodeStream:u,isWritableNodeStream:o,isDuplexNodeStream:p,isReadableStream:t,isWritableStream:n}=r(79),c=r(78),{AbortError:i,codes:{ERR_INVALID_ARG_TYPE:d,ERR_INVALID_RETURN_VALUE:w}}=r(73),{destroyer:b}=r(82),m=r(83),e=r(84),s=r(92),{createDeferredPromise:y}=r(71),S=r(91),D=globalThis.Blob||f.Blob,R=typeof D<"u"?function(C){return C instanceof D}:function(C){return!1},T=globalThis.AbortController||r(74).AbortController,{FunctionPrototypeCall:A}=r(70);class k extends m{constructor(C){super(C),C?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),C?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}Y.exports=function V(C,B){if(p(C))return C;if(u(C))return K({readable:C});if(o(C))return K({writable:C});if(E(C))return K({writable:!1,readable:!1});if(t(C))return K({readable:e.fromWeb(C)});if(n(C))return K({writable:s.fromWeb(C)});if(typeof C=="function"){const{value:q,write:ae,final:Q,destroy:ue}=N(C);if(g(q))return S(k,q,{objectMode:!0,write:ae,final:Q,destroy:ue});const F=q?.then;if(typeof F=="function"){let ie;const me=A(F,q,oe=>{if(oe!=null)throw new w("nully","body",oe)},oe=>{b(ie,oe)});return ie=new k({objectMode:!0,readable:!1,write:ae,final(oe){Q(async()=>{try{await me,h.nextTick(oe,null)}catch(fe){h.nextTick(oe,fe)}})},destroy:ue})}throw new w("Iterable, AsyncIterable or AsyncFunction",B,q)}if(R(C))return V(C.arrayBuffer());if(g(C))return S(k,C,{objectMode:!0,writable:!1});if(t(C?.readable)&&n(C?.writable))return k.fromWeb(C);if(typeof C?.writable=="object"||typeof C?.readable=="object"){const q=C!=null&&C.readable?u(C?.readable)?C?.readable:V(C.readable):void 0,ae=C!=null&&C.writable?o(C?.writable)?C?.writable:V(C.writable):void 0;return K({readable:q,writable:ae})}const j=C?.then;if(typeof j=="function"){let q;return A(j,C,ae=>{ae!=null&&q.push(ae),q.push(null)},ae=>{b(q,ae)}),q=new k({objectMode:!0,writable:!1,read(){}})}throw new d(B,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],C)};function N(V){let{promise:C,resolve:B}=y();const j=new T,q=j.signal;return{value:V((async function*(){for(;;){const Q=C;C=null;const{chunk:ue,done:F,cb:ie}=await Q;if(h.nextTick(ie),F)return;if(q.aborted)throw new i(void 0,{cause:q.reason});({promise:C,resolve:B}=y()),yield ue}})(),{signal:q}),write(Q,ue,F){const ie=B;B=null,ie({chunk:Q,done:!1,cb:F})},final(Q){const ue=B;B=null,ue({done:!0,cb:Q})},destroy(Q,ue){j.abort(),ue(Q)}}}function K(V){const C=V.readable&&typeof V.readable.read!="function"?e.wrap(V.readable):V.readable,B=V.writable;let j=!!v(C),q=!!l(B),ae,Q,ue,F,ie;function me(oe){const fe=F;F=null,fe?fe(oe):oe&&ie.destroy(oe)}return ie=new k({readableObjectMode:!!(C!=null&&C.readableObjectMode),writableObjectMode:!!(B!=null&&B.writableObjectMode),readable:j,writable:q}),q&&(c(B,oe=>{q=!1,oe&&b(C,oe),me(oe)}),ie._write=function(oe,fe,le){B.write(oe,fe)?le():ae=le},ie._final=function(oe){B.end(),Q=oe},B.on("drain",function(){if(ae){const oe=ae;ae=null,oe()}}),B.on("finish",function(){if(Q){const oe=Q;Q=null,oe()}})),j&&(c(C,oe=>{j=!1,oe&&b(C,oe),me(oe)}),C.on("readable",function(){if(ue){const oe=ue;ue=null,oe()}}),C.on("end",function(){ie.push(null)}),ie._read=function(){for(;;){const oe=C.read();if(oe===null){ue=ie._read;return}if(!ie.push(oe))return}}),ie._destroy=function(oe,fe){!oe&&F!==null&&(oe=new i),ue=null,ae=null,Q=null,F===null?fe(oe):(F=fe,b(B,oe),b(C,oe))},ie}}),((Y,P,r)=>{"use strict";const{ObjectSetPrototypeOf:h}=r(70);Y.exports=v;const f=r(95);h(v.prototype,f.prototype),h(v,f);function v(l){if(!(this instanceof v))return new v(l);f.call(this,l)}v.prototype._transform=function(l,g,E){E(null,l)}}),((Y,P,r)=>{"use strict";const{ObjectSetPrototypeOf:h,Symbol:f}=r(70);Y.exports=u;const{ERR_METHOD_NOT_IMPLEMENTED:v}=r(73).codes,l=r(83),{getHighWaterMark:g}=r(88);h(u.prototype,l.prototype),h(u,l);const E=f("kCallback");function u(t){if(!(this instanceof u))return new u(t);const n=t?g(this,t,"readableHighWaterMark",!0):null;n===0&&(t={...t,highWaterMark:null,readableHighWaterMark:n,writableHighWaterMark:t.writableHighWaterMark||0}),l.call(this,t),this._readableState.sync=!1,this[E]=null,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",p)}function o(t){typeof this._flush=="function"&&!this.destroyed?this._flush((n,c)=>{if(n){t?t(n):this.destroy(n);return}c!=null&&this.push(c),this.push(null),t&&t()}):(this.push(null),t&&t())}function p(){this._final!==o&&o.call(this)}u.prototype._final=o,u.prototype._transform=function(t,n,c){throw new v("_transform()")},u.prototype._write=function(t,n,c){const i=this._readableState,d=this._writableState,w=i.length;this._transform(t,n,(b,m)=>{if(b){c(b);return}m!=null&&this.push(m),d.ended||w===i.length||i.length<i.highWaterMark?c():this[E]=c})},u.prototype._read=function(){if(this[E]){const t=this[E];this[E]=null,t()}}}),((Y,P,r)=>{"use strict";const{ArrayPrototypePop:h,Promise:f}=r(70),{isIterable:v,isNodeStream:l,isWebStream:g}=r(79),{pipelineImpl:E}=r(81),{finished:u}=r(78);r(69);function o(...p){return new f((t,n)=>{let c,i;const d=p[p.length-1];if(d&&typeof d=="object"&&!l(d)&&!v(d)&&!g(d)){const w=h(p);c=w.signal,i=w.end}E(p,(w,b)=>{w?n(w):t(b)},{signal:c,end:i})})}Y.exports={finished:u,pipeline:o}}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{Fetch:()=>c,FetchFS:()=>t});var h=r(10),f=r(24),v=r(12),l=r(98),g=r(44),E=r(99),u=r(46),o=r(31);function p(i){if(!("tag"in i))throw(0,f.err)((0,h.withErrno)("EIO",i.stack));switch(i.tag){case"fetch":throw(0,f.err)((0,h.withErrno)("EREMOTEIO",i.message));case"status":throw(0,f.err)((0,h.withErrno)(i.response.status>500?"EREMOTEIO":"EIO","Response status code is "+i.response.status));case"size":throw(0,f.err)((0,h.withErrno)("EBADE",i.message));case"buffer":throw(0,f.err)((0,h.withErrno)("EIO","Failed to decode buffer"))}}class t extends E.IndexFS{baseUrl;requestInit;remoteWrite;_asyncDone=Promise.resolve();_async(d){this._asyncDone=this._asyncDone.then(()=>d)}constructor(d,w,b={},m){super(544106099,"nfs",d),this.baseUrl=w,this.requestInit=b,this.remoteWrite=m}async remove(d){await l.remove(this.baseUrl+d,{warn:f.warn,cacheOnly:!this.remoteWrite},this.requestInit)}removeSync(d){this._async(l.remove(this.baseUrl+d,{warn:f.warn,cacheOnly:!this.remoteWrite},this.requestInit))}async read(d,w,b=0,m){const e=this.index.get(d);if(!e)throw(0,h.withErrno)("ENOENT");if(m-b==0)return;const s=await l.get(this.baseUrl+d,{start:b,end:m,size:e.size,warn:f.warn},this.requestInit).catch(p).catch(()=>{});if(!s)throw(0,h.withErrno)("ENODATA");w.set(s)}readSync(d,w,b=0,m){const e=this.index.get(d);if(!e)throw(0,h.withErrno)("ENOENT");if(m-b==0)return;const{data:s,missing:y}=l.getCached(this.baseUrl+d,{start:b,end:m,size:e.size,warn:f.warn});if(!s)throw(0,h.withErrno)("ENODATA");if(y.length)throw this._async(l.get(this.baseUrl+d,{start:b,end:m,size:e.size,warn:f.warn})),(0,h.withErrno)("EAGAIN");w.set(s)}async write(d,w,b){const m=this.index.get(d);if(!m)throw(0,h.withErrno)("ENOENT");m.update({mtimeMs:Date.now(),size:Math.max(m.size,w.byteLength+b)}),await l.set(this.baseUrl+d,w,{offset:b,warn:f.warn,cacheOnly:!this.remoteWrite},this.requestInit).catch(p)}writeSync(d,w,b){const m=this.index.get(d);if(!m)throw(0,h.withErrno)("ENOENT");m.update({mtimeMs:Date.now(),size:Math.max(m.size,w.byteLength+b)}),this._async(l.set(this.baseUrl+d,w,{offset:b,warn:f.warn,cacheOnly:!this.remoteWrite},this.requestInit).catch(p))}}const c={name:"Fetch",options:{index:{type:["string","object"],required:!1},baseUrl:{type:"string",required:!0},requestInit:{type:"object",required:!1},remoteWrite:{type:"boolean",required:!1}},isAvailable(){return typeof globalThis.fetch=="function"},async create(i){const d=new URL(i.baseUrl);d.pathname=(0,u.normalizePath)(d.pathname);let w=d.toString();w.at(-1)=="/"&&(w=w.slice(0,-1)),i.index??="index.json";const b=new g.Index;if(typeof i.index!="string")b.fromJSON(i.index);else{const e=await l.get(i.index,{warn:f.warn},i.requestInit).catch(p);b.fromJSON(JSON.parse((0,v.decodeUTF8)(e)))}const m=new t(b,w,i.requestInit,i.remoteWrite);if(i.disableAsyncCache)return m;for(const[e,s]of b)s.mode&o.S_IFREG&&await l.get(w+e,{warn:f.warn},i.requestInit).catch(p);return m}}}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{GET:()=>E,ResourceCache:()=>f,get:()=>g,getCached:()=>u,remove:()=>p,resourcesCache:()=>v,set:()=>o});var h=r(51);const f=h.Resource,v=new Map;async function l(t,n={},c=!1){const i=await fetch(t,n).catch(w=>{throw{tag:"fetch",message:w.message}});if(!i.ok)throw{tag:"status",response:i};const d=await i.arrayBuffer().catch(w=>{if(!c)throw{tag:"buffer",response:i,message:w.message}});return{response:i,data:d?new Uint8Array(d):void 0}}async function g(t,n,c={}){const i=new Request(t,c);if(typeof n.start!="number"||typeof n.end!="number"){const{data:s}=await l(t,c);return new h.Resource(t,s.byteLength,n,v).add(s,0),s}if(typeof n.size!="number"){n.warn?.(t+": Size not provided, an additional HEAD request is being made");const{headers:s}=await fetch(i,{method:"HEAD"}),y=parseInt(s.get("Content-Length")??"");if(typeof y!="number")throw{tag:"size",message:"Response is missing content-length header and no size was provided"};n.size=y}const{size:d,start:w,end:b}=n,m=v.get(t)??new h.Resource(t,d,n,v);i.headers.set("If-Range",new Date().toUTCString());for(const{start:s,end:y}of m.missing(w,b)){const{data:S,response:D}=await l(i,{headers:{Range:`bytes=${s}-${y}`}});if(D.status==206){m.add(S,s);continue}return n.warn?.(t+": Remote does not support range requests with bytes. Falling back to full data."),new h.Resource(t,d,n,v).add(S,0),S.subarray(w,b)}m.collect();const e=m.regionAt(w);return e.data.subarray(w-e.offset,b-e.offset)}const E=g;function u(t,n){const c=v.get(t);if(!c)return n.size?{data:new Uint8Array(0),missing:[{start:0,end:n.size??0}]}:(n.warn?.(t+": Size not provided and cache is empty, can not determine missing range"),{data:void 0,missing:[]});const{start:i=0,end:d=c.size}=n,w=new Uint8Array(d-i);for(const b of c.regions)if(!(b.offset+b.data.byteLength<=i)){if(b.offset>=d)break;for(const m of b.ranges){if(m.end<=i)continue;if(m.start>=d)break;const e=Math.max(m.start,i),s=Math.min(m.end,d);e>=s||w.set(b.data.subarray(e-b.offset,s-b.offset),e-i)}}return{data:w,missing:c.missing(i,d)}}async function o(t,n,c,i={}){v.has(t)||new h.Resource(t,c.size??n.byteLength,c,v);const d=v.get(t),{offset:w=0,method:b="POST"}=c;if(!c.cacheOnly){const m=new Headers(i.headers||{});if(m.get("Content-Type")||m.set("Content-Type","application/octet-stream"),!m.get("Content-Range")&&(w!==0||n.byteLength!==d.size)){const e=w,s=w+n.byteLength-1,y=Math.max(d.size,s+1);m.set("Content-Range",`bytes ${e}-${s}/${y}`)}await l(new Request(t,{...i,method:b,headers:m,body:n.buffer instanceof ArrayBuffer?n:Uint8Array.from(n)}),{},!0)}d.add(n,w)}async function p(t,n={},c={}){n.cacheOnly||await l(new Request(t,c),{method:"DELETE"},!0),v.delete(t)}}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{IndexFS:()=>o});var h=r(10),f=r(12),v=r(45),l=r(31),g=r(44),E=r(49),u=r(47);class o extends E.FileSystem{index;constructor(t,n,c=new g.Index){super(t,n),this.index=c}usage(){return this.index.usage()}pathsForRename(t,n){if(!this.index.has(t))throw(0,h.withErrno)("ENOENT");if(((0,v.dirname)(n)+"/").startsWith(t+"/"))throw(0,h.withErrno)("EBUSY");const c=[];for(const[i,d]of this.index.entries()){const w=(0,v.relative)(t,i);if(w.startsWith(".."))continue;let b=(0,v.join)(n,w);b.endsWith("/")&&(b=b.slice(0,-1)),c.push({from:i,to:b,inode:d})}return c.sort((i,d)=>d.from.length-i.from.length),c}async rename(t,n){if(t==n)return;const c=this.pathsForRename(t,n),i=new Map;for(const{from:d,to:w,inode:b}of c){const m=new Uint8Array(b.size);await this.read(d,m,0,b.size),i.set(w,m),this.index.delete(d),await this.remove(d),this.index.has(w)&&await this.remove(w)}c.reverse();for(const{to:d,inode:w}of c){const b=i.get(d);this.index.set(d,w),(w.mode&l.S_IFMT)==l.S_IFDIR?await this._mkdir?.(d,w):await this.write(d,b,0)}}renameSync(t,n){if(t==n)return;const c=this.pathsForRename(t,n),i=new Map;for(const{from:d,to:w,inode:b}of c){const m=new Uint8Array(b.size);this.readSync(d,m,0,b.size),i.set(w,m),this.index.delete(d),this.removeSync(d),this.index.has(w)&&this.removeSync(w)}c.reverse();for(const{to:d,inode:w}of c){const b=i.get(d);this.index.set(d,w),(w.mode&l.S_IFMT)==l.S_IFDIR?this._mkdirSync?.(d,w):this.writeSync(d,b,0)}}async stat(t){const n=this.index.get(t);if(!n)throw(0,h.withErrno)("ENOENT");return n}statSync(t){const n=this.index.get(t);if(!n)throw(0,h.withErrno)("ENOENT");return n}async touch(t,n){(this.index.get(t)??(0,f._throw)((0,h.withErrno)("ENOENT"))).update(n)}touchSync(t,n){(this.index.get(t)??(0,f._throw)((0,h.withErrno)("ENOENT"))).update(n)}_remove(t,n){const c=this.index.get(t);if(!c)throw(0,h.withErrno)("ENOENT");const i=(c.mode&l.S_IFMT)==l.S_IFDIR;if(!i&&!n)throw(0,h.withErrno)("ENOTDIR");if(i&&n)throw(0,h.withErrno)("EISDIR");i||this.index.delete(t)}async unlink(t){this._remove(t,!0),await this.remove(t)}unlinkSync(t){this._remove(t,!0),this.removeSync(t)}async rmdir(t){if(this._remove(t,!1),(await this.readdir(t)).length)throw(0,h.withErrno)("ENOTEMPTY");this.index.delete(t),await this.remove(t)}rmdirSync(t){if(this._remove(t,!1),this.readdirSync(t).length)throw(0,h.withErrno)("ENOTEMPTY");this.index.delete(t),this.removeSync(t)}create(t,n){if(this.index.has(t))throw(0,h.withErrno)("EEXIST");const c=this.index.get((0,v.dirname)(t));if(!c)throw(0,h.withErrno)("ENOENT");const i=this.index._alloc(),d=new u.Inode({ino:i,data:i+1,mode:n.mode,size:0,uid:c.mode&l.S_ISUID?c.uid:n.uid,gid:c.mode&l.S_ISGID?c.gid:n.gid,nlink:1});return this.index.set(t,d),d}async createFile(t,n){return n.mode|=l.S_IFREG,this.create(t,n)}createFileSync(t,n){return n.mode|=l.S_IFREG,this.create(t,n)}async mkdir(t,n){n.mode|=l.S_IFDIR;const c=this.create(t,n);return await this._mkdir?.(t,n),c}mkdirSync(t,n){n.mode|=l.S_IFDIR;const c=this.create(t,n);return this._mkdirSync?.(t,n),c}link(t,n){throw(0,h.withErrno)("ENOSYS")}linkSync(t,n){throw(0,h.withErrno)("ENOSYS")}async readdir(t){return Object.keys(this.index.directoryEntries(t))}readdirSync(t){return Object.keys(this.index.directoryEntries(t))}async sync(){}syncSync(){}}}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{Passthrough:()=>p,PassthroughFS:()=>u});var h=r(24),f=r(49),v=r(47),l=r(45),g=function(t,n,c){if(n!=null){if(typeof n!="object"&&typeof n!="function")throw new TypeError("Object expected.");var i,d;if(c){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");i=n[Symbol.asyncDispose]}if(i===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");i=n[Symbol.dispose],c&&(d=i)}if(typeof i!="function")throw new TypeError("Object not disposable.");d&&(i=function(){try{d.call(this)}catch(w){return Promise.reject(w)}}),t.stack.push({value:n,dispose:i,async:c})}else c&&t.stack.push({async:!0});return n},E=(function(t){return function(n){function c(b){n.error=n.hasError?new t(b,n.error,"An error was suppressed during disposal."):b,n.hasError=!0}var i,d=0;function w(){for(;i=n.stack.pop();)try{if(!i.async&&d===1)return d=0,n.stack.push(i),Promise.resolve().then(w);if(i.dispose){var b=i.dispose.call(i.value);if(i.async)return d|=2,Promise.resolve(b).then(w,function(m){return c(m),w()})}else d|=1}catch(m){c(m)}if(d===1)return n.hasError?Promise.reject(n.error):Promise.resolve();if(n.hasError)throw n.error}return w()}})(typeof SuppressedError=="function"?SuppressedError:function(t,n,c){var i=new Error(c);return i.name="SuppressedError",i.error=t,i.suppressed=n,i});class u extends f.FileSystem{nodeFS;prefix;constructor(n,c){super(1852793957,"nodefs"),this.nodeFS=n,this.prefix=c}usage(){const n=this.nodeFS.statfsSync(this.prefix);return{totalSpace:n.bsize*n.blocks,freeSpace:n.bsize*n.bfree}}path(n){return this.prefix+n}async rename(n,c){await this.nodeFS.promises.rename(this.path(n),this.path(c))}renameSync(n,c){this.nodeFS.renameSync(this.path(n),this.path(c))}async stat(n){return await this.nodeFS.promises.stat(this.path(n))}statSync(n){return this.nodeFS.statSync(this.path(n))}async touch(n,c){const i={stack:[],error:void 0,hasError:!1};try{const d=g(i,await this.nodeFS.promises.open(this.path(n),"r"),!0);await d.chmod(c.mode);try{await d.chown(c.uid,c.gid)}catch(w){(0,h.err)("Failed to chown passthrough file: "+w.message)}}catch(d){i.error=d,i.hasError=!0}finally{const d=E(i);d&&await d}}touchSync(n,c){this.nodeFS.chmodSync(this.path(n),c.mode);try{this.nodeFS.chownSync(this.path(n),c.uid,c.gid)}catch(i){(0,h.err)("Failed to chown passthrough file: "+i.message)}}async unlink(n){await this.nodeFS.promises.unlink(this.path(n))}unlinkSync(n){this.nodeFS.unlinkSync(this.path(n))}async mkdir(n,c){return await this.nodeFS.promises.mkdir(this.path(n),c),await this.nodeFS.promises.stat(this.path(n))}mkdirSync(n,c){return this.nodeFS.mkdirSync(this.path(n),c),this.nodeFS.statSync(this.path(n))}async readdir(n){return await this.nodeFS.promises.readdir(this.path(n))}readdirSync(n){return this.nodeFS.readdirSync(this.path(n))}async createFile(n,c){if((0,v.isDirectory)(c))await this.nodeFS.promises.mkdir(this.path(n),{mode:c.mode});else{const i={stack:[],error:void 0,hasError:!1};try{await g(i,await this.nodeFS.promises.open(this.path(n),"wx"),!0).close()}catch(d){i.error=d,i.hasError=!0}finally{const d=E(i);d&&await d}}return await this.nodeFS.promises.stat(this.path(n))}createFileSync(n,c){if((0,v.isDirectory)(c))this.nodeFS.mkdirSync(this.path(n),{mode:c.mode});else{const i=this.nodeFS.openSync(this.path(n),"wx");this.nodeFS.closeSync(i)}return this.nodeFS.statSync(this.path(n))}async rmdir(n){await this.nodeFS.promises.rmdir(this.path(n))}rmdirSync(n){this.nodeFS.rmdirSync(this.path(n))}async sync(){(0,h.warn)("Sync on passthrough is unnecessary")}syncSync(){(0,h.warn)("Sync on passthrough is unnecessary")}async link(n,c){await this.nodeFS.promises.link(this.path(n),this.path(c))}linkSync(n,c){this.nodeFS.linkSync(this.path(n),this.path(c))}async read(n,c,i,d){const w={stack:[],error:void 0,hasError:!1};try{await g(w,await this.nodeFS.promises.open(this.path(n),"r"),!0).read({buffer:c,offset:i,length:d-i})}catch(b){w.error=b,w.hasError=!0}finally{const b=E(w);b&&await b}}readSync(n,c,i,d){const w=this.nodeFS.openSync(this.path(n),"r");try{this.nodeFS.readSync(w,c,{offset:i,length:d-i})}finally{this.nodeFS.closeSync(w)}}async write(n,c,i){const d={stack:[],error:void 0,hasError:!1};try{await g(d,await this.nodeFS.promises.open(this.path(n),"w"),!0).write(c,i)}catch(w){d.error=w,d.hasError=!0}finally{const w=E(d);w&&await w}}writeSync(n,c,i){const d=this.nodeFS.openSync(this.path(n),"w");try{this.nodeFS.writeSync(d,c,i)}finally{this.nodeFS.closeSync(d)}}}const p={name:"Passthrough",options:{fs:{type:"object",required:!0},prefix:{type:"string",required:!0}},create({fs:t,prefix:n}){return new u(t,(0,l.resolve)(n))}}}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{Port:()=>i,PortFS:()=>p,RPC:()=>g,attachFS:()=>t,detachFS:()=>n,resolveRemoteMount:()=>d});var h=r(24),f=r(26),v=r(49),l=r(47),g=r(102),E=r(103),u=r(52),o=r(30);class p extends(0,E.Async)(v.FileSystem){channel;timeout;port;_sync=o.InMemory.create({label:"tmpfs:port"});constructor(b,m=250){super(1886351988,"portfs"),this.channel=b,this.timeout=m,this.port=g.from(b),g.attach(this.port,g.handleResponse)}rpc(b,...m){return g.request({method:b,args:m},{port:this.port,timeout:this.timeout,fs:this})}async ready(){await this.rpc("ready"),await super.ready()}rename(b,m){return this.rpc("rename",b,m)}async stat(b){const m=await this.rpc("stat",b);return m instanceof l.Inode?m:new l.Inode(m)}async touch(b,m){const e=m instanceof l.Inode?m:new l.Inode(m);await this.rpc("touch",b,new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}async sync(){await super.sync(),await this.rpc("sync")}async createFile(b,m){m instanceof l.Inode&&(m=m.toJSON());const e=await this.rpc("createFile",b,m);return e instanceof l.Inode?e:new l.Inode(e)}unlink(b){return this.rpc("unlink",b)}rmdir(b){return this.rpc("rmdir",b)}async mkdir(b,m){m instanceof l.Inode&&(m=m.toJSON());const e=await this.rpc("mkdir",b,m);return e instanceof l.Inode?e:new l.Inode(e)}readdir(b){return this.rpc("readdir",b)}exists(b){return this.rpc("exists",b)}link(b,m){return this.rpc("link",b,m)}async read(b,m,e,s){m.set(await this.rpc("read",b,m,e,s))}write(b,m,e){return this.rpc("write",b,m,e)}}function t(w,b){const m=g.from(w);g.attach(m,e=>g.handleRequest(m,b,e))}function n(w,b){const m=g.from(w);g.detach(m,e=>g.handleRequest(m,b,e))}const i={name:"Port",options:{port:{type:[EventTarget,function(b){return typeof b=="object"&&"on"in b}],required:!0},timeout:{type:"number",required:!1}},create(w){return new p(w.port,w.timeout)}};async function d(w,b,m=0){const e=g.from(w),s=g.catchMessages(e),y=await(0,f.resolveMountConfig)(b,m);return t(e,y),await s(y),(0,h.info)("Resolved remote mount: "+y.toString()),y}}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{attach:()=>S,catchMessages:()=>R,decodeMessage:()=>i,detach:()=>D,encodeMessage:()=>c,from:()=>t,fromNode:()=>o,fromWeb:()=>u,fromWebSocket:()=>p,handleRequest:()=>T,handleResponse:()=>y,isMessage:()=>d,isPort:()=>E,request:()=>m});var h=r(10),f=r(24),v=r(12),l=r(47),g=r(52);function E(A){return A!=null&&typeof A=="object"&&"channel"in A&&"send"in A&&"addHandler"in A&&"removeHandler"in A}function u(A){const k=new Map;return{channel:A,send:A.postMessage.bind(A),addHandler(N){const K=V=>N(V.data);k.set(N,K),A.addEventListener("message",K)},removeHandler(N){A.removeEventListener("message",k.get(N))}}}function o(A){return{channel:A,send:A.postMessage.bind(A),addHandler:A.on.bind(A,"message"),removeHandler:A.off.bind(A,"message")}}function p(A){return{channel:A,send(k){A.send(c(k))},addHandler(k){A.addEventListener("message",N=>{k(i(N.data))})},removeHandler(k){A.removeEventListener("message",N=>{k(i(N.data))})}}}function t(A){if(E(A))return A;if(A instanceof WebSocket)return p(A);if("on"in A)return o(A);if("addEventListener"in A)return u(A);throw(0,f.err)((0,h.withErrno)("EINVAL","Invalid port type"))}const n=1;function c(A){return`Z${n}${JSON.stringify(A,(k,N)=>{if(k!="_zenfs")return N instanceof Uint8Array?"$"+N.toBase64():N})}`}function i(A){if(!A.startsWith("Z"))return{};A=A.slice(1);const k=parseInt(A);if(isNaN(k))return(0,f.warn)("Ignoring encoded message with missing version"),{};if(A=A.slice(k.toString().length),!(0,v.isJSON)(A))return(0,f.warn)("Ignoring encoded message with invalid JSON"),{};if(k!=n)throw(0,f.err)((0,h.withErrno)("EPROTONOSUPPORT",`Version mismatch in RPC message encoding (got ${k}, expected ${n})`));return{...JSON.parse(A,(N,K)=>typeof K=="string"&&K.startsWith("$")?Uint8Array.fromBase64(K.slice(1)):K),_zenfs:!0}}function d(A){return typeof A=="object"&&A!=null&&"_zenfs"in A&&!!A._zenfs}function w(A){const k=b.get(A);k&&(k.timeout&&(clearTimeout(k.timeout),typeof k.timeout=="object"&&k.timeout.unref()),b.delete(A))}const b=new Map;function m(A,{port:k,timeout:N=1e3,fs:K}){const V=`
`+new Error().stack.slice(6);if(!k)throw(0,f.err)((0,h.withErrno)("EINVAL","Can not make an RPC request without a port"));const{resolve:C,reject:B,promise:j}=Promise.withResolvers(),q=Math.random().toString(16).slice(5),ae=setTimeout(()=>{const ue=(0,f.err)((0,h.withErrno)("ETIMEDOUT","RPC request timed out"));ue.stack+=V,w(q),B(ue)},N),Q={resolve:C,reject:B,promise:j,fs:K,timeout:ae};return b.set(q,Q),k.send({...A,_zenfs:!0,id:q,stack:V}),j}function e(A){}function s(A,...k){return k.includes(A.method)}function y(A){if(!d(A))return;if(!b.has(A.id)){const K=(0,f.err)((0,h.withErrno)("EIO","Invalid RPC id: "+A.id));throw K.stack+=A.stack,K}const{resolve:k,reject:N}=b.get(A.id);if(A.error){const K=h.Exception.fromJSON({code:"EIO",errno:h.Errno.EIO,...A.error});K.stack+=A.stack,w(A.id),N(K);return}w(A.id),k(s(A,"stat","createFile","mkdir")?new l.Inode(A.value):A.value)}function S(A,k){if(!A)throw(0,f.err)((0,h.withErrno)("EINVAL","Cannot attach to non-existent port"));(0,f.info)("Attached handler to port: "+k.name),A.addHandler(k)}function D(A,k){if(!A)throw(0,f.err)((0,h.withErrno)("EINVAL","Cannot detach from non-existent port"));(0,f.info)("Detached handler from port: "+k.name),A.removeHandler(k)}function R(A){const k=[],N=k.push.bind(k);return S(A,N),async function(K){D(A,N);for(const V of k){const C="data"in V?V.data:V;await T(A,K,C)}}}async function T(A,k,N){if(!d(N))return;let K,V;const C=[];try{switch(N.method){case"read":{const[B,j,q,ae]=N.args;await k.read(B,j,q,ae),K=j;break}case"stat":case"createFile":case"mkdir":{const B=await k[N.method](...N.args),j=B instanceof l.Inode?B:new l.Inode(B);K=new Uint8Array(j.buffer,j.byteOffset,j.byteLength);break}case"touch":{const[B,j]=N.args;await k.touch(B,new l.Inode(j)),K=void 0;break}default:K=await k[N.method](...N.args)}}catch(B){V=B instanceof h.Exception?B.toJSON():(0,v.pick)(B,"message","stack")}A.send({_zenfs:!0,...(0,v.pick)(N,"id","method","stack"),error:V,value:K},C)}}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{Async:()=>u});var h=r(104),f=r(10),v=r(24),l=r(32),g=r(47),E=r(45);function u(o){class p extends o{async done(){return this.sync()}queueDone(){return this.sync()}_promise=Promise.resolve();_async(n){this._promise=this._promise.finally(()=>n())}_isInitialized=!1;_skippedCacheUpdates=0;constructor(...n){super(...n),this._patchAsync()}async ready(){if(await super.ready(),!(this._isInitialized||this.attributes.has("no_async_preload"))){if(await this._promise,this.checkSync(),await this._sync.ready(),this._sync instanceof l.StoreFS&&this instanceof l.StoreFS){const n=this._sync.transaction(),c=this.transaction(),i=[];for(const d of await c.keys())i.push(c.get(d).then(w=>n.setSync(d,w)));await Promise.all(i),this._isInitialized=!0;return}try{await this.crossCopy("/"),(0,v.debug)(`Skipped ${this._skippedCacheUpdates} updates to the sync cache during initialization`),this._isInitialized=!0}catch(n){throw this._isInitialized=!1,(0,v.crit)(n)}}}checkSync(){if(this.attributes.has("no_async_preload"))throw(0,f.withErrno)("ENOTSUP","Sync preloading has been disabled for this async file system");if(!this._sync)throw(0,v.crit)((0,f.withErrno)("ENOTSUP","No sync cache is attached to this async file system"))}renameSync(n,c){this.checkSync(),this._sync.renameSync(n,c),this._async(()=>this.rename(n,c))}statSync(n){return this.checkSync(),this._sync.statSync(n)}touchSync(n,c){this.checkSync(),this._sync.touchSync(n,c),this._async(()=>this.touch(n,c))}createFileSync(n,c){this.checkSync();const i=this._sync.createFileSync(n,c);return this._async(()=>this.createFile(n,c)),i}unlinkSync(n){this.checkSync(),this._sync.unlinkSync(n),this._async(()=>this.unlink(n))}rmdirSync(n){this.checkSync(),this._sync.rmdirSync(n),this._async(()=>this.rmdir(n))}mkdirSync(n,c){this.checkSync();const i=this._sync.mkdirSync(n,c);return this._async(()=>this.mkdir(n,c)),i}readdirSync(n){return this.checkSync(),this._sync.readdirSync(n)}linkSync(n,c){this.checkSync(),this._sync.linkSync(n,c),this._async(()=>this.link(n,c))}async sync(){!this.attributes.has("no_async_preload")&&this._sync&&this._sync.syncSync(),await this._promise.catch(()=>{})}syncSync(){this.checkSync(),this._sync.syncSync()}existsSync(n){return this.checkSync(),this._sync.existsSync(n)}readSync(n,c,i,d){this.checkSync(),this._sync.readSync(n,c,i,d)}writeSync(n,c,i){this.checkSync(),this._sync.writeSync(n,c,i),this._async(()=>this.write(n,c,i))}streamWrite(n,c){this.checkSync();const i=this._sync.streamWrite(n,c).getWriter(),d=super.streamWrite(n,c).getWriter();return new WritableStream({async write(w,b){await Promise.all([i.write(w),d.write(w)]).catch(b.error.bind(b))},async close(){await Promise.all([i.close(),d.close()])},async abort(w){await Promise.all([i.abort(w),d.abort(w)])}})}async crossCopy(n){this.checkSync();const c=await this.stat(n);if(!(0,g.isDirectory)(c)){this._sync.createFileSync(n,c);const d=new Uint8Array(c.size);await this.read(n,d,0,c.size),this._sync.writeSync(n,d,0),this._sync.touchSync(n,c);return}n!=="/"&&(this._sync.mkdirSync(n,c),this._sync.touchSync(n,c));const i=[];for(const d of await this.readdir(n))i.push(this.crossCopy((0,E.join)(n,d)));await Promise.all(i)}_patchAsync(){const n=["read","readdir","stat","exists"],c=h._asyncFSKeys.filter(i=>!n.includes(i));for(const i of c){let w=function(b,m){if(m||(m=new Error,Error.captureStackTrace(m,w)),!m.stack)return!1;const e=m.stack.split(`
`).slice(b).join(`
`);return e.includes(`at <computed> [as ${i}]`)||e.includes(`at async <computed> [as ${i}]`)||e.includes(`${i}Sync `)};const d=this[i].bind(this);this[i]=async(...b)=>{const m=await d(...b);if(w(2))return m;if(!this._isInitialized)return this._skippedCacheUpdates++,m;try{this._sync?.[`${i}Sync`]?.(...b)}catch(e){if(w(3,e))return m;throw e.message+=" (Out of sync!)",(0,v.err)(e)}return m}}(0,v.debug)(`Async: patched ${c.length} methods`)}}return p}}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{_asyncFSKeys:()=>h});const h=["rename","stat","touch","createFile","unlink","rmdir","mkdir","readdir","exists","link","sync","read","write"]}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{MetadataBlock:()=>y,SingleBuffer:()=>K,SingleBufferStore:()=>k,SuperBlock:()=>R});var h=r(10),f=r(24),v=r(33),l=r(36),g=r(43),E=r(106),u=r(20),o=r(47),p=r(32),t=r(53),n=function(V,C,B,j,q,ae){function Q(ne){if(ne!==void 0&&typeof ne!="function")throw new TypeError("Function expected");return ne}for(var ue=j.kind,F=ue==="getter"?"get":ue==="setter"?"set":"value",ie=!C&&V?j.static?V:V.prototype:null,me=C||(ie?Object.getOwnPropertyDescriptor(ie,j.name):{}),oe,fe=!1,le=B.length-1;le>=0;le--){var we={};for(var ge in j)we[ge]=ge==="access"?{}:j[ge];for(var ge in j.access)we.access[ge]=j.access[ge];we.addInitializer=function(ne){if(fe)throw new TypeError("Cannot add initializers after decoration has completed");ae.push(Q(ne||null))};var ee=(0,B[le])(ue==="accessor"?{get:me.get,set:me.set}:me[F],we);if(ue==="accessor"){if(ee===void 0)continue;if(ee===null||typeof ee!="object")throw new TypeError("Object expected");(oe=Q(ee.get))&&(me.get=oe),(oe=Q(ee.set))&&(me.set=oe),(oe=Q(ee.init))&&q.unshift(oe)}else(oe=Q(ee))&&(ue==="field"?q.unshift(oe):me[F]=oe)}ie&&Object.defineProperty(ie,j.name,me),fe=!0},c=function(V,C,B){for(var j=arguments.length>2,q=0;q<C.length;q++)B=j?C[q].call(V,B):C[q].call(V);return j?B:void 0},i=function(V,C,B){if(C!=null){if(typeof C!="object"&&typeof C!="function")throw new TypeError("Object expected.");var j,q;if(B){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");j=C[Symbol.asyncDispose]}if(j===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");j=C[Symbol.dispose],B&&(q=j)}if(typeof j!="function")throw new TypeError("Object not disposable.");q&&(j=function(){try{q.call(this)}catch(ae){return Promise.reject(ae)}}),V.stack.push({value:C,dispose:j,async:B})}else B&&V.stack.push({async:!0});return C},d=(function(V){return function(C){function B(Q){C.error=C.hasError?new V(Q,C.error,"An error was suppressed during disposal."):Q,C.hasError=!0}var j,q=0;function ae(){for(;j=C.stack.pop();)try{if(!j.async&&q===1)return q=0,C.stack.push(j),Promise.resolve().then(ae);if(j.dispose){var Q=j.dispose.call(j.value);if(j.async)return q|=2,Promise.resolve(Q).then(ae,function(ue){return B(ue),ae()})}else q|=1}catch(ue){B(ue)}if(q===1)return C.hasError?Promise.reject(C.error):Promise.resolve();if(C.hasError)throw C.error}return ae()}})(typeof SuppressedError=="function"?SuppressedError:function(V,C,B){var j=new Error(B);return j.name="SuppressedError",j.error=V,j.suppressed=C,j});const w=V=>"0x"+V.toString(16).padStart(8,"0"),{format:b}=new Intl.NumberFormat("en-US",{notation:"compact",maximumFractionDigits:2,unit:"byte",unitDisplay:"narrow"});let m=(()=>{var V,C,B,j;let q=[l.struct.packed("MetadataEntry")],ae,Q=[],ue,F=(0,l.$from)(g.BufferView),ie,me=[],oe=[],fe,le=[],we=[],ge,ee=[],ne=[],ce,de=[],be=[];var J=class extends F{static{ue=this}static{const Z=typeof Symbol=="function"&&Symbol.metadata?Object.create(F[Symbol.metadata]??null):void 0;ie=[(V=l.types).uint32.bind(V)],fe=[(C=l.types).uint32.bind(C)],ge=[(B=l.types).uint32.bind(B)],ce=[(j=l.types).uint32.bind(j)],n(this,null,ie,{kind:"accessor",name:"id",static:!1,private:!1,access:{has:re=>"id"in re,get:re=>re.id,set:(re,Ee)=>{re.id=Ee}},metadata:Z},me,oe),n(this,null,fe,{kind:"accessor",name:"offset_",static:!1,private:!1,access:{has:re=>"offset_"in re,get:re=>re.offset_,set:(re,Ee)=>{re.offset_=Ee}},metadata:Z},le,we),n(this,null,ge,{kind:"accessor",name:"offset",static:!1,private:!1,access:{has:re=>"offset"in re,get:re=>re.offset,set:(re,Ee)=>{re.offset=Ee}},metadata:Z},ee,ne),n(this,null,ce,{kind:"accessor",name:"size",static:!1,private:!1,access:{has:re=>"size"in re,get:re=>re.size,set:(re,Ee)=>{re.size=Ee}},metadata:Z},de,be),n(null,ae={value:ue},q,{kind:"class",name:ue.name,metadata:Z},null,Q),J=ue=ae.value,Z&&Object.defineProperty(ue,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:Z}),c(ue,Q)}#e=c(this,me,void 0);get id(){return this.#e}set id(Z){this.#e=Z}#t=(c(this,oe),c(this,le,void 0));get offset_(){return this.#t}set offset_(Z){this.#t=Z}#n=(c(this,we),c(this,ee,void 0));get offset(){return this.#n}set offset(Z){this.#n=Z}#r=(c(this,ne),c(this,de,void 0));get size(){return this.#r}set size(Z){this.#r=Z}toString(){return`<MetadataEntry @ ${w(this.byteOffset)}>`}constructor(){super(...arguments),c(this,be)}};return J=ue})();const e=255,s=5;let y=(()=>{var V,C,B,j;let q=[l.struct.packed("MetadataBlock")],ae,Q=[],ue,F=l.$from.typed(Int32Array),ie,me=[],oe=[],fe,le=[],we=[],ge,ee=[],ne=[],ce,de=[],be=[],J,Z=[],re=[];var Ee=class extends F{static{ue=this}static{const he=typeof Symbol=="function"&&Symbol.metadata?Object.create(F[Symbol.metadata]??null):void 0;ie=[(V=l.types).uint32.bind(V)],fe=[(C=l.types).uint64.bind(C)],ge=[(B=l.types).uint32.bind(B)],ce=[(0,l.field)((0,v.array)(m,e))],J=[(j=l.types).int32.bind(j)],n(this,null,ie,{kind:"accessor",name:"checksum",static:!1,private:!1,access:{has:z=>"checksum"in z,get:z=>z.checksum,set:(z,M)=>{z.checksum=M}},metadata:he},me,oe),n(this,null,fe,{kind:"accessor",name:"timestamp",static:!1,private:!1,access:{has:z=>"timestamp"in z,get:z=>z.timestamp,set:(z,M)=>{z.timestamp=M}},metadata:he},le,we),n(this,null,ge,{kind:"accessor",name:"previous_offset",static:!1,private:!1,access:{has:z=>"previous_offset"in z,get:z=>z.previous_offset,set:(z,M)=>{z.previous_offset=M}},metadata:he},ee,ne),n(this,null,ce,{kind:"accessor",name:"items",static:!1,private:!1,access:{has:z=>"items"in z,get:z=>z.items,set:(z,M)=>{z.items=M}},metadata:he},de,be),n(this,null,J,{kind:"accessor",name:"locked",static:!1,private:!1,access:{has:z=>"locked"in z,get:z=>z.locked,set:(z,M)=>{z.locked=M}},metadata:he},Z,re),n(null,ae={value:ue},q,{kind:"class",name:ue.name,metadata:he},null,Q),Ee=ue=ae.value,he&&Object.defineProperty(ue,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:he})}static lockIndex=(0,v.offsetof)(Ee,"locked")/Int32Array.BYTES_PER_ELEMENT;#e=c(this,me,void 0);get checksum(){return this.#e}set checksum(he){this.#e=he}#t=(c(this,oe),c(this,le,BigInt(Date.now())));get timestamp(){return this.#t}set timestamp(he){this.#t=he}#n=(c(this,we),c(this,ee,void 0));get previous_offset(){return this.#n}set previous_offset(he){this.#n=he}_previous=c(this,ne);get previous(){if(this.previous_offset)return this._previous??=new Ee(this.buffer,this.previous_offset),this._previous}#r=c(this,de,void 0);get items(){return this.#r}set items(he){this.#r=he}toString(he=!1){if(!he)return`<MetadataBlock @ ${w(this.byteOffset)}>`;let z=[`---- Metadata block at ${w(this.byteOffset)} ----`,`Checksum: ${w(this.checksum)}`,`Last updated: ${new Date(Number(this.timestamp)).toLocaleString()}`,`Previous block: ${w(this.previous_offset)}`,"Entries:"].join(`
`);for(const M of this.items)M.offset&&(z+=`
	${w(M.id)}: ${b(M.size).padStart(5)} at ${w(M.offset)}`);return z}#i=(c(this,be),c(this,Z,void 0));get locked(){return this.#i}set locked(he){this.#i=he}waitUnlocked(he=0){if(he>s)throw(0,f.crit)((0,h.withErrno)("EBUSY",`sbfs: exceeded max attempts waiting for metadata block at ${w(this.byteOffset)} to be unlocked`));if(Atomics.load(this,Ee.lockIndex))switch(Atomics.wait(this,Ee.lockIndex,1)){case"ok":break;case"not-equal":return he++,(0,f.err)(`sbfs: waiting for metadata block at ${w(this.byteOffset)} to be unlocked (${he}/${s})`),this.waitUnlocked(he);case"timed-out":throw(0,f.crit)((0,h.withErrno)("EBUSY",`sbfs: timed out waiting for metadata block at ${w(this.byteOffset)} to be unlocked`))}}lock(){this.waitUnlocked(),Atomics.store(this,Ee.lockIndex,1);const he=()=>{Atomics.store(this,Ee.lockIndex,0),Atomics.notify(this,Ee.lockIndex,1)};return he[Symbol.dispose]=he,he}constructor(){super(...arguments),c(this,re)}static{c(ue,Q)}};return Ee=ue})();const S=1651715706,D=2;let R=(()=>{var V,C,B,j,q,ae,Q,ue,F,ie;let me=[l.struct.packed("Superblock")],oe,fe=[],le,we=l.$from.typed(BigUint64Array),ge,ee=[],ne=[],ce,de=[],be=[],J,Z=[],re=[],Ee,he=[],z=[],M,W=[],$=[],H,Se=[],se=[],X,O=[],a=[],_,I=[],U=[],G,te=[],Oe=[],Ie,Re=[],Te=[],Ae,xe=[],Ue=[],Ve,ze=[],We=[],$e,Ge=[],je=[];var Be=class extends we{static{le=this}static{const x=typeof Symbol=="function"&&Symbol.metadata?Object.create(we[Symbol.metadata]??null):void 0;ge=[(V=l.types).uint32.bind(V)],ce=[(C=l.types).uint32.bind(C)],J=[(B=l.types).uint16.bind(B)],Ee=[(j=l.types).uint16.bind(j)],M=[(q=l.types).uint32.bind(q)],H=[(ae=l.types).uint64.bind(ae)],X=[(Q=l.types).uint64.bind(Q)],_=[l.types.uint8(16)],G=[(ue=l.types).uint32.bind(ue)],Ie=[(F=l.types).uint32.bind(F)],Ae=[(ie=l.types).uint32.bind(ie)],Ve=[l.types.char(64)],$e=[l.types.char(132)],n(this,null,ge,{kind:"accessor",name:"checksum",static:!1,private:!1,access:{has:L=>"checksum"in L,get:L=>L.checksum,set:(L,ye)=>{L.checksum=ye}},metadata:x},ee,ne),n(this,null,ce,{kind:"accessor",name:"magic",static:!1,private:!1,access:{has:L=>"magic"in L,get:L=>L.magic,set:(L,ye)=>{L.magic=ye}},metadata:x},de,be),n(this,null,J,{kind:"accessor",name:"version",static:!1,private:!1,access:{has:L=>"version"in L,get:L=>L.version,set:(L,ye)=>{L.version=ye}},metadata:x},Z,re),n(this,null,Ee,{kind:"accessor",name:"inode_format",static:!1,private:!1,access:{has:L=>"inode_format"in L,get:L=>L.inode_format,set:(L,ye)=>{L.inode_format=ye}},metadata:x},he,z),n(this,null,M,{kind:"accessor",name:"flags",static:!1,private:!1,access:{has:L=>"flags"in L,get:L=>L.flags,set:(L,ye)=>{L.flags=ye}},metadata:x},W,$),n(this,null,H,{kind:"accessor",name:"used_bytes",static:!1,private:!1,access:{has:L=>"used_bytes"in L,get:L=>L.used_bytes,set:(L,ye)=>{L.used_bytes=ye}},metadata:x},Se,se),n(this,null,X,{kind:"accessor",name:"total_bytes",static:!1,private:!1,access:{has:L=>"total_bytes"in L,get:L=>L.total_bytes,set:(L,ye)=>{L.total_bytes=ye}},metadata:x},O,a),n(this,null,_,{kind:"accessor",name:"uuid",static:!1,private:!1,access:{has:L=>"uuid"in L,get:L=>L.uuid,set:(L,ye)=>{L.uuid=ye}},metadata:x},I,U),n(this,null,G,{kind:"accessor",name:"metadata_block_size",static:!1,private:!1,access:{has:L=>"metadata_block_size"in L,get:L=>L.metadata_block_size,set:(L,ye)=>{L.metadata_block_size=ye}},metadata:x},te,Oe),n(this,null,Ie,{kind:"accessor",name:"metadata_offset_",static:!1,private:!1,access:{has:L=>"metadata_offset_"in L,get:L=>L.metadata_offset_,set:(L,ye)=>{L.metadata_offset_=ye}},metadata:x},Re,Te),n(this,null,Ae,{kind:"accessor",name:"metadata_offset",static:!1,private:!1,access:{has:L=>"metadata_offset"in L,get:L=>L.metadata_offset,set:(L,ye)=>{L.metadata_offset=ye}},metadata:x},xe,Ue),n(this,null,Ve,{kind:"accessor",name:"label",static:!1,private:!1,access:{has:L=>"label"in L,get:L=>L.label,set:(L,ye)=>{L.label=ye}},metadata:x},ze,We),n(this,null,$e,{kind:"accessor",name:"_padding",static:!1,private:!1,access:{has:L=>"_padding"in L,get:L=>L._padding,set:(L,ye)=>{L._padding=ye}},metadata:x},Ge,je),n(null,oe={value:le},me,{kind:"class",name:le.name,metadata:x},null,fe),Be=le=oe.value,x&&Object.defineProperty(le,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:x}),c(le,fe)}constructor(...x){if(super(...x),c(this,je),this.magic!=S){(0,f.warn)("sbfs: Invalid magic value, assuming this is a fresh super block");const L=new y(this.buffer,(0,v.sizeof)(Be));Object.assign(this,{metadata:L,metadata_offset:L.byteOffset,used_bytes:BigInt((0,v.sizeof)(Be)+(0,v.sizeof)(y)),total_bytes:BigInt(this.buffer.byteLength),magic:S,version:1,inode_format:o._inode_version,metadata_block_size:(0,v.sizeof)(y),uuid:(0,u.encodeUUID)(crypto.randomUUID())}),A(this),A(L);return}if(this.checksum!==T(this))throw(0,f.crit)((0,h.withErrno)("EIO","sbfs: checksum mismatch for super block"));if(this.metadata=new y(this.buffer,this.metadata_offset),this.metadata.checksum!==T(this.metadata))throw(0,f.crit)((0,h.withErrno)("EIO",`sbfs: checksum mismatch for metadata block (saved ${w(this.metadata.checksum)}, computed ${w(T(this.metadata))})`));if(this.inode_format!=o._inode_version)throw(0,f.crit)((0,h.withErrno)("EIO","sbfs: inode format mismatch"));if(this.metadata_block_size!=(0,v.sizeof)(y))throw(0,f.crit)((0,h.withErrno)("EIO","sbfs: metadata block size mismatch"))}#e=c(this,ee,void 0);get checksum(){return this.#e}set checksum(x){this.#e=x}#t=(c(this,ne),c(this,de,void 0));get magic(){return this.#t}set magic(x){this.#t=x}#n=(c(this,be),c(this,Z,void 0));get version(){return this.#n}set version(x){this.#n=x}#r=(c(this,re),c(this,he,void 0));get inode_format(){return this.#r}set inode_format(x){this.#r=x}#i=(c(this,z),c(this,W,void 0));get flags(){return this.#i}set flags(x){this.#i=x}#s=(c(this,$),c(this,Se,void 0));get used_bytes(){return this.#s}set used_bytes(x){this.#s=x}#o=(c(this,se),c(this,O,void 0));get total_bytes(){return this.#o}set total_bytes(x){this.#o=x}#a=(c(this,a),c(this,I,void 0));get uuid(){return this.#a}set uuid(x){this.#a=x}#c=(c(this,U),c(this,te,void 0));get metadata_block_size(){return this.#c}set metadata_block_size(x){this.#c=x}#l=(c(this,Oe),c(this,Re,void 0));get metadata_offset_(){return this.#l}set metadata_offset_(x){this.#l=x}#f=(c(this,Te),c(this,xe,void 0));get metadata_offset(){return this.#f}set metadata_offset(x){this.#f=x}metadata=c(this,Ue);#u=c(this,ze,void 0);get label(){return this.#u}set label(x){this.#u=x}#d=(c(this,We),c(this,Ge,void 0));get _padding(){return this.#d}set _padding(x){this.#d=x}rotateMetadata(){const x=this.used_bytes%BigInt(4);Atomics.add(this,D,x);const L=Number(Atomics.add(this,D,BigInt((0,v.sizeof)(y)))),ye=new y(this.buffer,L);return ye.previous_offset=this.metadata_offset,this.metadata=ye,this.metadata_offset=ye.byteOffset,A(ye),A(this),(0,f.debug)(`sbfs: rotated metadata block at ${w(ye.previous_offset)} with new block at ${w(L)}`),ye}isUnused(x,L){if(!L)return!0;if(x+L>this.total_bytes||x<(0,v.sizeof)(Be))return!1;for(let ye=this.metadata;ye;ye=ye.previous){if(x<ye.byteOffset+(0,v.sizeof)(y)&&x+L>ye.byteOffset)return!1;for(const pe of ye.items)if(pe.offset&&(x>=pe.offset&&x<pe.offset+pe.size||x+L>pe.offset&&x+L<=pe.offset+pe.size||x<=pe.offset&&x+L>=pe.offset+pe.size))return!1}return!0}};return Be=le})();function T(V){let C=(0,v.sizeof)(V)-4;return V instanceof y&&(C-=Int32Array.BYTES_PER_ELEMENT),(0,E.crc32c)(new Uint8Array(V.buffer,V.byteOffset+4,C))}function A(V){V instanceof y&&(V.timestamp=BigInt(Date.now())),V.checksum=T(V)}class k extends g.BufferView{flags=[];name="sbfs";type=1935828595;get uuid(){return(0,u.decodeUUID)(this.superblock.uuid)}superblock;_view;_u8;constructor(...C){if(super(...C),this.byteLength<(0,v.sizeof)(R)+(0,v.sizeof)(y))throw(0,f.crit)((0,h.withErrno)("EINVAL","sbfs: Buffer is too small for a file system"));this._view=new DataView(this.buffer,this.byteOffset,this.byteLength),this._u8=new Uint8Array(this.buffer,this.byteOffset,this.byteLength),this.superblock=new R(this.buffer,this.byteOffset)}*keys(){const C=new Set;for(let B=this.superblock.metadata;B;B=B.previous){B.waitUnlocked();for(const j of B.items)!j.offset||C.has(j.id)||(C.add(j.id),yield j.id)}}get(C){for(let B=this.superblock.metadata;B;B=B.previous){B.waitUnlocked();for(const j of B.items){if(!j.offset||j.id!=C)continue;const q=this.byteOffset+j.offset;return new Uint8Array(this.buffer.slice(q,q+j.size))}}}set(C,B){const j={stack:[],error:void 0,hasError:!1};try{if(C===0&&B.length<(0,v.sizeof)(o.Inode))throw(0,f.alert)((0,h.withErrno)("EIO",`sbfs: tried to set ${B.length} bytes for id 0!`));for(let ue=this.superblock.metadata;ue;ue=ue.previous){ue.waitUnlocked();for(const F of ue.items){const ie={stack:[],error:void 0,hasError:!1};try{if(!F.offset||F.id!=C)continue;const me=i(ie,ue.lock(),!1);if(B.length==F.size){this._u8.set(B,F.offset);return}if(B.length<F.size||this.superblock.isUnused(F.offset,B.length)){this._u8.set(B,F.offset),F.size=B.length,A(ue);return}F.offset=Number(Atomics.add(this.superblock,D,BigInt(B.length))),F.size=B.length,this._u8.set(B,F.offset),A(ue),A(this.superblock);return}catch(me){ie.error=me,ie.hasError=!0}finally{d(ie)}}}let q=Array.from(this.superblock.metadata.items).find(ue=>!ue.offset);q||(this.superblock.rotateMetadata(),q=this.superblock.metadata.items[0]);const ae=i(j,this.superblock.metadata.lock(),!1),Q=Number(Atomics.add(this.superblock,D,BigInt(B.length)));q.id=C,q.offset=Q,q.size=B.length,this._u8.set(B,Q),A(this.superblock.metadata),A(this.superblock)}catch(q){j.error=q,j.hasError=!0}finally{d(j)}}delete(C){for(let B=this.superblock.metadata;B;B=B.previous){B.waitUnlocked();for(const j of B.items)if(j.id==C){j.offset=0,j.size=0,j.id=0,A(B);return}}}_fs;get fs(){return this._fs}set fs(C){this.buffer.constructor.name==="SharedArrayBuffer"&&C?.attributes.set("no_id_tables",!0),this._fs=C}sync(){return Promise.resolve()}usage(){return{totalSpace:Number(this.superblock.total_bytes),freeSpace:Number(this.superblock.total_bytes-this.superblock.used_bytes)}}transaction(){return new t.SyncMapTransaction(this)}}const K={name:"SingleBuffer",options:{buffer:{type:"object",required:!0}},create(V){const C=new p.StoreFS(ArrayBuffer.isView(V.buffer)?new k(V.buffer.buffer,V.buffer.byteOffset,V.buffer.byteLength):new k(V.buffer));return C.checkRootSync(),C}}}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{crc32c:()=>f});const h=new Uint32Array(256);for(let v=0;v<256;v++){let l=v;for(let g=0;g<8;g++)l=l&1?2197175160^l>>>1:l>>>1;h[v]=l}function f(v){let l=4294967295;for(let g=0;g<v.length;g++)l=l>>>8^h[(l^v[g])&255];return(l^4294967295)>>>0}}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{bindContext:()=>o,boundContexts:()=>u});var h=r(10),f=r(12),v=r(27),l=r(108),g=r(45),E=r(110);const u=new Map;function o(p={}){const t=(0,v.contextOf)(this);if(!l.statSync.call(this,t.root).isDirectory())throw(0,h.UV)("ENOTDIR",{syscall:"chroot",path:t.root});const n=(0,v.createChildContext)(t,p),c=Object.assign(n,{fs:{...(0,f.bindFunctions)(l,n),promises:(0,f.bindFunctions)(l.promises,n),xattr:(0,f.bindFunctions)(E,n)},path:(0,f.bindFunctions)(g,n),bind:i=>{const d=o.call(n,i);return n.children.push(d),d}});return u.set(n.id,c),c}}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{BigIntStatsFs:()=>g.BigIntStatsFs,Dir:()=>v.Dir,Dirent:()=>v.Dirent,ReadStream:()=>E.ReadStream,Stats:()=>g.Stats,StatsFs:()=>g.StatsFs,WriteStream:()=>E.WriteStream,access:()=>f.access,accessSync:()=>u.accessSync,appendFile:()=>f.appendFile,appendFileSync:()=>u.appendFileSync,chmod:()=>f.chmod,chmodSync:()=>u.chmodSync,chown:()=>f.chown,chownSync:()=>u.chownSync,close:()=>f.close,closeSync:()=>u.closeSync,constants:()=>h,copyFile:()=>f.copyFile,copyFileSync:()=>u.copyFileSync,cp:()=>f.cp,cpSync:()=>u.cpSync,createReadStream:()=>f.createReadStream,createWriteStream:()=>f.createWriteStream,exists:()=>f.exists,existsSync:()=>u.existsSync,fchmod:()=>f.fchmod,fchmodSync:()=>u.fchmodSync,fchown:()=>f.fchown,fchownSync:()=>u.fchownSync,fdatasync:()=>f.fdatasync,fdatasyncSync:()=>u.fdatasyncSync,fstat:()=>f.fstat,fstatSync:()=>u.fstatSync,fsync:()=>f.fsync,fsyncSync:()=>u.fsyncSync,ftruncate:()=>f.ftruncate,ftruncateSync:()=>u.ftruncateSync,futimes:()=>f.futimes,futimesSync:()=>u.futimesSync,glob:()=>f.glob,globSync:()=>u.globSync,lchmod:()=>f.lchmod,lchmodSync:()=>u.lchmodSync,lchown:()=>f.lchown,lchownSync:()=>u.lchownSync,link:()=>f.link,linkSync:()=>u.linkSync,lopenSync:()=>u.lopenSync,lstat:()=>f.lstat,lstatSync:()=>u.lstatSync,lutimes:()=>f.lutimes,lutimesSync:()=>u.lutimesSync,mkdir:()=>f.mkdir,mkdirSync:()=>u.mkdirSync,mkdtemp:()=>f.mkdtemp,mkdtempDisposableSync:()=>u.mkdtempDisposableSync,mkdtempSync:()=>u.mkdtempSync,open:()=>f.open,openAsBlob:()=>f.openAsBlob,openSync:()=>u.openSync,opendir:()=>f.opendir,opendirSync:()=>u.opendirSync,promises:()=>l,read:()=>f.read,readFile:()=>f.readFile,readFileSync:()=>u.readFileSync,readSync:()=>u.readSync,readdir:()=>f.readdir,readdirSync:()=>u.readdirSync,readlink:()=>f.readlink,readlinkSync:()=>u.readlinkSync,readv:()=>f.readv,readvSync:()=>u.readvSync,realpath:()=>f.realpath,realpathSync:()=>u.realpathSync,rename:()=>f.rename,renameSync:()=>u.renameSync,rm:()=>f.rm,rmSync:()=>u.rmSync,rmdir:()=>f.rmdir,rmdirSync:()=>u.rmdirSync,stat:()=>f.stat,statSync:()=>u.statSync,statfs:()=>f.statfs,statfsSync:()=>u.statfsSync,symlink:()=>f.symlink,symlinkSync:()=>u.symlinkSync,truncate:()=>f.truncate,truncateSync:()=>u.truncateSync,unlink:()=>f.unlink,unlinkSync:()=>u.unlinkSync,unwatchFile:()=>f.unwatchFile,utimes:()=>f.utimes,utimesSync:()=>u.utimesSync,watch:()=>f.watch,watchFile:()=>f.watchFile,write:()=>f.write,writeFile:()=>f.writeFile,writeFileSync:()=>u.writeFileSync,writeSync:()=>u.writeSync,writev:()=>f.writev,writevSync:()=>u.writevSync});var h=r(31),f=r(109),v=r(65),l=r(54),g=r(48),E=r(67),u=r(63)}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{access:()=>ge,appendFile:()=>y,chmod:()=>me,chown:()=>F,close:()=>D,copyFile:()=>Ee,cp:()=>W,createReadStream:()=>be,createWriteStream:()=>J,exists:()=>c,fchmod:()=>V,fchown:()=>K,fdatasync:()=>A,fstat:()=>S,fsync:()=>T,ftruncate:()=>R,futimes:()=>C,glob:()=>Se,lchmod:()=>oe,lchown:()=>ie,link:()=>ae,lstat:()=>d,lutimes:()=>le,mkdir:()=>j,mkdtemp:()=>re,open:()=>m,openAsBlob:()=>H,opendir:()=>M,read:()=>N,readFile:()=>e,readdir:()=>q,readlink:()=>ue,readv:()=>he,realpath:()=>we,rename:()=>n,rm:()=>Z,rmdir:()=>B,stat:()=>i,statfs:()=>$,symlink:()=>Q,truncate:()=>w,unlink:()=>b,unwatchFile:()=>ce,utimes:()=>fe,watch:()=>de,watchFile:()=>ne,write:()=>k,writeFile:()=>s,writev:()=>z});var h=r(4),f=r(10),v=r(31),l=r(46),g=r(62),E=r(54),u=r(48),o=r(67);const p=()=>{};async function t(se){const X=[];for await(const O of se)X.push(O);return X}function n(se,X,O=p){E.rename.call(this,se,X).then(()=>O(null)).catch(O)}function c(se,X=p){E.exists.call(this,se).then(X).catch(()=>X(!1))}function i(se,X,O=p){O=typeof X=="function"?X:O,E.stat.call(this,se,typeof X!="function"?X:{}).then(a=>O(null,a)).catch(O)}function d(se,X,O=p){O=typeof X=="function"?X:O,E.lstat.call(this,se,typeof X!="function"?X:{}).then(a=>O(null,a)).catch(O)}function w(se,X=0,O=p){O=typeof X=="function"?X:O;const a=typeof X=="number"?X:0;E.truncate.call(this,se,a).then(()=>O(null)).catch(O)}function b(se,X=p){E.unlink.call(this,se).then(()=>X(null)).catch(X)}function m(se,X,O,a=p){const _=(0,l.normalizeMode)(O,420);a=typeof O=="function"?O:a,E.open.call(this,se,X,_).then(I=>a(null,I.fd)).catch(a)}function e(se,X,O=p){O=typeof X=="function"?X:O,E.readFile.call(this,se,typeof X=="function"?null:X).then(a=>O(null,a)).catch(O)}function s(se,X,O,a=p){a=typeof O=="function"?O:a,E.writeFile.call(this,se,X,typeof O!="function"?O:null).then(()=>a(null)).catch(a)}function y(se,X,O,a=p){const _=typeof O!="function"?O:void 0;a=typeof O=="function"?O:a,E.appendFile.call(this,se,X,_).then(()=>a(null)).catch(a)}function S(se,X,O=p){O=typeof X=="function"?X:O,new E.FileHandle(this,se).stat().then(a=>O(null,typeof X=="object"&&X?.bigint?new u.BigIntStats(a):a)).catch(O)}function D(se,X=p){new E.FileHandle(this,se).close().then(()=>X(null)).catch(X)}function R(se,X,O=p){const a=typeof X=="number"?X:0;O=typeof X=="function"?X:O;const _=new E.FileHandle(this,se);if(a<0)throw(0,f.withErrno)("EINVAL");_.truncate(a).then(()=>O(null)).catch(O)}function T(se,X=p){new E.FileHandle(this,se).sync().then(()=>X(null)).catch(X)}function A(se,X=p){new E.FileHandle(this,se).datasync().then(()=>X(null)).catch(X)}function k(se,X,O,a,_,I=p){let U,G,te,Oe,Ie;const Re=new E.FileHandle(this,se);if(typeof X=="string"){switch(Ie="utf8",typeof O){case"function":I=O;break;case"number":Oe=O,Ie=typeof a=="string"?a:"utf8",I=typeof _=="function"?_:I;break;default:I=typeof a=="function"?a:typeof _=="function"?_:I,I((0,f.withErrno)("EINVAL"));return}U=h.Buffer.from(X),G=0,te=U.length;const Te=I;Re.write(U,G,te,Oe).then(({bytesWritten:Ae})=>Te(null,Ae,U.toString(Ie))).catch(Te)}else{U=h.Buffer.from(X.buffer),G=O,te=a,Oe=typeof _=="number"?_:null;const Te=typeof _=="function"?_:I;Re.write(U,G,te,Oe).then(({bytesWritten:Ae})=>Te(null,Ae,U)).catch(Te)}}function N(se,X,O,a,_,I=p){new E.FileHandle(this,se).read(X,O,a,_).then(({bytesRead:U,buffer:G})=>I(null,U,G)).catch(I)}function K(se,X,O,a=p){new E.FileHandle(this,se).chown(X,O).then(()=>a(null)).catch(a)}function V(se,X,O){new E.FileHandle(this,se).chmod(X).then(()=>O(null)).catch(O)}function C(se,X,O,a=p){new E.FileHandle(this,se).utimes(X,O).then(()=>a(null)).catch(a)}function B(se,X=p){E.rmdir.call(this,se).then(()=>X(null)).catch(X)}function j(se,X,O=p){E.mkdir.call(this,se,X).then(()=>O(null)).catch(O)}function q(se,X,O=p){O=typeof X=="function"?X:O;const a=typeof X!="function"?X:{};E.readdir.call(this,se,a).then(_=>O(null,_)).catch(O)}function ae(se,X,O=p){E.link.call(this,se,X).then(()=>O(null)).catch(O)}function Q(se,X,O,a=p){const _=typeof O=="string"?O:"file";a=typeof O=="function"?O:a,E.symlink.call(this,se,X,_).then(()=>a(null)).catch(a)}function ue(se,X,O=p){O=typeof X=="function"?X:O,E.readlink.call(this,se).then(a=>O(null,a)).catch(O)}function F(se,X,O,a=p){E.chown.call(this,se,X,O).then(()=>a(null)).catch(a)}function ie(se,X,O,a=p){E.lchown.call(this,se,X,O).then(()=>a(null)).catch(a)}function me(se,X,O=p){E.chmod.call(this,se,X).then(()=>O(null)).catch(O)}function oe(se,X,O=p){E.lchmod.call(this,se,X).then(()=>O(null)).catch(O)}function fe(se,X,O,a=p){E.utimes.call(this,se,X,O).then(()=>a(null)).catch(a)}function le(se,X,O,a=p){E.lutimes.call(this,se,X,O).then(()=>a(null)).catch(a)}function we(se,X,O=p){O=typeof X=="function"?X:O,E.realpath.call(this,se,typeof X=="function"?null:X).then(a=>O(null,a)).catch(O)}function ge(se,X,O=p){const a=typeof X=="number"?X:v.R_OK;O=typeof X=="function"?X:O,E.access.call(this,se,a).then(()=>O(null)).catch(O)}const ee=new Map;function ne(se,X,O){const a=(0,l.normalizePath)(se),_=typeof X!="function"?X:{};if(typeof X=="function"&&(O=X),!O)throw(0,f.UV)("EINVAL","watch",se.toString());if(ee.has(a)){const U=ee.get(a);U&&U.listeners.add(O);return}const I=new g.StatWatcher(this,a,_);I.on("change",(U,G)=>{const te=ee.get(a);if(te)for(const Oe of te.listeners)Oe(U,G)}),ee.set(a,{watcher:I,listeners:new Set})}function ce(se,X=p){const O=(0,l.normalizePath)(se),a=ee.get(O);a&&(X&&X!==p?a.listeners.delete(X):a.listeners.clear(),a.listeners.size===0&&(a.watcher.stop(),ee.delete(O)))}function de(se,X,O){const a=new g.FSWatcher(this,(0,l.normalizePath)(se),typeof X=="object"?X:{});return O=typeof X=="function"?X:O,a.on("change",O||p),a}function be(se,X){X=typeof X=="object"?X:{encoding:X};const O=E.open.call(this,se,"r",X?.mode);return new o.ReadStream({...X,autoClose:!0},O)}function J(se,X){X=typeof X=="object"?X:{encoding:X};const O=E.open.call(this,se,"w",X?.mode);return new o.WriteStream(X,O)}function Z(se,X,O=p){O=typeof X=="function"?X:O,E.rm.call(this,se,typeof X=="function"?void 0:X).then(()=>O(null)).catch(O)}function re(se,X,O=p){O=typeof X=="function"?X:O,E.mkdtemp.call(this,se,typeof X!="function"?X:null).then(a=>O(null,a)).catch(O)}function Ee(se,X,O,a=p){a=typeof O=="function"?O:a,E.copyFile.call(this,se,X,typeof O=="function"?void 0:O).then(()=>a(null)).catch(a)}function he(se,X,O,a=p){a=typeof O=="function"?O:a,new E.FileHandle(this,se).readv(X,typeof O=="function"?void 0:O).then(({buffers:_,bytesRead:I})=>a(null,I,_)).catch(a)}function z(se,X,O,a=p){a=typeof O=="function"?O:a,new E.FileHandle(this,se).writev(X,typeof O=="function"?void 0:O).then(({buffers:_,bytesWritten:I})=>a(null,I,_)).catch(a)}function M(se,X,O=p){O=typeof X=="function"?X:O,E.opendir.call(this,se,typeof X=="function"?void 0:X).then(a=>O(null,a)).catch(O)}function W(se,X,O,a=p){a=typeof O=="function"?O:a,E.cp.call(this,se,X,typeof O=="function"?void 0:O).then(()=>a(null)).catch(a)}function $(se,X,O=p){O=typeof X=="function"?X:O,E.statfs.call(this,se,typeof X=="function"?void 0:X).then(a=>O(null,a)).catch(O)}async function H(se,X){const O=await E.open.call(this,se.toString(),"r"),a=await O.readFile();return await O.close(),new Blob([a],X)}function Se(se,X,O=p){O=typeof X=="function"?X:O;const a=E.glob.call(this,se,typeof X=="function"?void 0:X);t(a).then(_=>O(null,_??[])).catch(_=>O(_))}}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{get:()=>t,getSync:()=>n,list:()=>b,listSync:()=>m,remove:()=>d,removeSync:()=>w,set:()=>c,setSync:()=>i});var h=r(4),f=r(10),v=r(47),l=r(46),g=r(56),E=r(31),u=r(60);const o=[];function p(e,s,y,S){if(!s.startsWith("user.")&&!o.includes(s))throw(0,f.UV)("ENOTSUP",S,y)}async function t(e,s,y={}){e=(0,l.normalizePath)(e);const{fs:S,path:D}=(0,u.resolveMount)(e,this);p(this,s,e,"xattr.get");const R=await S.stat(D).catch((0,f.rethrow)("xattr.get",e));if(g.checkAccess&&!(0,v.hasAccess)(this,R,E.R_OK))throw(0,f.UV)("EACCES","xattr.get",e);R.attributes??=new v.Attributes;const T=R.attributes.get(s);if(!T)throw(0,f.UV)("ENODATA","xattr.get",e);const A=h.Buffer.from(T);return y.encoding=="buffer"||!y.encoding?A:A.toString(y.encoding)}function n(e,s,y={}){e=(0,l.normalizePath)(e),p(this,s,e,"xattr.get");const{fs:S,path:D}=(0,u.resolveMount)(e,this);let R;try{R=S.statSync(D)}catch(k){throw(0,f.setUVMessage)(Object.assign(k,{path:e}))}if(g.checkAccess&&!(0,v.hasAccess)(this,R,E.R_OK))throw(0,f.UV)("EACCES","xattr.get",e);R.attributes??=new v.Attributes;const T=R.attributes.get(s);if(!T)throw(0,f.UV)("ENODATA","xattr.get",e);const A=h.Buffer.from(T);return y.encoding=="buffer"||!y.encoding?A:A.toString(y.encoding)}async function c(e,s,y,S={}){e=(0,l.normalizePath)(e);const{fs:D,path:R}=(0,u.resolveMount)(e,this);p(this,s,e,"xattr.set");const T=await D.stat(R).catch((0,f.rethrow)("xattr.set",e));if(g.checkAccess&&!(0,v.hasAccess)(this,T,E.W_OK))throw(0,f.UV)("EACCES","xattr.set",e);T.attributes??=new v.Attributes;const A=T.attributes.get(s);if(S.create&&A)throw(0,f.UV)("EEXIST","xattr.set",e);if(S.replace&&!A)throw(0,f.UV)("ENODATA","xattr.set",e);T.attributes.set(s,h.Buffer.from(y)),await D.touch(R,T).catch((0,f.rethrow)("xattr.set",e))}function i(e,s,y,S={}){e=(0,l.normalizePath)(e);const{fs:D,path:R}=(0,u.resolveMount)(e,this);p(this,s,e,"xattr.set");let T;try{T=D.statSync(R)}catch(k){throw(0,f.setUVMessage)(Object.assign(k,{path:e}))}if(g.checkAccess&&!(0,v.hasAccess)(this,T,E.W_OK))throw(0,f.UV)("EACCES","xattr.set",e);T.attributes??=new v.Attributes;const A=T.attributes.get(s);if(S.create&&A)throw(0,f.UV)("EEXIST","xattr.set",e);if(S.replace&&!A)throw(0,f.UV)("ENODATA","xattr.set",e);T.attributes.set(s,h.Buffer.from(y));try{D.touchSync(R,T)}catch(k){throw(0,f.setUVMessage)(Object.assign(k,{path:e}))}}async function d(e,s){e=(0,l.normalizePath)(e);const{fs:y,path:S}=(0,u.resolveMount)(e,this);p(this,s,e,"xattr.remove");const D=await y.stat(S).catch((0,f.rethrow)("xattr.remove",e));if(g.checkAccess&&!(0,v.hasAccess)(this,D,E.W_OK))throw(0,f.UV)("EACCES","xattr.remove",e);if(D.attributes??=new v.Attributes,!D.attributes.get(s))throw(0,f.UV)("ENODATA","xattr.remove",e);D.attributes.remove(s),await y.touch(S,D)}function w(e,s){e=(0,l.normalizePath)(e);const{fs:y,path:S}=(0,u.resolveMount)(e,this);p(this,s,e,"xattr.remove");let D;try{D=y.statSync(S)}catch(T){throw(0,f.setUVMessage)(Object.assign(T,{path:e}))}if(g.checkAccess&&!(0,v.hasAccess)(this,D,E.W_OK))throw(0,f.UV)("EACCES","xattr.remove",e);if(D.attributes??=new v.Attributes,!D.attributes.get(s))throw(0,f.UV)("ENODATA","xattr.remove",e);D.attributes.remove(s);try{y.touchSync(S,D)}catch(T){throw(0,f.setUVMessage)(Object.assign(T,{path:e}))}}async function b(e){e=(0,l.normalizePath)(e);const{fs:s,path:y}=(0,u.resolveMount)(e,this),S=await s.stat(y).catch((0,f.rethrow)("xattr.list",e));return S.attributes?S.attributes.keys().toArray():[]}function m(e){e=(0,l.normalizePath)(e);const{fs:s,path:y}=(0,u.resolveMount)(e,this);let S;try{S=s.statSync(y)}catch(D){throw(0,f.setUVMessage)(Object.assign(D,{path:e}))}return S.attributes?S.attributes.keys().toArray():[]}}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{Attributes:()=>p.Attributes,DeviceFS:()=>l.DeviceFS,ErrnoError:()=>g.ErrnoError,FileSystem:()=>u.FileSystem,Index:()=>E.Index,IndexFS:()=>o.IndexFS,Inode:()=>p.Inode,InodeFlags:()=>p.InodeFlags,_chown:()=>p._chown,_inode_fields:()=>p._inode_fields,_inode_version:()=>p._inode_version,contextOf:()=>f.contextOf,createChildContext:()=>f.createChildContext,createCredentials:()=>v.createCredentials,credentialsAllowRoot:()=>v.credentialsAllowRoot,defaultContext:()=>f.defaultContext,devices:()=>l.devices,fullDevice:()=>l.fullDevice,hasAccess:()=>p.hasAccess,isBlockDevice:()=>p.isBlockDevice,isCharacterDevice:()=>p.isCharacterDevice,isDirectory:()=>p.isDirectory,isFIFO:()=>p.isFIFO,isFile:()=>p.isFile,isSocket:()=>p.isSocket,isSymbolicLink:()=>p.isSymbolicLink,log:()=>h.log,nullDevice:()=>l.nullDevice,randomDevice:()=>l.randomDevice,rootIno:()=>p.rootIno,userModifiableFlags:()=>p.userModifiableFlags,userVisibleFlags:()=>p.userVisibleFlags,version:()=>E.version,withExceptionContext:()=>g.withExceptionContext,withPath:()=>g.withPath,wrap:()=>g.wrap,zeroDevice:()=>l.zeroDevice});var h=r(10),f=r(27),v=r(28),l=r(29),g=r(61),E=r(44),u=r(49),o=r(99),p=r(47)}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{Async:()=>h.Async,MutexLock:()=>f.MutexLock,Mutexed:()=>f.Mutexed,Readonly:()=>v.Readonly,Sync:()=>g.Sync,_MutexedFS:()=>f._MutexedFS,_asyncFSKeys:()=>l._asyncFSKeys});var h=r(103),f=r(113),v=r(114),l=r(104),g=r(115)}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{MutexLock:()=>E,Mutexed:()=>o,_MutexedFS:()=>u});var h=r(10),f=r(24),v=r(52),l=function(p,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var c,i;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");c=t[Symbol.asyncDispose]}if(c===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");c=t[Symbol.dispose],n&&(i=c)}if(typeof c!="function")throw new TypeError("Object not disposable.");i&&(c=function(){try{i.call(this)}catch(d){return Promise.reject(d)}}),p.stack.push({value:t,dispose:c,async:n})}else n&&p.stack.push({async:!0});return t},g=(function(p){return function(t){function n(w){t.error=t.hasError?new p(w,t.error,"An error was suppressed during disposal."):w,t.hasError=!0}var c,i=0;function d(){for(;c=t.stack.pop();)try{if(!c.async&&i===1)return i=0,t.stack.push(c),Promise.resolve().then(d);if(c.dispose){var w=c.dispose.call(c.value);if(c.async)return i|=2,Promise.resolve(w).then(d,function(b){return n(b),d()})}else i|=1}catch(b){n(b)}if(i===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return d()}})(typeof SuppressedError=="function"?SuppressedError:function(p,t,n){var c=new Error(n);return c.name="SuppressedError",c.error=p,c.suppressed=t,c});class E{previous;current=Promise.withResolvers();_isLocked=!0;get isLocked(){return this._isLocked}constructor(t){this.previous=t}async done(){await this.previous?.done(),await this.current.promise}unlock(){this.current.resolve(),this._isLocked=!1}[Symbol.dispose](){this.unlock()}}class u{_fs;get type(){return this._fs.type}get name(){return this._fs.name}get label(){return this._fs.label}set label(t){this._fs.label=t}get attributes(){return this._fs.attributes}get _uuid(){return this._fs._uuid}set _uuid(t){this._fs._uuid=t}get uuid(){return this._fs.uuid}async ready(){return await this._fs.ready()}usage(){return this._fs.usage()}currentLock;addLock(){const t=new E(this.currentLock);return this.currentLock=t,t}async lock(t=5e3){const n=this.currentLock,c=this.addLock(),i=new Error().stack;return setTimeout(()=>{if(c.isLocked){const d=(0,h.withErrno)("EDEADLK");throw d.stack+=i?.slice(5),(0,f.err)(d)}},t),await n?.done(),c}lockSync(){if(this.currentLock?.isLocked)throw(0,f.err)((0,h.withErrno)("EBUSY"));return this.addLock()}get isLocked(){return!!this.currentLock?.isLocked}async rename(t,n){const c={stack:[],error:void 0,hasError:!1};try{const i=l(c,await this.lock(),!1);await this._fs.rename(t,n)}catch(i){c.error=i,c.hasError=!0}finally{g(c)}}renameSync(t,n){const c={stack:[],error:void 0,hasError:!1};try{const i=l(c,this.lockSync(),!1);return this._fs.renameSync(t,n)}catch(i){c.error=i,c.hasError=!0}finally{g(c)}}async stat(t){const n={stack:[],error:void 0,hasError:!1};try{const c=l(n,await this.lock(),!1);return await this._fs.stat(t)}catch(c){n.error=c,n.hasError=!0}finally{g(n)}}statSync(t){const n={stack:[],error:void 0,hasError:!1};try{const c=l(n,this.lockSync(),!1);return this._fs.statSync(t)}catch(c){n.error=c,n.hasError=!0}finally{g(n)}}async touch(t,n){const c={stack:[],error:void 0,hasError:!1};try{const i=l(c,await this.lock(),!1);await this._fs.touch(t,n)}catch(i){c.error=i,c.hasError=!0}finally{g(c)}}touchSync(t,n){const c={stack:[],error:void 0,hasError:!1};try{const i=l(c,this.lockSync(),!1);this._fs.touchSync(t,n)}catch(i){c.error=i,c.hasError=!0}finally{g(c)}}async createFile(t,n){const c={stack:[],error:void 0,hasError:!1};try{const i=l(c,await this.lock(),!1);return await this._fs.createFile(t,n)}catch(i){c.error=i,c.hasError=!0}finally{g(c)}}createFileSync(t,n){const c={stack:[],error:void 0,hasError:!1};try{const i=l(c,this.lockSync(),!1);return this._fs.createFileSync(t,n)}catch(i){c.error=i,c.hasError=!0}finally{g(c)}}async unlink(t){const n={stack:[],error:void 0,hasError:!1};try{const c=l(n,await this.lock(),!1);await this._fs.unlink(t)}catch(c){n.error=c,n.hasError=!0}finally{g(n)}}unlinkSync(t){const n={stack:[],error:void 0,hasError:!1};try{const c=l(n,this.lockSync(),!1);return this._fs.unlinkSync(t)}catch(c){n.error=c,n.hasError=!0}finally{g(n)}}async rmdir(t){const n={stack:[],error:void 0,hasError:!1};try{const c=l(n,await this.lock(),!1);await this._fs.rmdir(t)}catch(c){n.error=c,n.hasError=!0}finally{g(n)}}rmdirSync(t){const n={stack:[],error:void 0,hasError:!1};try{const c=l(n,this.lockSync(),!1);return this._fs.rmdirSync(t)}catch(c){n.error=c,n.hasError=!0}finally{g(n)}}async mkdir(t,n){const c={stack:[],error:void 0,hasError:!1};try{const i=l(c,await this.lock(),!1);return await this._fs.mkdir(t,n)}catch(i){c.error=i,c.hasError=!0}finally{g(c)}}mkdirSync(t,n){const c={stack:[],error:void 0,hasError:!1};try{const i=l(c,this.lockSync(),!1);return this._fs.mkdirSync(t,n)}catch(i){c.error=i,c.hasError=!0}finally{g(c)}}async readdir(t){const n={stack:[],error:void 0,hasError:!1};try{const c=l(n,await this.lock(),!1);return await this._fs.readdir(t)}catch(c){n.error=c,n.hasError=!0}finally{g(n)}}readdirSync(t){const n={stack:[],error:void 0,hasError:!1};try{const c=l(n,this.lockSync(),!1);return this._fs.readdirSync(t)}catch(c){n.error=c,n.hasError=!0}finally{g(n)}}async exists(t){const n={stack:[],error:void 0,hasError:!1};try{const c=l(n,await this.lock(),!1);return await this._fs.exists(t)}catch(c){n.error=c,n.hasError=!0}finally{g(n)}}existsSync(t){const n={stack:[],error:void 0,hasError:!1};try{const c=l(n,this.lockSync(),!1);return this._fs.existsSync(t)}catch(c){n.error=c,n.hasError=!0}finally{g(n)}}async link(t,n){const c={stack:[],error:void 0,hasError:!1};try{const i=l(c,await this.lock(),!1);await this._fs.link(t,n)}catch(i){c.error=i,c.hasError=!0}finally{g(c)}}linkSync(t,n){const c={stack:[],error:void 0,hasError:!1};try{const i=l(c,this.lockSync(),!1);return this._fs.linkSync(t,n)}catch(i){c.error=i,c.hasError=!0}finally{g(c)}}async sync(){const t={stack:[],error:void 0,hasError:!1};try{const n=l(t,await this.lock(),!1);await this._fs.sync()}catch(n){t.error=n,t.hasError=!0}finally{g(t)}}syncSync(){const t={stack:[],error:void 0,hasError:!1};try{const n=l(t,this.lockSync(),!1);return this._fs.syncSync()}catch(n){t.error=n,t.hasError=!0}finally{g(t)}}async read(t,n,c,i){const d={stack:[],error:void 0,hasError:!1};try{const w=l(d,await this.lock(),!1);return await this._fs.read(t,n,c,i)}catch(w){d.error=w,d.hasError=!0}finally{g(d)}}readSync(t,n,c,i){const d={stack:[],error:void 0,hasError:!1};try{const w=l(d,this.lockSync(),!1);return this._fs.readSync(t,n,c,i)}catch(w){d.error=w,d.hasError=!0}finally{g(d)}}async write(t,n,c){const i={stack:[],error:void 0,hasError:!1};try{const d=l(i,await this.lock(),!1);return await this._fs.write(t,n,c)}catch(d){i.error=d,i.hasError=!0}finally{g(i)}}writeSync(t,n,c){const i={stack:[],error:void 0,hasError:!1};try{const d=l(i,this.lockSync(),!1);return this._fs.writeSync(t,n,c)}catch(d){i.error=d,i.hasError=!0}finally{g(i)}}streamRead(t,n){const c={stack:[],error:void 0,hasError:!1};try{const i=l(c,this.lockSync(),!1);return this._fs.streamRead(t,n)}catch(i){c.error=i,c.hasError=!0}finally{g(c)}}streamWrite(t,n){const c={stack:[],error:void 0,hasError:!1};try{const i=l(c,this.lockSync(),!1);return this._fs.streamWrite(t,n)}catch(i){c.error=i,c.hasError=!0}finally{g(c)}}}function o(p){class t extends u{constructor(...c){super(),this._fs=new p(...c)}}return t}}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{Readonly:()=>f});var h=r(10);function f(v){class l extends v{constructor(...E){super(...E),this.attributes.set("no_write")}async rename(){throw(0,h.withErrno)("EROFS")}renameSync(){throw(0,h.withErrno)("EROFS")}async createFile(){throw(0,h.withErrno)("EROFS")}createFileSync(){throw(0,h.withErrno)("EROFS")}async unlink(){throw(0,h.withErrno)("EROFS")}unlinkSync(){throw(0,h.withErrno)("EROFS")}async rmdir(){throw(0,h.withErrno)("EROFS")}rmdirSync(){throw(0,h.withErrno)("EROFS")}async mkdir(){throw(0,h.withErrno)("EROFS")}mkdirSync(){throw(0,h.withErrno)("EROFS")}async link(){throw(0,h.withErrno)("EROFS")}linkSync(){throw(0,h.withErrno)("EROFS")}async touch(){throw(0,h.withErrno)("EROFS")}touchSync(){throw(0,h.withErrno)("EROFS")}async sync(){throw(0,h.withErrno)("EROFS")}syncSync(){throw(0,h.withErrno)("EROFS")}async write(){throw(0,h.withErrno)("EROFS")}writeSync(){throw(0,h.withErrno)("EROFS")}streamWrite(){throw(0,h.withErrno)("EROFS")}}return l}}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{Sync:()=>h});function h(f){class v extends f{async exists(g){return this.existsSync(g)}async rename(g,E){return this.renameSync(g,E)}async stat(g){return this.statSync(g)}async touch(g,E){return this.touchSync(g,E)}async createFile(g,E){return this.createFileSync(g,E)}async unlink(g){return this.unlinkSync(g)}async rmdir(g){return this.rmdirSync(g)}async mkdir(g,E){return this.mkdirSync(g,E)}async readdir(g){return this.readdirSync(g)}async link(g,E){return this.linkSync(g,E)}async sync(){return this.syncSync()}async read(g,E,u,o){return this.readSync(g,E,u,o)}async write(g,E,u){return this.writeSync(g,E,u)}}return v}}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{BigIntStatsFs:()=>l.BigIntStatsFs,Dir:()=>l.Dir,Dirent:()=>l.Dirent,IOC:()=>h.IOC,IOC32:()=>h.IOC32,ReadStream:()=>l.ReadStream,Stats:()=>l.Stats,StatsFs:()=>l.StatsFs,WriteStream:()=>l.WriteStream,access:()=>l.access,accessSync:()=>l.accessSync,appendFile:()=>l.appendFile,appendFileSync:()=>l.appendFileSync,chmod:()=>l.chmod,chmodSync:()=>l.chmodSync,chown:()=>l.chown,chownSync:()=>l.chownSync,chroot:()=>f.chroot,close:()=>l.close,closeSync:()=>l.closeSync,constants:()=>l.constants,copyFile:()=>l.copyFile,copyFileSync:()=>l.copyFileSync,cp:()=>l.cp,cpSync:()=>l.cpSync,createReadStream:()=>l.createReadStream,createWriteStream:()=>l.createWriteStream,exists:()=>l.exists,existsSync:()=>l.existsSync,fchmod:()=>l.fchmod,fchmodSync:()=>l.fchmodSync,fchown:()=>l.fchown,fchownSync:()=>l.fchownSync,fdatasync:()=>l.fdatasync,fdatasyncSync:()=>l.fdatasyncSync,fstat:()=>l.fstat,fstatSync:()=>l.fstatSync,fsync:()=>l.fsync,fsyncSync:()=>l.fsyncSync,ftruncate:()=>l.ftruncate,ftruncateSync:()=>l.ftruncateSync,futimes:()=>l.futimes,futimesSync:()=>l.futimesSync,glob:()=>l.glob,globSync:()=>l.globSync,ioctl:()=>h.ioctl,ioctlSync:()=>h.ioctlSync,lchmod:()=>l.lchmod,lchmodSync:()=>l.lchmodSync,lchown:()=>l.lchown,lchownSync:()=>l.lchownSync,link:()=>l.link,linkSync:()=>l.linkSync,lopenSync:()=>l.lopenSync,lstat:()=>l.lstat,lstatSync:()=>l.lstatSync,lutimes:()=>l.lutimes,lutimesSync:()=>l.lutimesSync,mkdir:()=>l.mkdir,mkdirSync:()=>l.mkdirSync,mkdtemp:()=>l.mkdtemp,mkdtempDisposableSync:()=>l.mkdtempDisposableSync,mkdtempSync:()=>l.mkdtempSync,mount:()=>f.mount,open:()=>l.open,openAsBlob:()=>l.openAsBlob,openSync:()=>l.openSync,opendir:()=>l.opendir,opendirSync:()=>l.opendirSync,promises:()=>l.promises,read:()=>l.read,readFile:()=>l.readFile,readFileSync:()=>l.readFileSync,readSync:()=>l.readSync,readdir:()=>l.readdir,readdirSync:()=>l.readdirSync,readlink:()=>l.readlink,readlinkSync:()=>l.readlinkSync,readv:()=>l.readv,readvSync:()=>l.readvSync,realpath:()=>l.realpath,realpathSync:()=>l.realpathSync,rename:()=>l.rename,renameSync:()=>l.renameSync,rm:()=>l.rm,rmSync:()=>l.rmSync,rmdir:()=>l.rmdir,rmdirSync:()=>l.rmdirSync,stat:()=>l.stat,statSync:()=>l.statSync,statfs:()=>l.statfs,statfsSync:()=>l.statfsSync,symlink:()=>l.symlink,symlinkSync:()=>l.symlinkSync,truncate:()=>l.truncate,truncateSync:()=>l.truncateSync,umount:()=>f.umount,unlink:()=>l.unlink,unlinkSync:()=>l.unlinkSync,unwatchFile:()=>l.unwatchFile,utimes:()=>l.utimes,utimesSync:()=>l.utimesSync,watch:()=>l.watch,watchFile:()=>l.watchFile,write:()=>l.write,writeFile:()=>l.writeFile,writeFileSync:()=>l.writeFileSync,writeSync:()=>l.writeSync,writev:()=>l.writev,writevSync:()=>l.writevSync,xattr:()=>v});var h=r(117),f=r(60),v=r(110),l=r(108)}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{IOC:()=>d,IOC32:()=>w,ioctl:()=>b,ioctlSync:()=>m});var h=r(10),f=r(33),v=r(36),l=r(12),g=r(43),E=r(47),u=r(46),o=r(60),p=function(e,s,y,S,D,R){function T(Q){if(Q!==void 0&&typeof Q!="function")throw new TypeError("Function expected");return Q}for(var A=S.kind,k=A==="getter"?"get":A==="setter"?"set":"value",N=!s&&e?S.static?e:e.prototype:null,K=s||(N?Object.getOwnPropertyDescriptor(N,S.name):{}),V,C=!1,B=y.length-1;B>=0;B--){var j={};for(var q in S)j[q]=q==="access"?{}:S[q];for(var q in S.access)j.access[q]=S.access[q];j.addInitializer=function(Q){if(C)throw new TypeError("Cannot add initializers after decoration has completed");R.push(T(Q||null))};var ae=(0,y[B])(A==="accessor"?{get:K.get,set:K.set}:K[k],j);if(A==="accessor"){if(ae===void 0)continue;if(ae===null||typeof ae!="object")throw new TypeError("Object expected");(V=T(ae.get))&&(K.get=V),(V=T(ae.set))&&(K.set=V),(V=T(ae.init))&&D.unshift(V)}else(V=T(ae))&&(A==="field"?D.unshift(V):K[k]=V)}N&&Object.defineProperty(N,S.name,K),C=!0},t=function(e,s,y){for(var S=arguments.length>2,D=0;D<s.length;D++)y=S?s[D].call(e,y):s[D].call(e);return S?y:void 0},n;(function(e){e[e.RealTime=1]="RealTime",e[e.PreAlloc=2]="PreAlloc",e[e.Immutable=8]="Immutable",e[e.Append=16]="Append",e[e.Sync=32]="Sync",e[e.NoAtime=64]="NoAtime",e[e.NoDump=128]="NoDump",e[e.RtInherit=256]="RtInherit",e[e.ProjInherit=512]="ProjInherit",e[e.NoSymlinks=1024]="NoSymlinks",e[e.ExtSize=2048]="ExtSize",e[e.ExtSzInherit=4096]="ExtSzInherit",e[e.NoDefrag=8192]="NoDefrag",e[e.FileStream=16384]="FileStream",e[e.Dax=32768]="Dax",e[e.CowExtSize=65536]="CowExtSize",e[e.HasAttr=2147483648]="HasAttr"})(n||(n={}));let c=(()=>{var e,s,y,S,D;let R=[(0,v.struct)("fsxattr")],T,A=[],k,N=(0,v.$from)(g.BufferView),K,V=[],C=[],B,j=[],q=[],ae,Q=[],ue=[],F,ie=[],me=[],oe,fe=[],le=[],we,ge=[],ee=[];var ne=class extends N{static{k=this}static{const ce=typeof Symbol=="function"&&Symbol.metadata?Object.create(N[Symbol.metadata]??null):void 0;K=[(e=v.types).uint32.bind(e)],B=[(s=v.types).uint32.bind(s)],ae=[(y=v.types).uint32.bind(y)],F=[(S=v.types).uint32.bind(S)],oe=[(D=v.types).uint32.bind(D)],we=[v.types.char(8)],p(this,null,K,{kind:"accessor",name:"xflags",static:!1,private:!1,access:{has:de=>"xflags"in de,get:de=>de.xflags,set:(de,be)=>{de.xflags=be}},metadata:ce},V,C),p(this,null,B,{kind:"accessor",name:"extsize",static:!1,private:!1,access:{has:de=>"extsize"in de,get:de=>de.extsize,set:(de,be)=>{de.extsize=be}},metadata:ce},j,q),p(this,null,ae,{kind:"accessor",name:"nextents",static:!1,private:!1,access:{has:de=>"nextents"in de,get:de=>de.nextents,set:(de,be)=>{de.nextents=be}},metadata:ce},Q,ue),p(this,null,F,{kind:"accessor",name:"projid",static:!1,private:!1,access:{has:de=>"projid"in de,get:de=>de.projid,set:(de,be)=>{de.projid=be}},metadata:ce},ie,me),p(this,null,oe,{kind:"accessor",name:"cowextsize",static:!1,private:!1,access:{has:de=>"cowextsize"in de,get:de=>de.cowextsize,set:(de,be)=>{de.cowextsize=be}},metadata:ce},fe,le),p(this,null,we,{kind:"accessor",name:"pad",static:!1,private:!1,access:{has:de=>"pad"in de,get:de=>de.pad,set:(de,be)=>{de.pad=be}},metadata:ce},ge,ee),p(null,T={value:k},R,{kind:"class",name:k.name,metadata:ce},null,A),ne=k=T.value,ce&&Object.defineProperty(k,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:ce}),t(k,A)}#e=t(this,V,void 0);get xflags(){return this.#e}set xflags(ce){this.#e=ce}#t=(t(this,C),t(this,j,void 0));get extsize(){return this.#t}set extsize(ce){this.#t=ce}#n=(t(this,q),t(this,Q,void 0));get nextents(){return this.#n}set nextents(ce){this.#n=ce}#r=(t(this,ue),t(this,ie,void 0));get projid(){return this.#r}set projid(ce){this.#r=ce}#i=(t(this,me),t(this,fe,void 0));get cowextsize(){return this.#i}set cowextsize(ce){this.#i=ce}#s=(t(this,le),t(this,ge,[]));get pad(){return this.#s}set pad(ce){this.#s=ce}constructor(ce=(0,l._throw)(new h.Exception(h.Errno.EINVAL,"fsxattr must be initialized with an inode"))){super(new ArrayBuffer((0,f.sizeof)(ne))),t(this,ee),this.extsize=ce.size,this.nextents=1,this.projid=ce.uid,this.cowextsize=ce.size;for(const de of Object.keys(E.InodeFlags))ce.flags&E.InodeFlags[de]&&de in n&&(this.xflags|=n[de])}};return ne=k})();var i;(function(e){e[e.SecureRm=1]="SecureRm",e[e.Undelete=2]="Undelete",e[e.Compress=4]="Compress",e[e.Sync=8]="Sync",e[e.Immutable=16]="Immutable",e[e.Append=32]="Append",e[e.NoDump=64]="NoDump",e[e.NoAtime=128]="NoAtime",e[e.Dirty=256]="Dirty",e[e.CompressBlk=512]="CompressBlk",e[e.NoCompress=1024]="NoCompress",e[e.Encrypt=2048]="Encrypt",e[e.Btree=4096]="Btree",e[e.Index=4096]="Index",e[e.IMagic=8192]="IMagic",e[e.JournalData=16384]="JournalData",e[e.NoTail=32768]="NoTail",e[e.DirSync=65536]="DirSync",e[e.TopDir=131072]="TopDir",e[e.HugeFile=262144]="HugeFile",e[e.Extent=524288]="Extent",e[e.Verity=1048576]="Verity",e[e.EaInode=2097152]="EaInode",e[e.EofBlocks=4194304]="EofBlocks",e[e.NoCow=8388608]="NoCow",e[e.Dax=33554432]="Dax",e[e.InlineData=268435456]="InlineData",e[e.ProjInherit=536870912]="ProjInherit",e[e.CaseFold=1073741824]="CaseFold",e[e.Reserved=2147483648]="Reserved"})(i||(i={}));var d;(function(e){e[e.GetFlags=2148034049]="GetFlags",e[e.SetFlags=1074292226]="SetFlags",e[e.GetVersion=2148038145]="GetVersion",e[e.SetVersion=1074296322]="SetVersion",e[e.Fiemap=3223348747]="Fiemap",e[e.GetXattr=2149341215]="GetXattr",e[e.SetXattr=1075599392]="SetXattr",e[e.GetLabel=2164298801]="GetLabel",e[e.SetLabel=1090556978]="SetLabel",e[e.GetUUID=2148603136]="GetUUID",e[e.GetSysfsPath=2155943169]="GetSysfsPath"})(d||(d={}));var w;(function(e){e[e.GetFlags=2147771905]="GetFlags",e[e.SetFlags=1074030082]="SetFlags",e[e.GetVersion=2147776001]="GetVersion",e[e.SetVersion=1074034178]="SetVersion"})(w||(w={}));async function b(e,s,...y){e=(0,u.normalizePath)(e);const{fs:S,path:D}=(0,o.resolveMount)(e,this);try{const R=new E.Inode(await S.stat(D));switch(s){case d.GetFlags:case w.GetFlags:return R.flags;case d.SetFlags:case w.SetFlags:R.flags=y[0],await S.touch(D,R);return;case d.GetVersion:case w.GetVersion:return R.version;case d.SetVersion:case w.SetVersion:R.version=y[0],await S.touch(D,R);return;case d.Fiemap:break;case d.GetXattr:return new c(R);case d.SetXattr:break;case d.GetLabel:return S.label;case d.SetLabel:S.label=y[0];return;case d.GetUUID:return S.uuid;case d.GetSysfsPath:return`/sys/fs/${S.name}/${S.uuid}`}}catch(R){throw(0,h.setUVMessage)(Object.assign(R,{syscall:"ioctl",path:e}))}throw(0,h.UV)("ENOTSUP","ioctl",e)}function m(e,s,...y){e=(0,u.normalizePath)(e);const{fs:S,path:D}=(0,o.resolveMount)(e,this);try{const R=new E.Inode(S.statSync(D));switch(s){case d.GetFlags:case w.GetFlags:return R.flags;case d.SetFlags:case w.SetFlags:R.flags=y[0],S.touchSync(D,R);return;case d.GetVersion:case w.GetVersion:return R.version;case d.SetVersion:case w.SetVersion:R.version=y[0],S.touchSync(D,R);return;case d.Fiemap:break;case d.GetXattr:return new c(R);case d.SetXattr:break;case d.GetLabel:return S.label;case d.SetLabel:S.label=y[0];return;case d.GetUUID:return S.uuid;case d.GetSysfsPath:return`/sys/fs/${S.name}/${S.uuid}`}}catch(R){throw(0,h.setUVMessage)(Object.assign(R,{syscall:"ioctl",path:e}))}throw(0,h.UV)("ENOTSUP","ioctl",e)}}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{DirType:()=>f.DirType,Dirent:()=>f.Dirent,Handle:()=>v.Handle,IOC:()=>l.IOC,IOC32:()=>l.IOC32,chroot:()=>g.chroot,deleteFD:()=>v.deleteFD,dtToIf:()=>f.dtToIf,fromFD:()=>v.fromFD,ifToDt:()=>f.ifToDt,ioctl:()=>l.ioctl,ioctlSync:()=>l.ioctlSync,link:()=>h.link,mkdir:()=>h.mkdir,mount:()=>g.mount,open:()=>h.open,readdir:()=>h.readdir,readlink:()=>h.readlink,rename:()=>h.rename,resolve:()=>h.resolve,sync:()=>E,toFD:()=>v.toFD,umount:()=>g.umount,xattr:()=>u});var h=r(55),f=r(57),v=r(58),l=r(117),g=r(60),E=r(64),u=r(110)}),(Y=>{"use strict";Y.exports=JSON.parse('{"name":"@zenfs/core","version":"2.4.4","description":"A filesystem, anywhere","funding":{"type":"individual","url":"https://github.com/sponsors/james-pre"},"main":"dist/index.js","types":"dist/index.d.ts","keywords":["filesystem","node","storage"],"bin":{"make-index":"scripts/make-index.js","zenfs-test":"scripts/test.js","zci":"scripts/ci-cli.js"},"files":["dist","tests","types","license.md","eslint.shared.js"],"type":"module","homepage":"https://zenfs.dev/core","author":"James Prevett <jp@jamespre.dev> (https://jamespre.dev)","contributors":["John Vilk <jvilk@cs.umass.edu>"],"license":"LGPL-3.0-or-later","repository":{"type":"git","url":"git+https://github.com/zen-fs/core.git"},"bugs":{"url":"https://github.com/zen-fs/core/issues"},"engines":{"node":">= 18"},"exports":{".":"./dist/index.js","./*":"./dist/*","./emulation/*":"./dist/node/*","./promises":"./dist/node/promises.js","./readline":"./dist/node/readline.js","./constants":"./dist/constants.js","./path":"./dist/path.js","./eslint":"./eslint.shared.js","./tests/*":"./tests/*","./types/*":"./types/*"},"publishConfig":{"access":"public","provenance":true},"scripts":{"format":"prettier --write .","format:check":"prettier --check .","spdx:check":"npx lice -a src tests/*.ts tests/**/*.test.ts","spdx:fix":"npx lice -aw src tests/*.ts tests/**/*.test.ts","lint":"eslint src tests","test":"npx zenfs-test --clean; npx zenfs-test -abcp; tests/fetch/run.sh; npx zenfs-test --report","build":"tsc -p tsconfig.json","build:docs":"typedoc","dev":"tsc -p tsconfig.json --watch","prepublishOnly":"npm run build"},"dependencies":{"@types/node":"^24.1.0","buffer":"^6.0.3","eventemitter3":"^5.0.1","kerium":"^1.3.4","memium":"^0.3.10","readable-stream":"^4.5.2","utilium":"^2.5.0"},"devDependencies":{"@eslint/js":"^9.8.0","@octokit/action":"^7.0.0","@types/eslint__js":"^8.42.3","c8":"^10.1.2","eslint":"^9.15.0","globals":"^16.0.0","prettier":"^3.2.5","tsx":"^4.19.1","typedoc":"^0.28.0","typescript":"^5.7.2","typescript-eslint":"^8.16.0"}}')}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{IndexedDB:()=>f.IndexedDB,IndexedDBStore:()=>f.IndexedDBStore,IndexedDBTransaction:()=>f.IndexedDBTransaction,WebAccess:()=>h.WebAccess,WebAccessFS:()=>h.WebAccessFS,WebStorage:()=>v.WebStorage,WebStorageStore:()=>v.WebStorageStore,XML:()=>l.XML,XMLFS:()=>l.XMLFS});var h=r(121),f=r(123),v=r(124),l=r(125)}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{WebAccess:()=>c,WebAccessFS:()=>t});var h=r(7),f=r(45),v=r(10),l=r(24),g=r(12),E=r(122);function u(i){return typeof i=="object"&&i!==null&&i.constructor.name=="SharedArrayBuffer"}function o(i){return i instanceof ArrayBuffer?i.resizable:u(i)?i.growable:!1}function p(i,d){return i.kind==d}class t extends(0,h.Async)(h.IndexFS){async _loadHandles(d,w){for await(const[b,m]of w.entries()){const e=(0,f.join)(d,b);this._handles.set(e,m),p(m,"directory")&&await this._loadHandles(e,m)}}async _loadMetadata(d){if(this._handles.set("/",this.root),await this._loadHandles("/",this.root),d){const m=await(await(await this.get("file",d)).getFile()).text(),e=JSON.parse(m);this.index.fromJSON(e);return}for(const[w,b]of this._handles){if(p(b,"file")){const{lastModified:m,size:e}=await b.getFile();this.index.set(w,new h.Inode({mode:420|h.constants.S_IFREG,size:e,mtimeMs:m}));continue}if(!p(b,"directory"))throw(0,v.withErrno)("EIO","Invalid handle");this.index.set(w,new h.Inode({mode:511|h.constants.S_IFDIR,size:0}))}}constructor(d,w=!1){super(2003133025,"webaccessfs"),this.root=d,this.disableHandleCache=w,this._handles=new Map,this._sync=h.InMemory.create({label:"accessfs-cache"}),this.attributes.set("no_buffer_resize",!0),w&&this.attributes.set("no_handle_cache",!0)}async stat(d){try{return await super.stat(d)}catch(w){if(w.code!="ENOENT")throw w;const b=await this.get(null,d),m=new h.Inode;if(p(b,"file")){const e=await b.getFile();m.update({mode:420|h.constants.S_IFREG,size:e.size,mtimeMs:e.lastModified})}else m.update({mode:h.constants.S_IFDIR|511,size:0});return this.index.set(d,m),m}}async readdir(d){const w=await this.get("directory",d);return await Array.fromAsync(w.keys())}async remove(d){const w=await this.get("directory",(0,f.dirname)(d));for(const b of this._handles.keys())(0,f.dirname)(b)==d&&this._handles.delete(b);this._handles.delete(d),await w.removeEntry((0,f.basename)(d),{recursive:!0}).catch(b=>(0,g._throw)((0,E.convertException)(b,d)))}removeSync(){throw v.log.crit((0,v.withErrno)("ENOSYS"))}async read(d,w,b,m){if(m<=b)return;const y=await(await(await this.get("file",d)).getFile()).arrayBuffer();if(y.byteLength<m-b)throw(0,l.alert)((0,v.withErrno)("EIO",["Unexpected mismatch in file data size. This should not happen.",`tried to read ${m-b} bytes but the file is ${y.byteLength} bytes.`,`path: ${d}`].join(`
`+" ".repeat(24))));w.set(new Uint8Array(y,b,m-b))}async write(d,w,b){if(o(w.buffer)||u(w.buffer)){const R=new Uint8Array(new ArrayBuffer(w.byteLength),w.byteOffset,w.byteLength);R.set(w),w=R}const m=this.index.get(d);if(!m)throw(0,v.withErrno)("ENOENT");const e=(m.mode&h.constants.S_IFMT)==h.constants.S_IFDIR;let s;try{s=await this.get(e?"directory":"file",d)}catch{s=await(await this.get("directory",(0,f.dirname)(d)))[e?"getDirectoryHandle":"getFileHandle"]((0,f.basename)(d),{create:!0}).catch(T=>(0,g._throw)((0,E.convertException)(T,d))),this.disableHandleCache||this._handles.set(d,s)}if(e)return;if(p(s,"directory")){v.log.crit((0,v.withErrno)("EIO","Mismatch in entry kind on write"));return}const y=await s.createWritable();try{await y.seek(b)}catch{await y.write({type:"seek",position:b})}await y.write(w),await y.close();const{size:S,lastModified:D}=await s.getFile();m.update({size:S,mtimeMs:D}),this.index.set(d,m)}async writeFile(d,w){return this.write(d,w,0)}async _mkdir(d){const b=await(await this.get("directory",(0,f.dirname)(d))).getDirectoryHandle((0,f.basename)(d),{create:!0}).catch(m=>(0,g._throw)((0,E.convertException)(m,d)));this.disableHandleCache||this._handles.set(d,b)}async get(d=null,w){const b=this._handles.get(w);if(!this.disableHandleCache&&b){if(d&&!p(b,d))throw(0,v.withErrno)(d=="directory"?"ENOTDIR":"EISDIR");return b}if(w=="/")return this.root;const m=w.slice(1).split("/");let e=this.root;for(let s=0;s<m.length-1;++s)e=await e.getDirectoryHandle(m[s]).catch(y=>(0,g._throw)((0,E.convertException)(y,w)));try{const s=await e[d=="file"?"getFileHandle":"getDirectoryHandle"](m.at(-1));return this.disableHandleCache||this._handles.set(w,s),s}catch(s){if(s.name!="TypeMismatchError")throw(0,E.convertException)(s,w);if(d===null){const y=await e.getFileHandle(m.at(-1)).catch(S=>(0,g._throw)((0,E.convertException)(S,w)));return this.disableHandleCache||this._handles.set(w,y),y}else throw(0,v.withErrno)(d=="file"?"EISDIR":"ENOTDIR")}}}const c={name:"WebAccess",options:{handle:{type:"object",required:!0},metadata:{type:"string",required:!1},disableHandleCache:{type:"boolean",required:!1}},async create(i){const d=new t(i.handle,i.disableHandleCache);return await d._loadMetadata(i.metadata),d}}}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{convertException:()=>v});var h=r(10);function f(l){switch(l.name){case"TypeMismatchError":return"EPERM";case"IndexSizeError":case"HierarchyRequestError":case"InvalidCharacterError":case"InvalidStateError":case"SyntaxError":case"NamespaceError":case"ConstraintError":case"VersionError":case"URLMismatchError":case"InvalidNodeTypeError":return"EINVAL";case"WrongDocumentError":return"EXDEV";case"NoModificationAllowedError":case"InvalidModificationError":case"InvalidAccessError":case"SecurityError":case"NotAllowedError":return"EACCES";case"NotFoundError":return"ENOENT";case"NotSupportedError":return"ENOTSUP";case"InUseAttributeError":return"EBUSY";case"NetworkError":return"ENETDOWN";case"AbortError":return"EINTR";case"QuotaExceededError":return"ENOSPC";case"TimeoutError":return"ETIMEDOUT";case"ReadOnlyError":return"EROFS";case"DataCloneError":case"EncodingError":case"NotReadableError":case"DataError":case"TransactionInactiveError":case"OperationError":case"UnknownError":default:return"EIO"}}function v(l,g){if(l instanceof h.Exception)return l;const E=l instanceof DOMException?h.Errno[f(l)]:h.Errno.EIO,u=new h.Exception(E,l.message);return u.stack=l.stack,Error.captureStackTrace?.(u,v),u.cause=l.cause,u}}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{IndexedDB:()=>n,IndexedDBStore:()=>u,IndexedDBTransaction:()=>g});var h=r(7),f=r(10),v=r(122);function l(c){return new Promise((i,d)=>{c.onsuccess=()=>i(c.result),c.onerror=w=>{w.preventDefault(),d((0,v.convertException)(c.error))}})}class g extends h.Transaction{async(i){this.asyncDone=this.asyncDone.then(()=>i)}constructor(i,d){super(d),this.tx=i,this.store=d,this.asyncDone=Promise.resolve(),this._idb=i.objectStore(d.name)}async keys(){return(await l(this._idb.getAllKeys())).map(Number)}async get(i){const d=await l(this._idb.get(i));return d&&this.store.cache.set(i,new Uint8Array(d)),d}getSync(i,d,w){if(!this.store.cache.has(i))return;const b=new Uint8Array(this.store.cache.get(i));return w??(w=b.byteLength),b.subarray(d,w)}async set(i,d){this.store.cache.set(i,new Uint8Array(d)),await l(this._idb.put(d,i))}setSync(i,d){this.async(this.set(i,d))}remove(i){return this.store.cache.delete(i),l(this._idb.delete(i))}removeSync(i){this.store.cache.delete(i),this.async(this.remove(i))}async commit(){await this.asyncDone;const{promise:i,resolve:d,reject:w}=Promise.withResolvers();return this.tx.oncomplete=()=>d(),this.tx.onerror=()=>w((0,v.convertException)(this.tx.error)),this.tx.commit(),i}async abort(){await this.asyncDone;const{promise:i,resolve:d,reject:w}=Promise.withResolvers();return this.tx.onabort=()=>d(),this.tx.onerror=()=>w((0,v.convertException)(this.tx.error)),this.tx.abort(),i}}async function E(c,i=globalThis.indexedDB){const d=i.open(c);return d.onupgradeneeded=()=>{const w=d.result;w.objectStoreNames.contains(c)&&(f.log.warn("Found unexpected object store: "+c),w.deleteObjectStore(c)),w.createObjectStore(c)},await l(d)}class u{constructor(i){this.db=i,this.cache=new Map}sync(){return Promise.resolve()}get name(){return this.db.name}transaction(){const i=this.db.transaction(this.name,"readwrite");return new g(i,this)}}const o=new WeakMap;async function p(c){if(!(c instanceof IDBFactory))return!1;try{const i=c.open("__zenfs_test");return await l(i),!0}catch{return!1}finally{c?.deleteDatabase("__zenfs_test")}}const n={name:"IndexedDB",options:{storeName:{type:"string",required:!1},idbFactory:{type:"object",required:!1}},async isAvailable({idbFactory:c=globalThis.indexedDB}){if(o.has(c))return o.get(c);const i=p(c);return o.set(c,i),i},async create(c){const i=await E(c.storeName||"zenfs",c.idbFactory),d=new u(i),w=new h.StoreFS(d);if(c?.disableAsyncCache)return f.log.notice("Async preloading disabled for IndexedDB"),w;const b=d.transaction();for(const m of await b.keys())await b.get(m);return w}}}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{WebStorage:()=>E,WebStorageStore:()=>l});var h=r(10),f=r(7),v=r(12);class l{get name(){return E.name}constructor(o){this.storage=o}clear(){this.storage.clear()}clearSync(){this.storage.clear()}async sync(){}transaction(){return new f.SyncMapTransaction(this)}keys(){return Object.keys(this.storage).map(o=>Number(o))}get(o){const p=this.storage.getItem(o.toString());if(typeof p=="string")return(0,v.encodeASCII)(p)}set(o,p){try{this.storage.setItem(o.toString(),(0,v.decodeASCII)(p))}catch{throw(0,h.withErrno)("ENOSPC")}}delete(o){try{this.storage.removeItem(o.toString())}catch(p){throw(0,h.withErrno)("EIO",`Unable to delete '${o}': ${p}`)}}}const E={name:"WebStorage",options:{storage:{type:"object",required:!1}},isAvailable(u){return(u?.storage??globalThis.localStorage)instanceof globalThis.Storage},create({storage:u=globalThis.localStorage}){return new f.StoreFS(new l(u))}}}),((Y,P,r)=>{"use strict";r.r(P),r.d(P,{XML:()=>t,XMLFS:()=>o});var h=r(10),f=r(7),v=r(45),l=r(12);function g(n){const c={};for(const i of f._inode_fields){const d=n.getAttribute(i);d!=null&&(c[i]=parseInt(d,16))}return new f.Inode(c)}function E(n,c){for(const i of Object.keys(c))!(i in f._inode_fields)||c[i]===void 0||n.setAttribute(i,c[i].toString(16))}function u(n,c=!1){let i;try{const d=c?n.textContent:n.getAttribute("paths");i=JSON.parse(d||"[]")}catch{i=[]}return i}class o extends(0,f.Sync)(f.FileSystem){constructor(c=new DOMParser().parseFromString("<fs></fs>","application/xml").documentElement){super(544763244,"xmltmpfs"),this.root=c;try{this.mkdirSync("/",{uid:0,gid:0,mode:511})}catch(i){const d=i;if(d.code!="EEXIST")throw d}}renameSync(c,i){const d=this.get("rename",c);this.remove("rename",d,c),this.add("rename",d,i)}statSync(c){return g(this.get("stat",c))}createFileSync(c,i){const d=this.statSync((0,v.dirname)(c)),w=new f.Inode({mode:i.mode|f.constants.S_IFREG,uid:d.mode&f.constants.S_ISUID?d.uid:i.uid,gid:d.mode&f.constants.S_ISGID?d.gid:i.gid});return this.create("createFile",c,w),w}unlinkSync(c){const i=this.get("unlink",c);if(g(i).mode&f.constants.S_IFDIR)throw(0,h.withErrno)("EISDIR");this.remove("unlink",i,c)}rmdirSync(c){const i=this.get("rmdir",c);if(i.textContent?.length)throw(0,h.withErrno)("ENOTEMPTY");if(!(g(i).mode&f.constants.S_IFDIR))throw(0,h.withErrno)("ENOTDIR");this.remove("rmdir",i,c)}mkdirSync(c,i){const d=this.statSync((0,v.dirname)(c)),w=new f.Inode({mode:i.mode|f.constants.S_IFDIR,uid:d.mode&f.constants.S_ISUID?d.uid:i.uid,gid:d.mode&f.constants.S_ISGID?d.gid:i.gid});return this.create("mkdir",c,w).textContent="[]",w}readdirSync(c){const i=this.get("readdir",c);if(!(g(i).mode&f.constants.S_IFDIR))throw(0,h.withErrno)("ENOTDIR");try{return JSON.parse(i.textContent)}catch(d){throw(0,h.withErrno)("EIO","Invalid directory listing: "+d)}}linkSync(c,i){const d=this.get("link",c);this.add("link",d,i)}touchSync(c,i){const d=this.get("touch",c);E(d,i)}syncSync(){}readSync(c,i,d,w){const b=this.get("read",c),m=(0,l.encodeASCII)(b.textContent.slice(d,w));i.set(m)}writeSync(c,i,d){const w=this.get("write",c),b=(0,l.decodeASCII)(i),m=w.textContent.slice(d+b.length);w.textContent=w.textContent.slice(0,d)+b+m}toString(){return new XMLSerializer().serializeToString(this.root)}get(c,i){const d=this.root.children;if(!d)throw(0,h.withErrno)("EIO");for(let w=0;w<d.length;w++)if(u(d[w]).includes(i))return d[w];throw(0,h.withErrno)("ENOENT")}create(c,i,d){if(this.existsSync(i))throw(0,h.withErrno)("EEXIST");const w=document.createElement("file");return this.add(c,w,i),E(w,new f.Inode({...d,uid:d.mode})),this.root.append(w),w}add(c,i,d,w=!1){const b=u(i,w);if(b.push(d),w){i.textContent=JSON.stringify(b);return}if(i.setAttribute("paths",JSON.stringify(b)),i.setAttribute("nlink",b.length.toString(16)),d!="/"){const m=this.get(c,(0,v.dirname)(d));this.add(c,m,(0,v.basename)(d),!0)}}remove(c,i,d,w=!1){const b=u(i,w),m=b.indexOf(d);if(m!=-1){if(b.splice(m,1),w){i.textContent=JSON.stringify(b);return}if(b.length?(i.setAttribute("paths",JSON.stringify(b)),i.setAttribute("nlink",b.length.toString(16))):i.remove(),d!="/"){const e=this.get(c,(0,v.dirname)(d));this.remove(c,e,(0,v.basename)(d),!0)}}}}const t={name:"XML",options:{root:{type:"object",required:!1}},isAvailable(){return!0},create(n){return new o(n.root)}}})],rt={};function Ce(Y){var P=rt[Y];if(P!==void 0)return P.exports;var r=rt[Y]={exports:{}};return dt[Y](r,r.exports,Ce),r.exports}Ce.n=Y=>{var P=Y&&Y.__esModule?()=>Y.default:()=>Y;return Ce.d(P,{a:P}),P},Ce.d=(Y,P)=>{for(var r in P)Ce.o(P,r)&&!Ce.o(Y,r)&&Object.defineProperty(Y,r,{enumerable:!0,get:P[r]})},Ce.o=(Y,P)=>Object.prototype.hasOwnProperty.call(Y,P),Ce.r=Y=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(Y,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(Y,"__esModule",{value:!0})};var Je={};(()=>{"use strict";Ce.r(Je),Ce.d(Je,{activate:()=>n});var Y=Ce(1),P=Ce.n(Y),r=Ce(2),h=Ce.n(r),f=Ce(4),v=Ce(7),l=Ce(120),g=Object.defineProperty,E=(w,b,m)=>b in w?g(w,b,{enumerable:!0,configurable:!0,writable:!0,value:m}):w[b]=m,u=(w,b,m)=>E(w,typeof b!="symbol"?b+"":b,m),o=(w,b,m)=>new Promise((e,s)=>{var y=R=>{try{D(m.next(R))}catch(T){s(T)}},S=R=>{try{D(m.throw(R))}catch(T){s(T)}},D=R=>R.done?e(R.value):Promise.resolve(R.value).then(y,S);D((m=m.apply(w,b)).next())});const p=new TextDecoder;function t(){return o(this,null,function*(){(yield v.promises.exists("/"))||(yield v.promises.mkdir("/",{recursive:!0}))})}function n(w){return o(this,null,function*(){yield(0,v.configureSingle)({backend:l.IndexedDB}),yield t(),console.log("Hello, MemFS!");const b=new c("memfs");w.subscriptions.push(b),w.subscriptions.push(Y.workspace.registerFileSystemProvider("memfs",b,{isCaseSensitive:!0})),w.subscriptions.push(Y.workspace.registerFileSearchProvider("memfs",new i(b))),w.subscriptions.push(Y.workspace.registerTextSearchProvider("memfs",new d(b))),w.subscriptions.push(Y.commands.registerCommand("memfs.workspaceInit",m=>{Y.workspace.updateWorkspaceFolders(0,0,{uri:Y.Uri.parse("memfs:/"),name:"MemFS"})})),w.subscriptions.push(Y.commands.registerCommand("memfs.reset",()=>o(null,null,function*(){for(const m of yield v.promises.readdir("/"))yield v.promises.rm(m,{recursive:!0,force:!0});Y.window.showInformationMessage("MemFS cleared, please reload the window.")})))})}class c{constructor(b){this.scheme=b,u(this,"onDidChangeFile",()=>new Y.Disposable(()=>{}))}dispose(){}writeData(b,m,e){return o(this,null,function*(){const s=typeof m=="string"?f.Buffer.from(m):m;yield this.writeFile(b,s,e)})}watch(b,m){return new Y.Disposable(()=>{})}stat(b){return o(this,null,function*(){const m=this.asFsPath(b);try{const e=yield v.promises.stat(m);return{type:this.toFileType(e),ctime:e.ctime.getTime(),mtime:e.mtime.getTime(),size:e.size}}catch(e){throw this.toFileSystemError(e,b)}})}readDirectory(b){return o(this,null,function*(){const m=this.asFsPath(b);try{const e=yield v.promises.readdir(m),s=[];for(const y of e){const S=Y.Uri.joinPath(b,y),D=yield v.promises.stat(this.asFsPath(S));s.push([y,this.toFileType(D)])}return s}catch(e){throw this.toFileSystemError(e,b)}})}readFile(b){return o(this,null,function*(){const m=this.asFsPath(b);try{const e=yield v.promises.readFile(m);return e instanceof Uint8Array?e:new Uint8Array(e)}catch(e){throw this.toFileSystemError(e,b)}})}writeFile(b,m,e){return o(this,null,function*(){const s=this.asFsPath(b);if(!(yield v.promises.exists(s))&&!e.create)throw Y.FileSystemError.FileNotFound(b);try{yield v.promises.writeFile(s,m,{flag:e.overwrite?"w":"wx"})}catch(y){throw this.toFileSystemError(y,b)}})}delete(b,m){return o(this,null,function*(){const e=this.asFsPath(b);try{yield v.promises.rm(e,{force:!0,recursive:m.recursive})}catch(s){throw this.toFileSystemError(s,b)}})}rename(b,m,e){return o(this,null,function*(){const s=this.asFsPath(b),y=this.asFsPath(m);try{e.overwrite&&(yield v.promises.exists(y))&&(yield v.promises.rm(y,{force:!0,recursive:!0})),yield v.promises.rename(s,y)}catch(S){throw this.toFileSystemError(S,b)}})}copy(b,m,e){return o(this,null,function*(){const s=this.asFsPath(b),y=this.asFsPath(m);try{if(!(yield v.promises.exists(s)))throw Y.FileSystemError.FileNotFound(b);if((yield v.promises.exists(y))&&!e.overwrite)throw Y.FileSystemError.FileExists(m);if(yield this.ensureParentDirectory(y),(yield v.promises.stat(s)).isDirectory())yield this.copyDirectory(b,m,e.overwrite);else{const S=yield v.promises.readFile(s);yield v.promises.writeFile(y,S instanceof Uint8Array?S:new Uint8Array(S))}}catch(S){throw this.toFileSystemError(S,b)}})}createDirectory(b){return o(this,null,function*(){const m=this.asFsPath(b);try{yield v.promises.mkdir(m,{recursive:!0})}catch(e){throw this.toFileSystemError(e,b)}})}copyDirectory(b,m,e){return o(this,null,function*(){const s=this.asFsPath(b),y=this.asFsPath(m);(yield v.promises.exists(y))||(yield v.promises.mkdir(y,{recursive:!0}));const S=yield v.promises.readdir(s);for(const D of S){const R=Y.Uri.joinPath(b,D),T=Y.Uri.joinPath(m,D);if((yield v.promises.stat(this.asFsPath(R))).isDirectory())yield this.copyDirectory(R,T,e);else{const k=yield v.promises.readFile(this.asFsPath(R));yield v.promises.writeFile(this.asFsPath(T),k instanceof Uint8Array?k:new Uint8Array(k))}}})}ensureParentDirectory(b){return o(this,null,function*(){const m=r.posix.dirname(b);m&&m!==b&&!(yield v.promises.exists(m))&&(yield v.promises.mkdir(m,{recursive:!0}))})}toFileType(b){return b.isFile()?Y.FileType.File:b.isDirectory()?Y.FileType.Directory:b.isSymbolicLink()?Y.FileType.SymbolicLink:Y.FileType.Unknown}asFsPath(b){if(b.scheme!==this.scheme)throw Y.FileSystemError.Unavailable(`Unsupported scheme: ${b.scheme}`);return b.path||"/"}toFileSystemError(b,m){var e;const s=b;switch(s?.code){case"ENOENT":return Y.FileSystemError.FileNotFound(m);case"EEXIST":return Y.FileSystemError.FileExists(m);case"EISDIR":return Y.FileSystemError.FileIsADirectory(m);case"ENOTDIR":return Y.FileSystemError.FileNotFound(m);default:return Y.FileSystemError.Unavailable((e=s?.message)!=null?e:"Unknown error")}}}class i{constructor(b){this.memFs=b}provideFileSearchResults(b,m,e){return o(this,null,function*(){const s=[],S=b.pattern.toLowerCase(),D=R=>o(this,null,function*(){if(!e.isCancellationRequested)try{const T=yield v.promises.readdir(R);for(const A of T){if(e.isCancellationRequested)return;const k=r.posix.join(R,A),N=yield v.promises.stat(k);if(N.isDirectory()){if(m.maxResults&&s.length>=m.maxResults)return;yield D(k)}else if(N.isFile()&&A.toLowerCase().includes(S)&&(s.push(Y.Uri.parse(`${this.memFs.scheme}:${k}`)),m.maxResults&&s.length>=m.maxResults))return}}catch{}});for(const R of m.includes||[]){if(e.isCancellationRequested)break;const T=R.path||"/";yield D(T)}return(!m.includes||m.includes.length===0)&&(yield D("/")),s})}}class d{constructor(b){this.memFs=b}provideTextSearchResults(b,m,e,s){return o(this,null,function*(){let y=!1,S=0;const D=b.isRegExp?new RegExp(b.pattern,b.isCaseSensitive?"g":"gi"):null,R=b.isCaseSensitive?b.pattern:b.pattern.toLowerCase(),T=k=>o(this,null,function*(){if(!(s.isCancellationRequested||y))try{const N=yield v.promises.readFile(k),V=p.decode(N).split(/\r?\n/),C=Y.Uri.parse(`${this.memFs.scheme}:${k}`);for(let B=0;B<V.length;B++){if(s.isCancellationRequested||y)return;const j=V[B],q=b.isCaseSensitive?j:j.toLowerCase();if(D){D.lastIndex=0;let ae;for(;(ae=D.exec(j))!==null&&!y&&!s.isCancellationRequested;)if(e.report({uri:C,ranges:new Y.Range(B,ae.index,B,ae.index+ae[0].length),preview:{text:j,matches:new Y.Range(0,ae.index,0,ae.index+ae[0].length)}}),S++,m.maxResults&&S>=m.maxResults){y=!0;return}}else{let ae=0,Q;for(;(Q=q.indexOf(R,ae))!==-1&&!y&&!s.isCancellationRequested;){if(e.report({uri:C,ranges:new Y.Range(B,Q,B,Q+R.length),preview:{text:j,matches:new Y.Range(0,Q,0,Q+R.length)}}),S++,m.maxResults&&S>=m.maxResults){y=!0;return}ae=Q+1}}}}catch{}}),A=k=>o(this,null,function*(){if(!(s.isCancellationRequested||y))try{const N=yield v.promises.readdir(k);for(const K of N){if(s.isCancellationRequested||y)return;const V=r.posix.join(k,K),C=yield v.promises.stat(V);C.isDirectory()?yield A(V):C.isFile()&&(yield T(V))}}catch{}});for(const k of m.includes||[]){if(s.isCancellationRequested||y)break;const N=k.path||"/";yield A(N)}return(!m.includes||m.includes.length===0)&&(yield A("/")),{limitHit:y}})}}})();var it=exports;for(var st in Je)it[st]=Je[st];Je.__esModule&&Object.defineProperty(it,"__esModule",{value:!0})})();

//# sourceMappingURL=extension.js.map